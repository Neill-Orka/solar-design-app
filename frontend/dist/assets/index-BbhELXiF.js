var j6=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var pme=j6(($me,pm)=>{function S6(t,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in t)){const i=Object.getOwnPropertyDescriptor(s,r);i&&Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();var ef=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var t0={exports:{}},tf={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ok;function C6(){if(Ok)return tf;Ok=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,r,i){var o=null;if(i!==void 0&&(o=""+i),r.key!==void 0&&(o=""+r.key),"key"in r){i={};for(var c in r)c!=="key"&&(i[c]=r[c])}else i=r;return r=i.ref,{$$typeof:t,type:s,key:o,ref:r!==void 0?r:null,props:i}}return tf.Fragment=e,tf.jsx=n,tf.jsxs=n,tf}var Pk;function N6(){return Pk||(Pk=1,t0.exports=C6()),t0.exports}var a=N6(),n0={exports:{}},Pt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lk;function k6(){if(Lk)return Pt;Lk=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),h=Symbol.iterator;function g(D){return D===null||typeof D!="object"?null:(D=h&&D[h]||D["@@iterator"],typeof D=="function"?D:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,A={};function _(D,B,se){this.props=D,this.context=B,this.refs=A,this.updater=se||x}_.prototype.isReactComponent={},_.prototype.setState=function(D,B){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,B,"setState")},_.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function j(){}j.prototype=_.prototype;function C(D,B,se){this.props=D,this.context=B,this.refs=A,this.updater=se||x}var k=C.prototype=new j;k.constructor=C,b(k,_.prototype),k.isPureReactComponent=!0;var E=Array.isArray,N={H:null,A:null,T:null,S:null,V:null},L=Object.prototype.hasOwnProperty;function M(D,B,se,le,ae,te){return se=te.ref,{$$typeof:t,type:D,key:B,ref:se!==void 0?se:null,props:te}}function T(D,B){return M(D.type,B,void 0,void 0,void 0,D.props)}function O(D){return typeof D=="object"&&D!==null&&D.$$typeof===t}function I(D){var B={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(se){return B[se]})}var $=/\/+/g;function H(D,B){return typeof D=="object"&&D!==null&&D.key!=null?I(""+D.key):B.toString(36)}function V(){}function G(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(V,V):(D.status="pending",D.then(function(B){D.status==="pending"&&(D.status="fulfilled",D.value=B)},function(B){D.status==="pending"&&(D.status="rejected",D.reason=B)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function U(D,B,se,le,ae){var te=typeof D;(te==="undefined"||te==="boolean")&&(D=null);var X=!1;if(D===null)X=!0;else switch(te){case"bigint":case"string":case"number":X=!0;break;case"object":switch(D.$$typeof){case t:case e:X=!0;break;case m:return X=D._init,U(X(D._payload),B,se,le,ae)}}if(X)return ae=ae(D),X=le===""?"."+H(D,0):le,E(ae)?(se="",X!=null&&(se=X.replace($,"$&/")+"/"),U(ae,B,se,"",function(Ke){return Ke})):ae!=null&&(O(ae)&&(ae=T(ae,se+(ae.key==null||D&&D.key===ae.key?"":(""+ae.key).replace($,"$&/")+"/")+X)),B.push(ae)),1;X=0;var de=le===""?".":le+":";if(E(D))for(var Ne=0;Ne<D.length;Ne++)le=D[Ne],te=de+H(le,Ne),X+=U(le,B,se,te,ae);else if(Ne=g(D),typeof Ne=="function")for(D=Ne.call(D),Ne=0;!(le=D.next()).done;)le=le.value,te=de+H(le,Ne++),X+=U(le,B,se,te,ae);else if(te==="object"){if(typeof D.then=="function")return U(G(D),B,se,le,ae);throw B=String(D),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.")}return X}function R(D,B,se){if(D==null)return D;var le=[],ae=0;return U(D,le,"","",function(te){return B.call(se,te,ae++)}),le}function P(D){if(D._status===-1){var B=D._result;B=B(),B.then(function(se){(D._status===0||D._status===-1)&&(D._status=1,D._result=se)},function(se){(D._status===0||D._status===-1)&&(D._status=2,D._result=se)}),D._status===-1&&(D._status=0,D._result=B)}if(D._status===1)return D._result.default;throw D._result}var Z=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var B=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(B))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function ne(){}return Pt.Children={map:R,forEach:function(D,B,se){R(D,function(){B.apply(this,arguments)},se)},count:function(D){var B=0;return R(D,function(){B++}),B},toArray:function(D){return R(D,function(B){return B})||[]},only:function(D){if(!O(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},Pt.Component=_,Pt.Fragment=n,Pt.Profiler=r,Pt.PureComponent=C,Pt.StrictMode=s,Pt.Suspense=u,Pt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,Pt.__COMPILER_RUNTIME={__proto__:null,c:function(D){return N.H.useMemoCache(D)}},Pt.cache=function(D){return function(){return D.apply(null,arguments)}},Pt.cloneElement=function(D,B,se){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var le=b({},D.props),ae=D.key,te=void 0;if(B!=null)for(X in B.ref!==void 0&&(te=void 0),B.key!==void 0&&(ae=""+B.key),B)!L.call(B,X)||X==="key"||X==="__self"||X==="__source"||X==="ref"&&B.ref===void 0||(le[X]=B[X]);var X=arguments.length-2;if(X===1)le.children=se;else if(1<X){for(var de=Array(X),Ne=0;Ne<X;Ne++)de[Ne]=arguments[Ne+2];le.children=de}return M(D.type,ae,void 0,void 0,te,le)},Pt.createContext=function(D){return D={$$typeof:o,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:i,_context:D},D},Pt.createElement=function(D,B,se){var le,ae={},te=null;if(B!=null)for(le in B.key!==void 0&&(te=""+B.key),B)L.call(B,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(ae[le]=B[le]);var X=arguments.length-2;if(X===1)ae.children=se;else if(1<X){for(var de=Array(X),Ne=0;Ne<X;Ne++)de[Ne]=arguments[Ne+2];ae.children=de}if(D&&D.defaultProps)for(le in X=D.defaultProps,X)ae[le]===void 0&&(ae[le]=X[le]);return M(D,te,void 0,void 0,null,ae)},Pt.createRef=function(){return{current:null}},Pt.forwardRef=function(D){return{$$typeof:c,render:D}},Pt.isValidElement=O,Pt.lazy=function(D){return{$$typeof:m,_payload:{_status:-1,_result:D},_init:P}},Pt.memo=function(D,B){return{$$typeof:f,type:D,compare:B===void 0?null:B}},Pt.startTransition=function(D){var B=N.T,se={};N.T=se;try{var le=D(),ae=N.S;ae!==null&&ae(se,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(ne,Z)}catch(te){Z(te)}finally{N.T=B}},Pt.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},Pt.use=function(D){return N.H.use(D)},Pt.useActionState=function(D,B,se){return N.H.useActionState(D,B,se)},Pt.useCallback=function(D,B){return N.H.useCallback(D,B)},Pt.useContext=function(D){return N.H.useContext(D)},Pt.useDebugValue=function(){},Pt.useDeferredValue=function(D,B){return N.H.useDeferredValue(D,B)},Pt.useEffect=function(D,B,se){var le=N.H;if(typeof se=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return le.useEffect(D,B)},Pt.useId=function(){return N.H.useId()},Pt.useImperativeHandle=function(D,B,se){return N.H.useImperativeHandle(D,B,se)},Pt.useInsertionEffect=function(D,B){return N.H.useInsertionEffect(D,B)},Pt.useLayoutEffect=function(D,B){return N.H.useLayoutEffect(D,B)},Pt.useMemo=function(D,B){return N.H.useMemo(D,B)},Pt.useOptimistic=function(D,B){return N.H.useOptimistic(D,B)},Pt.useReducer=function(D,B,se){return N.H.useReducer(D,B,se)},Pt.useRef=function(D){return N.H.useRef(D)},Pt.useState=function(D){return N.H.useState(D)},Pt.useSyncExternalStore=function(D,B,se){return N.H.useSyncExternalStore(D,B,se)},Pt.useTransition=function(){return N.H.useTransition()},Pt.version="19.1.1",Pt}var Fk;function Hy(){return Fk||(Fk=1,n0.exports=k6()),n0.exports}var v=Hy();const fe=Vu(v),Wg=S6({__proto__:null,default:fe},[v]);var s0={exports:{}},nf={},r0={exports:{}},a0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bk;function D6(){return Bk||(Bk=1,(function(t){function e(R,P){var Z=R.length;R.push(P);e:for(;0<Z;){var ne=Z-1>>>1,D=R[ne];if(0<r(D,P))R[ne]=P,R[Z]=D,Z=ne;else break e}}function n(R){return R.length===0?null:R[0]}function s(R){if(R.length===0)return null;var P=R[0],Z=R.pop();if(Z!==P){R[0]=Z;e:for(var ne=0,D=R.length,B=D>>>1;ne<B;){var se=2*(ne+1)-1,le=R[se],ae=se+1,te=R[ae];if(0>r(le,Z))ae<D&&0>r(te,le)?(R[ne]=te,R[ae]=Z,ne=ae):(R[ne]=le,R[se]=Z,ne=se);else if(ae<D&&0>r(te,Z))R[ne]=te,R[ae]=Z,ne=ae;else break e}}return P}function r(R,P){var Z=R.sortIndex-P.sortIndex;return Z!==0?Z:R.id-P.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],f=[],m=1,h=null,g=3,x=!1,b=!1,A=!1,_=!1,j=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function E(R){for(var P=n(f);P!==null;){if(P.callback===null)s(f);else if(P.startTime<=R)s(f),P.sortIndex=P.expirationTime,e(u,P);else break;P=n(f)}}function N(R){if(A=!1,E(R),!b)if(n(u)!==null)b=!0,L||(L=!0,H());else{var P=n(f);P!==null&&U(N,P.startTime-R)}}var L=!1,M=-1,T=5,O=-1;function I(){return _?!0:!(t.unstable_now()-O<T)}function $(){if(_=!1,L){var R=t.unstable_now();O=R;var P=!0;try{e:{b=!1,A&&(A=!1,C(M),M=-1),x=!0;var Z=g;try{t:{for(E(R),h=n(u);h!==null&&!(h.expirationTime>R&&I());){var ne=h.callback;if(typeof ne=="function"){h.callback=null,g=h.priorityLevel;var D=ne(h.expirationTime<=R);if(R=t.unstable_now(),typeof D=="function"){h.callback=D,E(R),P=!0;break t}h===n(u)&&s(u),E(R)}else s(u);h=n(u)}if(h!==null)P=!0;else{var B=n(f);B!==null&&U(N,B.startTime-R),P=!1}}break e}finally{h=null,g=Z,x=!1}P=void 0}}finally{P?H():L=!1}}}var H;if(typeof k=="function")H=function(){k($)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,G=V.port2;V.port1.onmessage=$,H=function(){G.postMessage(null)}}else H=function(){j($,0)};function U(R,P){M=j(function(){R(t.unstable_now())},P)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function(R){switch(g){case 1:case 2:case 3:var P=3;break;default:P=g}var Z=g;g=P;try{return R()}finally{g=Z}},t.unstable_requestPaint=function(){_=!0},t.unstable_runWithPriority=function(R,P){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var Z=g;g=R;try{return P()}finally{g=Z}},t.unstable_scheduleCallback=function(R,P,Z){var ne=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?ne+Z:ne):Z=ne,R){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=Z+D,R={id:m++,callback:P,priorityLevel:R,startTime:Z,expirationTime:D,sortIndex:-1},Z>ne?(R.sortIndex=Z,e(f,R),n(u)===null&&R===n(f)&&(A?(C(M),M=-1):A=!0,U(N,Z-ne))):(R.sortIndex=D,e(u,R),b||x||(b=!0,L||(L=!0,H()))),R},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(R){var P=g;return function(){var Z=g;g=P;try{return R.apply(this,arguments)}finally{g=Z}}}})(a0)),a0}var Ik;function E6(){return Ik||(Ik=1,r0.exports=D6()),r0.exports}var i0={exports:{}},Ss={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vk;function T6(){if(Vk)return Ss;Vk=1;var t=Hy();function e(u){var f="https://react.dev/errors/"+u;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)f+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+u+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function i(u,f,m){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:h==null?null:""+h,children:u,containerInfo:f,implementation:m}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(u,f){if(u==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Ss.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Ss.createPortal=function(u,f){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return i(u,f,null,m)},Ss.flushSync=function(u){var f=o.T,m=s.p;try{if(o.T=null,s.p=2,u)return u()}finally{o.T=f,s.p=m,s.d.f()}},Ss.preconnect=function(u,f){typeof u=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,s.d.C(u,f))},Ss.prefetchDNS=function(u){typeof u=="string"&&s.d.D(u)},Ss.preinit=function(u,f){if(typeof u=="string"&&f&&typeof f.as=="string"){var m=f.as,h=c(m,f.crossOrigin),g=typeof f.integrity=="string"?f.integrity:void 0,x=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;m==="style"?s.d.S(u,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:h,integrity:g,fetchPriority:x}):m==="script"&&s.d.X(u,{crossOrigin:h,integrity:g,fetchPriority:x,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Ss.preinitModule=function(u,f){if(typeof u=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var m=c(f.as,f.crossOrigin);s.d.M(u,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&s.d.M(u)},Ss.preload=function(u,f){if(typeof u=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var m=f.as,h=c(m,f.crossOrigin);s.d.L(u,m,{crossOrigin:h,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Ss.preloadModule=function(u,f){if(typeof u=="string")if(f){var m=c(f.as,f.crossOrigin);s.d.m(u,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else s.d.m(u)},Ss.requestFormReset=function(u){s.d.r(u)},Ss.unstable_batchedUpdates=function(u,f){return u(f)},Ss.useFormState=function(u,f,m){return o.H.useFormState(u,f,m)},Ss.useFormStatus=function(){return o.H.useHostTransitionStatus()},Ss.version="19.1.1",Ss}var zk;function fO(){if(zk)return i0.exports;zk=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),i0.exports=T6(),i0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $k;function M6(){if($k)return nf;$k=1;var t=E6(),e=Hy(),n=fO();function s(l){var d="https://react.dev/errors/"+l;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+l+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function i(l){var d=l,p=l;if(l.alternate)for(;d.return;)d=d.return;else{l=d;do d=l,(d.flags&4098)!==0&&(p=d.return),l=d.return;while(l)}return d.tag===3?p:null}function o(l){if(l.tag===13){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function c(l){if(i(l)!==l)throw Error(s(188))}function u(l){var d=l.alternate;if(!d){if(d=i(l),d===null)throw Error(s(188));return d!==l?null:l}for(var p=l,y=d;;){var w=p.return;if(w===null)break;var S=w.alternate;if(S===null){if(y=w.return,y!==null){p=y;continue}break}if(w.child===S.child){for(S=w.child;S;){if(S===p)return c(w),l;if(S===y)return c(w),d;S=S.sibling}throw Error(s(188))}if(p.return!==y.return)p=w,y=S;else{for(var F=!1,W=w.child;W;){if(W===p){F=!0,p=w,y=S;break}if(W===y){F=!0,y=w,p=S;break}W=W.sibling}if(!F){for(W=S.child;W;){if(W===p){F=!0,p=S,y=w;break}if(W===y){F=!0,y=S,p=w;break}W=W.sibling}if(!F)throw Error(s(189))}}if(p.alternate!==y)throw Error(s(190))}if(p.tag!==3)throw Error(s(188));return p.stateNode.current===p?l:d}function f(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l;for(l=l.child;l!==null;){if(d=f(l),d!==null)return d;l=l.sibling}return null}var m=Object.assign,h=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),j=Symbol.for("react.provider"),C=Symbol.for("react.consumer"),k=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),I=Symbol.for("react.memo_cache_sentinel"),$=Symbol.iterator;function H(l){return l===null||typeof l!="object"?null:(l=$&&l[$]||l["@@iterator"],typeof l=="function"?l:null)}var V=Symbol.for("react.client.reference");function G(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===V?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case b:return"Fragment";case _:return"Profiler";case A:return"StrictMode";case N:return"Suspense";case L:return"SuspenseList";case O:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case x:return"Portal";case k:return(l.displayName||"Context")+".Provider";case C:return(l._context.displayName||"Context")+".Consumer";case E:var d=l.render;return l=l.displayName,l||(l=d.displayName||d.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case M:return d=l.displayName||null,d!==null?d:G(l.type)||"Memo";case T:d=l._payload,l=l._init;try{return G(l(d))}catch{}}return null}var U=Array.isArray,R=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z={pending:!1,data:null,method:null,action:null},ne=[],D=-1;function B(l){return{current:l}}function se(l){0>D||(l.current=ne[D],ne[D]=null,D--)}function le(l,d){D++,ne[D]=l.current,l.current=d}var ae=B(null),te=B(null),X=B(null),de=B(null);function Ne(l,d){switch(le(X,d),le(te,l),le(ae,null),d.nodeType){case 9:case 11:l=(l=d.documentElement)&&(l=l.namespaceURI)?lk(l):0;break;default:if(l=d.tagName,d=d.namespaceURI)d=lk(d),l=ck(d,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}se(ae),le(ae,l)}function Ke(){se(ae),se(te),se(X)}function ce(l){l.memoizedState!==null&&le(de,l);var d=ae.current,p=ck(d,l.type);d!==p&&(le(te,l),le(ae,p))}function xe(l){te.current===l&&(se(ae),se(te)),de.current===l&&(se(de),Kd._currentValue=Z)}var Te=Object.prototype.hasOwnProperty,Ie=t.unstable_scheduleCallback,Ue=t.unstable_cancelCallback,Ze=t.unstable_shouldYield,mt=t.unstable_requestPaint,gt=t.unstable_now,dt=t.unstable_getCurrentPriorityLevel,Pe=t.unstable_ImmediatePriority,q=t.unstable_UserBlockingPriority,oe=t.unstable_NormalPriority,Ae=t.unstable_LowPriority,He=t.unstable_IdlePriority,We=t.log,Ve=t.unstable_setDisableYieldValue,ee=null,De=null;function be(l){if(typeof We=="function"&&Ve(l),De&&typeof De.setStrictMode=="function")try{De.setStrictMode(ee,l)}catch{}}var J=Math.clz32?Math.clz32:$e,ie=Math.log,Be=Math.LN2;function $e(l){return l>>>=0,l===0?32:31-(ie(l)/Be|0)|0}var Y=256,pe=4194304;function we(l){var d=l&42;if(d!==0)return d;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function ze(l,d,p){var y=l.pendingLanes;if(y===0)return 0;var w=0,S=l.suspendedLanes,F=l.pingedLanes;l=l.warmLanes;var W=y&134217727;return W!==0?(y=W&~S,y!==0?w=we(y):(F&=W,F!==0?w=we(F):p||(p=W&~l,p!==0&&(w=we(p))))):(W=y&~S,W!==0?w=we(W):F!==0?w=we(F):p||(p=y&~l,p!==0&&(w=we(p)))),w===0?0:d!==0&&d!==w&&(d&S)===0&&(S=w&-w,p=d&-d,S>=p||S===32&&(p&4194048)!==0)?d:w}function ve(l,d){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&d)===0}function Le(l,d){switch(l){case 1:case 2:case 4:case 8:case 64:return d+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ye(){var l=Y;return Y<<=1,(Y&4194048)===0&&(Y=256),l}function Ee(){var l=pe;return pe<<=1,(pe&62914560)===0&&(pe=4194304),l}function Q(l){for(var d=[],p=0;31>p;p++)d.push(l);return d}function he(l,d){l.pendingLanes|=d,d!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function qe(l,d,p,y,w,S){var F=l.pendingLanes;l.pendingLanes=p,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=p,l.entangledLanes&=p,l.errorRecoveryDisabledLanes&=p,l.shellSuspendCounter=0;var W=l.entanglements,re=l.expirationTimes,Se=l.hiddenUpdates;for(p=F&~p;0<p;){var Ye=31-J(p),Xe=1<<Ye;W[Ye]=0,re[Ye]=-1;var ke=Se[Ye];if(ke!==null)for(Se[Ye]=null,Ye=0;Ye<ke.length;Ye++){var Me=ke[Ye];Me!==null&&(Me.lane&=-536870913)}p&=~Xe}y!==0&&K(l,y,0),S!==0&&w===0&&l.tag!==0&&(l.suspendedLanes|=S&~(F&~d))}function K(l,d,p){l.pendingLanes|=d,l.suspendedLanes&=~d;var y=31-J(d);l.entangledLanes|=d,l.entanglements[y]=l.entanglements[y]|1073741824|p&4194090}function Qe(l,d){var p=l.entangledLanes|=d;for(l=l.entanglements;p;){var y=31-J(p),w=1<<y;w&d|l[y]&d&&(l[y]|=d),p&=~w}}function Je(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function rt(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function bt(){var l=P.p;return l!==0?l:(l=window.event,l===void 0?32:kk(l.type))}function jt(l,d){var p=P.p;try{return P.p=l,d()}finally{P.p=p}}var ln=Math.random().toString(36).slice(2),Ft="__reactFiber$"+ln,Bn="__reactProps$"+ln,$s="__reactContainer$"+ln,Qr="__reactEvents$"+ln,ha="__reactListeners$"+ln,qx="__reactHandles$"+ln,lc="__reactResources$"+ln,Ko="__reactMarker$"+ln;function Gx(l){delete l[Ft],delete l[Bn],delete l[Qr],delete l[ha],delete l[qx]}function cc(l){var d=l[Ft];if(d)return d;for(var p=l.parentNode;p;){if(d=p[$s]||p[Ft]){if(p=d.alternate,d.child!==null||p!==null&&p.child!==null)for(l=hk(l);l!==null;){if(p=l[Ft])return p;l=hk(l)}return d}l=p,p=l.parentNode}return null}function uc(l){if(l=l[Ft]||l[$s]){var d=l.tag;if(d===5||d===6||d===13||d===26||d===27||d===3)return l}return null}function od(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l.stateNode;throw Error(s(33))}function dc(l){var d=l[lc];return d||(d=l[lc]={hoistableStyles:new Map,hoistableScripts:new Map}),d}function os(l){l[Ko]=!0}var XS=new Set,ZS={};function Qo(l,d){fc(l,d),fc(l+"Capture",d)}function fc(l,d){for(ZS[l]=d,l=0;l<d.length;l++)XS.add(d[l])}var gI=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),JS={},e1={};function yI(l){return Te.call(e1,l)?!0:Te.call(JS,l)?!1:gI.test(l)?e1[l]=!0:(JS[l]=!0,!1)}function ym(l,d,p){if(yI(d))if(p===null)l.removeAttribute(d);else{switch(typeof p){case"undefined":case"function":case"symbol":l.removeAttribute(d);return;case"boolean":var y=d.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){l.removeAttribute(d);return}}l.setAttribute(d,""+p)}}function xm(l,d,p){if(p===null)l.removeAttribute(d);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(d);return}l.setAttribute(d,""+p)}}function Qa(l,d,p,y){if(y===null)l.removeAttribute(p);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(p);return}l.setAttributeNS(d,p,""+y)}}var Kx,t1;function hc(l){if(Kx===void 0)try{throw Error()}catch(p){var d=p.stack.trim().match(/\n( *(at )?)/);Kx=d&&d[1]||"",t1=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Kx+l+t1}var Qx=!1;function Xx(l,d){if(!l||Qx)return"";Qx=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(d){var Xe=function(){throw Error()};if(Object.defineProperty(Xe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Xe,[])}catch(Me){var ke=Me}Reflect.construct(l,[],Xe)}else{try{Xe.call()}catch(Me){ke=Me}l.call(Xe.prototype)}}else{try{throw Error()}catch(Me){ke=Me}(Xe=l())&&typeof Xe.catch=="function"&&Xe.catch(function(){})}}catch(Me){if(Me&&ke&&typeof Me.stack=="string")return[Me.stack,ke.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var w=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");w&&w.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var S=y.DetermineComponentFrameRoot(),F=S[0],W=S[1];if(F&&W){var re=F.split(`
`),Se=W.split(`
`);for(w=y=0;y<re.length&&!re[y].includes("DetermineComponentFrameRoot");)y++;for(;w<Se.length&&!Se[w].includes("DetermineComponentFrameRoot");)w++;if(y===re.length||w===Se.length)for(y=re.length-1,w=Se.length-1;1<=y&&0<=w&&re[y]!==Se[w];)w--;for(;1<=y&&0<=w;y--,w--)if(re[y]!==Se[w]){if(y!==1||w!==1)do if(y--,w--,0>w||re[y]!==Se[w]){var Ye=`
`+re[y].replace(" at new "," at ");return l.displayName&&Ye.includes("<anonymous>")&&(Ye=Ye.replace("<anonymous>",l.displayName)),Ye}while(1<=y&&0<=w);break}}}finally{Qx=!1,Error.prepareStackTrace=p}return(p=l?l.displayName||l.name:"")?hc(p):""}function xI(l){switch(l.tag){case 26:case 27:case 5:return hc(l.type);case 16:return hc("Lazy");case 13:return hc("Suspense");case 19:return hc("SuspenseList");case 0:case 15:return Xx(l.type,!1);case 11:return Xx(l.type.render,!1);case 1:return Xx(l.type,!0);case 31:return hc("Activity");default:return""}}function n1(l){try{var d="";do d+=xI(l),l=l.return;while(l);return d}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}function Ar(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function s1(l){var d=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function bI(l){var d=s1(l)?"checked":"value",p=Object.getOwnPropertyDescriptor(l.constructor.prototype,d),y=""+l[d];if(!l.hasOwnProperty(d)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var w=p.get,S=p.set;return Object.defineProperty(l,d,{configurable:!0,get:function(){return w.call(this)},set:function(F){y=""+F,S.call(this,F)}}),Object.defineProperty(l,d,{enumerable:p.enumerable}),{getValue:function(){return y},setValue:function(F){y=""+F},stopTracking:function(){l._valueTracker=null,delete l[d]}}}}function bm(l){l._valueTracker||(l._valueTracker=bI(l))}function r1(l){if(!l)return!1;var d=l._valueTracker;if(!d)return!0;var p=d.getValue(),y="";return l&&(y=s1(l)?l.checked?"true":"false":l.value),l=y,l!==p?(d.setValue(l),!0):!1}function vm(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var vI=/[\n"\\]/g;function wr(l){return l.replace(vI,function(d){return"\\"+d.charCodeAt(0).toString(16)+" "})}function Zx(l,d,p,y,w,S,F,W){l.name="",F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"?l.type=F:l.removeAttribute("type"),d!=null?F==="number"?(d===0&&l.value===""||l.value!=d)&&(l.value=""+Ar(d)):l.value!==""+Ar(d)&&(l.value=""+Ar(d)):F!=="submit"&&F!=="reset"||l.removeAttribute("value"),d!=null?Jx(l,F,Ar(d)):p!=null?Jx(l,F,Ar(p)):y!=null&&l.removeAttribute("value"),w==null&&S!=null&&(l.defaultChecked=!!S),w!=null&&(l.checked=w&&typeof w!="function"&&typeof w!="symbol"),W!=null&&typeof W!="function"&&typeof W!="symbol"&&typeof W!="boolean"?l.name=""+Ar(W):l.removeAttribute("name")}function a1(l,d,p,y,w,S,F,W){if(S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(l.type=S),d!=null||p!=null){if(!(S!=="submit"&&S!=="reset"||d!=null))return;p=p!=null?""+Ar(p):"",d=d!=null?""+Ar(d):p,W||d===l.value||(l.value=d),l.defaultValue=d}y=y??w,y=typeof y!="function"&&typeof y!="symbol"&&!!y,l.checked=W?l.checked:!!y,l.defaultChecked=!!y,F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"&&(l.name=F)}function Jx(l,d,p){d==="number"&&vm(l.ownerDocument)===l||l.defaultValue===""+p||(l.defaultValue=""+p)}function mc(l,d,p,y){if(l=l.options,d){d={};for(var w=0;w<p.length;w++)d["$"+p[w]]=!0;for(p=0;p<l.length;p++)w=d.hasOwnProperty("$"+l[p].value),l[p].selected!==w&&(l[p].selected=w),w&&y&&(l[p].defaultSelected=!0)}else{for(p=""+Ar(p),d=null,w=0;w<l.length;w++){if(l[w].value===p){l[w].selected=!0,y&&(l[w].defaultSelected=!0);return}d!==null||l[w].disabled||(d=l[w])}d!==null&&(d.selected=!0)}}function i1(l,d,p){if(d!=null&&(d=""+Ar(d),d!==l.value&&(l.value=d),p==null)){l.defaultValue!==d&&(l.defaultValue=d);return}l.defaultValue=p!=null?""+Ar(p):""}function o1(l,d,p,y){if(d==null){if(y!=null){if(p!=null)throw Error(s(92));if(U(y)){if(1<y.length)throw Error(s(93));y=y[0]}p=y}p==null&&(p=""),d=p}p=Ar(d),l.defaultValue=p,y=l.textContent,y===p&&y!==""&&y!==null&&(l.value=y)}function pc(l,d){if(d){var p=l.firstChild;if(p&&p===l.lastChild&&p.nodeType===3){p.nodeValue=d;return}}l.textContent=d}var _I=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function l1(l,d,p){var y=d.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?y?l.setProperty(d,""):d==="float"?l.cssFloat="":l[d]="":y?l.setProperty(d,p):typeof p!="number"||p===0||_I.has(d)?d==="float"?l.cssFloat=p:l[d]=(""+p).trim():l[d]=p+"px"}function c1(l,d,p){if(d!=null&&typeof d!="object")throw Error(s(62));if(l=l.style,p!=null){for(var y in p)!p.hasOwnProperty(y)||d!=null&&d.hasOwnProperty(y)||(y.indexOf("--")===0?l.setProperty(y,""):y==="float"?l.cssFloat="":l[y]="");for(var w in d)y=d[w],d.hasOwnProperty(w)&&p[w]!==y&&l1(l,w,y)}else for(var S in d)d.hasOwnProperty(S)&&l1(l,S,d[S])}function eb(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var AI=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),wI=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _m(l){return wI.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}var tb=null;function nb(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var gc=null,yc=null;function u1(l){var d=uc(l);if(d&&(l=d.stateNode)){var p=l[Bn]||null;e:switch(l=d.stateNode,d.type){case"input":if(Zx(l,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),d=p.name,p.type==="radio"&&d!=null){for(p=l;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+wr(""+d)+'"][type="radio"]'),d=0;d<p.length;d++){var y=p[d];if(y!==l&&y.form===l.form){var w=y[Bn]||null;if(!w)throw Error(s(90));Zx(y,w.value,w.defaultValue,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name)}}for(d=0;d<p.length;d++)y=p[d],y.form===l.form&&r1(y)}break e;case"textarea":i1(l,p.value,p.defaultValue);break e;case"select":d=p.value,d!=null&&mc(l,!!p.multiple,d,!1)}}}var sb=!1;function d1(l,d,p){if(sb)return l(d,p);sb=!0;try{var y=l(d);return y}finally{if(sb=!1,(gc!==null||yc!==null)&&(ip(),gc&&(d=gc,l=yc,yc=gc=null,u1(d),l)))for(d=0;d<l.length;d++)u1(l[d])}}function ld(l,d){var p=l.stateNode;if(p===null)return null;var y=p[Bn]||null;if(y===null)return null;p=y[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(l=l.type,y=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!y;break e;default:l=!1}if(l)return null;if(p&&typeof p!="function")throw Error(s(231,d,typeof p));return p}var Xa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rb=!1;if(Xa)try{var cd={};Object.defineProperty(cd,"passive",{get:function(){rb=!0}}),window.addEventListener("test",cd,cd),window.removeEventListener("test",cd,cd)}catch{rb=!1}var Ui=null,ab=null,Am=null;function f1(){if(Am)return Am;var l,d=ab,p=d.length,y,w="value"in Ui?Ui.value:Ui.textContent,S=w.length;for(l=0;l<p&&d[l]===w[l];l++);var F=p-l;for(y=1;y<=F&&d[p-y]===w[S-y];y++);return Am=w.slice(l,1<y?1-y:void 0)}function wm(l){var d=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&d===13&&(l=13)):l=d,l===10&&(l=13),32<=l||l===13?l:0}function jm(){return!0}function h1(){return!1}function Hs(l){function d(p,y,w,S,F){this._reactName=p,this._targetInst=w,this.type=y,this.nativeEvent=S,this.target=F,this.currentTarget=null;for(var W in l)l.hasOwnProperty(W)&&(p=l[W],this[W]=p?p(S):S[W]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?jm:h1,this.isPropagationStopped=h1,this}return m(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=jm)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=jm)},persist:function(){},isPersistent:jm}),d}var Xo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sm=Hs(Xo),ud=m({},Xo,{view:0,detail:0}),jI=Hs(ud),ib,ob,dd,Cm=m({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cb,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==dd&&(dd&&l.type==="mousemove"?(ib=l.screenX-dd.screenX,ob=l.screenY-dd.screenY):ob=ib=0,dd=l),ib)},movementY:function(l){return"movementY"in l?l.movementY:ob}}),m1=Hs(Cm),SI=m({},Cm,{dataTransfer:0}),CI=Hs(SI),NI=m({},ud,{relatedTarget:0}),lb=Hs(NI),kI=m({},Xo,{animationName:0,elapsedTime:0,pseudoElement:0}),DI=Hs(kI),EI=m({},Xo,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),TI=Hs(EI),MI=m({},Xo,{data:0}),p1=Hs(MI),RI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},OI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},PI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function LI(l){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(l):(l=PI[l])?!!d[l]:!1}function cb(){return LI}var FI=m({},ud,{key:function(l){if(l.key){var d=RI[l.key]||l.key;if(d!=="Unidentified")return d}return l.type==="keypress"?(l=wm(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?OI[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cb,charCode:function(l){return l.type==="keypress"?wm(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?wm(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),BI=Hs(FI),II=m({},Cm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),g1=Hs(II),VI=m({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cb}),zI=Hs(VI),$I=m({},Xo,{propertyName:0,elapsedTime:0,pseudoElement:0}),HI=Hs($I),UI=m({},Cm,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),WI=Hs(UI),YI=m({},Xo,{newState:0,oldState:0}),qI=Hs(YI),GI=[9,13,27,32],ub=Xa&&"CompositionEvent"in window,fd=null;Xa&&"documentMode"in document&&(fd=document.documentMode);var KI=Xa&&"TextEvent"in window&&!fd,y1=Xa&&(!ub||fd&&8<fd&&11>=fd),x1=" ",b1=!1;function v1(l,d){switch(l){case"keyup":return GI.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _1(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var xc=!1;function QI(l,d){switch(l){case"compositionend":return _1(d);case"keypress":return d.which!==32?null:(b1=!0,x1);case"textInput":return l=d.data,l===x1&&b1?null:l;default:return null}}function XI(l,d){if(xc)return l==="compositionend"||!ub&&v1(l,d)?(l=f1(),Am=ab=Ui=null,xc=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return y1&&d.locale!=="ko"?null:d.data;default:return null}}var ZI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function A1(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d==="input"?!!ZI[l.type]:d==="textarea"}function w1(l,d,p,y){gc?yc?yc.push(y):yc=[y]:gc=y,d=fp(d,"onChange"),0<d.length&&(p=new Sm("onChange","change",null,p,y),l.push({event:p,listeners:d}))}var hd=null,md=null;function JI(l){sk(l,0)}function Nm(l){var d=od(l);if(r1(d))return l}function j1(l,d){if(l==="change")return d}var S1=!1;if(Xa){var db;if(Xa){var fb="oninput"in document;if(!fb){var C1=document.createElement("div");C1.setAttribute("oninput","return;"),fb=typeof C1.oninput=="function"}db=fb}else db=!1;S1=db&&(!document.documentMode||9<document.documentMode)}function N1(){hd&&(hd.detachEvent("onpropertychange",k1),md=hd=null)}function k1(l){if(l.propertyName==="value"&&Nm(md)){var d=[];w1(d,md,l,nb(l)),d1(JI,d)}}function eV(l,d,p){l==="focusin"?(N1(),hd=d,md=p,hd.attachEvent("onpropertychange",k1)):l==="focusout"&&N1()}function tV(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return Nm(md)}function nV(l,d){if(l==="click")return Nm(d)}function sV(l,d){if(l==="input"||l==="change")return Nm(d)}function rV(l,d){return l===d&&(l!==0||1/l===1/d)||l!==l&&d!==d}var or=typeof Object.is=="function"?Object.is:rV;function pd(l,d){if(or(l,d))return!0;if(typeof l!="object"||l===null||typeof d!="object"||d===null)return!1;var p=Object.keys(l),y=Object.keys(d);if(p.length!==y.length)return!1;for(y=0;y<p.length;y++){var w=p[y];if(!Te.call(d,w)||!or(l[w],d[w]))return!1}return!0}function D1(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function E1(l,d){var p=D1(l);l=0;for(var y;p;){if(p.nodeType===3){if(y=l+p.textContent.length,l<=d&&y>=d)return{node:p,offset:d-l};l=y}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=D1(p)}}function T1(l,d){return l&&d?l===d?!0:l&&l.nodeType===3?!1:d&&d.nodeType===3?T1(l,d.parentNode):"contains"in l?l.contains(d):l.compareDocumentPosition?!!(l.compareDocumentPosition(d)&16):!1:!1}function M1(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var d=vm(l.document);d instanceof l.HTMLIFrameElement;){try{var p=typeof d.contentWindow.location.href=="string"}catch{p=!1}if(p)l=d.contentWindow;else break;d=vm(l.document)}return d}function hb(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d&&(d==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||d==="textarea"||l.contentEditable==="true")}var aV=Xa&&"documentMode"in document&&11>=document.documentMode,bc=null,mb=null,gd=null,pb=!1;function R1(l,d,p){var y=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;pb||bc==null||bc!==vm(y)||(y=bc,"selectionStart"in y&&hb(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),gd&&pd(gd,y)||(gd=y,y=fp(mb,"onSelect"),0<y.length&&(d=new Sm("onSelect","select",null,d,p),l.push({event:d,listeners:y}),d.target=bc)))}function Zo(l,d){var p={};return p[l.toLowerCase()]=d.toLowerCase(),p["Webkit"+l]="webkit"+d,p["Moz"+l]="moz"+d,p}var vc={animationend:Zo("Animation","AnimationEnd"),animationiteration:Zo("Animation","AnimationIteration"),animationstart:Zo("Animation","AnimationStart"),transitionrun:Zo("Transition","TransitionRun"),transitionstart:Zo("Transition","TransitionStart"),transitioncancel:Zo("Transition","TransitionCancel"),transitionend:Zo("Transition","TransitionEnd")},gb={},O1={};Xa&&(O1=document.createElement("div").style,"AnimationEvent"in window||(delete vc.animationend.animation,delete vc.animationiteration.animation,delete vc.animationstart.animation),"TransitionEvent"in window||delete vc.transitionend.transition);function Jo(l){if(gb[l])return gb[l];if(!vc[l])return l;var d=vc[l],p;for(p in d)if(d.hasOwnProperty(p)&&p in O1)return gb[l]=d[p];return l}var P1=Jo("animationend"),L1=Jo("animationiteration"),F1=Jo("animationstart"),iV=Jo("transitionrun"),oV=Jo("transitionstart"),lV=Jo("transitioncancel"),B1=Jo("transitionend"),I1=new Map,yb="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");yb.push("scrollEnd");function Xr(l,d){I1.set(l,d),Qo(d,[l])}var V1=new WeakMap;function jr(l,d){if(typeof l=="object"&&l!==null){var p=V1.get(l);return p!==void 0?p:(d={value:l,source:d,stack:n1(d)},V1.set(l,d),d)}return{value:l,source:d,stack:n1(d)}}var Sr=[],_c=0,xb=0;function km(){for(var l=_c,d=xb=_c=0;d<l;){var p=Sr[d];Sr[d++]=null;var y=Sr[d];Sr[d++]=null;var w=Sr[d];Sr[d++]=null;var S=Sr[d];if(Sr[d++]=null,y!==null&&w!==null){var F=y.pending;F===null?w.next=w:(w.next=F.next,F.next=w),y.pending=w}S!==0&&z1(p,w,S)}}function Dm(l,d,p,y){Sr[_c++]=l,Sr[_c++]=d,Sr[_c++]=p,Sr[_c++]=y,xb|=y,l.lanes|=y,l=l.alternate,l!==null&&(l.lanes|=y)}function bb(l,d,p,y){return Dm(l,d,p,y),Em(l)}function Ac(l,d){return Dm(l,null,null,d),Em(l)}function z1(l,d,p){l.lanes|=p;var y=l.alternate;y!==null&&(y.lanes|=p);for(var w=!1,S=l.return;S!==null;)S.childLanes|=p,y=S.alternate,y!==null&&(y.childLanes|=p),S.tag===22&&(l=S.stateNode,l===null||l._visibility&1||(w=!0)),l=S,S=S.return;return l.tag===3?(S=l.stateNode,w&&d!==null&&(w=31-J(p),l=S.hiddenUpdates,y=l[w],y===null?l[w]=[d]:y.push(d),d.lane=p|536870912),S):null}function Em(l){if(50<zd)throw zd=0,Sv=null,Error(s(185));for(var d=l.return;d!==null;)l=d,d=l.return;return l.tag===3?l.stateNode:null}var wc={};function cV(l,d,p,y){this.tag=l,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function lr(l,d,p,y){return new cV(l,d,p,y)}function vb(l){return l=l.prototype,!(!l||!l.isReactComponent)}function Za(l,d){var p=l.alternate;return p===null?(p=lr(l.tag,d,l.key,l.mode),p.elementType=l.elementType,p.type=l.type,p.stateNode=l.stateNode,p.alternate=l,l.alternate=p):(p.pendingProps=d,p.type=l.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=l.flags&65011712,p.childLanes=l.childLanes,p.lanes=l.lanes,p.child=l.child,p.memoizedProps=l.memoizedProps,p.memoizedState=l.memoizedState,p.updateQueue=l.updateQueue,d=l.dependencies,p.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},p.sibling=l.sibling,p.index=l.index,p.ref=l.ref,p.refCleanup=l.refCleanup,p}function $1(l,d){l.flags&=65011714;var p=l.alternate;return p===null?(l.childLanes=0,l.lanes=d,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=p.childLanes,l.lanes=p.lanes,l.child=p.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=p.memoizedProps,l.memoizedState=p.memoizedState,l.updateQueue=p.updateQueue,l.type=p.type,d=p.dependencies,l.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),l}function Tm(l,d,p,y,w,S){var F=0;if(y=l,typeof l=="function")vb(l)&&(F=1);else if(typeof l=="string")F=d6(l,p,ae.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case O:return l=lr(31,p,d,w),l.elementType=O,l.lanes=S,l;case b:return el(p.children,w,S,d);case A:F=8,w|=24;break;case _:return l=lr(12,p,d,w|2),l.elementType=_,l.lanes=S,l;case N:return l=lr(13,p,d,w),l.elementType=N,l.lanes=S,l;case L:return l=lr(19,p,d,w),l.elementType=L,l.lanes=S,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case j:case k:F=10;break e;case C:F=9;break e;case E:F=11;break e;case M:F=14;break e;case T:F=16,y=null;break e}F=29,p=Error(s(130,l===null?"null":typeof l,"")),y=null}return d=lr(F,p,d,w),d.elementType=l,d.type=y,d.lanes=S,d}function el(l,d,p,y){return l=lr(7,l,y,d),l.lanes=p,l}function _b(l,d,p){return l=lr(6,l,null,d),l.lanes=p,l}function Ab(l,d,p){return d=lr(4,l.children!==null?l.children:[],l.key,d),d.lanes=p,d.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},d}var jc=[],Sc=0,Mm=null,Rm=0,Cr=[],Nr=0,tl=null,Ja=1,ei="";function nl(l,d){jc[Sc++]=Rm,jc[Sc++]=Mm,Mm=l,Rm=d}function H1(l,d,p){Cr[Nr++]=Ja,Cr[Nr++]=ei,Cr[Nr++]=tl,tl=l;var y=Ja;l=ei;var w=32-J(y)-1;y&=~(1<<w),p+=1;var S=32-J(d)+w;if(30<S){var F=w-w%5;S=(y&(1<<F)-1).toString(32),y>>=F,w-=F,Ja=1<<32-J(d)+w|p<<w|y,ei=S+l}else Ja=1<<S|p<<w|y,ei=l}function wb(l){l.return!==null&&(nl(l,1),H1(l,1,0))}function jb(l){for(;l===Mm;)Mm=jc[--Sc],jc[Sc]=null,Rm=jc[--Sc],jc[Sc]=null;for(;l===tl;)tl=Cr[--Nr],Cr[Nr]=null,ei=Cr[--Nr],Cr[Nr]=null,Ja=Cr[--Nr],Cr[Nr]=null}var Ls=null,Rn=null,Zt=!1,sl=null,ma=!1,Sb=Error(s(519));function rl(l){var d=Error(s(418,""));throw bd(jr(d,l)),Sb}function U1(l){var d=l.stateNode,p=l.type,y=l.memoizedProps;switch(d[Ft]=l,d[Bn]=y,p){case"dialog":Ut("cancel",d),Ut("close",d);break;case"iframe":case"object":case"embed":Ut("load",d);break;case"video":case"audio":for(p=0;p<Hd.length;p++)Ut(Hd[p],d);break;case"source":Ut("error",d);break;case"img":case"image":case"link":Ut("error",d),Ut("load",d);break;case"details":Ut("toggle",d);break;case"input":Ut("invalid",d),a1(d,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0),bm(d);break;case"select":Ut("invalid",d);break;case"textarea":Ut("invalid",d),o1(d,y.value,y.defaultValue,y.children),bm(d)}p=y.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||d.textContent===""+p||y.suppressHydrationWarning===!0||ok(d.textContent,p)?(y.popover!=null&&(Ut("beforetoggle",d),Ut("toggle",d)),y.onScroll!=null&&Ut("scroll",d),y.onScrollEnd!=null&&Ut("scrollend",d),y.onClick!=null&&(d.onclick=hp),d=!0):d=!1,d||rl(l)}function W1(l){for(Ls=l.return;Ls;)switch(Ls.tag){case 5:case 13:ma=!1;return;case 27:case 3:ma=!0;return;default:Ls=Ls.return}}function yd(l){if(l!==Ls)return!1;if(!Zt)return W1(l),Zt=!0,!1;var d=l.tag,p;if((p=d!==3&&d!==27)&&((p=d===5)&&(p=l.type,p=!(p!=="form"&&p!=="button")||zv(l.type,l.memoizedProps)),p=!p),p&&Rn&&rl(l),W1(l),d===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(s(317));e:{for(l=l.nextSibling,d=0;l;){if(l.nodeType===8)if(p=l.data,p==="/$"){if(d===0){Rn=Jr(l.nextSibling);break e}d--}else p!=="$"&&p!=="$!"&&p!=="$?"||d++;l=l.nextSibling}Rn=null}}else d===27?(d=Rn,io(l.type)?(l=Wv,Wv=null,Rn=l):Rn=d):Rn=Ls?Jr(l.stateNode.nextSibling):null;return!0}function xd(){Rn=Ls=null,Zt=!1}function Y1(){var l=sl;return l!==null&&(Ys===null?Ys=l:Ys.push.apply(Ys,l),sl=null),l}function bd(l){sl===null?sl=[l]:sl.push(l)}var Cb=B(null),al=null,ti=null;function Wi(l,d,p){le(Cb,d._currentValue),d._currentValue=p}function ni(l){l._currentValue=Cb.current,se(Cb)}function Nb(l,d,p){for(;l!==null;){var y=l.alternate;if((l.childLanes&d)!==d?(l.childLanes|=d,y!==null&&(y.childLanes|=d)):y!==null&&(y.childLanes&d)!==d&&(y.childLanes|=d),l===p)break;l=l.return}}function kb(l,d,p,y){var w=l.child;for(w!==null&&(w.return=l);w!==null;){var S=w.dependencies;if(S!==null){var F=w.child;S=S.firstContext;e:for(;S!==null;){var W=S;S=w;for(var re=0;re<d.length;re++)if(W.context===d[re]){S.lanes|=p,W=S.alternate,W!==null&&(W.lanes|=p),Nb(S.return,p,l),y||(F=null);break e}S=W.next}}else if(w.tag===18){if(F=w.return,F===null)throw Error(s(341));F.lanes|=p,S=F.alternate,S!==null&&(S.lanes|=p),Nb(F,p,l),F=null}else F=w.child;if(F!==null)F.return=w;else for(F=w;F!==null;){if(F===l){F=null;break}if(w=F.sibling,w!==null){w.return=F.return,F=w;break}F=F.return}w=F}}function vd(l,d,p,y){l=null;for(var w=d,S=!1;w!==null;){if(!S){if((w.flags&524288)!==0)S=!0;else if((w.flags&262144)!==0)break}if(w.tag===10){var F=w.alternate;if(F===null)throw Error(s(387));if(F=F.memoizedProps,F!==null){var W=w.type;or(w.pendingProps.value,F.value)||(l!==null?l.push(W):l=[W])}}else if(w===de.current){if(F=w.alternate,F===null)throw Error(s(387));F.memoizedState.memoizedState!==w.memoizedState.memoizedState&&(l!==null?l.push(Kd):l=[Kd])}w=w.return}l!==null&&kb(d,l,p,y),d.flags|=262144}function Om(l){for(l=l.firstContext;l!==null;){if(!or(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function il(l){al=l,ti=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function js(l){return q1(al,l)}function Pm(l,d){return al===null&&il(l),q1(l,d)}function q1(l,d){var p=d._currentValue;if(d={context:d,memoizedValue:p,next:null},ti===null){if(l===null)throw Error(s(308));ti=d,l.dependencies={lanes:0,firstContext:d},l.flags|=524288}else ti=ti.next=d;return p}var uV=typeof AbortController<"u"?AbortController:function(){var l=[],d=this.signal={aborted:!1,addEventListener:function(p,y){l.push(y)}};this.abort=function(){d.aborted=!0,l.forEach(function(p){return p()})}},dV=t.unstable_scheduleCallback,fV=t.unstable_NormalPriority,ns={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Db(){return{controller:new uV,data:new Map,refCount:0}}function _d(l){l.refCount--,l.refCount===0&&dV(fV,function(){l.controller.abort()})}var Ad=null,Eb=0,Cc=0,Nc=null;function hV(l,d){if(Ad===null){var p=Ad=[];Eb=0,Cc=Mv(),Nc={status:"pending",value:void 0,then:function(y){p.push(y)}}}return Eb++,d.then(G1,G1),d}function G1(){if(--Eb===0&&Ad!==null){Nc!==null&&(Nc.status="fulfilled");var l=Ad;Ad=null,Cc=0,Nc=null;for(var d=0;d<l.length;d++)(0,l[d])()}}function mV(l,d){var p=[],y={status:"pending",value:null,reason:null,then:function(w){p.push(w)}};return l.then(function(){y.status="fulfilled",y.value=d;for(var w=0;w<p.length;w++)(0,p[w])(d)},function(w){for(y.status="rejected",y.reason=w,w=0;w<p.length;w++)(0,p[w])(void 0)}),y}var K1=R.S;R.S=function(l,d){typeof d=="object"&&d!==null&&typeof d.then=="function"&&hV(l,d),K1!==null&&K1(l,d)};var ol=B(null);function Tb(){var l=ol.current;return l!==null?l:_n.pooledCache}function Lm(l,d){d===null?le(ol,ol.current):le(ol,d.pool)}function Q1(){var l=Tb();return l===null?null:{parent:ns._currentValue,pool:l}}var wd=Error(s(460)),X1=Error(s(474)),Fm=Error(s(542)),Mb={then:function(){}};function Z1(l){return l=l.status,l==="fulfilled"||l==="rejected"}function Bm(){}function J1(l,d,p){switch(p=l[p],p===void 0?l.push(d):p!==d&&(d.then(Bm,Bm),d=p),d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,tC(l),l;default:if(typeof d.status=="string")d.then(Bm,Bm);else{if(l=_n,l!==null&&100<l.shellSuspendCounter)throw Error(s(482));l=d,l.status="pending",l.then(function(y){if(d.status==="pending"){var w=d;w.status="fulfilled",w.value=y}},function(y){if(d.status==="pending"){var w=d;w.status="rejected",w.reason=y}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,tC(l),l}throw jd=d,wd}}var jd=null;function eC(){if(jd===null)throw Error(s(459));var l=jd;return jd=null,l}function tC(l){if(l===wd||l===Fm)throw Error(s(483))}var Yi=!1;function Rb(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ob(l,d){l=l.updateQueue,d.updateQueue===l&&(d.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function qi(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function Gi(l,d,p){var y=l.updateQueue;if(y===null)return null;if(y=y.shared,(cn&2)!==0){var w=y.pending;return w===null?d.next=d:(d.next=w.next,w.next=d),y.pending=d,d=Em(l),z1(l,null,p),d}return Dm(l,y,d,p),Em(l)}function Sd(l,d,p){if(d=d.updateQueue,d!==null&&(d=d.shared,(p&4194048)!==0)){var y=d.lanes;y&=l.pendingLanes,p|=y,d.lanes=p,Qe(l,p)}}function Pb(l,d){var p=l.updateQueue,y=l.alternate;if(y!==null&&(y=y.updateQueue,p===y)){var w=null,S=null;if(p=p.firstBaseUpdate,p!==null){do{var F={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};S===null?w=S=F:S=S.next=F,p=p.next}while(p!==null);S===null?w=S=d:S=S.next=d}else w=S=d;p={baseState:y.baseState,firstBaseUpdate:w,lastBaseUpdate:S,shared:y.shared,callbacks:y.callbacks},l.updateQueue=p;return}l=p.lastBaseUpdate,l===null?p.firstBaseUpdate=d:l.next=d,p.lastBaseUpdate=d}var Lb=!1;function Cd(){if(Lb){var l=Nc;if(l!==null)throw l}}function Nd(l,d,p,y){Lb=!1;var w=l.updateQueue;Yi=!1;var S=w.firstBaseUpdate,F=w.lastBaseUpdate,W=w.shared.pending;if(W!==null){w.shared.pending=null;var re=W,Se=re.next;re.next=null,F===null?S=Se:F.next=Se,F=re;var Ye=l.alternate;Ye!==null&&(Ye=Ye.updateQueue,W=Ye.lastBaseUpdate,W!==F&&(W===null?Ye.firstBaseUpdate=Se:W.next=Se,Ye.lastBaseUpdate=re))}if(S!==null){var Xe=w.baseState;F=0,Ye=Se=re=null,W=S;do{var ke=W.lane&-536870913,Me=ke!==W.lane;if(Me?(Gt&ke)===ke:(y&ke)===ke){ke!==0&&ke===Cc&&(Lb=!0),Ye!==null&&(Ye=Ye.next={lane:0,tag:W.tag,payload:W.payload,callback:null,next:null});e:{var St=l,vt=W;ke=d;var yn=p;switch(vt.tag){case 1:if(St=vt.payload,typeof St=="function"){Xe=St.call(yn,Xe,ke);break e}Xe=St;break e;case 3:St.flags=St.flags&-65537|128;case 0:if(St=vt.payload,ke=typeof St=="function"?St.call(yn,Xe,ke):St,ke==null)break e;Xe=m({},Xe,ke);break e;case 2:Yi=!0}}ke=W.callback,ke!==null&&(l.flags|=64,Me&&(l.flags|=8192),Me=w.callbacks,Me===null?w.callbacks=[ke]:Me.push(ke))}else Me={lane:ke,tag:W.tag,payload:W.payload,callback:W.callback,next:null},Ye===null?(Se=Ye=Me,re=Xe):Ye=Ye.next=Me,F|=ke;if(W=W.next,W===null){if(W=w.shared.pending,W===null)break;Me=W,W=Me.next,Me.next=null,w.lastBaseUpdate=Me,w.shared.pending=null}}while(!0);Ye===null&&(re=Xe),w.baseState=re,w.firstBaseUpdate=Se,w.lastBaseUpdate=Ye,S===null&&(w.shared.lanes=0),no|=F,l.lanes=F,l.memoizedState=Xe}}function nC(l,d){if(typeof l!="function")throw Error(s(191,l));l.call(d)}function sC(l,d){var p=l.callbacks;if(p!==null)for(l.callbacks=null,l=0;l<p.length;l++)nC(p[l],d)}var kc=B(null),Im=B(0);function rC(l,d){l=ci,le(Im,l),le(kc,d),ci=l|d.baseLanes}function Fb(){le(Im,ci),le(kc,kc.current)}function Bb(){ci=Im.current,se(kc),se(Im)}var Ki=0,Bt=null,pn=null,qn=null,Vm=!1,Dc=!1,ll=!1,zm=0,kd=0,Ec=null,pV=0;function In(){throw Error(s(321))}function Ib(l,d){if(d===null)return!1;for(var p=0;p<d.length&&p<l.length;p++)if(!or(l[p],d[p]))return!1;return!0}function Vb(l,d,p,y,w,S){return Ki=S,Bt=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,R.H=l===null||l.memoizedState===null?zC:$C,ll=!1,S=p(y,w),ll=!1,Dc&&(S=iC(d,p,y,w)),aC(l),S}function aC(l){R.H=qm;var d=pn!==null&&pn.next!==null;if(Ki=0,qn=pn=Bt=null,Vm=!1,kd=0,Ec=null,d)throw Error(s(300));l===null||ls||(l=l.dependencies,l!==null&&Om(l)&&(ls=!0))}function iC(l,d,p,y){Bt=l;var w=0;do{if(Dc&&(Ec=null),kd=0,Dc=!1,25<=w)throw Error(s(301));if(w+=1,qn=pn=null,l.updateQueue!=null){var S=l.updateQueue;S.lastEffect=null,S.events=null,S.stores=null,S.memoCache!=null&&(S.memoCache.index=0)}R.H=AV,S=d(p,y)}while(Dc);return S}function gV(){var l=R.H,d=l.useState()[0];return d=typeof d.then=="function"?Dd(d):d,l=l.useState()[0],(pn!==null?pn.memoizedState:null)!==l&&(Bt.flags|=1024),d}function zb(){var l=zm!==0;return zm=0,l}function $b(l,d,p){d.updateQueue=l.updateQueue,d.flags&=-2053,l.lanes&=~p}function Hb(l){if(Vm){for(l=l.memoizedState;l!==null;){var d=l.queue;d!==null&&(d.pending=null),l=l.next}Vm=!1}Ki=0,qn=pn=Bt=null,Dc=!1,kd=zm=0,Ec=null}function Us(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qn===null?Bt.memoizedState=qn=l:qn=qn.next=l,qn}function Gn(){if(pn===null){var l=Bt.alternate;l=l!==null?l.memoizedState:null}else l=pn.next;var d=qn===null?Bt.memoizedState:qn.next;if(d!==null)qn=d,pn=l;else{if(l===null)throw Bt.alternate===null?Error(s(467)):Error(s(310));pn=l,l={memoizedState:pn.memoizedState,baseState:pn.baseState,baseQueue:pn.baseQueue,queue:pn.queue,next:null},qn===null?Bt.memoizedState=qn=l:qn=qn.next=l}return qn}function Ub(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Dd(l){var d=kd;return kd+=1,Ec===null&&(Ec=[]),l=J1(Ec,l,d),d=Bt,(qn===null?d.memoizedState:qn.next)===null&&(d=d.alternate,R.H=d===null||d.memoizedState===null?zC:$C),l}function $m(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Dd(l);if(l.$$typeof===k)return js(l)}throw Error(s(438,String(l)))}function Wb(l){var d=null,p=Bt.updateQueue;if(p!==null&&(d=p.memoCache),d==null){var y=Bt.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(d={data:y.data.map(function(w){return w.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),p===null&&(p=Ub(),Bt.updateQueue=p),p.memoCache=d,p=d.data[d.index],p===void 0)for(p=d.data[d.index]=Array(l),y=0;y<l;y++)p[y]=I;return d.index++,p}function si(l,d){return typeof d=="function"?d(l):d}function Hm(l){var d=Gn();return Yb(d,pn,l)}function Yb(l,d,p){var y=l.queue;if(y===null)throw Error(s(311));y.lastRenderedReducer=p;var w=l.baseQueue,S=y.pending;if(S!==null){if(w!==null){var F=w.next;w.next=S.next,S.next=F}d.baseQueue=w=S,y.pending=null}if(S=l.baseState,w===null)l.memoizedState=S;else{d=w.next;var W=F=null,re=null,Se=d,Ye=!1;do{var Xe=Se.lane&-536870913;if(Xe!==Se.lane?(Gt&Xe)===Xe:(Ki&Xe)===Xe){var ke=Se.revertLane;if(ke===0)re!==null&&(re=re.next={lane:0,revertLane:0,action:Se.action,hasEagerState:Se.hasEagerState,eagerState:Se.eagerState,next:null}),Xe===Cc&&(Ye=!0);else if((Ki&ke)===ke){Se=Se.next,ke===Cc&&(Ye=!0);continue}else Xe={lane:0,revertLane:Se.revertLane,action:Se.action,hasEagerState:Se.hasEagerState,eagerState:Se.eagerState,next:null},re===null?(W=re=Xe,F=S):re=re.next=Xe,Bt.lanes|=ke,no|=ke;Xe=Se.action,ll&&p(S,Xe),S=Se.hasEagerState?Se.eagerState:p(S,Xe)}else ke={lane:Xe,revertLane:Se.revertLane,action:Se.action,hasEagerState:Se.hasEagerState,eagerState:Se.eagerState,next:null},re===null?(W=re=ke,F=S):re=re.next=ke,Bt.lanes|=Xe,no|=Xe;Se=Se.next}while(Se!==null&&Se!==d);if(re===null?F=S:re.next=W,!or(S,l.memoizedState)&&(ls=!0,Ye&&(p=Nc,p!==null)))throw p;l.memoizedState=S,l.baseState=F,l.baseQueue=re,y.lastRenderedState=S}return w===null&&(y.lanes=0),[l.memoizedState,y.dispatch]}function qb(l){var d=Gn(),p=d.queue;if(p===null)throw Error(s(311));p.lastRenderedReducer=l;var y=p.dispatch,w=p.pending,S=d.memoizedState;if(w!==null){p.pending=null;var F=w=w.next;do S=l(S,F.action),F=F.next;while(F!==w);or(S,d.memoizedState)||(ls=!0),d.memoizedState=S,d.baseQueue===null&&(d.baseState=S),p.lastRenderedState=S}return[S,y]}function oC(l,d,p){var y=Bt,w=Gn(),S=Zt;if(S){if(p===void 0)throw Error(s(407));p=p()}else p=d();var F=!or((pn||w).memoizedState,p);F&&(w.memoizedState=p,ls=!0),w=w.queue;var W=uC.bind(null,y,w,l);if(Ed(2048,8,W,[l]),w.getSnapshot!==d||F||qn!==null&&qn.memoizedState.tag&1){if(y.flags|=2048,Tc(9,Um(),cC.bind(null,y,w,p,d),null),_n===null)throw Error(s(349));S||(Ki&124)!==0||lC(y,d,p)}return p}function lC(l,d,p){l.flags|=16384,l={getSnapshot:d,value:p},d=Bt.updateQueue,d===null?(d=Ub(),Bt.updateQueue=d,d.stores=[l]):(p=d.stores,p===null?d.stores=[l]:p.push(l))}function cC(l,d,p,y){d.value=p,d.getSnapshot=y,dC(d)&&fC(l)}function uC(l,d,p){return p(function(){dC(d)&&fC(l)})}function dC(l){var d=l.getSnapshot;l=l.value;try{var p=d();return!or(l,p)}catch{return!0}}function fC(l){var d=Ac(l,2);d!==null&&hr(d,l,2)}function Gb(l){var d=Us();if(typeof l=="function"){var p=l;if(l=p(),ll){be(!0);try{p()}finally{be(!1)}}}return d.memoizedState=d.baseState=l,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:si,lastRenderedState:l},d}function hC(l,d,p,y){return l.baseState=p,Yb(l,pn,typeof y=="function"?y:si)}function yV(l,d,p,y,w){if(Ym(l))throw Error(s(485));if(l=d.action,l!==null){var S={payload:w,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(F){S.listeners.push(F)}};R.T!==null?p(!0):S.isTransition=!1,y(S),p=d.pending,p===null?(S.next=d.pending=S,mC(d,S)):(S.next=p.next,d.pending=p.next=S)}}function mC(l,d){var p=d.action,y=d.payload,w=l.state;if(d.isTransition){var S=R.T,F={};R.T=F;try{var W=p(w,y),re=R.S;re!==null&&re(F,W),pC(l,d,W)}catch(Se){Kb(l,d,Se)}finally{R.T=S}}else try{S=p(w,y),pC(l,d,S)}catch(Se){Kb(l,d,Se)}}function pC(l,d,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(y){gC(l,d,y)},function(y){return Kb(l,d,y)}):gC(l,d,p)}function gC(l,d,p){d.status="fulfilled",d.value=p,yC(d),l.state=p,d=l.pending,d!==null&&(p=d.next,p===d?l.pending=null:(p=p.next,d.next=p,mC(l,p)))}function Kb(l,d,p){var y=l.pending;if(l.pending=null,y!==null){y=y.next;do d.status="rejected",d.reason=p,yC(d),d=d.next;while(d!==y)}l.action=null}function yC(l){l=l.listeners;for(var d=0;d<l.length;d++)(0,l[d])()}function xC(l,d){return d}function bC(l,d){if(Zt){var p=_n.formState;if(p!==null){e:{var y=Bt;if(Zt){if(Rn){t:{for(var w=Rn,S=ma;w.nodeType!==8;){if(!S){w=null;break t}if(w=Jr(w.nextSibling),w===null){w=null;break t}}S=w.data,w=S==="F!"||S==="F"?w:null}if(w){Rn=Jr(w.nextSibling),y=w.data==="F!";break e}}rl(y)}y=!1}y&&(d=p[0])}}return p=Us(),p.memoizedState=p.baseState=d,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xC,lastRenderedState:d},p.queue=y,p=BC.bind(null,Bt,y),y.dispatch=p,y=Gb(!1),S=ev.bind(null,Bt,!1,y.queue),y=Us(),w={state:d,dispatch:null,action:l,pending:null},y.queue=w,p=yV.bind(null,Bt,w,S,p),w.dispatch=p,y.memoizedState=l,[d,p,!1]}function vC(l){var d=Gn();return _C(d,pn,l)}function _C(l,d,p){if(d=Yb(l,d,xC)[0],l=Hm(si)[0],typeof d=="object"&&d!==null&&typeof d.then=="function")try{var y=Dd(d)}catch(F){throw F===wd?Fm:F}else y=d;d=Gn();var w=d.queue,S=w.dispatch;return p!==d.memoizedState&&(Bt.flags|=2048,Tc(9,Um(),xV.bind(null,w,p),null)),[y,S,l]}function xV(l,d){l.action=d}function AC(l){var d=Gn(),p=pn;if(p!==null)return _C(d,p,l);Gn(),d=d.memoizedState,p=Gn();var y=p.queue.dispatch;return p.memoizedState=l,[d,y,!1]}function Tc(l,d,p,y){return l={tag:l,create:p,deps:y,inst:d,next:null},d=Bt.updateQueue,d===null&&(d=Ub(),Bt.updateQueue=d),p=d.lastEffect,p===null?d.lastEffect=l.next=l:(y=p.next,p.next=l,l.next=y,d.lastEffect=l),l}function Um(){return{destroy:void 0,resource:void 0}}function wC(){return Gn().memoizedState}function Wm(l,d,p,y){var w=Us();y=y===void 0?null:y,Bt.flags|=l,w.memoizedState=Tc(1|d,Um(),p,y)}function Ed(l,d,p,y){var w=Gn();y=y===void 0?null:y;var S=w.memoizedState.inst;pn!==null&&y!==null&&Ib(y,pn.memoizedState.deps)?w.memoizedState=Tc(d,S,p,y):(Bt.flags|=l,w.memoizedState=Tc(1|d,S,p,y))}function jC(l,d){Wm(8390656,8,l,d)}function SC(l,d){Ed(2048,8,l,d)}function CC(l,d){return Ed(4,2,l,d)}function NC(l,d){return Ed(4,4,l,d)}function kC(l,d){if(typeof d=="function"){l=l();var p=d(l);return function(){typeof p=="function"?p():d(null)}}if(d!=null)return l=l(),d.current=l,function(){d.current=null}}function DC(l,d,p){p=p!=null?p.concat([l]):null,Ed(4,4,kC.bind(null,d,l),p)}function Qb(){}function EC(l,d){var p=Gn();d=d===void 0?null:d;var y=p.memoizedState;return d!==null&&Ib(d,y[1])?y[0]:(p.memoizedState=[l,d],l)}function TC(l,d){var p=Gn();d=d===void 0?null:d;var y=p.memoizedState;if(d!==null&&Ib(d,y[1]))return y[0];if(y=l(),ll){be(!0);try{l()}finally{be(!1)}}return p.memoizedState=[y,d],y}function Xb(l,d,p){return p===void 0||(Ki&1073741824)!==0?l.memoizedState=d:(l.memoizedState=p,l=ON(),Bt.lanes|=l,no|=l,p)}function MC(l,d,p,y){return or(p,d)?p:kc.current!==null?(l=Xb(l,p,y),or(l,d)||(ls=!0),l):(Ki&42)===0?(ls=!0,l.memoizedState=p):(l=ON(),Bt.lanes|=l,no|=l,d)}function RC(l,d,p,y,w){var S=P.p;P.p=S!==0&&8>S?S:8;var F=R.T,W={};R.T=W,ev(l,!1,d,p);try{var re=w(),Se=R.S;if(Se!==null&&Se(W,re),re!==null&&typeof re=="object"&&typeof re.then=="function"){var Ye=mV(re,y);Td(l,d,Ye,fr(l))}else Td(l,d,y,fr(l))}catch(Xe){Td(l,d,{then:function(){},status:"rejected",reason:Xe},fr())}finally{P.p=S,R.T=F}}function bV(){}function Zb(l,d,p,y){if(l.tag!==5)throw Error(s(476));var w=OC(l).queue;RC(l,w,d,Z,p===null?bV:function(){return PC(l),p(y)})}function OC(l){var d=l.memoizedState;if(d!==null)return d;d={memoizedState:Z,baseState:Z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:si,lastRenderedState:Z},next:null};var p={};return d.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:si,lastRenderedState:p},next:null},l.memoizedState=d,l=l.alternate,l!==null&&(l.memoizedState=d),d}function PC(l){var d=OC(l).next.queue;Td(l,d,{},fr())}function Jb(){return js(Kd)}function LC(){return Gn().memoizedState}function FC(){return Gn().memoizedState}function vV(l){for(var d=l.return;d!==null;){switch(d.tag){case 24:case 3:var p=fr();l=qi(p);var y=Gi(d,l,p);y!==null&&(hr(y,d,p),Sd(y,d,p)),d={cache:Db()},l.payload=d;return}d=d.return}}function _V(l,d,p){var y=fr();p={lane:y,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null},Ym(l)?IC(d,p):(p=bb(l,d,p,y),p!==null&&(hr(p,l,y),VC(p,d,y)))}function BC(l,d,p){var y=fr();Td(l,d,p,y)}function Td(l,d,p,y){var w={lane:y,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null};if(Ym(l))IC(d,w);else{var S=l.alternate;if(l.lanes===0&&(S===null||S.lanes===0)&&(S=d.lastRenderedReducer,S!==null))try{var F=d.lastRenderedState,W=S(F,p);if(w.hasEagerState=!0,w.eagerState=W,or(W,F))return Dm(l,d,w,0),_n===null&&km(),!1}catch{}finally{}if(p=bb(l,d,w,y),p!==null)return hr(p,l,y),VC(p,d,y),!0}return!1}function ev(l,d,p,y){if(y={lane:2,revertLane:Mv(),action:y,hasEagerState:!1,eagerState:null,next:null},Ym(l)){if(d)throw Error(s(479))}else d=bb(l,p,y,2),d!==null&&hr(d,l,2)}function Ym(l){var d=l.alternate;return l===Bt||d!==null&&d===Bt}function IC(l,d){Dc=Vm=!0;var p=l.pending;p===null?d.next=d:(d.next=p.next,p.next=d),l.pending=d}function VC(l,d,p){if((p&4194048)!==0){var y=d.lanes;y&=l.pendingLanes,p|=y,d.lanes=p,Qe(l,p)}}var qm={readContext:js,use:$m,useCallback:In,useContext:In,useEffect:In,useImperativeHandle:In,useLayoutEffect:In,useInsertionEffect:In,useMemo:In,useReducer:In,useRef:In,useState:In,useDebugValue:In,useDeferredValue:In,useTransition:In,useSyncExternalStore:In,useId:In,useHostTransitionStatus:In,useFormState:In,useActionState:In,useOptimistic:In,useMemoCache:In,useCacheRefresh:In},zC={readContext:js,use:$m,useCallback:function(l,d){return Us().memoizedState=[l,d===void 0?null:d],l},useContext:js,useEffect:jC,useImperativeHandle:function(l,d,p){p=p!=null?p.concat([l]):null,Wm(4194308,4,kC.bind(null,d,l),p)},useLayoutEffect:function(l,d){return Wm(4194308,4,l,d)},useInsertionEffect:function(l,d){Wm(4,2,l,d)},useMemo:function(l,d){var p=Us();d=d===void 0?null:d;var y=l();if(ll){be(!0);try{l()}finally{be(!1)}}return p.memoizedState=[y,d],y},useReducer:function(l,d,p){var y=Us();if(p!==void 0){var w=p(d);if(ll){be(!0);try{p(d)}finally{be(!1)}}}else w=d;return y.memoizedState=y.baseState=w,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:w},y.queue=l,l=l.dispatch=_V.bind(null,Bt,l),[y.memoizedState,l]},useRef:function(l){var d=Us();return l={current:l},d.memoizedState=l},useState:function(l){l=Gb(l);var d=l.queue,p=BC.bind(null,Bt,d);return d.dispatch=p,[l.memoizedState,p]},useDebugValue:Qb,useDeferredValue:function(l,d){var p=Us();return Xb(p,l,d)},useTransition:function(){var l=Gb(!1);return l=RC.bind(null,Bt,l.queue,!0,!1),Us().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,d,p){var y=Bt,w=Us();if(Zt){if(p===void 0)throw Error(s(407));p=p()}else{if(p=d(),_n===null)throw Error(s(349));(Gt&124)!==0||lC(y,d,p)}w.memoizedState=p;var S={value:p,getSnapshot:d};return w.queue=S,jC(uC.bind(null,y,S,l),[l]),y.flags|=2048,Tc(9,Um(),cC.bind(null,y,S,p,d),null),p},useId:function(){var l=Us(),d=_n.identifierPrefix;if(Zt){var p=ei,y=Ja;p=(y&~(1<<32-J(y)-1)).toString(32)+p,d="«"+d+"R"+p,p=zm++,0<p&&(d+="H"+p.toString(32)),d+="»"}else p=pV++,d="«"+d+"r"+p.toString(32)+"»";return l.memoizedState=d},useHostTransitionStatus:Jb,useFormState:bC,useActionState:bC,useOptimistic:function(l){var d=Us();d.memoizedState=d.baseState=l;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=p,d=ev.bind(null,Bt,!0,p),p.dispatch=d,[l,d]},useMemoCache:Wb,useCacheRefresh:function(){return Us().memoizedState=vV.bind(null,Bt)}},$C={readContext:js,use:$m,useCallback:EC,useContext:js,useEffect:SC,useImperativeHandle:DC,useInsertionEffect:CC,useLayoutEffect:NC,useMemo:TC,useReducer:Hm,useRef:wC,useState:function(){return Hm(si)},useDebugValue:Qb,useDeferredValue:function(l,d){var p=Gn();return MC(p,pn.memoizedState,l,d)},useTransition:function(){var l=Hm(si)[0],d=Gn().memoizedState;return[typeof l=="boolean"?l:Dd(l),d]},useSyncExternalStore:oC,useId:LC,useHostTransitionStatus:Jb,useFormState:vC,useActionState:vC,useOptimistic:function(l,d){var p=Gn();return hC(p,pn,l,d)},useMemoCache:Wb,useCacheRefresh:FC},AV={readContext:js,use:$m,useCallback:EC,useContext:js,useEffect:SC,useImperativeHandle:DC,useInsertionEffect:CC,useLayoutEffect:NC,useMemo:TC,useReducer:qb,useRef:wC,useState:function(){return qb(si)},useDebugValue:Qb,useDeferredValue:function(l,d){var p=Gn();return pn===null?Xb(p,l,d):MC(p,pn.memoizedState,l,d)},useTransition:function(){var l=qb(si)[0],d=Gn().memoizedState;return[typeof l=="boolean"?l:Dd(l),d]},useSyncExternalStore:oC,useId:LC,useHostTransitionStatus:Jb,useFormState:AC,useActionState:AC,useOptimistic:function(l,d){var p=Gn();return pn!==null?hC(p,pn,l,d):(p.baseState=l,[l,p.queue.dispatch])},useMemoCache:Wb,useCacheRefresh:FC},Mc=null,Md=0;function Gm(l){var d=Md;return Md+=1,Mc===null&&(Mc=[]),J1(Mc,l,d)}function Rd(l,d){d=d.props.ref,l.ref=d!==void 0?d:null}function Km(l,d){throw d.$$typeof===h?Error(s(525)):(l=Object.prototype.toString.call(d),Error(s(31,l==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":l)))}function HC(l){var d=l._init;return d(l._payload)}function UC(l){function d(_e,ue){if(l){var je=_e.deletions;je===null?(_e.deletions=[ue],_e.flags|=16):je.push(ue)}}function p(_e,ue){if(!l)return null;for(;ue!==null;)d(_e,ue),ue=ue.sibling;return null}function y(_e){for(var ue=new Map;_e!==null;)_e.key!==null?ue.set(_e.key,_e):ue.set(_e.index,_e),_e=_e.sibling;return ue}function w(_e,ue){return _e=Za(_e,ue),_e.index=0,_e.sibling=null,_e}function S(_e,ue,je){return _e.index=je,l?(je=_e.alternate,je!==null?(je=je.index,je<ue?(_e.flags|=67108866,ue):je):(_e.flags|=67108866,ue)):(_e.flags|=1048576,ue)}function F(_e){return l&&_e.alternate===null&&(_e.flags|=67108866),_e}function W(_e,ue,je,Ge){return ue===null||ue.tag!==6?(ue=_b(je,_e.mode,Ge),ue.return=_e,ue):(ue=w(ue,je),ue.return=_e,ue)}function re(_e,ue,je,Ge){var ct=je.type;return ct===b?Ye(_e,ue,je.props.children,Ge,je.key):ue!==null&&(ue.elementType===ct||typeof ct=="object"&&ct!==null&&ct.$$typeof===T&&HC(ct)===ue.type)?(ue=w(ue,je.props),Rd(ue,je),ue.return=_e,ue):(ue=Tm(je.type,je.key,je.props,null,_e.mode,Ge),Rd(ue,je),ue.return=_e,ue)}function Se(_e,ue,je,Ge){return ue===null||ue.tag!==4||ue.stateNode.containerInfo!==je.containerInfo||ue.stateNode.implementation!==je.implementation?(ue=Ab(je,_e.mode,Ge),ue.return=_e,ue):(ue=w(ue,je.children||[]),ue.return=_e,ue)}function Ye(_e,ue,je,Ge,ct){return ue===null||ue.tag!==7?(ue=el(je,_e.mode,Ge,ct),ue.return=_e,ue):(ue=w(ue,je),ue.return=_e,ue)}function Xe(_e,ue,je){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return ue=_b(""+ue,_e.mode,je),ue.return=_e,ue;if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case g:return je=Tm(ue.type,ue.key,ue.props,null,_e.mode,je),Rd(je,ue),je.return=_e,je;case x:return ue=Ab(ue,_e.mode,je),ue.return=_e,ue;case T:var Ge=ue._init;return ue=Ge(ue._payload),Xe(_e,ue,je)}if(U(ue)||H(ue))return ue=el(ue,_e.mode,je,null),ue.return=_e,ue;if(typeof ue.then=="function")return Xe(_e,Gm(ue),je);if(ue.$$typeof===k)return Xe(_e,Pm(_e,ue),je);Km(_e,ue)}return null}function ke(_e,ue,je,Ge){var ct=ue!==null?ue.key:null;if(typeof je=="string"&&je!==""||typeof je=="number"||typeof je=="bigint")return ct!==null?null:W(_e,ue,""+je,Ge);if(typeof je=="object"&&je!==null){switch(je.$$typeof){case g:return je.key===ct?re(_e,ue,je,Ge):null;case x:return je.key===ct?Se(_e,ue,je,Ge):null;case T:return ct=je._init,je=ct(je._payload),ke(_e,ue,je,Ge)}if(U(je)||H(je))return ct!==null?null:Ye(_e,ue,je,Ge,null);if(typeof je.then=="function")return ke(_e,ue,Gm(je),Ge);if(je.$$typeof===k)return ke(_e,ue,Pm(_e,je),Ge);Km(_e,je)}return null}function Me(_e,ue,je,Ge,ct){if(typeof Ge=="string"&&Ge!==""||typeof Ge=="number"||typeof Ge=="bigint")return _e=_e.get(je)||null,W(ue,_e,""+Ge,ct);if(typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case g:return _e=_e.get(Ge.key===null?je:Ge.key)||null,re(ue,_e,Ge,ct);case x:return _e=_e.get(Ge.key===null?je:Ge.key)||null,Se(ue,_e,Ge,ct);case T:var Vt=Ge._init;return Ge=Vt(Ge._payload),Me(_e,ue,je,Ge,ct)}if(U(Ge)||H(Ge))return _e=_e.get(je)||null,Ye(ue,_e,Ge,ct,null);if(typeof Ge.then=="function")return Me(_e,ue,je,Gm(Ge),ct);if(Ge.$$typeof===k)return Me(_e,ue,je,Pm(ue,Ge),ct);Km(ue,Ge)}return null}function St(_e,ue,je,Ge){for(var ct=null,Vt=null,pt=ue,At=ue=0,us=null;pt!==null&&At<je.length;At++){pt.index>At?(us=pt,pt=null):us=pt.sibling;var Qt=ke(_e,pt,je[At],Ge);if(Qt===null){pt===null&&(pt=us);break}l&&pt&&Qt.alternate===null&&d(_e,pt),ue=S(Qt,ue,At),Vt===null?ct=Qt:Vt.sibling=Qt,Vt=Qt,pt=us}if(At===je.length)return p(_e,pt),Zt&&nl(_e,At),ct;if(pt===null){for(;At<je.length;At++)pt=Xe(_e,je[At],Ge),pt!==null&&(ue=S(pt,ue,At),Vt===null?ct=pt:Vt.sibling=pt,Vt=pt);return Zt&&nl(_e,At),ct}for(pt=y(pt);At<je.length;At++)us=Me(pt,_e,At,je[At],Ge),us!==null&&(l&&us.alternate!==null&&pt.delete(us.key===null?At:us.key),ue=S(us,ue,At),Vt===null?ct=us:Vt.sibling=us,Vt=us);return l&&pt.forEach(function(fo){return d(_e,fo)}),Zt&&nl(_e,At),ct}function vt(_e,ue,je,Ge){if(je==null)throw Error(s(151));for(var ct=null,Vt=null,pt=ue,At=ue=0,us=null,Qt=je.next();pt!==null&&!Qt.done;At++,Qt=je.next()){pt.index>At?(us=pt,pt=null):us=pt.sibling;var fo=ke(_e,pt,Qt.value,Ge);if(fo===null){pt===null&&(pt=us);break}l&&pt&&fo.alternate===null&&d(_e,pt),ue=S(fo,ue,At),Vt===null?ct=fo:Vt.sibling=fo,Vt=fo,pt=us}if(Qt.done)return p(_e,pt),Zt&&nl(_e,At),ct;if(pt===null){for(;!Qt.done;At++,Qt=je.next())Qt=Xe(_e,Qt.value,Ge),Qt!==null&&(ue=S(Qt,ue,At),Vt===null?ct=Qt:Vt.sibling=Qt,Vt=Qt);return Zt&&nl(_e,At),ct}for(pt=y(pt);!Qt.done;At++,Qt=je.next())Qt=Me(pt,_e,At,Qt.value,Ge),Qt!==null&&(l&&Qt.alternate!==null&&pt.delete(Qt.key===null?At:Qt.key),ue=S(Qt,ue,At),Vt===null?ct=Qt:Vt.sibling=Qt,Vt=Qt);return l&&pt.forEach(function(w6){return d(_e,w6)}),Zt&&nl(_e,At),ct}function yn(_e,ue,je,Ge){if(typeof je=="object"&&je!==null&&je.type===b&&je.key===null&&(je=je.props.children),typeof je=="object"&&je!==null){switch(je.$$typeof){case g:e:{for(var ct=je.key;ue!==null;){if(ue.key===ct){if(ct=je.type,ct===b){if(ue.tag===7){p(_e,ue.sibling),Ge=w(ue,je.props.children),Ge.return=_e,_e=Ge;break e}}else if(ue.elementType===ct||typeof ct=="object"&&ct!==null&&ct.$$typeof===T&&HC(ct)===ue.type){p(_e,ue.sibling),Ge=w(ue,je.props),Rd(Ge,je),Ge.return=_e,_e=Ge;break e}p(_e,ue);break}else d(_e,ue);ue=ue.sibling}je.type===b?(Ge=el(je.props.children,_e.mode,Ge,je.key),Ge.return=_e,_e=Ge):(Ge=Tm(je.type,je.key,je.props,null,_e.mode,Ge),Rd(Ge,je),Ge.return=_e,_e=Ge)}return F(_e);case x:e:{for(ct=je.key;ue!==null;){if(ue.key===ct)if(ue.tag===4&&ue.stateNode.containerInfo===je.containerInfo&&ue.stateNode.implementation===je.implementation){p(_e,ue.sibling),Ge=w(ue,je.children||[]),Ge.return=_e,_e=Ge;break e}else{p(_e,ue);break}else d(_e,ue);ue=ue.sibling}Ge=Ab(je,_e.mode,Ge),Ge.return=_e,_e=Ge}return F(_e);case T:return ct=je._init,je=ct(je._payload),yn(_e,ue,je,Ge)}if(U(je))return St(_e,ue,je,Ge);if(H(je)){if(ct=H(je),typeof ct!="function")throw Error(s(150));return je=ct.call(je),vt(_e,ue,je,Ge)}if(typeof je.then=="function")return yn(_e,ue,Gm(je),Ge);if(je.$$typeof===k)return yn(_e,ue,Pm(_e,je),Ge);Km(_e,je)}return typeof je=="string"&&je!==""||typeof je=="number"||typeof je=="bigint"?(je=""+je,ue!==null&&ue.tag===6?(p(_e,ue.sibling),Ge=w(ue,je),Ge.return=_e,_e=Ge):(p(_e,ue),Ge=_b(je,_e.mode,Ge),Ge.return=_e,_e=Ge),F(_e)):p(_e,ue)}return function(_e,ue,je,Ge){try{Md=0;var ct=yn(_e,ue,je,Ge);return Mc=null,ct}catch(pt){if(pt===wd||pt===Fm)throw pt;var Vt=lr(29,pt,null,_e.mode);return Vt.lanes=Ge,Vt.return=_e,Vt}finally{}}}var Rc=UC(!0),WC=UC(!1),kr=B(null),pa=null;function Qi(l){var d=l.alternate;le(ss,ss.current&1),le(kr,l),pa===null&&(d===null||kc.current!==null||d.memoizedState!==null)&&(pa=l)}function YC(l){if(l.tag===22){if(le(ss,ss.current),le(kr,l),pa===null){var d=l.alternate;d!==null&&d.memoizedState!==null&&(pa=l)}}else Xi()}function Xi(){le(ss,ss.current),le(kr,kr.current)}function ri(l){se(kr),pa===l&&(pa=null),se(ss)}var ss=B(0);function Qm(l){for(var d=l;d!==null;){if(d.tag===13){var p=d.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||Uv(p)))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}function tv(l,d,p,y){d=l.memoizedState,p=p(y,d),p=p==null?d:m({},d,p),l.memoizedState=p,l.lanes===0&&(l.updateQueue.baseState=p)}var nv={enqueueSetState:function(l,d,p){l=l._reactInternals;var y=fr(),w=qi(y);w.payload=d,p!=null&&(w.callback=p),d=Gi(l,w,y),d!==null&&(hr(d,l,y),Sd(d,l,y))},enqueueReplaceState:function(l,d,p){l=l._reactInternals;var y=fr(),w=qi(y);w.tag=1,w.payload=d,p!=null&&(w.callback=p),d=Gi(l,w,y),d!==null&&(hr(d,l,y),Sd(d,l,y))},enqueueForceUpdate:function(l,d){l=l._reactInternals;var p=fr(),y=qi(p);y.tag=2,d!=null&&(y.callback=d),d=Gi(l,y,p),d!==null&&(hr(d,l,p),Sd(d,l,p))}};function qC(l,d,p,y,w,S,F){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(y,S,F):d.prototype&&d.prototype.isPureReactComponent?!pd(p,y)||!pd(w,S):!0}function GC(l,d,p,y){l=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(p,y),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(p,y),d.state!==l&&nv.enqueueReplaceState(d,d.state,null)}function cl(l,d){var p=d;if("ref"in d){p={};for(var y in d)y!=="ref"&&(p[y]=d[y])}if(l=l.defaultProps){p===d&&(p=m({},p));for(var w in l)p[w]===void 0&&(p[w]=l[w])}return p}var Xm=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(d))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)};function KC(l){Xm(l)}function QC(l){console.error(l)}function XC(l){Xm(l)}function Zm(l,d){try{var p=l.onUncaughtError;p(d.value,{componentStack:d.stack})}catch(y){setTimeout(function(){throw y})}}function ZC(l,d,p){try{var y=l.onCaughtError;y(p.value,{componentStack:p.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(w){setTimeout(function(){throw w})}}function sv(l,d,p){return p=qi(p),p.tag=3,p.payload={element:null},p.callback=function(){Zm(l,d)},p}function JC(l){return l=qi(l),l.tag=3,l}function eN(l,d,p,y){var w=p.type.getDerivedStateFromError;if(typeof w=="function"){var S=y.value;l.payload=function(){return w(S)},l.callback=function(){ZC(d,p,y)}}var F=p.stateNode;F!==null&&typeof F.componentDidCatch=="function"&&(l.callback=function(){ZC(d,p,y),typeof w!="function"&&(so===null?so=new Set([this]):so.add(this));var W=y.stack;this.componentDidCatch(y.value,{componentStack:W!==null?W:""})})}function wV(l,d,p,y,w){if(p.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(d=p.alternate,d!==null&&vd(d,p,w,!0),p=kr.current,p!==null){switch(p.tag){case 13:return pa===null?Nv():p.alternate===null&&On===0&&(On=3),p.flags&=-257,p.flags|=65536,p.lanes=w,y===Mb?p.flags|=16384:(d=p.updateQueue,d===null?p.updateQueue=new Set([y]):d.add(y),Dv(l,y,w)),!1;case 22:return p.flags|=65536,y===Mb?p.flags|=16384:(d=p.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([y])},p.updateQueue=d):(p=d.retryQueue,p===null?d.retryQueue=new Set([y]):p.add(y)),Dv(l,y,w)),!1}throw Error(s(435,p.tag))}return Dv(l,y,w),Nv(),!1}if(Zt)return d=kr.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=w,y!==Sb&&(l=Error(s(422),{cause:y}),bd(jr(l,p)))):(y!==Sb&&(d=Error(s(423),{cause:y}),bd(jr(d,p))),l=l.current.alternate,l.flags|=65536,w&=-w,l.lanes|=w,y=jr(y,p),w=sv(l.stateNode,y,w),Pb(l,w),On!==4&&(On=2)),!1;var S=Error(s(520),{cause:y});if(S=jr(S,p),Vd===null?Vd=[S]:Vd.push(S),On!==4&&(On=2),d===null)return!0;y=jr(y,p),p=d;do{switch(p.tag){case 3:return p.flags|=65536,l=w&-w,p.lanes|=l,l=sv(p.stateNode,y,l),Pb(p,l),!1;case 1:if(d=p.type,S=p.stateNode,(p.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(so===null||!so.has(S))))return p.flags|=65536,w&=-w,p.lanes|=w,w=JC(w),eN(w,l,p,y),Pb(p,w),!1}p=p.return}while(p!==null);return!1}var tN=Error(s(461)),ls=!1;function ps(l,d,p,y){d.child=l===null?WC(d,null,p,y):Rc(d,l.child,p,y)}function nN(l,d,p,y,w){p=p.render;var S=d.ref;if("ref"in y){var F={};for(var W in y)W!=="ref"&&(F[W]=y[W])}else F=y;return il(d),y=Vb(l,d,p,F,S,w),W=zb(),l!==null&&!ls?($b(l,d,w),ai(l,d,w)):(Zt&&W&&wb(d),d.flags|=1,ps(l,d,y,w),d.child)}function sN(l,d,p,y,w){if(l===null){var S=p.type;return typeof S=="function"&&!vb(S)&&S.defaultProps===void 0&&p.compare===null?(d.tag=15,d.type=S,rN(l,d,S,y,w)):(l=Tm(p.type,null,y,d,d.mode,w),l.ref=d.ref,l.return=d,d.child=l)}if(S=l.child,!dv(l,w)){var F=S.memoizedProps;if(p=p.compare,p=p!==null?p:pd,p(F,y)&&l.ref===d.ref)return ai(l,d,w)}return d.flags|=1,l=Za(S,y),l.ref=d.ref,l.return=d,d.child=l}function rN(l,d,p,y,w){if(l!==null){var S=l.memoizedProps;if(pd(S,y)&&l.ref===d.ref)if(ls=!1,d.pendingProps=y=S,dv(l,w))(l.flags&131072)!==0&&(ls=!0);else return d.lanes=l.lanes,ai(l,d,w)}return rv(l,d,p,y,w)}function aN(l,d,p){var y=d.pendingProps,w=y.children,S=l!==null?l.memoizedState:null;if(y.mode==="hidden"){if((d.flags&128)!==0){if(y=S!==null?S.baseLanes|p:p,l!==null){for(w=d.child=l.child,S=0;w!==null;)S=S|w.lanes|w.childLanes,w=w.sibling;d.childLanes=S&~y}else d.childLanes=0,d.child=null;return iN(l,d,y,p)}if((p&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},l!==null&&Lm(d,S!==null?S.cachePool:null),S!==null?rC(d,S):Fb(),YC(d);else return d.lanes=d.childLanes=536870912,iN(l,d,S!==null?S.baseLanes|p:p,p)}else S!==null?(Lm(d,S.cachePool),rC(d,S),Xi(),d.memoizedState=null):(l!==null&&Lm(d,null),Fb(),Xi());return ps(l,d,w,p),d.child}function iN(l,d,p,y){var w=Tb();return w=w===null?null:{parent:ns._currentValue,pool:w},d.memoizedState={baseLanes:p,cachePool:w},l!==null&&Lm(d,null),Fb(),YC(d),l!==null&&vd(l,d,y,!0),null}function Jm(l,d){var p=d.ref;if(p===null)l!==null&&l.ref!==null&&(d.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(s(284));(l===null||l.ref!==p)&&(d.flags|=4194816)}}function rv(l,d,p,y,w){return il(d),p=Vb(l,d,p,y,void 0,w),y=zb(),l!==null&&!ls?($b(l,d,w),ai(l,d,w)):(Zt&&y&&wb(d),d.flags|=1,ps(l,d,p,w),d.child)}function oN(l,d,p,y,w,S){return il(d),d.updateQueue=null,p=iC(d,y,p,w),aC(l),y=zb(),l!==null&&!ls?($b(l,d,S),ai(l,d,S)):(Zt&&y&&wb(d),d.flags|=1,ps(l,d,p,S),d.child)}function lN(l,d,p,y,w){if(il(d),d.stateNode===null){var S=wc,F=p.contextType;typeof F=="object"&&F!==null&&(S=js(F)),S=new p(y,S),d.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=nv,d.stateNode=S,S._reactInternals=d,S=d.stateNode,S.props=y,S.state=d.memoizedState,S.refs={},Rb(d),F=p.contextType,S.context=typeof F=="object"&&F!==null?js(F):wc,S.state=d.memoizedState,F=p.getDerivedStateFromProps,typeof F=="function"&&(tv(d,p,F,y),S.state=d.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(F=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),F!==S.state&&nv.enqueueReplaceState(S,S.state,null),Nd(d,y,S,w),Cd(),S.state=d.memoizedState),typeof S.componentDidMount=="function"&&(d.flags|=4194308),y=!0}else if(l===null){S=d.stateNode;var W=d.memoizedProps,re=cl(p,W);S.props=re;var Se=S.context,Ye=p.contextType;F=wc,typeof Ye=="object"&&Ye!==null&&(F=js(Ye));var Xe=p.getDerivedStateFromProps;Ye=typeof Xe=="function"||typeof S.getSnapshotBeforeUpdate=="function",W=d.pendingProps!==W,Ye||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(W||Se!==F)&&GC(d,S,y,F),Yi=!1;var ke=d.memoizedState;S.state=ke,Nd(d,y,S,w),Cd(),Se=d.memoizedState,W||ke!==Se||Yi?(typeof Xe=="function"&&(tv(d,p,Xe,y),Se=d.memoizedState),(re=Yi||qC(d,p,re,y,ke,Se,F))?(Ye||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(d.flags|=4194308)):(typeof S.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=y,d.memoizedState=Se),S.props=y,S.state=Se,S.context=F,y=re):(typeof S.componentDidMount=="function"&&(d.flags|=4194308),y=!1)}else{S=d.stateNode,Ob(l,d),F=d.memoizedProps,Ye=cl(p,F),S.props=Ye,Xe=d.pendingProps,ke=S.context,Se=p.contextType,re=wc,typeof Se=="object"&&Se!==null&&(re=js(Se)),W=p.getDerivedStateFromProps,(Se=typeof W=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(F!==Xe||ke!==re)&&GC(d,S,y,re),Yi=!1,ke=d.memoizedState,S.state=ke,Nd(d,y,S,w),Cd();var Me=d.memoizedState;F!==Xe||ke!==Me||Yi||l!==null&&l.dependencies!==null&&Om(l.dependencies)?(typeof W=="function"&&(tv(d,p,W,y),Me=d.memoizedState),(Ye=Yi||qC(d,p,Ye,y,ke,Me,re)||l!==null&&l.dependencies!==null&&Om(l.dependencies))?(Se||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(y,Me,re),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(y,Me,re)),typeof S.componentDidUpdate=="function"&&(d.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof S.componentDidUpdate!="function"||F===l.memoizedProps&&ke===l.memoizedState||(d.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||F===l.memoizedProps&&ke===l.memoizedState||(d.flags|=1024),d.memoizedProps=y,d.memoizedState=Me),S.props=y,S.state=Me,S.context=re,y=Ye):(typeof S.componentDidUpdate!="function"||F===l.memoizedProps&&ke===l.memoizedState||(d.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||F===l.memoizedProps&&ke===l.memoizedState||(d.flags|=1024),y=!1)}return S=y,Jm(l,d),y=(d.flags&128)!==0,S||y?(S=d.stateNode,p=y&&typeof p.getDerivedStateFromError!="function"?null:S.render(),d.flags|=1,l!==null&&y?(d.child=Rc(d,l.child,null,w),d.child=Rc(d,null,p,w)):ps(l,d,p,w),d.memoizedState=S.state,l=d.child):l=ai(l,d,w),l}function cN(l,d,p,y){return xd(),d.flags|=256,ps(l,d,p,y),d.child}var av={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function iv(l){return{baseLanes:l,cachePool:Q1()}}function ov(l,d,p){return l=l!==null?l.childLanes&~p:0,d&&(l|=Dr),l}function uN(l,d,p){var y=d.pendingProps,w=!1,S=(d.flags&128)!==0,F;if((F=S)||(F=l!==null&&l.memoizedState===null?!1:(ss.current&2)!==0),F&&(w=!0,d.flags&=-129),F=(d.flags&32)!==0,d.flags&=-33,l===null){if(Zt){if(w?Qi(d):Xi(),Zt){var W=Rn,re;if(re=W){e:{for(re=W,W=ma;re.nodeType!==8;){if(!W){W=null;break e}if(re=Jr(re.nextSibling),re===null){W=null;break e}}W=re}W!==null?(d.memoizedState={dehydrated:W,treeContext:tl!==null?{id:Ja,overflow:ei}:null,retryLane:536870912,hydrationErrors:null},re=lr(18,null,null,0),re.stateNode=W,re.return=d,d.child=re,Ls=d,Rn=null,re=!0):re=!1}re||rl(d)}if(W=d.memoizedState,W!==null&&(W=W.dehydrated,W!==null))return Uv(W)?d.lanes=32:d.lanes=536870912,null;ri(d)}return W=y.children,y=y.fallback,w?(Xi(),w=d.mode,W=ep({mode:"hidden",children:W},w),y=el(y,w,p,null),W.return=d,y.return=d,W.sibling=y,d.child=W,w=d.child,w.memoizedState=iv(p),w.childLanes=ov(l,F,p),d.memoizedState=av,y):(Qi(d),lv(d,W))}if(re=l.memoizedState,re!==null&&(W=re.dehydrated,W!==null)){if(S)d.flags&256?(Qi(d),d.flags&=-257,d=cv(l,d,p)):d.memoizedState!==null?(Xi(),d.child=l.child,d.flags|=128,d=null):(Xi(),w=y.fallback,W=d.mode,y=ep({mode:"visible",children:y.children},W),w=el(w,W,p,null),w.flags|=2,y.return=d,w.return=d,y.sibling=w,d.child=y,Rc(d,l.child,null,p),y=d.child,y.memoizedState=iv(p),y.childLanes=ov(l,F,p),d.memoizedState=av,d=w);else if(Qi(d),Uv(W)){if(F=W.nextSibling&&W.nextSibling.dataset,F)var Se=F.dgst;F=Se,y=Error(s(419)),y.stack="",y.digest=F,bd({value:y,source:null,stack:null}),d=cv(l,d,p)}else if(ls||vd(l,d,p,!1),F=(p&l.childLanes)!==0,ls||F){if(F=_n,F!==null&&(y=p&-p,y=(y&42)!==0?1:Je(y),y=(y&(F.suspendedLanes|p))!==0?0:y,y!==0&&y!==re.retryLane))throw re.retryLane=y,Ac(l,y),hr(F,l,y),tN;W.data==="$?"||Nv(),d=cv(l,d,p)}else W.data==="$?"?(d.flags|=192,d.child=l.child,d=null):(l=re.treeContext,Rn=Jr(W.nextSibling),Ls=d,Zt=!0,sl=null,ma=!1,l!==null&&(Cr[Nr++]=Ja,Cr[Nr++]=ei,Cr[Nr++]=tl,Ja=l.id,ei=l.overflow,tl=d),d=lv(d,y.children),d.flags|=4096);return d}return w?(Xi(),w=y.fallback,W=d.mode,re=l.child,Se=re.sibling,y=Za(re,{mode:"hidden",children:y.children}),y.subtreeFlags=re.subtreeFlags&65011712,Se!==null?w=Za(Se,w):(w=el(w,W,p,null),w.flags|=2),w.return=d,y.return=d,y.sibling=w,d.child=y,y=w,w=d.child,W=l.child.memoizedState,W===null?W=iv(p):(re=W.cachePool,re!==null?(Se=ns._currentValue,re=re.parent!==Se?{parent:Se,pool:Se}:re):re=Q1(),W={baseLanes:W.baseLanes|p,cachePool:re}),w.memoizedState=W,w.childLanes=ov(l,F,p),d.memoizedState=av,y):(Qi(d),p=l.child,l=p.sibling,p=Za(p,{mode:"visible",children:y.children}),p.return=d,p.sibling=null,l!==null&&(F=d.deletions,F===null?(d.deletions=[l],d.flags|=16):F.push(l)),d.child=p,d.memoizedState=null,p)}function lv(l,d){return d=ep({mode:"visible",children:d},l.mode),d.return=l,l.child=d}function ep(l,d){return l=lr(22,l,null,d),l.lanes=0,l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},l}function cv(l,d,p){return Rc(d,l.child,null,p),l=lv(d,d.pendingProps.children),l.flags|=2,d.memoizedState=null,l}function dN(l,d,p){l.lanes|=d;var y=l.alternate;y!==null&&(y.lanes|=d),Nb(l.return,d,p)}function uv(l,d,p,y,w){var S=l.memoizedState;S===null?l.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:y,tail:p,tailMode:w}:(S.isBackwards=d,S.rendering=null,S.renderingStartTime=0,S.last=y,S.tail=p,S.tailMode=w)}function fN(l,d,p){var y=d.pendingProps,w=y.revealOrder,S=y.tail;if(ps(l,d,y.children,p),y=ss.current,(y&2)!==0)y=y&1|2,d.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=d.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&dN(l,p,d);else if(l.tag===19)dN(l,p,d);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===d)break e;for(;l.sibling===null;){if(l.return===null||l.return===d)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}y&=1}switch(le(ss,y),w){case"forwards":for(p=d.child,w=null;p!==null;)l=p.alternate,l!==null&&Qm(l)===null&&(w=p),p=p.sibling;p=w,p===null?(w=d.child,d.child=null):(w=p.sibling,p.sibling=null),uv(d,!1,w,p,S);break;case"backwards":for(p=null,w=d.child,d.child=null;w!==null;){if(l=w.alternate,l!==null&&Qm(l)===null){d.child=w;break}l=w.sibling,w.sibling=p,p=w,w=l}uv(d,!0,p,null,S);break;case"together":uv(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function ai(l,d,p){if(l!==null&&(d.dependencies=l.dependencies),no|=d.lanes,(p&d.childLanes)===0)if(l!==null){if(vd(l,d,p,!1),(p&d.childLanes)===0)return null}else return null;if(l!==null&&d.child!==l.child)throw Error(s(153));if(d.child!==null){for(l=d.child,p=Za(l,l.pendingProps),d.child=p,p.return=d;l.sibling!==null;)l=l.sibling,p=p.sibling=Za(l,l.pendingProps),p.return=d;p.sibling=null}return d.child}function dv(l,d){return(l.lanes&d)!==0?!0:(l=l.dependencies,!!(l!==null&&Om(l)))}function jV(l,d,p){switch(d.tag){case 3:Ne(d,d.stateNode.containerInfo),Wi(d,ns,l.memoizedState.cache),xd();break;case 27:case 5:ce(d);break;case 4:Ne(d,d.stateNode.containerInfo);break;case 10:Wi(d,d.type,d.memoizedProps.value);break;case 13:var y=d.memoizedState;if(y!==null)return y.dehydrated!==null?(Qi(d),d.flags|=128,null):(p&d.child.childLanes)!==0?uN(l,d,p):(Qi(d),l=ai(l,d,p),l!==null?l.sibling:null);Qi(d);break;case 19:var w=(l.flags&128)!==0;if(y=(p&d.childLanes)!==0,y||(vd(l,d,p,!1),y=(p&d.childLanes)!==0),w){if(y)return fN(l,d,p);d.flags|=128}if(w=d.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),le(ss,ss.current),y)break;return null;case 22:case 23:return d.lanes=0,aN(l,d,p);case 24:Wi(d,ns,l.memoizedState.cache)}return ai(l,d,p)}function hN(l,d,p){if(l!==null)if(l.memoizedProps!==d.pendingProps)ls=!0;else{if(!dv(l,p)&&(d.flags&128)===0)return ls=!1,jV(l,d,p);ls=(l.flags&131072)!==0}else ls=!1,Zt&&(d.flags&1048576)!==0&&H1(d,Rm,d.index);switch(d.lanes=0,d.tag){case 16:e:{l=d.pendingProps;var y=d.elementType,w=y._init;if(y=w(y._payload),d.type=y,typeof y=="function")vb(y)?(l=cl(y,l),d.tag=1,d=lN(null,d,y,l,p)):(d.tag=0,d=rv(null,d,y,l,p));else{if(y!=null){if(w=y.$$typeof,w===E){d.tag=11,d=nN(null,d,y,l,p);break e}else if(w===M){d.tag=14,d=sN(null,d,y,l,p);break e}}throw d=G(y)||y,Error(s(306,d,""))}}return d;case 0:return rv(l,d,d.type,d.pendingProps,p);case 1:return y=d.type,w=cl(y,d.pendingProps),lN(l,d,y,w,p);case 3:e:{if(Ne(d,d.stateNode.containerInfo),l===null)throw Error(s(387));y=d.pendingProps;var S=d.memoizedState;w=S.element,Ob(l,d),Nd(d,y,null,p);var F=d.memoizedState;if(y=F.cache,Wi(d,ns,y),y!==S.cache&&kb(d,[ns],p,!0),Cd(),y=F.element,S.isDehydrated)if(S={element:y,isDehydrated:!1,cache:F.cache},d.updateQueue.baseState=S,d.memoizedState=S,d.flags&256){d=cN(l,d,y,p);break e}else if(y!==w){w=jr(Error(s(424)),d),bd(w),d=cN(l,d,y,p);break e}else{switch(l=d.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(Rn=Jr(l.firstChild),Ls=d,Zt=!0,sl=null,ma=!0,p=WC(d,null,y,p),d.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling}else{if(xd(),y===w){d=ai(l,d,p);break e}ps(l,d,y,p)}d=d.child}return d;case 26:return Jm(l,d),l===null?(p=yk(d.type,null,d.pendingProps,null))?d.memoizedState=p:Zt||(p=d.type,l=d.pendingProps,y=mp(X.current).createElement(p),y[Ft]=d,y[Bn]=l,ys(y,p,l),os(y),d.stateNode=y):d.memoizedState=yk(d.type,l.memoizedProps,d.pendingProps,l.memoizedState),null;case 27:return ce(d),l===null&&Zt&&(y=d.stateNode=mk(d.type,d.pendingProps,X.current),Ls=d,ma=!0,w=Rn,io(d.type)?(Wv=w,Rn=Jr(y.firstChild)):Rn=w),ps(l,d,d.pendingProps.children,p),Jm(l,d),l===null&&(d.flags|=4194304),d.child;case 5:return l===null&&Zt&&((w=y=Rn)&&(y=ZV(y,d.type,d.pendingProps,ma),y!==null?(d.stateNode=y,Ls=d,Rn=Jr(y.firstChild),ma=!1,w=!0):w=!1),w||rl(d)),ce(d),w=d.type,S=d.pendingProps,F=l!==null?l.memoizedProps:null,y=S.children,zv(w,S)?y=null:F!==null&&zv(w,F)&&(d.flags|=32),d.memoizedState!==null&&(w=Vb(l,d,gV,null,null,p),Kd._currentValue=w),Jm(l,d),ps(l,d,y,p),d.child;case 6:return l===null&&Zt&&((l=p=Rn)&&(p=JV(p,d.pendingProps,ma),p!==null?(d.stateNode=p,Ls=d,Rn=null,l=!0):l=!1),l||rl(d)),null;case 13:return uN(l,d,p);case 4:return Ne(d,d.stateNode.containerInfo),y=d.pendingProps,l===null?d.child=Rc(d,null,y,p):ps(l,d,y,p),d.child;case 11:return nN(l,d,d.type,d.pendingProps,p);case 7:return ps(l,d,d.pendingProps,p),d.child;case 8:return ps(l,d,d.pendingProps.children,p),d.child;case 12:return ps(l,d,d.pendingProps.children,p),d.child;case 10:return y=d.pendingProps,Wi(d,d.type,y.value),ps(l,d,y.children,p),d.child;case 9:return w=d.type._context,y=d.pendingProps.children,il(d),w=js(w),y=y(w),d.flags|=1,ps(l,d,y,p),d.child;case 14:return sN(l,d,d.type,d.pendingProps,p);case 15:return rN(l,d,d.type,d.pendingProps,p);case 19:return fN(l,d,p);case 31:return y=d.pendingProps,p=d.mode,y={mode:y.mode,children:y.children},l===null?(p=ep(y,p),p.ref=d.ref,d.child=p,p.return=d,d=p):(p=Za(l.child,y),p.ref=d.ref,d.child=p,p.return=d,d=p),d;case 22:return aN(l,d,p);case 24:return il(d),y=js(ns),l===null?(w=Tb(),w===null&&(w=_n,S=Db(),w.pooledCache=S,S.refCount++,S!==null&&(w.pooledCacheLanes|=p),w=S),d.memoizedState={parent:y,cache:w},Rb(d),Wi(d,ns,w)):((l.lanes&p)!==0&&(Ob(l,d),Nd(d,null,null,p),Cd()),w=l.memoizedState,S=d.memoizedState,w.parent!==y?(w={parent:y,cache:y},d.memoizedState=w,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=w),Wi(d,ns,y)):(y=S.cache,Wi(d,ns,y),y!==w.cache&&kb(d,[ns],p,!0))),ps(l,d,d.pendingProps.children,p),d.child;case 29:throw d.pendingProps}throw Error(s(156,d.tag))}function ii(l){l.flags|=4}function mN(l,d){if(d.type!=="stylesheet"||(d.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!Ak(d)){if(d=kr.current,d!==null&&((Gt&4194048)===Gt?pa!==null:(Gt&62914560)!==Gt&&(Gt&536870912)===0||d!==pa))throw jd=Mb,X1;l.flags|=8192}}function tp(l,d){d!==null&&(l.flags|=4),l.flags&16384&&(d=l.tag!==22?Ee():536870912,l.lanes|=d,Fc|=d)}function Od(l,d){if(!Zt)switch(l.tailMode){case"hidden":d=l.tail;for(var p=null;d!==null;)d.alternate!==null&&(p=d),d=d.sibling;p===null?l.tail=null:p.sibling=null;break;case"collapsed":p=l.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?d||l.tail===null?l.tail=null:l.tail.sibling=null:y.sibling=null}}function kn(l){var d=l.alternate!==null&&l.alternate.child===l.child,p=0,y=0;if(d)for(var w=l.child;w!==null;)p|=w.lanes|w.childLanes,y|=w.subtreeFlags&65011712,y|=w.flags&65011712,w.return=l,w=w.sibling;else for(w=l.child;w!==null;)p|=w.lanes|w.childLanes,y|=w.subtreeFlags,y|=w.flags,w.return=l,w=w.sibling;return l.subtreeFlags|=y,l.childLanes=p,d}function SV(l,d,p){var y=d.pendingProps;switch(jb(d),d.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kn(d),null;case 1:return kn(d),null;case 3:return p=d.stateNode,y=null,l!==null&&(y=l.memoizedState.cache),d.memoizedState.cache!==y&&(d.flags|=2048),ni(ns),Ke(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(l===null||l.child===null)&&(yd(d)?ii(d):l===null||l.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,Y1())),kn(d),null;case 26:return p=d.memoizedState,l===null?(ii(d),p!==null?(kn(d),mN(d,p)):(kn(d),d.flags&=-16777217)):p?p!==l.memoizedState?(ii(d),kn(d),mN(d,p)):(kn(d),d.flags&=-16777217):(l.memoizedProps!==y&&ii(d),kn(d),d.flags&=-16777217),null;case 27:xe(d),p=X.current;var w=d.type;if(l!==null&&d.stateNode!=null)l.memoizedProps!==y&&ii(d);else{if(!y){if(d.stateNode===null)throw Error(s(166));return kn(d),null}l=ae.current,yd(d)?U1(d):(l=mk(w,y,p),d.stateNode=l,ii(d))}return kn(d),null;case 5:if(xe(d),p=d.type,l!==null&&d.stateNode!=null)l.memoizedProps!==y&&ii(d);else{if(!y){if(d.stateNode===null)throw Error(s(166));return kn(d),null}if(l=ae.current,yd(d))U1(d);else{switch(w=mp(X.current),l){case 1:l=w.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:l=w.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":l=w.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":l=w.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":l=w.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof y.is=="string"?w.createElement("select",{is:y.is}):w.createElement("select"),y.multiple?l.multiple=!0:y.size&&(l.size=y.size);break;default:l=typeof y.is=="string"?w.createElement(p,{is:y.is}):w.createElement(p)}}l[Ft]=d,l[Bn]=y;e:for(w=d.child;w!==null;){if(w.tag===5||w.tag===6)l.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===d)break e;for(;w.sibling===null;){if(w.return===null||w.return===d)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}d.stateNode=l;e:switch(ys(l,p,y),p){case"button":case"input":case"select":case"textarea":l=!!y.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&ii(d)}}return kn(d),d.flags&=-16777217,null;case 6:if(l&&d.stateNode!=null)l.memoizedProps!==y&&ii(d);else{if(typeof y!="string"&&d.stateNode===null)throw Error(s(166));if(l=X.current,yd(d)){if(l=d.stateNode,p=d.memoizedProps,y=null,w=Ls,w!==null)switch(w.tag){case 27:case 5:y=w.memoizedProps}l[Ft]=d,l=!!(l.nodeValue===p||y!==null&&y.suppressHydrationWarning===!0||ok(l.nodeValue,p)),l||rl(d)}else l=mp(l).createTextNode(y),l[Ft]=d,d.stateNode=l}return kn(d),null;case 13:if(y=d.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(w=yd(d),y!==null&&y.dehydrated!==null){if(l===null){if(!w)throw Error(s(318));if(w=d.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(s(317));w[Ft]=d}else xd(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;kn(d),w=!1}else w=Y1(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=w),w=!0;if(!w)return d.flags&256?(ri(d),d):(ri(d),null)}if(ri(d),(d.flags&128)!==0)return d.lanes=p,d;if(p=y!==null,l=l!==null&&l.memoizedState!==null,p){y=d.child,w=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(w=y.alternate.memoizedState.cachePool.pool);var S=null;y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(S=y.memoizedState.cachePool.pool),S!==w&&(y.flags|=2048)}return p!==l&&p&&(d.child.flags|=8192),tp(d,d.updateQueue),kn(d),null;case 4:return Ke(),l===null&&Lv(d.stateNode.containerInfo),kn(d),null;case 10:return ni(d.type),kn(d),null;case 19:if(se(ss),w=d.memoizedState,w===null)return kn(d),null;if(y=(d.flags&128)!==0,S=w.rendering,S===null)if(y)Od(w,!1);else{if(On!==0||l!==null&&(l.flags&128)!==0)for(l=d.child;l!==null;){if(S=Qm(l),S!==null){for(d.flags|=128,Od(w,!1),l=S.updateQueue,d.updateQueue=l,tp(d,l),d.subtreeFlags=0,l=p,p=d.child;p!==null;)$1(p,l),p=p.sibling;return le(ss,ss.current&1|2),d.child}l=l.sibling}w.tail!==null&&gt()>rp&&(d.flags|=128,y=!0,Od(w,!1),d.lanes=4194304)}else{if(!y)if(l=Qm(S),l!==null){if(d.flags|=128,y=!0,l=l.updateQueue,d.updateQueue=l,tp(d,l),Od(w,!0),w.tail===null&&w.tailMode==="hidden"&&!S.alternate&&!Zt)return kn(d),null}else 2*gt()-w.renderingStartTime>rp&&p!==536870912&&(d.flags|=128,y=!0,Od(w,!1),d.lanes=4194304);w.isBackwards?(S.sibling=d.child,d.child=S):(l=w.last,l!==null?l.sibling=S:d.child=S,w.last=S)}return w.tail!==null?(d=w.tail,w.rendering=d,w.tail=d.sibling,w.renderingStartTime=gt(),d.sibling=null,l=ss.current,le(ss,y?l&1|2:l&1),d):(kn(d),null);case 22:case 23:return ri(d),Bb(),y=d.memoizedState!==null,l!==null?l.memoizedState!==null!==y&&(d.flags|=8192):y&&(d.flags|=8192),y?(p&536870912)!==0&&(d.flags&128)===0&&(kn(d),d.subtreeFlags&6&&(d.flags|=8192)):kn(d),p=d.updateQueue,p!==null&&tp(d,p.retryQueue),p=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),y=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(y=d.memoizedState.cachePool.pool),y!==p&&(d.flags|=2048),l!==null&&se(ol),null;case 24:return p=null,l!==null&&(p=l.memoizedState.cache),d.memoizedState.cache!==p&&(d.flags|=2048),ni(ns),kn(d),null;case 25:return null;case 30:return null}throw Error(s(156,d.tag))}function CV(l,d){switch(jb(d),d.tag){case 1:return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 3:return ni(ns),Ke(),l=d.flags,(l&65536)!==0&&(l&128)===0?(d.flags=l&-65537|128,d):null;case 26:case 27:case 5:return xe(d),null;case 13:if(ri(d),l=d.memoizedState,l!==null&&l.dehydrated!==null){if(d.alternate===null)throw Error(s(340));xd()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 19:return se(ss),null;case 4:return Ke(),null;case 10:return ni(d.type),null;case 22:case 23:return ri(d),Bb(),l!==null&&se(ol),l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 24:return ni(ns),null;case 25:return null;default:return null}}function pN(l,d){switch(jb(d),d.tag){case 3:ni(ns),Ke();break;case 26:case 27:case 5:xe(d);break;case 4:Ke();break;case 13:ri(d);break;case 19:se(ss);break;case 10:ni(d.type);break;case 22:case 23:ri(d),Bb(),l!==null&&se(ol);break;case 24:ni(ns)}}function Pd(l,d){try{var p=d.updateQueue,y=p!==null?p.lastEffect:null;if(y!==null){var w=y.next;p=w;do{if((p.tag&l)===l){y=void 0;var S=p.create,F=p.inst;y=S(),F.destroy=y}p=p.next}while(p!==w)}}catch(W){xn(d,d.return,W)}}function Zi(l,d,p){try{var y=d.updateQueue,w=y!==null?y.lastEffect:null;if(w!==null){var S=w.next;y=S;do{if((y.tag&l)===l){var F=y.inst,W=F.destroy;if(W!==void 0){F.destroy=void 0,w=d;var re=p,Se=W;try{Se()}catch(Ye){xn(w,re,Ye)}}}y=y.next}while(y!==S)}}catch(Ye){xn(d,d.return,Ye)}}function gN(l){var d=l.updateQueue;if(d!==null){var p=l.stateNode;try{sC(d,p)}catch(y){xn(l,l.return,y)}}}function yN(l,d,p){p.props=cl(l.type,l.memoizedProps),p.state=l.memoizedState;try{p.componentWillUnmount()}catch(y){xn(l,d,y)}}function Ld(l,d){try{var p=l.ref;if(p!==null){switch(l.tag){case 26:case 27:case 5:var y=l.stateNode;break;case 30:y=l.stateNode;break;default:y=l.stateNode}typeof p=="function"?l.refCleanup=p(y):p.current=y}}catch(w){xn(l,d,w)}}function ga(l,d){var p=l.ref,y=l.refCleanup;if(p!==null)if(typeof y=="function")try{y()}catch(w){xn(l,d,w)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(w){xn(l,d,w)}else p.current=null}function xN(l){var d=l.type,p=l.memoizedProps,y=l.stateNode;try{e:switch(d){case"button":case"input":case"select":case"textarea":p.autoFocus&&y.focus();break e;case"img":p.src?y.src=p.src:p.srcSet&&(y.srcset=p.srcSet)}}catch(w){xn(l,l.return,w)}}function fv(l,d,p){try{var y=l.stateNode;qV(y,l.type,p,d),y[Bn]=d}catch(w){xn(l,l.return,w)}}function bN(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&io(l.type)||l.tag===4}function hv(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||bN(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&io(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function mv(l,d,p){var y=l.tag;if(y===5||y===6)l=l.stateNode,d?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(l,d):(d=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,d.appendChild(l),p=p._reactRootContainer,p!=null||d.onclick!==null||(d.onclick=hp));else if(y!==4&&(y===27&&io(l.type)&&(p=l.stateNode,d=null),l=l.child,l!==null))for(mv(l,d,p),l=l.sibling;l!==null;)mv(l,d,p),l=l.sibling}function np(l,d,p){var y=l.tag;if(y===5||y===6)l=l.stateNode,d?p.insertBefore(l,d):p.appendChild(l);else if(y!==4&&(y===27&&io(l.type)&&(p=l.stateNode),l=l.child,l!==null))for(np(l,d,p),l=l.sibling;l!==null;)np(l,d,p),l=l.sibling}function vN(l){var d=l.stateNode,p=l.memoizedProps;try{for(var y=l.type,w=d.attributes;w.length;)d.removeAttributeNode(w[0]);ys(d,y,p),d[Ft]=l,d[Bn]=p}catch(S){xn(l,l.return,S)}}var oi=!1,Vn=!1,pv=!1,_N=typeof WeakSet=="function"?WeakSet:Set,cs=null;function NV(l,d){if(l=l.containerInfo,Iv=vp,l=M1(l),hb(l)){if("selectionStart"in l)var p={start:l.selectionStart,end:l.selectionEnd};else e:{p=(p=l.ownerDocument)&&p.defaultView||window;var y=p.getSelection&&p.getSelection();if(y&&y.rangeCount!==0){p=y.anchorNode;var w=y.anchorOffset,S=y.focusNode;y=y.focusOffset;try{p.nodeType,S.nodeType}catch{p=null;break e}var F=0,W=-1,re=-1,Se=0,Ye=0,Xe=l,ke=null;t:for(;;){for(var Me;Xe!==p||w!==0&&Xe.nodeType!==3||(W=F+w),Xe!==S||y!==0&&Xe.nodeType!==3||(re=F+y),Xe.nodeType===3&&(F+=Xe.nodeValue.length),(Me=Xe.firstChild)!==null;)ke=Xe,Xe=Me;for(;;){if(Xe===l)break t;if(ke===p&&++Se===w&&(W=F),ke===S&&++Ye===y&&(re=F),(Me=Xe.nextSibling)!==null)break;Xe=ke,ke=Xe.parentNode}Xe=Me}p=W===-1||re===-1?null:{start:W,end:re}}else p=null}p=p||{start:0,end:0}}else p=null;for(Vv={focusedElem:l,selectionRange:p},vp=!1,cs=d;cs!==null;)if(d=cs,l=d.child,(d.subtreeFlags&1024)!==0&&l!==null)l.return=d,cs=l;else for(;cs!==null;){switch(d=cs,S=d.alternate,l=d.flags,d.tag){case 0:break;case 11:case 15:break;case 1:if((l&1024)!==0&&S!==null){l=void 0,p=d,w=S.memoizedProps,S=S.memoizedState,y=p.stateNode;try{var St=cl(p.type,w,p.elementType===p.type);l=y.getSnapshotBeforeUpdate(St,S),y.__reactInternalSnapshotBeforeUpdate=l}catch(vt){xn(p,p.return,vt)}}break;case 3:if((l&1024)!==0){if(l=d.stateNode.containerInfo,p=l.nodeType,p===9)Hv(l);else if(p===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":Hv(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(s(163))}if(l=d.sibling,l!==null){l.return=d.return,cs=l;break}cs=d.return}}function AN(l,d,p){var y=p.flags;switch(p.tag){case 0:case 11:case 15:Ji(l,p),y&4&&Pd(5,p);break;case 1:if(Ji(l,p),y&4)if(l=p.stateNode,d===null)try{l.componentDidMount()}catch(F){xn(p,p.return,F)}else{var w=cl(p.type,d.memoizedProps);d=d.memoizedState;try{l.componentDidUpdate(w,d,l.__reactInternalSnapshotBeforeUpdate)}catch(F){xn(p,p.return,F)}}y&64&&gN(p),y&512&&Ld(p,p.return);break;case 3:if(Ji(l,p),y&64&&(l=p.updateQueue,l!==null)){if(d=null,p.child!==null)switch(p.child.tag){case 27:case 5:d=p.child.stateNode;break;case 1:d=p.child.stateNode}try{sC(l,d)}catch(F){xn(p,p.return,F)}}break;case 27:d===null&&y&4&&vN(p);case 26:case 5:Ji(l,p),d===null&&y&4&&xN(p),y&512&&Ld(p,p.return);break;case 12:Ji(l,p);break;case 13:Ji(l,p),y&4&&SN(l,p),y&64&&(l=p.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(p=LV.bind(null,p),e6(l,p))));break;case 22:if(y=p.memoizedState!==null||oi,!y){d=d!==null&&d.memoizedState!==null||Vn,w=oi;var S=Vn;oi=y,(Vn=d)&&!S?eo(l,p,(p.subtreeFlags&8772)!==0):Ji(l,p),oi=w,Vn=S}break;case 30:break;default:Ji(l,p)}}function wN(l){var d=l.alternate;d!==null&&(l.alternate=null,wN(d)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(d=l.stateNode,d!==null&&Gx(d)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Sn=null,Ws=!1;function li(l,d,p){for(p=p.child;p!==null;)jN(l,d,p),p=p.sibling}function jN(l,d,p){if(De&&typeof De.onCommitFiberUnmount=="function")try{De.onCommitFiberUnmount(ee,p)}catch{}switch(p.tag){case 26:Vn||ga(p,d),li(l,d,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:Vn||ga(p,d);var y=Sn,w=Ws;io(p.type)&&(Sn=p.stateNode,Ws=!1),li(l,d,p),Wd(p.stateNode),Sn=y,Ws=w;break;case 5:Vn||ga(p,d);case 6:if(y=Sn,w=Ws,Sn=null,li(l,d,p),Sn=y,Ws=w,Sn!==null)if(Ws)try{(Sn.nodeType===9?Sn.body:Sn.nodeName==="HTML"?Sn.ownerDocument.body:Sn).removeChild(p.stateNode)}catch(S){xn(p,d,S)}else try{Sn.removeChild(p.stateNode)}catch(S){xn(p,d,S)}break;case 18:Sn!==null&&(Ws?(l=Sn,fk(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,p.stateNode),Jd(l)):fk(Sn,p.stateNode));break;case 4:y=Sn,w=Ws,Sn=p.stateNode.containerInfo,Ws=!0,li(l,d,p),Sn=y,Ws=w;break;case 0:case 11:case 14:case 15:Vn||Zi(2,p,d),Vn||Zi(4,p,d),li(l,d,p);break;case 1:Vn||(ga(p,d),y=p.stateNode,typeof y.componentWillUnmount=="function"&&yN(p,d,y)),li(l,d,p);break;case 21:li(l,d,p);break;case 22:Vn=(y=Vn)||p.memoizedState!==null,li(l,d,p),Vn=y;break;default:li(l,d,p)}}function SN(l,d){if(d.memoizedState===null&&(l=d.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{Jd(l)}catch(p){xn(d,d.return,p)}}function kV(l){switch(l.tag){case 13:case 19:var d=l.stateNode;return d===null&&(d=l.stateNode=new _N),d;case 22:return l=l.stateNode,d=l._retryCache,d===null&&(d=l._retryCache=new _N),d;default:throw Error(s(435,l.tag))}}function gv(l,d){var p=kV(l);d.forEach(function(y){var w=FV.bind(null,l,y);p.has(y)||(p.add(y),y.then(w,w))})}function cr(l,d){var p=d.deletions;if(p!==null)for(var y=0;y<p.length;y++){var w=p[y],S=l,F=d,W=F;e:for(;W!==null;){switch(W.tag){case 27:if(io(W.type)){Sn=W.stateNode,Ws=!1;break e}break;case 5:Sn=W.stateNode,Ws=!1;break e;case 3:case 4:Sn=W.stateNode.containerInfo,Ws=!0;break e}W=W.return}if(Sn===null)throw Error(s(160));jN(S,F,w),Sn=null,Ws=!1,S=w.alternate,S!==null&&(S.return=null),w.return=null}if(d.subtreeFlags&13878)for(d=d.child;d!==null;)CN(d,l),d=d.sibling}var Zr=null;function CN(l,d){var p=l.alternate,y=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:cr(d,l),ur(l),y&4&&(Zi(3,l,l.return),Pd(3,l),Zi(5,l,l.return));break;case 1:cr(d,l),ur(l),y&512&&(Vn||p===null||ga(p,p.return)),y&64&&oi&&(l=l.updateQueue,l!==null&&(y=l.callbacks,y!==null&&(p=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=p===null?y:p.concat(y))));break;case 26:var w=Zr;if(cr(d,l),ur(l),y&512&&(Vn||p===null||ga(p,p.return)),y&4){var S=p!==null?p.memoizedState:null;if(y=l.memoizedState,p===null)if(y===null)if(l.stateNode===null){e:{y=l.type,p=l.memoizedProps,w=w.ownerDocument||w;t:switch(y){case"title":S=w.getElementsByTagName("title")[0],(!S||S[Ko]||S[Ft]||S.namespaceURI==="http://www.w3.org/2000/svg"||S.hasAttribute("itemprop"))&&(S=w.createElement(y),w.head.insertBefore(S,w.querySelector("head > title"))),ys(S,y,p),S[Ft]=l,os(S),y=S;break e;case"link":var F=vk("link","href",w).get(y+(p.href||""));if(F){for(var W=0;W<F.length;W++)if(S=F[W],S.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&S.getAttribute("rel")===(p.rel==null?null:p.rel)&&S.getAttribute("title")===(p.title==null?null:p.title)&&S.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){F.splice(W,1);break t}}S=w.createElement(y),ys(S,y,p),w.head.appendChild(S);break;case"meta":if(F=vk("meta","content",w).get(y+(p.content||""))){for(W=0;W<F.length;W++)if(S=F[W],S.getAttribute("content")===(p.content==null?null:""+p.content)&&S.getAttribute("name")===(p.name==null?null:p.name)&&S.getAttribute("property")===(p.property==null?null:p.property)&&S.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&S.getAttribute("charset")===(p.charSet==null?null:p.charSet)){F.splice(W,1);break t}}S=w.createElement(y),ys(S,y,p),w.head.appendChild(S);break;default:throw Error(s(468,y))}S[Ft]=l,os(S),y=S}l.stateNode=y}else _k(w,l.type,l.stateNode);else l.stateNode=bk(w,y,l.memoizedProps);else S!==y?(S===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):S.count--,y===null?_k(w,l.type,l.stateNode):bk(w,y,l.memoizedProps)):y===null&&l.stateNode!==null&&fv(l,l.memoizedProps,p.memoizedProps)}break;case 27:cr(d,l),ur(l),y&512&&(Vn||p===null||ga(p,p.return)),p!==null&&y&4&&fv(l,l.memoizedProps,p.memoizedProps);break;case 5:if(cr(d,l),ur(l),y&512&&(Vn||p===null||ga(p,p.return)),l.flags&32){w=l.stateNode;try{pc(w,"")}catch(Me){xn(l,l.return,Me)}}y&4&&l.stateNode!=null&&(w=l.memoizedProps,fv(l,w,p!==null?p.memoizedProps:w)),y&1024&&(pv=!0);break;case 6:if(cr(d,l),ur(l),y&4){if(l.stateNode===null)throw Error(s(162));y=l.memoizedProps,p=l.stateNode;try{p.nodeValue=y}catch(Me){xn(l,l.return,Me)}}break;case 3:if(yp=null,w=Zr,Zr=pp(d.containerInfo),cr(d,l),Zr=w,ur(l),y&4&&p!==null&&p.memoizedState.isDehydrated)try{Jd(d.containerInfo)}catch(Me){xn(l,l.return,Me)}pv&&(pv=!1,NN(l));break;case 4:y=Zr,Zr=pp(l.stateNode.containerInfo),cr(d,l),ur(l),Zr=y;break;case 12:cr(d,l),ur(l);break;case 13:cr(d,l),ur(l),l.child.flags&8192&&l.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(Av=gt()),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,gv(l,y)));break;case 22:w=l.memoizedState!==null;var re=p!==null&&p.memoizedState!==null,Se=oi,Ye=Vn;if(oi=Se||w,Vn=Ye||re,cr(d,l),Vn=Ye,oi=Se,ur(l),y&8192)e:for(d=l.stateNode,d._visibility=w?d._visibility&-2:d._visibility|1,w&&(p===null||re||oi||Vn||ul(l)),p=null,d=l;;){if(d.tag===5||d.tag===26){if(p===null){re=p=d;try{if(S=re.stateNode,w)F=S.style,typeof F.setProperty=="function"?F.setProperty("display","none","important"):F.display="none";else{W=re.stateNode;var Xe=re.memoizedProps.style,ke=Xe!=null&&Xe.hasOwnProperty("display")?Xe.display:null;W.style.display=ke==null||typeof ke=="boolean"?"":(""+ke).trim()}}catch(Me){xn(re,re.return,Me)}}}else if(d.tag===6){if(p===null){re=d;try{re.stateNode.nodeValue=w?"":re.memoizedProps}catch(Me){xn(re,re.return,Me)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===l)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break e;for(;d.sibling===null;){if(d.return===null||d.return===l)break e;p===d&&(p=null),d=d.return}p===d&&(p=null),d.sibling.return=d.return,d=d.sibling}y&4&&(y=l.updateQueue,y!==null&&(p=y.retryQueue,p!==null&&(y.retryQueue=null,gv(l,p))));break;case 19:cr(d,l),ur(l),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,gv(l,y)));break;case 30:break;case 21:break;default:cr(d,l),ur(l)}}function ur(l){var d=l.flags;if(d&2){try{for(var p,y=l.return;y!==null;){if(bN(y)){p=y;break}y=y.return}if(p==null)throw Error(s(160));switch(p.tag){case 27:var w=p.stateNode,S=hv(l);np(l,S,w);break;case 5:var F=p.stateNode;p.flags&32&&(pc(F,""),p.flags&=-33);var W=hv(l);np(l,W,F);break;case 3:case 4:var re=p.stateNode.containerInfo,Se=hv(l);mv(l,Se,re);break;default:throw Error(s(161))}}catch(Ye){xn(l,l.return,Ye)}l.flags&=-3}d&4096&&(l.flags&=-4097)}function NN(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var d=l;NN(d),d.tag===5&&d.flags&1024&&d.stateNode.reset(),l=l.sibling}}function Ji(l,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)AN(l,d.alternate,d),d=d.sibling}function ul(l){for(l=l.child;l!==null;){var d=l;switch(d.tag){case 0:case 11:case 14:case 15:Zi(4,d,d.return),ul(d);break;case 1:ga(d,d.return);var p=d.stateNode;typeof p.componentWillUnmount=="function"&&yN(d,d.return,p),ul(d);break;case 27:Wd(d.stateNode);case 26:case 5:ga(d,d.return),ul(d);break;case 22:d.memoizedState===null&&ul(d);break;case 30:ul(d);break;default:ul(d)}l=l.sibling}}function eo(l,d,p){for(p=p&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var y=d.alternate,w=l,S=d,F=S.flags;switch(S.tag){case 0:case 11:case 15:eo(w,S,p),Pd(4,S);break;case 1:if(eo(w,S,p),y=S,w=y.stateNode,typeof w.componentDidMount=="function")try{w.componentDidMount()}catch(Se){xn(y,y.return,Se)}if(y=S,w=y.updateQueue,w!==null){var W=y.stateNode;try{var re=w.shared.hiddenCallbacks;if(re!==null)for(w.shared.hiddenCallbacks=null,w=0;w<re.length;w++)nC(re[w],W)}catch(Se){xn(y,y.return,Se)}}p&&F&64&&gN(S),Ld(S,S.return);break;case 27:vN(S);case 26:case 5:eo(w,S,p),p&&y===null&&F&4&&xN(S),Ld(S,S.return);break;case 12:eo(w,S,p);break;case 13:eo(w,S,p),p&&F&4&&SN(w,S);break;case 22:S.memoizedState===null&&eo(w,S,p),Ld(S,S.return);break;case 30:break;default:eo(w,S,p)}d=d.sibling}}function yv(l,d){var p=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),l=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(l=d.memoizedState.cachePool.pool),l!==p&&(l!=null&&l.refCount++,p!=null&&_d(p))}function xv(l,d){l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&_d(l))}function ya(l,d,p,y){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)kN(l,d,p,y),d=d.sibling}function kN(l,d,p,y){var w=d.flags;switch(d.tag){case 0:case 11:case 15:ya(l,d,p,y),w&2048&&Pd(9,d);break;case 1:ya(l,d,p,y);break;case 3:ya(l,d,p,y),w&2048&&(l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&_d(l)));break;case 12:if(w&2048){ya(l,d,p,y),l=d.stateNode;try{var S=d.memoizedProps,F=S.id,W=S.onPostCommit;typeof W=="function"&&W(F,d.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(re){xn(d,d.return,re)}}else ya(l,d,p,y);break;case 13:ya(l,d,p,y);break;case 23:break;case 22:S=d.stateNode,F=d.alternate,d.memoizedState!==null?S._visibility&2?ya(l,d,p,y):Fd(l,d):S._visibility&2?ya(l,d,p,y):(S._visibility|=2,Oc(l,d,p,y,(d.subtreeFlags&10256)!==0)),w&2048&&yv(F,d);break;case 24:ya(l,d,p,y),w&2048&&xv(d.alternate,d);break;default:ya(l,d,p,y)}}function Oc(l,d,p,y,w){for(w=w&&(d.subtreeFlags&10256)!==0,d=d.child;d!==null;){var S=l,F=d,W=p,re=y,Se=F.flags;switch(F.tag){case 0:case 11:case 15:Oc(S,F,W,re,w),Pd(8,F);break;case 23:break;case 22:var Ye=F.stateNode;F.memoizedState!==null?Ye._visibility&2?Oc(S,F,W,re,w):Fd(S,F):(Ye._visibility|=2,Oc(S,F,W,re,w)),w&&Se&2048&&yv(F.alternate,F);break;case 24:Oc(S,F,W,re,w),w&&Se&2048&&xv(F.alternate,F);break;default:Oc(S,F,W,re,w)}d=d.sibling}}function Fd(l,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var p=l,y=d,w=y.flags;switch(y.tag){case 22:Fd(p,y),w&2048&&yv(y.alternate,y);break;case 24:Fd(p,y),w&2048&&xv(y.alternate,y);break;default:Fd(p,y)}d=d.sibling}}var Bd=8192;function Pc(l){if(l.subtreeFlags&Bd)for(l=l.child;l!==null;)DN(l),l=l.sibling}function DN(l){switch(l.tag){case 26:Pc(l),l.flags&Bd&&l.memoizedState!==null&&h6(Zr,l.memoizedState,l.memoizedProps);break;case 5:Pc(l);break;case 3:case 4:var d=Zr;Zr=pp(l.stateNode.containerInfo),Pc(l),Zr=d;break;case 22:l.memoizedState===null&&(d=l.alternate,d!==null&&d.memoizedState!==null?(d=Bd,Bd=16777216,Pc(l),Bd=d):Pc(l));break;default:Pc(l)}}function EN(l){var d=l.alternate;if(d!==null&&(l=d.child,l!==null)){d.child=null;do d=l.sibling,l.sibling=null,l=d;while(l!==null)}}function Id(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var p=0;p<d.length;p++){var y=d[p];cs=y,MN(y,l)}EN(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)TN(l),l=l.sibling}function TN(l){switch(l.tag){case 0:case 11:case 15:Id(l),l.flags&2048&&Zi(9,l,l.return);break;case 3:Id(l);break;case 12:Id(l);break;case 22:var d=l.stateNode;l.memoizedState!==null&&d._visibility&2&&(l.return===null||l.return.tag!==13)?(d._visibility&=-3,sp(l)):Id(l);break;default:Id(l)}}function sp(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var p=0;p<d.length;p++){var y=d[p];cs=y,MN(y,l)}EN(l)}for(l=l.child;l!==null;){switch(d=l,d.tag){case 0:case 11:case 15:Zi(8,d,d.return),sp(d);break;case 22:p=d.stateNode,p._visibility&2&&(p._visibility&=-3,sp(d));break;default:sp(d)}l=l.sibling}}function MN(l,d){for(;cs!==null;){var p=cs;switch(p.tag){case 0:case 11:case 15:Zi(8,p,d);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var y=p.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:_d(p.memoizedState.cache)}if(y=p.child,y!==null)y.return=p,cs=y;else e:for(p=l;cs!==null;){y=cs;var w=y.sibling,S=y.return;if(wN(y),y===p){cs=null;break e}if(w!==null){w.return=S,cs=w;break e}cs=S}}}var DV={getCacheForType:function(l){var d=js(ns),p=d.data.get(l);return p===void 0&&(p=l(),d.data.set(l,p)),p}},EV=typeof WeakMap=="function"?WeakMap:Map,cn=0,_n=null,Ht=null,Gt=0,un=0,dr=null,to=!1,Lc=!1,bv=!1,ci=0,On=0,no=0,dl=0,vv=0,Dr=0,Fc=0,Vd=null,Ys=null,_v=!1,Av=0,rp=1/0,ap=null,so=null,gs=0,ro=null,Bc=null,Ic=0,wv=0,jv=null,RN=null,zd=0,Sv=null;function fr(){if((cn&2)!==0&&Gt!==0)return Gt&-Gt;if(R.T!==null){var l=Cc;return l!==0?l:Mv()}return bt()}function ON(){Dr===0&&(Dr=(Gt&536870912)===0||Zt?ye():536870912);var l=kr.current;return l!==null&&(l.flags|=32),Dr}function hr(l,d,p){(l===_n&&(un===2||un===9)||l.cancelPendingCommit!==null)&&(Vc(l,0),ao(l,Gt,Dr,!1)),he(l,p),((cn&2)===0||l!==_n)&&(l===_n&&((cn&2)===0&&(dl|=p),On===4&&ao(l,Gt,Dr,!1)),xa(l))}function PN(l,d,p){if((cn&6)!==0)throw Error(s(327));var y=!p&&(d&124)===0&&(d&l.expiredLanes)===0||ve(l,d),w=y?RV(l,d):kv(l,d,!0),S=y;do{if(w===0){Lc&&!y&&ao(l,d,0,!1);break}else{if(p=l.current.alternate,S&&!TV(p)){w=kv(l,d,!1),S=!1;continue}if(w===2){if(S=d,l.errorRecoveryDisabledLanes&S)var F=0;else F=l.pendingLanes&-536870913,F=F!==0?F:F&536870912?536870912:0;if(F!==0){d=F;e:{var W=l;w=Vd;var re=W.current.memoizedState.isDehydrated;if(re&&(Vc(W,F).flags|=256),F=kv(W,F,!1),F!==2){if(bv&&!re){W.errorRecoveryDisabledLanes|=S,dl|=S,w=4;break e}S=Ys,Ys=w,S!==null&&(Ys===null?Ys=S:Ys.push.apply(Ys,S))}w=F}if(S=!1,w!==2)continue}}if(w===1){Vc(l,0),ao(l,d,0,!0);break}e:{switch(y=l,S=w,S){case 0:case 1:throw Error(s(345));case 4:if((d&4194048)!==d)break;case 6:ao(y,d,Dr,!to);break e;case 2:Ys=null;break;case 3:case 5:break;default:throw Error(s(329))}if((d&62914560)===d&&(w=Av+300-gt(),10<w)){if(ao(y,d,Dr,!to),ze(y,0,!0)!==0)break e;y.timeoutHandle=uk(LN.bind(null,y,p,Ys,ap,_v,d,Dr,dl,Fc,to,S,2,-0,0),w);break e}LN(y,p,Ys,ap,_v,d,Dr,dl,Fc,to,S,0,-0,0)}}break}while(!0);xa(l)}function LN(l,d,p,y,w,S,F,W,re,Se,Ye,Xe,ke,Me){if(l.timeoutHandle=-1,Xe=d.subtreeFlags,(Xe&8192||(Xe&16785408)===16785408)&&(Gd={stylesheets:null,count:0,unsuspend:f6},DN(d),Xe=m6(),Xe!==null)){l.cancelPendingCommit=Xe(HN.bind(null,l,d,S,p,y,w,F,W,re,Ye,1,ke,Me)),ao(l,S,F,!Se);return}HN(l,d,S,p,y,w,F,W,re)}function TV(l){for(var d=l;;){var p=d.tag;if((p===0||p===11||p===15)&&d.flags&16384&&(p=d.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var y=0;y<p.length;y++){var w=p[y],S=w.getSnapshot;w=w.value;try{if(!or(S(),w))return!1}catch{return!1}}if(p=d.child,d.subtreeFlags&16384&&p!==null)p.return=d,d=p;else{if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function ao(l,d,p,y){d&=~vv,d&=~dl,l.suspendedLanes|=d,l.pingedLanes&=~d,y&&(l.warmLanes|=d),y=l.expirationTimes;for(var w=d;0<w;){var S=31-J(w),F=1<<S;y[S]=-1,w&=~F}p!==0&&K(l,p,d)}function ip(){return(cn&6)===0?($d(0),!1):!0}function Cv(){if(Ht!==null){if(un===0)var l=Ht.return;else l=Ht,ti=al=null,Hb(l),Mc=null,Md=0,l=Ht;for(;l!==null;)pN(l.alternate,l),l=l.return;Ht=null}}function Vc(l,d){var p=l.timeoutHandle;p!==-1&&(l.timeoutHandle=-1,KV(p)),p=l.cancelPendingCommit,p!==null&&(l.cancelPendingCommit=null,p()),Cv(),_n=l,Ht=p=Za(l.current,null),Gt=d,un=0,dr=null,to=!1,Lc=ve(l,d),bv=!1,Fc=Dr=vv=dl=no=On=0,Ys=Vd=null,_v=!1,(d&8)!==0&&(d|=d&32);var y=l.entangledLanes;if(y!==0)for(l=l.entanglements,y&=d;0<y;){var w=31-J(y),S=1<<w;d|=l[w],y&=~S}return ci=d,km(),p}function FN(l,d){Bt=null,R.H=qm,d===wd||d===Fm?(d=eC(),un=3):d===X1?(d=eC(),un=4):un=d===tN?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,dr=d,Ht===null&&(On=1,Zm(l,jr(d,l.current)))}function BN(){var l=R.H;return R.H=qm,l===null?qm:l}function IN(){var l=R.A;return R.A=DV,l}function Nv(){On=4,to||(Gt&4194048)!==Gt&&kr.current!==null||(Lc=!0),(no&134217727)===0&&(dl&134217727)===0||_n===null||ao(_n,Gt,Dr,!1)}function kv(l,d,p){var y=cn;cn|=2;var w=BN(),S=IN();(_n!==l||Gt!==d)&&(ap=null,Vc(l,d)),d=!1;var F=On;e:do try{if(un!==0&&Ht!==null){var W=Ht,re=dr;switch(un){case 8:Cv(),F=6;break e;case 3:case 2:case 9:case 6:kr.current===null&&(d=!0);var Se=un;if(un=0,dr=null,zc(l,W,re,Se),p&&Lc){F=0;break e}break;default:Se=un,un=0,dr=null,zc(l,W,re,Se)}}MV(),F=On;break}catch(Ye){FN(l,Ye)}while(!0);return d&&l.shellSuspendCounter++,ti=al=null,cn=y,R.H=w,R.A=S,Ht===null&&(_n=null,Gt=0,km()),F}function MV(){for(;Ht!==null;)VN(Ht)}function RV(l,d){var p=cn;cn|=2;var y=BN(),w=IN();_n!==l||Gt!==d?(ap=null,rp=gt()+500,Vc(l,d)):Lc=ve(l,d);e:do try{if(un!==0&&Ht!==null){d=Ht;var S=dr;t:switch(un){case 1:un=0,dr=null,zc(l,d,S,1);break;case 2:case 9:if(Z1(S)){un=0,dr=null,zN(d);break}d=function(){un!==2&&un!==9||_n!==l||(un=7),xa(l)},S.then(d,d);break e;case 3:un=7;break e;case 4:un=5;break e;case 7:Z1(S)?(un=0,dr=null,zN(d)):(un=0,dr=null,zc(l,d,S,7));break;case 5:var F=null;switch(Ht.tag){case 26:F=Ht.memoizedState;case 5:case 27:var W=Ht;if(!F||Ak(F)){un=0,dr=null;var re=W.sibling;if(re!==null)Ht=re;else{var Se=W.return;Se!==null?(Ht=Se,op(Se)):Ht=null}break t}}un=0,dr=null,zc(l,d,S,5);break;case 6:un=0,dr=null,zc(l,d,S,6);break;case 8:Cv(),On=6;break e;default:throw Error(s(462))}}OV();break}catch(Ye){FN(l,Ye)}while(!0);return ti=al=null,R.H=y,R.A=w,cn=p,Ht!==null?0:(_n=null,Gt=0,km(),On)}function OV(){for(;Ht!==null&&!Ze();)VN(Ht)}function VN(l){var d=hN(l.alternate,l,ci);l.memoizedProps=l.pendingProps,d===null?op(l):Ht=d}function zN(l){var d=l,p=d.alternate;switch(d.tag){case 15:case 0:d=oN(p,d,d.pendingProps,d.type,void 0,Gt);break;case 11:d=oN(p,d,d.pendingProps,d.type.render,d.ref,Gt);break;case 5:Hb(d);default:pN(p,d),d=Ht=$1(d,ci),d=hN(p,d,ci)}l.memoizedProps=l.pendingProps,d===null?op(l):Ht=d}function zc(l,d,p,y){ti=al=null,Hb(d),Mc=null,Md=0;var w=d.return;try{if(wV(l,w,d,p,Gt)){On=1,Zm(l,jr(p,l.current)),Ht=null;return}}catch(S){if(w!==null)throw Ht=w,S;On=1,Zm(l,jr(p,l.current)),Ht=null;return}d.flags&32768?(Zt||y===1?l=!0:Lc||(Gt&536870912)!==0?l=!1:(to=l=!0,(y===2||y===9||y===3||y===6)&&(y=kr.current,y!==null&&y.tag===13&&(y.flags|=16384))),$N(d,l)):op(d)}function op(l){var d=l;do{if((d.flags&32768)!==0){$N(d,to);return}l=d.return;var p=SV(d.alternate,d,ci);if(p!==null){Ht=p;return}if(d=d.sibling,d!==null){Ht=d;return}Ht=d=l}while(d!==null);On===0&&(On=5)}function $N(l,d){do{var p=CV(l.alternate,l);if(p!==null){p.flags&=32767,Ht=p;return}if(p=l.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!d&&(l=l.sibling,l!==null)){Ht=l;return}Ht=l=p}while(l!==null);On=6,Ht=null}function HN(l,d,p,y,w,S,F,W,re){l.cancelPendingCommit=null;do lp();while(gs!==0);if((cn&6)!==0)throw Error(s(327));if(d!==null){if(d===l.current)throw Error(s(177));if(S=d.lanes|d.childLanes,S|=xb,qe(l,p,S,F,W,re),l===_n&&(Ht=_n=null,Gt=0),Bc=d,ro=l,Ic=p,wv=S,jv=w,RN=y,(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,BV(oe,function(){return GN(),null})):(l.callbackNode=null,l.callbackPriority=0),y=(d.flags&13878)!==0,(d.subtreeFlags&13878)!==0||y){y=R.T,R.T=null,w=P.p,P.p=2,F=cn,cn|=4;try{NV(l,d,p)}finally{cn=F,P.p=w,R.T=y}}gs=1,UN(),WN(),YN()}}function UN(){if(gs===1){gs=0;var l=ro,d=Bc,p=(d.flags&13878)!==0;if((d.subtreeFlags&13878)!==0||p){p=R.T,R.T=null;var y=P.p;P.p=2;var w=cn;cn|=4;try{CN(d,l);var S=Vv,F=M1(l.containerInfo),W=S.focusedElem,re=S.selectionRange;if(F!==W&&W&&W.ownerDocument&&T1(W.ownerDocument.documentElement,W)){if(re!==null&&hb(W)){var Se=re.start,Ye=re.end;if(Ye===void 0&&(Ye=Se),"selectionStart"in W)W.selectionStart=Se,W.selectionEnd=Math.min(Ye,W.value.length);else{var Xe=W.ownerDocument||document,ke=Xe&&Xe.defaultView||window;if(ke.getSelection){var Me=ke.getSelection(),St=W.textContent.length,vt=Math.min(re.start,St),yn=re.end===void 0?vt:Math.min(re.end,St);!Me.extend&&vt>yn&&(F=yn,yn=vt,vt=F);var _e=E1(W,vt),ue=E1(W,yn);if(_e&&ue&&(Me.rangeCount!==1||Me.anchorNode!==_e.node||Me.anchorOffset!==_e.offset||Me.focusNode!==ue.node||Me.focusOffset!==ue.offset)){var je=Xe.createRange();je.setStart(_e.node,_e.offset),Me.removeAllRanges(),vt>yn?(Me.addRange(je),Me.extend(ue.node,ue.offset)):(je.setEnd(ue.node,ue.offset),Me.addRange(je))}}}}for(Xe=[],Me=W;Me=Me.parentNode;)Me.nodeType===1&&Xe.push({element:Me,left:Me.scrollLeft,top:Me.scrollTop});for(typeof W.focus=="function"&&W.focus(),W=0;W<Xe.length;W++){var Ge=Xe[W];Ge.element.scrollLeft=Ge.left,Ge.element.scrollTop=Ge.top}}vp=!!Iv,Vv=Iv=null}finally{cn=w,P.p=y,R.T=p}}l.current=d,gs=2}}function WN(){if(gs===2){gs=0;var l=ro,d=Bc,p=(d.flags&8772)!==0;if((d.subtreeFlags&8772)!==0||p){p=R.T,R.T=null;var y=P.p;P.p=2;var w=cn;cn|=4;try{AN(l,d.alternate,d)}finally{cn=w,P.p=y,R.T=p}}gs=3}}function YN(){if(gs===4||gs===3){gs=0,mt();var l=ro,d=Bc,p=Ic,y=RN;(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?gs=5:(gs=0,Bc=ro=null,qN(l,l.pendingLanes));var w=l.pendingLanes;if(w===0&&(so=null),rt(p),d=d.stateNode,De&&typeof De.onCommitFiberRoot=="function")try{De.onCommitFiberRoot(ee,d,void 0,(d.current.flags&128)===128)}catch{}if(y!==null){d=R.T,w=P.p,P.p=2,R.T=null;try{for(var S=l.onRecoverableError,F=0;F<y.length;F++){var W=y[F];S(W.value,{componentStack:W.stack})}}finally{R.T=d,P.p=w}}(Ic&3)!==0&&lp(),xa(l),w=l.pendingLanes,(p&4194090)!==0&&(w&42)!==0?l===Sv?zd++:(zd=0,Sv=l):zd=0,$d(0)}}function qN(l,d){(l.pooledCacheLanes&=d)===0&&(d=l.pooledCache,d!=null&&(l.pooledCache=null,_d(d)))}function lp(l){return UN(),WN(),YN(),GN()}function GN(){if(gs!==5)return!1;var l=ro,d=wv;wv=0;var p=rt(Ic),y=R.T,w=P.p;try{P.p=32>p?32:p,R.T=null,p=jv,jv=null;var S=ro,F=Ic;if(gs=0,Bc=ro=null,Ic=0,(cn&6)!==0)throw Error(s(331));var W=cn;if(cn|=4,TN(S.current),kN(S,S.current,F,p),cn=W,$d(0,!1),De&&typeof De.onPostCommitFiberRoot=="function")try{De.onPostCommitFiberRoot(ee,S)}catch{}return!0}finally{P.p=w,R.T=y,qN(l,d)}}function KN(l,d,p){d=jr(p,d),d=sv(l.stateNode,d,2),l=Gi(l,d,2),l!==null&&(he(l,2),xa(l))}function xn(l,d,p){if(l.tag===3)KN(l,l,p);else for(;d!==null;){if(d.tag===3){KN(d,l,p);break}else if(d.tag===1){var y=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(so===null||!so.has(y))){l=jr(p,l),p=JC(2),y=Gi(d,p,2),y!==null&&(eN(p,y,d,l),he(y,2),xa(y));break}}d=d.return}}function Dv(l,d,p){var y=l.pingCache;if(y===null){y=l.pingCache=new EV;var w=new Set;y.set(d,w)}else w=y.get(d),w===void 0&&(w=new Set,y.set(d,w));w.has(p)||(bv=!0,w.add(p),l=PV.bind(null,l,d,p),d.then(l,l))}function PV(l,d,p){var y=l.pingCache;y!==null&&y.delete(d),l.pingedLanes|=l.suspendedLanes&p,l.warmLanes&=~p,_n===l&&(Gt&p)===p&&(On===4||On===3&&(Gt&62914560)===Gt&&300>gt()-Av?(cn&2)===0&&Vc(l,0):vv|=p,Fc===Gt&&(Fc=0)),xa(l)}function QN(l,d){d===0&&(d=Ee()),l=Ac(l,d),l!==null&&(he(l,d),xa(l))}function LV(l){var d=l.memoizedState,p=0;d!==null&&(p=d.retryLane),QN(l,p)}function FV(l,d){var p=0;switch(l.tag){case 13:var y=l.stateNode,w=l.memoizedState;w!==null&&(p=w.retryLane);break;case 19:y=l.stateNode;break;case 22:y=l.stateNode._retryCache;break;default:throw Error(s(314))}y!==null&&y.delete(d),QN(l,p)}function BV(l,d){return Ie(l,d)}var cp=null,$c=null,Ev=!1,up=!1,Tv=!1,fl=0;function xa(l){l!==$c&&l.next===null&&($c===null?cp=$c=l:$c=$c.next=l),up=!0,Ev||(Ev=!0,VV())}function $d(l,d){if(!Tv&&up){Tv=!0;do for(var p=!1,y=cp;y!==null;){if(l!==0){var w=y.pendingLanes;if(w===0)var S=0;else{var F=y.suspendedLanes,W=y.pingedLanes;S=(1<<31-J(42|l)+1)-1,S&=w&~(F&~W),S=S&201326741?S&201326741|1:S?S|2:0}S!==0&&(p=!0,ek(y,S))}else S=Gt,S=ze(y,y===_n?S:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(S&3)===0||ve(y,S)||(p=!0,ek(y,S));y=y.next}while(p);Tv=!1}}function IV(){XN()}function XN(){up=Ev=!1;var l=0;fl!==0&&(GV()&&(l=fl),fl=0);for(var d=gt(),p=null,y=cp;y!==null;){var w=y.next,S=ZN(y,d);S===0?(y.next=null,p===null?cp=w:p.next=w,w===null&&($c=p)):(p=y,(l!==0||(S&3)!==0)&&(up=!0)),y=w}$d(l)}function ZN(l,d){for(var p=l.suspendedLanes,y=l.pingedLanes,w=l.expirationTimes,S=l.pendingLanes&-62914561;0<S;){var F=31-J(S),W=1<<F,re=w[F];re===-1?((W&p)===0||(W&y)!==0)&&(w[F]=Le(W,d)):re<=d&&(l.expiredLanes|=W),S&=~W}if(d=_n,p=Gt,p=ze(l,l===d?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),y=l.callbackNode,p===0||l===d&&(un===2||un===9)||l.cancelPendingCommit!==null)return y!==null&&y!==null&&Ue(y),l.callbackNode=null,l.callbackPriority=0;if((p&3)===0||ve(l,p)){if(d=p&-p,d===l.callbackPriority)return d;switch(y!==null&&Ue(y),rt(p)){case 2:case 8:p=q;break;case 32:p=oe;break;case 268435456:p=He;break;default:p=oe}return y=JN.bind(null,l),p=Ie(p,y),l.callbackPriority=d,l.callbackNode=p,d}return y!==null&&y!==null&&Ue(y),l.callbackPriority=2,l.callbackNode=null,2}function JN(l,d){if(gs!==0&&gs!==5)return l.callbackNode=null,l.callbackPriority=0,null;var p=l.callbackNode;if(lp()&&l.callbackNode!==p)return null;var y=Gt;return y=ze(l,l===_n?y:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),y===0?null:(PN(l,y,d),ZN(l,gt()),l.callbackNode!=null&&l.callbackNode===p?JN.bind(null,l):null)}function ek(l,d){if(lp())return null;PN(l,d,!0)}function VV(){QV(function(){(cn&6)!==0?Ie(Pe,IV):XN()})}function Mv(){return fl===0&&(fl=ye()),fl}function tk(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:_m(""+l)}function nk(l,d){var p=d.ownerDocument.createElement("input");return p.name=d.name,p.value=d.value,l.id&&p.setAttribute("form",l.id),d.parentNode.insertBefore(p,d),l=new FormData(l),p.parentNode.removeChild(p),l}function zV(l,d,p,y,w){if(d==="submit"&&p&&p.stateNode===w){var S=tk((w[Bn]||null).action),F=y.submitter;F&&(d=(d=F[Bn]||null)?tk(d.formAction):F.getAttribute("formAction"),d!==null&&(S=d,F=null));var W=new Sm("action","action",null,y,w);l.push({event:W,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(fl!==0){var re=F?nk(w,F):new FormData(w);Zb(p,{pending:!0,data:re,method:w.method,action:S},null,re)}}else typeof S=="function"&&(W.preventDefault(),re=F?nk(w,F):new FormData(w),Zb(p,{pending:!0,data:re,method:w.method,action:S},S,re))},currentTarget:w}]})}}for(var Rv=0;Rv<yb.length;Rv++){var Ov=yb[Rv],$V=Ov.toLowerCase(),HV=Ov[0].toUpperCase()+Ov.slice(1);Xr($V,"on"+HV)}Xr(P1,"onAnimationEnd"),Xr(L1,"onAnimationIteration"),Xr(F1,"onAnimationStart"),Xr("dblclick","onDoubleClick"),Xr("focusin","onFocus"),Xr("focusout","onBlur"),Xr(iV,"onTransitionRun"),Xr(oV,"onTransitionStart"),Xr(lV,"onTransitionCancel"),Xr(B1,"onTransitionEnd"),fc("onMouseEnter",["mouseout","mouseover"]),fc("onMouseLeave",["mouseout","mouseover"]),fc("onPointerEnter",["pointerout","pointerover"]),fc("onPointerLeave",["pointerout","pointerover"]),Qo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Qo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Qo("onBeforeInput",["compositionend","keypress","textInput","paste"]),Qo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Qo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Qo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),UV=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Hd));function sk(l,d){d=(d&4)!==0;for(var p=0;p<l.length;p++){var y=l[p],w=y.event;y=y.listeners;e:{var S=void 0;if(d)for(var F=y.length-1;0<=F;F--){var W=y[F],re=W.instance,Se=W.currentTarget;if(W=W.listener,re!==S&&w.isPropagationStopped())break e;S=W,w.currentTarget=Se;try{S(w)}catch(Ye){Xm(Ye)}w.currentTarget=null,S=re}else for(F=0;F<y.length;F++){if(W=y[F],re=W.instance,Se=W.currentTarget,W=W.listener,re!==S&&w.isPropagationStopped())break e;S=W,w.currentTarget=Se;try{S(w)}catch(Ye){Xm(Ye)}w.currentTarget=null,S=re}}}}function Ut(l,d){var p=d[Qr];p===void 0&&(p=d[Qr]=new Set);var y=l+"__bubble";p.has(y)||(rk(d,l,2,!1),p.add(y))}function Pv(l,d,p){var y=0;d&&(y|=4),rk(p,l,y,d)}var dp="_reactListening"+Math.random().toString(36).slice(2);function Lv(l){if(!l[dp]){l[dp]=!0,XS.forEach(function(p){p!=="selectionchange"&&(UV.has(p)||Pv(p,!1,l),Pv(p,!0,l))});var d=l.nodeType===9?l:l.ownerDocument;d===null||d[dp]||(d[dp]=!0,Pv("selectionchange",!1,d))}}function rk(l,d,p,y){switch(kk(d)){case 2:var w=y6;break;case 8:w=x6;break;default:w=Qv}p=w.bind(null,d,p,l),w=void 0,!rb||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(w=!0),y?w!==void 0?l.addEventListener(d,p,{capture:!0,passive:w}):l.addEventListener(d,p,!0):w!==void 0?l.addEventListener(d,p,{passive:w}):l.addEventListener(d,p,!1)}function Fv(l,d,p,y,w){var S=y;if((d&1)===0&&(d&2)===0&&y!==null)e:for(;;){if(y===null)return;var F=y.tag;if(F===3||F===4){var W=y.stateNode.containerInfo;if(W===w)break;if(F===4)for(F=y.return;F!==null;){var re=F.tag;if((re===3||re===4)&&F.stateNode.containerInfo===w)return;F=F.return}for(;W!==null;){if(F=cc(W),F===null)return;if(re=F.tag,re===5||re===6||re===26||re===27){y=S=F;continue e}W=W.parentNode}}y=y.return}d1(function(){var Se=S,Ye=nb(p),Xe=[];e:{var ke=I1.get(l);if(ke!==void 0){var Me=Sm,St=l;switch(l){case"keypress":if(wm(p)===0)break e;case"keydown":case"keyup":Me=BI;break;case"focusin":St="focus",Me=lb;break;case"focusout":St="blur",Me=lb;break;case"beforeblur":case"afterblur":Me=lb;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Me=m1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Me=CI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Me=zI;break;case P1:case L1:case F1:Me=DI;break;case B1:Me=HI;break;case"scroll":case"scrollend":Me=jI;break;case"wheel":Me=WI;break;case"copy":case"cut":case"paste":Me=TI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Me=g1;break;case"toggle":case"beforetoggle":Me=qI}var vt=(d&4)!==0,yn=!vt&&(l==="scroll"||l==="scrollend"),_e=vt?ke!==null?ke+"Capture":null:ke;vt=[];for(var ue=Se,je;ue!==null;){var Ge=ue;if(je=Ge.stateNode,Ge=Ge.tag,Ge!==5&&Ge!==26&&Ge!==27||je===null||_e===null||(Ge=ld(ue,_e),Ge!=null&&vt.push(Ud(ue,Ge,je))),yn)break;ue=ue.return}0<vt.length&&(ke=new Me(ke,St,null,p,Ye),Xe.push({event:ke,listeners:vt}))}}if((d&7)===0){e:{if(ke=l==="mouseover"||l==="pointerover",Me=l==="mouseout"||l==="pointerout",ke&&p!==tb&&(St=p.relatedTarget||p.fromElement)&&(cc(St)||St[$s]))break e;if((Me||ke)&&(ke=Ye.window===Ye?Ye:(ke=Ye.ownerDocument)?ke.defaultView||ke.parentWindow:window,Me?(St=p.relatedTarget||p.toElement,Me=Se,St=St?cc(St):null,St!==null&&(yn=i(St),vt=St.tag,St!==yn||vt!==5&&vt!==27&&vt!==6)&&(St=null)):(Me=null,St=Se),Me!==St)){if(vt=m1,Ge="onMouseLeave",_e="onMouseEnter",ue="mouse",(l==="pointerout"||l==="pointerover")&&(vt=g1,Ge="onPointerLeave",_e="onPointerEnter",ue="pointer"),yn=Me==null?ke:od(Me),je=St==null?ke:od(St),ke=new vt(Ge,ue+"leave",Me,p,Ye),ke.target=yn,ke.relatedTarget=je,Ge=null,cc(Ye)===Se&&(vt=new vt(_e,ue+"enter",St,p,Ye),vt.target=je,vt.relatedTarget=yn,Ge=vt),yn=Ge,Me&&St)t:{for(vt=Me,_e=St,ue=0,je=vt;je;je=Hc(je))ue++;for(je=0,Ge=_e;Ge;Ge=Hc(Ge))je++;for(;0<ue-je;)vt=Hc(vt),ue--;for(;0<je-ue;)_e=Hc(_e),je--;for(;ue--;){if(vt===_e||_e!==null&&vt===_e.alternate)break t;vt=Hc(vt),_e=Hc(_e)}vt=null}else vt=null;Me!==null&&ak(Xe,ke,Me,vt,!1),St!==null&&yn!==null&&ak(Xe,yn,St,vt,!0)}}e:{if(ke=Se?od(Se):window,Me=ke.nodeName&&ke.nodeName.toLowerCase(),Me==="select"||Me==="input"&&ke.type==="file")var ct=j1;else if(A1(ke))if(S1)ct=sV;else{ct=tV;var Vt=eV}else Me=ke.nodeName,!Me||Me.toLowerCase()!=="input"||ke.type!=="checkbox"&&ke.type!=="radio"?Se&&eb(Se.elementType)&&(ct=j1):ct=nV;if(ct&&(ct=ct(l,Se))){w1(Xe,ct,p,Ye);break e}Vt&&Vt(l,ke,Se),l==="focusout"&&Se&&ke.type==="number"&&Se.memoizedProps.value!=null&&Jx(ke,"number",ke.value)}switch(Vt=Se?od(Se):window,l){case"focusin":(A1(Vt)||Vt.contentEditable==="true")&&(bc=Vt,mb=Se,gd=null);break;case"focusout":gd=mb=bc=null;break;case"mousedown":pb=!0;break;case"contextmenu":case"mouseup":case"dragend":pb=!1,R1(Xe,p,Ye);break;case"selectionchange":if(aV)break;case"keydown":case"keyup":R1(Xe,p,Ye)}var pt;if(ub)e:{switch(l){case"compositionstart":var At="onCompositionStart";break e;case"compositionend":At="onCompositionEnd";break e;case"compositionupdate":At="onCompositionUpdate";break e}At=void 0}else xc?v1(l,p)&&(At="onCompositionEnd"):l==="keydown"&&p.keyCode===229&&(At="onCompositionStart");At&&(y1&&p.locale!=="ko"&&(xc||At!=="onCompositionStart"?At==="onCompositionEnd"&&xc&&(pt=f1()):(Ui=Ye,ab="value"in Ui?Ui.value:Ui.textContent,xc=!0)),Vt=fp(Se,At),0<Vt.length&&(At=new p1(At,l,null,p,Ye),Xe.push({event:At,listeners:Vt}),pt?At.data=pt:(pt=_1(p),pt!==null&&(At.data=pt)))),(pt=KI?QI(l,p):XI(l,p))&&(At=fp(Se,"onBeforeInput"),0<At.length&&(Vt=new p1("onBeforeInput","beforeinput",null,p,Ye),Xe.push({event:Vt,listeners:At}),Vt.data=pt)),zV(Xe,l,Se,p,Ye)}sk(Xe,d)})}function Ud(l,d,p){return{instance:l,listener:d,currentTarget:p}}function fp(l,d){for(var p=d+"Capture",y=[];l!==null;){var w=l,S=w.stateNode;if(w=w.tag,w!==5&&w!==26&&w!==27||S===null||(w=ld(l,p),w!=null&&y.unshift(Ud(l,w,S)),w=ld(l,d),w!=null&&y.push(Ud(l,w,S))),l.tag===3)return y;l=l.return}return[]}function Hc(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function ak(l,d,p,y,w){for(var S=d._reactName,F=[];p!==null&&p!==y;){var W=p,re=W.alternate,Se=W.stateNode;if(W=W.tag,re!==null&&re===y)break;W!==5&&W!==26&&W!==27||Se===null||(re=Se,w?(Se=ld(p,S),Se!=null&&F.unshift(Ud(p,Se,re))):w||(Se=ld(p,S),Se!=null&&F.push(Ud(p,Se,re)))),p=p.return}F.length!==0&&l.push({event:d,listeners:F})}var WV=/\r\n?/g,YV=/\u0000|\uFFFD/g;function ik(l){return(typeof l=="string"?l:""+l).replace(WV,`
`).replace(YV,"")}function ok(l,d){return d=ik(d),ik(l)===d}function hp(){}function gn(l,d,p,y,w,S){switch(p){case"children":typeof y=="string"?d==="body"||d==="textarea"&&y===""||pc(l,y):(typeof y=="number"||typeof y=="bigint")&&d!=="body"&&pc(l,""+y);break;case"className":xm(l,"class",y);break;case"tabIndex":xm(l,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":xm(l,p,y);break;case"style":c1(l,y,S);break;case"data":if(d!=="object"){xm(l,"data",y);break}case"src":case"href":if(y===""&&(d!=="a"||p!=="href")){l.removeAttribute(p);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){l.removeAttribute(p);break}y=_m(""+y),l.setAttribute(p,y);break;case"action":case"formAction":if(typeof y=="function"){l.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof S=="function"&&(p==="formAction"?(d!=="input"&&gn(l,d,"name",w.name,w,null),gn(l,d,"formEncType",w.formEncType,w,null),gn(l,d,"formMethod",w.formMethod,w,null),gn(l,d,"formTarget",w.formTarget,w,null)):(gn(l,d,"encType",w.encType,w,null),gn(l,d,"method",w.method,w,null),gn(l,d,"target",w.target,w,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){l.removeAttribute(p);break}y=_m(""+y),l.setAttribute(p,y);break;case"onClick":y!=null&&(l.onclick=hp);break;case"onScroll":y!=null&&Ut("scroll",l);break;case"onScrollEnd":y!=null&&Ut("scrollend",l);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(s(61));if(p=y.__html,p!=null){if(w.children!=null)throw Error(s(60));l.innerHTML=p}}break;case"multiple":l.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":l.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){l.removeAttribute("xlink:href");break}p=_m(""+y),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?l.setAttribute(p,""+y):l.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?l.setAttribute(p,""):l.removeAttribute(p);break;case"capture":case"download":y===!0?l.setAttribute(p,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?l.setAttribute(p,y):l.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?l.setAttribute(p,y):l.removeAttribute(p);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?l.removeAttribute(p):l.setAttribute(p,y);break;case"popover":Ut("beforetoggle",l),Ut("toggle",l),ym(l,"popover",y);break;case"xlinkActuate":Qa(l,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":Qa(l,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":Qa(l,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":Qa(l,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":Qa(l,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":Qa(l,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":Qa(l,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":Qa(l,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":Qa(l,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":ym(l,"is",y);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=AI.get(p)||p,ym(l,p,y))}}function Bv(l,d,p,y,w,S){switch(p){case"style":c1(l,y,S);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(s(61));if(p=y.__html,p!=null){if(w.children!=null)throw Error(s(60));l.innerHTML=p}}break;case"children":typeof y=="string"?pc(l,y):(typeof y=="number"||typeof y=="bigint")&&pc(l,""+y);break;case"onScroll":y!=null&&Ut("scroll",l);break;case"onScrollEnd":y!=null&&Ut("scrollend",l);break;case"onClick":y!=null&&(l.onclick=hp);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ZS.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(w=p.endsWith("Capture"),d=p.slice(2,w?p.length-7:void 0),S=l[Bn]||null,S=S!=null?S[p]:null,typeof S=="function"&&l.removeEventListener(d,S,w),typeof y=="function")){typeof S!="function"&&S!==null&&(p in l?l[p]=null:l.hasAttribute(p)&&l.removeAttribute(p)),l.addEventListener(d,y,w);break e}p in l?l[p]=y:y===!0?l.setAttribute(p,""):ym(l,p,y)}}}function ys(l,d,p){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ut("error",l),Ut("load",l);var y=!1,w=!1,S;for(S in p)if(p.hasOwnProperty(S)){var F=p[S];if(F!=null)switch(S){case"src":y=!0;break;case"srcSet":w=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,d));default:gn(l,d,S,F,p,null)}}w&&gn(l,d,"srcSet",p.srcSet,p,null),y&&gn(l,d,"src",p.src,p,null);return;case"input":Ut("invalid",l);var W=S=F=w=null,re=null,Se=null;for(y in p)if(p.hasOwnProperty(y)){var Ye=p[y];if(Ye!=null)switch(y){case"name":w=Ye;break;case"type":F=Ye;break;case"checked":re=Ye;break;case"defaultChecked":Se=Ye;break;case"value":S=Ye;break;case"defaultValue":W=Ye;break;case"children":case"dangerouslySetInnerHTML":if(Ye!=null)throw Error(s(137,d));break;default:gn(l,d,y,Ye,p,null)}}a1(l,S,W,re,Se,F,w,!1),bm(l);return;case"select":Ut("invalid",l),y=F=S=null;for(w in p)if(p.hasOwnProperty(w)&&(W=p[w],W!=null))switch(w){case"value":S=W;break;case"defaultValue":F=W;break;case"multiple":y=W;default:gn(l,d,w,W,p,null)}d=S,p=F,l.multiple=!!y,d!=null?mc(l,!!y,d,!1):p!=null&&mc(l,!!y,p,!0);return;case"textarea":Ut("invalid",l),S=w=y=null;for(F in p)if(p.hasOwnProperty(F)&&(W=p[F],W!=null))switch(F){case"value":y=W;break;case"defaultValue":w=W;break;case"children":S=W;break;case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(91));break;default:gn(l,d,F,W,p,null)}o1(l,y,w,S),bm(l);return;case"option":for(re in p)if(p.hasOwnProperty(re)&&(y=p[re],y!=null))switch(re){case"selected":l.selected=y&&typeof y!="function"&&typeof y!="symbol";break;default:gn(l,d,re,y,p,null)}return;case"dialog":Ut("beforetoggle",l),Ut("toggle",l),Ut("cancel",l),Ut("close",l);break;case"iframe":case"object":Ut("load",l);break;case"video":case"audio":for(y=0;y<Hd.length;y++)Ut(Hd[y],l);break;case"image":Ut("error",l),Ut("load",l);break;case"details":Ut("toggle",l);break;case"embed":case"source":case"link":Ut("error",l),Ut("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Se in p)if(p.hasOwnProperty(Se)&&(y=p[Se],y!=null))switch(Se){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,d));default:gn(l,d,Se,y,p,null)}return;default:if(eb(d)){for(Ye in p)p.hasOwnProperty(Ye)&&(y=p[Ye],y!==void 0&&Bv(l,d,Ye,y,p,void 0));return}}for(W in p)p.hasOwnProperty(W)&&(y=p[W],y!=null&&gn(l,d,W,y,p,null))}function qV(l,d,p,y){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var w=null,S=null,F=null,W=null,re=null,Se=null,Ye=null;for(Me in p){var Xe=p[Me];if(p.hasOwnProperty(Me)&&Xe!=null)switch(Me){case"checked":break;case"value":break;case"defaultValue":re=Xe;default:y.hasOwnProperty(Me)||gn(l,d,Me,null,y,Xe)}}for(var ke in y){var Me=y[ke];if(Xe=p[ke],y.hasOwnProperty(ke)&&(Me!=null||Xe!=null))switch(ke){case"type":S=Me;break;case"name":w=Me;break;case"checked":Se=Me;break;case"defaultChecked":Ye=Me;break;case"value":F=Me;break;case"defaultValue":W=Me;break;case"children":case"dangerouslySetInnerHTML":if(Me!=null)throw Error(s(137,d));break;default:Me!==Xe&&gn(l,d,ke,Me,y,Xe)}}Zx(l,F,W,re,Se,Ye,S,w);return;case"select":Me=F=W=ke=null;for(S in p)if(re=p[S],p.hasOwnProperty(S)&&re!=null)switch(S){case"value":break;case"multiple":Me=re;default:y.hasOwnProperty(S)||gn(l,d,S,null,y,re)}for(w in y)if(S=y[w],re=p[w],y.hasOwnProperty(w)&&(S!=null||re!=null))switch(w){case"value":ke=S;break;case"defaultValue":W=S;break;case"multiple":F=S;default:S!==re&&gn(l,d,w,S,y,re)}d=W,p=F,y=Me,ke!=null?mc(l,!!p,ke,!1):!!y!=!!p&&(d!=null?mc(l,!!p,d,!0):mc(l,!!p,p?[]:"",!1));return;case"textarea":Me=ke=null;for(W in p)if(w=p[W],p.hasOwnProperty(W)&&w!=null&&!y.hasOwnProperty(W))switch(W){case"value":break;case"children":break;default:gn(l,d,W,null,y,w)}for(F in y)if(w=y[F],S=p[F],y.hasOwnProperty(F)&&(w!=null||S!=null))switch(F){case"value":ke=w;break;case"defaultValue":Me=w;break;case"children":break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(s(91));break;default:w!==S&&gn(l,d,F,w,y,S)}i1(l,ke,Me);return;case"option":for(var St in p)if(ke=p[St],p.hasOwnProperty(St)&&ke!=null&&!y.hasOwnProperty(St))switch(St){case"selected":l.selected=!1;break;default:gn(l,d,St,null,y,ke)}for(re in y)if(ke=y[re],Me=p[re],y.hasOwnProperty(re)&&ke!==Me&&(ke!=null||Me!=null))switch(re){case"selected":l.selected=ke&&typeof ke!="function"&&typeof ke!="symbol";break;default:gn(l,d,re,ke,y,Me)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var vt in p)ke=p[vt],p.hasOwnProperty(vt)&&ke!=null&&!y.hasOwnProperty(vt)&&gn(l,d,vt,null,y,ke);for(Se in y)if(ke=y[Se],Me=p[Se],y.hasOwnProperty(Se)&&ke!==Me&&(ke!=null||Me!=null))switch(Se){case"children":case"dangerouslySetInnerHTML":if(ke!=null)throw Error(s(137,d));break;default:gn(l,d,Se,ke,y,Me)}return;default:if(eb(d)){for(var yn in p)ke=p[yn],p.hasOwnProperty(yn)&&ke!==void 0&&!y.hasOwnProperty(yn)&&Bv(l,d,yn,void 0,y,ke);for(Ye in y)ke=y[Ye],Me=p[Ye],!y.hasOwnProperty(Ye)||ke===Me||ke===void 0&&Me===void 0||Bv(l,d,Ye,ke,y,Me);return}}for(var _e in p)ke=p[_e],p.hasOwnProperty(_e)&&ke!=null&&!y.hasOwnProperty(_e)&&gn(l,d,_e,null,y,ke);for(Xe in y)ke=y[Xe],Me=p[Xe],!y.hasOwnProperty(Xe)||ke===Me||ke==null&&Me==null||gn(l,d,Xe,ke,y,Me)}var Iv=null,Vv=null;function mp(l){return l.nodeType===9?l:l.ownerDocument}function lk(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ck(l,d){if(l===0)switch(d){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&d==="foreignObject"?0:l}function zv(l,d){return l==="textarea"||l==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.children=="bigint"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var $v=null;function GV(){var l=window.event;return l&&l.type==="popstate"?l===$v?!1:($v=l,!0):($v=null,!1)}var uk=typeof setTimeout=="function"?setTimeout:void 0,KV=typeof clearTimeout=="function"?clearTimeout:void 0,dk=typeof Promise=="function"?Promise:void 0,QV=typeof queueMicrotask=="function"?queueMicrotask:typeof dk<"u"?function(l){return dk.resolve(null).then(l).catch(XV)}:uk;function XV(l){setTimeout(function(){throw l})}function io(l){return l==="head"}function fk(l,d){var p=d,y=0,w=0;do{var S=p.nextSibling;if(l.removeChild(p),S&&S.nodeType===8)if(p=S.data,p==="/$"){if(0<y&&8>y){p=y;var F=l.ownerDocument;if(p&1&&Wd(F.documentElement),p&2&&Wd(F.body),p&4)for(p=F.head,Wd(p),F=p.firstChild;F;){var W=F.nextSibling,re=F.nodeName;F[Ko]||re==="SCRIPT"||re==="STYLE"||re==="LINK"&&F.rel.toLowerCase()==="stylesheet"||p.removeChild(F),F=W}}if(w===0){l.removeChild(S),Jd(d);return}w--}else p==="$"||p==="$?"||p==="$!"?w++:y=p.charCodeAt(0)-48;else y=0;p=S}while(p);Jd(d)}function Hv(l){var d=l.firstChild;for(d&&d.nodeType===10&&(d=d.nextSibling);d;){var p=d;switch(d=d.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":Hv(p),Gx(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}l.removeChild(p)}}function ZV(l,d,p,y){for(;l.nodeType===1;){var w=p;if(l.nodeName.toLowerCase()!==d.toLowerCase()){if(!y&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(y){if(!l[Ko])switch(d){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(S=l.getAttribute("rel"),S==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(S!==w.rel||l.getAttribute("href")!==(w.href==null||w.href===""?null:w.href)||l.getAttribute("crossorigin")!==(w.crossOrigin==null?null:w.crossOrigin)||l.getAttribute("title")!==(w.title==null?null:w.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(S=l.getAttribute("src"),(S!==(w.src==null?null:w.src)||l.getAttribute("type")!==(w.type==null?null:w.type)||l.getAttribute("crossorigin")!==(w.crossOrigin==null?null:w.crossOrigin))&&S&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(d==="input"&&l.type==="hidden"){var S=w.name==null?null:""+w.name;if(w.type==="hidden"&&l.getAttribute("name")===S)return l}else return l;if(l=Jr(l.nextSibling),l===null)break}return null}function JV(l,d,p){if(d==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!p||(l=Jr(l.nextSibling),l===null))return null;return l}function Uv(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState==="complete"}function e6(l,d){var p=l.ownerDocument;if(l.data!=="$?"||p.readyState==="complete")d();else{var y=function(){d(),p.removeEventListener("DOMContentLoaded",y)};p.addEventListener("DOMContentLoaded",y),l._reactRetry=y}}function Jr(l){for(;l!=null;l=l.nextSibling){var d=l.nodeType;if(d===1||d===3)break;if(d===8){if(d=l.data,d==="$"||d==="$!"||d==="$?"||d==="F!"||d==="F")break;if(d==="/$")return null}}return l}var Wv=null;function hk(l){l=l.previousSibling;for(var d=0;l;){if(l.nodeType===8){var p=l.data;if(p==="$"||p==="$!"||p==="$?"){if(d===0)return l;d--}else p==="/$"&&d++}l=l.previousSibling}return null}function mk(l,d,p){switch(d=mp(p),l){case"html":if(l=d.documentElement,!l)throw Error(s(452));return l;case"head":if(l=d.head,!l)throw Error(s(453));return l;case"body":if(l=d.body,!l)throw Error(s(454));return l;default:throw Error(s(451))}}function Wd(l){for(var d=l.attributes;d.length;)l.removeAttributeNode(d[0]);Gx(l)}var Er=new Map,pk=new Set;function pp(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var ui=P.d;P.d={f:t6,r:n6,D:s6,C:r6,L:a6,m:i6,X:l6,S:o6,M:c6};function t6(){var l=ui.f(),d=ip();return l||d}function n6(l){var d=uc(l);d!==null&&d.tag===5&&d.type==="form"?PC(d):ui.r(l)}var Uc=typeof document>"u"?null:document;function gk(l,d,p){var y=Uc;if(y&&typeof d=="string"&&d){var w=wr(d);w='link[rel="'+l+'"][href="'+w+'"]',typeof p=="string"&&(w+='[crossorigin="'+p+'"]'),pk.has(w)||(pk.add(w),l={rel:l,crossOrigin:p,href:d},y.querySelector(w)===null&&(d=y.createElement("link"),ys(d,"link",l),os(d),y.head.appendChild(d)))}}function s6(l){ui.D(l),gk("dns-prefetch",l,null)}function r6(l,d){ui.C(l,d),gk("preconnect",l,d)}function a6(l,d,p){ui.L(l,d,p);var y=Uc;if(y&&l&&d){var w='link[rel="preload"][as="'+wr(d)+'"]';d==="image"&&p&&p.imageSrcSet?(w+='[imagesrcset="'+wr(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(w+='[imagesizes="'+wr(p.imageSizes)+'"]')):w+='[href="'+wr(l)+'"]';var S=w;switch(d){case"style":S=Wc(l);break;case"script":S=Yc(l)}Er.has(S)||(l=m({rel:"preload",href:d==="image"&&p&&p.imageSrcSet?void 0:l,as:d},p),Er.set(S,l),y.querySelector(w)!==null||d==="style"&&y.querySelector(Yd(S))||d==="script"&&y.querySelector(qd(S))||(d=y.createElement("link"),ys(d,"link",l),os(d),y.head.appendChild(d)))}}function i6(l,d){ui.m(l,d);var p=Uc;if(p&&l){var y=d&&typeof d.as=="string"?d.as:"script",w='link[rel="modulepreload"][as="'+wr(y)+'"][href="'+wr(l)+'"]',S=w;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":S=Yc(l)}if(!Er.has(S)&&(l=m({rel:"modulepreload",href:l},d),Er.set(S,l),p.querySelector(w)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(qd(S)))return}y=p.createElement("link"),ys(y,"link",l),os(y),p.head.appendChild(y)}}}function o6(l,d,p){ui.S(l,d,p);var y=Uc;if(y&&l){var w=dc(y).hoistableStyles,S=Wc(l);d=d||"default";var F=w.get(S);if(!F){var W={loading:0,preload:null};if(F=y.querySelector(Yd(S)))W.loading=5;else{l=m({rel:"stylesheet",href:l,"data-precedence":d},p),(p=Er.get(S))&&Yv(l,p);var re=F=y.createElement("link");os(re),ys(re,"link",l),re._p=new Promise(function(Se,Ye){re.onload=Se,re.onerror=Ye}),re.addEventListener("load",function(){W.loading|=1}),re.addEventListener("error",function(){W.loading|=2}),W.loading|=4,gp(F,d,y)}F={type:"stylesheet",instance:F,count:1,state:W},w.set(S,F)}}}function l6(l,d){ui.X(l,d);var p=Uc;if(p&&l){var y=dc(p).hoistableScripts,w=Yc(l),S=y.get(w);S||(S=p.querySelector(qd(w)),S||(l=m({src:l,async:!0},d),(d=Er.get(w))&&qv(l,d),S=p.createElement("script"),os(S),ys(S,"link",l),p.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},y.set(w,S))}}function c6(l,d){ui.M(l,d);var p=Uc;if(p&&l){var y=dc(p).hoistableScripts,w=Yc(l),S=y.get(w);S||(S=p.querySelector(qd(w)),S||(l=m({src:l,async:!0,type:"module"},d),(d=Er.get(w))&&qv(l,d),S=p.createElement("script"),os(S),ys(S,"link",l),p.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},y.set(w,S))}}function yk(l,d,p,y){var w=(w=X.current)?pp(w):null;if(!w)throw Error(s(446));switch(l){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(d=Wc(p.href),p=dc(w).hoistableStyles,y=p.get(d),y||(y={type:"style",instance:null,count:0,state:null},p.set(d,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){l=Wc(p.href);var S=dc(w).hoistableStyles,F=S.get(l);if(F||(w=w.ownerDocument||w,F={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},S.set(l,F),(S=w.querySelector(Yd(l)))&&!S._p&&(F.instance=S,F.state.loading=5),Er.has(l)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},Er.set(l,p),S||u6(w,l,p,F.state))),d&&y===null)throw Error(s(528,""));return F}if(d&&y!==null)throw Error(s(529,""));return null;case"script":return d=p.async,p=p.src,typeof p=="string"&&d&&typeof d!="function"&&typeof d!="symbol"?(d=Yc(p),p=dc(w).hoistableScripts,y=p.get(d),y||(y={type:"script",instance:null,count:0,state:null},p.set(d,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,l))}}function Wc(l){return'href="'+wr(l)+'"'}function Yd(l){return'link[rel="stylesheet"]['+l+"]"}function xk(l){return m({},l,{"data-precedence":l.precedence,precedence:null})}function u6(l,d,p,y){l.querySelector('link[rel="preload"][as="style"]['+d+"]")?y.loading=1:(d=l.createElement("link"),y.preload=d,d.addEventListener("load",function(){return y.loading|=1}),d.addEventListener("error",function(){return y.loading|=2}),ys(d,"link",p),os(d),l.head.appendChild(d))}function Yc(l){return'[src="'+wr(l)+'"]'}function qd(l){return"script[async]"+l}function bk(l,d,p){if(d.count++,d.instance===null)switch(d.type){case"style":var y=l.querySelector('style[data-href~="'+wr(p.href)+'"]');if(y)return d.instance=y,os(y),y;var w=m({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return y=(l.ownerDocument||l).createElement("style"),os(y),ys(y,"style",w),gp(y,p.precedence,l),d.instance=y;case"stylesheet":w=Wc(p.href);var S=l.querySelector(Yd(w));if(S)return d.state.loading|=4,d.instance=S,os(S),S;y=xk(p),(w=Er.get(w))&&Yv(y,w),S=(l.ownerDocument||l).createElement("link"),os(S);var F=S;return F._p=new Promise(function(W,re){F.onload=W,F.onerror=re}),ys(S,"link",y),d.state.loading|=4,gp(S,p.precedence,l),d.instance=S;case"script":return S=Yc(p.src),(w=l.querySelector(qd(S)))?(d.instance=w,os(w),w):(y=p,(w=Er.get(S))&&(y=m({},p),qv(y,w)),l=l.ownerDocument||l,w=l.createElement("script"),os(w),ys(w,"link",y),l.head.appendChild(w),d.instance=w);case"void":return null;default:throw Error(s(443,d.type))}else d.type==="stylesheet"&&(d.state.loading&4)===0&&(y=d.instance,d.state.loading|=4,gp(y,p.precedence,l));return d.instance}function gp(l,d,p){for(var y=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),w=y.length?y[y.length-1]:null,S=w,F=0;F<y.length;F++){var W=y[F];if(W.dataset.precedence===d)S=W;else if(S!==w)break}S?S.parentNode.insertBefore(l,S.nextSibling):(d=p.nodeType===9?p.head:p,d.insertBefore(l,d.firstChild))}function Yv(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.title==null&&(l.title=d.title)}function qv(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.integrity==null&&(l.integrity=d.integrity)}var yp=null;function vk(l,d,p){if(yp===null){var y=new Map,w=yp=new Map;w.set(p,y)}else w=yp,y=w.get(p),y||(y=new Map,w.set(p,y));if(y.has(l))return y;for(y.set(l,null),p=p.getElementsByTagName(l),w=0;w<p.length;w++){var S=p[w];if(!(S[Ko]||S[Ft]||l==="link"&&S.getAttribute("rel")==="stylesheet")&&S.namespaceURI!=="http://www.w3.org/2000/svg"){var F=S.getAttribute(d)||"";F=l+F;var W=y.get(F);W?W.push(S):y.set(F,[S])}}return y}function _k(l,d,p){l=l.ownerDocument||l,l.head.insertBefore(p,d==="title"?l.querySelector("head > title"):null)}function d6(l,d,p){if(p===1||d.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof d.precedence!="string"||typeof d.href!="string"||d.href==="")break;return!0;case"link":if(typeof d.rel!="string"||typeof d.href!="string"||d.href===""||d.onLoad||d.onError)break;switch(d.rel){case"stylesheet":return l=d.disabled,typeof d.precedence=="string"&&l==null;default:return!0}case"script":if(d.async&&typeof d.async!="function"&&typeof d.async!="symbol"&&!d.onLoad&&!d.onError&&d.src&&typeof d.src=="string")return!0}return!1}function Ak(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}var Gd=null;function f6(){}function h6(l,d,p){if(Gd===null)throw Error(s(475));var y=Gd;if(d.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(d.state.loading&4)===0){if(d.instance===null){var w=Wc(p.href),S=l.querySelector(Yd(w));if(S){l=S._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(y.count++,y=xp.bind(y),l.then(y,y)),d.state.loading|=4,d.instance=S,os(S);return}S=l.ownerDocument||l,p=xk(p),(w=Er.get(w))&&Yv(p,w),S=S.createElement("link"),os(S);var F=S;F._p=new Promise(function(W,re){F.onload=W,F.onerror=re}),ys(S,"link",p),d.instance=S}y.stylesheets===null&&(y.stylesheets=new Map),y.stylesheets.set(d,l),(l=d.state.preload)&&(d.state.loading&3)===0&&(y.count++,d=xp.bind(y),l.addEventListener("load",d),l.addEventListener("error",d))}}function m6(){if(Gd===null)throw Error(s(475));var l=Gd;return l.stylesheets&&l.count===0&&Gv(l,l.stylesheets),0<l.count?function(d){var p=setTimeout(function(){if(l.stylesheets&&Gv(l,l.stylesheets),l.unsuspend){var y=l.unsuspend;l.unsuspend=null,y()}},6e4);return l.unsuspend=d,function(){l.unsuspend=null,clearTimeout(p)}}:null}function xp(){if(this.count--,this.count===0){if(this.stylesheets)Gv(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var bp=null;function Gv(l,d){l.stylesheets=null,l.unsuspend!==null&&(l.count++,bp=new Map,d.forEach(p6,l),bp=null,xp.call(l))}function p6(l,d){if(!(d.state.loading&4)){var p=bp.get(l);if(p)var y=p.get(null);else{p=new Map,bp.set(l,p);for(var w=l.querySelectorAll("link[data-precedence],style[data-precedence]"),S=0;S<w.length;S++){var F=w[S];(F.nodeName==="LINK"||F.getAttribute("media")!=="not all")&&(p.set(F.dataset.precedence,F),y=F)}y&&p.set(null,y)}w=d.instance,F=w.getAttribute("data-precedence"),S=p.get(F)||y,S===y&&p.set(null,w),p.set(F,w),this.count++,y=xp.bind(this),w.addEventListener("load",y),w.addEventListener("error",y),S?S.parentNode.insertBefore(w,S.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(w,l.firstChild)),d.state.loading|=4}}var Kd={$$typeof:k,Provider:null,Consumer:null,_currentValue:Z,_currentValue2:Z,_threadCount:0};function g6(l,d,p,y,w,S,F,W){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Q(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Q(0),this.hiddenUpdates=Q(null),this.identifierPrefix=y,this.onUncaughtError=w,this.onCaughtError=S,this.onRecoverableError=F,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=W,this.incompleteTransitions=new Map}function wk(l,d,p,y,w,S,F,W,re,Se,Ye,Xe){return l=new g6(l,d,p,F,W,re,Se,Xe),d=1,S===!0&&(d|=24),S=lr(3,null,null,d),l.current=S,S.stateNode=l,d=Db(),d.refCount++,l.pooledCache=d,d.refCount++,S.memoizedState={element:y,isDehydrated:p,cache:d},Rb(S),l}function jk(l){return l?(l=wc,l):wc}function Sk(l,d,p,y,w,S){w=jk(w),y.context===null?y.context=w:y.pendingContext=w,y=qi(d),y.payload={element:p},S=S===void 0?null:S,S!==null&&(y.callback=S),p=Gi(l,y,d),p!==null&&(hr(p,l,d),Sd(p,l,d))}function Ck(l,d){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var p=l.retryLane;l.retryLane=p!==0&&p<d?p:d}}function Kv(l,d){Ck(l,d),(l=l.alternate)&&Ck(l,d)}function Nk(l){if(l.tag===13){var d=Ac(l,67108864);d!==null&&hr(d,l,67108864),Kv(l,67108864)}}var vp=!0;function y6(l,d,p,y){var w=R.T;R.T=null;var S=P.p;try{P.p=2,Qv(l,d,p,y)}finally{P.p=S,R.T=w}}function x6(l,d,p,y){var w=R.T;R.T=null;var S=P.p;try{P.p=8,Qv(l,d,p,y)}finally{P.p=S,R.T=w}}function Qv(l,d,p,y){if(vp){var w=Xv(y);if(w===null)Fv(l,d,y,_p,p),Dk(l,y);else if(v6(w,l,d,p,y))y.stopPropagation();else if(Dk(l,y),d&4&&-1<b6.indexOf(l)){for(;w!==null;){var S=uc(w);if(S!==null)switch(S.tag){case 3:if(S=S.stateNode,S.current.memoizedState.isDehydrated){var F=we(S.pendingLanes);if(F!==0){var W=S;for(W.pendingLanes|=2,W.entangledLanes|=2;F;){var re=1<<31-J(F);W.entanglements[1]|=re,F&=~re}xa(S),(cn&6)===0&&(rp=gt()+500,$d(0))}}break;case 13:W=Ac(S,2),W!==null&&hr(W,S,2),ip(),Kv(S,2)}if(S=Xv(y),S===null&&Fv(l,d,y,_p,p),S===w)break;w=S}w!==null&&y.stopPropagation()}else Fv(l,d,y,null,p)}}function Xv(l){return l=nb(l),Zv(l)}var _p=null;function Zv(l){if(_p=null,l=cc(l),l!==null){var d=i(l);if(d===null)l=null;else{var p=d.tag;if(p===13){if(l=o(d),l!==null)return l;l=null}else if(p===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;l=null}else d!==l&&(l=null)}}return _p=l,null}function kk(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(dt()){case Pe:return 2;case q:return 8;case oe:case Ae:return 32;case He:return 268435456;default:return 32}default:return 32}}var Jv=!1,oo=null,lo=null,co=null,Qd=new Map,Xd=new Map,uo=[],b6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Dk(l,d){switch(l){case"focusin":case"focusout":oo=null;break;case"dragenter":case"dragleave":lo=null;break;case"mouseover":case"mouseout":co=null;break;case"pointerover":case"pointerout":Qd.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xd.delete(d.pointerId)}}function Zd(l,d,p,y,w,S){return l===null||l.nativeEvent!==S?(l={blockedOn:d,domEventName:p,eventSystemFlags:y,nativeEvent:S,targetContainers:[w]},d!==null&&(d=uc(d),d!==null&&Nk(d)),l):(l.eventSystemFlags|=y,d=l.targetContainers,w!==null&&d.indexOf(w)===-1&&d.push(w),l)}function v6(l,d,p,y,w){switch(d){case"focusin":return oo=Zd(oo,l,d,p,y,w),!0;case"dragenter":return lo=Zd(lo,l,d,p,y,w),!0;case"mouseover":return co=Zd(co,l,d,p,y,w),!0;case"pointerover":var S=w.pointerId;return Qd.set(S,Zd(Qd.get(S)||null,l,d,p,y,w)),!0;case"gotpointercapture":return S=w.pointerId,Xd.set(S,Zd(Xd.get(S)||null,l,d,p,y,w)),!0}return!1}function Ek(l){var d=cc(l.target);if(d!==null){var p=i(d);if(p!==null){if(d=p.tag,d===13){if(d=o(p),d!==null){l.blockedOn=d,jt(l.priority,function(){if(p.tag===13){var y=fr();y=Je(y);var w=Ac(p,y);w!==null&&hr(w,p,y),Kv(p,y)}});return}}else if(d===3&&p.stateNode.current.memoizedState.isDehydrated){l.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}l.blockedOn=null}function Ap(l){if(l.blockedOn!==null)return!1;for(var d=l.targetContainers;0<d.length;){var p=Xv(l.nativeEvent);if(p===null){p=l.nativeEvent;var y=new p.constructor(p.type,p);tb=y,p.target.dispatchEvent(y),tb=null}else return d=uc(p),d!==null&&Nk(d),l.blockedOn=p,!1;d.shift()}return!0}function Tk(l,d,p){Ap(l)&&p.delete(d)}function _6(){Jv=!1,oo!==null&&Ap(oo)&&(oo=null),lo!==null&&Ap(lo)&&(lo=null),co!==null&&Ap(co)&&(co=null),Qd.forEach(Tk),Xd.forEach(Tk)}function wp(l,d){l.blockedOn===d&&(l.blockedOn=null,Jv||(Jv=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,_6)))}var jp=null;function Mk(l){jp!==l&&(jp=l,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){jp===l&&(jp=null);for(var d=0;d<l.length;d+=3){var p=l[d],y=l[d+1],w=l[d+2];if(typeof y!="function"){if(Zv(y||p)===null)continue;break}var S=uc(p);S!==null&&(l.splice(d,3),d-=3,Zb(S,{pending:!0,data:w,method:p.method,action:y},y,w))}}))}function Jd(l){function d(re){return wp(re,l)}oo!==null&&wp(oo,l),lo!==null&&wp(lo,l),co!==null&&wp(co,l),Qd.forEach(d),Xd.forEach(d);for(var p=0;p<uo.length;p++){var y=uo[p];y.blockedOn===l&&(y.blockedOn=null)}for(;0<uo.length&&(p=uo[0],p.blockedOn===null);)Ek(p),p.blockedOn===null&&uo.shift();if(p=(l.ownerDocument||l).$$reactFormReplay,p!=null)for(y=0;y<p.length;y+=3){var w=p[y],S=p[y+1],F=w[Bn]||null;if(typeof S=="function")F||Mk(p);else if(F){var W=null;if(S&&S.hasAttribute("formAction")){if(w=S,F=S[Bn]||null)W=F.formAction;else if(Zv(w)!==null)continue}else W=F.action;typeof W=="function"?p[y+1]=W:(p.splice(y,3),y-=3),Mk(p)}}}function e0(l){this._internalRoot=l}Sp.prototype.render=e0.prototype.render=function(l){var d=this._internalRoot;if(d===null)throw Error(s(409));var p=d.current,y=fr();Sk(p,y,l,d,null,null)},Sp.prototype.unmount=e0.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var d=l.containerInfo;Sk(l.current,2,null,l,null,null),ip(),d[$s]=null}};function Sp(l){this._internalRoot=l}Sp.prototype.unstable_scheduleHydration=function(l){if(l){var d=bt();l={blockedOn:null,target:l,priority:d};for(var p=0;p<uo.length&&d!==0&&d<uo[p].priority;p++);uo.splice(p,0,l),p===0&&Ek(l)}};var Rk=e.version;if(Rk!=="19.1.1")throw Error(s(527,Rk,"19.1.1"));P.findDOMNode=function(l){var d=l._reactInternals;if(d===void 0)throw typeof l.render=="function"?Error(s(188)):(l=Object.keys(l).join(","),Error(s(268,l)));return l=u(d),l=l!==null?f(l):null,l=l===null?null:l.stateNode,l};var A6={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cp.isDisabled&&Cp.supportsFiber)try{ee=Cp.inject(A6),De=Cp}catch{}}return nf.createRoot=function(l,d){if(!r(l))throw Error(s(299));var p=!1,y="",w=KC,S=QC,F=XC,W=null;return d!=null&&(d.unstable_strictMode===!0&&(p=!0),d.identifierPrefix!==void 0&&(y=d.identifierPrefix),d.onUncaughtError!==void 0&&(w=d.onUncaughtError),d.onCaughtError!==void 0&&(S=d.onCaughtError),d.onRecoverableError!==void 0&&(F=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(W=d.unstable_transitionCallbacks)),d=wk(l,1,!1,null,null,p,y,w,S,F,W,null),l[$s]=d.current,Lv(l),new e0(d)},nf.hydrateRoot=function(l,d,p){if(!r(l))throw Error(s(299));var y=!1,w="",S=KC,F=QC,W=XC,re=null,Se=null;return p!=null&&(p.unstable_strictMode===!0&&(y=!0),p.identifierPrefix!==void 0&&(w=p.identifierPrefix),p.onUncaughtError!==void 0&&(S=p.onUncaughtError),p.onCaughtError!==void 0&&(F=p.onCaughtError),p.onRecoverableError!==void 0&&(W=p.onRecoverableError),p.unstable_transitionCallbacks!==void 0&&(re=p.unstable_transitionCallbacks),p.formState!==void 0&&(Se=p.formState)),d=wk(l,1,!0,d,p??null,y,w,S,F,W,re,Se),d.context=jk(null),p=d.current,y=fr(),y=Je(y),w=qi(y),w.callback=null,Gi(p,w,y),p=y,d.current.lanes=p,he(d,p),xa(d),l[$s]=d.current,Lv(l),new Sp(d)},nf.version="19.1.1",nf}var Hk;function R6(){if(Hk)return s0.exports;Hk=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),s0.exports=M6(),s0.exports}var O6=R6();const P6=Vu(O6);/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Uk="popstate";function L6(t={}){function e(s,r){let{pathname:i,search:o,hash:c}=s.location;return O_("",{pathname:i,search:o,hash:c},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(s,r){return typeof r=="string"?r:lh(r)}return B6(e,n,null,t)}function Nn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Hr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function F6(){return Math.random().toString(36).substring(2,10)}function Wk(t,e){return{usr:t.state,key:t.key,idx:e}}function O_(t,e,n=null,s){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?zu(e):e,state:n,key:e&&e.key||s||F6()}}function lh({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function zu(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substring(s),t=t.substring(0,s)),t&&(e.pathname=t)}return e}function B6(t,e,n,s={}){let{window:r=document.defaultView,v5Compat:i=!1}=s,o=r.history,c="POP",u=null,f=m();f==null&&(f=0,o.replaceState({...o.state,idx:f},""));function m(){return(o.state||{idx:null}).idx}function h(){c="POP";let _=m(),j=_==null?null:_-f;f=_,u&&u({action:c,location:A.location,delta:j})}function g(_,j){c="PUSH";let C=O_(A.location,_,j);f=m()+1;let k=Wk(C,f),E=A.createHref(C);try{o.pushState(k,"",E)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;r.location.assign(E)}i&&u&&u({action:c,location:A.location,delta:1})}function x(_,j){c="REPLACE";let C=O_(A.location,_,j);f=m();let k=Wk(C,f),E=A.createHref(C);o.replaceState(k,"",E),i&&u&&u({action:c,location:A.location,delta:0})}function b(_){return I6(_)}let A={get action(){return c},get location(){return t(r,o)},listen(_){if(u)throw new Error("A history only accepts one active listener");return r.addEventListener(Uk,h),u=_,()=>{r.removeEventListener(Uk,h),u=null}},createHref(_){return e(r,_)},createURL:b,encodeLocation(_){let j=b(_);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:g,replace:x,go(_){return o.go(_)}};return A}function I6(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Nn(n,"No window.location.(origin|href) available to create URL");let s=typeof t=="string"?t:lh(t);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function hO(t,e,n="/"){return V6(t,e,n,!1)}function V6(t,e,n,s){let r=typeof e=="string"?zu(e):e,i=Ti(r.pathname||"/",n);if(i==null)return null;let o=mO(t);z6(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let f=Z6(i);c=Q6(o[u],f,s)}return c}function mO(t,e=[],n=[],s="",r=!1){let i=(o,c,u=r,f)=>{let m={relativePath:f===void 0?o.path||"":f,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};if(m.relativePath.startsWith("/")){if(!m.relativePath.startsWith(s)&&u)return;Nn(m.relativePath.startsWith(s),`Absolute route path "${m.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(s.length)}let h=ji([s,m.relativePath]),g=n.concat(m);o.children&&o.children.length>0&&(Nn(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),mO(o.children,e,g,h,u)),!(o.path==null&&!o.index)&&e.push({path:h,score:G6(h,o.index),routesMeta:g})};return t.forEach((o,c)=>{if(o.path===""||!o.path?.includes("?"))i(o,c);else for(let u of pO(o.path))i(o,c,!0,u)}),e}function pO(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,r=n.endsWith("?"),i=n.replace(/\?$/,"");if(s.length===0)return r?[i,""]:[i];let o=pO(s.join("/")),c=[];return c.push(...o.map(u=>u===""?i:[i,u].join("/"))),r&&c.push(...o),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function z6(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:K6(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var $6=/^:[\w-]+$/,H6=3,U6=2,W6=1,Y6=10,q6=-2,Yk=t=>t==="*";function G6(t,e){let n=t.split("/"),s=n.length;return n.some(Yk)&&(s+=q6),e&&(s+=U6),n.filter(r=>!Yk(r)).reduce((r,i)=>r+($6.test(i)?H6:i===""?W6:Y6),s)}function K6(t,e){return t.length===e.length&&t.slice(0,-1).every((s,r)=>s===e[r])?t[t.length-1]-e[e.length-1]:0}function Q6(t,e,n=!1){let{routesMeta:s}=t,r={},i="/",o=[];for(let c=0;c<s.length;++c){let u=s[c],f=c===s.length-1,m=i==="/"?e:e.slice(i.length)||"/",h=Yg({path:u.relativePath,caseSensitive:u.caseSensitive,end:f},m),g=u.route;if(!h&&f&&n&&!s[s.length-1].route.index&&(h=Yg({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},m)),!h)return null;Object.assign(r,h.params),o.push({params:r,pathname:ji([i,h.pathname]),pathnameBase:nz(ji([i,h.pathnameBase])),route:g}),h.pathnameBase!=="/"&&(i=ji([i,h.pathnameBase]))}return o}function Yg(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=X6(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let i=r[0],o=i.replace(/(.)\/+$/,"$1"),c=r.slice(1);return{params:s.reduce((f,{paramName:m,isOptional:h},g)=>{if(m==="*"){let b=c[g]||"";o=i.slice(0,i.length-b.length).replace(/(.)\/+$/,"$1")}const x=c[g];return h&&!x?f[m]=void 0:f[m]=(x||"").replace(/%2F/g,"/"),f},{}),pathname:i,pathnameBase:o,pattern:t}}function X6(t,e=!1,n=!0){Hr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let s=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(s.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(s.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),s]}function Z6(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Hr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Ti(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}function J6(t,e="/"){let{pathname:n,search:s="",hash:r=""}=typeof t=="string"?zu(t):t;return{pathname:n?n.startsWith("/")?n:ez(n,e):e,search:sz(s),hash:rz(r)}}function ez(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function o0(t,e,n,s){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function tz(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function hw(t){let e=tz(t);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function mw(t,e,n,s=!1){let r;typeof t=="string"?r=zu(t):(r={...t},Nn(!r.pathname||!r.pathname.includes("?"),o0("?","pathname","search",r)),Nn(!r.pathname||!r.pathname.includes("#"),o0("#","pathname","hash",r)),Nn(!r.search||!r.search.includes("#"),o0("#","search","hash",r)));let i=t===""||r.pathname==="",o=i?"/":r.pathname,c;if(o==null)c=n;else{let h=e.length-1;if(!s&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),h-=1;r.pathname=g.join("/")}c=h>=0?e[h]:"/"}let u=J6(r,c),f=o&&o!=="/"&&o.endsWith("/"),m=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(f||m)&&(u.pathname+="/"),u}var ji=t=>t.join("/").replace(/\/\/+/g,"/"),nz=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),sz=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,rz=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function az(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var gO=["POST","PUT","PATCH","DELETE"];new Set(gO);var iz=["GET",...gO];new Set(iz);var $u=v.createContext(null);$u.displayName="DataRouter";var Uy=v.createContext(null);Uy.displayName="DataRouterState";v.createContext(!1);var yO=v.createContext({isTransitioning:!1});yO.displayName="ViewTransition";var oz=v.createContext(new Map);oz.displayName="Fetchers";var lz=v.createContext(null);lz.displayName="Await";var la=v.createContext(null);la.displayName="Navigation";var Hu=v.createContext(null);Hu.displayName="Location";var ca=v.createContext({outlet:null,matches:[],isDataRoute:!1});ca.displayName="Route";var pw=v.createContext(null);pw.displayName="RouteError";function cz(t,{relative:e}={}){Nn(Uu(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=v.useContext(la),{hash:r,pathname:i,search:o}=Ph(t,{relative:e}),c=i;return n!=="/"&&(c=i==="/"?n:ji([n,i])),s.createHref({pathname:c,search:o,hash:r})}function Uu(){return v.useContext(Hu)!=null}function ua(){return Nn(Uu(),"useLocation() may be used only in the context of a <Router> component."),v.useContext(Hu).location}function uz(){return v.useContext(Hu).navigationType}var xO="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function bO(t){v.useContext(la).static||v.useLayoutEffect(t)}function ms(){let{isDataRoute:t}=v.useContext(ca);return t?wz():dz()}function dz(){Nn(Uu(),"useNavigate() may be used only in the context of a <Router> component.");let t=v.useContext($u),{basename:e,navigator:n}=v.useContext(la),{matches:s}=v.useContext(ca),{pathname:r}=ua(),i=JSON.stringify(hw(s)),o=v.useRef(!1);return bO(()=>{o.current=!0}),v.useCallback((u,f={})=>{if(Hr(o.current,xO),!o.current)return;if(typeof u=="number"){n.go(u);return}let m=mw(u,JSON.parse(i),r,f.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:ji([e,m.pathname])),(f.replace?n.replace:n.push)(m,f.state,f)},[e,n,i,r,t])}v.createContext(null);function Vi(){let{matches:t}=v.useContext(ca),e=t[t.length-1];return e?e.params:{}}function Ph(t,{relative:e}={}){let{matches:n}=v.useContext(ca),{pathname:s}=ua(),r=JSON.stringify(hw(n));return v.useMemo(()=>mw(t,JSON.parse(r),s,e==="path"),[t,r,s,e])}function fz(t,e){return vO(t,e)}function vO(t,e,n,s,r){Nn(Uu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=v.useContext(la),{matches:o}=v.useContext(ca),c=o[o.length-1],u=c?c.params:{},f=c?c.pathname:"/",m=c?c.pathnameBase:"/",h=c&&c.route;{let C=h&&h.path||"";_O(f,!h||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let g=ua(),x;if(e){let C=typeof e=="string"?zu(e):e;Nn(m==="/"||C.pathname?.startsWith(m),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${C.pathname}" was given in the \`location\` prop.`),x=C}else x=g;let b=x.pathname||"/",A=b;if(m!=="/"){let C=m.replace(/^\//,"").split("/");A="/"+b.replace(/^\//,"").split("/").slice(C.length).join("/")}let _=hO(t,{pathname:A});Hr(h||_!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),Hr(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=yz(_&&_.map(C=>Object.assign({},C,{params:Object.assign({},u,C.params),pathname:ji([m,i.encodeLocation?i.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?m:ji([m,i.encodeLocation?i.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),o,n,s,r);return e&&j?v.createElement(Hu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},j):j}function hz(){let t=Az(),e=az(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:s},i={padding:"2px 4px",backgroundColor:s},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=v.createElement(v.Fragment,null,v.createElement("p",null,"💿 Hey developer 👋"),v.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",v.createElement("code",{style:i},"ErrorBoundary")," or"," ",v.createElement("code",{style:i},"errorElement")," prop on your route.")),v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},e),n?v.createElement("pre",{style:r},n):null,o)}var mz=v.createElement(hz,null),pz=class extends v.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?v.createElement(ca.Provider,{value:this.props.routeContext},v.createElement(pw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function gz({routeContext:t,match:e,children:n}){let s=v.useContext($u);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),v.createElement(ca.Provider,{value:t},n)}function yz(t,e=[],n=null,s=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,o=n?.errors;if(o!=null){let f=i.findIndex(m=>m.route.id&&o?.[m.route.id]!==void 0);Nn(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,f+1))}let c=!1,u=-1;if(n)for(let f=0;f<i.length;f++){let m=i[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(u=f),m.route.id){let{loaderData:h,errors:g}=n,x=m.route.loader&&!h.hasOwnProperty(m.route.id)&&(!g||g[m.route.id]===void 0);if(m.route.lazy||x){c=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((f,m,h)=>{let g,x=!1,b=null,A=null;n&&(g=o&&m.route.id?o[m.route.id]:void 0,b=m.route.errorElement||mz,c&&(u<0&&h===0?(_O("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,A=null):u===h&&(x=!0,A=m.route.hydrateFallbackElement||null)));let _=e.concat(i.slice(0,h+1)),j=()=>{let C;return g?C=b:x?C=A:m.route.Component?C=v.createElement(m.route.Component,null):m.route.element?C=m.route.element:C=f,v.createElement(gz,{match:m,routeContext:{outlet:f,matches:_,isDataRoute:n!=null},children:C})};return n&&(m.route.ErrorBoundary||m.route.errorElement||h===0)?v.createElement(pz,{location:n.location,revalidation:n.revalidation,component:b,error:g,children:j(),routeContext:{outlet:null,matches:_,isDataRoute:!0},unstable_onError:s}):j()},null)}function gw(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function xz(t){let e=v.useContext($u);return Nn(e,gw(t)),e}function bz(t){let e=v.useContext(Uy);return Nn(e,gw(t)),e}function vz(t){let e=v.useContext(ca);return Nn(e,gw(t)),e}function yw(t){let e=vz(t),n=e.matches[e.matches.length-1];return Nn(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function _z(){return yw("useRouteId")}function Az(){let t=v.useContext(pw),e=bz("useRouteError"),n=yw("useRouteError");return t!==void 0?t:e.errors?.[n]}function wz(){let{router:t}=xz("useNavigate"),e=yw("useNavigate"),n=v.useRef(!1);return bO(()=>{n.current=!0}),v.useCallback(async(r,i={})=>{Hr(n.current,xO),n.current&&(typeof r=="number"?t.navigate(r):await t.navigate(r,{fromRouteId:e,...i}))},[t,e])}var qk={};function _O(t,e,n){!e&&!qk[t]&&(qk[t]=!0,Hr(!1,n))}v.memo(jz);function jz({routes:t,future:e,state:n,unstable_onError:s}){return vO(t,void 0,n,s,e)}function Sz({to:t,replace:e,state:n,relative:s}){Nn(Uu(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=v.useContext(la);Hr(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=v.useContext(ca),{pathname:o}=ua(),c=ms(),u=mw(t,hw(i),o,s==="path"),f=JSON.stringify(u);return v.useEffect(()=>{c(JSON.parse(f),{replace:e,state:n,relative:s})},[c,f,s,e,n]),null}function sn(t){Nn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Cz({basename:t="/",children:e=null,location:n,navigationType:s="POP",navigator:r,static:i=!1}){Nn(!Uu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),c=v.useMemo(()=>({basename:o,navigator:r,static:i,future:{}}),[o,r,i]);typeof n=="string"&&(n=zu(n));let{pathname:u="/",search:f="",hash:m="",state:h=null,key:g="default"}=n,x=v.useMemo(()=>{let b=Ti(u,o);return b==null?null:{location:{pathname:b,search:f,hash:m,state:h,key:g},navigationType:s}},[o,u,f,m,h,g,s]);return Hr(x!=null,`<Router basename="${o}"> is not able to match the URL "${u}${f}${m}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:v.createElement(la.Provider,{value:c},v.createElement(Hu.Provider,{children:e,value:x}))}function AO({children:t,location:e}){return fz(P_(t),e)}function P_(t,e=[]){let n=[];return v.Children.forEach(t,(s,r)=>{if(!v.isValidElement(s))return;let i=[...e,r];if(s.type===v.Fragment){n.push.apply(n,P_(s.props.children,i));return}Nn(s.type===sn,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Nn(!s.props.index||!s.props.children,"An index route cannot have child routes.");let o={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=P_(s.props.children,i)),n.push(o)}),n}var xg="get",bg="application/x-www-form-urlencoded";function Wy(t){return t!=null&&typeof t.tagName=="string"}function Nz(t){return Wy(t)&&t.tagName.toLowerCase()==="button"}function kz(t){return Wy(t)&&t.tagName.toLowerCase()==="form"}function Dz(t){return Wy(t)&&t.tagName.toLowerCase()==="input"}function Ez(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Tz(t,e){return t.button===0&&(!e||e==="_self")&&!Ez(t)}function L_(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let s=t[n];return e.concat(Array.isArray(s)?s.map(r=>[n,r]):[[n,s]])},[]))}function Mz(t,e){let n=L_(t);return e&&e.forEach((s,r)=>{n.has(r)||e.getAll(r).forEach(i=>{n.append(r,i)})}),n}var Np=null;function Rz(){if(Np===null)try{new FormData(document.createElement("form"),0),Np=!1}catch{Np=!0}return Np}var Oz=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function l0(t){return t!=null&&!Oz.has(t)?(Hr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${bg}"`),null):t}function Pz(t,e){let n,s,r,i,o;if(kz(t)){let c=t.getAttribute("action");s=c?Ti(c,e):null,n=t.getAttribute("method")||xg,r=l0(t.getAttribute("enctype"))||bg,i=new FormData(t)}else if(Nz(t)||Dz(t)&&(t.type==="submit"||t.type==="image")){let c=t.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||c.getAttribute("action");if(s=u?Ti(u,e):null,n=t.getAttribute("formmethod")||c.getAttribute("method")||xg,r=l0(t.getAttribute("formenctype"))||l0(c.getAttribute("enctype"))||bg,i=new FormData(c,t),!Rz()){let{name:f,type:m,value:h}=t;if(m==="image"){let g=f?`${f}.`:"";i.append(`${g}x`,"0"),i.append(`${g}y`,"0")}else f&&i.append(f,h)}}else{if(Wy(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=xg,s=null,r=bg,o=t}return i&&r==="text/plain"&&(o=i,i=void 0),{action:s,method:n.toLowerCase(),encType:r,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function xw(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Lz(t,e,n){let s=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return s.pathname==="/"?s.pathname=`_root.${n}`:e&&Ti(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${n}`,s}async function Fz(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Bz(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function Iz(t,e,n){let s=await Promise.all(t.map(async r=>{let i=e.routes[r.route.id];if(i){let o=await Fz(i,n);return o.links?o.links():[]}return[]}));return Hz(s.flat(1).filter(Bz).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function Gk(t,e,n,s,r,i){let o=(u,f)=>n[f]?u.route.id!==n[f].route.id:!0,c=(u,f)=>n[f].pathname!==u.pathname||n[f].route.path?.endsWith("*")&&n[f].params["*"]!==u.params["*"];return i==="assets"?e.filter((u,f)=>o(u,f)||c(u,f)):i==="data"?e.filter((u,f)=>{let m=s.routes[u.route.id];if(!m||!m.hasLoader)return!1;if(o(u,f)||c(u,f))return!0;if(u.route.shouldRevalidate){let h=u.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function Vz(t,e,{includeHydrateFallback:n}={}){return zz(t.map(s=>{let r=e.routes[s.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function zz(t){return[...new Set(t)]}function $z(t){let e={},n=Object.keys(t).sort();for(let s of n)e[s]=t[s];return e}function Hz(t,e){let n=new Set;return new Set(e),t.reduce((s,r)=>{let i=JSON.stringify($z(r));return n.has(i)||(n.add(i),s.push({key:i,link:r})),s},[])}function wO(){let t=v.useContext($u);return xw(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function Uz(){let t=v.useContext(Uy);return xw(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var bw=v.createContext(void 0);bw.displayName="FrameworkContext";function jO(){let t=v.useContext(bw);return xw(t,"You must render this element inside a <HydratedRouter> element"),t}function Wz(t,e){let n=v.useContext(bw),[s,r]=v.useState(!1),[i,o]=v.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:f,onMouseLeave:m,onTouchStart:h}=e,g=v.useRef(null);v.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let A=j=>{j.forEach(C=>{o(C.isIntersecting)})},_=new IntersectionObserver(A,{threshold:.5});return g.current&&_.observe(g.current),()=>{_.disconnect()}}},[t]),v.useEffect(()=>{if(s){let A=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(A)}}},[s]);let x=()=>{r(!0)},b=()=>{r(!1),o(!1)};return n?t!=="intent"?[i,g,{}]:[i,g,{onFocus:sf(c,x),onBlur:sf(u,b),onMouseEnter:sf(f,x),onMouseLeave:sf(m,b),onTouchStart:sf(h,x)}]:[!1,g,{}]}function sf(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function Yz({page:t,...e}){let{router:n}=wO(),s=v.useMemo(()=>hO(n.routes,t,n.basename),[n.routes,t,n.basename]);return s?v.createElement(Gz,{page:t,matches:s,...e}):null}function qz(t){let{manifest:e,routeModules:n}=jO(),[s,r]=v.useState([]);return v.useEffect(()=>{let i=!1;return Iz(t,e,n).then(o=>{i||r(o)}),()=>{i=!0}},[t,e,n]),s}function Gz({page:t,matches:e,...n}){let s=ua(),{manifest:r,routeModules:i}=jO(),{basename:o}=wO(),{loaderData:c,matches:u}=Uz(),f=v.useMemo(()=>Gk(t,e,u,r,s,"data"),[t,e,u,r,s]),m=v.useMemo(()=>Gk(t,e,u,r,s,"assets"),[t,e,u,r,s]),h=v.useMemo(()=>{if(t===s.pathname+s.search+s.hash)return[];let b=new Set,A=!1;if(e.forEach(j=>{let C=r.routes[j.route.id];!C||!C.hasLoader||(!f.some(k=>k.route.id===j.route.id)&&j.route.id in c&&i[j.route.id]?.shouldRevalidate||C.hasClientLoader?A=!0:b.add(j.route.id))}),b.size===0)return[];let _=Lz(t,o,"data");return A&&b.size>0&&_.searchParams.set("_routes",e.filter(j=>b.has(j.route.id)).map(j=>j.route.id).join(",")),[_.pathname+_.search]},[o,c,s,r,f,e,t,i]),g=v.useMemo(()=>Vz(m,r),[m,r]),x=qz(m);return v.createElement(v.Fragment,null,h.map(b=>v.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...n})),g.map(b=>v.createElement("link",{key:b,rel:"modulepreload",href:b,...n})),x.map(({key:b,link:A})=>v.createElement("link",{key:b,nonce:n.nonce,...A})))}function Kz(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var SO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{SO&&(window.__reactRouterVersion="7.8.2")}catch{}function Qz({basename:t,children:e,window:n}){let s=v.useRef();s.current==null&&(s.current=L6({window:n,v5Compat:!0}));let r=s.current,[i,o]=v.useState({action:r.action,location:r.location}),c=v.useCallback(u=>{v.startTransition(()=>o(u))},[o]);return v.useLayoutEffect(()=>r.listen(c),[r,c]),v.createElement(Cz,{basename:t,children:e,location:i.location,navigationType:i.action,navigator:r})}var CO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,as=v.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:r,reloadDocument:i,replace:o,state:c,target:u,to:f,preventScrollReset:m,viewTransition:h,...g},x){let{basename:b}=v.useContext(la),A=typeof f=="string"&&CO.test(f),_,j=!1;if(typeof f=="string"&&A&&(_=f,SO))try{let O=new URL(window.location.href),I=f.startsWith("//")?new URL(O.protocol+f):new URL(f),$=Ti(I.pathname,b);I.origin===O.origin&&$!=null?f=$+I.search+I.hash:j=!0}catch{Hr(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let C=cz(f,{relative:r}),[k,E,N]=Wz(s,g),L=Jz(f,{replace:o,state:c,target:u,preventScrollReset:m,relative:r,viewTransition:h});function M(O){e&&e(O),O.defaultPrevented||L(O)}let T=v.createElement("a",{...g,...N,href:_||C,onClick:j||i?e:M,ref:Kz(x,E),target:u,"data-discover":!A&&n==="render"?"true":void 0});return k&&!A?v.createElement(v.Fragment,null,T,v.createElement(Yz,{page:C})):T});as.displayName="Link";var NO=v.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:r=!1,style:i,to:o,viewTransition:c,children:u,...f},m){let h=Ph(o,{relative:f.relative}),g=ua(),x=v.useContext(Uy),{navigator:b,basename:A}=v.useContext(la),_=x!=null&&r$(h)&&c===!0,j=b.encodeLocation?b.encodeLocation(h).pathname:h.pathname,C=g.pathname,k=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;n||(C=C.toLowerCase(),k=k?k.toLowerCase():null,j=j.toLowerCase()),k&&A&&(k=Ti(k,A)||k);const E=j!=="/"&&j.endsWith("/")?j.length-1:j.length;let N=C===j||!r&&C.startsWith(j)&&C.charAt(E)==="/",L=k!=null&&(k===j||!r&&k.startsWith(j)&&k.charAt(j.length)==="/"),M={isActive:N,isPending:L,isTransitioning:_},T=N?e:void 0,O;typeof s=="function"?O=s(M):O=[s,N?"active":null,L?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let I=typeof i=="function"?i(M):i;return v.createElement(as,{...f,"aria-current":T,className:O,ref:m,style:I,to:o,viewTransition:c},typeof u=="function"?u(M):u)});NO.displayName="NavLink";var Xz=v.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:r,state:i,method:o=xg,action:c,onSubmit:u,relative:f,preventScrollReset:m,viewTransition:h,...g},x)=>{let b=n$(),A=s$(c,{relative:f}),_=o.toLowerCase()==="get"?"get":"post",j=typeof c=="string"&&CO.test(c),C=k=>{if(u&&u(k),k.defaultPrevented)return;k.preventDefault();let E=k.nativeEvent.submitter,N=E?.getAttribute("formmethod")||o;b(E||k.currentTarget,{fetcherKey:e,method:N,navigate:n,replace:r,state:i,relative:f,preventScrollReset:m,viewTransition:h})};return v.createElement("form",{ref:x,method:_,action:A,onSubmit:s?u:C,...g,"data-discover":!j&&t==="render"?"true":void 0})});Xz.displayName="Form";function Zz(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function kO(t){let e=v.useContext($u);return Nn(e,Zz(t)),e}function Jz(t,{target:e,replace:n,state:s,preventScrollReset:r,relative:i,viewTransition:o}={}){let c=ms(),u=ua(),f=Ph(t,{relative:i});return v.useCallback(m=>{if(Tz(m,e)){m.preventDefault();let h=n!==void 0?n:lh(u)===lh(f);c(t,{replace:h,state:s,preventScrollReset:r,relative:i,viewTransition:o})}},[u,c,f,n,s,e,t,r,i,o])}function DO(t){Hr(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=v.useRef(L_(t)),n=v.useRef(!1),s=ua(),r=v.useMemo(()=>Mz(s.search,n.current?null:e.current),[s.search]),i=ms(),o=v.useCallback((c,u)=>{const f=L_(typeof c=="function"?c(new URLSearchParams(r)):c);n.current=!0,i("?"+f,u)},[i,r]);return[r,o]}var e$=0,t$=()=>`__${String(++e$)}__`;function n$(){let{router:t}=kO("useSubmit"),{basename:e}=v.useContext(la),n=_z();return v.useCallback(async(s,r={})=>{let{action:i,method:o,encType:c,formData:u,body:f}=Pz(s,e);if(r.navigate===!1){let m=r.fetcherKey||t$();await t.fetch(m,n,r.action||i,{preventScrollReset:r.preventScrollReset,formData:u,body:f,formMethod:r.method||o,formEncType:r.encType||c,flushSync:r.flushSync})}else await t.navigate(r.action||i,{preventScrollReset:r.preventScrollReset,formData:u,body:f,formMethod:r.method||o,formEncType:r.encType||c,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})},[t,e,n])}function s$(t,{relative:e}={}){let{basename:n}=v.useContext(la),s=v.useContext(ca);Nn(s,"useFormAction must be used inside a RouteContext");let[r]=s.matches.slice(-1),i={...Ph(t||".",{relative:e})},o=ua();if(t==null){i.search=o.search;let c=new URLSearchParams(i.search),u=c.getAll("index");if(u.some(m=>m==="")){c.delete("index"),u.filter(h=>h).forEach(h=>c.append("index",h));let m=c.toString();i.search=m?`?${m}`:""}}return(!t||t===".")&&r.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:ji([n,i.pathname])),lh(i)}function r$(t,{relative:e}={}){let n=v.useContext(yO);Nn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=kO("useViewTransitionState"),r=Ph(t,{relative:e});if(!n.isTransitioning)return!1;let i=Ti(n.currentLocation.pathname,s)||n.currentLocation.pathname,o=Ti(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Yg(r.pathname,o)!=null||Yg(r.pathname,i)!=null}var vw=fO();const Sl=Vu(vw),EO=v.createContext(),Os=()=>v.useContext(EO),a$=({children:t})=>{const[e,n]=v.useState(null),s=v.useCallback((o,c="success")=>{n({message:o,type:c}),setTimeout(()=>{n(null)},5e3)},[]),i={notification:e,showNotification:s,hideNotification:()=>{n(null)}};return a.jsx(EO.Provider,{value:i,children:t})},Ce="";function TO(t,e){return function(){return t.apply(e,arguments)}}const{toString:i$}=Object.prototype,{getPrototypeOf:_w}=Object,{iterator:Yy,toStringTag:MO}=Symbol,qy=(t=>e=>{const n=i$.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),da=t=>(t=t.toLowerCase(),e=>qy(e)===t),Gy=t=>e=>typeof e===t,{isArray:Wu}=Array,gu=Gy("undefined");function Lh(t){return t!==null&&!gu(t)&&t.constructor!==null&&!gu(t.constructor)&&Js(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const RO=da("ArrayBuffer");function o$(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&RO(t.buffer),e}const l$=Gy("string"),Js=Gy("function"),OO=Gy("number"),Fh=t=>t!==null&&typeof t=="object",c$=t=>t===!0||t===!1,vg=t=>{if(qy(t)!=="object")return!1;const e=_w(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(MO in t)&&!(Yy in t)},u$=t=>{if(!Fh(t)||Lh(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},d$=da("Date"),f$=da("File"),h$=da("Blob"),m$=da("FileList"),p$=t=>Fh(t)&&Js(t.pipe),g$=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Js(t.append)&&((e=qy(t))==="formdata"||e==="object"&&Js(t.toString)&&t.toString()==="[object FormData]"))},y$=da("URLSearchParams"),[x$,b$,v$,_$]=["ReadableStream","Request","Response","Headers"].map(da),A$=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Bh(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let s,r;if(typeof t!="object"&&(t=[t]),Wu(t))for(s=0,r=t.length;s<r;s++)e.call(null,t[s],s,t);else{if(Lh(t))return;const i=n?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let c;for(s=0;s<o;s++)c=i[s],e.call(null,t[c],c,t)}}function PO(t,e){if(Lh(t))return null;e=e.toLowerCase();const n=Object.keys(t);let s=n.length,r;for(;s-- >0;)if(r=n[s],e===r.toLowerCase())return r;return null}const Cl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,LO=t=>!gu(t)&&t!==Cl;function F_(){const{caseless:t,skipUndefined:e}=LO(this)&&this||{},n={},s=(r,i)=>{const o=t&&PO(n,i)||i;vg(n[o])&&vg(r)?n[o]=F_(n[o],r):vg(r)?n[o]=F_({},r):Wu(r)?n[o]=r.slice():(!e||!gu(r))&&(n[o]=r)};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Bh(arguments[r],s);return n}const w$=(t,e,n,{allOwnKeys:s}={})=>(Bh(e,(r,i)=>{n&&Js(r)?t[i]=TO(r,n):t[i]=r},{allOwnKeys:s}),t),j$=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),S$=(t,e,n,s)=>{t.prototype=Object.create(e.prototype,s),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},C$=(t,e,n,s)=>{let r,i,o;const c={};if(e=e||{},t==null)return e;do{for(r=Object.getOwnPropertyNames(t),i=r.length;i-- >0;)o=r[i],(!s||s(o,t,e))&&!c[o]&&(e[o]=t[o],c[o]=!0);t=n!==!1&&_w(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},N$=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const s=t.indexOf(e,n);return s!==-1&&s===n},k$=t=>{if(!t)return null;if(Wu(t))return t;let e=t.length;if(!OO(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},D$=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&_w(Uint8Array)),E$=(t,e)=>{const s=(t&&t[Yy]).call(t);let r;for(;(r=s.next())&&!r.done;){const i=r.value;e.call(t,i[0],i[1])}},T$=(t,e)=>{let n;const s=[];for(;(n=t.exec(e))!==null;)s.push(n);return s},M$=da("HTMLFormElement"),R$=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,s,r){return s.toUpperCase()+r}),Kk=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),O$=da("RegExp"),FO=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),s={};Bh(n,(r,i)=>{let o;(o=e(r,i,t))!==!1&&(s[i]=o||r)}),Object.defineProperties(t,s)},P$=t=>{FO(t,(e,n)=>{if(Js(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const s=t[n];if(Js(s)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},L$=(t,e)=>{const n={},s=r=>{r.forEach(i=>{n[i]=!0})};return Wu(t)?s(t):s(String(t).split(e)),n},F$=()=>{},B$=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function I$(t){return!!(t&&Js(t.append)&&t[MO]==="FormData"&&t[Yy])}const V$=t=>{const e=new Array(10),n=(s,r)=>{if(Fh(s)){if(e.indexOf(s)>=0)return;if(Lh(s))return s;if(!("toJSON"in s)){e[r]=s;const i=Wu(s)?[]:{};return Bh(s,(o,c)=>{const u=n(o,r+1);!gu(u)&&(i[c]=u)}),e[r]=void 0,i}}return s};return n(t,0)},z$=da("AsyncFunction"),$$=t=>t&&(Fh(t)||Js(t))&&Js(t.then)&&Js(t.catch),BO=((t,e)=>t?setImmediate:e?((n,s)=>(Cl.addEventListener("message",({source:r,data:i})=>{r===Cl&&i===n&&s.length&&s.shift()()},!1),r=>{s.push(r),Cl.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Js(Cl.postMessage)),H$=typeof queueMicrotask<"u"?queueMicrotask.bind(Cl):typeof process<"u"&&process.nextTick||BO,U$=t=>t!=null&&Js(t[Yy]),Oe={isArray:Wu,isArrayBuffer:RO,isBuffer:Lh,isFormData:g$,isArrayBufferView:o$,isString:l$,isNumber:OO,isBoolean:c$,isObject:Fh,isPlainObject:vg,isEmptyObject:u$,isReadableStream:x$,isRequest:b$,isResponse:v$,isHeaders:_$,isUndefined:gu,isDate:d$,isFile:f$,isBlob:h$,isRegExp:O$,isFunction:Js,isStream:p$,isURLSearchParams:y$,isTypedArray:D$,isFileList:m$,forEach:Bh,merge:F_,extend:w$,trim:A$,stripBOM:j$,inherits:S$,toFlatObject:C$,kindOf:qy,kindOfTest:da,endsWith:N$,toArray:k$,forEachEntry:E$,matchAll:T$,isHTMLForm:M$,hasOwnProperty:Kk,hasOwnProp:Kk,reduceDescriptors:FO,freezeMethods:P$,toObjectSet:L$,toCamelCase:R$,noop:F$,toFiniteNumber:B$,findKey:PO,global:Cl,isContextDefined:LO,isSpecCompliantForm:I$,toJSONObject:V$,isAsyncFn:z$,isThenable:$$,setImmediate:BO,asap:H$,isIterable:U$};function Rt(t,e,n,s,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),s&&(this.request=s),r&&(this.response=r,this.status=r.status?r.status:null)}Oe.inherits(Rt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Oe.toJSONObject(this.config),code:this.code,status:this.status}}});const IO=Rt.prototype,VO={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{VO[t]={value:t}});Object.defineProperties(Rt,VO);Object.defineProperty(IO,"isAxiosError",{value:!0});Rt.from=(t,e,n,s,r,i)=>{const o=Object.create(IO);Oe.toFlatObject(t,o,function(m){return m!==Error.prototype},f=>f!=="isAxiosError");const c=t&&t.message?t.message:"Error",u=e==null&&t?t.code:e;return Rt.call(o,c,u,n,s,r),t&&o.cause==null&&Object.defineProperty(o,"cause",{value:t,configurable:!0}),o.name=t&&t.name||"Error",i&&Object.assign(o,i),o};const W$=null;function B_(t){return Oe.isPlainObject(t)||Oe.isArray(t)}function zO(t){return Oe.endsWith(t,"[]")?t.slice(0,-2):t}function Qk(t,e,n){return t?t.concat(e).map(function(r,i){return r=zO(r),!n&&i?"["+r+"]":r}).join(n?".":""):e}function Y$(t){return Oe.isArray(t)&&!t.some(B_)}const q$=Oe.toFlatObject(Oe,{},null,function(e){return/^is[A-Z]/.test(e)});function Ky(t,e,n){if(!Oe.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=Oe.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(A,_){return!Oe.isUndefined(_[A])});const s=n.metaTokens,r=n.visitor||m,i=n.dots,o=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&Oe.isSpecCompliantForm(e);if(!Oe.isFunction(r))throw new TypeError("visitor must be a function");function f(b){if(b===null)return"";if(Oe.isDate(b))return b.toISOString();if(Oe.isBoolean(b))return b.toString();if(!u&&Oe.isBlob(b))throw new Rt("Blob is not supported. Use a Buffer instead.");return Oe.isArrayBuffer(b)||Oe.isTypedArray(b)?u&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function m(b,A,_){let j=b;if(b&&!_&&typeof b=="object"){if(Oe.endsWith(A,"{}"))A=s?A:A.slice(0,-2),b=JSON.stringify(b);else if(Oe.isArray(b)&&Y$(b)||(Oe.isFileList(b)||Oe.endsWith(A,"[]"))&&(j=Oe.toArray(b)))return A=zO(A),j.forEach(function(k,E){!(Oe.isUndefined(k)||k===null)&&e.append(o===!0?Qk([A],E,i):o===null?A:A+"[]",f(k))}),!1}return B_(b)?!0:(e.append(Qk(_,A,i),f(b)),!1)}const h=[],g=Object.assign(q$,{defaultVisitor:m,convertValue:f,isVisitable:B_});function x(b,A){if(!Oe.isUndefined(b)){if(h.indexOf(b)!==-1)throw Error("Circular reference detected in "+A.join("."));h.push(b),Oe.forEach(b,function(j,C){(!(Oe.isUndefined(j)||j===null)&&r.call(e,j,Oe.isString(C)?C.trim():C,A,g))===!0&&x(j,A?A.concat(C):[C])}),h.pop()}}if(!Oe.isObject(t))throw new TypeError("data must be an object");return x(t),e}function Xk(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(s){return e[s]})}function Aw(t,e){this._pairs=[],t&&Ky(t,this,e)}const $O=Aw.prototype;$O.append=function(e,n){this._pairs.push([e,n])};$O.toString=function(e){const n=e?function(s){return e.call(this,s,Xk)}:Xk;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function G$(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function HO(t,e,n){if(!e)return t;const s=n&&n.encode||G$;Oe.isFunction(n)&&(n={serialize:n});const r=n&&n.serialize;let i;if(r?i=r(e,n):i=Oe.isURLSearchParams(e)?e.toString():new Aw(e,n).toString(s),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class Zk{constructor(){this.handlers=[]}use(e,n,s){return this.handlers.push({fulfilled:e,rejected:n,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Oe.forEach(this.handlers,function(s){s!==null&&e(s)})}}const UO={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},K$=typeof URLSearchParams<"u"?URLSearchParams:Aw,Q$=typeof FormData<"u"?FormData:null,X$=typeof Blob<"u"?Blob:null,Z$={isBrowser:!0,classes:{URLSearchParams:K$,FormData:Q$,Blob:X$},protocols:["http","https","file","blob","url","data"]},ww=typeof window<"u"&&typeof document<"u",I_=typeof navigator=="object"&&navigator||void 0,J$=ww&&(!I_||["ReactNative","NativeScript","NS"].indexOf(I_.product)<0),eH=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",tH=ww&&window.location.href||"http://localhost",nH=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:ww,hasStandardBrowserEnv:J$,hasStandardBrowserWebWorkerEnv:eH,navigator:I_,origin:tH},Symbol.toStringTag,{value:"Module"})),Ds={...nH,...Z$};function sH(t,e){return Ky(t,new Ds.classes.URLSearchParams,{visitor:function(n,s,r,i){return Ds.isNode&&Oe.isBuffer(n)?(this.append(s,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...e})}function rH(t){return Oe.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function aH(t){const e={},n=Object.keys(t);let s;const r=n.length;let i;for(s=0;s<r;s++)i=n[s],e[i]=t[i];return e}function WO(t){function e(n,s,r,i){let o=n[i++];if(o==="__proto__")return!0;const c=Number.isFinite(+o),u=i>=n.length;return o=!o&&Oe.isArray(r)?r.length:o,u?(Oe.hasOwnProp(r,o)?r[o]=[r[o],s]:r[o]=s,!c):((!r[o]||!Oe.isObject(r[o]))&&(r[o]=[]),e(n,s,r[o],i)&&Oe.isArray(r[o])&&(r[o]=aH(r[o])),!c)}if(Oe.isFormData(t)&&Oe.isFunction(t.entries)){const n={};return Oe.forEachEntry(t,(s,r)=>{e(rH(s),r,n,0)}),n}return null}function iH(t,e,n){if(Oe.isString(t))try{return(e||JSON.parse)(t),Oe.trim(t)}catch(s){if(s.name!=="SyntaxError")throw s}return(n||JSON.stringify)(t)}const Ih={transitional:UO,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const s=n.getContentType()||"",r=s.indexOf("application/json")>-1,i=Oe.isObject(e);if(i&&Oe.isHTMLForm(e)&&(e=new FormData(e)),Oe.isFormData(e))return r?JSON.stringify(WO(e)):e;if(Oe.isArrayBuffer(e)||Oe.isBuffer(e)||Oe.isStream(e)||Oe.isFile(e)||Oe.isBlob(e)||Oe.isReadableStream(e))return e;if(Oe.isArrayBufferView(e))return e.buffer;if(Oe.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let c;if(i){if(s.indexOf("application/x-www-form-urlencoded")>-1)return sH(e,this.formSerializer).toString();if((c=Oe.isFileList(e))||s.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Ky(c?{"files[]":e}:e,u&&new u,this.formSerializer)}}return i||r?(n.setContentType("application/json",!1),iH(e)):e}],transformResponse:[function(e){const n=this.transitional||Ih.transitional,s=n&&n.forcedJSONParsing,r=this.responseType==="json";if(Oe.isResponse(e)||Oe.isReadableStream(e))return e;if(e&&Oe.isString(e)&&(s&&!this.responseType||r)){const o=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(e,this.parseReviver)}catch(c){if(o)throw c.name==="SyntaxError"?Rt.from(c,Rt.ERR_BAD_RESPONSE,this,null,this.response):c}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ds.classes.FormData,Blob:Ds.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Oe.forEach(["delete","get","head","post","put","patch"],t=>{Ih.headers[t]={}});const oH=Oe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),lH=t=>{const e={};let n,s,r;return t&&t.split(`
`).forEach(function(o){r=o.indexOf(":"),n=o.substring(0,r).trim().toLowerCase(),s=o.substring(r+1).trim(),!(!n||e[n]&&oH[n])&&(n==="set-cookie"?e[n]?e[n].push(s):e[n]=[s]:e[n]=e[n]?e[n]+", "+s:s)}),e},Jk=Symbol("internals");function rf(t){return t&&String(t).trim().toLowerCase()}function _g(t){return t===!1||t==null?t:Oe.isArray(t)?t.map(_g):String(t)}function cH(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(t);)e[s[1]]=s[2];return e}const uH=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function c0(t,e,n,s,r){if(Oe.isFunction(s))return s.call(this,e,n);if(r&&(e=n),!!Oe.isString(e)){if(Oe.isString(s))return e.indexOf(s)!==-1;if(Oe.isRegExp(s))return s.test(e)}}function dH(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,s)=>n.toUpperCase()+s)}function fH(t,e){const n=Oe.toCamelCase(" "+e);["get","set","has"].forEach(s=>{Object.defineProperty(t,s+n,{value:function(r,i,o){return this[s].call(this,e,r,i,o)},configurable:!0})})}let er=class{constructor(e){e&&this.set(e)}set(e,n,s){const r=this;function i(c,u,f){const m=rf(u);if(!m)throw new Error("header name must be a non-empty string");const h=Oe.findKey(r,m);(!h||r[h]===void 0||f===!0||f===void 0&&r[h]!==!1)&&(r[h||u]=_g(c))}const o=(c,u)=>Oe.forEach(c,(f,m)=>i(f,m,u));if(Oe.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(Oe.isString(e)&&(e=e.trim())&&!uH(e))o(lH(e),n);else if(Oe.isObject(e)&&Oe.isIterable(e)){let c={},u,f;for(const m of e){if(!Oe.isArray(m))throw TypeError("Object iterator must return a key-value pair");c[f=m[0]]=(u=c[f])?Oe.isArray(u)?[...u,m[1]]:[u,m[1]]:m[1]}o(c,n)}else e!=null&&i(n,e,s);return this}get(e,n){if(e=rf(e),e){const s=Oe.findKey(this,e);if(s){const r=this[s];if(!n)return r;if(n===!0)return cH(r);if(Oe.isFunction(n))return n.call(this,r,s);if(Oe.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=rf(e),e){const s=Oe.findKey(this,e);return!!(s&&this[s]!==void 0&&(!n||c0(this,this[s],s,n)))}return!1}delete(e,n){const s=this;let r=!1;function i(o){if(o=rf(o),o){const c=Oe.findKey(s,o);c&&(!n||c0(s,s[c],c,n))&&(delete s[c],r=!0)}}return Oe.isArray(e)?e.forEach(i):i(e),r}clear(e){const n=Object.keys(this);let s=n.length,r=!1;for(;s--;){const i=n[s];(!e||c0(this,this[i],i,e,!0))&&(delete this[i],r=!0)}return r}normalize(e){const n=this,s={};return Oe.forEach(this,(r,i)=>{const o=Oe.findKey(s,i);if(o){n[o]=_g(r),delete n[i];return}const c=e?dH(i):String(i).trim();c!==i&&delete n[i],n[c]=_g(r),s[c]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return Oe.forEach(this,(s,r)=>{s!=null&&s!==!1&&(n[r]=e&&Oe.isArray(s)?s.join(", "):s)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const s=new this(e);return n.forEach(r=>s.set(r)),s}static accessor(e){const s=(this[Jk]=this[Jk]={accessors:{}}).accessors,r=this.prototype;function i(o){const c=rf(o);s[c]||(fH(r,o),s[c]=!0)}return Oe.isArray(e)?e.forEach(i):i(e),this}};er.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Oe.reduceDescriptors(er.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(s){this[n]=s}}});Oe.freezeMethods(er);function u0(t,e){const n=this||Ih,s=e||n,r=er.from(s.headers);let i=s.data;return Oe.forEach(t,function(c){i=c.call(n,i,r.normalize(),e?e.status:void 0)}),r.normalize(),i}function YO(t){return!!(t&&t.__CANCEL__)}function Yu(t,e,n){Rt.call(this,t??"canceled",Rt.ERR_CANCELED,e,n),this.name="CanceledError"}Oe.inherits(Yu,Rt,{__CANCEL__:!0});function qO(t,e,n){const s=n.config.validateStatus;!n.status||!s||s(n.status)?t(n):e(new Rt("Request failed with status code "+n.status,[Rt.ERR_BAD_REQUEST,Rt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function hH(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function mH(t,e){t=t||10;const n=new Array(t),s=new Array(t);let r=0,i=0,o;return e=e!==void 0?e:1e3,function(u){const f=Date.now(),m=s[i];o||(o=f),n[r]=u,s[r]=f;let h=i,g=0;for(;h!==r;)g+=n[h++],h=h%t;if(r=(r+1)%t,r===i&&(i=(i+1)%t),f-o<e)return;const x=m&&f-m;return x?Math.round(g*1e3/x):void 0}}function pH(t,e){let n=0,s=1e3/e,r,i;const o=(f,m=Date.now())=>{n=m,r=null,i&&(clearTimeout(i),i=null),t(...f)};return[(...f)=>{const m=Date.now(),h=m-n;h>=s?o(f,m):(r=f,i||(i=setTimeout(()=>{i=null,o(r)},s-h)))},()=>r&&o(r)]}const qg=(t,e,n=3)=>{let s=0;const r=mH(50,250);return pH(i=>{const o=i.loaded,c=i.lengthComputable?i.total:void 0,u=o-s,f=r(u),m=o<=c;s=o;const h={loaded:o,total:c,progress:c?o/c:void 0,bytes:u,rate:f||void 0,estimated:f&&c&&m?(c-o)/f:void 0,event:i,lengthComputable:c!=null,[e?"download":"upload"]:!0};t(h)},n)},eD=(t,e)=>{const n=t!=null;return[s=>e[0]({lengthComputable:n,total:t,loaded:s}),e[1]]},tD=t=>(...e)=>Oe.asap(()=>t(...e)),gH=Ds.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,Ds.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(Ds.origin),Ds.navigator&&/(msie|trident)/i.test(Ds.navigator.userAgent)):()=>!0,yH=Ds.hasStandardBrowserEnv?{write(t,e,n,s,r,i){const o=[t+"="+encodeURIComponent(e)];Oe.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Oe.isString(s)&&o.push("path="+s),Oe.isString(r)&&o.push("domain="+r),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function xH(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function bH(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function GO(t,e,n){let s=!xH(e);return t&&(s||n==!1)?bH(t,e):e}const nD=t=>t instanceof er?{...t}:t;function Ul(t,e){e=e||{};const n={};function s(f,m,h,g){return Oe.isPlainObject(f)&&Oe.isPlainObject(m)?Oe.merge.call({caseless:g},f,m):Oe.isPlainObject(m)?Oe.merge({},m):Oe.isArray(m)?m.slice():m}function r(f,m,h,g){if(Oe.isUndefined(m)){if(!Oe.isUndefined(f))return s(void 0,f,h,g)}else return s(f,m,h,g)}function i(f,m){if(!Oe.isUndefined(m))return s(void 0,m)}function o(f,m){if(Oe.isUndefined(m)){if(!Oe.isUndefined(f))return s(void 0,f)}else return s(void 0,m)}function c(f,m,h){if(h in e)return s(f,m);if(h in t)return s(void 0,f)}const u={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:c,headers:(f,m,h)=>r(nD(f),nD(m),h,!0)};return Oe.forEach(Object.keys({...t,...e}),function(m){const h=u[m]||r,g=h(t[m],e[m],m);Oe.isUndefined(g)&&h!==c||(n[m]=g)}),n}const KO=t=>{const e=Ul({},t);let{data:n,withXSRFToken:s,xsrfHeaderName:r,xsrfCookieName:i,headers:o,auth:c}=e;if(e.headers=o=er.from(o),e.url=HO(GO(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),c&&o.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),Oe.isFormData(n)){if(Ds.hasStandardBrowserEnv||Ds.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(Oe.isFunction(n.getHeaders)){const u=n.getHeaders(),f=["content-type","content-length"];Object.entries(u).forEach(([m,h])=>{f.includes(m.toLowerCase())&&o.set(m,h)})}}if(Ds.hasStandardBrowserEnv&&(s&&Oe.isFunction(s)&&(s=s(e)),s||s!==!1&&gH(e.url))){const u=r&&i&&yH.read(i);u&&o.set(r,u)}return e},vH=typeof XMLHttpRequest<"u",_H=vH&&function(t){return new Promise(function(n,s){const r=KO(t);let i=r.data;const o=er.from(r.headers).normalize();let{responseType:c,onUploadProgress:u,onDownloadProgress:f}=r,m,h,g,x,b;function A(){x&&x(),b&&b(),r.cancelToken&&r.cancelToken.unsubscribe(m),r.signal&&r.signal.removeEventListener("abort",m)}let _=new XMLHttpRequest;_.open(r.method.toUpperCase(),r.url,!0),_.timeout=r.timeout;function j(){if(!_)return;const k=er.from("getAllResponseHeaders"in _&&_.getAllResponseHeaders()),N={data:!c||c==="text"||c==="json"?_.responseText:_.response,status:_.status,statusText:_.statusText,headers:k,config:t,request:_};qO(function(M){n(M),A()},function(M){s(M),A()},N),_=null}"onloadend"in _?_.onloadend=j:_.onreadystatechange=function(){!_||_.readyState!==4||_.status===0&&!(_.responseURL&&_.responseURL.indexOf("file:")===0)||setTimeout(j)},_.onabort=function(){_&&(s(new Rt("Request aborted",Rt.ECONNABORTED,t,_)),_=null)},_.onerror=function(E){const N=E&&E.message?E.message:"Network Error",L=new Rt(N,Rt.ERR_NETWORK,t,_);L.event=E||null,s(L),_=null},_.ontimeout=function(){let E=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const N=r.transitional||UO;r.timeoutErrorMessage&&(E=r.timeoutErrorMessage),s(new Rt(E,N.clarifyTimeoutError?Rt.ETIMEDOUT:Rt.ECONNABORTED,t,_)),_=null},i===void 0&&o.setContentType(null),"setRequestHeader"in _&&Oe.forEach(o.toJSON(),function(E,N){_.setRequestHeader(N,E)}),Oe.isUndefined(r.withCredentials)||(_.withCredentials=!!r.withCredentials),c&&c!=="json"&&(_.responseType=r.responseType),f&&([g,b]=qg(f,!0),_.addEventListener("progress",g)),u&&_.upload&&([h,x]=qg(u),_.upload.addEventListener("progress",h),_.upload.addEventListener("loadend",x)),(r.cancelToken||r.signal)&&(m=k=>{_&&(s(!k||k.type?new Yu(null,t,_):k),_.abort(),_=null)},r.cancelToken&&r.cancelToken.subscribe(m),r.signal&&(r.signal.aborted?m():r.signal.addEventListener("abort",m)));const C=hH(r.url);if(C&&Ds.protocols.indexOf(C)===-1){s(new Rt("Unsupported protocol "+C+":",Rt.ERR_BAD_REQUEST,t));return}_.send(i||null)})},AH=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let s=new AbortController,r;const i=function(f){if(!r){r=!0,c();const m=f instanceof Error?f:this.reason;s.abort(m instanceof Rt?m:new Yu(m instanceof Error?m.message:m))}};let o=e&&setTimeout(()=>{o=null,i(new Rt(`timeout ${e} of ms exceeded`,Rt.ETIMEDOUT))},e);const c=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(f=>{f.unsubscribe?f.unsubscribe(i):f.removeEventListener("abort",i)}),t=null)};t.forEach(f=>f.addEventListener("abort",i));const{signal:u}=s;return u.unsubscribe=()=>Oe.asap(c),u}},wH=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let s=0,r;for(;s<n;)r=s+e,yield t.slice(s,r),s=r},jH=async function*(t,e){for await(const n of SH(t))yield*wH(n,e)},SH=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:s}=await e.read();if(n)break;yield s}}finally{await e.cancel()}},sD=(t,e,n,s)=>{const r=jH(t,e);let i=0,o,c=u=>{o||(o=!0,s&&s(u))};return new ReadableStream({async pull(u){try{const{done:f,value:m}=await r.next();if(f){c(),u.close();return}let h=m.byteLength;if(n){let g=i+=h;n(g)}u.enqueue(new Uint8Array(m))}catch(f){throw c(f),f}},cancel(u){return c(u),r.return()}},{highWaterMark:2})},rD=64*1024,{isFunction:kp}=Oe,QO=(({fetch:t,Request:e,Response:n})=>({fetch:t,Request:e,Response:n}))(Oe.global),{ReadableStream:aD,TextEncoder:iD}=Oe.global,oD=(t,...e)=>{try{return!!t(...e)}catch{return!1}},CH=t=>{const{fetch:e,Request:n,Response:s}=Object.assign({},QO,t),r=kp(e),i=kp(n),o=kp(s);if(!r)return!1;const c=r&&kp(aD),u=r&&(typeof iD=="function"?(b=>A=>b.encode(A))(new iD):async b=>new Uint8Array(await new n(b).arrayBuffer())),f=i&&c&&oD(()=>{let b=!1;const A=new n(Ds.origin,{body:new aD,method:"POST",get duplex(){return b=!0,"half"}}).headers.has("Content-Type");return b&&!A}),m=o&&c&&oD(()=>Oe.isReadableStream(new s("").body)),h={stream:m&&(b=>b.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(b=>{!h[b]&&(h[b]=(A,_)=>{let j=A&&A[b];if(j)return j.call(A);throw new Rt(`Response type '${b}' is not supported`,Rt.ERR_NOT_SUPPORT,_)})});const g=async b=>{if(b==null)return 0;if(Oe.isBlob(b))return b.size;if(Oe.isSpecCompliantForm(b))return(await new n(Ds.origin,{method:"POST",body:b}).arrayBuffer()).byteLength;if(Oe.isArrayBufferView(b)||Oe.isArrayBuffer(b))return b.byteLength;if(Oe.isURLSearchParams(b)&&(b=b+""),Oe.isString(b))return(await u(b)).byteLength},x=async(b,A)=>{const _=Oe.toFiniteNumber(b.getContentLength());return _??g(A)};return async b=>{let{url:A,method:_,data:j,signal:C,cancelToken:k,timeout:E,onDownloadProgress:N,onUploadProgress:L,responseType:M,headers:T,withCredentials:O="same-origin",fetchOptions:I}=KO(b);M=M?(M+"").toLowerCase():"text";let $=AH([C,k&&k.toAbortSignal()],E),H=null;const V=$&&$.unsubscribe&&(()=>{$.unsubscribe()});let G;try{if(L&&f&&_!=="get"&&_!=="head"&&(G=await x(T,j))!==0){let D=new n(A,{method:"POST",body:j,duplex:"half"}),B;if(Oe.isFormData(j)&&(B=D.headers.get("content-type"))&&T.setContentType(B),D.body){const[se,le]=eD(G,qg(tD(L)));j=sD(D.body,rD,se,le)}}Oe.isString(O)||(O=O?"include":"omit");const U=i&&"credentials"in n.prototype,R={...I,signal:$,method:_.toUpperCase(),headers:T.normalize().toJSON(),body:j,duplex:"half",credentials:U?O:void 0};H=i&&new n(A,R);let P=await(i?e(H,I):e(A,R));const Z=m&&(M==="stream"||M==="response");if(m&&(N||Z&&V)){const D={};["status","statusText","headers"].forEach(ae=>{D[ae]=P[ae]});const B=Oe.toFiniteNumber(P.headers.get("content-length")),[se,le]=N&&eD(B,qg(tD(N),!0))||[];P=new s(sD(P.body,rD,se,()=>{le&&le(),V&&V()}),D)}M=M||"text";let ne=await h[Oe.findKey(h,M)||"text"](P,b);return!Z&&V&&V(),await new Promise((D,B)=>{qO(D,B,{data:ne,headers:er.from(P.headers),status:P.status,statusText:P.statusText,config:b,request:H})})}catch(U){throw V&&V(),U&&U.name==="TypeError"&&/Load failed|fetch/i.test(U.message)?Object.assign(new Rt("Network Error",Rt.ERR_NETWORK,b,H),{cause:U.cause||U}):Rt.from(U,U&&U.code,b,H)}}},NH=new Map,XO=t=>{let e=Oe.merge.call({skipUndefined:!0},QO,t?t.env:null);const{fetch:n,Request:s,Response:r}=e,i=[s,r,n];let o=i.length,c=o,u,f,m=NH;for(;c--;)u=i[c],f=m.get(u),f===void 0&&m.set(u,f=c?new Map:CH(e)),m=f;return f};XO();const V_={http:W$,xhr:_H,fetch:{get:XO}};Oe.forEach(V_,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const lD=t=>`- ${t}`,kH=t=>Oe.isFunction(t)||t===null||t===!1,ZO={getAdapter:(t,e)=>{t=Oe.isArray(t)?t:[t];const{length:n}=t;let s,r;const i={};for(let o=0;o<n;o++){s=t[o];let c;if(r=s,!kH(s)&&(r=V_[(c=String(s)).toLowerCase()],r===void 0))throw new Rt(`Unknown adapter '${c}'`);if(r&&(Oe.isFunction(r)||(r=r.get(e))))break;i[c||"#"+o]=r}if(!r){const o=Object.entries(i).map(([u,f])=>`adapter ${u} `+(f===!1?"is not supported by the environment":"is not available in the build"));let c=n?o.length>1?`since :
`+o.map(lD).join(`
`):" "+lD(o[0]):"as no adapter specified";throw new Rt("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return r},adapters:V_};function d0(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Yu(null,t)}function cD(t){return d0(t),t.headers=er.from(t.headers),t.data=u0.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),ZO.getAdapter(t.adapter||Ih.adapter,t)(t).then(function(s){return d0(t),s.data=u0.call(t,t.transformResponse,s),s.headers=er.from(s.headers),s},function(s){return YO(s)||(d0(t),s&&s.response&&(s.response.data=u0.call(t,t.transformResponse,s.response),s.response.headers=er.from(s.response.headers))),Promise.reject(s)})}const JO="1.12.0",Qy={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Qy[t]=function(s){return typeof s===t||"a"+(e<1?"n ":" ")+t}});const uD={};Qy.transitional=function(e,n,s){function r(i,o){return"[Axios v"+JO+"] Transitional option '"+i+"'"+o+(s?". "+s:"")}return(i,o,c)=>{if(e===!1)throw new Rt(r(o," has been removed"+(n?" in "+n:"")),Rt.ERR_DEPRECATED);return n&&!uD[o]&&(uD[o]=!0,console.warn(r(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,o,c):!0}};Qy.spelling=function(e){return(n,s)=>(console.warn(`${s} is likely a misspelling of ${e}`),!0)};function DH(t,e,n){if(typeof t!="object")throw new Rt("options must be an object",Rt.ERR_BAD_OPTION_VALUE);const s=Object.keys(t);let r=s.length;for(;r-- >0;){const i=s[r],o=e[i];if(o){const c=t[i],u=c===void 0||o(c,i,t);if(u!==!0)throw new Rt("option "+i+" must be "+u,Rt.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Rt("Unknown option "+i,Rt.ERR_BAD_OPTION)}}const Ag={assertOptions:DH,validators:Qy},ba=Ag.validators;let Ol=class{constructor(e){this.defaults=e||{},this.interceptors={request:new Zk,response:new Zk}}async request(e,n){try{return await this._request(e,n)}catch(s){if(s instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const i=r.stack?r.stack.replace(/^.+\n/,""):"";try{s.stack?i&&!String(s.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+i):s.stack=i}catch{}}throw s}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Ul(this.defaults,n);const{transitional:s,paramsSerializer:r,headers:i}=n;s!==void 0&&Ag.assertOptions(s,{silentJSONParsing:ba.transitional(ba.boolean),forcedJSONParsing:ba.transitional(ba.boolean),clarifyTimeoutError:ba.transitional(ba.boolean)},!1),r!=null&&(Oe.isFunction(r)?n.paramsSerializer={serialize:r}:Ag.assertOptions(r,{encode:ba.function,serialize:ba.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Ag.assertOptions(n,{baseUrl:ba.spelling("baseURL"),withXsrfToken:ba.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&Oe.merge(i.common,i[n.method]);i&&Oe.forEach(["delete","get","head","post","put","patch","common"],b=>{delete i[b]}),n.headers=er.concat(o,i);const c=[];let u=!0;this.interceptors.request.forEach(function(A){typeof A.runWhen=="function"&&A.runWhen(n)===!1||(u=u&&A.synchronous,c.unshift(A.fulfilled,A.rejected))});const f=[];this.interceptors.response.forEach(function(A){f.push(A.fulfilled,A.rejected)});let m,h=0,g;if(!u){const b=[cD.bind(this),void 0];for(b.unshift(...c),b.push(...f),g=b.length,m=Promise.resolve(n);h<g;)m=m.then(b[h++],b[h++]);return m}g=c.length;let x=n;for(h=0;h<g;){const b=c[h++],A=c[h++];try{x=b(x)}catch(_){A.call(this,_);break}}try{m=cD.call(this,x)}catch(b){return Promise.reject(b)}for(h=0,g=f.length;h<g;)m=m.then(f[h++],f[h++]);return m}getUri(e){e=Ul(this.defaults,e);const n=GO(e.baseURL,e.url,e.allowAbsoluteUrls);return HO(n,e.params,e.paramsSerializer)}};Oe.forEach(["delete","get","head","options"],function(e){Ol.prototype[e]=function(n,s){return this.request(Ul(s||{},{method:e,url:n,data:(s||{}).data}))}});Oe.forEach(["post","put","patch"],function(e){function n(s){return function(i,o,c){return this.request(Ul(c||{},{method:e,headers:s?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}Ol.prototype[e]=n(),Ol.prototype[e+"Form"]=n(!0)});let EH=class eP{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const s=this;this.promise.then(r=>{if(!s._listeners)return;let i=s._listeners.length;for(;i-- >0;)s._listeners[i](r);s._listeners=null}),this.promise.then=r=>{let i;const o=new Promise(c=>{s.subscribe(c),i=c}).then(r);return o.cancel=function(){s.unsubscribe(i)},o},e(function(i,o,c){s.reason||(s.reason=new Yu(i,o,c),n(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=s=>{e.abort(s)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new eP(function(r){e=r}),cancel:e}}};function TH(t){return function(n){return t.apply(null,n)}}function MH(t){return Oe.isObject(t)&&t.isAxiosError===!0}const z_={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(z_).forEach(([t,e])=>{z_[e]=t});function tP(t){const e=new Ol(t),n=TO(Ol.prototype.request,e);return Oe.extend(n,Ol.prototype,e,{allOwnKeys:!0}),Oe.extend(n,e,null,{allOwnKeys:!0}),n.create=function(r){return tP(Ul(t,r))},n}const Re=tP(Ih);Re.Axios=Ol;Re.CanceledError=Yu;Re.CancelToken=EH;Re.isCancel=YO;Re.VERSION=JO;Re.toFormData=Ky;Re.AxiosError=Rt;Re.Cancel=Re.CanceledError;Re.all=function(e){return Promise.all(e)};Re.spread=TH;Re.isAxiosError=MH;Re.mergeConfig=Ul;Re.AxiosHeaders=er;Re.formToJSON=t=>WO(Oe.isHTMLForm(t)?new FormData(t):t);Re.getAdapter=ZO.getAdapter;Re.HttpStatusCode=z_;Re.default=Re;const{Axios:bme,AxiosError:vme,CanceledError:_me,isCancel:Ame,CancelToken:wme,VERSION:jme,all:Sme,Cancel:Cme,isAxiosError:Nme,spread:kme,toFormData:Dme,AxiosHeaders:Eme,HttpStatusCode:Tme,formToJSON:Mme,getAdapter:Rme,mergeConfig:Ome}=Re,Yn=Re.create({baseURL:`${Ce}/api`});function Nl(t){t?Yn.defaults.headers.common.Authorization=`Bearer ${t}`:delete Yn.defaults.headers.common.Authorization}Yn.interceptors.request.use(t=>{const e=localStorage.getItem("access_token");return e&&!t.headers?.Authorization&&(t.headers={...t.headers||{},Authorization:`Bearer ${e}`}),t});let f0=!1,af=[];Yn.interceptors.response.use(t=>t,async t=>{const e=t?.response?.status,n=t.config;if(e===401&&!n._retry){if(n._retry=!0,!f0){f0=!0;try{const s=localStorage.getItem("refresh_token");if(!s)throw new Error("No refresh token");const{data:r}=await Re.post(`${Ce}/api/auth/refresh`,{refresh_token:s}),i=r.access_token;localStorage.setItem("access_token",i),Nl(i),af.forEach(o=>o(i)),af=[]}catch(s){return af.forEach(r=>r(null)),af=[],localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),Nl(null),Promise.reject(s)}finally{f0=!1}}return new Promise((s,r)=>{af.push(i=>{if(!i)return r(t);n.headers={...n.headers||{},Authorization:`Bearer ${i}`},s(Yn(n))})})}return Promise.reject(t)});async function RH(t){const{data:e}=await Yn.get("/jobcards",{params:t});return e}async function OH(t){const{data:e}=await Yn.get(`/jobcards/${t}`);return e}async function PH(t){const{data:e}=await Yn.post("/jobcards",t);return e}async function LH(t){await Yn.delete(`/jobcards/${t}`)}async function nP(){const{data:t}=await Yn.get("/jobcategories");return t}async function FH(){const{data:t}=await Yn.get("/vehicles");return t}async function BH(t){const{data:e}=await Yn.get("/products",{params:t});return e}async function IH(t){const{data:e}=await Yn.get("/clients",{signal:t});return e}async function VH(t){const{data:e}=await Yn.post("/clients",t);return e}async function zH(t){const{data:e}=await Yn.get(`/projects?client_id=${t}`);return e}async function $H(t){const{data:e}=await Yn.get(`/jobcards/projects/${t}/accepted_quotes`);return e}async function HH(t){const{data:e}=await Yn.get(`/jobcards/quotes/${t}/line_items`);return e}async function UH(t,e,n){const s=new FormData;s.append("file",n);const{data:r}=await Yn.post(`/jobcards/${t}/material-receipts/${e}`,s,{headers:{"Content-Type":"multipart/form-data"}});return r}async function WH(t){const{data:e}=await Yn.post("/jobcards/materials",t);return e}const sP=v.createContext(),is=()=>{const t=v.useContext(sP);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},YH=({children:t})=>{const[e,n]=v.useState(null),[s,r]=v.useState(!0);v.useEffect(()=>{(async()=>{const j=localStorage.getItem("access_token"),C=localStorage.getItem("user");if(!j||!C){r(!1);return}Nl(j);const k=async E=>await fetch(`${Ce}/api/auth/me`,{headers:{Authorization:`Bearer ${E}`}});try{let E=await k(j);if(E.status===401){const N=await c();N&&(E=await k(N))}if(E.ok){const N=await E.json();n(N.user)}else o()}catch(E){console.error("Auth verification failed:",E),o()}finally{r(!1)}})()},[]);const i=(_,j)=>{n(_),localStorage.setItem("access_token",j.access_token),localStorage.setItem("refresh_token",j.refresh_token),localStorage.setItem("user",JSON.stringify(_)),Nl(j.access_token)},o=async()=>{const _=localStorage.getItem("access_token"),j=localStorage.getItem("refresh_token");if(j&&_)try{await fetch(`${Ce}/api/auth/logout`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${_}`},body:JSON.stringify({refresh_token:j})})}catch(C){console.error("Logout error:",C)}n(null),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user"),Nl(null)},c=async()=>{const _=localStorage.getItem("refresh_token");if(!_)return o(),null;try{const j=await fetch(`${Ce}/api/auth/refresh`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh_token:_})});if(j.ok){const C=await j.json();return localStorage.setItem("access_token",C.access_token),Nl(C.access_token),C.access_token}else return o(),null}catch(j){return console.error("Token refresh failed:",j),o(),null}},A={user:e,login:i,logout:o,refreshToken:c,hasRole:_=>{if(!e)return!1;const j={admin:6,manager:5,sales:4,design:3,team_leader:2,technician:1};return j[e.role]>=j[_]},canModifyProjects:()=>e&&(e.role==="admin"||e.role==="design"),canModifyProducts:()=>e&&(e.role==="admin"||e.role==="sales"),canDelete:()=>e&&e.role==="admin",canApproveJobCards:()=>e&&["admin"].includes(e.role),canCreateJobCards:()=>e&&["admin","team_leader"].includes(e.role),canViewJobCards:()=>e&&["admin","manager","team_leader","technician","sales"].includes(e.role),loading:s,isAuthenticated:!!e};return a.jsx(sP.Provider,{value:A,children:t})},Wa=Object.create(null);Wa.open="0";Wa.close="1";Wa.ping="2";Wa.pong="3";Wa.message="4";Wa.upgrade="5";Wa.noop="6";const wg=Object.create(null);Object.keys(Wa).forEach(t=>{wg[Wa[t]]=t});const $_={type:"error",data:"parser error"},rP=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",aP=typeof ArrayBuffer=="function",iP=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,jw=({type:t,data:e},n,s)=>rP&&e instanceof Blob?n?s(e):dD(e,s):aP&&(e instanceof ArrayBuffer||iP(e))?n?s(e):dD(new Blob([e]),s):s(Wa[t]+(e||"")),dD=(t,e)=>{const n=new FileReader;return n.onload=function(){const s=n.result.split(",")[1];e("b"+(s||""))},n.readAsDataURL(t)};function fD(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let h0;function qH(t,e){if(rP&&t.data instanceof Blob)return t.data.arrayBuffer().then(fD).then(e);if(aP&&(t.data instanceof ArrayBuffer||iP(t.data)))return e(fD(t.data));jw(t,!1,n=>{h0||(h0=new TextEncoder),e(h0.encode(n))})}const hD="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Mf=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<hD.length;t++)Mf[hD.charCodeAt(t)]=t;const GH=t=>{let e=t.length*.75,n=t.length,s,r=0,i,o,c,u;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const f=new ArrayBuffer(e),m=new Uint8Array(f);for(s=0;s<n;s+=4)i=Mf[t.charCodeAt(s)],o=Mf[t.charCodeAt(s+1)],c=Mf[t.charCodeAt(s+2)],u=Mf[t.charCodeAt(s+3)],m[r++]=i<<2|o>>4,m[r++]=(o&15)<<4|c>>2,m[r++]=(c&3)<<6|u&63;return f},KH=typeof ArrayBuffer=="function",Sw=(t,e)=>{if(typeof t!="string")return{type:"message",data:oP(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:QH(t.substring(1),e)}:wg[n]?t.length>1?{type:wg[n],data:t.substring(1)}:{type:wg[n]}:$_},QH=(t,e)=>{if(KH){const n=GH(t);return oP(n,e)}else return{base64:!0,data:t}},oP=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},lP="",XH=(t,e)=>{const n=t.length,s=new Array(n);let r=0;t.forEach((i,o)=>{jw(i,!1,c=>{s[o]=c,++r===n&&e(s.join(lP))})})},ZH=(t,e)=>{const n=t.split(lP),s=[];for(let r=0;r<n.length;r++){const i=Sw(n[r],e);if(s.push(i),i.type==="error")break}return s};function JH(){return new TransformStream({transform(t,e){qH(t,n=>{const s=n.length;let r;if(s<126)r=new Uint8Array(1),new DataView(r.buffer).setUint8(0,s);else if(s<65536){r=new Uint8Array(3);const i=new DataView(r.buffer);i.setUint8(0,126),i.setUint16(1,s)}else{r=new Uint8Array(9);const i=new DataView(r.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(s))}t.data&&typeof t.data!="string"&&(r[0]|=128),e.enqueue(r),e.enqueue(n)})}})}let m0;function Dp(t){return t.reduce((e,n)=>e+n.length,0)}function Ep(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let s=0;for(let r=0;r<e;r++)n[r]=t[0][s++],s===t[0].length&&(t.shift(),s=0);return t.length&&s<t[0].length&&(t[0]=t[0].slice(s)),n}function e8(t,e){m0||(m0=new TextDecoder);const n=[];let s=0,r=-1,i=!1;return new TransformStream({transform(o,c){for(n.push(o);;){if(s===0){if(Dp(n)<1)break;const u=Ep(n,1);i=(u[0]&128)===128,r=u[0]&127,r<126?s=3:r===126?s=1:s=2}else if(s===1){if(Dp(n)<2)break;const u=Ep(n,2);r=new DataView(u.buffer,u.byteOffset,u.length).getUint16(0),s=3}else if(s===2){if(Dp(n)<8)break;const u=Ep(n,8),f=new DataView(u.buffer,u.byteOffset,u.length),m=f.getUint32(0);if(m>Math.pow(2,21)-1){c.enqueue($_);break}r=m*Math.pow(2,32)+f.getUint32(4),s=3}else{if(Dp(n)<r)break;const u=Ep(n,r);c.enqueue(Sw(i?u:m0.decode(u),e)),s=0}if(r===0||r>t){c.enqueue($_);break}}}})}const cP=4;function Jn(t){if(t)return t8(t)}function t8(t){for(var e in Jn.prototype)t[e]=Jn.prototype[e];return t}Jn.prototype.on=Jn.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};Jn.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};Jn.prototype.off=Jn.prototype.removeListener=Jn.prototype.removeAllListeners=Jn.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var s,r=0;r<n.length;r++)if(s=n[r],s===e||s.fn===e){n.splice(r,1);break}return n.length===0&&delete this._callbacks["$"+t],this};Jn.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],s=1;s<arguments.length;s++)e[s-1]=arguments[s];if(n){n=n.slice(0);for(var s=0,r=n.length;s<r;++s)n[s].apply(this,e)}return this};Jn.prototype.emitReserved=Jn.prototype.emit;Jn.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};Jn.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Xy=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),Fr=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),n8="arraybuffer";function uP(t,...e){return e.reduce((n,s)=>(t.hasOwnProperty(s)&&(n[s]=t[s]),n),{})}const s8=Fr.setTimeout,r8=Fr.clearTimeout;function Zy(t,e){e.useNativeTimers?(t.setTimeoutFn=s8.bind(Fr),t.clearTimeoutFn=r8.bind(Fr)):(t.setTimeoutFn=Fr.setTimeout.bind(Fr),t.clearTimeoutFn=Fr.clearTimeout.bind(Fr))}const a8=1.33;function i8(t){return typeof t=="string"?o8(t):Math.ceil((t.byteLength||t.size)*a8)}function o8(t){let e=0,n=0;for(let s=0,r=t.length;s<r;s++)e=t.charCodeAt(s),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(s++,n+=4);return n}function dP(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function l8(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function c8(t){let e={},n=t.split("&");for(let s=0,r=n.length;s<r;s++){let i=n[s].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}class u8 extends Error{constructor(e,n,s){super(e),this.description=n,this.context=s,this.type="TransportError"}}class Cw extends Jn{constructor(e){super(),this.writable=!1,Zy(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,s){return super.emitReserved("error",new u8(e,n,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=Sw(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=l8(e);return n.length?"?"+n:""}}class d8 extends Cw{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||n()})),this.writable||(s++,this.once("drain",function(){--s||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};ZH(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,XH(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=dP()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let fP=!1;try{fP=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const f8=fP;function h8(){}class m8 extends d8{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let s=location.port;s||(s=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||s!==e.port}}doWrite(e,n){const s=this.request({method:"POST",data:e});s.on("success",n),s.on("error",(r,i)=>{this.onError("xhr post error",r,i)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,s)=>{this.onError("xhr poll error",n,s)}),this.pollXhr=e}}class Pa extends Jn{constructor(e,n,s){super(),this.createRequest=e,Zy(this,s),this._opts=s,this._method=s.method||"GET",this._uri=n,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var e;const n=uP(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(n);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let r in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(r)&&s.setRequestHeader(r,this._opts.extraHeaders[r])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var r;s.readyState===3&&((r=this._opts.cookieJar)===null||r===void 0||r.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(r){this.setTimeoutFn(()=>{this._onError(r)},0);return}typeof document<"u"&&(this._index=Pa.requestsCount++,Pa.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=h8,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Pa.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Pa.requestsCount=0;Pa.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",mD);else if(typeof addEventListener=="function"){const t="onpagehide"in Fr?"pagehide":"unload";addEventListener(t,mD,!1)}}function mD(){for(let t in Pa.requests)Pa.requests.hasOwnProperty(t)&&Pa.requests[t].abort()}const p8=(function(){const t=hP({xdomain:!1});return t&&t.responseType!==null})();class g8 extends m8{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=p8&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Pa(hP,this.uri(),e)}}function hP(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||f8))return new XMLHttpRequest}catch{}if(!e)try{return new Fr[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const mP=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class y8 extends Cw{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,s=mP?{}:uP(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,s)}catch(r){return this.emitReserved("error",r)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const s=e[n],r=n===e.length-1;jw(s,this.supportsBinary,i=>{try{this.doWrite(s,i)}catch{}r&&Xy(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=dP()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const p0=Fr.WebSocket||Fr.MozWebSocket;class x8 extends y8{createSocket(e,n,s){return mP?new p0(e,n,s):n?new p0(e,n):new p0(e)}doWrite(e,n){this.ws.send(n)}}class b8 extends Cw{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=e8(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=e.readable.pipeThrough(n).getReader(),r=JH();r.readable.pipeTo(e.writable),this._writer=r.writable.getWriter();const i=()=>{s.read().then(({done:c,value:u})=>{c||(this.onPacket(u),i())}).catch(c=>{})};i();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const s=e[n],r=n===e.length-1;this._writer.write(s).then(()=>{r&&Xy(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const v8={websocket:x8,webtransport:b8,polling:g8},_8=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,A8=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function H_(t){if(t.length>8e3)throw"URI too long";const e=t,n=t.indexOf("["),s=t.indexOf("]");n!=-1&&s!=-1&&(t=t.substring(0,n)+t.substring(n,s).replace(/:/g,";")+t.substring(s,t.length));let r=_8.exec(t||""),i={},o=14;for(;o--;)i[A8[o]]=r[o]||"";return n!=-1&&s!=-1&&(i.source=e,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=w8(i,i.path),i.queryKey=j8(i,i.query),i}function w8(t,e){const n=/\/{2,9}/g,s=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&s.splice(0,1),e.slice(-1)=="/"&&s.splice(s.length-1,1),s}function j8(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,r,i){r&&(n[r]=i)}),n}const U_=typeof addEventListener=="function"&&typeof removeEventListener=="function",jg=[];U_&&addEventListener("offline",()=>{jg.forEach(t=>t())},!1);class jo extends Jn{constructor(e,n){if(super(),this.binaryType=n8,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const s=H_(e);n.hostname=s.host,n.secure=s.protocol==="https"||s.protocol==="wss",n.port=s.port,s.query&&(n.query=s.query)}else n.host&&(n.hostname=H_(n.host).host);Zy(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(s=>{const r=s.prototype.name;this.transports.push(r),this._transportsByName[r]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=c8(this.opts.query)),U_&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},jg.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=cP,n.transport=e,this.id&&(n.sid=this.id);const s=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&jo.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",jo.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let s=0;s<this.writeBuffer.length;s++){const r=this.writeBuffer[s].data;if(r&&(n+=i8(r)),s>0&&n>this._maxPayload)return this.writeBuffer.slice(0,s);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Xy(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,s){return this._sendPacket("message",e,n,s),this}send(e,n,s){return this._sendPacket("message",e,n,s),this}_sendPacket(e,n,s,r){if(typeof n=="function"&&(r=n,n=void 0),typeof s=="function"&&(r=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const i={type:e,data:n,options:s};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},s=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():e()}):this.upgrading?s():e()),this}_onError(e){if(jo.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),U_&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=jg.indexOf(this._offlineEventListener);s!==-1&&jg.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}jo.protocol=cP;class S8 extends jo{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),s=!1;jo.priorWebsocketSuccess=!1;const r=()=>{s||(n.send([{type:"ping",data:"probe"}]),n.once("packet",h=>{if(!s)if(h.type==="pong"&&h.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;jo.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(m(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const g=new Error("probe error");g.transport=n.name,this.emitReserved("upgradeError",g)}}))};function i(){s||(s=!0,m(),n.close(),n=null)}const o=h=>{const g=new Error("probe error: "+h);g.transport=n.name,i(),this.emitReserved("upgradeError",g)};function c(){o("transport closed")}function u(){o("socket closed")}function f(h){n&&h.name!==n.name&&i()}const m=()=>{n.removeListener("open",r),n.removeListener("error",o),n.removeListener("close",c),this.off("close",u),this.off("upgrading",f)};n.once("open",r),n.once("error",o),n.once("close",c),this.once("close",u),this.once("upgrading",f),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{s||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let s=0;s<e.length;s++)~this.transports.indexOf(e[s])&&n.push(e[s]);return n}}let C8=class extends S8{constructor(e,n={}){const s=typeof e=="object"?e:n;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(r=>v8[r]).filter(r=>!!r)),super(e,s)}};function N8(t,e="",n){let s=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),s=H_(t)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const i=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+i+":"+s.port+e,s.href=s.protocol+"://"+i+(n&&n.port===s.port?"":":"+s.port),s}const k8=typeof ArrayBuffer=="function",D8=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,pP=Object.prototype.toString,E8=typeof Blob=="function"||typeof Blob<"u"&&pP.call(Blob)==="[object BlobConstructor]",T8=typeof File=="function"||typeof File<"u"&&pP.call(File)==="[object FileConstructor]";function Nw(t){return k8&&(t instanceof ArrayBuffer||D8(t))||E8&&t instanceof Blob||T8&&t instanceof File}function Sg(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,s=t.length;n<s;n++)if(Sg(t[n]))return!0;return!1}if(Nw(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Sg(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&Sg(t[n]))return!0;return!1}function M8(t){const e=[],n=t.data,s=t;return s.data=W_(n,e),s.attachments=e.length,{packet:s,buffers:e}}function W_(t,e){if(!t)return t;if(Nw(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let s=0;s<t.length;s++)n[s]=W_(t[s],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=W_(t[s],e));return n}return t}function R8(t,e){return t.data=Y_(t.data,e),delete t.attachments,t}function Y_(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=Y_(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=Y_(t[n],e));return t}const O8=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],P8=5;var qt;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(qt||(qt={}));class L8{constructor(e){this.replacer=e}encode(e){return(e.type===qt.EVENT||e.type===qt.ACK)&&Sg(e)?this.encodeAsBinary({type:e.type===qt.EVENT?qt.BINARY_EVENT:qt.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===qt.BINARY_EVENT||e.type===qt.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=M8(e),s=this.encodeAsString(n.packet),r=n.buffers;return r.unshift(s),r}}function pD(t){return Object.prototype.toString.call(t)==="[object Object]"}class kw extends Jn{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const s=n.type===qt.BINARY_EVENT;s||n.type===qt.BINARY_ACK?(n.type=s?qt.EVENT:qt.ACK,this.reconstructor=new F8(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(Nw(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const s={type:Number(e.charAt(0))};if(qt[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===qt.BINARY_EVENT||s.type===qt.BINARY_ACK){const i=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const o=e.substring(i,n);if(o!=Number(o)||e.charAt(n)!=="-")throw new Error("Illegal attachments");s.attachments=Number(o)}if(e.charAt(n+1)==="/"){const i=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););s.nsp=e.substring(i,n)}else s.nsp="/";const r=e.charAt(n+1);if(r!==""&&Number(r)==r){const i=n+1;for(;++n;){const o=e.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===e.length)break}s.id=Number(e.substring(i,n+1))}if(e.charAt(++n)){const i=this.tryParse(e.substr(n));if(kw.isPayloadValid(s.type,i))s.data=i;else throw new Error("invalid payload")}return s}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case qt.CONNECT:return pD(n);case qt.DISCONNECT:return n===void 0;case qt.CONNECT_ERROR:return typeof n=="string"||pD(n);case qt.EVENT:case qt.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&O8.indexOf(n[0])===-1);case qt.ACK:case qt.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class F8{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=R8(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const B8=Object.freeze(Object.defineProperty({__proto__:null,Decoder:kw,Encoder:L8,get PacketType(){return qt},protocol:P8},Symbol.toStringTag,{value:"Module"}));function ta(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const I8=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class gP extends Jn{constructor(e,n,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[ta(e,"open",this.onopen.bind(this)),ta(e,"packet",this.onpacket.bind(this)),ta(e,"error",this.onerror.bind(this)),ta(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var s,r,i;if(I8.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const o={type:qt.EVENT,data:n};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const m=this.ids++,h=n.pop();this._registerAckCallback(m,h),o.id=m}const c=(r=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||r===void 0?void 0:r.writable,u=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!c||(u?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(e,n){var s;const r=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(r===void 0){this.acks[e]=n;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let c=0;c<this.sendBuffer.length;c++)this.sendBuffer[c].id===e&&this.sendBuffer.splice(c,1);n.call(this,new Error("operation has timed out"))},r),o=(...c)=>{this.io.clearTimeoutFn(i),n.apply(this,c)};o.withError=!0,this.acks[e]=o}emitWithAck(e,...n){return new Promise((s,r)=>{const i=(o,c)=>o?r(o):s(c);i.withError=!0,n.push(i),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((r,...i)=>s!==this._queue[0]?void 0:(r!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(r)):(this._queue.shift(),n&&n(null,...i)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:qt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(s=>String(s.id)===e)){const s=this.acks[e];delete this.acks[e],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case qt.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case qt.EVENT:case qt.BINARY_EVENT:this.onevent(e);break;case qt.ACK:case qt.BINARY_ACK:this.onack(e);break;case qt.DISCONNECT:this.ondisconnect();break;case qt.CONNECT_ERROR:this.destroy();const s=new Error(e.data.message);s.data=e.data.data,this.emitReserved("connect_error",s);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const s of n)s.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let s=!1;return function(...r){s||(s=!0,n.packet({type:qt.ACK,id:e,data:r}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:qt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let s=0;s<n.length;s++)if(e===n[s])return n.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let s=0;s<n.length;s++)if(e===n[s])return n.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const s of n)s.apply(this,e.data)}}}function qu(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}qu.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=(Math.floor(e*10)&1)==0?t-n:t+n}return Math.min(t,this.max)|0};qu.prototype.reset=function(){this.attempts=0};qu.prototype.setMin=function(t){this.ms=t};qu.prototype.setMax=function(t){this.max=t};qu.prototype.setJitter=function(t){this.jitter=t};class q_ extends Jn{constructor(e,n){var s;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Zy(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((s=n.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new qu({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const r=n.parser||B8;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new C8(this.uri,this.opts);const n=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const r=ta(n,"open",function(){s.onopen(),e&&e()}),i=c=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",c),e?e(c):this.maybeReconnectOnOpen()},o=ta(n,"error",i);if(this._timeout!==!1){const c=this._timeout,u=this.setTimeoutFn(()=>{r(),i(new Error("timeout")),n.close()},c);this.opts.autoUnref&&u.unref(),this.subs.push(()=>{this.clearTimeoutFn(u)})}return this.subs.push(r),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(ta(e,"ping",this.onping.bind(this)),ta(e,"data",this.ondata.bind(this)),ta(e,"error",this.onerror.bind(this)),ta(e,"close",this.onclose.bind(this)),ta(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){Xy(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let s=this.nsps[e];return s?this._autoConnect&&!s.active&&s.connect():(s=new gP(this,e,n),this.nsps[e]=s),s}_destroy(e){const n=Object.keys(this.nsps);for(const s of n)if(this.nsps[s].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let s=0;s<n.length;s++)this.engine.write(n[s],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(r=>{r?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",r)):e.onreconnect()}))},n);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const of={};function g0(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=N8(t,e.path||"/socket.io"),s=n.source,r=n.id,i=n.path,o=of[r]&&i in of[r].nsps,c=e.forceNew||e["force new connection"]||e.multiplex===!1||o;let u;return c?u=new q_(s,e):(of[r]||(of[r]=new q_(s,e)),u=of[r]),n.query&&!e.query&&(e.query=n.queryKey),u.socket(n.path,e)}Object.assign(g0,{Manager:q_,Socket:gP,io:g0,connect:g0});var y0={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var gD;function V8(){return gD||(gD=1,(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var i="",o=0;o<arguments.length;o++){var c=arguments[o];c&&(i=r(i,s(c)))}return i}function s(i){if(typeof i=="string"||typeof i=="number")return i;if(typeof i!="object")return"";if(Array.isArray(i))return n.apply(null,i);if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]"))return i.toString();var o="";for(var c in i)e.call(i,c)&&i[c]&&(o=r(o,c));return o}function r(i,o){return o?i?i+" "+o:i+o:i}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(y0)),y0.exports}var z8=V8();const ot=Vu(z8);function _t(){return _t=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},_t.apply(null,arguments)}function Dw(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)!==-1)continue;n[s]=t[s]}return n}function yD(t){return"default"+t.charAt(0).toUpperCase()+t.substr(1)}function $8(t){var e=H8(t,"string");return typeof e=="symbol"?e:String(e)}function H8(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function U8(t,e,n){var s=v.useRef(t!==void 0),r=v.useState(e),i=r[0],o=r[1],c=t!==void 0,u=s.current;return s.current=c,!c&&u&&i!==e&&o(e),[c?t:i,v.useCallback(function(f){for(var m=arguments.length,h=new Array(m>1?m-1:0),g=1;g<m;g++)h[g-1]=arguments[g];n&&n.apply(void 0,[f].concat(h)),o(f)},[n])]}function Gu(t,e){return Object.keys(e).reduce(function(n,s){var r,i=n,o=i[yD(s)],c=i[s],u=Dw(i,[yD(s),s].map($8)),f=e[s],m=U8(c,o,t[f]),h=m[0],g=m[1];return _t({},u,(r={},r[s]=h,r[f]=g,r))},t)}function Gg(t,e){return Gg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Gg(t,e)}function W8(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Gg(t,e)}const yP=["xxl","xl","lg","md","sm","xs"],xP="xs",Vh=v.createContext({prefixes:{},breakpoints:yP,minBreakpoint:xP}),{Consumer:Lme,Provider:Fme}=Vh;function ut(t,e){const{prefixes:n}=v.useContext(Vh);return t||n[e]||e}function Ew(){const{breakpoints:t}=v.useContext(Vh);return t}function Tw(){const{minBreakpoint:t}=v.useContext(Vh);return t}function bP(){const{dir:t}=v.useContext(Vh);return t==="rtl"}function zh(t){return t&&t.ownerDocument||document}function Y8(t){var e=zh(t);return e&&e.defaultView||window}function q8(t,e){return Y8(t).getComputedStyle(t,e)}var G8=/([A-Z])/g;function K8(t){return t.replace(G8,"-$1").toLowerCase()}var Q8=/^ms-/;function Tp(t){return K8(t).replace(Q8,"-ms-")}var X8=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function Z8(t){return!!(t&&X8.test(t))}function Si(t,e){var n="",s="";if(typeof e=="string")return t.style.getPropertyValue(Tp(e))||q8(t).getPropertyValue(Tp(e));Object.keys(e).forEach(function(r){var i=e[r];!i&&i!==0?t.style.removeProperty(Tp(r)):Z8(r)?s+=r+"("+i+") ":n+=Tp(r)+": "+i+";"}),s&&(n+="transform: "+s+";"),t.style.cssText+=";"+n}var x0={exports:{}},b0,xD;function J8(){if(xD)return b0;xD=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return b0=t,b0}var v0,bD;function eU(){if(bD)return v0;bD=1;var t=J8();function e(){}function n(){}return n.resetWarningCache=e,v0=function(){function s(o,c,u,f,m,h){if(h!==t){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}s.isRequired=s;function r(){return s}var i={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:r,element:s,elementType:s,instanceOf:r,node:s,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:n,resetWarningCache:e};return i.PropTypes=i,i},v0}var vD;function tU(){return vD||(vD=1,x0.exports=eU()()),x0.exports}var nU=tU();const Hn=Vu(nU),_D={disabled:!1},vP=fe.createContext(null);var sU=function(e){return e.scrollTop},Rf="unmounted",xo="exited",pi="entering",vo="entered",Kg="exiting",zi=(function(t){W8(e,t);function e(s,r){var i;i=t.call(this,s,r)||this;var o=r,c=o&&!o.isMounting?s.enter:s.appear,u;return i.appearStatus=null,s.in?c?(u=xo,i.appearStatus=pi):u=vo:s.unmountOnExit||s.mountOnEnter?u=Rf:u=xo,i.state={status:u},i.nextCallback=null,i}e.getDerivedStateFromProps=function(r,i){var o=r.in;return o&&i.status===Rf?{status:xo}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(r){var i=null;if(r!==this.props){var o=this.state.status;this.props.in?o!==pi&&o!==vo&&(i=pi):(o===pi||o===vo)&&(i=Kg)}this.updateStatus(!1,i)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var r=this.props.timeout,i,o,c;return i=o=c=r,r!=null&&typeof r!="number"&&(i=r.exit,o=r.enter,c=r.appear!==void 0?r.appear:o),{exit:i,enter:o,appear:c}},n.updateStatus=function(r,i){if(r===void 0&&(r=!1),i!==null)if(this.cancelNextCallback(),i===pi){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:Sl.findDOMNode(this);o&&sU(o)}this.performEnter(r)}else this.performExit();else this.props.unmountOnExit&&this.state.status===xo&&this.setState({status:Rf})},n.performEnter=function(r){var i=this,o=this.props.enter,c=this.context?this.context.isMounting:r,u=this.props.nodeRef?[c]:[Sl.findDOMNode(this),c],f=u[0],m=u[1],h=this.getTimeouts(),g=c?h.appear:h.enter;if(!r&&!o||_D.disabled){this.safeSetState({status:vo},function(){i.props.onEntered(f)});return}this.props.onEnter(f,m),this.safeSetState({status:pi},function(){i.props.onEntering(f,m),i.onTransitionEnd(g,function(){i.safeSetState({status:vo},function(){i.props.onEntered(f,m)})})})},n.performExit=function(){var r=this,i=this.props.exit,o=this.getTimeouts(),c=this.props.nodeRef?void 0:Sl.findDOMNode(this);if(!i||_D.disabled){this.safeSetState({status:xo},function(){r.props.onExited(c)});return}this.props.onExit(c),this.safeSetState({status:Kg},function(){r.props.onExiting(c),r.onTransitionEnd(o.exit,function(){r.safeSetState({status:xo},function(){r.props.onExited(c)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(r,i){i=this.setNextCallback(i),this.setState(r,i)},n.setNextCallback=function(r){var i=this,o=!0;return this.nextCallback=function(c){o&&(o=!1,i.nextCallback=null,r(c))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(r,i){this.setNextCallback(i);var o=this.props.nodeRef?this.props.nodeRef.current:Sl.findDOMNode(this),c=r==null&&!this.props.addEndListener;if(!o||c){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var u=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],f=u[0],m=u[1];this.props.addEndListener(f,m)}r!=null&&setTimeout(this.nextCallback,r)},n.render=function(){var r=this.state.status;if(r===Rf)return null;var i=this.props,o=i.children;i.in,i.mountOnEnter,i.unmountOnExit,i.appear,i.enter,i.exit,i.timeout,i.addEndListener,i.onEnter,i.onEntering,i.onEntered,i.onExit,i.onExiting,i.onExited,i.nodeRef;var c=Dw(i,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return fe.createElement(vP.Provider,{value:null},typeof o=="function"?o(r,c):fe.cloneElement(fe.Children.only(o),c))},e})(fe.Component);zi.contextType=vP;zi.propTypes={};function qc(){}zi.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:qc,onEntering:qc,onEntered:qc,onExit:qc,onExiting:qc,onExited:qc};zi.UNMOUNTED=Rf;zi.EXITED=xo;zi.ENTERING=pi;zi.ENTERED=vo;zi.EXITING=Kg;function rU(t){return t.code==="Escape"||t.keyCode===27}function aU(){const t=v.version.split(".");return{major:+t[0],minor:+t[1],patch:+t[2]}}function $h(t){if(!t||typeof t=="function")return null;const{major:e}=aU();return e>=19?t.props.ref:t.ref}const Ku=!!(typeof window<"u"&&window.document&&window.document.createElement);var G_=!1,K_=!1;try{var _0={get passive(){return G_=!0},get once(){return K_=G_=!0}};Ku&&(window.addEventListener("test",_0,_0),window.removeEventListener("test",_0,!0))}catch{}function Mw(t,e,n,s){if(s&&typeof s!="boolean"&&!K_){var r=s.once,i=s.capture,o=n;!K_&&r&&(o=n.__once||function c(u){this.removeEventListener(e,c,i),n.call(this,u)},n.__once=o),t.addEventListener(e,o,G_?s:i)}t.addEventListener(e,n,s)}function Q_(t,e,n,s){var r=s&&typeof s!="boolean"?s.capture:s;t.removeEventListener(e,n,r),n.__once&&t.removeEventListener(e,n.__once,r)}function _o(t,e,n,s){return Mw(t,e,n,s),function(){Q_(t,e,n,s)}}function iU(t,e,n,s){if(s===void 0&&(s=!0),t){var r=document.createEvent("HTMLEvents");r.initEvent(e,n,s),t.dispatchEvent(r)}}function oU(t){var e=Si(t,"transitionDuration")||"",n=e.indexOf("ms")===-1?1e3:1;return parseFloat(e)*n}function lU(t,e,n){n===void 0&&(n=5);var s=!1,r=setTimeout(function(){s||iU(t,"transitionend",!0)},e+n),i=_o(t,"transitionend",function(){s=!0},{once:!0});return function(){clearTimeout(r),i()}}function _P(t,e,n,s){n==null&&(n=oU(t)||0);var r=lU(t,n,s),i=_o(t,"transitionend",e);return function(){r(),i()}}function AD(t,e){const n=Si(t,e)||"",s=n.indexOf("ms")===-1?1e3:1;return parseFloat(n)*s}function AP(t,e){const n=AD(t,"transitionDuration"),s=AD(t,"transitionDelay"),r=_P(t,i=>{i.target===t&&(r(),e(i))},n+s)}function lf(...t){return t.filter(e=>e!=null).reduce((e,n)=>{if(typeof n!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return e===null?n:function(...r){e.apply(this,r),n.apply(this,r)}},null)}function wP(t){t.offsetHeight}const wD=t=>!t||typeof t=="function"?t:e=>{t.current=e};function cU(t,e){const n=wD(t),s=wD(e);return r=>{n&&n(r),s&&s(r)}}function Jy(t,e){return v.useMemo(()=>cU(t,e),[t,e])}function uU(t){return t&&"setState"in t?Sl.findDOMNode(t):t??null}const Rw=fe.forwardRef(({onEnter:t,onEntering:e,onEntered:n,onExit:s,onExiting:r,onExited:i,addEndListener:o,children:c,childRef:u,...f},m)=>{const h=v.useRef(null),g=Jy(h,u),x=L=>{g(uU(L))},b=L=>M=>{L&&h.current&&L(h.current,M)},A=v.useCallback(b(t),[t]),_=v.useCallback(b(e),[e]),j=v.useCallback(b(n),[n]),C=v.useCallback(b(s),[s]),k=v.useCallback(b(r),[r]),E=v.useCallback(b(i),[i]),N=v.useCallback(b(o),[o]);return a.jsx(zi,{ref:m,...f,onEnter:A,onEntered:j,onEntering:_,onExit:C,onExited:E,onExiting:k,addEndListener:N,nodeRef:h,children:typeof c=="function"?(L,M)=>c(L,{...M,ref:x}):fe.cloneElement(c,{ref:x})})});Rw.displayName="TransitionWrapper";const dU={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function fU(t,e){const n=`offset${t[0].toUpperCase()}${t.slice(1)}`,s=e[n],r=dU[t];return s+parseInt(Si(e,r[0]),10)+parseInt(Si(e,r[1]),10)}const hU={[xo]:"collapse",[Kg]:"collapsing",[pi]:"collapsing",[vo]:"collapse show"},jP=fe.forwardRef(({onEnter:t,onEntering:e,onEntered:n,onExit:s,onExiting:r,className:i,children:o,dimension:c="height",in:u=!1,timeout:f=300,mountOnEnter:m=!1,unmountOnExit:h=!1,appear:g=!1,getDimensionValue:x=fU,...b},A)=>{const _=typeof c=="function"?c():c,j=v.useMemo(()=>lf(L=>{L.style[_]="0"},t),[_,t]),C=v.useMemo(()=>lf(L=>{const M=`scroll${_[0].toUpperCase()}${_.slice(1)}`;L.style[_]=`${L[M]}px`},e),[_,e]),k=v.useMemo(()=>lf(L=>{L.style[_]=null},n),[_,n]),E=v.useMemo(()=>lf(L=>{L.style[_]=`${x(_,L)}px`,wP(L)},s),[s,x,_]),N=v.useMemo(()=>lf(L=>{L.style[_]=null},r),[_,r]);return a.jsx(Rw,{ref:A,addEndListener:AP,...b,"aria-expanded":b.role?u:null,onEnter:j,onEntering:C,onEntered:k,onExit:E,onExiting:N,childRef:$h(o),in:u,timeout:f,mountOnEnter:m,unmountOnExit:h,appear:g,children:(L,M)=>fe.cloneElement(o,{...M,className:ot(i,o.props.className,hU[L],_==="width"&&"collapse-horizontal")})})});jP.displayName="Collapse";function SP(t,e){return Array.isArray(t)?t.includes(e):t===e}const Hh=v.createContext({});Hh.displayName="AccordionContext";const Ow=v.forwardRef(({as:t="div",bsPrefix:e,className:n,children:s,eventKey:r,...i},o)=>{const{activeEventKey:c}=v.useContext(Hh);return e=ut(e,"accordion-collapse"),a.jsx(jP,{ref:o,in:SP(c,r),...i,className:ot(n,e),children:a.jsx(t,{children:v.Children.only(s)})})});Ow.displayName="AccordionCollapse";const ex=v.createContext({eventKey:""});ex.displayName="AccordionItemContext";const CP=v.forwardRef(({as:t="div",bsPrefix:e,className:n,onEnter:s,onEntering:r,onEntered:i,onExit:o,onExiting:c,onExited:u,...f},m)=>{e=ut(e,"accordion-body");const{eventKey:h}=v.useContext(ex);return a.jsx(Ow,{eventKey:h,onEnter:s,onEntering:r,onEntered:i,onExit:o,onExiting:c,onExited:u,children:a.jsx(t,{ref:m,...f,className:ot(n,e)})})});CP.displayName="AccordionBody";function mU(t,e){const{activeEventKey:n,onSelect:s,alwaysOpen:r}=v.useContext(Hh);return i=>{let o=t===n?null:t;r&&(Array.isArray(n)?n.includes(t)?o=n.filter(c=>c!==t):o=[...n,t]:o=[t]),s?.(o,i),e?.(i)}}const Pw=v.forwardRef(({as:t="button",bsPrefix:e,className:n,onClick:s,...r},i)=>{e=ut(e,"accordion-button");const{eventKey:o}=v.useContext(ex),c=mU(o,s),{activeEventKey:u}=v.useContext(Hh);return t==="button"&&(r.type="button"),a.jsx(t,{ref:i,onClick:c,...r,"aria-expanded":Array.isArray(u)?u.includes(o):o===u,className:ot(n,e,!SP(u,o)&&"collapsed")})});Pw.displayName="AccordionButton";const NP=v.forwardRef(({as:t="h2","aria-controls":e,bsPrefix:n,className:s,children:r,onClick:i,...o},c)=>(n=ut(n,"accordion-header"),a.jsx(t,{ref:c,...o,className:ot(s,n),children:a.jsx(Pw,{onClick:i,"aria-controls":e,children:r})})));NP.displayName="AccordionHeader";const kP=v.forwardRef(({as:t="div",bsPrefix:e,className:n,eventKey:s,...r},i)=>{e=ut(e,"accordion-item");const o=v.useMemo(()=>({eventKey:s}),[s]);return a.jsx(ex.Provider,{value:o,children:a.jsx(t,{ref:i,...r,className:ot(n,e)})})});kP.displayName="AccordionItem";const DP=v.forwardRef((t,e)=>{const{as:n="div",activeKey:s,bsPrefix:r,className:i,onSelect:o,flush:c,alwaysOpen:u,...f}=Gu(t,{activeKey:"onSelect"}),m=ut(r,"accordion"),h=v.useMemo(()=>({activeEventKey:s,onSelect:o,alwaysOpen:u}),[s,o,u]);return a.jsx(Hh.Provider,{value:h,children:a.jsx(n,{ref:e,...f,className:ot(i,m,c&&`${m}-flush`)})})});DP.displayName="Accordion";const na=Object.assign(DP,{Button:Pw,Collapse:Ow,Item:kP,Header:NP,Body:CP});function pU(t){const e=v.useRef(t);return v.useEffect(()=>{e.current=t},[t]),e}function yu(t){const e=pU(t);return v.useCallback(function(...n){return e.current&&e.current(...n)},[e])}const tx=(t=>v.forwardRef((e,n)=>a.jsx("div",{...e,ref:n,className:ot(e.className,t)}))),EP=tx("h4");EP.displayName="DivStyledAsH4";const TP=v.forwardRef(({className:t,bsPrefix:e,as:n=EP,...s},r)=>(e=ut(e,"alert-heading"),a.jsx(n,{ref:r,className:ot(t,e),...s})));TP.displayName="AlertHeading";function gU(){return v.useState(null)}function yU(t){const e=v.useRef(t);return v.useEffect(()=>{e.current=t},[t]),e}function Es(t){const e=yU(t);return v.useCallback(function(...n){return e.current&&e.current(...n)},[e])}function xU(t,e,n,s=!1){const r=Es(n);v.useEffect(()=>{const i=typeof t=="function"?t():t;return i.addEventListener(e,r,s),()=>i.removeEventListener(e,r,s)},[t])}function MP(){const t=v.useRef(!0),e=v.useRef(()=>t.current);return v.useEffect(()=>(t.current=!0,()=>{t.current=!1}),[]),e.current}function RP(t){const e=v.useRef(null);return v.useEffect(()=>{e.current=t}),e.current}const bU=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",vU=typeof document<"u",jD=vU||bU?v.useLayoutEffect:v.useEffect,_U=["as","disabled"];function AU(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}function wU(t){return!t||t.trim()==="#"}function Lw({tagName:t,disabled:e,href:n,target:s,rel:r,role:i,onClick:o,tabIndex:c=0,type:u}){t||(n!=null||s!=null||r!=null?t="a":t="button");const f={tagName:t};if(t==="button")return[{type:u||"button",disabled:e},f];const m=g=>{if((e||t==="a"&&wU(n))&&g.preventDefault(),e){g.stopPropagation();return}o?.(g)},h=g=>{g.key===" "&&(g.preventDefault(),m(g))};return t==="a"&&(n||(n="#"),e&&(n=void 0)),[{role:i??"button",disabled:void 0,tabIndex:e?void 0:c,href:n,target:t==="a"?s:void 0,"aria-disabled":e||void 0,rel:t==="a"?r:void 0,onClick:m,onKeyDown:h},f]}const Fw=v.forwardRef((t,e)=>{let{as:n,disabled:s}=t,r=AU(t,_U);const[i,{tagName:o}]=Lw(Object.assign({tagName:n,disabled:s},r));return a.jsx(o,Object.assign({},r,i,{ref:e}))});Fw.displayName="Button";const jU=["onKeyDown"];function SU(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}function CU(t){return!t||t.trim()==="#"}const Uh=v.forwardRef((t,e)=>{let{onKeyDown:n}=t,s=SU(t,jU);const[r]=Lw(Object.assign({tagName:"a"},s)),i=Es(o=>{r.onKeyDown(o),n?.(o)});return CU(s.href)||s.role==="button"?a.jsx("a",Object.assign({ref:e},s,r,{onKeyDown:i})):a.jsx("a",Object.assign({ref:e},s,{onKeyDown:n}))});Uh.displayName="Anchor";const OP=v.forwardRef(({className:t,bsPrefix:e,as:n=Uh,...s},r)=>(e=ut(e,"alert-link"),a.jsx(n,{ref:r,className:ot(t,e),...s})));OP.displayName="AlertLink";const NU={[pi]:"show",[vo]:"show"},Wl=v.forwardRef(({className:t,children:e,transitionClasses:n={},onEnter:s,...r},i)=>{const o={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...r},c=v.useCallback((u,f)=>{wP(u),s?.(u,f)},[s]);return a.jsx(Rw,{ref:i,addEndListener:AP,...o,onEnter:c,childRef:$h(e),children:(u,f)=>v.cloneElement(e,{...f,className:ot("fade",t,e.props.className,NU[u],n[u])})})});Wl.displayName="Fade";const kU={"aria-label":Hn.string,onClick:Hn.func,variant:Hn.oneOf(["white"])},nx=v.forwardRef(({className:t,variant:e,"aria-label":n="Close",...s},r)=>a.jsx("button",{ref:r,type:"button",className:ot("btn-close",e&&`btn-close-${e}`,t),"aria-label":n,...s}));nx.displayName="CloseButton";nx.propTypes=kU;const PP=v.forwardRef((t,e)=>{const{bsPrefix:n,show:s=!0,closeLabel:r="Close alert",closeVariant:i,className:o,children:c,variant:u="primary",onClose:f,dismissible:m,transition:h=Wl,...g}=Gu(t,{show:"onClose"}),x=ut(n,"alert"),b=yu(j=>{f&&f(!1,j)}),A=h===!0?Wl:h,_=a.jsxs("div",{role:"alert",...A?void 0:g,ref:e,className:ot(o,x,u&&`${x}-${u}`,m&&`${x}-dismissible`),children:[m&&a.jsx(nx,{onClick:b,"aria-label":r,variant:i}),c]});return A?a.jsx(A,{unmountOnExit:!0,...g,ref:void 0,in:s,children:_}):s?_:null});PP.displayName="Alert";const kt=Object.assign(PP,{Link:OP,Heading:TP}),tt=v.forwardRef(({bsPrefix:t,bg:e="primary",pill:n=!1,text:s,className:r,as:i="span",...o},c)=>{const u=ut(t,"badge");return a.jsx(i,{ref:c,...o,className:ot(r,u,n&&"rounded-pill",s&&`text-${s}`,e&&`bg-${e}`)})});tt.displayName="Badge";const Fe=v.forwardRef(({as:t,bsPrefix:e,variant:n="primary",size:s,active:r=!1,disabled:i=!1,className:o,...c},u)=>{const f=ut(e,"btn"),[m,{tagName:h}]=Lw({tagName:t,disabled:i,...c}),g=h;return a.jsx(g,{...m,...c,ref:u,disabled:i,className:ot(o,f,r&&"active",n&&`${f}-${n}`,s&&`${f}-${s}`,c.href&&i&&"disabled")})});Fe.displayName="Button";const aa=v.forwardRef(({bsPrefix:t,size:e,vertical:n=!1,className:s,role:r="group",as:i="div",...o},c)=>{const u=ut(t,"btn-group");let f=u;return n&&(f=`${u}-vertical`),a.jsx(i,{...o,ref:c,role:r,className:ot(s,f,e&&`${u}-${e}`)})});aa.displayName="ButtonGroup";const Bw=v.forwardRef(({className:t,bsPrefix:e,as:n="div",...s},r)=>(e=ut(e,"card-body"),a.jsx(n,{ref:r,className:ot(t,e),...s})));Bw.displayName="CardBody";const LP=v.forwardRef(({className:t,bsPrefix:e,as:n="div",...s},r)=>(e=ut(e,"card-footer"),a.jsx(n,{ref:r,className:ot(t,e),...s})));LP.displayName="CardFooter";const Iw=v.createContext(null);Iw.displayName="CardHeaderContext";const FP=v.forwardRef(({bsPrefix:t,className:e,as:n="div",...s},r)=>{const i=ut(t,"card-header"),o=v.useMemo(()=>({cardHeaderBsPrefix:i}),[i]);return a.jsx(Iw.Provider,{value:o,children:a.jsx(n,{ref:r,...s,className:ot(e,i)})})});FP.displayName="CardHeader";const BP=v.forwardRef(({bsPrefix:t,className:e,variant:n,as:s="img",...r},i)=>{const o=ut(t,"card-img");return a.jsx(s,{ref:i,className:ot(n?`${o}-${n}`:o,e),...r})});BP.displayName="CardImg";const IP=v.forwardRef(({className:t,bsPrefix:e,as:n="div",...s},r)=>(e=ut(e,"card-img-overlay"),a.jsx(n,{ref:r,className:ot(t,e),...s})));IP.displayName="CardImgOverlay";const VP=v.forwardRef(({className:t,bsPrefix:e,as:n="a",...s},r)=>(e=ut(e,"card-link"),a.jsx(n,{ref:r,className:ot(t,e),...s})));VP.displayName="CardLink";const DU=tx("h6"),zP=v.forwardRef(({className:t,bsPrefix:e,as:n=DU,...s},r)=>(e=ut(e,"card-subtitle"),a.jsx(n,{ref:r,className:ot(t,e),...s})));zP.displayName="CardSubtitle";const $P=v.forwardRef(({className:t,bsPrefix:e,as:n="p",...s},r)=>(e=ut(e,"card-text"),a.jsx(n,{ref:r,className:ot(t,e),...s})));$P.displayName="CardText";const EU=tx("h5"),HP=v.forwardRef(({className:t,bsPrefix:e,as:n=EU,...s},r)=>(e=ut(e,"card-title"),a.jsx(n,{ref:r,className:ot(t,e),...s})));HP.displayName="CardTitle";const UP=v.forwardRef(({bsPrefix:t,className:e,bg:n,text:s,border:r,body:i=!1,children:o,as:c="div",...u},f)=>{const m=ut(t,"card");return a.jsx(c,{ref:f,...u,className:ot(e,m,n&&`bg-${n}`,s&&`text-${s}`,r&&`border-${r}`),children:i?a.jsx(Bw,{children:o}):o})});UP.displayName="Card";const me=Object.assign(UP,{Img:BP,Title:HP,Subtitle:zP,Body:Bw,Link:VP,Text:$P,Header:FP,Footer:LP,ImgOverlay:IP});function TU(t){const e=v.useRef(t);return e.current=t,e}function MU(t){const e=TU(t);v.useEffect(()=>()=>e.current(),[])}function SD(t,e){let n=0;return v.Children.map(t,s=>v.isValidElement(s)?e(s,n++):s)}function RU(t,e){let n=0;v.Children.forEach(t,s=>{v.isValidElement(s)&&e(s,n++)})}function OU(t,e){return v.Children.toArray(t).some(n=>v.isValidElement(n)&&n.type===e)}function PU({as:t,bsPrefix:e,className:n,...s}){e=ut(e,"col");const r=Ew(),i=Tw(),o=[],c=[];return r.forEach(u=>{const f=s[u];delete s[u];let m,h,g;typeof f=="object"&&f!=null?{span:m,offset:h,order:g}=f:m=f;const x=u!==i?`-${u}`:"";m&&o.push(m===!0?`${e}${x}`:`${e}${x}-${m}`),g!=null&&c.push(`order${x}-${g}`),h!=null&&c.push(`offset${x}-${h}`)}),[{...s,className:ot(n,...o,...c)},{as:t,bsPrefix:e,spans:o}]}const ge=v.forwardRef((t,e)=>{const[{className:n,...s},{as:r="div",bsPrefix:i,spans:o}]=PU(t);return a.jsx(r,{...s,ref:e,className:ot(n,!o.length&&i)})});ge.displayName="Col";const rr=v.forwardRef(({bsPrefix:t,fluid:e=!1,as:n="div",className:s,...r},i)=>{const o=ut(t,"container"),c=typeof e=="string"?`-${e}`:"-fluid";return a.jsx(n,{ref:i,...r,className:ot(s,e?`${o}${c}`:o)})});rr.displayName="Container";var LU=Function.prototype.bind.call(Function.prototype.call,[].slice);function gi(t,e){return LU(t.querySelectorAll(e))}function WP(t,e,n){const s=v.useRef(t!==void 0),[r,i]=v.useState(e),o=t!==void 0,c=s.current;return s.current=o,!o&&c&&r!==e&&i(e),[o?t:r,v.useCallback((...u)=>{const[f,...m]=u;let h=n?.(f,...m);return i(f),h},[n])]}function YP(){const[,t]=v.useReducer(e=>e+1,0);return t}const sx=v.createContext(null);var CD=Object.prototype.hasOwnProperty;function ND(t,e,n){for(n of t.keys())if(Uf(n,e))return n}function Uf(t,e){var n,s,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((s=t.length)===e.length)for(;s--&&Uf(t[s],e[s]););return s===-1}if(n===Set){if(t.size!==e.size)return!1;for(s of t)if(r=s,r&&typeof r=="object"&&(r=ND(e,r),!r)||!e.has(r))return!1;return!0}if(n===Map){if(t.size!==e.size)return!1;for(s of t)if(r=s[0],r&&typeof r=="object"&&(r=ND(e,r),!r)||!Uf(s[1],e.get(r)))return!1;return!0}if(n===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(n===DataView){if((s=t.byteLength)===e.byteLength)for(;s--&&t.getInt8(s)===e.getInt8(s););return s===-1}if(ArrayBuffer.isView(t)){if((s=t.byteLength)===e.byteLength)for(;s--&&t[s]===e[s];);return s===-1}if(!n||typeof t=="object"){s=0;for(n in t)if(CD.call(t,n)&&++s&&!CD.call(e,n)||!(n in e)||!Uf(t[n],e[n]))return!1;return Object.keys(e).length===s}}return t!==t&&e!==e}function FU(t){const e=MP();return[t[0],v.useCallback(n=>{if(e())return t[1](n)},[e,t[1]])]}var tr="top",Ur="bottom",Wr="right",nr="left",Vw="auto",Wh=[tr,Ur,Wr,nr],xu="start",ch="end",BU="clippingParents",qP="viewport",cf="popper",IU="reference",kD=Wh.reduce(function(t,e){return t.concat([e+"-"+xu,e+"-"+ch])},[]),GP=[].concat(Wh,[Vw]).reduce(function(t,e){return t.concat([e,e+"-"+xu,e+"-"+ch])},[]),VU="beforeRead",zU="read",$U="afterRead",HU="beforeMain",UU="main",WU="afterMain",YU="beforeWrite",qU="write",GU="afterWrite",KU=[VU,zU,$U,HU,UU,WU,YU,qU,GU];function La(t){return t.split("-")[0]}function vr(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Yl(t){var e=vr(t).Element;return t instanceof e||t instanceof Element}function Fa(t){var e=vr(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function zw(t){if(typeof ShadowRoot>"u")return!1;var e=vr(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}var Pl=Math.max,Qg=Math.min,bu=Math.round;function X_(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function KP(){return!/^((?!chrome|android).)*safari/i.test(X_())}function vu(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var s=t.getBoundingClientRect(),r=1,i=1;e&&Fa(t)&&(r=t.offsetWidth>0&&bu(s.width)/t.offsetWidth||1,i=t.offsetHeight>0&&bu(s.height)/t.offsetHeight||1);var o=Yl(t)?vr(t):window,c=o.visualViewport,u=!KP()&&n,f=(s.left+(u&&c?c.offsetLeft:0))/r,m=(s.top+(u&&c?c.offsetTop:0))/i,h=s.width/r,g=s.height/i;return{width:h,height:g,top:m,right:f+h,bottom:m+g,left:f,x:f,y:m}}function $w(t){var e=vu(t),n=t.offsetWidth,s=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-s)<=1&&(s=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:s}}function QP(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&zw(n)){var s=e;do{if(s&&t.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function Eo(t){return t?(t.nodeName||"").toLowerCase():null}function Mi(t){return vr(t).getComputedStyle(t)}function QU(t){return["table","td","th"].indexOf(Eo(t))>=0}function zo(t){return((Yl(t)?t.ownerDocument:t.document)||window.document).documentElement}function rx(t){return Eo(t)==="html"?t:t.assignedSlot||t.parentNode||(zw(t)?t.host:null)||zo(t)}function DD(t){return!Fa(t)||Mi(t).position==="fixed"?null:t.offsetParent}function XU(t){var e=/firefox/i.test(X_()),n=/Trident/i.test(X_());if(n&&Fa(t)){var s=Mi(t);if(s.position==="fixed")return null}var r=rx(t);for(zw(r)&&(r=r.host);Fa(r)&&["html","body"].indexOf(Eo(r))<0;){var i=Mi(r);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||e&&i.willChange==="filter"||e&&i.filter&&i.filter!=="none")return r;r=r.parentNode}return null}function Yh(t){for(var e=vr(t),n=DD(t);n&&QU(n)&&Mi(n).position==="static";)n=DD(n);return n&&(Eo(n)==="html"||Eo(n)==="body"&&Mi(n).position==="static")?e:n||XU(t)||e}function Hw(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Wf(t,e,n){return Pl(t,Qg(e,n))}function ZU(t,e,n){var s=Wf(t,e,n);return s>n?n:s}function XP(){return{top:0,right:0,bottom:0,left:0}}function ZP(t){return Object.assign({},XP(),t)}function JP(t,e){return e.reduce(function(n,s){return n[s]=t,n},{})}var JU=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,ZP(typeof e!="number"?e:JP(e,Wh))};function e9(t){var e,n=t.state,s=t.name,r=t.options,i=n.elements.arrow,o=n.modifiersData.popperOffsets,c=La(n.placement),u=Hw(c),f=[nr,Wr].indexOf(c)>=0,m=f?"height":"width";if(!(!i||!o)){var h=JU(r.padding,n),g=$w(i),x=u==="y"?tr:nr,b=u==="y"?Ur:Wr,A=n.rects.reference[m]+n.rects.reference[u]-o[u]-n.rects.popper[m],_=o[u]-n.rects.reference[u],j=Yh(i),C=j?u==="y"?j.clientHeight||0:j.clientWidth||0:0,k=A/2-_/2,E=h[x],N=C-g[m]-h[b],L=C/2-g[m]/2+k,M=Wf(E,L,N),T=u;n.modifiersData[s]=(e={},e[T]=M,e.centerOffset=M-L,e)}}function t9(t){var e=t.state,n=t.options,s=n.element,r=s===void 0?"[data-popper-arrow]":s;r!=null&&(typeof r=="string"&&(r=e.elements.popper.querySelector(r),!r)||QP(e.elements.popper,r)&&(e.elements.arrow=r))}const n9={name:"arrow",enabled:!0,phase:"main",fn:e9,effect:t9,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function _u(t){return t.split("-")[1]}var s9={top:"auto",right:"auto",bottom:"auto",left:"auto"};function r9(t,e){var n=t.x,s=t.y,r=e.devicePixelRatio||1;return{x:bu(n*r)/r||0,y:bu(s*r)/r||0}}function ED(t){var e,n=t.popper,s=t.popperRect,r=t.placement,i=t.variation,o=t.offsets,c=t.position,u=t.gpuAcceleration,f=t.adaptive,m=t.roundOffsets,h=t.isFixed,g=o.x,x=g===void 0?0:g,b=o.y,A=b===void 0?0:b,_=typeof m=="function"?m({x,y:A}):{x,y:A};x=_.x,A=_.y;var j=o.hasOwnProperty("x"),C=o.hasOwnProperty("y"),k=nr,E=tr,N=window;if(f){var L=Yh(n),M="clientHeight",T="clientWidth";if(L===vr(n)&&(L=zo(n),Mi(L).position!=="static"&&c==="absolute"&&(M="scrollHeight",T="scrollWidth")),L=L,r===tr||(r===nr||r===Wr)&&i===ch){E=Ur;var O=h&&L===N&&N.visualViewport?N.visualViewport.height:L[M];A-=O-s.height,A*=u?1:-1}if(r===nr||(r===tr||r===Ur)&&i===ch){k=Wr;var I=h&&L===N&&N.visualViewport?N.visualViewport.width:L[T];x-=I-s.width,x*=u?1:-1}}var $=Object.assign({position:c},f&&s9),H=m===!0?r9({x,y:A},vr(n)):{x,y:A};if(x=H.x,A=H.y,u){var V;return Object.assign({},$,(V={},V[E]=C?"0":"",V[k]=j?"0":"",V.transform=(N.devicePixelRatio||1)<=1?"translate("+x+"px, "+A+"px)":"translate3d("+x+"px, "+A+"px, 0)",V))}return Object.assign({},$,(e={},e[E]=C?A+"px":"",e[k]=j?x+"px":"",e.transform="",e))}function a9(t){var e=t.state,n=t.options,s=n.gpuAcceleration,r=s===void 0?!0:s,i=n.adaptive,o=i===void 0?!0:i,c=n.roundOffsets,u=c===void 0?!0:c,f={placement:La(e.placement),variation:_u(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,ED(Object.assign({},f,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:u})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,ED(Object.assign({},f,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const i9={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:a9,data:{}};var Mp={passive:!0};function o9(t){var e=t.state,n=t.instance,s=t.options,r=s.scroll,i=r===void 0?!0:r,o=s.resize,c=o===void 0?!0:o,u=vr(e.elements.popper),f=[].concat(e.scrollParents.reference,e.scrollParents.popper);return i&&f.forEach(function(m){m.addEventListener("scroll",n.update,Mp)}),c&&u.addEventListener("resize",n.update,Mp),function(){i&&f.forEach(function(m){m.removeEventListener("scroll",n.update,Mp)}),c&&u.removeEventListener("resize",n.update,Mp)}}const l9={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:o9,data:{}};var c9={left:"right",right:"left",bottom:"top",top:"bottom"};function Cg(t){return t.replace(/left|right|bottom|top/g,function(e){return c9[e]})}var u9={start:"end",end:"start"};function TD(t){return t.replace(/start|end/g,function(e){return u9[e]})}function Uw(t){var e=vr(t),n=e.pageXOffset,s=e.pageYOffset;return{scrollLeft:n,scrollTop:s}}function Ww(t){return vu(zo(t)).left+Uw(t).scrollLeft}function d9(t,e){var n=vr(t),s=zo(t),r=n.visualViewport,i=s.clientWidth,o=s.clientHeight,c=0,u=0;if(r){i=r.width,o=r.height;var f=KP();(f||!f&&e==="fixed")&&(c=r.offsetLeft,u=r.offsetTop)}return{width:i,height:o,x:c+Ww(t),y:u}}function f9(t){var e,n=zo(t),s=Uw(t),r=(e=t.ownerDocument)==null?void 0:e.body,i=Pl(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=Pl(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),c=-s.scrollLeft+Ww(t),u=-s.scrollTop;return Mi(r||n).direction==="rtl"&&(c+=Pl(n.clientWidth,r?r.clientWidth:0)-i),{width:i,height:o,x:c,y:u}}function Yw(t){var e=Mi(t),n=e.overflow,s=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+s)}function eL(t){return["html","body","#document"].indexOf(Eo(t))>=0?t.ownerDocument.body:Fa(t)&&Yw(t)?t:eL(rx(t))}function Yf(t,e){var n;e===void 0&&(e=[]);var s=eL(t),r=s===((n=t.ownerDocument)==null?void 0:n.body),i=vr(s),o=r?[i].concat(i.visualViewport||[],Yw(s)?s:[]):s,c=e.concat(o);return r?c:c.concat(Yf(rx(o)))}function Z_(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function h9(t,e){var n=vu(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function MD(t,e,n){return e===qP?Z_(d9(t,n)):Yl(e)?h9(e,n):Z_(f9(zo(t)))}function m9(t){var e=Yf(rx(t)),n=["absolute","fixed"].indexOf(Mi(t).position)>=0,s=n&&Fa(t)?Yh(t):t;return Yl(s)?e.filter(function(r){return Yl(r)&&QP(r,s)&&Eo(r)!=="body"}):[]}function p9(t,e,n,s){var r=e==="clippingParents"?m9(t):[].concat(e),i=[].concat(r,[n]),o=i[0],c=i.reduce(function(u,f){var m=MD(t,f,s);return u.top=Pl(m.top,u.top),u.right=Qg(m.right,u.right),u.bottom=Qg(m.bottom,u.bottom),u.left=Pl(m.left,u.left),u},MD(t,o,s));return c.width=c.right-c.left,c.height=c.bottom-c.top,c.x=c.left,c.y=c.top,c}function tL(t){var e=t.reference,n=t.element,s=t.placement,r=s?La(s):null,i=s?_u(s):null,o=e.x+e.width/2-n.width/2,c=e.y+e.height/2-n.height/2,u;switch(r){case tr:u={x:o,y:e.y-n.height};break;case Ur:u={x:o,y:e.y+e.height};break;case Wr:u={x:e.x+e.width,y:c};break;case nr:u={x:e.x-n.width,y:c};break;default:u={x:e.x,y:e.y}}var f=r?Hw(r):null;if(f!=null){var m=f==="y"?"height":"width";switch(i){case xu:u[f]=u[f]-(e[m]/2-n[m]/2);break;case ch:u[f]=u[f]+(e[m]/2-n[m]/2);break}}return u}function uh(t,e){e===void 0&&(e={});var n=e,s=n.placement,r=s===void 0?t.placement:s,i=n.strategy,o=i===void 0?t.strategy:i,c=n.boundary,u=c===void 0?BU:c,f=n.rootBoundary,m=f===void 0?qP:f,h=n.elementContext,g=h===void 0?cf:h,x=n.altBoundary,b=x===void 0?!1:x,A=n.padding,_=A===void 0?0:A,j=ZP(typeof _!="number"?_:JP(_,Wh)),C=g===cf?IU:cf,k=t.rects.popper,E=t.elements[b?C:g],N=p9(Yl(E)?E:E.contextElement||zo(t.elements.popper),u,m,o),L=vu(t.elements.reference),M=tL({reference:L,element:k,placement:r}),T=Z_(Object.assign({},k,M)),O=g===cf?T:L,I={top:N.top-O.top+j.top,bottom:O.bottom-N.bottom+j.bottom,left:N.left-O.left+j.left,right:O.right-N.right+j.right},$=t.modifiersData.offset;if(g===cf&&$){var H=$[r];Object.keys(I).forEach(function(V){var G=[Wr,Ur].indexOf(V)>=0?1:-1,U=[tr,Ur].indexOf(V)>=0?"y":"x";I[V]+=H[U]*G})}return I}function g9(t,e){e===void 0&&(e={});var n=e,s=n.placement,r=n.boundary,i=n.rootBoundary,o=n.padding,c=n.flipVariations,u=n.allowedAutoPlacements,f=u===void 0?GP:u,m=_u(s),h=m?c?kD:kD.filter(function(b){return _u(b)===m}):Wh,g=h.filter(function(b){return f.indexOf(b)>=0});g.length===0&&(g=h);var x=g.reduce(function(b,A){return b[A]=uh(t,{placement:A,boundary:r,rootBoundary:i,padding:o})[La(A)],b},{});return Object.keys(x).sort(function(b,A){return x[b]-x[A]})}function y9(t){if(La(t)===Vw)return[];var e=Cg(t);return[TD(t),e,TD(e)]}function x9(t){var e=t.state,n=t.options,s=t.name;if(!e.modifiersData[s]._skip){for(var r=n.mainAxis,i=r===void 0?!0:r,o=n.altAxis,c=o===void 0?!0:o,u=n.fallbackPlacements,f=n.padding,m=n.boundary,h=n.rootBoundary,g=n.altBoundary,x=n.flipVariations,b=x===void 0?!0:x,A=n.allowedAutoPlacements,_=e.options.placement,j=La(_),C=j===_,k=u||(C||!b?[Cg(_)]:y9(_)),E=[_].concat(k).reduce(function(ae,te){return ae.concat(La(te)===Vw?g9(e,{placement:te,boundary:m,rootBoundary:h,padding:f,flipVariations:b,allowedAutoPlacements:A}):te)},[]),N=e.rects.reference,L=e.rects.popper,M=new Map,T=!0,O=E[0],I=0;I<E.length;I++){var $=E[I],H=La($),V=_u($)===xu,G=[tr,Ur].indexOf(H)>=0,U=G?"width":"height",R=uh(e,{placement:$,boundary:m,rootBoundary:h,altBoundary:g,padding:f}),P=G?V?Wr:nr:V?Ur:tr;N[U]>L[U]&&(P=Cg(P));var Z=Cg(P),ne=[];if(i&&ne.push(R[H]<=0),c&&ne.push(R[P]<=0,R[Z]<=0),ne.every(function(ae){return ae})){O=$,T=!1;break}M.set($,ne)}if(T)for(var D=b?3:1,B=function(te){var X=E.find(function(de){var Ne=M.get(de);if(Ne)return Ne.slice(0,te).every(function(Ke){return Ke})});if(X)return O=X,"break"},se=D;se>0;se--){var le=B(se);if(le==="break")break}e.placement!==O&&(e.modifiersData[s]._skip=!0,e.placement=O,e.reset=!0)}}const b9={name:"flip",enabled:!0,phase:"main",fn:x9,requiresIfExists:["offset"],data:{_skip:!1}};function RD(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function OD(t){return[tr,Wr,Ur,nr].some(function(e){return t[e]>=0})}function v9(t){var e=t.state,n=t.name,s=e.rects.reference,r=e.rects.popper,i=e.modifiersData.preventOverflow,o=uh(e,{elementContext:"reference"}),c=uh(e,{altBoundary:!0}),u=RD(o,s),f=RD(c,r,i),m=OD(u),h=OD(f);e.modifiersData[n]={referenceClippingOffsets:u,popperEscapeOffsets:f,isReferenceHidden:m,hasPopperEscaped:h},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":m,"data-popper-escaped":h})}const _9={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:v9};function A9(t,e,n){var s=La(t),r=[nr,tr].indexOf(s)>=0?-1:1,i=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=i[0],c=i[1];return o=o||0,c=(c||0)*r,[nr,Wr].indexOf(s)>=0?{x:c,y:o}:{x:o,y:c}}function w9(t){var e=t.state,n=t.options,s=t.name,r=n.offset,i=r===void 0?[0,0]:r,o=GP.reduce(function(m,h){return m[h]=A9(h,e.rects,i),m},{}),c=o[e.placement],u=c.x,f=c.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=u,e.modifiersData.popperOffsets.y+=f),e.modifiersData[s]=o}const j9={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:w9};function S9(t){var e=t.state,n=t.name;e.modifiersData[n]=tL({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const C9={name:"popperOffsets",enabled:!0,phase:"read",fn:S9,data:{}};function N9(t){return t==="x"?"y":"x"}function k9(t){var e=t.state,n=t.options,s=t.name,r=n.mainAxis,i=r===void 0?!0:r,o=n.altAxis,c=o===void 0?!1:o,u=n.boundary,f=n.rootBoundary,m=n.altBoundary,h=n.padding,g=n.tether,x=g===void 0?!0:g,b=n.tetherOffset,A=b===void 0?0:b,_=uh(e,{boundary:u,rootBoundary:f,padding:h,altBoundary:m}),j=La(e.placement),C=_u(e.placement),k=!C,E=Hw(j),N=N9(E),L=e.modifiersData.popperOffsets,M=e.rects.reference,T=e.rects.popper,O=typeof A=="function"?A(Object.assign({},e.rects,{placement:e.placement})):A,I=typeof O=="number"?{mainAxis:O,altAxis:O}:Object.assign({mainAxis:0,altAxis:0},O),$=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,H={x:0,y:0};if(L){if(i){var V,G=E==="y"?tr:nr,U=E==="y"?Ur:Wr,R=E==="y"?"height":"width",P=L[E],Z=P+_[G],ne=P-_[U],D=x?-T[R]/2:0,B=C===xu?M[R]:T[R],se=C===xu?-T[R]:-M[R],le=e.elements.arrow,ae=x&&le?$w(le):{width:0,height:0},te=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:XP(),X=te[G],de=te[U],Ne=Wf(0,M[R],ae[R]),Ke=k?M[R]/2-D-Ne-X-I.mainAxis:B-Ne-X-I.mainAxis,ce=k?-M[R]/2+D+Ne+de+I.mainAxis:se+Ne+de+I.mainAxis,xe=e.elements.arrow&&Yh(e.elements.arrow),Te=xe?E==="y"?xe.clientTop||0:xe.clientLeft||0:0,Ie=(V=$?.[E])!=null?V:0,Ue=P+Ke-Ie-Te,Ze=P+ce-Ie,mt=Wf(x?Qg(Z,Ue):Z,P,x?Pl(ne,Ze):ne);L[E]=mt,H[E]=mt-P}if(c){var gt,dt=E==="x"?tr:nr,Pe=E==="x"?Ur:Wr,q=L[N],oe=N==="y"?"height":"width",Ae=q+_[dt],He=q-_[Pe],We=[tr,nr].indexOf(j)!==-1,Ve=(gt=$?.[N])!=null?gt:0,ee=We?Ae:q-M[oe]-T[oe]-Ve+I.altAxis,De=We?q+M[oe]+T[oe]-Ve-I.altAxis:He,be=x&&We?ZU(ee,q,De):Wf(x?ee:Ae,q,x?De:He);L[N]=be,H[N]=be-q}e.modifiersData[s]=H}}const D9={name:"preventOverflow",enabled:!0,phase:"main",fn:k9,requiresIfExists:["offset"]};function E9(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function T9(t){return t===vr(t)||!Fa(t)?Uw(t):E9(t)}function M9(t){var e=t.getBoundingClientRect(),n=bu(e.width)/t.offsetWidth||1,s=bu(e.height)/t.offsetHeight||1;return n!==1||s!==1}function R9(t,e,n){n===void 0&&(n=!1);var s=Fa(e),r=Fa(e)&&M9(e),i=zo(e),o=vu(t,r,n),c={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(s||!s&&!n)&&((Eo(e)!=="body"||Yw(i))&&(c=T9(e)),Fa(e)?(u=vu(e,!0),u.x+=e.clientLeft,u.y+=e.clientTop):i&&(u.x=Ww(i))),{x:o.left+c.scrollLeft-u.x,y:o.top+c.scrollTop-u.y,width:o.width,height:o.height}}function O9(t){var e=new Map,n=new Set,s=[];t.forEach(function(i){e.set(i.name,i)});function r(i){n.add(i.name);var o=[].concat(i.requires||[],i.requiresIfExists||[]);o.forEach(function(c){if(!n.has(c)){var u=e.get(c);u&&r(u)}}),s.push(i)}return t.forEach(function(i){n.has(i.name)||r(i)}),s}function P9(t){var e=O9(t);return KU.reduce(function(n,s){return n.concat(e.filter(function(r){return r.phase===s}))},[])}function L9(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function F9(t){var e=t.reduce(function(n,s){var r=n[s.name];return n[s.name]=r?Object.assign({},r,s,{options:Object.assign({},r.options,s.options),data:Object.assign({},r.data,s.data)}):s,n},{});return Object.keys(e).map(function(n){return e[n]})}var PD={placement:"bottom",modifiers:[],strategy:"absolute"};function LD(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function B9(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,s=n===void 0?[]:n,r=e.defaultOptions,i=r===void 0?PD:r;return function(c,u,f){f===void 0&&(f=i);var m={placement:"bottom",orderedModifiers:[],options:Object.assign({},PD,i),modifiersData:{},elements:{reference:c,popper:u},attributes:{},styles:{}},h=[],g=!1,x={state:m,setOptions:function(j){var C=typeof j=="function"?j(m.options):j;A(),m.options=Object.assign({},i,m.options,C),m.scrollParents={reference:Yl(c)?Yf(c):c.contextElement?Yf(c.contextElement):[],popper:Yf(u)};var k=P9(F9([].concat(s,m.options.modifiers)));return m.orderedModifiers=k.filter(function(E){return E.enabled}),b(),x.update()},forceUpdate:function(){if(!g){var j=m.elements,C=j.reference,k=j.popper;if(LD(C,k)){m.rects={reference:R9(C,Yh(k),m.options.strategy==="fixed"),popper:$w(k)},m.reset=!1,m.placement=m.options.placement,m.orderedModifiers.forEach(function(I){return m.modifiersData[I.name]=Object.assign({},I.data)});for(var E=0;E<m.orderedModifiers.length;E++){if(m.reset===!0){m.reset=!1,E=-1;continue}var N=m.orderedModifiers[E],L=N.fn,M=N.options,T=M===void 0?{}:M,O=N.name;typeof L=="function"&&(m=L({state:m,options:T,name:O,instance:x})||m)}}}},update:L9(function(){return new Promise(function(_){x.forceUpdate(),_(m)})}),destroy:function(){A(),g=!0}};if(!LD(c,u))return x;x.setOptions(f).then(function(_){!g&&f.onFirstUpdate&&f.onFirstUpdate(_)});function b(){m.orderedModifiers.forEach(function(_){var j=_.name,C=_.options,k=C===void 0?{}:C,E=_.effect;if(typeof E=="function"){var N=E({state:m,name:j,instance:x,options:k}),L=function(){};h.push(N||L)}})}function A(){h.forEach(function(_){return _()}),h=[]}return x}}const I9=B9({defaultModifiers:[_9,C9,i9,l9,j9,b9,D9,n9]}),V9=["enabled","placement","strategy","modifiers"];function z9(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}const $9={name:"applyStyles",enabled:!1,phase:"afterWrite",fn:()=>{}},H9={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:({state:t})=>()=>{const{reference:e,popper:n}=t.elements;if("removeAttribute"in e){const s=(e.getAttribute("aria-describedby")||"").split(",").filter(r=>r.trim()!==n.id);s.length?e.setAttribute("aria-describedby",s.join(",")):e.removeAttribute("aria-describedby")}},fn:({state:t})=>{var e;const{popper:n,reference:s}=t.elements,r=(e=n.getAttribute("role"))==null?void 0:e.toLowerCase();if(n.id&&r==="tooltip"&&"setAttribute"in s){const i=s.getAttribute("aria-describedby");if(i&&i.split(",").indexOf(n.id)!==-1)return;s.setAttribute("aria-describedby",i?`${i},${n.id}`:n.id)}}},U9=[];function W9(t,e,n={}){let{enabled:s=!0,placement:r="bottom",strategy:i="absolute",modifiers:o=U9}=n,c=z9(n,V9);const u=v.useRef(o),f=v.useRef(),m=v.useCallback(()=>{var _;(_=f.current)==null||_.update()},[]),h=v.useCallback(()=>{var _;(_=f.current)==null||_.forceUpdate()},[]),[g,x]=FU(v.useState({placement:r,update:m,forceUpdate:h,attributes:{},styles:{popper:{},arrow:{}}})),b=v.useMemo(()=>({name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:({state:_})=>{const j={},C={};Object.keys(_.elements).forEach(k=>{j[k]=_.styles[k],C[k]=_.attributes[k]}),x({state:_,styles:j,attributes:C,update:m,forceUpdate:h,placement:_.placement})}}),[m,h,x]),A=v.useMemo(()=>(Uf(u.current,o)||(u.current=o),u.current),[o]);return v.useEffect(()=>{!f.current||!s||f.current.setOptions({placement:r,strategy:i,modifiers:[...A,b,$9]})},[i,r,b,s,A]),v.useEffect(()=>{if(!(!s||t==null||e==null))return f.current=I9(t,e,Object.assign({},c,{placement:r,strategy:i,modifiers:[...A,H9,b]})),()=>{f.current!=null&&(f.current.destroy(),f.current=void 0,x(_=>Object.assign({},_,{attributes:{},styles:{popper:{}}})))}},[s,t,e]),g}function Xg(t,e){if(t.contains)return t.contains(e);if(t.compareDocumentPosition)return t===e||!!(t.compareDocumentPosition(e)&16)}var A0,FD;function Y9(){if(FD)return A0;FD=1;var t=function(){};return A0=t,A0}var q9=Y9();const G9=Vu(q9),BD=()=>{};function K9(t){return t.button===0}function Q9(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}const w0=t=>t&&("current"in t?t.current:t),ID={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};function X9(t,e=BD,{disabled:n,clickTrigger:s="click"}={}){const r=v.useRef(!1),i=v.useRef(!1),o=v.useCallback(f=>{const m=w0(t);G9(!!m,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),r.current=!m||Q9(f)||!K9(f)||!!Xg(m,f.target)||i.current,i.current=!1},[t]),c=Es(f=>{const m=w0(t);m&&Xg(m,f.target)?i.current=!0:i.current=!1}),u=Es(f=>{r.current||e(f)});v.useEffect(()=>{var f,m;if(n||t==null)return;const h=zh(w0(t)),g=h.defaultView||window;let x=(f=g.event)!=null?f:(m=g.parent)==null?void 0:m.event,b=null;ID[s]&&(b=_o(h,ID[s],c,!0));const A=_o(h,s,o,!0),_=_o(h,s,C=>{if(C===x){x=void 0;return}u(C)});let j=[];return"ontouchstart"in h.documentElement&&(j=[].slice.call(h.body.children).map(C=>_o(C,"mousemove",BD))),()=>{b?.(),A(),_(),j.forEach(C=>C())}},[t,n,s,o,c,u])}function Z9(t){const e={};return Array.isArray(t)?(t?.forEach(n=>{e[n.name]=n}),e):t||e}function J9(t={}){return Array.isArray(t)?t:Object.keys(t).map(e=>(t[e].name=e,t[e]))}function eW({enabled:t,enableEvents:e,placement:n,flip:s,offset:r,fixed:i,containerPadding:o,arrowElement:c,popperConfig:u={}}){var f,m,h,g,x;const b=Z9(u.modifiers);return Object.assign({},u,{placement:n,enabled:t,strategy:i?"fixed":u.strategy,modifiers:J9(Object.assign({},b,{eventListeners:{enabled:e,options:(f=b.eventListeners)==null?void 0:f.options},preventOverflow:Object.assign({},b.preventOverflow,{options:o?Object.assign({padding:o},(m=b.preventOverflow)==null?void 0:m.options):(h=b.preventOverflow)==null?void 0:h.options}),offset:{options:Object.assign({offset:r},(g=b.offset)==null?void 0:g.options)},arrow:Object.assign({},b.arrow,{enabled:!!c,options:Object.assign({},(x=b.arrow)==null?void 0:x.options,{element:c})}),flip:Object.assign({enabled:!!s},b.flip)}))})}const tW=["children","usePopper"];function nW(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}const sW=()=>{};function nL(t={}){const e=v.useContext(sx),[n,s]=gU(),r=v.useRef(!1),{flip:i,offset:o,rootCloseEvent:c,fixed:u=!1,placement:f,popperConfig:m={},enableEventListeners:h=!0,usePopper:g=!!e}=t,x=e?.show==null?!!t.show:e.show;x&&!r.current&&(r.current=!0);const b=L=>{e?.toggle(!1,L)},{placement:A,setMenu:_,menuElement:j,toggleElement:C}=e||{},k=W9(C,j,eW({placement:f||A||"bottom-start",enabled:g,enableEvents:h??x,offset:o,flip:i,fixed:u,arrowElement:n,popperConfig:m})),E=Object.assign({ref:_||sW,"aria-labelledby":C?.id},k.attributes.popper,{style:k.styles.popper}),N={show:x,placement:A,hasShown:r.current,toggle:e?.toggle,popper:g?k:null,arrowProps:g?Object.assign({ref:s},k.attributes.arrow,{style:k.styles.arrow}):{}};return X9(j,b,{clickTrigger:c,disabled:!x}),[E,N]}function sL(t){let{children:e,usePopper:n=!0}=t,s=nW(t,tW);const[r,i]=nL(Object.assign({},s,{usePopper:n}));return a.jsx(a.Fragment,{children:e(r,i)})}sL.displayName="DropdownMenu";const rL={prefix:String(Math.round(Math.random()*1e10)),current:0},aL=fe.createContext(rL),rW=fe.createContext(!1);let j0=new WeakMap;function aW(t=!1){let e=v.useContext(aL),n=v.useRef(null);if(n.current===null&&!t){var s,r;let i=(r=fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||r===void 0||(s=r.ReactCurrentOwner)===null||s===void 0?void 0:s.current;if(i){let o=j0.get(i);o==null?j0.set(i,{id:e.current,state:i.memoizedState}):i.memoizedState!==o.state&&(e.current=o.id,j0.delete(i))}n.current=++e.current}return n.current}function iW(t){let e=v.useContext(aL),n=aW(!!t),s=`react-aria${e.prefix}`;return t||`${s}-${n}`}function oW(t){let e=fe.useId(),[n]=v.useState(dW()),s=n?"react-aria":`react-aria${rL.prefix}`;return t||`${s}-${e}`}const iL=typeof fe.useId=="function"?oW:iW;function lW(){return!1}function cW(){return!0}function uW(t){return()=>{}}function dW(){return typeof fe.useSyncExternalStore=="function"?fe.useSyncExternalStore(uW,lW,cW):v.useContext(rW)}const oL=t=>{var e;return((e=t.getAttribute("role"))==null?void 0:e.toLowerCase())==="menu"},VD=()=>{};function lL(){const t=iL(),{show:e=!1,toggle:n=VD,setToggle:s,menuElement:r}=v.useContext(sx)||{},i=v.useCallback(c=>{n(!e,c)},[e,n]),o={id:t,ref:s||VD,onClick:i,"aria-expanded":!!e};return r&&oL(r)&&(o["aria-haspopup"]=!0),[o,{show:e,toggle:n}]}function cL({children:t}){const[e,n]=lL();return a.jsx(a.Fragment,{children:t(e,n)})}cL.displayName="DropdownToggle";const Ri=v.createContext(null),To=(t,e=null)=>t!=null?String(t):e||null,ax=v.createContext(null);ax.displayName="NavContext";const fW="data-rr-ui-",hW="rrUi";function Qu(t){return`${fW}${t}`}function mW(t){return`${hW}${t}`}const pW=["eventKey","disabled","onClick","active","as"];function gW(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}function uL({key:t,href:e,active:n,disabled:s,onClick:r}){const i=v.useContext(Ri),o=v.useContext(ax),{activeKey:c}=o||{},u=To(t,e),f=n==null&&t!=null?To(c)===u:n;return[{onClick:Es(h=>{s||(r?.(h),i&&!h.isPropagationStopped()&&i(u,h))}),"aria-disabled":s||void 0,"aria-selected":f,[Qu("dropdown-item")]:""},{isActive:f}]}const dL=v.forwardRef((t,e)=>{let{eventKey:n,disabled:s,onClick:r,active:i,as:o=Fw}=t,c=gW(t,pW);const[u]=uL({key:n,href:c.href,disabled:s,onClick:r,active:i});return a.jsx(o,Object.assign({},c,{ref:e},u))});dL.displayName="DropdownItem";const fL=v.createContext(Ku?window:void 0);fL.Provider;function ix(){return v.useContext(fL)}function zD(){const t=YP(),e=v.useRef(null),n=v.useCallback(s=>{e.current=s,t()},[t]);return[e,n]}function qh({defaultShow:t,show:e,onSelect:n,onToggle:s,itemSelector:r=`* [${Qu("dropdown-item")}]`,focusFirstItemOnShow:i,placement:o="bottom-start",children:c}){const u=ix(),[f,m]=WP(e,t,s),[h,g]=zD(),x=h.current,[b,A]=zD(),_=b.current,j=RP(f),C=v.useRef(null),k=v.useRef(!1),E=v.useContext(Ri),N=v.useCallback(($,H,V=H?.type)=>{m($,{originalEvent:H,source:V})},[m]),L=Es(($,H)=>{n?.($,H),N(!1,H,"select"),H.isPropagationStopped()||E?.($,H)}),M=v.useMemo(()=>({toggle:N,placement:o,show:f,menuElement:x,toggleElement:_,setMenu:g,setToggle:A}),[N,o,f,x,_,g,A]);x&&j&&!f&&(k.current=x.contains(x.ownerDocument.activeElement));const T=Es(()=>{_&&_.focus&&_.focus()}),O=Es(()=>{const $=C.current;let H=i;if(H==null&&(H=h.current&&oL(h.current)?"keyboard":!1),H===!1||H==="keyboard"&&!/^key.+$/.test($))return;const V=gi(h.current,r)[0];V&&V.focus&&V.focus()});v.useEffect(()=>{f?O():k.current&&(k.current=!1,T())},[f,k,T,O]),v.useEffect(()=>{C.current=null});const I=($,H)=>{if(!h.current)return null;const V=gi(h.current,r);let G=V.indexOf($)+H;return G=Math.max(0,Math.min(G,V.length)),V[G]};return xU(v.useCallback(()=>u.document,[u]),"keydown",$=>{var H,V;const{key:G}=$,U=$.target,R=(H=h.current)==null?void 0:H.contains(U),P=(V=b.current)==null?void 0:V.contains(U);if(/input|textarea/i.test(U.tagName)&&(G===" "||G!=="Escape"&&R||G==="Escape"&&U.type==="search")||!R&&!P||G==="Tab"&&(!h.current||!f))return;C.current=$.type;const ne={originalEvent:$,source:$.type};switch(G){case"ArrowUp":{const D=I(U,-1);D&&D.focus&&D.focus(),$.preventDefault();return}case"ArrowDown":if($.preventDefault(),!f)m(!0,ne);else{const D=I(U,1);D&&D.focus&&D.focus()}return;case"Tab":Mw(U.ownerDocument,"keyup",D=>{var B;(D.key==="Tab"&&!D.target||!((B=h.current)!=null&&B.contains(D.target)))&&m(!1,ne)},{once:!0});break;case"Escape":G==="Escape"&&($.preventDefault(),$.stopPropagation()),m(!1,ne);break}}),a.jsx(Ri.Provider,{value:L,children:a.jsx(sx.Provider,{value:M,children:c})})}qh.displayName="Dropdown";qh.Menu=sL;qh.Toggle=cL;qh.Item=dL;const qw=v.createContext({});qw.displayName="DropdownContext";const hL=v.forwardRef(({className:t,bsPrefix:e,as:n="hr",role:s="separator",...r},i)=>(e=ut(e,"dropdown-divider"),a.jsx(n,{ref:i,className:ot(t,e),role:s,...r})));hL.displayName="DropdownDivider";const mL=v.forwardRef(({className:t,bsPrefix:e,as:n="div",role:s="heading",...r},i)=>(e=ut(e,"dropdown-header"),a.jsx(n,{ref:i,className:ot(t,e),role:s,...r})));mL.displayName="DropdownHeader";const pL=v.forwardRef(({bsPrefix:t,className:e,eventKey:n,disabled:s=!1,onClick:r,active:i,as:o=Uh,...c},u)=>{const f=ut(t,"dropdown-item"),[m,h]=uL({key:n,href:c.href,disabled:s,onClick:r,active:i});return a.jsx(o,{...c,...m,ref:u,className:ot(e,f,h.isActive&&"active",s&&"disabled")})});pL.displayName="DropdownItem";const gL=v.forwardRef(({className:t,bsPrefix:e,as:n="span",...s},r)=>(e=ut(e,"dropdown-item-text"),a.jsx(n,{ref:r,className:ot(t,e),...s})));gL.displayName="DropdownItemText";const yW=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",xW=typeof document<"u",bW=xW||yW?v.useLayoutEffect:v.useEffect,ox=v.createContext(null);ox.displayName="InputGroupContext";const Gw=v.createContext(null);Gw.displayName="NavbarContext";function yL(t,e){return t}function xL(t,e,n){const s=n?"top-end":"top-start",r=n?"top-start":"top-end",i=n?"bottom-end":"bottom-start",o=n?"bottom-start":"bottom-end",c=n?"right-start":"left-start",u=n?"right-end":"left-end",f=n?"left-start":"right-start",m=n?"left-end":"right-end";let h=t?o:i;return e==="up"?h=t?r:s:e==="end"?h=t?m:f:e==="start"?h=t?u:c:e==="down-centered"?h="bottom":e==="up-centered"&&(h="top"),h}const bL=v.forwardRef(({bsPrefix:t,className:e,align:n,rootCloseEvent:s,flip:r=!0,show:i,renderOnMount:o,as:c="div",popperConfig:u,variant:f,...m},h)=>{let g=!1;const x=v.useContext(Gw),b=ut(t,"dropdown-menu"),{align:A,drop:_,isRTL:j}=v.useContext(qw);n=n||A;const C=v.useContext(ox),k=[];if(n)if(typeof n=="object"){const $=Object.keys(n);if($.length){const H=$[0],V=n[H];g=V==="start",k.push(`${b}-${H}-${V}`)}}else n==="end"&&(g=!0);const E=xL(g,_,j),[N,{hasShown:L,popper:M,show:T,toggle:O}]=nL({flip:r,rootCloseEvent:s,show:i,usePopper:!x&&k.length===0,offset:[0,2],popperConfig:u,placement:E});if(N.ref=Jy(yL(h),N.ref),bW(()=>{T&&M?.update()},[T]),!L&&!o&&!C)return null;typeof c!="string"&&(N.show=T,N.close=()=>O?.(!1),N.align=n);let I=m.style;return M!=null&&M.placement&&(I={...m.style,...N.style},m["x-placement"]=M.placement),a.jsx(c,{...m,...N,style:I,...(k.length||x)&&{"data-bs-popper":"static"},className:ot(e,b,T&&"show",g&&`${b}-end`,f&&`${b}-${f}`,...k)})});bL.displayName="DropdownMenu";const vL=v.forwardRef(({bsPrefix:t,split:e,className:n,childBsPrefix:s,as:r=Fe,...i},o)=>{const c=ut(t,"dropdown-toggle"),u=v.useContext(sx);s!==void 0&&(i.bsPrefix=s);const[f]=lL();return f.ref=Jy(f.ref,yL(o)),a.jsx(r,{className:ot(n,c,e&&`${c}-split`,u?.show&&"show"),...f,...i})});vL.displayName="DropdownToggle";const _L=v.forwardRef((t,e)=>{const{bsPrefix:n,drop:s="down",show:r,className:i,align:o="start",onSelect:c,onToggle:u,focusFirstItemOnShow:f,as:m="div",navbar:h,autoClose:g=!0,...x}=Gu(t,{show:"onToggle"}),b=v.useContext(ox),A=ut(n,"dropdown"),_=bP(),j=M=>g===!1?M==="click":g==="inside"?M!=="rootClose":g==="outside"?M!=="select":!0,C=yu((M,T)=>{var O;!((O=T.originalEvent)==null||(O=O.target)==null)&&O.classList.contains("dropdown-toggle")&&T.source==="mousedown"||(T.originalEvent.currentTarget===document&&(T.source!=="keydown"||T.originalEvent.key==="Escape")&&(T.source="rootClose"),j(T.source)&&u?.(M,T))}),E=xL(o==="end",s,_),N=v.useMemo(()=>({align:o,drop:s,isRTL:_}),[o,s,_]),L={down:A,"down-centered":`${A}-center`,up:"dropup","up-centered":"dropup-center dropup",end:"dropend",start:"dropstart"};return a.jsx(qw.Provider,{value:N,children:a.jsx(qh,{placement:E,show:r,onSelect:c,onToggle:C,focusFirstItemOnShow:f,itemSelector:`.${A}-item:not(.disabled):not(:disabled)`,children:b?x.children:a.jsx(m,{...x,ref:e,className:ot(i,r&&"show",L[s])})})})});_L.displayName="Dropdown";const hl=Object.assign(_L,{Toggle:vL,Menu:bL,Item:pL,ItemText:gL,Divider:hL,Header:mL});Hn.string,Hn.bool,Hn.bool,Hn.bool,Hn.bool;const J_=v.forwardRef(({bsPrefix:t,className:e,fluid:n=!1,rounded:s=!1,roundedCircle:r=!1,thumbnail:i=!1,...o},c)=>(t=ut(t,"img"),a.jsx("img",{ref:c,...o,className:ot(e,n&&`${t}-fluid`,s&&"rounded",r&&"rounded-circle",i&&`${t}-thumbnail`)})));J_.displayName="Image";const vW={type:Hn.string,tooltip:Hn.bool,as:Hn.elementType},lx=v.forwardRef(({as:t="div",className:e,type:n="valid",tooltip:s=!1,...r},i)=>a.jsx(t,{...r,ref:i,className:ot(e,`${n}-${s?"tooltip":"feedback"}`)}));lx.displayName="Feedback";lx.propTypes=vW;const Oi=v.createContext({}),Gh=v.forwardRef(({id:t,bsPrefix:e,className:n,type:s="checkbox",isValid:r=!1,isInvalid:i=!1,as:o="input",...c},u)=>{const{controlId:f}=v.useContext(Oi);return e=ut(e,"form-check-input"),a.jsx(o,{...c,ref:u,type:s,id:t||f,className:ot(n,e,r&&"is-valid",i&&"is-invalid")})});Gh.displayName="FormCheckInput";const Zg=v.forwardRef(({bsPrefix:t,className:e,htmlFor:n,...s},r)=>{const{controlId:i}=v.useContext(Oi);return t=ut(t,"form-check-label"),a.jsx("label",{...s,ref:r,htmlFor:n||i,className:ot(e,t)})});Zg.displayName="FormCheckLabel";const AL=v.forwardRef(({id:t,bsPrefix:e,bsSwitchPrefix:n,inline:s=!1,reverse:r=!1,disabled:i=!1,isValid:o=!1,isInvalid:c=!1,feedbackTooltip:u=!1,feedback:f,feedbackType:m,className:h,style:g,title:x="",type:b="checkbox",label:A,children:_,as:j="input",...C},k)=>{e=ut(e,"form-check"),n=ut(n,"form-switch");const{controlId:E}=v.useContext(Oi),N=v.useMemo(()=>({controlId:t||E}),[E,t]),L=!_&&A!=null&&A!==!1||OU(_,Zg),M=a.jsx(Gh,{...C,type:b==="switch"?"checkbox":b,ref:k,isValid:o,isInvalid:c,disabled:i,as:j});return a.jsx(Oi.Provider,{value:N,children:a.jsx("div",{style:g,className:ot(h,L&&e,s&&`${e}-inline`,r&&`${e}-reverse`,b==="switch"&&n),children:_||a.jsxs(a.Fragment,{children:[M,L&&a.jsx(Zg,{title:x,children:A}),f&&a.jsx(lx,{type:m,tooltip:u,children:f})]})})})});AL.displayName="FormCheck";const Jg=Object.assign(AL,{Input:Gh,Label:Zg}),wL=v.forwardRef(({bsPrefix:t,type:e,size:n,htmlSize:s,id:r,className:i,isValid:o=!1,isInvalid:c=!1,plaintext:u,readOnly:f,as:m="input",...h},g)=>{const{controlId:x}=v.useContext(Oi);return t=ut(t,"form-control"),a.jsx(m,{...h,type:e,size:s,ref:g,readOnly:f,id:r||x,className:ot(i,u?`${t}-plaintext`:t,n&&`${t}-${n}`,e==="color"&&`${t}-color`,o&&"is-valid",c&&"is-invalid")})});wL.displayName="FormControl";const jL=Object.assign(wL,{Feedback:lx}),SL=v.forwardRef(({className:t,bsPrefix:e,as:n="div",...s},r)=>(e=ut(e,"form-floating"),a.jsx(n,{ref:r,className:ot(t,e),...s})));SL.displayName="FormFloating";const Kw=v.forwardRef(({controlId:t,as:e="div",...n},s)=>{const r=v.useMemo(()=>({controlId:t}),[t]);return a.jsx(Oi.Provider,{value:r,children:a.jsx(e,{...n,ref:s})})});Kw.displayName="FormGroup";const CL=v.forwardRef(({as:t="label",bsPrefix:e,column:n=!1,visuallyHidden:s=!1,className:r,htmlFor:i,...o},c)=>{const{controlId:u}=v.useContext(Oi);e=ut(e,"form-label");let f="col-form-label";typeof n=="string"&&(f=`${f} ${f}-${n}`);const m=ot(r,e,s&&"visually-hidden",n&&f);return i=i||u,n?a.jsx(ge,{ref:c,as:"label",className:m,htmlFor:i,...o}):a.jsx(t,{ref:c,className:m,htmlFor:i,...o})});CL.displayName="FormLabel";const NL=v.forwardRef(({bsPrefix:t,className:e,id:n,...s},r)=>{const{controlId:i}=v.useContext(Oi);return t=ut(t,"form-range"),a.jsx("input",{...s,type:"range",ref:r,className:ot(e,t),id:n||i})});NL.displayName="FormRange";const kL=v.forwardRef(({bsPrefix:t,size:e,htmlSize:n,className:s,isValid:r=!1,isInvalid:i=!1,id:o,...c},u)=>{const{controlId:f}=v.useContext(Oi);return t=ut(t,"form-select"),a.jsx("select",{...c,size:n,ref:u,className:ot(s,t,e&&`${t}-${e}`,r&&"is-valid",i&&"is-invalid"),id:o||f})});kL.displayName="FormSelect";const DL=v.forwardRef(({bsPrefix:t,className:e,as:n="small",muted:s,...r},i)=>(t=ut(t,"form-text"),a.jsx(n,{...r,ref:i,className:ot(e,t,s&&"text-muted")})));DL.displayName="FormText";const EL=v.forwardRef((t,e)=>a.jsx(Jg,{...t,ref:e,type:"switch"}));EL.displayName="Switch";const _W=Object.assign(EL,{Input:Jg.Input,Label:Jg.Label}),TL=v.forwardRef(({bsPrefix:t,className:e,children:n,controlId:s,label:r,...i},o)=>(t=ut(t,"form-floating"),a.jsxs(Kw,{ref:o,className:ot(e,t),controlId:s,...i,children:[n,a.jsx("label",{htmlFor:s,children:r})]})));TL.displayName="FloatingLabel";const AW={_ref:Hn.any,validated:Hn.bool,as:Hn.elementType},Qw=v.forwardRef(({className:t,validated:e,as:n="form",...s},r)=>a.jsx(n,{...s,ref:r,className:ot(t,e&&"was-validated")}));Qw.displayName="Form";Qw.propTypes=AW;const z=Object.assign(Qw,{Group:Kw,Control:jL,Floating:SL,Check:Jg,Switch:_W,Label:CL,Text:DL,Range:NL,Select:kL,FloatingLabel:TL}),cx=v.forwardRef(({className:t,bsPrefix:e,as:n="span",...s},r)=>(e=ut(e,"input-group-text"),a.jsx(n,{ref:r,className:ot(t,e),...s})));cx.displayName="InputGroupText";const wW=t=>a.jsx(cx,{children:a.jsx(Gh,{type:"checkbox",...t})}),jW=t=>a.jsx(cx,{children:a.jsx(Gh,{type:"radio",...t})}),ML=v.forwardRef(({bsPrefix:t,size:e,hasValidation:n,className:s,as:r="div",...i},o)=>{t=ut(t,"input-group");const c=v.useMemo(()=>({}),[]);return a.jsx(ox.Provider,{value:c,children:a.jsx(r,{ref:o,...i,className:ot(s,t,e&&`${t}-${e}`,n&&"has-validation")})})});ML.displayName="InputGroup";const hn=Object.assign(ML,{Text:cx,Radio:jW,Checkbox:wW}),$D=t=>!t||typeof t=="function"?t:e=>{t.current=e};function SW(t,e){const n=$D(t),s=$D(e);return r=>{n&&n(r),s&&s(r)}}function ux(t,e){return v.useMemo(()=>SW(t,e),[t,e])}const Xu=v.createContext(null),CW=["as","active","eventKey"];function NW(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}function Xw({key:t,onClick:e,active:n,id:s,role:r,disabled:i}){const o=v.useContext(Ri),c=v.useContext(ax),u=v.useContext(Xu);let f=n;const m={role:r};if(c){!r&&c.role==="tablist"&&(m.role="tab");const h=c.getControllerId(t??null),g=c.getControlledId(t??null);m[Qu("event-key")]=t,m.id=h||s,f=n==null&&t!=null?c.activeKey===t:n,(f||!(u!=null&&u.unmountOnExit)&&!(u!=null&&u.mountOnEnter))&&(m["aria-controls"]=g)}return m.role==="tab"&&(m["aria-selected"]=f,f||(m.tabIndex=-1),i&&(m.tabIndex=-1,m["aria-disabled"]=!0)),m.onClick=Es(h=>{i||(e?.(h),t!=null&&o&&!h.isPropagationStopped()&&o(t,h))}),[m,{isActive:f}]}const RL=v.forwardRef((t,e)=>{let{as:n=Fw,active:s,eventKey:r}=t,i=NW(t,CW);const[o,c]=Xw(Object.assign({key:To(r,i.href),active:s},i));return o[Qu("active")]=c.isActive,a.jsx(n,Object.assign({},i,o,{ref:e}))});RL.displayName="NavItem";const kW=["as","onSelect","activeKey","role","onKeyDown"];function DW(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}const HD=()=>{},UD=Qu("event-key"),OL=v.forwardRef((t,e)=>{let{as:n="div",onSelect:s,activeKey:r,role:i,onKeyDown:o}=t,c=DW(t,kW);const u=YP(),f=v.useRef(!1),m=v.useContext(Ri),h=v.useContext(Xu);let g,x;h&&(i=i||"tablist",r=h.activeKey,g=h.getControlledId,x=h.getControllerId);const b=v.useRef(null),A=k=>{const E=b.current;if(!E)return null;const N=gi(E,`[${UD}]:not([aria-disabled=true])`),L=E.querySelector("[aria-selected=true]");if(!L||L!==document.activeElement)return null;const M=N.indexOf(L);if(M===-1)return null;let T=M+k;return T>=N.length&&(T=0),T<0&&(T=N.length-1),N[T]},_=(k,E)=>{k!=null&&(s?.(k,E),m?.(k,E))},j=k=>{if(o?.(k),!h)return;let E;switch(k.key){case"ArrowLeft":case"ArrowUp":E=A(-1);break;case"ArrowRight":case"ArrowDown":E=A(1);break;default:return}E&&(k.preventDefault(),_(E.dataset[mW("EventKey")]||null,k),f.current=!0,u())};v.useEffect(()=>{if(b.current&&f.current){const k=b.current.querySelector(`[${UD}][aria-selected=true]`);k?.focus()}f.current=!1});const C=ux(e,b);return a.jsx(Ri.Provider,{value:_,children:a.jsx(ax.Provider,{value:{role:i,activeKey:To(r),getControlledId:g||HD,getControllerId:x||HD},children:a.jsx(n,Object.assign({},c,{onKeyDown:j,ref:C,role:i}))})})});OL.displayName="Nav";const PL=Object.assign(OL,{Item:RL}),LL=v.forwardRef(({bsPrefix:t,active:e,disabled:n,eventKey:s,className:r,variant:i,action:o,as:c,...u},f)=>{t=ut(t,"list-group-item");const[m,h]=Xw({key:To(s,u.href),active:e,...u}),g=yu(b=>{if(n){b.preventDefault(),b.stopPropagation();return}m.onClick(b)});n&&u.tabIndex===void 0&&(u.tabIndex=-1,u["aria-disabled"]=!0);const x=c||(o?u.href?"a":"button":"div");return a.jsx(x,{ref:f,...u,...m,onClick:g,className:ot(r,t,h.isActive&&"active",n&&"disabled",i&&`${t}-${i}`,o&&`${t}-action`)})});LL.displayName="ListGroupItem";const FL=v.forwardRef((t,e)=>{const{className:n,bsPrefix:s,variant:r,horizontal:i,numbered:o,as:c="div",...u}=Gu(t,{activeKey:"onSelect"}),f=ut(s,"list-group");let m;return i&&(m=i===!0?"horizontal":`horizontal-${i}`),a.jsx(PL,{ref:e,...u,as:c,className:ot(n,f,r&&`${f}-${r}`,m&&`${f}-${m}`,o&&`${f}-numbered`)})});FL.displayName="ListGroup";const Ll=Object.assign(FL,{Item:LL});var Rp;function WD(t){if((!Rp&&Rp!==0||t)&&Ku){var e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e),Rp=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return Rp}function EW(){return v.useState(null)}function S0(t){t===void 0&&(t=zh());try{var e=t.activeElement;return!e||!e.nodeName?null:e}catch{return t.body}}function TW(t){const e=v.useRef(t);return e.current=t,e}function MW(t){const e=TW(t);v.useEffect(()=>()=>e.current(),[])}function RW(t=document){const e=t.defaultView;return Math.abs(e.innerWidth-t.documentElement.clientWidth)}const YD=Qu("modal-open");class Zw{constructor({ownerDocument:e,handleContainerOverflow:n=!0,isRTL:s=!1}={}){this.handleContainerOverflow=n,this.isRTL=s,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return RW(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const n={overflow:"hidden"},s=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();e.style={overflow:r.style.overflow,[s]:r.style[s]},e.scrollBarWidth&&(n[s]=`${parseInt(Si(r,s)||"0",10)+e.scrollBarWidth}px`),r.setAttribute(YD,""),Si(r,n)}reset(){[...this.modals].forEach(e=>this.remove(e))}removeContainerStyle(e){const n=this.getElement();n.removeAttribute(YD),Object.assign(n.style,e.style)}add(e){let n=this.modals.indexOf(e);return n!==-1||(n=this.modals.length,this.modals.push(e),this.setModalAttributes(e),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(e){const n=this.modals.indexOf(e);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}const C0=(t,e)=>Ku?t==null?(e||zh()).body:(typeof t=="function"&&(t=t()),t&&"current"in t&&(t=t.current),t&&("nodeType"in t||t.getBoundingClientRect)?t:null):null;function OW(t,e){const n=ix(),[s,r]=v.useState(()=>C0(t,n?.document));if(!s){const i=C0(t);i&&r(i)}return v.useEffect(()=>{},[e,s]),v.useEffect(()=>{const i=C0(t);i!==s&&r(i)},[t,s]),s}function Jw({children:t,in:e,onExited:n,mountOnEnter:s,unmountOnExit:r}){const i=v.useRef(null),o=v.useRef(e),c=Es(n);v.useEffect(()=>{e?o.current=!0:c(i.current)},[e,c]);const u=ux(i,$h(t)),f=v.cloneElement(t,{ref:u});return e?f:r||!o.current&&s?null:f}const PW=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function LW(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}function FW(t){let{onEnter:e,onEntering:n,onEntered:s,onExit:r,onExiting:i,onExited:o,addEndListener:c,children:u}=t,f=LW(t,PW);const m=v.useRef(null),h=ux(m,$h(u)),g=E=>N=>{E&&m.current&&E(m.current,N)},x=v.useCallback(g(e),[e]),b=v.useCallback(g(n),[n]),A=v.useCallback(g(s),[s]),_=v.useCallback(g(r),[r]),j=v.useCallback(g(i),[i]),C=v.useCallback(g(o),[o]),k=v.useCallback(g(c),[c]);return Object.assign({},f,{nodeRef:m},e&&{onEnter:x},n&&{onEntering:b},s&&{onEntered:A},r&&{onExit:_},i&&{onExiting:j},o&&{onExited:C},c&&{addEndListener:k},{children:typeof u=="function"?(E,N)=>u(E,Object.assign({},N,{ref:h})):v.cloneElement(u,{ref:h})})}const BW=["component"];function IW(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}const VW=v.forwardRef((t,e)=>{let{component:n}=t,s=IW(t,BW);const r=FW(s);return a.jsx(n,Object.assign({ref:e},r))});function zW({in:t,onTransition:e}){const n=v.useRef(null),s=v.useRef(!0),r=Es(e);return jD(()=>{if(!n.current)return;let i=!1;return r({in:t,element:n.current,initial:s.current,isStale:()=>i}),()=>{i=!0}},[t,r]),jD(()=>(s.current=!1,()=>{s.current=!0}),[]),n}function $W({children:t,in:e,onExited:n,onEntered:s,transition:r}){const[i,o]=v.useState(!e);e&&i&&o(!1);const c=zW({in:!!e,onTransition:f=>{const m=()=>{f.isStale()||(f.in?s?.(f.element,f.initial):(o(!0),n?.(f.element)))};Promise.resolve(r(f)).then(m,h=>{throw f.in||o(!0),h})}}),u=ux(c,$h(t));return i&&!e?null:v.cloneElement(t,{ref:u})}function qD(t,e,n){return t?a.jsx(VW,Object.assign({},n,{component:t})):e?a.jsx($W,Object.assign({},n,{transition:e})):a.jsx(Jw,Object.assign({},n))}const HW=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function UW(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}let N0;function WW(t){return N0||(N0=new Zw({ownerDocument:t?.document})),N0}function YW(t){const e=ix(),n=t||WW(e),s=v.useRef({dialog:null,backdrop:null});return Object.assign(s.current,{add:()=>n.add(s.current),remove:()=>n.remove(s.current),isTopModal:()=>n.isTopModal(s.current),setDialogRef:v.useCallback(r=>{s.current.dialog=r},[]),setBackdropRef:v.useCallback(r=>{s.current.backdrop=r},[])})}const BL=v.forwardRef((t,e)=>{let{show:n=!1,role:s="dialog",className:r,style:i,children:o,backdrop:c=!0,keyboard:u=!0,onBackdropClick:f,onEscapeKeyDown:m,transition:h,runTransition:g,backdropTransition:x,runBackdropTransition:b,autoFocus:A=!0,enforceFocus:_=!0,restoreFocus:j=!0,restoreFocusOptions:C,renderDialog:k,renderBackdrop:E=Ze=>a.jsx("div",Object.assign({},Ze)),manager:N,container:L,onShow:M,onHide:T=()=>{},onExit:O,onExited:I,onExiting:$,onEnter:H,onEntering:V,onEntered:G}=t,U=UW(t,HW);const R=ix(),P=OW(L),Z=YW(N),ne=MP(),D=RP(n),[B,se]=v.useState(!n),le=v.useRef(null);v.useImperativeHandle(e,()=>Z,[Z]),Ku&&!D&&n&&(le.current=S0(R?.document)),n&&B&&se(!1);const ae=Es(()=>{if(Z.add(),ce.current=_o(document,"keydown",Ne),Ke.current=_o(document,"focus",()=>setTimeout(X),!0),M&&M(),A){var Ze,mt;const gt=S0((Ze=(mt=Z.dialog)==null?void 0:mt.ownerDocument)!=null?Ze:R?.document);Z.dialog&&gt&&!Xg(Z.dialog,gt)&&(le.current=gt,Z.dialog.focus())}}),te=Es(()=>{if(Z.remove(),ce.current==null||ce.current(),Ke.current==null||Ke.current(),j){var Ze;(Ze=le.current)==null||Ze.focus==null||Ze.focus(C),le.current=null}});v.useEffect(()=>{!n||!P||ae()},[n,P,ae]),v.useEffect(()=>{B&&te()},[B,te]),MW(()=>{te()});const X=Es(()=>{if(!_||!ne()||!Z.isTopModal())return;const Ze=S0(R?.document);Z.dialog&&Ze&&!Xg(Z.dialog,Ze)&&Z.dialog.focus()}),de=Es(Ze=>{Ze.target===Ze.currentTarget&&(f?.(Ze),c===!0&&T())}),Ne=Es(Ze=>{u&&rU(Ze)&&Z.isTopModal()&&(m?.(Ze),Ze.defaultPrevented||T())}),Ke=v.useRef(),ce=v.useRef(),xe=(...Ze)=>{se(!0),I?.(...Ze)};if(!P)return null;const Te=Object.assign({role:s,ref:Z.setDialogRef,"aria-modal":s==="dialog"?!0:void 0},U,{style:i,className:r,tabIndex:-1});let Ie=k?k(Te):a.jsx("div",Object.assign({},Te,{children:v.cloneElement(o,{role:"document"})}));Ie=qD(h,g,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:O,onExiting:$,onExited:xe,onEnter:H,onEntering:V,onEntered:G,children:Ie});let Ue=null;return c&&(Ue=E({ref:Z.setBackdropRef,onClick:de}),Ue=qD(x,b,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:Ue})),a.jsx(a.Fragment,{children:Sl.createPortal(a.jsxs(a.Fragment,{children:[Ue,Ie]}),P)})});BL.displayName="Modal";const qW=Object.assign(BL,{Manager:Zw});function GW(t,e){return t.classList?t.classList.contains(e):(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")!==-1}function KW(t,e){t.classList?t.classList.add(e):GW(t,e)||(typeof t.className=="string"?t.className=t.className+" "+e:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+e))}function GD(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function QW(t,e){t.classList?t.classList.remove(e):typeof t.className=="string"?t.className=GD(t.className,e):t.setAttribute("class",GD(t.className&&t.className.baseVal||"",e))}const Gc={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class XW extends Zw{adjustAndStore(e,n,s){const r=n.style[e];n.dataset[e]=r,Si(n,{[e]:`${parseFloat(Si(n,e))+s}px`})}restore(e,n){const s=n.dataset[e];s!==void 0&&(delete n.dataset[e],Si(n,{[e]:s}))}setContainerStyle(e){super.setContainerStyle(e);const n=this.getElement();if(KW(n,"modal-open"),!e.scrollBarWidth)return;const s=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";gi(n,Gc.FIXED_CONTENT).forEach(i=>this.adjustAndStore(s,i,e.scrollBarWidth)),gi(n,Gc.STICKY_CONTENT).forEach(i=>this.adjustAndStore(r,i,-e.scrollBarWidth)),gi(n,Gc.NAVBAR_TOGGLER).forEach(i=>this.adjustAndStore(r,i,e.scrollBarWidth))}removeContainerStyle(e){super.removeContainerStyle(e);const n=this.getElement();QW(n,"modal-open");const s=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";gi(n,Gc.FIXED_CONTENT).forEach(i=>this.restore(s,i)),gi(n,Gc.STICKY_CONTENT).forEach(i=>this.restore(r,i)),gi(n,Gc.NAVBAR_TOGGLER).forEach(i=>this.restore(r,i))}}let k0;function ZW(t){return k0||(k0=new XW(t)),k0}const IL=v.forwardRef(({className:t,bsPrefix:e,as:n="div",...s},r)=>(e=ut(e,"modal-body"),a.jsx(n,{ref:r,className:ot(t,e),...s})));IL.displayName="ModalBody";const VL=v.createContext({onHide(){}}),ej=v.forwardRef(({bsPrefix:t,className:e,contentClassName:n,centered:s,size:r,fullscreen:i,children:o,scrollable:c,...u},f)=>{t=ut(t,"modal");const m=`${t}-dialog`,h=typeof i=="string"?`${t}-fullscreen-${i}`:`${t}-fullscreen`;return a.jsx("div",{...u,ref:f,className:ot(m,e,r&&`${t}-${r}`,s&&`${m}-centered`,c&&`${m}-scrollable`,i&&h),children:a.jsx("div",{className:ot(`${t}-content`,n),children:o})})});ej.displayName="ModalDialog";const zL=v.forwardRef(({className:t,bsPrefix:e,as:n="div",...s},r)=>(e=ut(e,"modal-footer"),a.jsx(n,{ref:r,className:ot(t,e),...s})));zL.displayName="ModalFooter";const $L=v.forwardRef(({closeLabel:t="Close",closeVariant:e,closeButton:n=!1,onHide:s,children:r,...i},o)=>{const c=v.useContext(VL),u=yu(()=>{c?.onHide(),s?.()});return a.jsxs("div",{ref:o,...i,children:[r,n&&a.jsx(nx,{"aria-label":t,variant:e,onClick:u})]})});$L.displayName="AbstractModalHeader";const HL=v.forwardRef(({bsPrefix:t,className:e,closeLabel:n="Close",closeButton:s=!1,...r},i)=>(t=ut(t,"modal-header"),a.jsx($L,{ref:i,...r,className:ot(e,t),closeLabel:n,closeButton:s})));HL.displayName="ModalHeader";const JW=tx("h4"),UL=v.forwardRef(({className:t,bsPrefix:e,as:n=JW,...s},r)=>(e=ut(e,"modal-title"),a.jsx(n,{ref:r,className:ot(t,e),...s})));UL.displayName="ModalTitle";function e7(t){return a.jsx(Wl,{...t,timeout:null})}function t7(t){return a.jsx(Wl,{...t,timeout:null})}const WL=v.forwardRef(({bsPrefix:t,className:e,style:n,dialogClassName:s,contentClassName:r,children:i,dialogAs:o=ej,"data-bs-theme":c,"aria-labelledby":u,"aria-describedby":f,"aria-label":m,show:h=!1,animation:g=!0,backdrop:x=!0,keyboard:b=!0,onEscapeKeyDown:A,onShow:_,onHide:j,container:C,autoFocus:k=!0,enforceFocus:E=!0,restoreFocus:N=!0,restoreFocusOptions:L,onEntered:M,onExit:T,onExiting:O,onEnter:I,onEntering:$,onExited:H,backdropClassName:V,manager:G,...U},R)=>{const[P,Z]=v.useState({}),[ne,D]=v.useState(!1),B=v.useRef(!1),se=v.useRef(!1),le=v.useRef(null),[ae,te]=EW(),X=Jy(R,te),de=yu(j),Ne=bP();t=ut(t,"modal");const Ke=v.useMemo(()=>({onHide:de}),[de]);function ce(){return G||ZW({isRTL:Ne})}function xe(ee){if(!Ku)return;const De=ce().getScrollbarWidth()>0,be=ee.scrollHeight>zh(ee).documentElement.clientHeight;Z({paddingRight:De&&!be?WD():void 0,paddingLeft:!De&&be?WD():void 0})}const Te=yu(()=>{ae&&xe(ae.dialog)});MU(()=>{Q_(window,"resize",Te),le.current==null||le.current()});const Ie=()=>{B.current=!0},Ue=ee=>{B.current&&ae&&ee.target===ae.dialog&&(se.current=!0),B.current=!1},Ze=()=>{D(!0),le.current=_P(ae.dialog,()=>{D(!1)})},mt=ee=>{ee.target===ee.currentTarget&&Ze()},gt=ee=>{if(x==="static"){mt(ee);return}if(se.current||ee.target!==ee.currentTarget){se.current=!1;return}j?.()},dt=ee=>{b?A?.(ee):(ee.preventDefault(),x==="static"&&Ze())},Pe=(ee,De)=>{ee&&xe(ee),I?.(ee,De)},q=ee=>{le.current==null||le.current(),T?.(ee)},oe=(ee,De)=>{$?.(ee,De),Mw(window,"resize",Te)},Ae=ee=>{ee&&(ee.style.display=""),H?.(ee),Q_(window,"resize",Te)},He=v.useCallback(ee=>a.jsx("div",{...ee,className:ot(`${t}-backdrop`,V,!g&&"show")}),[g,V,t]),We={...n,...P};We.display="block";const Ve=ee=>a.jsx("div",{role:"dialog",...ee,style:We,className:ot(e,t,ne&&`${t}-static`,!g&&"show"),onClick:x?gt:void 0,onMouseUp:Ue,"data-bs-theme":c,"aria-label":m,"aria-labelledby":u,"aria-describedby":f,children:a.jsx(o,{...U,onMouseDown:Ie,className:s,contentClassName:r,children:i})});return a.jsx(VL.Provider,{value:Ke,children:a.jsx(qW,{show:h,ref:X,backdrop:x,container:C,keyboard:!0,autoFocus:k,enforceFocus:E,restoreFocus:N,restoreFocusOptions:L,onEscapeKeyDown:dt,onShow:_,onHide:j,onEnter:Pe,onEntering:oe,onEntered:M,onExit:q,onExiting:O,onExited:Ae,manager:ce(),transition:g?e7:void 0,backdropTransition:g?t7:void 0,renderBackdrop:He,renderDialog:Ve})})});WL.displayName="Modal";const wt=Object.assign(WL,{Body:IL,Header:HL,Title:UL,Footer:zL,Dialog:ej,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),tj=v.forwardRef(({className:t,bsPrefix:e,as:n="div",...s},r)=>(e=ut(e,"nav-item"),a.jsx(n,{ref:r,className:ot(t,e),...s})));tj.displayName="NavItem";const nj=v.forwardRef(({bsPrefix:t,className:e,as:n=Uh,active:s,eventKey:r,disabled:i=!1,...o},c)=>{t=ut(t,"nav-link");const[u,f]=Xw({key:To(r,o.href),active:s,disabled:i,...o});return a.jsx(n,{...o,...u,ref:c,disabled:i,className:ot(e,t,i&&"disabled",f.isActive&&"active")})});nj.displayName="NavLink";const YL=v.forwardRef((t,e)=>{const{as:n="div",bsPrefix:s,variant:r,fill:i=!1,justify:o=!1,navbar:c,navbarScroll:u,className:f,activeKey:m,...h}=Gu(t,{activeKey:"onSelect"}),g=ut(s,"nav");let x,b,A=!1;const _=v.useContext(Gw),j=v.useContext(Iw);return _?(x=_.bsPrefix,A=c??!0):j&&({cardHeaderBsPrefix:b}=j),a.jsx(PL,{as:n,ref:e,activeKey:m,className:ot(f,{[g]:!A,[`${x}-nav`]:A,[`${x}-nav-scroll`]:A&&u,[`${b}-${r}`]:!!b,[`${g}-${r}`]:!!r,[`${g}-fill`]:i,[`${g}-justified`]:o}),...h})});YL.displayName="Nav";const n7=Object.assign(YL,{Item:tj,Link:nj}),sj=v.forwardRef(({active:t=!1,disabled:e=!1,className:n,style:s,activeLabel:r="(current)",children:i,linkStyle:o,linkClassName:c,as:u=Uh,...f},m)=>{const h=t||e?"span":u;return a.jsx("li",{ref:m,style:s,className:ot(n,"page-item",{active:t,disabled:e}),children:a.jsxs(h,{className:ot("page-link",c),style:o,...f,children:[i,t&&r&&a.jsx("span",{className:"visually-hidden",children:r})]})})});sj.displayName="PageItem";function Kh(t,e,n=t){const s=v.forwardRef(({children:r,...i},o)=>a.jsxs(sj,{...i,ref:o,children:[a.jsx("span",{"aria-hidden":"true",children:r||e}),a.jsx("span",{className:"visually-hidden",children:n})]}));return s.displayName=t,s}const s7=Kh("First","«"),r7=Kh("Prev","‹","Previous"),a7=Kh("Ellipsis","…","More"),i7=Kh("Next","›"),o7=Kh("Last","»"),qL=v.forwardRef(({bsPrefix:t,className:e,size:n,...s},r)=>{const i=ut(t,"pagination");return a.jsx("ul",{ref:r,...s,className:ot(e,i,n&&`${i}-${n}`)})});qL.displayName="Pagination";const Op=Object.assign(qL,{First:s7,Prev:r7,Ellipsis:a7,Item:sj,Next:i7,Last:o7}),nt=v.forwardRef(({bsPrefix:t,className:e,as:n="div",...s},r)=>{const i=ut(t,"row"),o=Ew(),c=Tw(),u=`${i}-cols`,f=[];return o.forEach(m=>{const h=s[m];delete s[m];let g;h!=null&&typeof h=="object"?{cols:g}=h:g=h;const x=m!==c?`-${m}`:"";g!=null&&f.push(`${u}${x}-${g}`)}),a.jsx(n,{ref:r,...s,className:ot(e,i,...f)})});nt.displayName="Row";const Ot=v.forwardRef(({bsPrefix:t,variant:e,animation:n="border",size:s,as:r="div",className:i,...o},c)=>{t=ut(t,"spinner");const u=`${t}-${n}`;return a.jsx(r,{ref:c,...o,className:ot(i,u,s&&`${u}-${s}`,e&&`text-${e}`)})});Ot.displayName="Spinner";function l7(t,e=yP,n=xP){const s=[];return Object.entries(t).forEach(([r,i])=>{i!=null&&(typeof i=="object"?e.forEach(o=>{const c=i[o];if(c!=null){const u=o!==n?`-${o}`:"";s.push(`${r}${u}-${c}`)}}):s.push(`${r}-${i}`))}),s}const rj=v.forwardRef(({as:t="div",bsPrefix:e,className:n,direction:s,gap:r,...i},o)=>{e=ut(e,s==="horizontal"?"hstack":"vstack");const c=Ew(),u=Tw();return a.jsx(t,{...i,ref:o,className:ot(n,e,...l7({gap:r},c,u))})});rj.displayName="Stack";const c7=["active","eventKey","mountOnEnter","transition","unmountOnExit","role","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],u7=["activeKey","getControlledId","getControllerId"],d7=["as"];function eA(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}function GL(t){let{active:e,eventKey:n,mountOnEnter:s,transition:r,unmountOnExit:i,role:o="tabpanel",onEnter:c,onEntering:u,onEntered:f,onExit:m,onExiting:h,onExited:g}=t,x=eA(t,c7);const b=v.useContext(Xu);if(!b)return[Object.assign({},x,{role:o}),{eventKey:n,isActive:e,mountOnEnter:s,transition:r,unmountOnExit:i,onEnter:c,onEntering:u,onEntered:f,onExit:m,onExiting:h,onExited:g}];const{activeKey:A,getControlledId:_,getControllerId:j}=b,C=eA(b,u7),k=To(n);return[Object.assign({},x,{role:o,id:_(n),"aria-labelledby":j(n)}),{eventKey:n,isActive:e==null&&k!=null?To(A)===k:e,transition:r||C.transition,mountOnEnter:s??C.mountOnEnter,unmountOnExit:i??C.unmountOnExit,onEnter:c,onEntering:u,onEntered:f,onExit:m,onExiting:h,onExited:g}]}const KL=v.forwardRef((t,e)=>{let{as:n="div"}=t,s=eA(t,d7);const[r,{isActive:i,onEnter:o,onEntering:c,onEntered:u,onExit:f,onExiting:m,onExited:h,mountOnEnter:g,unmountOnExit:x,transition:b=Jw}]=GL(s);return a.jsx(Xu.Provider,{value:null,children:a.jsx(Ri.Provider,{value:null,children:a.jsx(b,{in:i,onEnter:o,onEntering:c,onEntered:u,onExit:f,onExiting:m,onExited:h,mountOnEnter:g,unmountOnExit:x,children:a.jsx(n,Object.assign({},r,{ref:e,hidden:!i,"aria-hidden":!i}))})})})});KL.displayName="TabPanel";const aj=t=>{const{id:e,generateChildId:n,onSelect:s,activeKey:r,defaultActiveKey:i,transition:o,mountOnEnter:c,unmountOnExit:u,children:f}=t,[m,h]=WP(r,i,s),g=iL(e),x=v.useMemo(()=>n||((A,_)=>g?`${g}-${_}-${A}`:null),[g,n]),b=v.useMemo(()=>({onSelect:h,activeKey:m,transition:o,mountOnEnter:c||!1,unmountOnExit:u||!1,getControlledId:A=>x(A,"tabpane"),getControllerId:A=>x(A,"tab")}),[h,m,o,c,u,x]);return a.jsx(Xu.Provider,{value:b,children:a.jsx(Ri.Provider,{value:h||null,children:f})})};aj.Panel=KL;function ij(t){return typeof t=="boolean"?t?Wl:Jw:t}const QL=({transition:t,...e})=>a.jsx(aj,{...e,transition:ij(t)});QL.displayName="TabContainer";const oj=v.forwardRef(({className:t,bsPrefix:e,as:n="div",...s},r)=>(e=ut(e,"tab-content"),a.jsx(n,{ref:r,className:ot(t,e),...s})));oj.displayName="TabContent";const lj=v.forwardRef(({bsPrefix:t,transition:e,...n},s)=>{const[{className:r,as:i="div",...o},{isActive:c,onEnter:u,onEntering:f,onEntered:m,onExit:h,onExiting:g,onExited:x,mountOnEnter:b,unmountOnExit:A,transition:_=Wl}]=GL({...n,transition:ij(e)}),j=ut(t,"tab-pane");return a.jsx(Xu.Provider,{value:null,children:a.jsx(Ri.Provider,{value:null,children:a.jsx(_,{in:c,onEnter:u,onEntering:f,onEntered:m,onExit:h,onExiting:g,onExited:x,mountOnEnter:b,unmountOnExit:A,children:a.jsx(i,{...o,ref:s,className:ot(r,j,c&&"active")})})})})});lj.displayName="TabPane";const f7={eventKey:Hn.oneOfType([Hn.string,Hn.number]),title:Hn.node.isRequired,disabled:Hn.bool,tabClassName:Hn.string,tabAttrs:Hn.object},XL=()=>{throw new Error("ReactBootstrap: The `Tab` component is not meant to be rendered! It's an abstract component that is only valid as a direct Child of the `Tabs` Component. For custom tabs components use TabPane and TabsContainer directly")};XL.propTypes=f7;const KD=Object.assign(XL,{Container:QL,Content:oj,Pane:lj}),vn=v.forwardRef(({bsPrefix:t,className:e,striped:n,bordered:s,borderless:r,hover:i,size:o,variant:c,responsive:u,...f},m)=>{const h=ut(t,"table"),g=ot(e,h,c&&`${h}-${c}`,o&&`${h}-${o}`,n&&`${h}-${typeof n=="string"?`striped-${n}`:"striped"}`,s&&`${h}-bordered`,r&&`${h}-borderless`,i&&`${h}-hover`),x=a.jsx("table",{...f,className:g,ref:m});if(u){let b=`${h}-responsive`;return typeof u=="string"&&(b=`${b}-${u}`),a.jsx("div",{className:b,children:x})}return x});vn.displayName="Table";function h7(t){let e;return RU(t,n=>{e==null&&(e=n.props.eventKey)}),e}function m7(t){const{title:e,eventKey:n,disabled:s,tabClassName:r,tabAttrs:i,id:o}=t.props;return e==null?null:a.jsx(tj,{as:"li",role:"presentation",children:a.jsx(nj,{as:"button",type:"button",eventKey:n,disabled:s,id:o,className:r,...i,children:e})})}const ZL=t=>{const{id:e,onSelect:n,transition:s,mountOnEnter:r=!1,unmountOnExit:i=!1,variant:o="tabs",children:c,activeKey:u=h7(c),...f}=Gu(t,{activeKey:"onSelect"});return a.jsxs(aj,{id:e,activeKey:u,onSelect:n,transition:ij(s),mountOnEnter:r,unmountOnExit:i,children:[a.jsx(n7,{id:e,...f,role:"tablist",as:"ul",variant:o,children:SD(c,m7)}),a.jsx(oj,{children:SD(c,m=>{const h={...m.props};return delete h.title,delete h.disabled,delete h.tabClassName,delete h.tabAttrs,a.jsx(lj,{...h})})})]})};ZL.displayName="Tabs";function p7(){const{notification:t}=Os();if(!t)return null;const e=t.type==="success",n=e?"text-bg-success":"text-bg-danger",s=e?"bi-check-circle-fill":"bi-exclamation-triangle-fill";return a.jsx("div",{className:"toast-container position-fixed bottom-0 end-0 p-3",style:{zIndex:1050},children:a.jsx("div",{className:`toast show ${n} rounded-lg shadow-lg`,role:"alert","aria-live":"assertive","aria-atomic":"true",children:a.jsxs("div",{className:"toast-body d-flex align-items-center",children:[a.jsx("i",{className:`bi ${s} me-2 fs-5`}),t.message]})})})}const Cs=({children:t,requiredRole:e=null,fallback:n=null})=>{const{user:s,loading:r,isAuthenticated:i,hasRole:o}=is(),c=ua();if(r)return a.jsxs("div",{className:"loading-container",children:[a.jsx("div",{className:"loading-spinner"}),a.jsx("p",{children:"Loading..."})]});if(!i)return a.jsx(Sz,{to:"/login",state:{from:c},replace:!0});if(e&&!(Array.isArray(e)?e.some(f=>o(f)):o(e))){if(n)return n;const f=Array.isArray(e)?e.join(" or "):e;return a.jsxs("div",{className:"access-denied",children:[a.jsx("h2",{children:"Access Denied"}),a.jsx("p",{children:"You don't have permission to access this page."}),a.jsxs("p",{children:["Required role: ",f]}),a.jsxs("p",{children:["Your role: ",s.role]})]})}return t},dx="/assets/orka_logo_transparent_background-CGVT_2Ps.png",g7=()=>{const{user:t,logout:e,canModifyProjects:n,canModifyProducts:s}=is(),[r,i]=v.useState(!1),[o,c]=v.useState(!1),u=v.useRef(null),f=ms(),m=async()=>{try{await e(),f("/login",{replace:!0})}catch(_){console.error("Logout error:",_),f("/login",{replace:!0})}},h=()=>{i(!r)},g=()=>{i(!1)},x=()=>{c(!o)},b=()=>{c(!1)};v.useEffect(()=>{const _=j=>{u.current&&!u.current.contains(j.target)&&g(),j.target.closest(".navbar")||b()};return document.addEventListener("mousedown",_),()=>{document.removeEventListener("mousedown",_)}},[]);const A=()=>{const _=[{to:"/",label:"Home",exact:!0},{to:"/clients",label:"Clients"}];return t&&(t.role==="admin"||t.role==="design"||t.role==="manager")&&_.push({to:"/projects",label:"Projects"}),t&&(t.role==="admin"||t.role==="sales"||t.role==="manager")&&_.push({to:"/products-admin",label:"Products"}),t&&t.role!=="sales"&&_.push({to:"/system-builder",label:"System Builder"}),t&&t.role!=="sales"&&_.push({to:"/load-profile-manager",label:"Load Profile Manager"}),_.push({to:"/tariffs",label:"Tariff Manager"}),t?.role==="admin"&&_.push({to:"/rules",label:"Engine Rules"},{to:"/admin",label:"Admin"}),_};return a.jsx("nav",{className:"navbar navbar-expand-lg navbar-light navbar-glass fixed-top",children:a.jsxs("div",{className:"container-fluid",children:[a.jsxs(as,{to:"/",className:"navbar-brand-group text-decoration-none",children:[a.jsx("img",{src:dx,alt:"Orka Logo",className:"navbar-logo"}),a.jsx("span",{children:"Orka Solar"})]}),a.jsx("button",{className:"navbar-toggler",type:"button",onClick:x,"aria-controls":"navbarNav","aria-expanded":o,"aria-label":"Toggle navigation",children:a.jsx("span",{className:"navbar-toggler-icon"})}),a.jsxs("div",{className:`navbar-collapse justify-content-center ${o?"show":"collapse"}`,id:"navbarNav",children:[a.jsx("div",{className:"position-absolute top-1 start-50 translate-middle-x",children:a.jsx("ul",{className:"navbar-nav",children:A().map(_=>a.jsx("li",{className:"nav-item",children:a.jsx(NO,{to:_.to,end:_.exact,className:({isActive:j})=>`nav-link navbar-link ${j?"active":""}`,onClick:b,children:_.label})},_.to))})}),t&&a.jsx("div",{className:"navbar-nav ms-auto",children:a.jsxs("div",{className:"nav-item dropdown",ref:u,children:[a.jsxs("button",{className:"nav-link dropdown-toggle d-flex align-items-center btn btn-link",type:"button",onClick:h,style:{border:"none",padding:"0.5rem 0.75rem"},children:[a.jsx("span",{className:"user-avatar me-2",children:t.first_name?t.first_name.charAt(0).toUpperCase():"U"}),a.jsx("span",{className:`role-badge ms-2 role-${t.role}`,children:t.role})]}),a.jsxs("ul",{className:`dropdown-menu dropdown-menu-end ${r?"show":""}`,children:[a.jsx("li",{children:a.jsx("span",{className:"dropdown-item-text",children:a.jsx("small",{children:t.email})})}),a.jsx("li",{children:a.jsx("hr",{className:"dropdown-divider"})}),a.jsx("li",{children:a.jsxs("button",{className:"dropdown-item",onClick:()=>{m(),g()},children:[a.jsx("i",{className:"bi bi-box-arrow-right me-2"}),"Sign Out"]})})]})]})})]})]})})},y7=()=>{const[t,e]=v.useState({email:"",password:""}),[n,s]=v.useState(""),[r,i]=v.useState(!1),o=ms(),{login:c,isAuthenticated:u,user:f}=is();v.useEffect(()=>{u&&f&&o("/")},[u,f,o]);const m=g=>{e({...t,[g.target.name]:g.target.value})},h=async g=>{g.preventDefault(),i(!0),s("");try{const x=await fetch(`${Ce}/api/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),b=await x.json();x.ok?(c(b.user,{access_token:b.access_token,refresh_token:b.refresh_token}),o("/")):s(b.message||"Login failed")}catch(x){s("Network error. Please try again."),console.error("Login error:",x)}finally{i(!1)}};return a.jsx("div",{className:"login-container",children:a.jsxs("div",{className:"login-card",children:[a.jsxs("div",{className:"login-header",children:[a.jsx("img",{src:"/orka_logo.png",alt:"Orka Solar",className:"login-logo"}),a.jsx("h2",{children:"Welcome to Orka Solar"}),a.jsx("p",{children:"Please sign in to your account"})]}),a.jsxs("form",{onSubmit:h,className:"login-form",children:[n&&a.jsx("div",{className:"error-message",children:n}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"email",children:"Email Address"}),a.jsx("input",{type:"email",id:"email",name:"email",value:t.email,onChange:m,required:!0,placeholder:"your.email@orkasolar.co.za",disabled:r})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"password",children:"Password"}),a.jsx("input",{type:"password",id:"password",name:"password",value:t.password,onChange:m,required:!0,placeholder:"Enter your password",disabled:r})]}),a.jsx("button",{type:"submit",className:"login-button",disabled:r,children:r?"Signing in...":"Sign In"})]}),a.jsxs("div",{className:"login-footer",children:[a.jsx("p",{children:"Only Orka Solar team members can access this system."}),a.jsxs("p",{children:["Need an account? ",a.jsx("a",{href:"/register",children:"Register with a token"})]})]})]})})},x7=()=>{const t=ms(),[e,n]=v.useState({email:"",password:"",confirmPassword:"",firstName:"",lastName:"",token:""}),[s,r]=v.useState(!1),[i,o]=v.useState(""),[c,u]=v.useState(""),f=g=>{n({...e,[g.target.name]:g.target.value}),o("")},m=g=>g.length<8?"Password must be at least 8 characters long":/[A-Z]/.test(g)?/[a-z]/.test(g)?/\d/.test(g)?"":"Password must contain at least one number":"Password must contain at least one lowercase letter":"Password must contain at least one uppercase letter",h=async g=>{if(g.preventDefault(),r(!0),o(""),e.password!==e.confirmPassword){o("Passwords do not match"),r(!1);return}const x=m(e.password);if(x){o(x),r(!1);return}try{const b=await fetch(`${Ce}/api/auth/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email,password:e.password,first_name:e.firstName,last_name:e.lastName,token:e.token.toUpperCase()})}),A=await b.json();b.ok?(u("Registration successful! You can now log in."),setTimeout(()=>{t("/login")},2e3)):o(A.message||"Registration failed")}catch(b){o("Network error. Please try again."),console.error("Registration error:",b)}finally{r(!1)}};return a.jsx("div",{className:"login-container",children:a.jsxs("div",{className:"login-card",children:[a.jsxs("div",{className:"login-header",children:[a.jsx("img",{src:"/orka_logo.png",alt:"Orka Solar",className:"login-logo"}),a.jsx("h2",{children:"Join Orka Solar"}),a.jsx("p",{children:"Register with your invitation token"})]}),a.jsxs("form",{onSubmit:h,className:"login-form",children:[i&&a.jsx("div",{className:"error-message",children:i}),c&&a.jsx("div",{className:"success-message",style:{color:"green",marginBottom:"15px"},children:c}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"token",children:"Registration Token"}),a.jsx("input",{type:"text",id:"token",name:"token",value:e.token,onChange:f,required:!0,placeholder:"Enter your 8-character token",maxLength:"8",style:{textTransform:"uppercase"},disabled:s})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"firstName",children:"First Name"}),a.jsx("input",{type:"text",id:"firstName",name:"firstName",value:e.firstName,onChange:f,required:!0,placeholder:"Your first name",disabled:s})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"lastName",children:"Last Name"}),a.jsx("input",{type:"text",id:"lastName",name:"lastName",value:e.lastName,onChange:f,required:!0,placeholder:"Your last name",disabled:s})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"email",children:"Email Address"}),a.jsx("input",{type:"email",id:"email",name:"email",value:e.email,onChange:f,required:!0,placeholder:"your.email@orkasolar.co.za",disabled:s})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"password",children:"Password"}),a.jsx("input",{type:"password",id:"password",name:"password",value:e.password,onChange:f,required:!0,placeholder:"Choose a strong password",disabled:s}),a.jsx("small",{style:{color:"#666",fontSize:"12px"},children:"At least 8 characters with uppercase, lowercase, and number"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),a.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:e.confirmPassword,onChange:f,required:!0,placeholder:"Confirm your password",disabled:s})]}),a.jsx("button",{type:"submit",className:"login-button",disabled:s,children:s?"Creating Account...":"Create Account"})]}),a.jsxs("div",{className:"login-footer",children:[a.jsxs("p",{children:["Already have an account? ",a.jsx("a",{href:"/login",children:"Sign in here"})]}),a.jsx("p",{children:"Contact your administrator if you need a registration token."})]})]})})},b7=()=>{const{user:t,loading:e}=is(),[n,s]=v.useState([]),[r,i]=v.useState([]),[o,c]=v.useState([]),[u,f]=v.useState("design"),[m,h]=v.useState(!0),[g,x]=v.useState(!1),[b,A]=v.useState(""),[_,j]=v.useState("users"),[C,k]=v.useState(!1),[E,N]=v.useState(!1),[L,M]=v.useState(null),[T,O]=v.useState(""),[I,$]=v.useState(!1),[H,V]=v.useState([]),[G,U]=v.useState([]),[R,P]=v.useState([]),[Z,ne]=v.useState([]),[D,B]=v.useState("vehicles"),[se,le]=v.useState(!1),[ae,te]=v.useState(!1),[X,de]=v.useState(!1),[Ne,Ke]=v.useState(!1),[ce,xe]=v.useState(!1),[Te,Ie]=v.useState(null),[Ue,Ze]=v.useState(null),[mt,gt]=v.useState(null),[dt,Pe]=v.useState(null),q=v.useCallback(()=>({Authorization:`Bearer ${localStorage.getItem("access_token")}`,"Content-Type":"application/json"}),[]),oe=v.useCallback(async()=>{te(!0);try{const K=await fetch(`${Ce}/api/vehicles`,{headers:q()});if(K.ok){const Qe=await K.json();V(Qe)}else A("Failed to fetch vehicles")}catch(K){console.error("Error fetching vehicles:",K),A("Error loading vehicles")}finally{te(!1)}},[q]),Ae=v.useCallback(async()=>{de(!0);try{const K=await fetch(`${Ce}/api/jobcategories`,{headers:q()});if(K.ok){const Qe=await K.json();U(Qe)}else A("Failed to fetch job categories")}catch(K){console.error("Error fetching job categories:",K),A("Error loading job categories")}finally{de(!1)}},[q]),He=v.useCallback(async()=>{Ke(!0);try{const K=await fetch(`${Ce}/api/auth/users?is_bum=1`,{headers:q()});if(K.ok){const Qe=await K.json();P(Qe)}else A("Failed to fetch BUMs")}catch(K){console.error("Error fetching BUMs:",K),A("Error loading BUMs")}finally{Ke(!1)}},[q]),We=v.useCallback(async()=>{le(!0);try{const K=await fetch(`${Ce}/api/auth/admin/users`,{headers:q()});if(K.ok){const Qe=await K.json();s(Qe.users)}else console.error("Failed to fetch users")}catch(K){console.error("Error fetching users:",K)}finally{le(!1)}},[q]),Ve=v.useCallback(async()=>{xe(!0);try{const K=await fetch(`${Ce}/api/technicians`,{headers:q()});if(K.ok){const Qe=await K.json();ne(Qe)}else A("Failed to fetch technicians")}catch(K){console.error("Error fetching technicians:",K),A("Error loading technicians")}finally{xe(!1)}},[q]);v.useEffect(()=>{_==="settings"&&(oe(),Ae(),He(),Ve())},[_,D,oe,Ae,He,Ve,We]);const ee=async K=>{try{const Qe=K.id?"PUT":"POST",Je=K.id?`${Ce}/api/vehicles/${K.id}`:`${Ce}/api/vehicles`,rt=await fetch(Je,{method:Qe,headers:q(),body:JSON.stringify(K)});if(rt.ok)A(`Vehicle ${K.id?"updated":"added"} successfully`),oe(),Ie(null);else{const bt=await rt.json();A(bt.message||`Failed to ${K.id?"update":"add"} vehicle`)}}catch(Qe){console.error(`Error ${K.id?"updating":"adding"} vehicle:`,Qe),A(`Error ${K.id?"updating":"adding"} vehicle`)}},De=async K=>{if(confirm("Are you sure you want to delete this vehicle?"))try{const Qe=await fetch(`${Ce}/api/vehicles/${K}`,{method:"DELETE",headers:q()});if(Qe.ok)A("Vehicle deleted successfully"),oe();else{const Je=await Qe.json();A(Je.message||"Failed to delete vehicle")}}catch(Qe){console.error("Error deleting vehicle:",Qe),A("Error deleting vehicle")}},be=async K=>{try{const Qe=K.id?"PUT":"POST",Je=K.id?`${Ce}/api/jobcategories/${K.id}`:`${Ce}/api/jobcategories`,rt=await fetch(Je,{method:Qe,headers:q(),body:JSON.stringify(K)});if(rt.ok)A(`Category ${K.id?"updated":"added"} successfully`),Ae(),Ze(null);else{const bt=await rt.json();A(bt.message||`Failed to ${K.id?"update":"add"} category`)}}catch(Qe){console.error(`Error ${K.id?"updating":"adding"} category:`,Qe),A(`Error ${K.id?"updating":"adding"} category`)}},J=async K=>{if(confirm("Are you sure you want to delete this category? This may affect existing job cards."))try{const Qe=await fetch(`${Ce}/api/jobcategories/${K}`,{method:"DELETE",headers:q()});if(Qe.ok)A("Category deleted successfully"),Ae();else{const Je=await Qe.json();A(Je.message||"Failed to delete category")}}catch(Qe){console.error("Error deleting category:",Qe),A("Error deleting category")}},ie=async(K,Qe)=>{try{if(!n.find(bt=>bt.id===K)){A("User not found");return}const rt=await fetch(`${Ce}/api/auth/admin/users/${K}/update-bum-status`,{method:"POST",headers:q(),body:JSON.stringify({is_bum:!Qe})});if(rt.ok)A(`User ${Qe?"removed from":"set as"} BUM successfully`),setTimeout(()=>{He(),We()},300);else{const bt=await rt.json();A(bt.message||"Failed to update BUM status")}}catch(Je){console.error("Error updating BUM status:",Je),A("Error updating BUM status")}},Be=async K=>{try{console.log("Saving technician:",K);const Qe=K.tech_profile_id?"PUT":"POST",Je=K.tech_profile_id?`${Ce}/api/technicians/${K.tech_profile_id}`:`${Ce}/api/technicians`,rt={user_id:K.user_id,hourly_rate:parseFloat(K.hourly_rate),active:K.active};K.tech_profile_id&&(rt.id=K.tech_profile_id);const bt=await fetch(Je,{method:Qe,headers:q(),body:JSON.stringify(rt)});if(bt.ok)A(`Technician ${K.tech_profile_id?"updated":"added"} successfully`),Ve(),Pe(null);else{const jt=await bt.json();A(jt.message||`Failed to ${K.tech_profile_id?"update":"add"} technician`)}}catch(Qe){console.error(`Error ${K.tech_profile_id?"updating":"adding"} technician:`,Qe),A(`Error ${K.tech_profile_id?"updating":"adding"} technician`)}},$e=async K=>{if(confirm("Are you sure you want to remove this technician profile?"))try{const Qe=await fetch(`${Ce}/api/technicians/${K}`,{method:"DELETE",headers:q()});if(Qe.ok)A("Technician profile removed successfully"),Ve();else{const Je=await Qe.json();A(Je.message||"Failed to remove technician profile")}}catch(Qe){console.error("Error removing technician profile:",Qe),A("Error removing technician profile")}},Y=v.useCallback(async()=>{try{const K=await fetch(`${Ce}/api/auth/admin/audit-logs`,{headers:q()});if(K.ok){const Qe=await K.json();i(Qe.logs)}else console.error("Failed to fetch audit logs")}catch(K){console.error("Error fetching audit logs:",K)}},[q]),pe=v.useCallback(async()=>{try{const K=await fetch(`${Ce}/api/auth/admin/tokens`,{headers:q()});if(K.ok){const Qe=await K.json();c(Qe.tokens)}else console.error("Failed to fetch registration tokens")}catch(K){console.error("Error fetching registration tokens:",K)}},[q]);v.useEffect(()=>{(async()=>{t&&t.role==="admin"&&!e&&(h(!0),await Promise.all([We(),Y(),pe()])),h(!1)})()},[We,Y,pe,t,e]);const we=async K=>{K.preventDefault(),x(!0),A("");try{const Qe=await fetch(`${Ce}/api/auth/admin/generate-token`,{method:"POST",headers:q(),body:JSON.stringify({role:u})}),Je=await Qe.json();Qe.ok?(A(`Registration token generated: ${Je.token} (Role: ${Je.role}, Expires: ${new Date(Je.expires_at).toLocaleDateString()})`),pe(),f("design")):A(Je.message||"Failed to generate token")}catch(Qe){A("Error generating token"),console.error("Error:",Qe)}finally{x(!1)}},ze=async(K,Qe)=>{const Je=Qe?"deactivate":"activate";try{const rt=await fetch(`${Ce}/api/auth/admin/users/${K}/${Je}`,{method:"POST",headers:q()});if(rt.ok)We(),A(`User ${Je}d successfully`);else{const bt=await rt.json();A(bt.message||`Failed to ${Je} user`)}}catch(rt){A(`Error ${Je}ing user`),console.error("Error:",rt)}},ve=async()=>{if(L){$(!0);try{const K=await fetch(`${Ce}/api/auth/admin/users/${L.id}/delete`,{method:"DELETE",headers:q()});if(K.ok)We(),A(`User ${L.email} deleted successfully`),k(!1),M(null);else{const Qe=await K.json();A(Qe.message||"Failed to delete user")}}catch(K){A("Error deleting user"),console.error("Error:",K)}finally{$(!1)}}},Le=async()=>{if(!(!L||!T)){$(!0);try{const K=await fetch(`${Ce}/api/auth/admin/users/${L.id}/role`,{method:"PUT",headers:q(),body:JSON.stringify({role:T})});if(K.ok)We(),A("User role changed successfully"),N(!1),M(null),O("");else{const Qe=await K.json();A(Qe.message||"Failed to change user role")}}catch(K){A("Error changing user role"),console.error("Error:",K)}finally{$(!1)}}},ye=K=>{M(K),k(!0)},Ee=K=>{M(K),O(K.role),N(!0)},Q=()=>{k(!1),N(!1),M(null),O("")},he=K=>new Date(K).toLocaleString(),qe=K=>{switch(K){case"admin":return"role-admin";case"manager":return"role-manager";case"sales":return"role-sales";case"design":return"role-design";case"team_leader":return"role-team-leader";case"technician":return"role-technician";default:return"role-default"}};return e||m?a.jsxs("div",{className:"loading-container",children:[a.jsx("div",{className:"loading-spinner"}),a.jsx("p",{children:"Loading admin dashboard..."})]}):a.jsxs("div",{className:"admin-dashboard",children:[a.jsxs("div",{className:"admin-header",children:[a.jsx("h1",{children:"Admin Dashboard"}),a.jsxs("p",{children:["Welcome, ",t.first_name]})]}),a.jsxs("div",{className:"admin-tabs",children:[a.jsx("button",{className:`tab-button ${_==="settings"?"active":""}`,onClick:()=>j("settings"),children:"System Settings"}),a.jsx("button",{className:`tab-button ${_==="users"?"active":""}`,onClick:()=>j("users"),children:"User Management"}),a.jsx("button",{className:`tab-button ${_==="tokens"?"active":""}`,onClick:()=>j("tokens"),children:"Registration Tokens"}),a.jsx("button",{className:`tab-button ${_==="logs"?"active":""}`,onClick:()=>j("logs"),children:"Audit Logs"})]}),b&&a.jsx("div",{className:`message ${b.includes("Error")||b.includes("Failed")?"error":"success"}`,children:b}),_==="settings"&&a.jsxs("div",{className:"settings-section",children:[a.jsxs("div",{className:"settings-header",children:[a.jsx("h2",{children:"System Settings"}),a.jsxs("div",{className:"settings-nav",children:[a.jsxs("button",{className:`settings-nav-btn ${D==="vehicles"?"active":""}`,onClick:()=>B("vehicles"),children:[a.jsx("i",{className:"bi bi-truck me-2"}),"Vehicles"]}),a.jsxs("button",{className:`settings-nav-btn ${D==="categories"?"active":""}`,onClick:()=>B("categories"),children:[a.jsx("i",{className:"bi bi-tags me-2"}),"Job Categories"]}),a.jsxs("button",{className:`settings-nav-btn ${D==="bums"?"active":""}`,onClick:()=>B("bums"),children:[a.jsx("i",{className:"bi bi-person-badge me-2"}),"Business Unit Managers"]}),a.jsxs("button",{className:`settings-nav-btn ${D==="technicians"?"active":""}`,onClick:()=>B("technicians"),children:[a.jsx("i",{className:"bi bi-tools me-2"}),"Technicians"]})]})]}),D==="vehicles"&&a.jsxs("div",{className:"vehicles-section",children:[a.jsxs("div",{className:"section-header",children:[a.jsx("h3",{children:"Vehicles Management"}),a.jsx("button",{className:"add-btn",onClick:()=>Ie({name:"",registration:"",rate_per_km:0,active:!0}),children:"Add New Vehicle"})]}),ae?a.jsx("div",{className:"loading",children:"Loading vehicles..."}):a.jsxs("table",{className:"settings-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Registration"}),a.jsx("th",{children:"Rate (per km)"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Actions"})]})}),a.jsxs("tbody",{children:[H.map(K=>a.jsxs("tr",{children:[a.jsx("td",{children:K.name}),a.jsx("td",{children:K.registration||"-"}),a.jsxs("td",{children:["R",K.rate_per_km.toFixed(2)]}),a.jsx("td",{children:a.jsx("span",{className:`status-badge ${K.active?"active":"inactive"}`,children:K.active?"Active":"Inactive"})}),a.jsxs("td",{children:[a.jsx("button",{className:"action-button edit",onClick:()=>Ie(K),children:"Edit"}),a.jsx("button",{className:"action-button delete",onClick:()=>De(K.id),children:"Delete"})]})]},K.id)),H.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:"5",className:"no-data",children:"No vehicles found"})})]})]}),Te&&a.jsx("div",{className:"modal-overlay",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h3",{children:Te.id?"Edit Vehicle":"Add New Vehicle"}),a.jsx("button",{className:"modal-close",onClick:()=>Ie(null),children:"×"})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:K=>{K.preventDefault(),ee(Te)},children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Name"}),a.jsx("input",{type:"text",value:Te.name,onChange:K=>Ie({...Te,name:K.target.value}),required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Registration"}),a.jsx("input",{type:"text",value:Te.registration||"",onChange:K=>Ie({...Te,registration:K.target.value})})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Rate per km (R)"}),a.jsx("div",{className:"field-description",children:"The rate charged per kilometer traveled"}),a.jsx("input",{type:"number",step:"0.01",min:"0",value:Te.rate_per_km,onChange:K=>Ie({...Te,rate_per_km:parseFloat(K.target.value)}),required:!0})]}),a.jsxs("div",{className:"form-group checkbox",children:[a.jsx("input",{type:"checkbox",checked:Te.active,onChange:K=>Ie({...Te,active:K.target.checked}),id:"vehicle-active"}),a.jsx("label",{htmlFor:"vehicle-active",children:"Active"})]})]})}),a.jsxs("div",{className:"modal-actions",children:[a.jsx("button",{type:"button",className:"cancel-btn",onClick:()=>Ie(null),children:"Cancel"}),a.jsx("button",{className:"save-btn",onClick:()=>ee(Te),children:Te.id?"Update Vehicle":"Add Vehicle"})]})]})})]}),D==="categories"&&a.jsxs("div",{className:"categories-section",children:[a.jsxs("div",{className:"section-header",children:[a.jsx("h3",{children:"Job Categories Management"}),a.jsx("button",{className:"add-btn",onClick:()=>Ze({name:"",active:!0}),children:"Add New Category"})]}),X?a.jsx("div",{className:"loading",children:"Loading categories..."}):a.jsxs("table",{className:"settings-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Actions"})]})}),a.jsxs("tbody",{children:[G.map(K=>a.jsxs("tr",{children:[a.jsx("td",{children:K.name}),a.jsx("td",{children:a.jsx("span",{className:`status-badge ${K.active?"active":"inactive"}`,children:K.active?"Active":"Inactive"})}),a.jsxs("td",{children:[a.jsx("button",{className:"action-button edit",onClick:()=>Ze(K),children:"Edit"}),a.jsx("button",{className:"action-button delete",onClick:()=>J(K.id),children:"Delete"})]})]},K.id)),G.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:"3",className:"no-data",children:"No categories found"})})]})]}),Ue&&a.jsx("div",{className:"modal-overlay",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h3",{children:Ue.id?"Edit Category":"Add New Category"}),a.jsx("button",{className:"modal-close",onClick:()=>Ze(null),children:"×"})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Name"}),a.jsx("input",{type:"text",value:Ue.name,onChange:K=>Ze({...Ue,name:K.target.value}),required:!0})]}),a.jsxs("div",{className:"form-group checkbox",children:[a.jsx("input",{type:"checkbox",id:"category-active",checked:Ue.active,onChange:K=>Ze({...Ue,active:K.target.checked})}),a.jsx("label",{htmlFor:"category-active",children:"Active"})]})]}),a.jsxs("div",{className:"modal-actions",children:[a.jsx("button",{type:"button",className:"cancel-btn",onClick:()=>Ze(null),children:"Cancel"}),a.jsx("button",{className:"save-btn",onClick:()=>be(Ue),children:Ue.id?"Update Category":"Add Category"})]})]})})]}),D==="bums"&&a.jsxs("div",{className:"bums-section",children:[a.jsxs("div",{className:"section-header",children:[a.jsx("h3",{children:"Business Unit Managers (BUMs)"}),a.jsx("p",{className:"info-text",children:"To add a new BUM, first add them as a user, then assign the BUM role here."})]}),a.jsxs("div",{className:"bums-users-section",children:[a.jsx("h4",{children:"Current BUMs"}),Ne?a.jsx("div",{className:"loading",children:"Loading BUMs..."}):a.jsxs("table",{className:"settings-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Email"}),a.jsx("th",{children:"Actions"})]})}),a.jsxs("tbody",{children:[R.map(K=>a.jsxs("tr",{children:[a.jsx("td",{children:K.full_name}),a.jsx("td",{children:K.email}),a.jsx("td",{children:a.jsx("button",{className:"action-button remove",onClick:()=>ie(K.id,!0),children:"Remove BUM Status"})})]},K.id)),R.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:"3",className:"no-data",children:"No BUMs assigned"})})]})]})]}),a.jsxs("div",{className:"eligible-users-section",children:[a.jsx("h4",{children:"Assign BUM Role to Users"}),se?a.jsx("div",{className:"loading",children:"Loading users..."}):a.jsxs("table",{className:"settings-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Email"}),a.jsx("th",{children:"Role"}),a.jsx("th",{children:"Actions"})]})}),a.jsxs("tbody",{children:[n.filter(K=>K.is_active&&!K.is_bum).map(K=>a.jsxs("tr",{children:[a.jsx("td",{children:K.full_name}),a.jsx("td",{children:K.email}),a.jsx("td",{children:K.role}),a.jsx("td",{children:a.jsx("button",{className:"action-button assign",onClick:()=>ie(K.id,!1),children:"Assign as BUM"})})]},K.id)),n.filter(K=>K.is_active&&!K.is_bum).length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:"4",className:"no-data",children:"No eligible users found"})})]})]})]})]}),D==="technicians"&&a.jsxs("div",{className:"technicians-section",children:[a.jsxs("div",{className:"section-header",children:[a.jsx("h3",{children:"Technicians Management"}),a.jsx("button",{className:"add-btn",onClick:()=>{Pe({user_id:"",hourly_rate:0,active:!0,eligible_users:n.filter(K=>K.is_active&&!Z.some(Qe=>Qe.id===K.id))})},children:"Add New Technician"})]}),ce?a.jsx("div",{className:"loading",children:"Loading technicians..."}):a.jsxs("table",{className:"settings-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Hourly Rate"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Actions"})]})}),a.jsxs("tbody",{children:[Z.map(K=>a.jsxs("tr",{children:[a.jsx("td",{children:K.full_name}),a.jsxs("td",{children:["R",parseFloat(K.hourly_rate).toFixed(2)]}),a.jsx("td",{children:a.jsx("span",{className:`status-badge ${K.active?"active":"inactive"}`,children:K.active?"Active":"Inactive"})}),a.jsxs("td",{children:[a.jsx("button",{className:"action-button edit",onClick:()=>Pe({tech_profile_id:K.tech_profile_id,user_id:K.id,full_name:K.full_name,hourly_rate:K.hourly_rate,active:K.active}),children:"Edit"}),a.jsx("button",{className:"action-button delete",onClick:()=>$e(K.tech_profile_id),children:"Remove"})]})]},K.id)),Z.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:"4",className:"no-data",children:"No technicians found"})})]})]}),dt&&a.jsx("div",{className:"modal-overlay",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h3",{children:dt.tech_profile_id?"Edit Technician":"Add New Technician"}),a.jsx("button",{className:"modal-close",onClick:()=>Pe(null),children:"×"})]}),a.jsxs("div",{className:"modal-body",children:[dt.tech_profile_id?a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Technician"}),a.jsx("input",{type:"text",value:dt.full_name,disabled:!0})]}):a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Select User"}),a.jsxs("select",{value:dt.user_id,onChange:K=>Pe({...dt,user_id:K.target.value}),required:!0,children:[a.jsx("option",{value:"",children:"-- Select a user --"}),dt.eligible_users.map(K=>a.jsxs("option",{value:K.id,children:[K.full_name," (",K.email,")"]},K.id))]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Hourly Rate (R)"}),a.jsx("div",{className:"field-description",children:"The rate charged per hour for this technician's work"}),a.jsx("input",{type:"number",step:"0.01",min:"0",value:dt.hourly_rate,onChange:K=>Pe({...dt,hourly_rate:parseFloat(K.target.value)}),required:!0})]}),a.jsxs("div",{className:"form-group checkbox",children:[a.jsx("input",{type:"checkbox",id:"technician-active",checked:dt.active,onChange:K=>Pe({...dt,active:K.target.checked})}),a.jsx("label",{htmlFor:"technician-active",children:"Active"})]})]}),a.jsxs("div",{className:"modal-actions",children:[a.jsx("button",{type:"button",className:"cancel-btn",onClick:()=>Pe(null),children:"Cancel"}),a.jsx("button",{className:"save-btn",onClick:()=>Be(dt),children:dt.tech_profile_id?"Update Technician":"Add Technician"})]})]})})]})]}),_==="tokens"&&a.jsxs("div",{className:"tokens-section",children:[a.jsxs("div",{className:"token-generation-section",children:[a.jsx("h2",{children:"Generate Registration Token"}),a.jsx("form",{onSubmit:we,className:"token-form",children:a.jsxs("div",{className:"form-row",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"tokenRole",children:"Role"}),a.jsxs("select",{id:"tokenRole",value:u,onChange:K=>f(K.target.value),required:!0,disabled:g,children:[a.jsx("option",{value:"admin",children:"Admin"}),a.jsx("option",{value:"manager",children:"Manager"}),a.jsx("option",{value:"design",children:"Design"}),a.jsx("option",{value:"sales",children:"Sales"}),a.jsx("option",{value:"team_leader",children:"Team Leader"}),a.jsx("option",{value:"technician",children:"Technician"})]})]}),a.jsx("div",{className:"form-group",children:a.jsx("button",{type:"submit",className:"generate-button",disabled:g,children:g?"Generating...":"Generate Token"})})]})})]}),a.jsxs("div",{className:"tokens-list",children:[a.jsx("h2",{children:"Registration Tokens"}),a.jsx("div",{className:"tokens-table",children:a.jsxs("table",{children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Token"}),a.jsx("th",{children:"Role"}),a.jsx("th",{children:"Created By"}),a.jsx("th",{children:"Created"}),a.jsx("th",{children:"Expires"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Used By"})]})}),a.jsx("tbody",{children:o.map(K=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("code",{children:K.token})}),a.jsx("td",{children:a.jsx("span",{className:`role-badge role-${K.role.toLowerCase()}`,children:K.role})}),a.jsx("td",{children:K.created_by}),a.jsx("td",{children:he(K.created_at)}),a.jsx("td",{children:he(K.expires_at)}),a.jsx("td",{children:a.jsx("span",{className:`status-badge ${K.is_used?"used":"active"}`,children:K.is_used?"Used":"Active"})}),a.jsx("td",{children:K.used_by||"-"})]},K.id))})]})})]})]}),_==="users"&&a.jsx("div",{className:"users-section",children:a.jsxs("div",{className:"users-list",children:[a.jsx("h2",{children:"Current Users"}),a.jsx("div",{className:"users-table",children:a.jsxs("table",{children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Email"}),a.jsx("th",{children:"Role"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Created"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:n.map(K=>a.jsxs("tr",{children:[a.jsx("td",{children:K.full_name}),a.jsx("td",{children:K.email}),a.jsx("td",{children:a.jsx("span",{className:`role-badge ${qe(K.role)}`,children:K.role})}),a.jsx("td",{children:a.jsx("span",{className:`status-badge ${K.is_active?"active":"inactive"}`,children:K.is_active?"Active":"Inactive"})}),a.jsx("td",{children:he(K.created_at)}),a.jsx("td",{children:a.jsxs("div",{style:{display:"flex",gap:"5px",flexWrap:"wrap"},children:[a.jsx("button",{className:`action-button ${K.is_active?"deactivate":"activate"}`,onClick:()=>ze(K.id,K.is_active),style:{fontSize:"12px",padding:"4px 8px"},children:K.is_active?"Deactivate":"Activate"}),a.jsx("button",{className:"action-button",onClick:()=>Ee(K),style:{fontSize:"12px",padding:"4px 8px",backgroundColor:"#007bff",borderColor:"#007bff"},children:"Change Role"}),K.email!==t.email&&a.jsx("button",{className:"action-button",onClick:()=>ye(K),style:{fontSize:"12px",padding:"4px 8px",backgroundColor:"#dc3545",borderColor:"#dc3545"},children:"Delete"})]})})]},K.id))})]})})]})}),_==="logs"&&a.jsxs("div",{className:"logs-section",children:[a.jsx("h2",{children:"Audit Logs"}),a.jsx("div",{className:"logs-table",children:a.jsxs("table",{children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Date"}),a.jsx("th",{children:"User"}),a.jsx("th",{children:"Action"}),a.jsx("th",{children:"Resource"}),a.jsx("th",{children:"Resource ID"}),a.jsx("th",{children:"Details"})]})}),a.jsx("tbody",{children:r.map(K=>a.jsxs("tr",{children:[a.jsx("td",{children:he(K.timestamp)}),a.jsx("td",{children:K.user_name||"System"}),a.jsx("td",{children:a.jsx("span",{className:`action-badge action-${K.action.toLowerCase()}`,children:K.action})}),a.jsx("td",{children:K.resource_type}),a.jsx("td",{children:K.resource_id||"-"}),a.jsx("td",{children:K.details?typeof K.details=="object"?JSON.stringify(K.details):K.details:"-"})]},K.id))})]})})]}),C&&a.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:a.jsxs("div",{className:"modal-content",style:{backgroundColor:"white",padding:"20px",borderRadius:"8px",maxWidth:"400px",width:"90%"},children:[a.jsx("h3",{children:"Delete User"}),a.jsxs("p",{children:["Are you sure you want to delete ",a.jsx("strong",{children:L?.email}),"?"]}),a.jsx("p",{style:{color:"#dc3545",fontSize:"14px"},children:"This action cannot be undone."}),a.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end",marginTop:"20px"},children:[a.jsx("button",{className:"btn btn-secondary",onClick:Q,disabled:I,children:"Cancel"}),a.jsx("button",{className:"btn btn-danger",onClick:ve,disabled:I,children:I?"Deleting...":"Delete User"})]})]})}),E&&a.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:a.jsxs("div",{className:"modal-content",style:{backgroundColor:"white",padding:"20px",borderRadius:"8px",maxWidth:"400px",width:"90%"},children:[a.jsx("h3",{children:"Change User Role"}),a.jsxs("p",{children:["Change role for ",a.jsx("strong",{children:L?.email})]}),a.jsxs("div",{className:"form-group",style:{marginBottom:"20px"},children:[a.jsx("label",{htmlFor:"roleSelect",children:"New Role:"}),a.jsxs("select",{id:"roleSelect",className:"form-control",value:T,onChange:K=>O(K.target.value),disabled:I,children:[a.jsx("option",{value:"admin",children:"Admin"}),a.jsx("option",{value:"manager",children:"Manager"}),a.jsx("option",{value:"sales",children:"Sales"}),a.jsx("option",{value:"design",children:"Design"}),a.jsx("option",{value:"team_leader",children:"Team Leader"}),a.jsx("option",{value:"technician",children:"Technician"})]})]}),a.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end"},children:[a.jsx("button",{className:"btn btn-secondary",onClick:Q,disabled:I,children:"Cancel"}),a.jsx("button",{className:"btn btn-primary",onClick:Le,disabled:I||!T,children:I?"Changing...":"Change Role"})]})]})})]})},cj=v.createContext({});function uj(t){const e=v.useRef(null);return e.current===null&&(e.current=t()),e.current}const dj=typeof window<"u",JL=dj?v.useLayoutEffect:v.useEffect,fx=v.createContext(null);function fj(t,e){t.indexOf(e)===-1&&t.push(e)}function hj(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Pi=(t,e,n)=>n>e?e:n<t?t:n;let mj=()=>{};const Li={},e3=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function t3(t){return typeof t=="object"&&t!==null}const n3=t=>/^0[^.\s]+$/u.test(t);function pj(t){let e;return()=>(e===void 0&&(e=t()),e)}const zr=t=>t,v7=(t,e)=>n=>e(t(n)),Qh=(...t)=>t.reduce(v7),dh=(t,e,n)=>{const s=e-t;return s===0?1:(n-t)/s};class gj{constructor(){this.subscriptions=[]}add(e){return fj(this.subscriptions,e),()=>hj(this.subscriptions,e)}notify(e,n,s){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,s);else for(let i=0;i<r;i++){const o=this.subscriptions[i];o&&o(e,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ba=t=>t*1e3,Ir=t=>t/1e3;function s3(t,e){return e?t*(1e3/e):0}const r3=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,_7=1e-7,A7=12;function w7(t,e,n,s,r){let i,o,c=0;do o=e+(n-e)/2,i=r3(o,s,r)-t,i>0?n=o:e=o;while(Math.abs(i)>_7&&++c<A7);return o}function Xh(t,e,n,s){if(t===e&&n===s)return zr;const r=i=>w7(i,0,1,t,n);return i=>i===0||i===1?i:r3(r(i),e,s)}const a3=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,i3=t=>e=>1-t(1-e),o3=Xh(.33,1.53,.69,.99),yj=i3(o3),l3=a3(yj),c3=t=>(t*=2)<1?.5*yj(t):.5*(2-Math.pow(2,-10*(t-1))),xj=t=>1-Math.sin(Math.acos(t)),u3=i3(xj),d3=a3(xj),j7=Xh(.42,0,1,1),S7=Xh(0,0,.58,1),f3=Xh(.42,0,.58,1),C7=t=>Array.isArray(t)&&typeof t[0]!="number",h3=t=>Array.isArray(t)&&typeof t[0]=="number",N7={linear:zr,easeIn:j7,easeInOut:f3,easeOut:S7,circIn:xj,circInOut:d3,circOut:u3,backIn:yj,backInOut:l3,backOut:o3,anticipate:c3},k7=t=>typeof t=="string",QD=t=>{if(h3(t)){mj(t.length===4);const[e,n,s,r]=t;return Xh(e,n,s,r)}else if(k7(t))return N7[t];return t},Pp=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function D7(t,e){let n=new Set,s=new Set,r=!1,i=!1;const o=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function u(m){o.has(m)&&(f.schedule(m),t()),m(c)}const f={schedule:(m,h=!1,g=!1)=>{const b=g&&r?n:s;return h&&o.add(m),b.has(m)||b.add(m),m},cancel:m=>{s.delete(m),o.delete(m)},process:m=>{if(c=m,r){i=!0;return}r=!0,[n,s]=[s,n],n.forEach(u),n.clear(),r=!1,i&&(i=!1,f.process(m))}};return f}const E7=40;function m3(t,e){let n=!1,s=!0;const r={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,o=Pp.reduce((k,E)=>(k[E]=D7(i),k),{}),{setup:c,read:u,resolveKeyframes:f,preUpdate:m,update:h,preRender:g,render:x,postRender:b}=o,A=()=>{const k=Li.useManualTiming?r.timestamp:performance.now();n=!1,Li.useManualTiming||(r.delta=s?1e3/60:Math.max(Math.min(k-r.timestamp,E7),1)),r.timestamp=k,r.isProcessing=!0,c.process(r),u.process(r),f.process(r),m.process(r),h.process(r),g.process(r),x.process(r),b.process(r),r.isProcessing=!1,n&&e&&(s=!1,t(A))},_=()=>{n=!0,s=!0,r.isProcessing||t(A)};return{schedule:Pp.reduce((k,E)=>{const N=o[E];return k[E]=(L,M=!1,T=!1)=>(n||_(),N.schedule(L,M,T)),k},{}),cancel:k=>{for(let E=0;E<Pp.length;E++)o[Pp[E]].cancel(k)},state:r,steps:o}}const{schedule:Cn,cancel:Mo,state:bs,steps:D0}=m3(typeof requestAnimationFrame<"u"?requestAnimationFrame:zr,!0);let Ng;function T7(){Ng=void 0}const Zs={now:()=>(Ng===void 0&&Zs.set(bs.isProcessing||Li.useManualTiming?bs.timestamp:performance.now()),Ng),set:t=>{Ng=t,queueMicrotask(T7)}},p3=t=>e=>typeof e=="string"&&e.startsWith(t),bj=p3("--"),M7=p3("var(--"),vj=t=>M7(t)?R7.test(t.split("/*")[0].trim()):!1,R7=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Zu={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},fh={...Zu,transform:t=>Pi(0,1,t)},Lp={...Zu,default:1},qf=t=>Math.round(t*1e5)/1e5,_j=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function O7(t){return t==null}const P7=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Aj=(t,e)=>n=>!!(typeof n=="string"&&P7.test(n)&&n.startsWith(t)||e&&!O7(n)&&Object.prototype.hasOwnProperty.call(n,e)),g3=(t,e,n)=>s=>{if(typeof s!="string")return s;const[r,i,o,c]=s.match(_j);return{[t]:parseFloat(r),[e]:parseFloat(i),[n]:parseFloat(o),alpha:c!==void 0?parseFloat(c):1}},L7=t=>Pi(0,255,t),E0={...Zu,transform:t=>Math.round(L7(t))},kl={test:Aj("rgb","red"),parse:g3("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:s=1})=>"rgba("+E0.transform(t)+", "+E0.transform(e)+", "+E0.transform(n)+", "+qf(fh.transform(s))+")"};function F7(t){let e="",n="",s="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),s=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),s=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,s+=s,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:r?parseInt(r,16)/255:1}}const tA={test:Aj("#"),parse:F7,transform:kl.transform},Zh=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),go=Zh("deg"),Ia=Zh("%"),Ct=Zh("px"),B7=Zh("vh"),I7=Zh("vw"),XD={...Ia,parse:t=>Ia.parse(t)/100,transform:t=>Ia.transform(t*100)},au={test:Aj("hsl","hue"),parse:g3("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:s=1})=>"hsla("+Math.round(t)+", "+Ia.transform(qf(e))+", "+Ia.transform(qf(n))+", "+qf(fh.transform(s))+")"},Qn={test:t=>kl.test(t)||tA.test(t)||au.test(t),parse:t=>kl.test(t)?kl.parse(t):au.test(t)?au.parse(t):tA.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?kl.transform(t):au.transform(t),getAnimatableNone:t=>{const e=Qn.parse(t);return e.alpha=0,Qn.transform(e)}},V7=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function z7(t){return isNaN(t)&&typeof t=="string"&&(t.match(_j)?.length||0)+(t.match(V7)?.length||0)>0}const y3="number",x3="color",$7="var",H7="var(",ZD="${}",U7=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function hh(t){const e=t.toString(),n=[],s={color:[],number:[],var:[]},r=[];let i=0;const c=e.replace(U7,u=>(Qn.test(u)?(s.color.push(i),r.push(x3),n.push(Qn.parse(u))):u.startsWith(H7)?(s.var.push(i),r.push($7),n.push(u)):(s.number.push(i),r.push(y3),n.push(parseFloat(u))),++i,ZD)).split(ZD);return{values:n,split:c,indexes:s,types:r}}function b3(t){return hh(t).values}function v3(t){const{split:e,types:n}=hh(t),s=e.length;return r=>{let i="";for(let o=0;o<s;o++)if(i+=e[o],r[o]!==void 0){const c=n[o];c===y3?i+=qf(r[o]):c===x3?i+=Qn.transform(r[o]):i+=r[o]}return i}}const W7=t=>typeof t=="number"?0:Qn.test(t)?Qn.getAnimatableNone(t):t;function Y7(t){const e=b3(t);return v3(t)(e.map(W7))}const Ro={test:z7,parse:b3,createTransformer:v3,getAnimatableNone:Y7};function T0(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function q7({hue:t,saturation:e,lightness:n,alpha:s}){t/=360,e/=100,n/=100;let r=0,i=0,o=0;if(!e)r=i=o=n;else{const c=n<.5?n*(1+e):n+e-n*e,u=2*n-c;r=T0(u,c,t+1/3),i=T0(u,c,t),o=T0(u,c,t-1/3)}return{red:Math.round(r*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:s}}function ey(t,e){return n=>n>0?e:t}const Dn=(t,e,n)=>t+(e-t)*n,M0=(t,e,n)=>{const s=t*t,r=n*(e*e-s)+s;return r<0?0:Math.sqrt(r)},G7=[tA,kl,au],K7=t=>G7.find(e=>e.test(t));function JD(t){const e=K7(t);if(!e)return!1;let n=e.parse(t);return e===au&&(n=q7(n)),n}const eE=(t,e)=>{const n=JD(t),s=JD(e);if(!n||!s)return ey(t,e);const r={...n};return i=>(r.red=M0(n.red,s.red,i),r.green=M0(n.green,s.green,i),r.blue=M0(n.blue,s.blue,i),r.alpha=Dn(n.alpha,s.alpha,i),kl.transform(r))},nA=new Set(["none","hidden"]);function Q7(t,e){return nA.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function X7(t,e){return n=>Dn(t,e,n)}function wj(t){return typeof t=="number"?X7:typeof t=="string"?vj(t)?ey:Qn.test(t)?eE:eY:Array.isArray(t)?_3:typeof t=="object"?Qn.test(t)?eE:Z7:ey}function _3(t,e){const n=[...t],s=n.length,r=t.map((i,o)=>wj(i)(i,e[o]));return i=>{for(let o=0;o<s;o++)n[o]=r[o](i);return n}}function Z7(t,e){const n={...t,...e},s={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(s[r]=wj(t[r])(t[r],e[r]));return r=>{for(const i in s)n[i]=s[i](r);return n}}function J7(t,e){const n=[],s={color:0,var:0,number:0};for(let r=0;r<e.values.length;r++){const i=e.types[r],o=t.indexes[i][s[i]],c=t.values[o]??0;n[r]=c,s[i]++}return n}const eY=(t,e)=>{const n=Ro.createTransformer(e),s=hh(t),r=hh(e);return s.indexes.var.length===r.indexes.var.length&&s.indexes.color.length===r.indexes.color.length&&s.indexes.number.length>=r.indexes.number.length?nA.has(t)&&!r.values.length||nA.has(e)&&!s.values.length?Q7(t,e):Qh(_3(J7(s,r),r.values),n):ey(t,e)};function A3(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Dn(t,e,n):wj(t)(t,e)}const tY=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Cn.update(e,n),stop:()=>Mo(e),now:()=>bs.isProcessing?bs.timestamp:Zs.now()}},w3=(t,e,n=10)=>{let s="";const r=Math.max(Math.round(e/n),2);for(let i=0;i<r;i++)s+=Math.round(t(i/(r-1))*1e4)/1e4+", ";return`linear(${s.substring(0,s.length-2)})`},ty=2e4;function jj(t){let e=0;const n=50;let s=t.next(e);for(;!s.done&&e<ty;)e+=n,s=t.next(e);return e>=ty?1/0:e}function nY(t,e=100,n){const s=n({...t,keyframes:[0,e]}),r=Math.min(jj(s),ty);return{type:"keyframes",ease:i=>s.next(r*i).value/e,duration:Ir(r)}}const sY=5;function j3(t,e,n){const s=Math.max(e-sY,0);return s3(n-t(s),e-s)}const Pn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},R0=.001;function rY({duration:t=Pn.duration,bounce:e=Pn.bounce,velocity:n=Pn.velocity,mass:s=Pn.mass}){let r,i,o=1-e;o=Pi(Pn.minDamping,Pn.maxDamping,o),t=Pi(Pn.minDuration,Pn.maxDuration,Ir(t)),o<1?(r=f=>{const m=f*o,h=m*t,g=m-n,x=sA(f,o),b=Math.exp(-h);return R0-g/x*b},i=f=>{const h=f*o*t,g=h*n+n,x=Math.pow(o,2)*Math.pow(f,2)*t,b=Math.exp(-h),A=sA(Math.pow(f,2),o);return(-r(f)+R0>0?-1:1)*((g-x)*b)/A}):(r=f=>{const m=Math.exp(-f*t),h=(f-n)*t+1;return-R0+m*h},i=f=>{const m=Math.exp(-f*t),h=(n-f)*(t*t);return m*h});const c=5/t,u=iY(r,i,c);if(t=Ba(t),isNaN(u))return{stiffness:Pn.stiffness,damping:Pn.damping,duration:t};{const f=Math.pow(u,2)*s;return{stiffness:f,damping:o*2*Math.sqrt(s*f),duration:t}}}const aY=12;function iY(t,e,n){let s=n;for(let r=1;r<aY;r++)s=s-t(s)/e(s);return s}function sA(t,e){return t*Math.sqrt(1-e*e)}const oY=["duration","bounce"],lY=["stiffness","damping","mass"];function tE(t,e){return e.some(n=>t[n]!==void 0)}function cY(t){let e={velocity:Pn.velocity,stiffness:Pn.stiffness,damping:Pn.damping,mass:Pn.mass,isResolvedFromDuration:!1,...t};if(!tE(t,lY)&&tE(t,oY))if(t.visualDuration){const n=t.visualDuration,s=2*Math.PI/(n*1.2),r=s*s,i=2*Pi(.05,1,1-(t.bounce||0))*Math.sqrt(r);e={...e,mass:Pn.mass,stiffness:r,damping:i}}else{const n=rY(t);e={...e,...n,mass:Pn.mass},e.isResolvedFromDuration=!0}return e}function ny(t=Pn.visualDuration,e=Pn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:s,restDelta:r}=n;const i=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],c={done:!1,value:i},{stiffness:u,damping:f,mass:m,duration:h,velocity:g,isResolvedFromDuration:x}=cY({...n,velocity:-Ir(n.velocity||0)}),b=g||0,A=f/(2*Math.sqrt(u*m)),_=o-i,j=Ir(Math.sqrt(u/m)),C=Math.abs(_)<5;s||(s=C?Pn.restSpeed.granular:Pn.restSpeed.default),r||(r=C?Pn.restDelta.granular:Pn.restDelta.default);let k;if(A<1){const N=sA(j,A);k=L=>{const M=Math.exp(-A*j*L);return o-M*((b+A*j*_)/N*Math.sin(N*L)+_*Math.cos(N*L))}}else if(A===1)k=N=>o-Math.exp(-j*N)*(_+(b+j*_)*N);else{const N=j*Math.sqrt(A*A-1);k=L=>{const M=Math.exp(-A*j*L),T=Math.min(N*L,300);return o-M*((b+A*j*_)*Math.sinh(T)+N*_*Math.cosh(T))/N}}const E={calculatedDuration:x&&h||null,next:N=>{const L=k(N);if(x)c.done=N>=h;else{let M=N===0?b:0;A<1&&(M=N===0?Ba(b):j3(k,N,L));const T=Math.abs(M)<=s,O=Math.abs(o-L)<=r;c.done=T&&O}return c.value=c.done?o:L,c},toString:()=>{const N=Math.min(jj(E),ty),L=w3(M=>E.next(N*M).value,N,30);return N+"ms "+L},toTransition:()=>{}};return E}ny.applyToOptions=t=>{const e=nY(t,100,ny);return t.ease=e.ease,t.duration=Ba(e.duration),t.type="keyframes",t};function rA({keyframes:t,velocity:e=0,power:n=.8,timeConstant:s=325,bounceDamping:r=10,bounceStiffness:i=500,modifyTarget:o,min:c,max:u,restDelta:f=.5,restSpeed:m}){const h=t[0],g={done:!1,value:h},x=T=>c!==void 0&&T<c||u!==void 0&&T>u,b=T=>c===void 0?u:u===void 0||Math.abs(c-T)<Math.abs(u-T)?c:u;let A=n*e;const _=h+A,j=o===void 0?_:o(_);j!==_&&(A=j-h);const C=T=>-A*Math.exp(-T/s),k=T=>j+C(T),E=T=>{const O=C(T),I=k(T);g.done=Math.abs(O)<=f,g.value=g.done?j:I};let N,L;const M=T=>{x(g.value)&&(N=T,L=ny({keyframes:[g.value,b(g.value)],velocity:j3(k,T,g.value),damping:r,stiffness:i,restDelta:f,restSpeed:m}))};return M(0),{calculatedDuration:null,next:T=>{let O=!1;return!L&&N===void 0&&(O=!0,E(T),M(T)),N!==void 0&&T>=N?L.next(T-N):(!O&&E(T),g)}}}function uY(t,e,n){const s=[],r=n||Li.mix||A3,i=t.length-1;for(let o=0;o<i;o++){let c=r(t[o],t[o+1]);if(e){const u=Array.isArray(e)?e[o]||zr:e;c=Qh(u,c)}s.push(c)}return s}function dY(t,e,{clamp:n=!0,ease:s,mixer:r}={}){const i=t.length;if(mj(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const c=uY(e,s,r),u=c.length,f=m=>{if(o&&m<t[0])return e[0];let h=0;if(u>1)for(;h<t.length-2&&!(m<t[h+1]);h++);const g=dh(t[h],t[h+1],m);return c[h](g)};return n?m=>f(Pi(t[0],t[i-1],m)):f}function fY(t,e){const n=t[t.length-1];for(let s=1;s<=e;s++){const r=dh(0,e,s);t.push(Dn(n,1,r))}}function hY(t){const e=[0];return fY(e,t.length-1),e}function mY(t,e){return t.map(n=>n*e)}function pY(t,e){return t.map(()=>e||f3).splice(0,t.length-1)}function Gf({duration:t=300,keyframes:e,times:n,ease:s="easeInOut"}){const r=C7(s)?s.map(QD):QD(s),i={done:!1,value:e[0]},o=mY(n&&n.length===e.length?n:hY(e),t),c=dY(o,e,{ease:Array.isArray(r)?r:pY(e,r)});return{calculatedDuration:t,next:u=>(i.value=c(u),i.done=u>=t,i)}}const gY=t=>t!==null;function Sj(t,{repeat:e,repeatType:n="loop"},s,r=1){const i=t.filter(gY),c=r<0||e&&n!=="loop"&&e%2===1?0:i.length-1;return!c||s===void 0?i[c]:s}const yY={decay:rA,inertia:rA,tween:Gf,keyframes:Gf,spring:ny};function S3(t){typeof t.type=="string"&&(t.type=yY[t.type])}class Cj{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const xY=t=>t/100;class Nj extends Cj{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==Zs.now()&&this.tick(Zs.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;S3(e);const{type:n=Gf,repeat:s=0,repeatDelay:r=0,repeatType:i,velocity:o=0}=e;let{keyframes:c}=e;const u=n||Gf;u!==Gf&&typeof c[0]!="number"&&(this.mixKeyframes=Qh(xY,A3(c[0],c[1])),c=[0,100]);const f=u({...e,keyframes:c});i==="mirror"&&(this.mirroredGenerator=u({...e,keyframes:[...c].reverse(),velocity:-o})),f.calculatedDuration===null&&(f.calculatedDuration=jj(f));const{calculatedDuration:m}=f;this.calculatedDuration=m,this.resolvedDuration=m+r,this.totalDuration=this.resolvedDuration*(s+1)-r,this.generator=f}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:s,totalDuration:r,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:c,calculatedDuration:u}=this;if(this.startTime===null)return s.next(0);const{delay:f=0,keyframes:m,repeat:h,repeatType:g,repeatDelay:x,type:b,onUpdate:A,finalKeyframe:_}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const j=this.currentTime-f*(this.playbackSpeed>=0?1:-1),C=this.playbackSpeed>=0?j<0:j>r;this.currentTime=Math.max(j,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=r);let k=this.currentTime,E=s;if(h){const T=Math.min(this.currentTime,r)/c;let O=Math.floor(T),I=T%1;!I&&T>=1&&(I=1),I===1&&O--,O=Math.min(O,h+1),!!(O%2)&&(g==="reverse"?(I=1-I,x&&(I-=x/c)):g==="mirror"&&(E=o)),k=Pi(0,1,I)*c}const N=C?{done:!1,value:m[0]}:E.next(k);i&&(N.value=i(N.value));let{done:L}=N;!C&&u!==null&&(L=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const M=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&L);return M&&b!==rA&&(N.value=Sj(m,this.options,_,this.speed)),A&&A(N.value),M&&this.finish(),N}then(e,n){return this.finished.then(e,n)}get duration(){return Ir(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Ir(e)}get time(){return Ir(this.currentTime)}set time(e){e=Ba(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Zs.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Ir(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=tY,startTime:n}=this.options;this.driver||(this.driver=e(r=>this.tick(r))),this.options.onPlay?.();const s=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=s):this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime||(this.startTime=n??s),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Zs.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function bY(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Dl=t=>t*180/Math.PI,aA=t=>{const e=Dl(Math.atan2(t[1],t[0]));return iA(e)},vY={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:aA,rotateZ:aA,skewX:t=>Dl(Math.atan(t[1])),skewY:t=>Dl(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},iA=t=>(t=t%360,t<0&&(t+=360),t),nE=aA,sE=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),rE=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),_Y={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:sE,scaleY:rE,scale:t=>(sE(t)+rE(t))/2,rotateX:t=>iA(Dl(Math.atan2(t[6],t[5]))),rotateY:t=>iA(Dl(Math.atan2(-t[2],t[0]))),rotateZ:nE,rotate:nE,skewX:t=>Dl(Math.atan(t[4])),skewY:t=>Dl(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function oA(t){return t.includes("scale")?1:0}function lA(t,e){if(!t||t==="none")return oA(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,r;if(n)s=_Y,r=n;else{const c=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=vY,r=c}if(!r)return oA(e);const i=s[e],o=r[1].split(",").map(wY);return typeof i=="function"?i(o):o[i]}const AY=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return lA(n,e)};function wY(t){return parseFloat(t.trim())}const Ju=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ed=new Set(Ju),aE=t=>t===Zu||t===Ct,jY=new Set(["x","y","z"]),SY=Ju.filter(t=>!jY.has(t));function CY(t){const e=[];return SY.forEach(n=>{const s=t.getValue(n);s!==void 0&&(e.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),e}const Fl={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>lA(e,"x"),y:(t,{transform:e})=>lA(e,"y")};Fl.translateX=Fl.x;Fl.translateY=Fl.y;const Bl=new Set;let cA=!1,uA=!1,dA=!1;function C3(){if(uA){const t=Array.from(Bl).filter(s=>s.needsMeasurement),e=new Set(t.map(s=>s.element)),n=new Map;e.forEach(s=>{const r=CY(s);r.length&&(n.set(s,r),s.render())}),t.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render();const r=n.get(s);r&&r.forEach(([i,o])=>{s.getValue(i)?.set(o)})}),t.forEach(s=>s.measureEndState()),t.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}uA=!1,cA=!1,Bl.forEach(t=>t.complete(dA)),Bl.clear()}function N3(){Bl.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(uA=!0)})}function NY(){dA=!0,N3(),C3(),dA=!1}class kj{constructor(e,n,s,r,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=s,this.motionValue=r,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Bl.add(this),cA||(cA=!0,Cn.read(N3),Cn.resolveKeyframes(C3))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:s,motionValue:r}=this;if(e[0]===null){const i=r?.get(),o=e[e.length-1];if(i!==void 0)e[0]=i;else if(s&&n){const c=s.readValue(n,o);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=o),r&&i===void 0&&r.set(e[0])}bY(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Bl.delete(this)}cancel(){this.state==="scheduled"&&(Bl.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const kY=t=>t.startsWith("--");function DY(t,e,n){kY(e)?t.style.setProperty(e,n):t.style[e]=n}const EY=pj(()=>window.ScrollTimeline!==void 0),TY={};function MY(t,e){const n=pj(t);return()=>TY[e]??n()}const k3=MY(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Of=([t,e,n,s])=>`cubic-bezier(${t}, ${e}, ${n}, ${s})`,iE={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Of([0,.65,.55,1]),circOut:Of([.55,0,1,.45]),backIn:Of([.31,.01,.66,-.59]),backOut:Of([.33,1.53,.69,.99])};function D3(t,e){if(t)return typeof t=="function"?k3()?w3(t,e):"ease-out":h3(t)?Of(t):Array.isArray(t)?t.map(n=>D3(n,e)||iE.easeOut):iE[t]}function RY(t,e,n,{delay:s=0,duration:r=300,repeat:i=0,repeatType:o="loop",ease:c="easeOut",times:u}={},f=void 0){const m={[e]:n};u&&(m.offset=u);const h=D3(c,r);Array.isArray(h)&&(m.easing=h);const g={delay:s,duration:r,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return f&&(g.pseudoElement=f),t.animate(m,g)}function E3(t){return typeof t=="function"&&"applyToOptions"in t}function OY({type:t,...e}){return E3(t)&&k3()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class PY extends Cj{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:s,keyframes:r,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:c,onComplete:u}=e;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=e,mj(typeof e.type!="string");const f=OY(e);this.animation=RY(n,s,r,f,i),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const m=Sj(r,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(m):DY(n,s,m),this.animation.cancel()}u?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Ir(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Ir(e)}get time(){return Ir(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Ba(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&EY()?(this.animation.timeline=e,zr):n(this)}}const T3={anticipate:c3,backInOut:l3,circInOut:d3};function LY(t){return t in T3}function FY(t){typeof t.ease=="string"&&LY(t.ease)&&(t.ease=T3[t.ease])}const oE=10;class BY extends PY{constructor(e){FY(e),S3(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:s,onComplete:r,element:i,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const c=new Nj({...o,autoplay:!1}),u=Ba(this.finishedTime??this.time);n.setWithVelocity(c.sample(u-oE).value,c.sample(u).value,oE),c.stop()}}const lE=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ro.test(t)||t==="0")&&!t.startsWith("url("));function IY(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function VY(t,e,n,s){const r=t[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],o=lE(r,e),c=lE(i,e);return!o||!c?!1:IY(t)||(n==="spring"||E3(n))&&s}function fA(t){t.duration=0,t.type="keyframes"}const zY=new Set(["opacity","clipPath","filter","transform"]),$Y=pj(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function HY(t){const{motionValue:e,name:n,repeatDelay:s,repeatType:r,damping:i,type:o}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:f}=e.owner.getProps();return $Y()&&n&&zY.has(n)&&(n!=="transform"||!f)&&!u&&!s&&r!=="mirror"&&i!==0&&o!=="inertia"}const UY=40;class WY extends Cj{constructor({autoplay:e=!0,delay:n=0,type:s="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:o="loop",keyframes:c,name:u,motionValue:f,element:m,...h}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Zs.now();const g={autoplay:e,delay:n,type:s,repeat:r,repeatDelay:i,repeatType:o,name:u,motionValue:f,element:m,...h},x=m?.KeyframeResolver||kj;this.keyframeResolver=new x(c,(b,A,_)=>this.onKeyframesResolved(b,A,g,!_),u,f,m),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,s,r){this.keyframeResolver=void 0;const{name:i,type:o,velocity:c,delay:u,isHandoff:f,onUpdate:m}=s;this.resolvedAt=Zs.now(),VY(e,i,o,c)||((Li.instantAnimations||!u)&&m?.(Sj(e,s,n)),e[0]=e[e.length-1],fA(s),s.repeat=0);const g={startTime:r?this.resolvedAt?this.resolvedAt-this.createdAt>UY?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...s,keyframes:e},x=!f&&HY(g)?new BY({...g,element:g.motionValue.owner.current}):new Nj(g);x.finished.then(()=>this.notifyFinished()).catch(zr),this.pendingTimeline&&(this.stopTimeline=x.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=x}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),NY()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const YY=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function qY(t){const e=YY.exec(t);if(!e)return[,];const[,n,s,r]=e;return[`--${n??s}`,r]}function M3(t,e,n=1){const[s,r]=qY(t);if(!s)return;const i=window.getComputedStyle(e).getPropertyValue(s);if(i){const o=i.trim();return e3(o)?parseFloat(o):o}return vj(r)?M3(r,e,n+1):r}function Dj(t,e){return t?.[e]??t?.default??t}const R3=new Set(["width","height","top","left","right","bottom",...Ju]),GY={test:t=>t==="auto",parse:t=>t},O3=t=>e=>e.test(t),P3=[Zu,Ct,Ia,go,I7,B7,GY],cE=t=>P3.find(O3(t));function KY(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||n3(t):!0}const QY=new Set(["brightness","contrast","saturate","opacity"]);function XY(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[s]=n.match(_j)||[];if(!s)return t;const r=n.replace(s,"");let i=QY.has(e)?1:0;return s!==n&&(i*=100),e+"("+i+r+")"}const ZY=/\b([a-z-]*)\(.*?\)/gu,hA={...Ro,getAnimatableNone:t=>{const e=t.match(ZY);return e?e.map(XY).join(" "):t}},uE={...Zu,transform:Math.round},JY={rotate:go,rotateX:go,rotateY:go,rotateZ:go,scale:Lp,scaleX:Lp,scaleY:Lp,scaleZ:Lp,skew:go,skewX:go,skewY:go,distance:Ct,translateX:Ct,translateY:Ct,translateZ:Ct,x:Ct,y:Ct,z:Ct,perspective:Ct,transformPerspective:Ct,opacity:fh,originX:XD,originY:XD,originZ:Ct},Ej={borderWidth:Ct,borderTopWidth:Ct,borderRightWidth:Ct,borderBottomWidth:Ct,borderLeftWidth:Ct,borderRadius:Ct,radius:Ct,borderTopLeftRadius:Ct,borderTopRightRadius:Ct,borderBottomRightRadius:Ct,borderBottomLeftRadius:Ct,width:Ct,maxWidth:Ct,height:Ct,maxHeight:Ct,top:Ct,right:Ct,bottom:Ct,left:Ct,padding:Ct,paddingTop:Ct,paddingRight:Ct,paddingBottom:Ct,paddingLeft:Ct,margin:Ct,marginTop:Ct,marginRight:Ct,marginBottom:Ct,marginLeft:Ct,backgroundPositionX:Ct,backgroundPositionY:Ct,...JY,zIndex:uE,fillOpacity:fh,strokeOpacity:fh,numOctaves:uE},eq={...Ej,color:Qn,backgroundColor:Qn,outlineColor:Qn,fill:Qn,stroke:Qn,borderColor:Qn,borderTopColor:Qn,borderRightColor:Qn,borderBottomColor:Qn,borderLeftColor:Qn,filter:hA,WebkitFilter:hA},L3=t=>eq[t];function F3(t,e){let n=L3(t);return n!==hA&&(n=Ro),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const tq=new Set(["auto","none","0"]);function nq(t,e,n){let s=0,r;for(;s<t.length&&!r;){const i=t[s];typeof i=="string"&&!tq.has(i)&&hh(i).values.length&&(r=t[s]),s++}if(r&&n)for(const i of e)t[i]=F3(n,r)}class sq extends kj{constructor(e,n,s,r,i){super(e,n,s,r,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:s}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let f=e[u];if(typeof f=="string"&&(f=f.trim(),vj(f))){const m=M3(f,n.current);m!==void 0&&(e[u]=m),u===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!R3.has(s)||e.length!==2)return;const[r,i]=e,o=cE(r),c=cE(i);if(o!==c)if(aE(o)&&aE(c))for(let u=0;u<e.length;u++){const f=e[u];typeof f=="string"&&(e[u]=parseFloat(f))}else Fl[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,s=[];for(let r=0;r<e.length;r++)(e[r]===null||KY(e[r]))&&s.push(r);s.length&&nq(e,s,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:s}=this;if(!e||!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Fl[s](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const r=n[n.length-1];r!==void 0&&e.getValue(s,r).jump(r,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:s}=this;if(!e||!e.current)return;const r=e.getValue(n);r&&r.jump(this.measuredOrigin,!1);const i=s.length-1,o=s[i];s[i]=Fl[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([c,u])=>{e.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function rq(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let s=document;const r=n?.[t]??s.querySelectorAll(t);return r?Array.from(r):[]}return Array.from(t)}const B3=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function I3(t){return t3(t)&&"offsetHeight"in t}const dE=30,aq=t=>!isNaN(parseFloat(t));class iq{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=s=>{const r=Zs.now();if(this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const i of this.dependents)i.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Zs.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=aq(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new gj);const s=this.events[e].add(n);return e==="change"?()=>{s(),Cn.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Zs.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>dE)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,dE);return s3(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Au(t,e){return new iq(t,e)}const{schedule:Tj}=m3(queueMicrotask,!1),ea={x:!1,y:!1};function V3(){return ea.x||ea.y}function oq(t){return t==="x"||t==="y"?ea[t]?null:(ea[t]=!0,()=>{ea[t]=!1}):ea.x||ea.y?null:(ea.x=ea.y=!0,()=>{ea.x=ea.y=!1})}function z3(t,e){const n=rq(t),s=new AbortController,r={passive:!0,...e,signal:s.signal};return[n,r,()=>s.abort()]}function fE(t){return!(t.pointerType==="touch"||V3())}function lq(t,e,n={}){const[s,r,i]=z3(t,n),o=c=>{if(!fE(c))return;const{target:u}=c,f=e(u,c);if(typeof f!="function"||!u)return;const m=h=>{fE(h)&&(f(h),u.removeEventListener("pointerleave",m))};u.addEventListener("pointerleave",m,r)};return s.forEach(c=>{c.addEventListener("pointerenter",o,r)}),i}const $3=(t,e)=>e?t===e?!0:$3(t,e.parentElement):!1,Mj=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,cq=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function uq(t){return cq.has(t.tagName)||t.tabIndex!==-1}const kg=new WeakSet;function hE(t){return e=>{e.key==="Enter"&&t(e)}}function O0(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const dq=(t,e)=>{const n=t.currentTarget;if(!n)return;const s=hE(()=>{if(kg.has(n))return;O0(n,"down");const r=hE(()=>{O0(n,"up")}),i=()=>O0(n,"cancel");n.addEventListener("keyup",r,e),n.addEventListener("blur",i,e)});n.addEventListener("keydown",s,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",s),e)};function mE(t){return Mj(t)&&!V3()}function fq(t,e,n={}){const[s,r,i]=z3(t,n),o=c=>{const u=c.currentTarget;if(!mE(c))return;kg.add(u);const f=e(u,c),m=(x,b)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",g),kg.has(u)&&kg.delete(u),mE(x)&&typeof f=="function"&&f(x,{success:b})},h=x=>{m(x,u===window||u===document||n.useGlobalTarget||$3(u,x.target))},g=x=>{m(x,!1)};window.addEventListener("pointerup",h,r),window.addEventListener("pointercancel",g,r)};return s.forEach(c=>{(n.useGlobalTarget?window:c).addEventListener("pointerdown",o,r),I3(c)&&(c.addEventListener("focus",f=>dq(f,r)),!uq(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),i}function H3(t){return t3(t)&&"ownerSVGElement"in t}function hq(t){return H3(t)&&t.tagName==="svg"}const Ms=t=>!!(t&&t.getVelocity),mq=[...P3,Qn,Ro],pq=t=>mq.find(O3(t)),Rj=v.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function pE(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function gq(...t){return e=>{let n=!1;const s=t.map(r=>{const i=pE(r,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let r=0;r<s.length;r++){const i=s[r];typeof i=="function"?i():pE(t[r],null)}}}}function yq(...t){return v.useCallback(gq(...t),t)}class xq extends v.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const s=n.offsetParent,r=I3(s)&&s.offsetWidth||0,i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft,i.right=r-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function bq({children:t,isPresent:e,anchorX:n,root:s}){const r=v.useId(),i=v.useRef(null),o=v.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=v.useContext(Rj),u=yq(i,t?.ref);return v.useInsertionEffect(()=>{const{width:f,height:m,top:h,left:g,right:x}=o.current;if(e||!i.current||!f||!m)return;const b=n==="left"?`left: ${g}`:`right: ${x}`;i.current.dataset.motionPopId=r;const A=document.createElement("style");c&&(A.nonce=c);const _=s??document.head;return _.appendChild(A),A.sheet&&A.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${m}px !important;
            ${b}px !important;
            top: ${h}px !important;
          }
        `),()=>{_.contains(A)&&_.removeChild(A)}},[e]),a.jsx(xq,{isPresent:e,childRef:i,sizeRef:o,children:v.cloneElement(t,{ref:u})})}const vq=({children:t,initial:e,isPresent:n,onExitComplete:s,custom:r,presenceAffectsLayout:i,mode:o,anchorX:c,root:u})=>{const f=uj(_q),m=v.useId();let h=!0,g=v.useMemo(()=>(h=!1,{id:m,initial:e,isPresent:n,custom:r,onExitComplete:x=>{f.set(x,!0);for(const b of f.values())if(!b)return;s&&s()},register:x=>(f.set(x,!1),()=>f.delete(x))}),[n,f,s]);return i&&h&&(g={...g}),v.useMemo(()=>{f.forEach((x,b)=>f.set(b,!1))},[n]),v.useEffect(()=>{!n&&!f.size&&s&&s()},[n]),o==="popLayout"&&(t=a.jsx(bq,{isPresent:n,anchorX:c,root:u,children:t})),a.jsx(fx.Provider,{value:g,children:t})};function _q(){return new Map}function U3(t=!0){const e=v.useContext(fx);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:s,register:r}=e,i=v.useId();v.useEffect(()=>{if(t)return r(i)},[t]);const o=v.useCallback(()=>t&&s&&s(i),[i,s,t]);return!n&&s?[!1,o]:[!0]}const Fp=t=>t.key||"";function gE(t){const e=[];return v.Children.forEach(t,n=>{v.isValidElement(n)&&e.push(n)}),e}const Aq=({children:t,custom:e,initial:n=!0,onExitComplete:s,presenceAffectsLayout:r=!0,mode:i="sync",propagate:o=!1,anchorX:c="left",root:u})=>{const[f,m]=U3(o),h=v.useMemo(()=>gE(t),[t]),g=o&&!f?[]:h.map(Fp),x=v.useRef(!0),b=v.useRef(h),A=uj(()=>new Map),[_,j]=v.useState(h),[C,k]=v.useState(h);JL(()=>{x.current=!1,b.current=h;for(let L=0;L<C.length;L++){const M=Fp(C[L]);g.includes(M)?A.delete(M):A.get(M)!==!0&&A.set(M,!1)}},[C,g.length,g.join("-")]);const E=[];if(h!==_){let L=[...h];for(let M=0;M<C.length;M++){const T=C[M],O=Fp(T);g.includes(O)||(L.splice(M,0,T),E.push(T))}return i==="wait"&&E.length&&(L=E),k(gE(L)),j(h),null}const{forceRender:N}=v.useContext(cj);return a.jsx(a.Fragment,{children:C.map(L=>{const M=Fp(L),T=o&&!f?!1:h===C||g.includes(M),O=()=>{if(A.has(M))A.set(M,!0);else return;let I=!0;A.forEach($=>{$||(I=!1)}),I&&(N?.(),k(b.current),o&&m?.(),s&&s())};return a.jsx(vq,{isPresent:T,initial:!x.current||n?void 0:!1,custom:e,presenceAffectsLayout:r,mode:i,root:u,onExitComplete:T?void 0:O,anchorX:c,children:L},M)})})},W3=v.createContext({strict:!1}),yE={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},wu={};for(const t in yE)wu[t]={isEnabled:e=>yE[t].some(n=>!!e[n])};function wq(t){for(const e in t)wu[e]={...wu[e],...t[e]}}const jq=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function sy(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||jq.has(t)}let Y3=t=>!sy(t);function Sq(t){typeof t=="function"&&(Y3=e=>e.startsWith("on")?!sy(e):t(e))}try{Sq(require("@emotion/is-prop-valid").default)}catch{}function Cq(t,e,n){const s={};for(const r in t)r==="values"&&typeof t.values=="object"||(Y3(r)||n===!0&&sy(r)||!e&&!sy(r)||t.draggable&&r.startsWith("onDrag"))&&(s[r]=t[r]);return s}const hx=v.createContext({});function mx(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function mh(t){return typeof t=="string"||Array.isArray(t)}const Oj=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Pj=["initial",...Oj];function px(t){return mx(t.animate)||Pj.some(e=>mh(t[e]))}function q3(t){return!!(px(t)||t.variants)}function Nq(t,e){if(px(t)){const{initial:n,animate:s}=t;return{initial:n===!1||mh(n)?n:void 0,animate:mh(s)?s:void 0}}return t.inherit!==!1?e:{}}function kq(t){const{initial:e,animate:n}=Nq(t,v.useContext(hx));return v.useMemo(()=>({initial:e,animate:n}),[xE(e),xE(n)])}function xE(t){return Array.isArray(t)?t.join(" "):t}const ph={};function Dq(t){for(const e in t)ph[e]=t[e],bj(e)&&(ph[e].isCSSVariable=!0)}function G3(t,{layout:e,layoutId:n}){return ed.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!ph[t]||t==="opacity")}const Eq={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Tq=Ju.length;function Mq(t,e,n){let s="",r=!0;for(let i=0;i<Tq;i++){const o=Ju[i],c=t[o];if(c===void 0)continue;let u=!0;if(typeof c=="number"?u=c===(o.startsWith("scale")?1:0):u=parseFloat(c)===0,!u||n){const f=B3(c,Ej[o]);if(!u){r=!1;const m=Eq[o]||o;s+=`${m}(${f}) `}n&&(e[o]=f)}}return s=s.trim(),n?s=n(e,r?"":s):r&&(s="none"),s}function Lj(t,e,n){const{style:s,vars:r,transformOrigin:i}=t;let o=!1,c=!1;for(const u in e){const f=e[u];if(ed.has(u)){o=!0;continue}else if(bj(u)){r[u]=f;continue}else{const m=B3(f,Ej[u]);u.startsWith("origin")?(c=!0,i[u]=m):s[u]=m}}if(e.transform||(o||n?s.transform=Mq(e,t.transform,n):s.transform&&(s.transform="none")),c){const{originX:u="50%",originY:f="50%",originZ:m=0}=i;s.transformOrigin=`${u} ${f} ${m}`}}const Fj=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function K3(t,e,n){for(const s in e)!Ms(e[s])&&!G3(s,n)&&(t[s]=e[s])}function Rq({transformTemplate:t},e){return v.useMemo(()=>{const n=Fj();return Lj(n,e,t),Object.assign({},n.vars,n.style)},[e])}function Oq(t,e){const n=t.style||{},s={};return K3(s,n,t),Object.assign(s,Rq(t,e)),s}function Pq(t,e){const n={},s=Oq(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=s,n}const Lq={offset:"stroke-dashoffset",array:"stroke-dasharray"},Fq={offset:"strokeDashoffset",array:"strokeDasharray"};function Bq(t,e,n=1,s=0,r=!0){t.pathLength=1;const i=r?Lq:Fq;t[i.offset]=Ct.transform(-s);const o=Ct.transform(e),c=Ct.transform(n);t[i.array]=`${o} ${c}`}function Q3(t,{attrX:e,attrY:n,attrScale:s,pathLength:r,pathSpacing:i=1,pathOffset:o=0,...c},u,f,m){if(Lj(t,c,f),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:g}=t;h.transform&&(g.transform=h.transform,delete h.transform),(g.transform||h.transformOrigin)&&(g.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),g.transform&&(g.transformBox=m?.transformBox??"fill-box",delete h.transformBox),e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),s!==void 0&&(h.scale=s),r!==void 0&&Bq(h,r,i,o,!1)}const X3=()=>({...Fj(),attrs:{}}),Z3=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Iq(t,e,n,s){const r=v.useMemo(()=>{const i=X3();return Q3(i,e,Z3(s),t.transformTemplate,t.style),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};K3(i,t.style,t),r.style={...i,...r.style}}return r}const Vq=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Bj(t){return typeof t!="string"||t.includes("-")?!1:!!(Vq.indexOf(t)>-1||/[A-Z]/u.test(t))}function zq(t,e,n,{latestValues:s},r,i=!1){const c=(Bj(t)?Iq:Pq)(e,s,r,t),u=Cq(e,typeof t=="string",i),f=t!==v.Fragment?{...u,...c,ref:n}:{},{children:m}=e,h=v.useMemo(()=>Ms(m)?m.get():m,[m]);return v.createElement(t,{...f,children:h})}function bE(t){const e=[{},{}];return t?.values.forEach((n,s)=>{e[0][s]=n.get(),e[1][s]=n.getVelocity()}),e}function Ij(t,e,n,s){if(typeof e=="function"){const[r,i]=bE(s);e=e(n!==void 0?n:t.custom,r,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[r,i]=bE(s);e=e(n!==void 0?n:t.custom,r,i)}return e}function Dg(t){return Ms(t)?t.get():t}function $q({scrapeMotionValuesFromProps:t,createRenderState:e},n,s,r){return{latestValues:Hq(n,s,r,t),renderState:e()}}function Hq(t,e,n,s){const r={},i=s(t,{});for(const g in i)r[g]=Dg(i[g]);let{initial:o,animate:c}=t;const u=px(t),f=q3(t);e&&f&&!u&&t.inherit!==!1&&(o===void 0&&(o=e.initial),c===void 0&&(c=e.animate));let m=n?n.initial===!1:!1;m=m||o===!1;const h=m?c:o;if(h&&typeof h!="boolean"&&!mx(h)){const g=Array.isArray(h)?h:[h];for(let x=0;x<g.length;x++){const b=Ij(t,g[x]);if(b){const{transitionEnd:A,transition:_,...j}=b;for(const C in j){let k=j[C];if(Array.isArray(k)){const E=m?k.length-1:0;k=k[E]}k!==null&&(r[C]=k)}for(const C in A)r[C]=A[C]}}}return r}const J3=t=>(e,n)=>{const s=v.useContext(hx),r=v.useContext(fx),i=()=>$q(t,e,s,r);return n?i():uj(i)};function Vj(t,e,n){const{style:s}=t,r={};for(const i in s)(Ms(s[i])||e.style&&Ms(e.style[i])||G3(i,t)||n?.getValue(i)?.liveStyle!==void 0)&&(r[i]=s[i]);return r}const Uq=J3({scrapeMotionValuesFromProps:Vj,createRenderState:Fj});function eF(t,e,n){const s=Vj(t,e,n);for(const r in t)if(Ms(t[r])||Ms(e[r])){const i=Ju.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;s[i]=t[r]}return s}const Wq=J3({scrapeMotionValuesFromProps:eF,createRenderState:X3}),Yq=Symbol.for("motionComponentSymbol");function iu(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function qq(t,e,n){return v.useCallback(s=>{s&&t.onMount&&t.onMount(s),e&&(s?e.mount(s):e.unmount()),n&&(typeof n=="function"?n(s):iu(n)&&(n.current=s))},[e])}const zj=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Gq="framerAppearId",tF="data-"+zj(Gq),nF=v.createContext({});function Kq(t,e,n,s,r){const{visualElement:i}=v.useContext(hx),o=v.useContext(W3),c=v.useContext(fx),u=v.useContext(Rj).reducedMotion,f=v.useRef(null);s=s||o.renderer,!f.current&&s&&(f.current=s(t,{visualState:e,parent:i,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const m=f.current,h=v.useContext(nF);m&&!m.projection&&r&&(m.type==="html"||m.type==="svg")&&Qq(f.current,n,r,h);const g=v.useRef(!1);v.useInsertionEffect(()=>{m&&g.current&&m.update(n,c)});const x=n[tF],b=v.useRef(!!x&&!window.MotionHandoffIsComplete?.(x)&&window.MotionHasOptimisedAnimation?.(x));return JL(()=>{m&&(g.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),m.scheduleRenderMicrotask(),b.current&&m.animationState&&m.animationState.animateChanges())}),v.useEffect(()=>{m&&(!b.current&&m.animationState&&m.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(x)}),b.current=!1),m.enteringChildren=void 0)}),m}function Qq(t,e,n,s){const{layoutId:r,layout:i,drag:o,dragConstraints:c,layoutScroll:u,layoutRoot:f,layoutCrossfade:m}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:sF(t.parent)),t.projection.setOptions({layoutId:r,layout:i,alwaysMeasureLayout:!!o||c&&iu(c),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:s,crossfade:m,layoutScroll:u,layoutRoot:f})}function sF(t){if(t)return t.options.allowProjection!==!1?t.projection:sF(t.parent)}function P0(t,{forwardMotionProps:e=!1}={},n,s){n&&wq(n);const r=Bj(t)?Wq:Uq;function i(c,u){let f;const m={...v.useContext(Rj),...c,layoutId:Xq(c)},{isStatic:h}=m,g=kq(c),x=r(c,h);if(!h&&dj){Zq();const b=Jq(m);f=b.MeasureLayout,g.visualElement=Kq(t,x,m,s,b.ProjectionNode)}return a.jsxs(hx.Provider,{value:g,children:[f&&g.visualElement?a.jsx(f,{visualElement:g.visualElement,...m}):null,zq(t,c,qq(x,g.visualElement,u),x,h,e)]})}i.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=v.forwardRef(i);return o[Yq]=t,o}function Xq({layoutId:t}){const e=v.useContext(cj).id;return e&&t!==void 0?e+"-"+t:t}function Zq(t,e){v.useContext(W3).strict}function Jq(t){const{drag:e,layout:n}=wu;if(!e&&!n)return{};const s={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function eG(t,e){if(typeof Proxy>"u")return P0;const n=new Map,s=(i,o)=>P0(i,o,t,e),r=(i,o)=>s(i,o);return new Proxy(r,{get:(i,o)=>o==="create"?s:(n.has(o)||n.set(o,P0(o,void 0,t,e)),n.get(o))})}function rF({top:t,left:e,right:n,bottom:s}){return{x:{min:e,max:n},y:{min:t,max:s}}}function tG({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function nG(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),s=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function L0(t){return t===void 0||t===1}function mA({scale:t,scaleX:e,scaleY:n}){return!L0(t)||!L0(e)||!L0(n)}function bl(t){return mA(t)||aF(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function aF(t){return vE(t.x)||vE(t.y)}function vE(t){return t&&t!=="0%"}function ry(t,e,n){const s=t-n,r=e*s;return n+r}function _E(t,e,n,s,r){return r!==void 0&&(t=ry(t,r,s)),ry(t,n,s)+e}function pA(t,e=0,n=1,s,r){t.min=_E(t.min,e,n,s,r),t.max=_E(t.max,e,n,s,r)}function iF(t,{x:e,y:n}){pA(t.x,e.translate,e.scale,e.originPoint),pA(t.y,n.translate,n.scale,n.originPoint)}const AE=.999999999999,wE=1.0000000000001;function sG(t,e,n,s=!1){const r=n.length;if(!r)return;e.x=e.y=1;let i,o;for(let c=0;c<r;c++){i=n[c],o=i.projectionDelta;const{visualElement:u}=i.options;u&&u.props.style&&u.props.style.display==="contents"||(s&&i.options.layoutScroll&&i.scroll&&i!==i.root&&lu(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,iF(t,o)),s&&bl(i.latestValues)&&lu(t,i.latestValues))}e.x<wE&&e.x>AE&&(e.x=1),e.y<wE&&e.y>AE&&(e.y=1)}function ou(t,e){t.min=t.min+e,t.max=t.max+e}function jE(t,e,n,s,r=.5){const i=Dn(t.min,t.max,r);pA(t,e,n,i,s)}function lu(t,e){jE(t.x,e.x,e.scaleX,e.scale,e.originX),jE(t.y,e.y,e.scaleY,e.scale,e.originY)}function oF(t,e){return rF(nG(t.getBoundingClientRect(),e))}function rG(t,e,n){const s=oF(t,n),{scroll:r}=e;return r&&(ou(s.x,r.offset.x),ou(s.y,r.offset.y)),s}const SE=()=>({translate:0,scale:1,origin:0,originPoint:0}),cu=()=>({x:SE(),y:SE()}),CE=()=>({min:0,max:0}),zn=()=>({x:CE(),y:CE()}),gA={current:null},lF={current:!1};function aG(){if(lF.current=!0,!!dj)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>gA.current=t.matches;t.addEventListener("change",e),e()}else gA.current=!1}const iG=new WeakMap;function oG(t,e,n){for(const s in e){const r=e[s],i=n[s];if(Ms(r))t.addValue(s,r);else if(Ms(i))t.addValue(s,Au(r,{owner:t}));else if(i!==r)if(t.hasValue(s)){const o=t.getValue(s);o.liveStyle===!0?o.jump(r):o.hasAnimated||o.set(r)}else{const o=t.getStaticValue(s);t.addValue(s,Au(o!==void 0?o:r,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const NE=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class lG{scrapeMotionValuesFromProps(e,n,s){return{}}constructor({parent:e,props:n,presenceContext:s,reducedMotionConfig:r,blockInitialAnimation:i,visualState:o},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=kj,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=Zs.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,Cn.render(this.render,!1,!0))};const{latestValues:u,renderState:f}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=f,this.parent=e,this.props=n,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=c,this.blockInitialAnimation=!!i,this.isControllingVariants=px(n),this.isVariantNode=q3(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:m,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const g in h){const x=h[g];u[g]!==void 0&&Ms(x)&&x.set(u[g])}}mount(e){this.current=e,iG.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),lF.current||aG(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:gA.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Mo(this.notifyUpdate),Mo(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=ed.has(e);s&&this.onBindTransform&&this.onBindTransform();const r=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Cn.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{r(),i&&i(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in wu){const n=wu[e];if(!n)continue;const{isEnabled:s,Feature:r}=n;if(!this.features[e]&&r&&s(this.props)&&(this.features[e]=new r(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):zn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<NE.length;s++){const r=NE[s];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const i="on"+r,o=e[i];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=oG(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const s=this.values.get(e);n!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&n!==void 0&&(s=Au(n===null?void 0:n,{owner:this}),this.addValue(e,s)),s}readValue(e,n){let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(e3(s)||n3(s))?s=parseFloat(s):!pq(s)&&Ro.test(n)&&(s=F3(e,n)),this.setBaseTarget(e,Ms(s)?s.get():s)),Ms(s)?s.get():s}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let s;if(typeof n=="string"||typeof n=="object"){const i=Ij(this.props,n,this.presenceContext?.custom);i&&(s=i[e])}if(n&&s!==void 0)return s;const r=this.getBaseTargetFromProps(this.props,e);return r!==void 0&&!Ms(r)?r:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new gj),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){Tj.render(this.render)}}class cF extends lG{constructor(){super(...arguments),this.KeyframeResolver=sq}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:s}){delete n[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ms(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function uF(t,{style:e,vars:n},s,r){const i=t.style;let o;for(o in e)i[o]=e[o];r?.applyProjectionStyles(i,s);for(o in n)i.setProperty(o,n[o])}function cG(t){return window.getComputedStyle(t)}class uG extends cF{constructor(){super(...arguments),this.type="html",this.renderInstance=uF}readValueFromInstance(e,n){if(ed.has(n))return this.projection?.isProjecting?oA(n):AY(e,n);{const s=cG(e),r=(bj(n)?s.getPropertyValue(n):s[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return oF(e,n)}build(e,n,s){Lj(e,n,s.transformTemplate)}scrapeMotionValuesFromProps(e,n,s){return Vj(e,n,s)}}const dF=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function dG(t,e,n,s){uF(t,e,void 0,s);for(const r in e.attrs)t.setAttribute(dF.has(r)?r:zj(r),e.attrs[r])}class fG extends cF{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=zn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(ed.has(n)){const s=L3(n);return s&&s.default||0}return n=dF.has(n)?n:zj(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,s){return eF(e,n,s)}build(e,n,s){Q3(e,n,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(e,n,s,r){dG(e,n,s,r)}mount(e){this.isSVGTag=Z3(e.tagName),super.mount(e)}}const hG=(t,e)=>Bj(t)?new fG(e):new uG(e,{allowProjection:t!==v.Fragment});function uu(t,e,n){const s=t.getProps();return Ij(s,e,n!==void 0?n:s.custom,t)}const yA=t=>Array.isArray(t);function mG(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Au(n))}function pG(t){return yA(t)?t[t.length-1]||0:t}function gG(t,e){const n=uu(t,e);let{transitionEnd:s={},transition:r={},...i}=n||{};i={...i,...s};for(const o in i){const c=pG(i[o]);mG(t,o,c)}}function yG(t){return!!(Ms(t)&&t.add)}function xA(t,e){const n=t.getValue("willChange");if(yG(n))return n.add(e);if(!n&&Li.WillChange){const s=new Li.WillChange("auto");t.addValue("willChange",s),s.add(e)}}function fF(t){return t.props[tF]}const xG=t=>t!==null;function bG(t,{repeat:e,repeatType:n="loop"},s){const r=t.filter(xG),i=e&&n!=="loop"&&e%2===1?0:r.length-1;return r[i]}const vG={type:"spring",stiffness:500,damping:25,restSpeed:10},_G=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),AG={type:"keyframes",duration:.8},wG={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},jG=(t,{keyframes:e})=>e.length>2?AG:ed.has(t)?t.startsWith("scale")?_G(e[1]):vG:wG;function SG({when:t,delay:e,delayChildren:n,staggerChildren:s,staggerDirection:r,repeat:i,repeatType:o,repeatDelay:c,from:u,elapsed:f,...m}){return!!Object.keys(m).length}const $j=(t,e,n,s={},r,i)=>o=>{const c=Dj(s,t)||{},u=c.delay||s.delay||0;let{elapsed:f=0}=s;f=f-Ba(u);const m={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-f,onUpdate:g=>{e.set(g),c.onUpdate&&c.onUpdate(g)},onComplete:()=>{o(),c.onComplete&&c.onComplete()},name:t,motionValue:e,element:i?void 0:r};SG(c)||Object.assign(m,jG(t,m)),m.duration&&(m.duration=Ba(m.duration)),m.repeatDelay&&(m.repeatDelay=Ba(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let h=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(fA(m),m.delay===0&&(h=!0)),(Li.instantAnimations||Li.skipAnimations)&&(h=!0,fA(m),m.delay=0),m.allowFlatten=!c.type&&!c.ease,h&&!i&&e.get()!==void 0){const g=bG(m.keyframes,c);if(g!==void 0){Cn.update(()=>{m.onUpdate(g),m.onComplete()});return}}return c.isSync?new Nj(m):new WY(m)};function CG({protectedKeys:t,needsAnimating:e},n){const s=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,s}function hF(t,e,{delay:n=0,transitionOverride:s,type:r}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:o,...c}=e;s&&(i=s);const u=[],f=r&&t.animationState&&t.animationState.getState()[r];for(const m in c){const h=t.getValue(m,t.latestValues[m]??null),g=c[m];if(g===void 0||f&&CG(f,m))continue;const x={delay:n,...Dj(i||{},m)},b=h.get();if(b!==void 0&&!h.isAnimating&&!Array.isArray(g)&&g===b&&!x.velocity)continue;let A=!1;if(window.MotionHandoffAnimation){const j=fF(t);if(j){const C=window.MotionHandoffAnimation(j,m,Cn);C!==null&&(x.startTime=C,A=!0)}}xA(t,m),h.start($j(m,h,g,t.shouldReduceMotion&&R3.has(m)?{type:!1}:x,t,A));const _=h.animation;_&&u.push(_)}return o&&Promise.all(u).then(()=>{Cn.update(()=>{o&&gG(t,o)})}),u}function mF(t,e,n,s=0,r=1){const i=Array.from(t).sort((f,m)=>f.sortNodePosition(m)).indexOf(e),o=t.size,c=(o-1)*s;return typeof n=="function"?n(i,o):r===1?i*s:c-i*s}function bA(t,e,n={}){const s=uu(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:r=t.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(r=n.transitionOverride);const i=s?()=>Promise.all(hF(t,s,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:f=0,staggerChildren:m,staggerDirection:h}=r;return NG(t,e,u,f,m,h,n)}:()=>Promise.resolve(),{when:c}=r;if(c){const[u,f]=c==="beforeChildren"?[i,o]:[o,i];return u().then(()=>f())}else return Promise.all([i(),o(n.delay)])}function NG(t,e,n=0,s=0,r=0,i=1,o){const c=[];for(const u of t.variantChildren)u.notify("AnimationStart",e),c.push(bA(u,e,{...o,delay:n+(typeof s=="function"?0:s)+mF(t.variantChildren,u,s,r,i)}).then(()=>u.notify("AnimationComplete",e)));return Promise.all(c)}function kG(t,e,n={}){t.notify("AnimationStart",e);let s;if(Array.isArray(e)){const r=e.map(i=>bA(t,i,n));s=Promise.all(r)}else if(typeof e=="string")s=bA(t,e,n);else{const r=typeof e=="function"?uu(t,e,n.custom):e;s=Promise.all(hF(t,r,n))}return s.then(()=>{t.notify("AnimationComplete",e)})}function pF(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let s=0;s<n;s++)if(e[s]!==t[s])return!1;return!0}const DG=Pj.length;function gF(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?gF(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<DG;n++){const s=Pj[n],r=t.props[s];(mh(r)||r===!1)&&(e[s]=r)}return e}const EG=[...Oj].reverse(),TG=Oj.length;function MG(t){return e=>Promise.all(e.map(({animation:n,options:s})=>kG(t,n,s)))}function RG(t){let e=MG(t),n=kE(),s=!0;const r=u=>(f,m)=>{const h=uu(t,m,u==="exit"?t.presenceContext?.custom:void 0);if(h){const{transition:g,transitionEnd:x,...b}=h;f={...f,...b,...x}}return f};function i(u){e=u(t)}function o(u){const{props:f}=t,m=gF(t.parent)||{},h=[],g=new Set;let x={},b=1/0;for(let _=0;_<TG;_++){const j=EG[_],C=n[j],k=f[j]!==void 0?f[j]:m[j],E=mh(k),N=j===u?C.isActive:null;N===!1&&(b=_);let L=k===m[j]&&k!==f[j]&&E;if(L&&s&&t.manuallyAnimateOnMount&&(L=!1),C.protectedKeys={...x},!C.isActive&&N===null||!k&&!C.prevProp||mx(k)||typeof k=="boolean")continue;const M=OG(C.prevProp,k);let T=M||j===u&&C.isActive&&!L&&E||_>b&&E,O=!1;const I=Array.isArray(k)?k:[k];let $=I.reduce(r(j),{});N===!1&&($={});const{prevResolvedValues:H={}}=C,V={...H,...$},G=P=>{T=!0,g.has(P)&&(O=!0,g.delete(P)),C.needsAnimating[P]=!0;const Z=t.getValue(P);Z&&(Z.liveStyle=!1)};for(const P in V){const Z=$[P],ne=H[P];if(x.hasOwnProperty(P))continue;let D=!1;yA(Z)&&yA(ne)?D=!pF(Z,ne):D=Z!==ne,D?Z!=null?G(P):g.add(P):Z!==void 0&&g.has(P)?G(P):C.protectedKeys[P]=!0}C.prevProp=k,C.prevResolvedValues=$,C.isActive&&(x={...x,...$}),s&&t.blockInitialAnimation&&(T=!1);const U=L&&M;T&&(!U||O)&&h.push(...I.map(P=>{const Z={type:j};if(typeof P=="string"&&s&&!U&&t.manuallyAnimateOnMount&&t.parent){const{parent:ne}=t,D=uu(ne,P);if(ne.enteringChildren&&D){const{delayChildren:B}=D.transition||{};Z.delay=mF(ne.enteringChildren,t,B)}}return{animation:P,options:Z}}))}if(g.size){const _={};if(typeof f.initial!="boolean"){const j=uu(t,Array.isArray(f.initial)?f.initial[0]:f.initial);j&&j.transition&&(_.transition=j.transition)}g.forEach(j=>{const C=t.getBaseTarget(j),k=t.getValue(j);k&&(k.liveStyle=!0),_[j]=C??null}),h.push({animation:_})}let A=!!h.length;return s&&(f.initial===!1||f.initial===f.animate)&&!t.manuallyAnimateOnMount&&(A=!1),s=!1,A?e(h):Promise.resolve()}function c(u,f){if(n[u].isActive===f)return Promise.resolve();t.variantChildren?.forEach(h=>h.animationState?.setActive(u,f)),n[u].isActive=f;const m=o(u);for(const h in n)n[h].protectedKeys={};return m}return{animateChanges:o,setActive:c,setAnimateFunction:i,getState:()=>n,reset:()=>{n=kE(),s=!0}}}function OG(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!pF(e,t):!1}function ml(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function kE(){return{animate:ml(!0),whileInView:ml(),whileHover:ml(),whileTap:ml(),whileDrag:ml(),whileFocus:ml(),exit:ml()}}class $o{constructor(e){this.isMounted=!1,this.node=e}update(){}}class PG extends $o{constructor(e){super(e),e.animationState||(e.animationState=RG(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();mx(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let LG=0;class FG extends $o{constructor(){super(...arguments),this.id=LG++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const r=this.node.animationState.setActive("exit",!e);n&&!e&&r.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const BG={animation:{Feature:PG},exit:{Feature:FG}};function gh(t,e,n,s={passive:!0}){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n)}function Jh(t){return{point:{x:t.pageX,y:t.pageY}}}const IG=t=>e=>Mj(e)&&t(e,Jh(e));function Kf(t,e,n,s){return gh(t,e,IG(n),s)}const yF=1e-4,VG=1-yF,zG=1+yF,xF=.01,$G=0-xF,HG=0+xF;function Is(t){return t.max-t.min}function UG(t,e,n){return Math.abs(t-e)<=n}function DE(t,e,n,s=.5){t.origin=s,t.originPoint=Dn(e.min,e.max,t.origin),t.scale=Is(n)/Is(e),t.translate=Dn(n.min,n.max,t.origin)-t.originPoint,(t.scale>=VG&&t.scale<=zG||isNaN(t.scale))&&(t.scale=1),(t.translate>=$G&&t.translate<=HG||isNaN(t.translate))&&(t.translate=0)}function Qf(t,e,n,s){DE(t.x,e.x,n.x,s?s.originX:void 0),DE(t.y,e.y,n.y,s?s.originY:void 0)}function EE(t,e,n){t.min=n.min+e.min,t.max=t.min+Is(e)}function WG(t,e,n){EE(t.x,e.x,n.x),EE(t.y,e.y,n.y)}function TE(t,e,n){t.min=e.min-n.min,t.max=t.min+Is(e)}function Xf(t,e,n){TE(t.x,e.x,n.x),TE(t.y,e.y,n.y)}function Rr(t){return[t("x"),t("y")]}const bF=({current:t})=>t?t.ownerDocument.defaultView:null,ME=(t,e)=>Math.abs(t-e);function YG(t,e){const n=ME(t.x,e.x),s=ME(t.y,e.y);return Math.sqrt(n**2+s**2)}class vF{constructor(e,n,{transformPagePoint:s,contextWindow:r=window,dragSnapToOrigin:i=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=B0(this.lastMoveEventInfo,this.history),x=this.startEvent!==null,b=YG(g.offset,{x:0,y:0})>=this.distanceThreshold;if(!x&&!b)return;const{point:A}=g,{timestamp:_}=bs;this.history.push({...A,timestamp:_});const{onStart:j,onMove:C}=this.handlers;x||(j&&j(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),C&&C(this.lastMoveEvent,g)},this.handlePointerMove=(g,x)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=F0(x,this.transformPagePoint),Cn.update(this.updatePoint,!0)},this.handlePointerUp=(g,x)=>{this.end();const{onEnd:b,onSessionEnd:A,resumeAnimation:_}=this.handlers;if(this.dragSnapToOrigin&&_&&_(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const j=B0(g.type==="pointercancel"?this.lastMoveEventInfo:F0(x,this.transformPagePoint),this.history);this.startEvent&&b&&b(g,j),A&&A(g,j)},!Mj(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=s,this.distanceThreshold=o,this.contextWindow=r||window;const c=Jh(e),u=F0(c,this.transformPagePoint),{point:f}=u,{timestamp:m}=bs;this.history=[{...f,timestamp:m}];const{onSessionStart:h}=n;h&&h(e,B0(u,this.history)),this.removeListeners=Qh(Kf(this.contextWindow,"pointermove",this.handlePointerMove),Kf(this.contextWindow,"pointerup",this.handlePointerUp),Kf(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Mo(this.updatePoint)}}function F0(t,e){return e?{point:e(t.point)}:t}function RE(t,e){return{x:t.x-e.x,y:t.y-e.y}}function B0({point:t},e){return{point:t,delta:RE(t,_F(e)),offset:RE(t,qG(e)),velocity:GG(e,.1)}}function qG(t){return t[0]}function _F(t){return t[t.length-1]}function GG(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,s=null;const r=_F(t);for(;n>=0&&(s=t[n],!(r.timestamp-s.timestamp>Ba(e)));)n--;if(!s)return{x:0,y:0};const i=Ir(r.timestamp-s.timestamp);if(i===0)return{x:0,y:0};const o={x:(r.x-s.x)/i,y:(r.y-s.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function KG(t,{min:e,max:n},s){return e!==void 0&&t<e?t=s?Dn(e,t,s.min):Math.max(t,e):n!==void 0&&t>n&&(t=s?Dn(n,t,s.max):Math.min(t,n)),t}function OE(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function QG(t,{top:e,left:n,bottom:s,right:r}){return{x:OE(t.x,n,r),y:OE(t.y,e,s)}}function PE(t,e){let n=e.min-t.min,s=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,s]=[s,n]),{min:n,max:s}}function XG(t,e){return{x:PE(t.x,e.x),y:PE(t.y,e.y)}}function ZG(t,e){let n=.5;const s=Is(t),r=Is(e);return r>s?n=dh(e.min,e.max-s,t.min):s>r&&(n=dh(t.min,t.max-r,e.min)),Pi(0,1,n)}function JG(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const vA=.35;function eK(t=vA){return t===!1?t=0:t===!0&&(t=vA),{x:LE(t,"left","right"),y:LE(t,"top","bottom")}}function LE(t,e,n){return{min:FE(t,e),max:FE(t,n)}}function FE(t,e){return typeof t=="number"?t:t[e]||0}const tK=new WeakMap;class nK{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=zn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:s}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Jh(h).point)},o=(h,g)=>{const{drag:x,dragPropagation:b,onDragStart:A}=this.getProps();if(x&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=oq(x),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=g,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Rr(j=>{let C=this.getAxisMotionValue(j).get()||0;if(Ia.test(C)){const{projection:k}=this.visualElement;if(k&&k.layout){const E=k.layout.layoutBox[j];E&&(C=Is(E)*(parseFloat(C)/100))}}this.originPoint[j]=C}),A&&Cn.postRender(()=>A(h,g)),xA(this.visualElement,"transform");const{animationState:_}=this.visualElement;_&&_.setActive("whileDrag",!0)},c=(h,g)=>{this.latestPointerEvent=h,this.latestPanInfo=g;const{dragPropagation:x,dragDirectionLock:b,onDirectionLock:A,onDrag:_}=this.getProps();if(!x&&!this.openDragLock)return;const{offset:j}=g;if(b&&this.currentDirection===null){this.currentDirection=sK(j),this.currentDirection!==null&&A&&A(this.currentDirection);return}this.updateAxis("x",g.point,j),this.updateAxis("y",g.point,j),this.visualElement.render(),_&&_(h,g)},u=(h,g)=>{this.latestPointerEvent=h,this.latestPanInfo=g,this.stop(h,g),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>Rr(h=>this.getAnimationState(h)==="paused"&&this.getAxisMotionValue(h).animation?.play()),{dragSnapToOrigin:m}=this.getProps();this.panSession=new vF(e,{onSessionStart:i,onStart:o,onMove:c,onSessionEnd:u,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:m,distanceThreshold:s,contextWindow:bF(this.visualElement)})}stop(e,n){const s=e||this.latestPointerEvent,r=n||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!r||!s)return;const{velocity:o}=r;this.startAnimation(o);const{onDragEnd:c}=this.getProps();c&&Cn.postRender(()=>c(s,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,s){const{drag:r}=this.getProps();if(!s||!Bp(e,r,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(o=KG(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,r=this.constraints;e&&iu(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&s?this.constraints=QG(s.layoutBox,e):this.constraints=!1,this.elastic=eK(n),r!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Rr(i=>{this.constraints!==!1&&this.getAxisMotionValue(i)&&(this.constraints[i]=JG(s.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!iu(e))return!1;const s=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const i=rG(s,r.root,this.visualElement.getTransformPagePoint());let o=XG(r.layout.layoutBox,i);if(n){const c=n(tG(o));this.hasMutatedConstraints=!!c,c&&(o=rF(c))}return o}startAnimation(e){const{drag:n,dragMomentum:s,dragElastic:r,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:c}=this.getProps(),u=this.constraints||{},f=Rr(m=>{if(!Bp(m,n,this.currentDirection))return;let h=u&&u[m]||{};o&&(h={min:0,max:0});const g=r?200:1e6,x=r?40:1e7,b={type:"inertia",velocity:s?e[m]:0,bounceStiffness:g,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(m,b)});return Promise.all(f).then(c)}startAxisValueAnimation(e,n){const s=this.getAxisMotionValue(e);return xA(this.visualElement,e),s.start($j(e,s,0,n,this.visualElement,!1))}stopAnimation(){Rr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Rr(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),r=s[n];return r||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){Rr(n=>{const{drag:s}=this.getProps();if(!Bp(n,s,this.currentDirection))return;const{projection:r}=this.visualElement,i=this.getAxisMotionValue(n);if(r&&r.layout){const{min:o,max:c}=r.layout.layoutBox[n];i.set(e[n]-Dn(o,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!iu(n)||!s||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Rr(o=>{const c=this.getAxisMotionValue(o);if(c&&this.constraints!==!1){const u=c.get();r[o]=ZG({min:u,max:u},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),Rr(o=>{if(!Bp(o,e,null))return;const c=this.getAxisMotionValue(o),{min:u,max:f}=this.constraints[o];c.set(Dn(u,f,r[o]))})}addListeners(){if(!this.visualElement.current)return;tK.set(this.visualElement,this);const e=this.visualElement.current,n=Kf(e,"pointerdown",u=>{const{drag:f,dragListener:m=!0}=this.getProps();f&&m&&this.start(u)}),s=()=>{const{dragConstraints:u}=this.getProps();iu(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,i=r.addEventListener("measure",s);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),Cn.read(s);const o=gh(window,"resize",()=>this.scalePositionWithinConstraints()),c=r.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:f})=>{this.isDragging&&f&&(Rr(m=>{const h=this.getAxisMotionValue(m);h&&(this.originPoint[m]+=u[m].translate,h.set(h.get()+u[m].translate))}),this.visualElement.render())}));return()=>{o(),n(),i(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:r=!1,dragConstraints:i=!1,dragElastic:o=vA,dragMomentum:c=!0}=e;return{...e,drag:n,dragDirectionLock:s,dragPropagation:r,dragConstraints:i,dragElastic:o,dragMomentum:c}}}function Bp(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function sK(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class rK extends $o{constructor(e){super(e),this.removeGroupControls=zr,this.removeListeners=zr,this.controls=new nK(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||zr}unmount(){this.removeGroupControls(),this.removeListeners()}}const BE=t=>(e,n)=>{t&&Cn.postRender(()=>t(e,n))};class aK extends $o{constructor(){super(...arguments),this.removePointerDownListener=zr}onPointerDown(e){this.session=new vF(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:bF(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:s,onPanEnd:r}=this.node.getProps();return{onSessionStart:BE(e),onStart:BE(n),onMove:s,onEnd:(i,o)=>{delete this.session,r&&Cn.postRender(()=>r(i,o))}}}mount(){this.removePointerDownListener=Kf(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Eg={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function IE(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const uf={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Ct.test(t))t=parseFloat(t);else return t;const n=IE(t,e.target.x),s=IE(t,e.target.y);return`${n}% ${s}%`}},iK={correct:(t,{treeScale:e,projectionDelta:n})=>{const s=t,r=Ro.parse(t);if(r.length>5)return s;const i=Ro.createTransformer(t),o=typeof r[0]!="number"?1:0,c=n.x.scale*e.x,u=n.y.scale*e.y;r[0+o]/=c,r[1+o]/=u;const f=Dn(c,u,.5);return typeof r[2+o]=="number"&&(r[2+o]/=f),typeof r[3+o]=="number"&&(r[3+o]/=f),i(r)}};let I0=!1;class oK extends v.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s,layoutId:r}=this.props,{projection:i}=e;Dq(lK),i&&(n.group&&n.group.add(i),s&&s.register&&r&&s.register(i),I0&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Eg.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:s,drag:r,isPresent:i}=this.props,{projection:o}=s;return o&&(o.isPresent=i,I0=!0,r||e.layoutDependency!==n||n===void 0||e.isPresent!==i?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||Cn.postRender(()=>{const c=o.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Tj.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:r}=e;I0=!0,r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),s&&s.deregister&&s.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function AF(t){const[e,n]=U3(),s=v.useContext(cj);return a.jsx(oK,{...t,layoutGroup:s,switchLayoutGroup:v.useContext(nF),isPresent:e,safeToRemove:n})}const lK={borderRadius:{...uf,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:uf,borderTopRightRadius:uf,borderBottomLeftRadius:uf,borderBottomRightRadius:uf,boxShadow:iK};function cK(t,e,n){const s=Ms(t)?t:Au(t);return s.start($j("",s,e,n)),s.animation}const uK=(t,e)=>t.depth-e.depth;class dK{constructor(){this.children=[],this.isDirty=!1}add(e){fj(this.children,e),this.isDirty=!0}remove(e){hj(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(uK),this.isDirty=!1,this.children.forEach(e)}}function fK(t,e){const n=Zs.now(),s=({timestamp:r})=>{const i=r-n;i>=e&&(Mo(s),t(i-e))};return Cn.setup(s,!0),()=>Mo(s)}const wF=["TopLeft","TopRight","BottomLeft","BottomRight"],hK=wF.length,VE=t=>typeof t=="string"?parseFloat(t):t,zE=t=>typeof t=="number"||Ct.test(t);function mK(t,e,n,s,r,i){r?(t.opacity=Dn(0,n.opacity??1,pK(s)),t.opacityExit=Dn(e.opacity??1,0,gK(s))):i&&(t.opacity=Dn(e.opacity??1,n.opacity??1,s));for(let o=0;o<hK;o++){const c=`border${wF[o]}Radius`;let u=$E(e,c),f=$E(n,c);if(u===void 0&&f===void 0)continue;u||(u=0),f||(f=0),u===0||f===0||zE(u)===zE(f)?(t[c]=Math.max(Dn(VE(u),VE(f),s),0),(Ia.test(f)||Ia.test(u))&&(t[c]+="%")):t[c]=f}(e.rotate||n.rotate)&&(t.rotate=Dn(e.rotate||0,n.rotate||0,s))}function $E(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const pK=jF(0,.5,u3),gK=jF(.5,.95,zr);function jF(t,e,n){return s=>s<t?0:s>e?1:n(dh(t,e,s))}function HE(t,e){t.min=e.min,t.max=e.max}function Tr(t,e){HE(t.x,e.x),HE(t.y,e.y)}function UE(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function WE(t,e,n,s,r){return t-=e,t=ry(t,1/n,s),r!==void 0&&(t=ry(t,1/r,s)),t}function yK(t,e=0,n=1,s=.5,r,i=t,o=t){if(Ia.test(e)&&(e=parseFloat(e),e=Dn(o.min,o.max,e/100)-o.min),typeof e!="number")return;let c=Dn(i.min,i.max,s);t===i&&(c-=e),t.min=WE(t.min,e,n,c,r),t.max=WE(t.max,e,n,c,r)}function YE(t,e,[n,s,r],i,o){yK(t,e[n],e[s],e[r],e.scale,i,o)}const xK=["x","scaleX","originX"],bK=["y","scaleY","originY"];function qE(t,e,n,s){YE(t.x,e,xK,n?n.x:void 0,s?s.x:void 0),YE(t.y,e,bK,n?n.y:void 0,s?s.y:void 0)}function GE(t){return t.translate===0&&t.scale===1}function SF(t){return GE(t.x)&&GE(t.y)}function KE(t,e){return t.min===e.min&&t.max===e.max}function vK(t,e){return KE(t.x,e.x)&&KE(t.y,e.y)}function QE(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function CF(t,e){return QE(t.x,e.x)&&QE(t.y,e.y)}function XE(t){return Is(t.x)/Is(t.y)}function ZE(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class _K{constructor(){this.members=[]}add(e){fj(this.members,e),e.scheduleRender()}remove(e){if(hj(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let s;for(let r=n;r>=0;r--){const i=this.members[r];if(i.isPresent!==!1){s=i;break}}return s?(this.promote(s),!0):!1}promote(e,n){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,n&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:s}=e;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function AK(t,e,n){let s="";const r=t.x.translate/e.x,i=t.y.translate/e.y,o=n?.z||0;if((r||i||o)&&(s=`translate3d(${r}px, ${i}px, ${o}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:f,rotate:m,rotateX:h,rotateY:g,skewX:x,skewY:b}=n;f&&(s=`perspective(${f}px) ${s}`),m&&(s+=`rotate(${m}deg) `),h&&(s+=`rotateX(${h}deg) `),g&&(s+=`rotateY(${g}deg) `),x&&(s+=`skewX(${x}deg) `),b&&(s+=`skewY(${b}deg) `)}const c=t.x.scale*e.x,u=t.y.scale*e.y;return(c!==1||u!==1)&&(s+=`scale(${c}, ${u})`),s||"none"}const V0=["","X","Y","Z"],wK=1e3;let jK=0;function z0(t,e,n,s){const{latestValues:r}=e;r[t]&&(n[t]=r[t],e.setStaticValue(t,0),s&&(s[t]=0))}function NF(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=fF(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:r,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Cn,!(r||i))}const{parent:s}=t;s&&!s.hasCheckedOptimisedAppear&&NF(s)}function kF({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:s,resetTransform:r}){return class{constructor(o={},c=e?.()){this.id=jK++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(NK),this.nodes.forEach(TK),this.nodes.forEach(MK),this.nodes.forEach(kK)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new dK)}addEventListener(o,c){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new gj),this.eventHandlers.get(o).add(c)}notifyListeners(o,...c){const u=this.eventHandlers.get(o);u&&u.notify(...c)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=H3(o)&&!hq(o),this.instance=o;const{layoutId:c,layout:u,visualElement:f}=this.options;if(f&&!f.current&&f.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||c)&&(this.isLayoutDirty=!0),t){let m,h=0;const g=()=>this.root.updateBlockedByResize=!1;Cn.read(()=>{h=window.innerWidth}),t(o,()=>{const x=window.innerWidth;x!==h&&(h=x,this.root.updateBlockedByResize=!0,m&&m(),m=fK(g,250),Eg.hasAnimatedSinceResize&&(Eg.hasAnimatedSinceResize=!1,this.nodes.forEach(tT)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&f&&(c||u)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:h,hasRelativeLayoutChanged:g,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||f.getDefaultTransition()||FK,{onLayoutAnimationStart:A,onLayoutAnimationComplete:_}=f.getProps(),j=!this.targetLayout||!CF(this.targetLayout,x),C=!h&&g;if(this.options.layoutRoot||this.resumeFrom||C||h&&(j||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const k={...Dj(b,"layout"),onPlay:A,onComplete:_};(f.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k),this.setAnimationOrigin(m,C)}else h||tT(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Mo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(RK),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&NF(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const h=this.path[m];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:c,layout:u}=this.options;if(c===void 0&&!u)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(JE);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(eT);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(EK),this.nodes.forEach(SK),this.nodes.forEach(CK)):this.nodes.forEach(eT),this.clearAllSnapshots();const c=Zs.now();bs.delta=Pi(0,1e3/60,c-bs.timestamp),bs.timestamp=c,bs.isProcessing=!0,D0.update.process(bs),D0.preRender.process(bs),D0.render.process(bs),bs.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Tj.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(DK),this.sharedNodes.forEach(OK)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Cn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Cn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Is(this.snapshot.measuredBox.x)&&!Is(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=zn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(c=!1),c&&this.instance){const u=s(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!SF(this.projectionDelta),u=this.getTransformTemplate(),f=u?u(this.latestValues,""):void 0,m=f!==this.prevTransformTemplateValue;o&&this.instance&&(c||bl(this.latestValues)||m)&&(r(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const c=this.measurePageBox();let u=this.removeElementScroll(c);return o&&(u=this.removeTransform(u)),BK(u),{animationId:this.root.animationId,measuredBox:c,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return zn();const c=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(IK))){const{scroll:f}=this.root;f&&(ou(c.x,f.offset.x),ou(c.y,f.offset.y))}return c}removeElementScroll(o){const c=zn();if(Tr(c,o),this.scroll?.wasRoot)return c;for(let u=0;u<this.path.length;u++){const f=this.path[u],{scroll:m,options:h}=f;f!==this.root&&m&&h.layoutScroll&&(m.wasRoot&&Tr(c,o),ou(c.x,m.offset.x),ou(c.y,m.offset.y))}return c}applyTransform(o,c=!1){const u=zn();Tr(u,o);for(let f=0;f<this.path.length;f++){const m=this.path[f];!c&&m.options.layoutScroll&&m.scroll&&m!==m.root&&lu(u,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),bl(m.latestValues)&&lu(u,m.latestValues)}return bl(this.latestValues)&&lu(u,this.latestValues),u}removeTransform(o){const c=zn();Tr(c,o);for(let u=0;u<this.path.length;u++){const f=this.path[u];if(!f.instance||!bl(f.latestValues))continue;mA(f.latestValues)&&f.updateSnapshot();const m=zn(),h=f.measurePageBox();Tr(m,h),qE(c,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,m)}return bl(this.latestValues)&&qE(c,this.latestValues),c}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==bs.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:h}=this.options;if(!(!this.layout||!(m||h))){if(this.resolvedRelativeTargetAt=bs.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=zn(),this.relativeTargetOrigin=zn(),Xf(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),Tr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=zn(),this.targetWithTransforms=zn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),WG(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Tr(this.target,this.layout.layoutBox),iF(this.target,this.targetDelta)):Tr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=zn(),this.relativeTargetOrigin=zn(),Xf(this.relativeTargetOrigin,this.target,g.target),Tr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||mA(this.parent.latestValues)||aF(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const o=this.getLead(),c=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===bs.timestamp&&(u=!1),u)return;const{layout:f,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||m))return;Tr(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,g=this.treeScale.y;sG(this.layoutCorrected,this.treeScale,this.path,c),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=zn());const{target:x}=o;if(!x){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(UE(this.prevProjectionDelta.x,this.projectionDelta.x),UE(this.prevProjectionDelta.y,this.projectionDelta.y)),Qf(this.projectionDelta,this.layoutCorrected,x,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==g||!ZE(this.projectionDelta.x,this.prevProjectionDelta.x)||!ZE(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=cu(),this.projectionDelta=cu(),this.projectionDeltaWithTransform=cu()}setAnimationOrigin(o,c=!1){const u=this.snapshot,f=u?u.latestValues:{},m={...this.latestValues},h=cu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const g=zn(),x=u?u.source:void 0,b=this.layout?this.layout.source:void 0,A=x!==b,_=this.getStack(),j=!_||_.members.length<=1,C=!!(A&&!j&&this.options.crossfade===!0&&!this.path.some(LK));this.animationProgress=0;let k;this.mixTargetDelta=E=>{const N=E/1e3;nT(h.x,o.x,N),nT(h.y,o.y,N),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Xf(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),PK(this.relativeTarget,this.relativeTargetOrigin,g,N),k&&vK(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=zn()),Tr(k,this.relativeTarget)),A&&(this.animationValues=m,mK(m,f,this.latestValues,N,C,j)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=N},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Mo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Cn.update(()=>{Eg.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Au(0)),this.currentAnimation=cK(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),o.onUpdate&&o.onUpdate(c)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(wK),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:c,target:u,layout:f,latestValues:m}=o;if(!(!c||!u||!f)){if(this!==o&&this.layout&&f&&DF(this.options.animationType,this.layout.layoutBox,f.layoutBox)){u=this.target||zn();const h=Is(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+h;const g=Is(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+g}Tr(c,u),lu(c,m),Qf(this.projectionDeltaWithTransform,this.layoutCorrected,c,m)}}registerSharedNode(o,c){this.sharedNodes.has(o)||this.sharedNodes.set(o,new _K),this.sharedNodes.get(o).add(c);const f=c.options.initialPromotionConfig;c.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(c):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:c,preserveFollowOpacity:u}={}){const f=this.getStack();f&&f.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let c=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(c=!0),!c)return;const f={};u.z&&z0("z",o,f,this.animationValues);for(let m=0;m<V0.length;m++)z0(`rotate${V0[m]}`,o,f,this.animationValues),z0(`skew${V0[m]}`,o,f,this.animationValues);o.render();for(const m in f)o.setStaticValue(m,f[m]),this.animationValues&&(this.animationValues[m]=f[m]);o.scheduleRender()}applyProjectionStyles(o,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Dg(c?.pointerEvents)||"",o.transform=u?u(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Dg(c?.pointerEvents)||""),this.hasProjected&&!bl(this.latestValues)&&(o.transform=u?u({},""):"none",this.hasProjected=!1);return}o.visibility="";const m=f.animationValues||f.latestValues;this.applyTransformsToTarget();let h=AK(this.projectionDeltaWithTransform,this.treeScale,m);u&&(h=u(m,h)),o.transform=h;const{x:g,y:x}=this.projectionDelta;o.transformOrigin=`${g.origin*100}% ${x.origin*100}% 0`,f.animationValues?o.opacity=f===this?m.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:o.opacity=f===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const b in ph){if(m[b]===void 0)continue;const{correct:A,applyTo:_,isCSSVariable:j}=ph[b],C=h==="none"?m[b]:A(m[b],f);if(_){const k=_.length;for(let E=0;E<k;E++)o[_[E]]=C}else j?this.options.visualElement.renderState.vars[b]=C:o[b]=C}this.options.layoutId&&(o.pointerEvents=f===this?Dg(c?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(JE),this.root.sharedNodes.clear()}}}function SK(t){t.updateLayout()}function CK(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=t.layout,{animationType:r}=t.options,i=e.source!==t.layout.source;r==="size"?Rr(m=>{const h=i?e.measuredBox[m]:e.layoutBox[m],g=Is(h);h.min=n[m].min,h.max=h.min+g}):DF(r,e.layoutBox,n)&&Rr(m=>{const h=i?e.measuredBox[m]:e.layoutBox[m],g=Is(n[m]);h.max=h.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[m].max=t.relativeTarget[m].min+g)});const o=cu();Qf(o,n,e.layoutBox);const c=cu();i?Qf(c,t.applyTransform(s,!0),e.measuredBox):Qf(c,n,e.layoutBox);const u=!SF(o);let f=!1;if(!t.resumeFrom){const m=t.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:h,layout:g}=m;if(h&&g){const x=zn();Xf(x,e.layoutBox,h.layoutBox);const b=zn();Xf(b,n,g.layoutBox),CF(x,b)||(f=!0),m.options.layoutRoot&&(t.relativeTarget=b,t.relativeTargetOrigin=x,t.relativeParent=m)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:c,layoutDelta:o,hasLayoutChanged:u,hasRelativeLayoutChanged:f})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function NK(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function kK(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function DK(t){t.clearSnapshot()}function JE(t){t.clearMeasurements()}function eT(t){t.isLayoutDirty=!1}function EK(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function tT(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function TK(t){t.resolveTargetDelta()}function MK(t){t.calcProjection()}function RK(t){t.resetSkewAndRotation()}function OK(t){t.removeLeadSnapshot()}function nT(t,e,n){t.translate=Dn(e.translate,0,n),t.scale=Dn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function sT(t,e,n,s){t.min=Dn(e.min,n.min,s),t.max=Dn(e.max,n.max,s)}function PK(t,e,n,s){sT(t.x,e.x,n.x,s),sT(t.y,e.y,n.y,s)}function LK(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const FK={duration:.45,ease:[.4,0,.1,1]},rT=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),aT=rT("applewebkit/")&&!rT("chrome/")?Math.round:zr;function iT(t){t.min=aT(t.min),t.max=aT(t.max)}function BK(t){iT(t.x),iT(t.y)}function DF(t,e,n){return t==="position"||t==="preserve-aspect"&&!UG(XE(e),XE(n),.2)}function IK(t){return t!==t.root&&t.scroll?.wasRoot}const VK=kF({attachResizeListener:(t,e)=>gh(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),$0={current:void 0},EF=kF({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!$0.current){const t=new VK({});t.mount(window),t.setOptions({layoutScroll:!0}),$0.current=t}return $0.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),zK={pan:{Feature:aK},drag:{Feature:rK,ProjectionNode:EF,MeasureLayout:AF}};function oT(t,e,n){const{props:s}=t;t.animationState&&s.whileHover&&t.animationState.setActive("whileHover",n==="Start");const r="onHover"+n,i=s[r];i&&Cn.postRender(()=>i(e,Jh(e)))}class $K extends $o{mount(){const{current:e}=this.node;e&&(this.unmount=lq(e,(n,s)=>(oT(this.node,s,"Start"),r=>oT(this.node,r,"End"))))}unmount(){}}class HK extends $o{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Qh(gh(this.node.current,"focus",()=>this.onFocus()),gh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function lT(t,e,n){const{props:s}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&s.whileTap&&t.animationState.setActive("whileTap",n==="Start");const r="onTap"+(n==="End"?"":n),i=s[r];i&&Cn.postRender(()=>i(e,Jh(e)))}class UK extends $o{mount(){const{current:e}=this.node;e&&(this.unmount=fq(e,(n,s)=>(lT(this.node,s,"Start"),(r,{success:i})=>lT(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const _A=new WeakMap,H0=new WeakMap,WK=t=>{const e=_A.get(t.target);e&&e(t)},YK=t=>{t.forEach(WK)};function qK({root:t,...e}){const n=t||document;H0.has(n)||H0.set(n,{});const s=H0.get(n),r=JSON.stringify(e);return s[r]||(s[r]=new IntersectionObserver(YK,{root:t,...e})),s[r]}function GK(t,e,n){const s=qK(e);return _A.set(t,n),s.observe(t),()=>{_A.delete(t),s.unobserve(t)}}const KK={some:0,all:1};class QK extends $o{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:s,amount:r="some",once:i}=e,o={root:n?n.current:void 0,rootMargin:s,threshold:typeof r=="number"?r:KK[r]},c=u=>{const{isIntersecting:f}=u;if(this.isInView===f||(this.isInView=f,i&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:m,onViewportLeave:h}=this.node.getProps(),g=f?m:h;g&&g(u)};return GK(this.node.current,o,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(XK(e,n))&&this.startObserver()}unmount(){}}function XK({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const ZK={inView:{Feature:QK},tap:{Feature:UK},focus:{Feature:HK},hover:{Feature:$K}},JK={layout:{ProjectionNode:EF,MeasureLayout:AF}},eQ={...BG,...ZK,...zK,...JK},AA=eG(eQ,hG);var df={},Pf={exports:{}},tQ=Pf.exports,cT;function nQ(){return cT||(cT=1,(function(t,e){(function(n,s){s(e)})(tQ,(function(n){var s=function(){return s=Object.assign||function(i){for(var o,c=1,u=arguments.length;c<u;c++)for(var f in o=arguments[c])Object.prototype.hasOwnProperty.call(o,f)&&(i[f]=o[f]);return i},s.apply(this,arguments)},r=(function(){function i(o,c,u){var f=this;this.endVal=c,this.options=u,this.version="2.9.0",this.defaults={startVal:0,decimalPlaces:0,duration:2,useEasing:!0,useGrouping:!0,useIndianSeparators:!1,smartEasingThreshold:999,smartEasingAmount:333,separator:",",decimal:".",prefix:"",suffix:"",enableScrollSpy:!1,scrollSpyDelay:200,scrollSpyOnce:!1},this.finalEndVal=null,this.useEasing=!0,this.countDown=!1,this.error="",this.startVal=0,this.paused=!0,this.once=!1,this.count=function(m){f.startTime||(f.startTime=m);var h=m-f.startTime;f.remaining=f.duration-h,f.useEasing?f.countDown?f.frameVal=f.startVal-f.easingFn(h,0,f.startVal-f.endVal,f.duration):f.frameVal=f.easingFn(h,f.startVal,f.endVal-f.startVal,f.duration):f.frameVal=f.startVal+(f.endVal-f.startVal)*(h/f.duration);var g=f.countDown?f.frameVal<f.endVal:f.frameVal>f.endVal;f.frameVal=g?f.endVal:f.frameVal,f.frameVal=Number(f.frameVal.toFixed(f.options.decimalPlaces)),f.printValue(f.frameVal),h<f.duration?f.rAF=requestAnimationFrame(f.count):f.finalEndVal!==null?f.update(f.finalEndVal):f.options.onCompleteCallback&&f.options.onCompleteCallback()},this.formatNumber=function(m){var h,g,x,b,A=m<0?"-":"";h=Math.abs(m).toFixed(f.options.decimalPlaces);var _=(h+="").split(".");if(g=_[0],x=_.length>1?f.options.decimal+_[1]:"",f.options.useGrouping){b="";for(var j=3,C=0,k=0,E=g.length;k<E;++k)f.options.useIndianSeparators&&k===4&&(j=2,C=1),k!==0&&C%j==0&&(b=f.options.separator+b),C++,b=g[E-k-1]+b;g=b}return f.options.numerals&&f.options.numerals.length&&(g=g.replace(/[0-9]/g,(function(N){return f.options.numerals[+N]})),x=x.replace(/[0-9]/g,(function(N){return f.options.numerals[+N]}))),A+f.options.prefix+g+x+f.options.suffix},this.easeOutExpo=function(m,h,g,x){return g*(1-Math.pow(2,-10*m/x))*1024/1023+h},this.options=s(s({},this.defaults),u),this.formattingFn=this.options.formattingFn?this.options.formattingFn:this.formatNumber,this.easingFn=this.options.easingFn?this.options.easingFn:this.easeOutExpo,this.el=typeof o=="string"?document.getElementById(o):o,c=c??this.parse(this.el.innerHTML),this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.endVal=this.validateValue(c),this.options.decimalPlaces=Math.max(this.options.decimalPlaces),this.resetDuration(),this.options.separator=String(this.options.separator),this.useEasing=this.options.useEasing,this.options.separator===""&&(this.options.useGrouping=!1),this.el?this.printValue(this.startVal):this.error="[CountUp] target is null or undefined",typeof window<"u"&&this.options.enableScrollSpy&&(this.error?console.error(this.error,o):(window.onScrollFns=window.onScrollFns||[],window.onScrollFns.push((function(){return f.handleScroll(f)})),window.onscroll=function(){window.onScrollFns.forEach((function(m){return m()}))},this.handleScroll(this)))}return i.prototype.handleScroll=function(o){if(o&&window&&!o.once){var c=window.innerHeight+window.scrollY,u=o.el.getBoundingClientRect(),f=u.top+window.pageYOffset,m=u.top+u.height+window.pageYOffset;m<c&&m>window.scrollY&&o.paused?(o.paused=!1,setTimeout((function(){return o.start()}),o.options.scrollSpyDelay),o.options.scrollSpyOnce&&(o.once=!0)):(window.scrollY>m||f>c)&&!o.paused&&o.reset()}},i.prototype.determineDirectionAndSmartEasing=function(){var o=this.finalEndVal?this.finalEndVal:this.endVal;this.countDown=this.startVal>o;var c=o-this.startVal;if(Math.abs(c)>this.options.smartEasingThreshold&&this.options.useEasing){this.finalEndVal=o;var u=this.countDown?1:-1;this.endVal=o+u*this.options.smartEasingAmount,this.duration=this.duration/2}else this.endVal=o,this.finalEndVal=null;this.finalEndVal!==null?this.useEasing=!1:this.useEasing=this.options.useEasing},i.prototype.start=function(o){this.error||(this.options.onStartCallback&&this.options.onStartCallback(),o&&(this.options.onCompleteCallback=o),this.duration>0?(this.determineDirectionAndSmartEasing(),this.paused=!1,this.rAF=requestAnimationFrame(this.count)):this.printValue(this.endVal))},i.prototype.pauseResume=function(){this.paused?(this.startTime=null,this.duration=this.remaining,this.startVal=this.frameVal,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count)):cancelAnimationFrame(this.rAF),this.paused=!this.paused},i.prototype.reset=function(){cancelAnimationFrame(this.rAF),this.paused=!0,this.resetDuration(),this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.printValue(this.startVal)},i.prototype.update=function(o){cancelAnimationFrame(this.rAF),this.startTime=null,this.endVal=this.validateValue(o),this.endVal!==this.frameVal&&(this.startVal=this.frameVal,this.finalEndVal==null&&this.resetDuration(),this.finalEndVal=null,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count))},i.prototype.printValue=function(o){var c;if(this.el){var u=this.formattingFn(o);!((c=this.options.plugin)===null||c===void 0)&&c.render?this.options.plugin.render(this.el,u):this.el.tagName==="INPUT"?this.el.value=u:this.el.tagName==="text"||this.el.tagName==="tspan"?this.el.textContent=u:this.el.innerHTML=u}},i.prototype.ensureNumber=function(o){return typeof o=="number"&&!isNaN(o)},i.prototype.validateValue=function(o){var c=Number(o);return this.ensureNumber(c)?c:(this.error="[CountUp] invalid start or end value: ".concat(o),null)},i.prototype.resetDuration=function(){this.startTime=null,this.duration=1e3*Number(this.options.duration),this.remaining=this.duration},i.prototype.parse=function(o){var c=function(h){return h.replace(/([.,'  ])/g,"\\$1")},u=c(this.options.separator),f=c(this.options.decimal),m=o.replace(new RegExp(u,"g"),"").replace(new RegExp(f,"g"),".");return parseFloat(m)},i})();n.CountUp=r}))})(Pf,Pf.exports)),Pf.exports}var uT;function sQ(){if(uT)return df;uT=1,Object.defineProperty(df,"__esModule",{value:!0});var t=Hy(),e=nQ();function n(T,O){var I=T==null?null:typeof Symbol<"u"&&T[Symbol.iterator]||T["@@iterator"];if(I!=null){var $,H,V,G,U=[],R=!0,P=!1;try{if(V=(I=I.call(T)).next,O!==0)for(;!(R=($=V.call(I)).done)&&(U.push($.value),U.length!==O);R=!0);}catch(Z){P=!0,H=Z}finally{try{if(!R&&I.return!=null&&(G=I.return(),Object(G)!==G))return}finally{if(P)throw H}}return U}}function s(T,O){var I=Object.keys(T);if(Object.getOwnPropertySymbols){var $=Object.getOwnPropertySymbols(T);O&&($=$.filter(function(H){return Object.getOwnPropertyDescriptor(T,H).enumerable})),I.push.apply(I,$)}return I}function r(T){for(var O=1;O<arguments.length;O++){var I=arguments[O]!=null?arguments[O]:{};O%2?s(Object(I),!0).forEach(function($){c(T,$,I[$])}):Object.getOwnPropertyDescriptors?Object.defineProperties(T,Object.getOwnPropertyDescriptors(I)):s(Object(I)).forEach(function($){Object.defineProperty(T,$,Object.getOwnPropertyDescriptor(I,$))})}return T}function i(T,O){if(typeof T!="object"||!T)return T;var I=T[Symbol.toPrimitive];if(I!==void 0){var $=I.call(T,O);if(typeof $!="object")return $;throw new TypeError("@@toPrimitive must return a primitive value.")}return(O==="string"?String:Number)(T)}function o(T){var O=i(T,"string");return typeof O=="symbol"?O:String(O)}function c(T,O,I){return O=o(O),O in T?Object.defineProperty(T,O,{value:I,enumerable:!0,configurable:!0,writable:!0}):T[O]=I,T}function u(){return u=Object.assign?Object.assign.bind():function(T){for(var O=1;O<arguments.length;O++){var I=arguments[O];for(var $ in I)Object.prototype.hasOwnProperty.call(I,$)&&(T[$]=I[$])}return T},u.apply(this,arguments)}function f(T,O){if(T==null)return{};var I={},$=Object.keys(T),H,V;for(V=0;V<$.length;V++)H=$[V],!(O.indexOf(H)>=0)&&(I[H]=T[H]);return I}function m(T,O){if(T==null)return{};var I=f(T,O),$,H;if(Object.getOwnPropertySymbols){var V=Object.getOwnPropertySymbols(T);for(H=0;H<V.length;H++)$=V[H],!(O.indexOf($)>=0)&&Object.prototype.propertyIsEnumerable.call(T,$)&&(I[$]=T[$])}return I}function h(T,O){return g(T)||n(T,O)||x(T,O)||A()}function g(T){if(Array.isArray(T))return T}function x(T,O){if(T){if(typeof T=="string")return b(T,O);var I=Object.prototype.toString.call(T).slice(8,-1);if(I==="Object"&&T.constructor&&(I=T.constructor.name),I==="Map"||I==="Set")return Array.from(T);if(I==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I))return b(T,O)}}function b(T,O){(O==null||O>T.length)&&(O=T.length);for(var I=0,$=new Array(O);I<O;I++)$[I]=T[I];return $}function A(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var _=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?t.useLayoutEffect:t.useEffect;function j(T){var O=t.useRef(T);return _(function(){O.current=T}),t.useCallback(function(){for(var I=arguments.length,$=new Array(I),H=0;H<I;H++)$[H]=arguments[H];return O.current.apply(void 0,$)},[])}var C=function(O,I){var $=I.decimal,H=I.decimals,V=I.duration,G=I.easingFn,U=I.end,R=I.formattingFn,P=I.numerals,Z=I.prefix,ne=I.separator,D=I.start,B=I.suffix,se=I.useEasing,le=I.useGrouping,ae=I.useIndianSeparators,te=I.enableScrollSpy,X=I.scrollSpyDelay,de=I.scrollSpyOnce,Ne=I.plugin;return new e.CountUp(O,U,{startVal:D,duration:V,decimal:$,decimalPlaces:H,easingFn:G,formattingFn:R,numerals:P,separator:ne,prefix:Z,suffix:B,plugin:Ne,useEasing:se,useIndianSeparators:ae,useGrouping:le,enableScrollSpy:te,scrollSpyDelay:X,scrollSpyOnce:de})},k=["ref","startOnMount","enableReinitialize","delay","onEnd","onStart","onPauseResume","onReset","onUpdate"],E={decimal:".",separator:",",delay:null,prefix:"",suffix:"",duration:2,start:0,decimals:0,startOnMount:!0,enableReinitialize:!0,useEasing:!0,useGrouping:!0,useIndianSeparators:!1},N=function(O){var I=Object.fromEntries(Object.entries(O).filter(function(Ie){var Ue=h(Ie,2),Ze=Ue[1];return Ze!==void 0})),$=t.useMemo(function(){return r(r({},E),I)},[O]),H=$.ref,V=$.startOnMount,G=$.enableReinitialize,U=$.delay,R=$.onEnd,P=$.onStart,Z=$.onPauseResume,ne=$.onReset,D=$.onUpdate,B=m($,k),se=t.useRef(),le=t.useRef(),ae=t.useRef(!1),te=j(function(){return C(typeof H=="string"?H:H.current,B)}),X=j(function(Ie){var Ue=se.current;if(Ue&&!Ie)return Ue;var Ze=te();return se.current=Ze,Ze}),de=j(function(){var Ie=function(){return X(!0).start(function(){R?.({pauseResume:Ne,reset:Ke,start:xe,update:ce})})};U&&U>0?le.current=setTimeout(Ie,U*1e3):Ie(),P?.({pauseResume:Ne,reset:Ke,update:ce})}),Ne=j(function(){X().pauseResume(),Z?.({reset:Ke,start:xe,update:ce})}),Ke=j(function(){X().el&&(le.current&&clearTimeout(le.current),X().reset(),ne?.({pauseResume:Ne,start:xe,update:ce}))}),ce=j(function(Ie){X().update(Ie),D?.({pauseResume:Ne,reset:Ke,start:xe})}),xe=j(function(){Ke(),de()}),Te=j(function(Ie){V&&(Ie&&Ke(),de())});return t.useEffect(function(){ae.current?G&&Te(!0):(ae.current=!0,Te())},[G,ae,Te,U,O.start,O.suffix,O.prefix,O.duration,O.separator,O.decimals,O.decimal,O.formattingFn]),t.useEffect(function(){return function(){Ke()}},[Ke]),{start:xe,pauseResume:Ne,reset:Ke,update:ce,getCountUp:X}},L=["className","redraw","containerProps","children","style"],M=function(O){var I=O.className,$=O.redraw,H=O.containerProps,V=O.children,G=O.style,U=m(O,L),R=t.useRef(null),P=t.useRef(!1),Z=N(r(r({},U),{},{ref:R,startOnMount:typeof V!="function"||O.delay===0,enableReinitialize:!1})),ne=Z.start,D=Z.reset,B=Z.update,se=Z.pauseResume,le=Z.getCountUp,ae=j(function(){ne()}),te=j(function(Ne){O.preserveValue||D(),B(Ne)}),X=j(function(){if(typeof O.children=="function"&&!(R.current instanceof Element)){console.error(`Couldn't find attached element to hook the CountUp instance into! Try to attach "containerRef" from the render prop to a an Element, eg. <span ref={containerRef} />.`);return}le()});t.useEffect(function(){X()},[X]),t.useEffect(function(){P.current&&te(O.end)},[O.end,te]);var de=$&&O;return t.useEffect(function(){$&&P.current&&ae()},[ae,$,de]),t.useEffect(function(){!$&&P.current&&ae()},[ae,$,O.start,O.suffix,O.prefix,O.duration,O.separator,O.decimals,O.decimal,O.className,O.formattingFn]),t.useEffect(function(){P.current=!0},[]),typeof V=="function"?V({countUpRef:R,start:ne,reset:D,update:B,pauseResume:se,getCountUp:le}):t.createElement("span",u({className:I,ref:R,style:G},H),typeof O.start<"u"?le().formattingFn(O.start):"")};return df.default=M,df.useCountUp=N,df}sQ();var TF={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},dT=fe.createContext&&fe.createContext(TF),rQ=["attr","size","title"];function aQ(t,e){if(t==null)return{};var n=iQ(t,e),s,r;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)s=i[r],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(n[s]=t[s])}return n}function iQ(t,e){if(t==null)return{};var n={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}function ay(){return ay=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},ay.apply(this,arguments)}function fT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function iy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fT(Object(n),!0).forEach(function(s){oQ(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fT(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function oQ(t,e,n){return e=lQ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lQ(t){var e=cQ(t,"string");return typeof e=="symbol"?e:e+""}function cQ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function MF(t){return t&&t.map((e,n)=>fe.createElement(e.tag,iy({key:n},e.attr),MF(e.child)))}function Ga(t){return e=>fe.createElement(uQ,ay({attr:iy({},t.attr)},e),MF(t.child))}function uQ(t){var e=n=>{var{attr:s,size:r,title:i}=t,o=aQ(t,rQ),c=r||n.size||"1em",u;return n.className&&(u=n.className),t.className&&(u=(u?u+" ":"")+t.className),fe.createElement("svg",ay({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,s,o,{className:u,style:iy(iy({color:t.color||n.color},n.style),t.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),i&&fe.createElement("title",null,i),t.children)};return dT!==void 0?fe.createElement(dT.Consumer,null,n=>e(n)):e(TF)}function oy(t){return Ga({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(t)}function dQ(t){return Ga({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm64 236c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-64c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-72v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm96-114.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"},child:[]}]})(t)}function yh(t){return Ga({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(t)}function fQ(t){return Ga({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M384 320H256c-17.67 0-32 14.33-32 32v128c0 17.67 14.33 32 32 32h128c17.67 0 32-14.33 32-32V352c0-17.67-14.33-32-32-32zM192 32c0-17.67-14.33-32-32-32H32C14.33 0 0 14.33 0 32v128c0 17.67 14.33 32 32 32h95.72l73.16 128.04C211.98 300.98 232.4 288 256 288h.28L192 175.51V128h224V64H192V32zM608 0H480c-17.67 0-32 14.33-32 32v128c0 17.67 14.33 32 32 32h128c17.67 0 32-14.33 32-32V32c0-17.67-14.33-32-32-32z"},child:[]}]})(t)}function hT(t){return Ga({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"},child:[]}]})(t)}function Hj(t){return Ga({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(t)}function mT(t){return Ga({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M501.1 395.7L384 278.6c-23.1-23.1-57.6-27.6-85.4-13.9L192 158.1V96L64 0 0 64l96 128h62.1l106.6 106.6c-13.6 27.8-9.2 62.3 13.9 85.4l117.1 117.1c14.6 14.6 38.2 14.6 52.7 0l52.7-52.7c14.5-14.6 14.5-38.2 0-52.7zM331.7 225c28.3 0 54.9 11 74.9 31l19.4 19.4c15.8-6.9 30.8-16.5 43.8-29.5 37.1-37.1 49.7-89.3 37.9-136.7-2.2-9-13.5-12.1-20.1-5.5l-74.4 74.4-67.9-11.3L334 98.9l74.4-74.4c6.6-6.6 3.4-17.9-5.7-20.2-47.4-11.7-99.6.9-136.6 37.9-28.5 28.5-41.9 66.1-41.2 103.6l82.1 82.1c8.1-1.9 16.5-2.9 24.7-2.9zm-103.9 82l-56.7-56.7L18.7 402.8c-25 25-25 65.5 0 90.5s65.5 25 90.5 0l123.6-123.6c-7.6-19.9-9.9-41.6-5-62.7zM64 472c-13.2 0-24-10.8-24-24 0-13.3 10.7-24 24-24s24 10.7 24 24c0 13.2-10.7 24-24 24z"},child:[]}]})(t)}function xh(t){return Ga({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(t)}function pT(t){return Ga({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M212.333 224.333H12c-6.627 0-12-5.373-12-12V12C0 5.373 5.373 0 12 0h48c6.627 0 12 5.373 12 12v78.112C117.773 39.279 184.26 7.47 258.175 8.007c136.906.994 246.448 111.623 246.157 248.532C504.041 393.258 393.12 504 256.333 504c-64.089 0-122.496-24.313-166.51-64.215-5.099-4.622-5.334-12.554-.467-17.42l33.967-33.967c4.474-4.474 11.662-4.717 16.401-.525C170.76 415.336 211.58 432 256.333 432c97.268 0 176-78.716 176-176 0-97.267-78.716-176-176-176-58.496 0-110.28 28.476-142.274 72.333h98.274c6.627 0 12 5.373 12 12v48c0 6.627-5.373 12-12 12z"},child:[]}]})(t)}function hQ(t){return Ga({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(t)}function mQ(){const{user:t}=is(),[e,n]=v.useState(!1),s=v.useRef(null),r=()=>{n(!0),setTimeout(()=>{if(s.current){s.current.currentTime=0;const o=s.current.play();o&&typeof o.catch=="function"&&o.catch(()=>{})}},0)},i=()=>{s.current&&s.current.pause(),n(!1)};return v.useEffect(()=>{if(!e)return;const o=c=>{c.key==="Escape"&&i()};return document.addEventListener("keydown",o),()=>document.removeEventListener("keydown",o)},[e]),a.jsxs(a.Fragment,{children:[a.jsx("header",{className:"hero",style:{backgroundImage:'url("https://images.unsplash.com/photo-1545209463-e2825498edbf?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D")',backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:"fixed"},children:a.jsx("h1",{children:"Design • Simulate • Profit"})}),a.jsx("svg",{className:"wave",viewBox:"0 0 1440 100",preserveAspectRatio:"none",children:a.jsx("path",{d:"M0,0 C300,100 600,0 1440,100 L1440 0 L0 0 Z",fill:"#ffffff"})}),a.jsx("div",{className:"container py-5",children:a.jsx(AA.div,{className:"row justify-content-center",initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.2},viewport:{once:!0},children:[{title:"Projects",text:"Create, simulate and optimise PV systems with ease.",link:"/projects",color:"primary",icon:a.jsx(fQ,{size:46}),roles:["admin","manager","design"]},{title:"Clients",text:"Keep all customer info and site details in one place.",link:"/clients",color:"success",icon:a.jsx(hQ,{size:46}),roles:["admin","manager","sales","design"]},{title:"Products",text:"Maintain your catalogue of panels, inverters & batteries.",link:"/products-admin",color:"warning",icon:a.jsx(mT,{size:46}),roles:["admin","manager","sales"]},{title:"Job Cards (DO NOT USE)",text:"Create and track electrical jobs.",link:"/jobcards",color:"info",icon:a.jsx(mT,{size:46}),roles:["admin","manager","team_leader","technician"]}].filter(o=>t?o.roles.includes(t.role):!1).map(o=>a.jsx(AA.div,{className:"col-md-4 mb-4 d-flex",whileHover:{y:-6,scale:1.02},transition:{type:"spring",stiffness:200,damping:15},children:a.jsx("div",{className:`glass-card border-top border-3 border-${o.color} w-100`,children:a.jsxs("div",{className:"text-center py-4 px-3 d-flex flex-column h-100",children:[a.jsx("div",{className:`text-${o.color} mb-3`,children:o.icon}),a.jsx("h5",{className:"fw-semibold mb-2",children:o.title}),a.jsx("p",{className:"flex-grow-1",children:o.text}),a.jsxs(as,{to:o.link,className:`btn btn-outline-${o.color} mt-auto`,children:["Manage ",o.title]})]})})},o.title))})}),a.jsx("button",{className:"mystery-btn",onClick:r,"aria-haspopup":"dialog","aria-controls":"surprise-modal",title:"Click me",children:"click me"}),e&&a.jsxs("div",{className:"surprise-overlay",role:"dialog","aria-modal":"true",id:"surprise-modal",onClick:i,children:[a.jsx("button",{className:"surprise-close",onClick:o=>{o.stopPropagation(),i()},"aria-label":"Close",title:"Close",children:"×"}),a.jsx("video",{ref:s,className:"surprise-video",src:"/pranks/surprise.mp4",controls:!0,playsInline:!0,preload:"auto",onClick:o=>o.stopPropagation()})]})]})}const gT=["Eastern Cape","Free State","Gauteng","KwaZulu-Natal","Limpopo","Mpumalanga","Northern Cape","North West","Western Cape"];function pQ(){const{user:t}=is(),e=t?.role==="admin",[n,s]=v.useState([]),[r,i]=v.useState(!0),[o,c]=v.useState(""),[u,f]=v.useState("list"),[m,h]=v.useState({}),[g,x]=v.useState(!1),[b,A]=v.useState(""),[_,j]=v.useState(!1),[C,k]=v.useState({client_name:"",email:"",phone:"",street:"",town:"",province:"",company:"",vat_number:""});v.useEffect(()=>{E()},[]),v.useEffect(()=>{const R=()=>E();return window.addEventListener("refresh-clients",R),()=>window.removeEventListener("refresh-clients",R)},[]);const E=()=>{i(!0),Re.get(`${Ce}/api/clients`).then(R=>{s(R.data),c("")}).catch(R=>{console.error("Error fetching clients:",R),c("Failed to fetch clients: "+R.message)}).finally(()=>i(!1))},N=v.useMemo(()=>{if(!b.trim())return n;const R=b.toLowerCase();return n.filter(P=>(P.client_name||"").toLowerCase().includes(R)||(P.email||"").toLowerCase().includes(R)||(P.phone||"").toLowerCase().includes(R)||(P.address?.street||"").toLowerCase().includes(R)||(P.address?.town||"").toLowerCase().includes(R)||(P.address?.province||"").toLowerCase().includes(R)||(P.company||"").toLowerCase().includes(R)||(P.vat_number||"").toLowerCase().includes(R))},[n,b]),L=R=>{m[R]||h(P=>({...P,[R]:{}}))},M=R=>{h(P=>{const Z={...P};return delete Z[R],Z})},T=(R,P,Z)=>{h(ne=>({...ne,[R]:{...ne[R]||{},[P]:Z}}))},O=async R=>{if(!m[R.id]||Object.keys(m[R.id]).length===0){M(R.id);return}x(!0);try{const P={...m[R.id]};("street"in P||"town"in P||"province"in P)&&(P.address={street:P.street!==void 0?P.street:R.address?.street||"",town:P.town!==void 0?P.town:R.address?.town||"",province:P.province!==void 0?P.province:R.address?.province||""},delete P.street,delete P.town,delete P.province),await Re.put(`${Ce}/api/clients/${R.id}`,P,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}}),await E(),M(R.id)}catch(P){console.error("Failed to save client",P),c("Failed to save client: "+(P.response?.data?.message||P.message))}finally{x(!1)}},I=async()=>{if(!C.client_name||!C.email){c("Name and email required");return}x(!0);try{const R={client_name:C.client_name,email:C.email,phone:C.phone||"",address:{street:C.street||"",town:C.town||"",province:C.province||""},company:C.company||"",vat_number:C.vat_number||""};await Re.post(`${Ce}/api/clients`,R,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}}),await E(),k({client_name:"",email:"",phone:"",street:"",town:"",province:"",company:"",vat_number:""}),j(!1)}catch(R){c("Failed to add client: "+(R.response?.data?.message||R.message))}finally{x(!1)}},$=R=>!!m[R],H=(R,P,Z)=>m[R]&&m[R][P]!==void 0?m[R][P]:Z,V=()=>a.jsxs("div",{className:"mt-3",children:[a.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[a.jsx("div",{className:"d-flex align-items-center gap-2",children:a.jsxs(hn,{size:"sm",children:[a.jsx(hn.Text,{children:a.jsx(Hj,{})}),a.jsx(z.Control,{placeholder:"Search",value:b,onChange:R=>A(R.target.value)})]})}),a.jsxs("div",{className:"d-flex gap-2",children:[!_&&a.jsxs(Fe,{size:"sm",variant:"success",onClick:()=>j(!0),children:[a.jsx(yh,{className:"me-1"}),"New"]}),_&&a.jsx(Fe,{size:"sm",variant:"outline-secondary",onClick:()=>{j(!1),k({client_name:"",email:"",phone:"",street:"",town:"",province:"",company:"",vat_number:""})},children:"Cancel"})]})]}),a.jsx("div",{className:"table-responsive",style:{maxHeight:"70vh",overflow:"auto"},children:a.jsxs(vn,{striped:!0,bordered:!0,hover:!0,size:"sm",className:"align-middle",children:[a.jsxs("thead",{className:"table-light sticky-top",style:{top:0,zIndex:1},children:[a.jsxs("tr",{children:[a.jsx("th",{style:{width:28},children:"#"}),a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Email"}),a.jsx("th",{children:"Phone"}),a.jsx("th",{children:"Street"}),a.jsx("th",{children:"Town"}),a.jsx("th",{children:"Province"}),a.jsx("th",{children:"Company"}),a.jsx("th",{children:"VAT Number"}),a.jsx("th",{style:{width:80},children:"Actions"})]}),_&&a.jsxs("tr",{className:"table-success",children:[a.jsx("td",{children:"+"}),a.jsx("td",{children:a.jsx(z.Control,{size:"sm",value:C.client_name,onChange:R=>k(P=>({...P,client_name:R.target.value})),placeholder:"Client name"})}),a.jsx("td",{children:a.jsx(z.Control,{size:"sm",value:C.email,onChange:R=>k(P=>({...P,email:R.target.value})),placeholder:"Email"})}),a.jsx("td",{children:a.jsx(z.Control,{size:"sm",value:C.phone,onChange:R=>k(P=>({...P,phone:R.target.value})),placeholder:"Phone"})}),a.jsx("td",{children:a.jsx(z.Control,{size:"sm",value:C.street,onChange:R=>k(P=>({...P,street:R.target.value})),placeholder:"Street"})}),a.jsx("td",{children:a.jsx(z.Control,{size:"sm",value:C.town,onChange:R=>k(P=>({...P,town:R.target.value})),placeholder:"Town"})}),a.jsx("td",{children:a.jsxs(z.Select,{size:"sm",value:C.province,onChange:R=>k(P=>({...P,province:R.target.value})),children:[a.jsx("option",{value:"",children:"Province"}),gT.map(R=>a.jsx("option",{value:R,children:R},R))]})}),a.jsx("td",{children:a.jsx(z.Control,{size:"sm",value:C.company,onChange:R=>k(P=>({...P,company:R.target.value})),placeholder:"Company"})}),a.jsx("td",{children:a.jsx(z.Control,{size:"sm",value:C.vat_number,onChange:R=>k(P=>({...P,vat_number:R.target.value})),placeholder:"VAT Number"})}),a.jsxs("td",{className:"text-center",children:[a.jsx(Fe,{size:"sm",variant:"success",className:"me-1",disabled:g,onClick:I,children:a.jsx(hT,{})}),a.jsx(Fe,{size:"sm",variant:"outline-secondary",disabled:g,onClick:()=>{j(!1)},children:a.jsx(pT,{})})]})]})]}),a.jsxs("tbody",{children:[N.map((R,P)=>{const Z=$(R.id);return a.jsxs("tr",{className:Z?"table-warning":"",children:[a.jsx("td",{children:P+1}),a.jsx("td",{children:Z?a.jsx(z.Control,{size:"sm",value:H(R.id,"client_name",R.client_name||""),onChange:ne=>T(R.id,"client_name",ne.target.value)}):a.jsx("span",{children:R.client_name})}),a.jsx("td",{children:Z?a.jsx(z.Control,{size:"sm",value:H(R.id,"email",R.email||""),onChange:ne=>T(R.id,"email",ne.target.value)}):a.jsx("span",{children:R.email})}),a.jsx("td",{children:Z?a.jsx(z.Control,{size:"sm",value:H(R.id,"phone",R.phone||""),onChange:ne=>T(R.id,"phone",ne.target.value)}):a.jsx("span",{children:R.phone})}),a.jsx("td",{children:Z?a.jsx(z.Control,{size:"sm",value:H(R.id,"street",R.address?.street||""),onChange:ne=>T(R.id,"street",ne.target.value)}):a.jsx("span",{children:R.address?.street})}),a.jsx("td",{children:Z?a.jsx(z.Control,{size:"sm",value:H(R.id,"town",R.address?.town||""),onChange:ne=>T(R.id,"town",ne.target.value)}):a.jsx("span",{children:R.address?.town})}),a.jsx("td",{children:Z?a.jsxs(z.Select,{size:"sm",value:H(R.id,"province",R.address?.province||""),onChange:ne=>T(R.id,"province",ne.target.value),children:[a.jsx("option",{value:"",children:"Province"}),gT.map(ne=>a.jsx("option",{value:ne,children:ne},ne))]}):a.jsx("span",{children:R.address?.province})}),a.jsx("td",{children:Z?a.jsx(z.Control,{size:"sm",value:H(R.id,"company",R.company||""),onChange:ne=>T(R.id,"company",ne.target.value)}):a.jsx("span",{children:R.company})}),a.jsx("td",{children:Z?a.jsx(z.Control,{size:"sm",value:H(R.id,"vat_number",R.vat_number||""),onChange:ne=>T(R.id,"vat_number",ne.target.value)}):a.jsx("span",{children:R.vat_number})}),a.jsxs("td",{className:"text-center",children:[!Z&&a.jsxs(aa,{size:"sm",children:[a.jsx(Fe,{variant:"outline-primary",onClick:()=>L(R.id),title:"Edit",children:a.jsx(oy,{})}),a.jsx(Fe,{variant:"outline-danger",disabled:!e,onClick:()=>U(R.id),title:e?"Delete":"Admin only",children:a.jsx(xh,{})})]}),Z&&a.jsxs(aa,{size:"sm",children:[a.jsx(Fe,{variant:"success",disabled:g,onClick:()=>O(R),title:"Save",children:a.jsx(hT,{})}),a.jsx(Fe,{variant:"outline-secondary",disabled:g,onClick:()=>M(R.id),title:"Cancel",children:a.jsx(pT,{})})]})]})]},R.id)}),!N.length&&!_&&a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"text-center text-muted py-3",children:"No matching clients"})})]})]})}),a.jsxs("div",{className:"small text-muted mt-2",children:[N.length," client(s)"]})]}),G=()=>a.jsx(nt,{xs:1,md:2,lg:3,className:"g-4",children:n.map(R=>a.jsx(ge,{children:a.jsx(me,{className:"h-100 shadow-sm border-light hover-shadow",children:a.jsxs(me.Body,{className:"p-4",children:[a.jsxs("div",{className:"d-flex align-items-center mb-3",children:[a.jsx("div",{className:"bg-primary bg-opacity-10 rounded-circle p-2 me-3",children:a.jsx("i",{className:"bi bi-person-fill text-primary"})}),a.jsxs("div",{className:"flex-grow-1",children:[a.jsx(me.Title,{className:"mb-0 h5",children:R.client_name}),a.jsx(tt,{bg:"light",text:"dark",className:"mt-1",children:"Client"})]})]}),a.jsxs("div",{className:"mb-3",children:[a.jsxs("div",{className:"d-flex align-items-center mb-2",children:[a.jsx("i",{className:"bi bi-envelope me-2 text-muted"}),a.jsx("small",{className:"text-muted",children:R.email})]}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("i",{className:"bi bi-telephone me-2 text-muted"}),a.jsx("small",{className:"text-muted",children:R.phone})]}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("i",{className:"bi bi-geo-alt me-2 text-muted"}),a.jsxs("small",{className:"text-muted",children:[R.address?.town,", ",R.address?.province]})]})]}),a.jsxs(rj,{direction:"horizontal",gap:2,className:"mt-auto",children:[a.jsxs(as,{to:`/clients/edit/${R.id}`,className:"btn btn-outline-primary btn-sm flex-fill",children:[a.jsx("i",{className:"bi bi-pencil-fill me-1"}),"Edit"]}),a.jsxs(Fe,{variant:"outline-danger",size:"sm",className:"flex-fill",disabled:!e,title:e?"Delete client":"Admin only",onClick:()=>U(R.id),children:[a.jsx("i",{className:"bi bi-trash-fill me-1"}),"Delete"]})]})]})})},R.id))}),U=R=>{if(!e){c("Access Denied: Only administrators can delete clients.");return}window.confirm("Are you sure you want to delete this client? This action cannot be undone.")&&Re.delete(`${Ce}/api/clients/${R}`,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}}).then(()=>{E(),c("")}).catch(P=>{console.error("Error deleting client:",P);const Z=P.response?.data;c(Z?.message||"Failed to delete client")})};return r?a.jsx("div",{className:"d-flex justify-content-center mt-5",children:a.jsx(Ot,{animation:"border"})}):a.jsx("div",{className:"min-vh-100",style:{backgroundColor:"#f8f9fa"},children:a.jsx(rr,{fluid:!0,className:"py-4 py-md-5",children:a.jsx(nt,{className:"justify-content-center",children:a.jsx(ge,{lg:12,xl:12,children:a.jsxs(me,{className:"shadow-lg border-0 rounded-xl p-4 p-md-5",children:[a.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4 flex-wrap gap-2",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-3xl font-bold text-gray-800 mb-1",children:[a.jsx("i",{className:"bi bi-people-fill me-3"}),"Clients"]}),a.jsx("p",{className:"text-muted mb-0",children:"Manage your client database"})]}),a.jsxs("div",{className:"d-flex align-items-center gap-3",children:[a.jsx(z.Check,{type:"switch",id:"clients-view-switch",label:u==="list"?"List View":"Card View",checked:u==="list",onChange:R=>f(R.target.checked?"list":"cards")}),u==="cards"&&a.jsxs(as,{to:"/clients/add",className:"btn btn-primary shadow-sm",children:[a.jsx("i",{className:"bi bi-plus-lg me-2"}),"Add Client"]})]})]}),o&&a.jsx(kt,{variant:"danger",className:"mb-4",children:o}),n.length===0&&u==="cards"&&!b?a.jsxs("div",{className:"text-center py-5",children:[a.jsx("i",{className:"bi bi-people",style:{fontSize:"4rem",color:"#9ca3af"}}),a.jsx("h4",{className:"mt-3 text-gray-700",children:"No Clients Found"}),a.jsx("p",{className:"text-muted mb-4",children:"Start building your client database by adding your first client."}),a.jsxs(as,{to:"/clients/add",className:"btn btn-primary",children:[a.jsx("i",{className:"bi bi-plus-lg me-2"}),"Add Your First Client"]})]}):a.jsx(a.Fragment,{children:u==="cards"?G():V()})]})})})})})}function gQ(){const[t,e]=v.useState(""),[n,s]=v.useState(""),[r,i]=v.useState(""),[o,c]=v.useState({street:"",town:"",province:"",country:"South Africa"}),[u,f]=v.useState(""),[m,h]=v.useState(""),[g,x]=v.useState(!1),[b,A]=v.useState(""),[_,j]=v.useState(""),C=ms(),k=E=>{E.preventDefault(),x(!0),A(""),j("");const N={client_name:t,email:n,phone:r,address:o,company:u,vat_number:m};Re.post(`${Ce}/api/clients`,N).then(L=>{j("Client added successfully!"),e(""),s(""),i(""),c({street:"",town:"",province:"",country:"South Africa"}),f(""),h(""),setTimeout(()=>C("/clients"),1e3)}).catch(L=>{console.error("Error adding client:",L.response?L.response.data:L.message),A("Failed to add client: "+(L.response?.data?.error||L.message))}).finally(()=>x(!1))};return a.jsx("div",{className:"min-vh-100",style:{backgroundColor:"#f8f9fa"},children:a.jsx(rr,{fluid:!0,className:"py-4 py-md-5",children:a.jsx(nt,{className:"justify-content-center",children:a.jsx(ge,{lg:8,xl:6,children:a.jsxs(me,{className:"shadow-lg border-0 rounded-xl p-4 p-md-5",children:[a.jsxs("div",{className:"text-center mb-4",children:[a.jsx("div",{className:"bg-primary bg-opacity-10 rounded-circle p-3 d-inline-flex mb-3",children:a.jsx("i",{className:"bi bi-person-plus-fill text-primary",style:{fontSize:"2rem"}})}),a.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-1",children:"Add New Client"})]}),b&&a.jsx(kt,{variant:"danger",className:"mb-4",children:b}),_&&a.jsx(kt,{variant:"success",className:"mb-4",children:_}),a.jsxs(z,{onSubmit:k,children:[a.jsx(nt,{children:a.jsx(ge,{md:12,children:a.jsxs(z.Group,{className:"mb-4",children:[a.jsxs(z.Label,{className:"fw-semibold",children:[a.jsx("i",{className:"bi bi-person me-2"}),"Client Name"]}),a.jsx(z.Control,{type:"text",value:t,onChange:E=>e(E.target.value),placeholder:"Enter full client name",size:"lg",required:!0,className:"rounded-lg"})]})})}),a.jsxs(nt,{children:[a.jsx(ge,{md:6,children:a.jsxs(z.Group,{className:"mb-4",children:[a.jsxs(z.Label,{className:"fw-semibold",children:[a.jsx("i",{className:"bi bi-envelope me-2"}),"Email Address"]}),a.jsx(z.Control,{type:"email",value:n,onChange:E=>s(E.target.value),placeholder:"client@email.com",size:"lg",required:!0,className:"rounded-lg"})]})}),a.jsx(ge,{md:6,children:a.jsxs(z.Group,{className:"mb-4",children:[a.jsxs(z.Label,{className:"fw-semibold",children:[a.jsx("i",{className:"bi bi-telephone me-2"}),"Phone Number"]}),a.jsx(z.Control,{type:"text",value:r,onChange:E=>i(E.target.value),placeholder:"+27 12 345 6789",size:"lg",required:!0,className:"rounded-lg"})]})})]}),a.jsxs(nt,{children:[a.jsx(ge,{md:4,children:a.jsxs(z.Group,{className:"mb-4",children:[a.jsxs(z.Label,{className:"fw-semibold",children:[a.jsx("i",{className:"bi bi-geo-alt me-2"}),"Street"]}),a.jsx(z.Control,{type:"text",value:o?.street,onChange:E=>c({...o,street:E.target.value}),placeholder:"Enter street address",size:"md",className:"rounded-lg"})]})}),a.jsx(ge,{md:4,children:a.jsxs(z.Group,{className:"mb-4",children:[a.jsxs(z.Label,{className:"fw-semibold",children:[a.jsx("i",{className:"bi bi-geo-alt me-2"}),"Town"]}),a.jsx(z.Control,{type:"text",value:o?.town,onChange:E=>c({...o,town:E.target.value}),placeholder:"Enter town",size:"md",className:"rounded-lg"})]})}),a.jsx(ge,{md:4,children:a.jsxs(z.Group,{className:"mb-4",children:[a.jsxs(z.Label,{className:"fw-semibold",children:[a.jsx("i",{className:"bi bi-geo-alt me-2"}),"Province"]}),a.jsxs(z.Select,{value:o?.province,onChange:E=>c({...o,province:E.target.value}),size:"md",className:"rounded-lg",children:[a.jsx("option",{value:"",children:"Select Province"}),a.jsx("option",{value:"Gauteng",children:"Gauteng"}),a.jsx("option",{value:"North West",children:"North West"}),a.jsx("option",{value:"Northern Cape",children:"Northern Cape"}),a.jsx("option",{value:"Western Cape",children:"Western Cape"}),a.jsx("option",{value:"Eastern Cape",children:"Eastern Cape"}),a.jsx("option",{value:"Free State",children:"Free State"}),a.jsx("option",{value:"KwaZulu-Natal",children:"KwaZulu-Natal"}),a.jsx("option",{value:"Mpumalanga",children:"Mpumalanga"}),a.jsx("option",{value:"Limpopo",children:"Limpopo"})]})]})})]}),a.jsxs(nt,{children:[a.jsx(ge,{md:6,children:a.jsxs(z.Group,{className:"mb-4",children:[a.jsxs(z.Label,{className:"fw-semibold",children:[a.jsx("i",{className:"bi bi-building me-2"}),"Company"]}),a.jsx(z.Control,{type:"text",value:u,onChange:E=>f(E.target.value),placeholder:"Enter company name",size:"lg",className:"rounded-lg"})]})}),a.jsx(ge,{md:6,children:a.jsxs(z.Group,{className:"mb-4",children:[a.jsxs(z.Label,{className:"fw-semibold",children:[a.jsx("i",{className:"bi bi-file-earmark-text me-2"}),"VAT Number"]}),a.jsx(z.Control,{type:"text",value:m,onChange:E=>h(E.target.value),placeholder:"Enter VAT number",size:"lg",className:"rounded-lg"})]})})]}),a.jsxs("div",{className:"d-grid gap-2 mt-4",children:[a.jsx(Fe,{type:"submit",variant:"primary",size:"lg",disabled:g,className:"rounded-lg",children:g?a.jsxs(a.Fragment,{children:[a.jsx(Ot,{as:"span",animation:"border",size:"sm",className:"me-2"}),"Adding Client..."]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"bi bi-plus-lg me-2"}),"Add Client"]})}),a.jsxs(Fe,{variant:"outline-secondary",size:"lg",onClick:()=>C("/clients"),className:"rounded-lg",children:[a.jsx("i",{className:"bi bi-arrow-left me-2"}),"Back to Clients"]})]})]})]})})})})})}const U0=({icon:t,label:e,value:n,variant:s="secondary"})=>a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("i",{className:`bi ${t} me-2 text-muted`,style:{fontSize:"0.9rem"}}),a.jsxs("div",{children:[a.jsx("small",{className:"text-muted d-block",style:{fontSize:"0.75rem",lineHeight:"1"},children:e}),a.jsx(tt,{bg:s,className:"mt-1",style:{fontSize:"0.7rem"},children:n})]})]});function yQ(t){if(!t)return"-";const e=new Date(t);return isNaN(e)?"-":e.toLocaleDateString()+" "+e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}function xQ(){const{user:t}=is(),e=t?.role==="admin",[n,s]=v.useState([]),[r,i]=v.useState(""),[o,c]=v.useState(!1),[u,f]=v.useState(null),[m,h]=v.useState(!0),[g,x]=v.useState(""),[b,A]=v.useState("grid"),[_,j]=v.useState({status:"all",designType:"all",systemType:"all",projectType:"all"}),{showNotification:C}=Os();v.useEffect(()=>{k()},[]),v.useEffect(()=>{const M=()=>k();return window.addEventListener("refresh-projects",M),window.addEventListener("refresh-project",M),()=>{window.removeEventListener("refresh-projects",M),window.removeEventListener("refresh-project",M)}},[]);const k=()=>{h(!0),Re.get(`${Ce}/api/projects`).then(M=>{s(M.data),x("")}).catch(M=>{console.error("Error fetching projects:",M),x(M.response?.data?.error||"Failed to load projects. Please ensure the server is running and accessible."),s([])}).finally(()=>{h(!1)})};v.useEffect(()=>{const M=()=>k();return window.addEventListener("refresh-project",M),()=>window.removeEventListener("refresh-project",M)},[]);const E=M=>{f(M),c(!0)},N=()=>{if(!e){x("Access Denied: Only administrators can delete projects."),c(!1);return}u&&Re.delete(`${Ce}/api/projects/${u}`,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}}).then(()=>{c(!1),f(null),k(),C("Project moved to recycle bin","info")}).catch(M=>{console.error("Error deleting project:",M),x(M.response?.data?.message||M.response?.data?.error||"Failed to delete project"),c(!1)})},L=v.useMemo(()=>{let M=n.filter(T=>T.name.toLowerCase().includes(r.toLowerCase())||T.client_name.toLowerCase().includes(r.toLowerCase())||T.location.toLowerCase().includes(r.toLowerCase()));return _.status!=="all"&&(M=M.filter(T=>(T.status||"active").toLowerCase()===_.status)),_.designType!=="all"&&(M=M.filter(T=>(T.design_type||"").toLowerCase()===_.designType)),_.systemType!=="all"&&(M=M.filter(T=>(T.system_type||"").toLowerCase()===_.systemType)),_.projectType!=="all"&&(M=M.filter(T=>(T.project_type||"").toLowerCase()===_.projectType)),M.sort((T,O)=>{const I=T.created_at?new Date(T.created_at):new Date(0);return(O.created_at?new Date(O.created_at):new Date(0))-I})},[n,r,_]);return a.jsxs("div",{className:"min-vh-100",style:{backgroundColor:"#f8f9fa"},children:[a.jsx(rr,{fluid:!0,className:"py-4 py-md-5",children:a.jsx(nt,{className:"justify-content-center",children:a.jsx(ge,{lg:12,xl:12,children:a.jsxs(me,{className:"shadow-lg border-0 rounded-xl p-4 p-md-5",children:[a.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-3xl font-bold text-gray-800 mb-1",children:[a.jsx("i",{className:"bi bi-folder-fill me-3"}),"Projects"]}),a.jsx("p",{className:"text-muted mb-0",children:"Manage your solar design projects"})]}),a.jsxs("div",{className:"d-flex",children:[t?.role==="admin"&&a.jsx(as,{to:"/projects/recycle-bin",className:"btn btn-outline-secondary ms-2",children:a.jsx("i",{className:"bi bi-trash"})}),a.jsxs(as,{to:"/projects/add",className:"btn btn-primary shadow-sm ms-1",children:[a.jsx("i",{className:"bi bi-plus-lg me-2"}),"New Project"]})]})]}),a.jsx(me,{className:"shadow-sm border-0 rounded-xl p-3 mb-4",children:a.jsxs(nt,{className:"g-3 align-items-center",children:[a.jsx(ge,{md:8,children:a.jsxs(hn,{children:[a.jsx(hn.Text,{className:"bg-light border-end-0",children:a.jsx("i",{className:"bi bi-search",style:{color:"#6b7280",fontSize:"1.1rem"}})}),a.jsx(z.Control,{value:r,onChange:M=>i(M.target.value),placeholder:"Search by project or client name..",className:"border-start-0 border-light rounded-lg"})]})}),a.jsx(ge,{md:4,className:"d-flex justify-content-end",children:a.jsxs(aa,{children:[a.jsx(Fe,{variant:b==="card"?"primary":"outline-secondary",onClick:()=>A("card"),title:"Card View",children:a.jsx("i",{className:"bi bi-grid-3x3-gap-fill"})}),a.jsx(Fe,{variant:b==="list"?"primary":"outline-secondary",onClick:()=>A("list"),title:"List View",children:a.jsx("i",{className:"bi bi-list-ul"})})]})}),m&&a.jsx("div",{className:"text-center py-5",children:a.jsx(Ot,{animation:"border",className:"text-primary"})})]})}),a.jsx(me,{className:"shadow-sm border-0 rounded-xl p-3 mb-4",children:a.jsxs(nt,{className:"g-3",children:[a.jsxs(ge,{lg:4,md:6,children:[a.jsx("div",{className:"mb-2",children:a.jsx("small",{className:"text-muted fw-bold",children:"Design Type"})}),a.jsxs(aa,{size:"sm",className:"w-100",children:[a.jsx(Fe,{variant:_.designType==="all"?"primary":"outline-secondary",onClick:()=>j(M=>({...M,designType:"all"})),children:"All"}),a.jsx(Fe,{variant:_.designType==="quick"?"primary":"outline-secondary",onClick:()=>j(M=>({...M,designType:"quick"})),children:"Quick"}),a.jsx(Fe,{variant:_.designType==="detailed"?"primary":"outline-secondary",onClick:()=>j(M=>({...M,designType:"detailed"})),children:"Detailed"})]})]}),a.jsxs(ge,{lg:4,md:6,children:[a.jsx("div",{className:"mb-2",children:a.jsx("small",{className:"text-muted fw-bold",children:"System Type"})}),a.jsxs(aa,{size:"sm",className:"w-100",children:[a.jsx(Fe,{variant:_.systemType==="all"?"primary":"outline-secondary",onClick:()=>j(M=>({...M,systemType:"all"})),children:"All"}),a.jsx(Fe,{variant:_.systemType==="grid"?"primary":"outline-secondary",onClick:()=>j(M=>({...M,systemType:"grid"})),children:"Grid-Tied"}),a.jsx(Fe,{variant:_.systemType==="hybrid"?"primary":"outline-secondary",onClick:()=>j(M=>({...M,systemType:"hybrid"})),children:"Hybrid"}),a.jsx(Fe,{variant:_.systemType==="off-grid"?"primary":"outline-secondary",onClick:()=>j(M=>({...M,systemType:"off-grid"})),children:"Off-Grid"})]})]}),a.jsxs(ge,{lg:4,md:6,children:[a.jsx("div",{className:"mb-2",children:a.jsx("small",{className:"text-muted fw-bold",children:"Project Type"})}),a.jsxs(aa,{size:"sm",className:"w-100",children:[a.jsx(Fe,{variant:_.projectType==="all"?"primary":"outline-secondary",onClick:()=>j(M=>({...M,projectType:"all"})),children:"All"}),a.jsx(Fe,{variant:_.projectType==="residential"?"primary":"outline-secondary",onClick:()=>j(M=>({...M,projectType:"residential"})),children:"Residential"}),a.jsx(Fe,{variant:_.projectType==="commercial"?"primary":"outline-secondary",onClick:()=>j(M=>({...M,projectType:"commercial"})),children:"Commercial"})]})]})]})}),g&&a.jsxs(kt,{variant:"danger",className:"mb-4",children:[a.jsx("i",{className:"bi bi-exclamation-triangle-fill me-2"}),g]}),!m&&!g&&a.jsx(a.Fragment,{children:L.length===0?a.jsxs("div",{className:"text-center py-5",children:[a.jsx("i",{className:"bi bi-folder-x",style:{fontSize:"4rem",color:"#9ca3af"}}),a.jsx("h4",{className:"mt-3 text-gray-700",children:"No Projects Found"}),a.jsx("p",{className:"text-muted mb-4",children:r?`No projects match "${r}"`:"Start creating your first solar project."}),!r&&a.jsxs(as,{to:"/projects/add",className:"btn btn-primary",children:[a.jsx("i",{className:"bi bi-plus-lg me-2"}),"Create Your First Project"]})]}):b==="card"?a.jsx(nt,{xs:1,md:2,lg:3,className:"g-4",children:L.map(M=>a.jsx(ge,{children:a.jsx(me,{className:"h-100 shadow-sm border-light hover-shadow",children:a.jsxs(me.Body,{className:"p-4",children:["                              ",a.jsxs("div",{className:"d-flex align-items-start justify-content-between mb-3",children:[a.jsxs("div",{className:"d-flex flex-wrap gap-1",children:[a.jsx(tt,{bg:"primary",className:"mb-1",children:M.project_type||"Commercial"}),a.jsx(tt,{bg:"secondary",className:"mb-1",children:M.design_type||"Detailed"}),M.system_type&&a.jsx(tt,{bg:"info",className:"mb-1 text-capitalize",children:M.system_type})]}),a.jsxs(hl,{align:"end",children:[a.jsx(hl.Toggle,{variant:"link",className:"p-0 text-muted border-0 shadow-none",style:{boxShadow:"none !important"},children:a.jsx("i",{className:"bi bi-three-dots-vertical"})}),a.jsxs(hl.Menu,{children:[a.jsxs(hl.Item,{as,to:`/projects/${M.id}`,children:[a.jsx("i",{className:"bi bi-eye me-2"}),"View Project"]}),a.jsxs(hl.Item,{as,to:`/projects/edit/${M.id}`,children:[a.jsx("i",{className:"bi bi-pencil me-2"}),"Edit Project"]}),a.jsx(hl.Divider,{}),a.jsxs(hl.Item,{className:"text-danger",onClick:()=>E(M.id),children:[a.jsx("i",{className:"bi bi-trash me-2"}),"Delete Project"]})]})]})]}),a.jsx(me.Title,{className:"h5 mb-2 text-truncate",children:M.name}),a.jsxs("div",{className:"mb-3",children:[a.jsxs("div",{className:"d-flex align-items-center mb-1",children:[a.jsx("i",{className:"bi bi-person me-2 text-muted",style:{fontSize:"0.9rem"}}),a.jsx("small",{className:"text-muted text-truncate",children:M.client_name})]}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("i",{className:"bi bi-geo-alt me-2 text-muted",style:{fontSize:"0.9rem"}}),a.jsx("small",{className:"text-muted text-truncate",children:M.location||"No location"})]})]}),a.jsx("div",{className:"mb-3",children:a.jsxs(nt,{className:"g-2",children:[a.jsx(ge,{xs:6,children:a.jsx(U0,{icon:"bi-sun",label:"Solar",value:M.panel_kw?`${M.panel_kw}kWp`:"N/A",variant:"warning"})}),a.jsx(ge,{xs:6,children:a.jsx(U0,{icon:"bi-lightning",label:"Inverter",value:M.inverter_kva?`${M.inverter_kva}kVA`:"N/A",variant:"info"})}),M.system_type!=="grid"&&M.battery_kwh&&a.jsx(ge,{xs:12,children:a.jsx(U0,{icon:"bi-battery-half",label:"Battery",value:`${M.battery_kwh}kWh`,variant:"success"})})]})}),a.jsxs(as,{to:`/projects/${M.id}`,className:"btn btn-outline-primary btn-sm w-100",children:[a.jsx("i",{className:"bi bi-arrow-right-circle me-2"}),"Open Project"]})]})})},M.id))}):a.jsx(me,{className:"shadow-sm border-0 rounded-xl",children:a.jsxs(vn,{hover:!0,responsive:!0,className:"mb-0",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{className:"ps-4",children:"Project Name"}),a.jsx("th",{children:"Client"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Design Type"}),a.jsx("th",{children:"Created"}),a.jsx("th",{children:"Updated"}),a.jsx("th",{className:"text-end pe-4",children:"Actions"})]})}),a.jsx("tbody",{children:L.map(M=>a.jsxs("tr",{style:{verticalAlign:"middle"},children:[a.jsx("td",{className:"ps-4",children:a.jsx("span",{className:"fw-bold",children:M.name})}),a.jsx("td",{children:M.client_name||"N/A"}),a.jsx("td",{children:a.jsx(tt,{bg:"success",pill:!0,children:M.status||"N/A"})}),a.jsx("td",{children:a.jsx(tt,{bg:"info",pill:!0,children:M.design_type||"N/A"})}),a.jsxs("td",{children:[M.created_at?new Date(M.created_at).toLocaleDateString():"N/A",M.created_by&&a.jsxs("div",{className:"small text-muted",children:["by ",M.created_by]})]}),a.jsx("td",{children:M.updated_at?a.jsxs(a.Fragment,{children:[yQ(M.updated_at),a.jsx("div",{className:"small text-muted",children:M.updated_by?`by ${M.updated_by}`:""})]}):"-"}),a.jsxs("td",{className:"text-end pe-3",children:[a.jsxs(as,{to:`/projects/${M.id}`,className:"btn btn-primary btn-sm me-2",children:[a.jsx("i",{className:"bi bi-folder-fill me-1"})," Open"]}),a.jsxs(as,{to:`/projects/edit/${M.id}`,className:"btn btn-outline-secondary btn-sm me-2",children:[a.jsx("i",{className:"bi bi-pencil-fill me-1"})," Edit"]}),a.jsx(Fe,{variant:"outline-danger",size:"sm",onClick:()=>E(M.id),children:a.jsx("i",{className:"bi bi-trash-fill"})})]})]},M.id))})]})})})]})})})}),a.jsxs(wt,{show:o,onHide:()=>c(!1),centered:!0,children:[a.jsx(wt.Header,{closeButton:!0,className:"bg-light",children:a.jsxs(wt.Title,{children:[a.jsx("i",{className:"bi bi-exclamation-triangle-fill text-danger me-2"}),"Confirm Deletion"]})}),a.jsxs(wt.Body,{className:"p-4",children:[a.jsx("p",{className:"mb-2",children:"Are you sure you want to delete this project?"}),a.jsx("p",{className:"text-muted mb-3",children:"All associated data will be permanently removed."}),a.jsx("div",{className:"bg-danger bg-opacity-10 border border-danger border-opacity-25 rounded p-3",children:a.jsxs("p",{className:"fw-bold text-danger mb-0",children:[a.jsx("i",{className:"bi bi-exclamation-circle me-2"}),"This action cannot be undone."]})})]}),a.jsxs(wt.Footer,{className:"bg-light",children:[a.jsx(Fe,{variant:"outline-secondary",onClick:()=>c(!1),children:"Cancel"}),a.jsxs(Fe,{variant:"danger",onClick:N,children:[a.jsx("i",{className:"bi bi-trash-fill me-2"}),"Delete Project"]})]})]})]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function em(t){return t+.5|0}const Ao=(t,e,n)=>Math.max(Math.min(t,n),e);function Lf(t){return Ao(em(t*2.55),0,255)}function So(t){return Ao(em(t*255),0,255)}function yi(t){return Ao(em(t/2.55)/100,0,1)}function yT(t){return Ao(em(t*100),0,100)}const Mr={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},wA=[..."0123456789ABCDEF"],bQ=t=>wA[t&15],vQ=t=>wA[(t&240)>>4]+wA[t&15],Ip=t=>(t&240)>>4===(t&15),_Q=t=>Ip(t.r)&&Ip(t.g)&&Ip(t.b)&&Ip(t.a);function AQ(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Mr[t[1]]*17,g:255&Mr[t[2]]*17,b:255&Mr[t[3]]*17,a:e===5?Mr[t[4]]*17:255}:(e===7||e===9)&&(n={r:Mr[t[1]]<<4|Mr[t[2]],g:Mr[t[3]]<<4|Mr[t[4]],b:Mr[t[5]]<<4|Mr[t[6]],a:e===9?Mr[t[7]]<<4|Mr[t[8]]:255})),n}const wQ=(t,e)=>t<255?e(t):"";function jQ(t){var e=_Q(t)?bQ:vQ;return t?"#"+e(t.r)+e(t.g)+e(t.b)+wQ(t.a,e):void 0}const SQ=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function RF(t,e,n){const s=e*Math.min(n,1-n),r=(i,o=(i+t/30)%12)=>n-s*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function CQ(t,e,n){const s=(r,i=(r+t/60)%6)=>n-n*e*Math.max(Math.min(i,4-i,1),0);return[s(5),s(3),s(1)]}function NQ(t,e,n){const s=RF(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)s[r]*=1-e-n,s[r]+=e;return s}function kQ(t,e,n,s,r){return t===r?(e-n)/s+(e<n?6:0):e===r?(n-t)/s+2:(t-e)/s+4}function Uj(t){const n=t.r/255,s=t.g/255,r=t.b/255,i=Math.max(n,s,r),o=Math.min(n,s,r),c=(i+o)/2;let u,f,m;return i!==o&&(m=i-o,f=c>.5?m/(2-i-o):m/(i+o),u=kQ(n,s,r,m,i),u=u*60+.5),[u|0,f||0,c]}function Wj(t,e,n,s){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,s)).map(So)}function Yj(t,e,n){return Wj(RF,t,e,n)}function DQ(t,e,n){return Wj(NQ,t,e,n)}function EQ(t,e,n){return Wj(CQ,t,e,n)}function OF(t){return(t%360+360)%360}function TQ(t){const e=SQ.exec(t);let n=255,s;if(!e)return;e[5]!==s&&(n=e[6]?Lf(+e[5]):So(+e[5]));const r=OF(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?s=DQ(r,i,o):e[1]==="hsv"?s=EQ(r,i,o):s=Yj(r,i,o),{r:s[0],g:s[1],b:s[2],a:n}}function MQ(t,e){var n=Uj(t);n[0]=OF(n[0]+e),n=Yj(n),t.r=n[0],t.g=n[1],t.b=n[2]}function RQ(t){if(!t)return;const e=Uj(t),n=e[0],s=yT(e[1]),r=yT(e[2]);return t.a<255?`hsla(${n}, ${s}%, ${r}%, ${yi(t.a)})`:`hsl(${n}, ${s}%, ${r}%)`}const xT={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},bT={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function OQ(){const t={},e=Object.keys(bT),n=Object.keys(xT);let s,r,i,o,c;for(s=0;s<e.length;s++){for(o=c=e[s],r=0;r<n.length;r++)i=n[r],c=c.replace(i,xT[i]);i=parseInt(bT[o],16),t[c]=[i>>16&255,i>>8&255,i&255]}return t}let Vp;function PQ(t){Vp||(Vp=OQ(),Vp.transparent=[0,0,0,0]);const e=Vp[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const LQ=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function FQ(t){const e=LQ.exec(t);let n=255,s,r,i;if(e){if(e[7]!==s){const o=+e[7];n=e[8]?Lf(o):Ao(o*255,0,255)}return s=+e[1],r=+e[3],i=+e[5],s=255&(e[2]?Lf(s):Ao(s,0,255)),r=255&(e[4]?Lf(r):Ao(r,0,255)),i=255&(e[6]?Lf(i):Ao(i,0,255)),{r:s,g:r,b:i,a:n}}}function BQ(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${yi(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const W0=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Kc=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function IQ(t,e,n){const s=Kc(yi(t.r)),r=Kc(yi(t.g)),i=Kc(yi(t.b));return{r:So(W0(s+n*(Kc(yi(e.r))-s))),g:So(W0(r+n*(Kc(yi(e.g))-r))),b:So(W0(i+n*(Kc(yi(e.b))-i))),a:t.a+n*(e.a-t.a)}}function zp(t,e,n){if(t){let s=Uj(t);s[e]=Math.max(0,Math.min(s[e]+s[e]*n,e===0?360:1)),s=Yj(s),t.r=s[0],t.g=s[1],t.b=s[2]}}function PF(t,e){return t&&Object.assign(e||{},t)}function vT(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=So(t[3]))):(e=PF(t,{r:0,g:0,b:0,a:1}),e.a=So(e.a)),e}function VQ(t){return t.charAt(0)==="r"?FQ(t):TQ(t)}class bh{constructor(e){if(e instanceof bh)return e;const n=typeof e;let s;n==="object"?s=vT(e):n==="string"&&(s=AQ(e)||PQ(e)||VQ(e)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var e=PF(this._rgb);return e&&(e.a=yi(e.a)),e}set rgb(e){this._rgb=vT(e)}rgbString(){return this._valid?BQ(this._rgb):void 0}hexString(){return this._valid?jQ(this._rgb):void 0}hslString(){return this._valid?RQ(this._rgb):void 0}mix(e,n){if(e){const s=this.rgb,r=e.rgb;let i;const o=n===i?.5:n,c=2*o-1,u=s.a-r.a,f=((c*u===-1?c:(c+u)/(1+c*u))+1)/2;i=1-f,s.r=255&f*s.r+i*r.r+.5,s.g=255&f*s.g+i*r.g+.5,s.b=255&f*s.b+i*r.b+.5,s.a=o*s.a+(1-o)*r.a,this.rgb=s}return this}interpolate(e,n){return e&&(this._rgb=IQ(this._rgb,e._rgb,n)),this}clone(){return new bh(this.rgb)}alpha(e){return this._rgb.a=So(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=em(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return zp(this._rgb,2,e),this}darken(e){return zp(this._rgb,2,-e),this}saturate(e){return zp(this._rgb,1,e),this}desaturate(e){return zp(this._rgb,1,-e),this}rotate(e){return MQ(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function di(){}const zQ=(()=>{let t=0;return()=>t++})();function zt(t){return t==null}function bn(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Mt(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function hs(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function va(t,e){return hs(t)?t:e}function Dt(t,e){return typeof t>"u"?e:t}const $Q=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,LF=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function rn(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function an(t,e,n,s){let r,i,o;if(bn(t))for(i=t.length,r=0;r<i;r++)e.call(n,t[r],r);else if(Mt(t))for(o=Object.keys(t),i=o.length,r=0;r<i;r++)e.call(n,t[o[r]],o[r])}function ly(t,e){let n,s,r,i;if(!t||!e||t.length!==e.length)return!1;for(n=0,s=t.length;n<s;++n)if(r=t[n],i=e[n],r.datasetIndex!==i.datasetIndex||r.index!==i.index)return!1;return!0}function cy(t){if(bn(t))return t.map(cy);if(Mt(t)){const e=Object.create(null),n=Object.keys(t),s=n.length;let r=0;for(;r<s;++r)e[n[r]]=cy(t[n[r]]);return e}return t}function FF(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function HQ(t,e,n,s){if(!FF(t))return;const r=e[t],i=n[t];Mt(r)&&Mt(i)?Ya(r,i,s):e[t]=cy(i)}function Ya(t,e,n){const s=bn(e)?e:[e],r=s.length;if(!Mt(t))return t;n=n||{};const i=n.merger||HQ;let o;for(let c=0;c<r;++c){if(o=s[c],!Mt(o))continue;const u=Object.keys(o);for(let f=0,m=u.length;f<m;++f)i(u[f],t,o,n)}return t}function Zf(t,e){return Ya(t,e,{merger:UQ})}function UQ(t,e,n){if(!FF(t))return;const s=e[t],r=n[t];Mt(s)&&Mt(r)?Zf(s,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=cy(r))}const _T={"":t=>t,x:t=>t.x,y:t=>t.y};function WQ(t){const e=t.split("."),n=[];let s="";for(const r of e)s+=r,s.endsWith("\\")?s=s.slice(0,-1)+".":(n.push(s),s="");return n}function YQ(t){const e=WQ(t);return n=>{for(const s of e){if(s==="")break;n=n&&n[s]}return n}}function ql(t,e){return(_T[e]||(_T[e]=YQ(e)))(t)}function qj(t){return t.charAt(0).toUpperCase()+t.slice(1)}const ar=t=>typeof t<"u",sr=t=>typeof t=="function",AT=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function qQ(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Lt=Math.PI,wn=2*Lt,GQ=wn+Lt,uy=Number.POSITIVE_INFINITY,Gj=Lt/180,Tn=Lt/2,Pr=Lt/4,dy=Lt*2/3,BF=Math.log10,Va=Math.sign;function Jf(t,e,n){return Math.abs(t-e)<n}function wT(t){const e=Math.round(t);t=Jf(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(BF(t))),s=t/n;return(s<=1?1:s<=2?2:s<=5?5:10)*n}function KQ(t){const e=[],n=Math.sqrt(t);let s;for(s=1;s<n;s++)t%s===0&&(e.push(s),e.push(t/s));return n===(n|0)&&e.push(n),e.sort((r,i)=>r-i).pop(),e}function QQ(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Gl(t){return!QQ(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function XQ(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function ZQ(t,e,n){let s,r,i;for(s=0,r=t.length;s<r;s++)i=t[s][n],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function ds(t){return t*(Lt/180)}function IF(t){return t*(180/Lt)}function jT(t){if(!hs(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function fy(t,e){const n=e.x-t.x,s=e.y-t.y,r=Math.sqrt(n*n+s*s);let i=Math.atan2(s,n);return i<-.5*Lt&&(i+=wn),{angle:i,distance:r}}function ju(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function JQ(t,e){return(t-e+GQ)%wn-Lt}function mr(t){return(t%wn+wn)%wn}function vh(t,e,n,s){const r=mr(t),i=mr(e),o=mr(n),c=mr(i-r),u=mr(o-r),f=mr(r-i),m=mr(r-o);return r===i||r===o||s&&i===o||c>u&&f<m}function fs(t,e,n){return Math.max(e,Math.min(n,t))}function eX(t){return fs(t,-32768,32767)}function bi(t,e,n,s=1e-6){return t>=Math.min(e,n)-s&&t<=Math.max(e,n)+s}function Kj(t,e,n){n=n||(o=>t[o]<e);let s=t.length-1,r=0,i;for(;s-r>1;)i=r+s>>1,n(i)?r=i:s=i;return{lo:r,hi:s}}const vi=(t,e,n,s)=>Kj(t,n,s?r=>{const i=t[r][e];return i<n||i===n&&t[r+1][e]===n}:r=>t[r][e]<n),tX=(t,e,n)=>Kj(t,n,s=>t[s][e]>=n);function nX(t,e,n){let s=0,r=t.length;for(;s<r&&t[s]<e;)s++;for(;r>s&&t[r-1]>n;)r--;return s>0||r<t.length?t.slice(s,r):t}const VF=["push","pop","shift","splice","unshift"];function sX(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),VF.forEach(n=>{const s="_onData"+qj(n),r=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...i){const o=r.apply(this,i);return t._chartjs.listeners.forEach(c=>{typeof c[s]=="function"&&c[s](...i)}),o}})})}function ST(t,e){const n=t._chartjs;if(!n)return;const s=n.listeners,r=s.indexOf(e);r!==-1&&s.splice(r,1),!(s.length>0)&&(VF.forEach(i=>{delete t[i]}),delete t._chartjs)}function zF(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const $F=(function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame})();function HF(t,e){let n=[],s=!1;return function(...r){n=r,s||(s=!0,$F.call(window,()=>{s=!1,t.apply(e,n)}))}}function rX(t,e){let n;return function(...s){return e?(clearTimeout(n),n=setTimeout(t,e,s)):t.apply(this,s),e}}const Qj=t=>t==="start"?"left":t==="end"?"right":"center",ks=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,aX=(t,e,n,s)=>t===(s?"left":"right")?n:t==="center"?(e+n)/2:e;function iX(t,e,n){const s=e.length;let r=0,i=s;if(t._sorted){const{iScale:o,vScale:c,_parsed:u}=t,f=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,m=o.axis,{min:h,max:g,minDefined:x,maxDefined:b}=o.getUserBounds();if(x){if(r=Math.min(vi(u,m,h).lo,n?s:vi(e,m,o.getPixelForValue(h)).lo),f){const A=u.slice(0,r+1).reverse().findIndex(_=>!zt(_[c.axis]));r-=Math.max(0,A)}r=fs(r,0,s-1)}if(b){let A=Math.max(vi(u,o.axis,g,!0).hi+1,n?0:vi(e,m,o.getPixelForValue(g),!0).hi+1);if(f){const _=u.slice(A-1).findIndex(j=>!zt(j[c.axis]));A+=Math.max(0,_)}i=fs(A,r,s)-r}else i=s-r}return{start:r,count:i}}function oX(t){const{xScale:e,yScale:n,_scaleRanges:s}=t,r={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!s)return t._scaleRanges=r,!0;const i=s.xmin!==e.min||s.xmax!==e.max||s.ymin!==n.min||s.ymax!==n.max;return Object.assign(s,r),i}const $p=t=>t===0||t===1,CT=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*wn/n)),NT=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*wn/n)+1,eh={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Tn)+1,easeOutSine:t=>Math.sin(t*Tn),easeInOutSine:t=>-.5*(Math.cos(Lt*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>$p(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>$p(t)?t:CT(t,.075,.3),easeOutElastic:t=>$p(t)?t:NT(t,.075,.3),easeInOutElastic(t){return $p(t)?t:t<.5?.5*CT(t*2,.1125,.45):.5+.5*NT(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-eh.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?eh.easeInBounce(t*2)*.5:eh.easeOutBounce(t*2-1)*.5+.5};function Xj(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function kT(t){return Xj(t)?t:new bh(t)}function Y0(t){return Xj(t)?t:new bh(t).saturate(.5).darken(.1).hexString()}const lX=["x","y","borderWidth","radius","tension"],cX=["color","borderColor","backgroundColor"];function uX(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:cX},numbers:{type:"number",properties:lX}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function dX(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const DT=new Map;function fX(t,e){e=e||{};const n=t+JSON.stringify(e);let s=DT.get(n);return s||(s=new Intl.NumberFormat(t,e),DT.set(n,s)),s}function Zj(t,e,n){return fX(e,n).format(t)}const hX={values(t){return bn(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const s=this.chart.options.locale;let r,i=t;if(n.length>1){const f=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(f<1e-4||f>1e15)&&(r="scientific"),i=mX(t,n)}const o=BF(Math.abs(i)),c=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),u={notation:r,minimumFractionDigits:c,maximumFractionDigits:c};return Object.assign(u,this.options.ticks.format),Zj(t,s,u)}};function mX(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var UF={formatters:hX};function pX(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:UF.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Kl=Object.create(null),jA=Object.create(null);function th(t,e){if(!e)return t;const n=e.split(".");for(let s=0,r=n.length;s<r;++s){const i=n[s];t=t[i]||(t[i]=Object.create(null))}return t}function q0(t,e,n){return typeof e=="string"?Ya(th(t,e),n):Ya(th(t,""),e)}class gX{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,r)=>Y0(r.backgroundColor),this.hoverBorderColor=(s,r)=>Y0(r.borderColor),this.hoverColor=(s,r)=>Y0(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return q0(this,e,n)}get(e){return th(this,e)}describe(e,n){return q0(jA,e,n)}override(e,n){return q0(Kl,e,n)}route(e,n,s,r){const i=th(this,e),o=th(this,s),c="_"+n;Object.defineProperties(i,{[c]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const u=this[c],f=o[r];return Mt(u)?Object.assign({},f,u):Dt(u,f)},set(u){this[c]=u}}})}apply(e){e.forEach(n=>n(this))}}var Mn=new gX({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[uX,dX,pX]);function yX(t){return!t||zt(t.size)||zt(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function ET(t,e,n,s,r){let i=e[r];return i||(i=e[r]=t.measureText(r).width,n.push(r)),i>s&&(s=i),s}function pl(t,e,n){const s=t.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((e-r)*s)/s+r}function TT(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function SA(t,e,n,s){WF(t,e,n,s,null)}function WF(t,e,n,s,r){let i,o,c,u,f,m,h,g;const x=e.pointStyle,b=e.rotation,A=e.radius;let _=(b||0)*Gj;if(x&&typeof x=="object"&&(i=x.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(n,s),t.rotate(_),t.drawImage(x,-x.width/2,-x.height/2,x.width,x.height),t.restore();return}if(!(isNaN(A)||A<=0)){switch(t.beginPath(),x){default:r?t.ellipse(n,s,r/2,A,0,0,wn):t.arc(n,s,A,0,wn),t.closePath();break;case"triangle":m=r?r/2:A,t.moveTo(n+Math.sin(_)*m,s-Math.cos(_)*A),_+=dy,t.lineTo(n+Math.sin(_)*m,s-Math.cos(_)*A),_+=dy,t.lineTo(n+Math.sin(_)*m,s-Math.cos(_)*A),t.closePath();break;case"rectRounded":f=A*.516,u=A-f,o=Math.cos(_+Pr)*u,h=Math.cos(_+Pr)*(r?r/2-f:u),c=Math.sin(_+Pr)*u,g=Math.sin(_+Pr)*(r?r/2-f:u),t.arc(n-h,s-c,f,_-Lt,_-Tn),t.arc(n+g,s-o,f,_-Tn,_),t.arc(n+h,s+c,f,_,_+Tn),t.arc(n-g,s+o,f,_+Tn,_+Lt),t.closePath();break;case"rect":if(!b){u=Math.SQRT1_2*A,m=r?r/2:u,t.rect(n-m,s-u,2*m,2*u);break}_+=Pr;case"rectRot":h=Math.cos(_)*(r?r/2:A),o=Math.cos(_)*A,c=Math.sin(_)*A,g=Math.sin(_)*(r?r/2:A),t.moveTo(n-h,s-c),t.lineTo(n+g,s-o),t.lineTo(n+h,s+c),t.lineTo(n-g,s+o),t.closePath();break;case"crossRot":_+=Pr;case"cross":h=Math.cos(_)*(r?r/2:A),o=Math.cos(_)*A,c=Math.sin(_)*A,g=Math.sin(_)*(r?r/2:A),t.moveTo(n-h,s-c),t.lineTo(n+h,s+c),t.moveTo(n+g,s-o),t.lineTo(n-g,s+o);break;case"star":h=Math.cos(_)*(r?r/2:A),o=Math.cos(_)*A,c=Math.sin(_)*A,g=Math.sin(_)*(r?r/2:A),t.moveTo(n-h,s-c),t.lineTo(n+h,s+c),t.moveTo(n+g,s-o),t.lineTo(n-g,s+o),_+=Pr,h=Math.cos(_)*(r?r/2:A),o=Math.cos(_)*A,c=Math.sin(_)*A,g=Math.sin(_)*(r?r/2:A),t.moveTo(n-h,s-c),t.lineTo(n+h,s+c),t.moveTo(n+g,s-o),t.lineTo(n-g,s+o);break;case"line":o=r?r/2:Math.cos(_)*A,c=Math.sin(_)*A,t.moveTo(n-o,s-c),t.lineTo(n+o,s+c);break;case"dash":t.moveTo(n,s),t.lineTo(n+Math.cos(_)*(r?r/2:A),s+Math.sin(_)*A);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function _h(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function tm(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function nm(t){t.restore()}function xX(t,e,n,s,r){if(!e)return t.lineTo(n.x,n.y);if(r==="middle"){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else r==="after"!=!!s?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function bX(t,e,n,s){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(s?e.cp1x:e.cp2x,s?e.cp1y:e.cp2y,s?n.cp2x:n.cp1x,s?n.cp2y:n.cp1y,n.x,n.y)}function vX(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),zt(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function _X(t,e,n,s,r){if(r.strikethrough||r.underline){const i=t.measureText(s),o=e-i.actualBoundingBoxLeft,c=e+i.actualBoundingBoxRight,u=n-i.actualBoundingBoxAscent,f=n+i.actualBoundingBoxDescent,m=r.strikethrough?(u+f)/2:f;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,m),t.lineTo(c,m),t.stroke()}}function AX(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Ah(t,e,n,s,r,i={}){const o=bn(e)?e:[e],c=i.strokeWidth>0&&i.strokeColor!=="";let u,f;for(t.save(),t.font=r.string,vX(t,i),u=0;u<o.length;++u)f=o[u],i.backdrop&&AX(t,i.backdrop),c&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),zt(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(f,n,s,i.maxWidth)),t.fillText(f,n,s,i.maxWidth),_X(t,n,s,f,i),s+=Number(r.lineHeight);t.restore()}function wh(t,e){const{x:n,y:s,w:r,h:i,radius:o}=e;t.arc(n+o.topLeft,s+o.topLeft,o.topLeft,1.5*Lt,Lt,!0),t.lineTo(n,s+i-o.bottomLeft),t.arc(n+o.bottomLeft,s+i-o.bottomLeft,o.bottomLeft,Lt,Tn,!0),t.lineTo(n+r-o.bottomRight,s+i),t.arc(n+r-o.bottomRight,s+i-o.bottomRight,o.bottomRight,Tn,0,!0),t.lineTo(n+r,s+o.topRight),t.arc(n+r-o.topRight,s+o.topRight,o.topRight,0,-Tn,!0),t.lineTo(n+o.topLeft,s)}const wX=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,jX=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function SX(t,e){const n=(""+t).match(wX);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const CX=t=>+t||0;function Jj(t,e){const n={},s=Mt(e),r=s?Object.keys(e):e,i=Mt(t)?s?o=>Dt(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of r)n[o]=CX(i(o));return n}function YF(t){return Jj(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Il(t){return Jj(t,["topLeft","topRight","bottomLeft","bottomRight"])}function As(t){const e=YF(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function es(t,e){t=t||{},e=e||Mn.font;let n=Dt(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let s=Dt(t.style,e.style);s&&!(""+s).match(jX)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const r={family:Dt(t.family,e.family),lineHeight:SX(Dt(t.lineHeight,e.lineHeight),n),size:n,style:s,weight:Dt(t.weight,e.weight),string:""};return r.string=yX(r),r}function An(t,e,n,s){let r,i,o;for(r=0,i=t.length;r<i;++r)if(o=t[r],o!==void 0&&(e!==void 0&&typeof o=="function"&&(o=o(e)),n!==void 0&&bn(o)&&(o=o[n%o.length]),o!==void 0))return o}function NX(t,e,n){const{min:s,max:r}=t,i=LF(e,(r-s)/2),o=(c,u)=>n&&c===0?0:c+u;return{min:o(s,-Math.abs(i)),max:o(r,i)}}function rc(t,e){return Object.assign(Object.create(t),e)}function eS(t,e=[""],n,s,r=()=>t[0]){const i=n||t;typeof s>"u"&&(s=QF("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:s,_getTarget:r,override:c=>eS([c,...t],e,i,s)};return new Proxy(o,{deleteProperty(c,u){return delete c[u],delete c._keys,delete t[0][u],!0},get(c,u){return GF(c,u,()=>PX(u,e,t,c))},getOwnPropertyDescriptor(c,u){return Reflect.getOwnPropertyDescriptor(c._scopes[0],u)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(c,u){return RT(c).includes(u)},ownKeys(c){return RT(c)},set(c,u,f){const m=c._storage||(c._storage=r());return c[u]=m[u]=f,delete c._keys,!0}})}function Su(t,e,n,s){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:qF(t,s),setContext:i=>Su(t,i,n,s),override:i=>Su(t.override(i),e,n,s)};return new Proxy(r,{deleteProperty(i,o){return delete i[o],delete t[o],!0},get(i,o,c){return GF(i,o,()=>DX(i,o,c))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(i,o,c){return t[o]=c,delete i[o],!0}})}function qF(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:s=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:s,isScriptable:sr(n)?n:()=>n,isIndexable:sr(s)?s:()=>s}}const kX=(t,e)=>t?t+qj(e):e,tS=(t,e)=>Mt(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function GF(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const s=n();return t[e]=s,s}function DX(t,e,n){const{_proxy:s,_context:r,_subProxy:i,_descriptors:o}=t;let c=s[e];return sr(c)&&o.isScriptable(e)&&(c=EX(e,c,t,n)),bn(c)&&c.length&&(c=TX(e,c,t,o.isIndexable)),tS(e,c)&&(c=Su(c,r,i&&i[e],o)),c}function EX(t,e,n,s){const{_proxy:r,_context:i,_subProxy:o,_stack:c}=n;if(c.has(t))throw new Error("Recursion detected: "+Array.from(c).join("->")+"->"+t);c.add(t);let u=e(i,o||s);return c.delete(t),tS(t,u)&&(u=nS(r._scopes,r,t,u)),u}function TX(t,e,n,s){const{_proxy:r,_context:i,_subProxy:o,_descriptors:c}=n;if(typeof i.index<"u"&&s(t))return e[i.index%e.length];if(Mt(e[0])){const u=e,f=r._scopes.filter(m=>m!==u);e=[];for(const m of u){const h=nS(f,r,t,m);e.push(Su(h,i,o&&o[t],c))}}return e}function KF(t,e,n){return sr(t)?t(e,n):t}const MX=(t,e)=>t===!0?e:typeof t=="string"?ql(e,t):void 0;function RX(t,e,n,s,r){for(const i of e){const o=MX(n,i);if(o){t.add(o);const c=KF(o._fallback,n,r);if(typeof c<"u"&&c!==n&&c!==s)return c}else if(o===!1&&typeof s<"u"&&n!==s)return null}return!1}function nS(t,e,n,s){const r=e._rootScopes,i=KF(e._fallback,n,s),o=[...t,...r],c=new Set;c.add(s);let u=MT(c,o,n,i||n,s);return u===null||typeof i<"u"&&i!==n&&(u=MT(c,o,i,u,s),u===null)?!1:eS(Array.from(c),[""],r,i,()=>OX(e,n,s))}function MT(t,e,n,s,r){for(;n;)n=RX(t,e,n,s,r);return n}function OX(t,e,n){const s=t._getTarget();e in s||(s[e]={});const r=s[e];return bn(r)&&Mt(n)?n:r||{}}function PX(t,e,n,s){let r;for(const i of e)if(r=QF(kX(i,t),n),typeof r<"u")return tS(t,r)?nS(n,s,t,r):r}function QF(t,e){for(const n of e){if(!n)continue;const s=n[t];if(typeof s<"u")return s}}function RT(t){let e=t._keys;return e||(e=t._keys=LX(t._scopes)),e}function LX(t){const e=new Set;for(const n of t)for(const s of Object.keys(n).filter(r=>!r.startsWith("_")))e.add(s);return Array.from(e)}const FX=Number.EPSILON||1e-14,Cu=(t,e)=>e<t.length&&!t[e].skip&&t[e],XF=t=>t==="x"?"y":"x";function BX(t,e,n,s){const r=t.skip?e:t,i=e,o=n.skip?e:n,c=ju(i,r),u=ju(o,i);let f=c/(c+u),m=u/(c+u);f=isNaN(f)?0:f,m=isNaN(m)?0:m;const h=s*f,g=s*m;return{previous:{x:i.x-h*(o.x-r.x),y:i.y-h*(o.y-r.y)},next:{x:i.x+g*(o.x-r.x),y:i.y+g*(o.y-r.y)}}}function IX(t,e,n){const s=t.length;let r,i,o,c,u,f=Cu(t,0);for(let m=0;m<s-1;++m)if(u=f,f=Cu(t,m+1),!(!u||!f)){if(Jf(e[m],0,FX)){n[m]=n[m+1]=0;continue}r=n[m]/e[m],i=n[m+1]/e[m],c=Math.pow(r,2)+Math.pow(i,2),!(c<=9)&&(o=3/Math.sqrt(c),n[m]=r*o*e[m],n[m+1]=i*o*e[m])}}function VX(t,e,n="x"){const s=XF(n),r=t.length;let i,o,c,u=Cu(t,0);for(let f=0;f<r;++f){if(o=c,c=u,u=Cu(t,f+1),!c)continue;const m=c[n],h=c[s];o&&(i=(m-o[n])/3,c[`cp1${n}`]=m-i,c[`cp1${s}`]=h-i*e[f]),u&&(i=(u[n]-m)/3,c[`cp2${n}`]=m+i,c[`cp2${s}`]=h+i*e[f])}}function zX(t,e="x"){const n=XF(e),s=t.length,r=Array(s).fill(0),i=Array(s);let o,c,u,f=Cu(t,0);for(o=0;o<s;++o)if(c=u,u=f,f=Cu(t,o+1),!!u){if(f){const m=f[e]-u[e];r[o]=m!==0?(f[n]-u[n])/m:0}i[o]=c?f?Va(r[o-1])!==Va(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}IX(t,r,i),VX(t,i,e)}function Hp(t,e,n){return Math.max(Math.min(t,n),e)}function $X(t,e){let n,s,r,i,o,c=_h(t[0],e);for(n=0,s=t.length;n<s;++n)o=i,i=c,c=n<s-1&&_h(t[n+1],e),i&&(r=t[n],o&&(r.cp1x=Hp(r.cp1x,e.left,e.right),r.cp1y=Hp(r.cp1y,e.top,e.bottom)),c&&(r.cp2x=Hp(r.cp2x,e.left,e.right),r.cp2y=Hp(r.cp2y,e.top,e.bottom)))}function HX(t,e,n,s,r){let i,o,c,u;if(e.spanGaps&&(t=t.filter(f=>!f.skip)),e.cubicInterpolationMode==="monotone")zX(t,r);else{let f=s?t[t.length-1]:t[0];for(i=0,o=t.length;i<o;++i)c=t[i],u=BX(f,c,t[Math.min(i+1,o-(s?0:1))%o],e.tension),c.cp1x=u.previous.x,c.cp1y=u.previous.y,c.cp2x=u.next.x,c.cp2y=u.next.y,f=c}e.capBezierPoints&&$X(t,n)}function sS(){return typeof window<"u"&&typeof document<"u"}function rS(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function hy(t,e,n){let s;return typeof t=="string"?(s=parseInt(t,10),t.indexOf("%")!==-1&&(s=s/100*e.parentNode[n])):s=t,s}const gx=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function UX(t,e){return gx(t).getPropertyValue(e)}const WX=["top","right","bottom","left"];function Vl(t,e,n){const s={};n=n?"-"+n:"";for(let r=0;r<4;r++){const i=WX[r];s[i]=parseFloat(t[e+"-"+i+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const YX=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function qX(t,e){const n=t.touches,s=n&&n.length?n[0]:t,{offsetX:r,offsetY:i}=s;let o=!1,c,u;if(YX(r,i,t.target))c=r,u=i;else{const f=e.getBoundingClientRect();c=s.clientX-f.left,u=s.clientY-f.top,o=!0}return{x:c,y:u,box:o}}function vl(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:s}=e,r=gx(n),i=r.boxSizing==="border-box",o=Vl(r,"padding"),c=Vl(r,"border","width"),{x:u,y:f,box:m}=qX(t,n),h=o.left+(m&&c.left),g=o.top+(m&&c.top);let{width:x,height:b}=e;return i&&(x-=o.width+c.width,b-=o.height+c.height),{x:Math.round((u-h)/x*n.width/s),y:Math.round((f-g)/b*n.height/s)}}function GX(t,e,n){let s,r;if(e===void 0||n===void 0){const i=t&&rS(t);if(!i)e=t.clientWidth,n=t.clientHeight;else{const o=i.getBoundingClientRect(),c=gx(i),u=Vl(c,"border","width"),f=Vl(c,"padding");e=o.width-f.width-u.width,n=o.height-f.height-u.height,s=hy(c.maxWidth,i,"clientWidth"),r=hy(c.maxHeight,i,"clientHeight")}}return{width:e,height:n,maxWidth:s||uy,maxHeight:r||uy}}const Up=t=>Math.round(t*10)/10;function KX(t,e,n,s){const r=gx(t),i=Vl(r,"margin"),o=hy(r.maxWidth,t,"clientWidth")||uy,c=hy(r.maxHeight,t,"clientHeight")||uy,u=GX(t,e,n);let{width:f,height:m}=u;if(r.boxSizing==="content-box"){const g=Vl(r,"border","width"),x=Vl(r,"padding");f-=x.width+g.width,m-=x.height+g.height}return f=Math.max(0,f-i.width),m=Math.max(0,s?f/s:m-i.height),f=Up(Math.min(f,o,u.maxWidth)),m=Up(Math.min(m,c,u.maxHeight)),f&&!m&&(m=Up(f/2)),(e!==void 0||n!==void 0)&&s&&u.height&&m>u.height&&(m=u.height,f=Up(Math.floor(m*s))),{width:f,height:m}}function OT(t,e,n){const s=e||1,r=Math.floor(t.height*s),i=Math.floor(t.width*s);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==s||o.height!==r||o.width!==i?(t.currentDevicePixelRatio=s,o.height=r,o.width=i,t.ctx.setTransform(s,0,0,s,0,0),!0):!1}const QX=(function(){let t=!1;try{const e={get passive(){return t=!0,!1}};sS()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t})();function PT(t,e){const n=UX(t,e),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function _l(t,e,n,s){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function XX(t,e,n,s){return{x:t.x+n*(e.x-t.x),y:s==="middle"?n<.5?t.y:e.y:s==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function ZX(t,e,n,s){const r={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},o=_l(t,r,n),c=_l(r,i,n),u=_l(i,e,n),f=_l(o,c,n),m=_l(c,u,n);return _l(f,m,n)}const JX=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},eZ=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function du(t,e,n){return t?JX(e,n):eZ()}function ZF(t,e){let n,s;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=s)}function JF(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function e4(t){return t==="angle"?{between:vh,compare:JQ,normalize:mr}:{between:bi,compare:(e,n)=>e-n,normalize:e=>e}}function LT({start:t,end:e,count:n,loop:s,style:r}){return{start:t%n,end:e%n,loop:s&&(e-t+1)%n===0,style:r}}function tZ(t,e,n){const{property:s,start:r,end:i}=n,{between:o,normalize:c}=e4(s),u=e.length;let{start:f,end:m,loop:h}=t,g,x;if(h){for(f+=u,m+=u,g=0,x=u;g<x&&o(c(e[f%u][s]),r,i);++g)f--,m--;f%=u,m%=u}return m<f&&(m+=u),{start:f,end:m,loop:h,style:t.style}}function t4(t,e,n){if(!n)return[t];const{property:s,start:r,end:i}=n,o=e.length,{compare:c,between:u,normalize:f}=e4(s),{start:m,end:h,loop:g,style:x}=tZ(t,e,n),b=[];let A=!1,_=null,j,C,k;const E=()=>u(r,k,j)&&c(r,k)!==0,N=()=>c(i,j)===0||u(i,k,j),L=()=>A||E(),M=()=>!A||N();for(let T=m,O=m;T<=h;++T)C=e[T%o],!C.skip&&(j=f(C[s]),j!==k&&(A=u(j,r,i),_===null&&L()&&(_=c(j,r)===0?T:O),_!==null&&M()&&(b.push(LT({start:_,end:T,loop:g,count:o,style:x})),_=null),O=T,k=j));return _!==null&&b.push(LT({start:_,end:h,loop:g,count:o,style:x})),b}function n4(t,e){const n=[],s=t.segments;for(let r=0;r<s.length;r++){const i=t4(s[r],t.points,e);i.length&&n.push(...i)}return n}function nZ(t,e,n,s){let r=0,i=e-1;if(n&&!s)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,n&&(i+=r);i>r&&t[i%e].skip;)i--;return i%=e,{start:r,end:i}}function sZ(t,e,n,s){const r=t.length,i=[];let o=e,c=t[e],u;for(u=e+1;u<=n;++u){const f=t[u%r];f.skip||f.stop?c.skip||(s=!1,i.push({start:e%r,end:(u-1)%r,loop:s}),e=o=f.stop?u:null):(o=u,c.skip&&(e=u)),c=f}return o!==null&&i.push({start:e%r,end:o%r,loop:s}),i}function rZ(t,e){const n=t.points,s=t.options.spanGaps,r=n.length;if(!r)return[];const i=!!t._loop,{start:o,end:c}=nZ(n,r,i,s);if(s===!0)return FT(t,[{start:o,end:c,loop:i}],n,e);const u=c<o?c+r:c,f=!!t._fullLoop&&o===0&&c===r-1;return FT(t,sZ(n,o,u,f),n,e)}function FT(t,e,n,s){return!s||!s.setContext||!n?e:aZ(t,e,n,s)}function aZ(t,e,n,s){const r=t._chart.getContext(),i=BT(t.options),{_datasetIndex:o,options:{spanGaps:c}}=t,u=n.length,f=[];let m=i,h=e[0].start,g=h;function x(b,A,_,j){const C=c?-1:1;if(b!==A){for(b+=u;n[b%u].skip;)b-=C;for(;n[A%u].skip;)A+=C;b%u!==A%u&&(f.push({start:b%u,end:A%u,loop:_,style:j}),m=j,h=A%u)}}for(const b of e){h=c?h:b.start;let A=n[h%u],_;for(g=h+1;g<=b.end;g++){const j=n[g%u];_=BT(s.setContext(rc(r,{type:"segment",p0:A,p1:j,p0DataIndex:(g-1)%u,p1DataIndex:g%u,datasetIndex:o}))),iZ(_,m)&&x(h,g-1,b.loop,m),A=j,m=_}h<g-1&&x(h,g-1,b.loop,m)}return f}function BT(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function iZ(t,e){if(!e)return!1;const n=[],s=function(r,i){return Xj(i)?(n.includes(i)||n.push(i),n.indexOf(i)):i};return JSON.stringify(t,s)!==JSON.stringify(e,s)}function Wp(t,e,n){return t.options.clip?t[n]:e[n]}function oZ(t,e){const{xScale:n,yScale:s}=t;return n&&s?{left:Wp(n,e,"left"),right:Wp(n,e,"right"),top:Wp(s,e,"top"),bottom:Wp(s,e,"bottom")}:e}function s4(t,e){const n=e._clip;if(n.disabled)return!1;const s=oZ(e,t.chartArea);return{left:n.left===!1?0:s.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:s.right+(n.right===!0?0:n.right),top:n.top===!1?0:s.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:s.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class lZ{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,s,r){const i=n.listeners[r],o=n.duration;i.forEach(c=>c({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(s-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=$F.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((s,r)=>{if(!s.running||!s.items.length)return;const i=s.items;let o=i.length-1,c=!1,u;for(;o>=0;--o)u=i[o],u._active?(u._total>s.duration&&(s.duration=u._total),u.tick(e),c=!0):(i[o]=i[i.length-1],i.pop());c&&(r.draw(),this._notify(r,s,e,"progress")),i.length||(s.running=!1,this._notify(r,s,e,"complete"),s.initial=!1),n+=i.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let s=n.get(e);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,s)),s}listen(e,n,s){this._getAnims(e).listeners[n].push(s)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,r)=>Math.max(s,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const s=n.items;let r=s.length-1;for(;r>=0;--r)s[r].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var hi=new lZ;const IT="transparent",cZ={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const s=kT(t||IT),r=s.valid&&kT(e||IT);return r&&r.valid?r.mix(s,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class uZ{constructor(e,n,s,r){const i=n[s];r=An([e.to,r,i,e.from]);const o=An([e.from,i,r]);this._active=!0,this._fn=e.fn||cZ[e.type||typeof o],this._easing=eh[e.easing]||eh.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=s,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,n,s){if(this._active){this._notify(!1);const r=this._target[this._prop],i=s-this._start,o=this._duration-i;this._start=s,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=An([e.to,n,r,e.from]),this._from=An([e.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,s=this._duration,r=this._prop,i=this._from,o=this._loop,c=this._to;let u;if(this._active=i!==c&&(o||n<s),!this._active){this._target[r]=c,this._notify(!0);return}if(n<0){this._target[r]=i;return}u=n/s%2,u=o&&u>1?2-u:u,u=this._easing(Math.min(1,Math.max(0,u))),this._target[r]=this._fn(i,c,u)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,s)=>{e.push({res:n,rej:s})})}_notify(e){const n=e?"res":"rej",s=this._promises||[];for(let r=0;r<s.length;r++)s[r][n]()}}class aS{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Mt(e))return;const n=Object.keys(Mn.animation),s=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const i=e[r];if(!Mt(i))return;const o={};for(const c of n)o[c]=i[c];(bn(i.properties)&&i.properties||[r]).forEach(c=>{(c===r||!s.has(c))&&s.set(c,o)})})}_animateOptions(e,n){const s=n.options,r=fZ(e,s);if(!r)return[];const i=this._createAnimations(r,s);return s.$shared&&dZ(e.options.$animations,s).then(()=>{e.options=s},()=>{}),i}_createAnimations(e,n){const s=this._properties,r=[],i=e.$animations||(e.$animations={}),o=Object.keys(n),c=Date.now();let u;for(u=o.length-1;u>=0;--u){const f=o[u];if(f.charAt(0)==="$")continue;if(f==="options"){r.push(...this._animateOptions(e,n));continue}const m=n[f];let h=i[f];const g=s.get(f);if(h)if(g&&h.active()){h.update(g,m,c);continue}else h.cancel();if(!g||!g.duration){e[f]=m;continue}i[f]=h=new uZ(g,e,f,m),r.push(h)}return r}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const s=this._createAnimations(e,n);if(s.length)return hi.add(this._chart,s),!0}}function dZ(t,e){const n=[],s=Object.keys(e);for(let r=0;r<s.length;r++){const i=t[s[r]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function fZ(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function VT(t,e){const n=t&&t.options||{},s=n.reverse,r=n.min===void 0?e:0,i=n.max===void 0?e:0;return{start:s?i:r,end:s?r:i}}function hZ(t,e,n){if(n===!1)return!1;const s=VT(t,n),r=VT(e,n);return{top:r.end,right:s.end,bottom:r.start,left:s.start}}function mZ(t){let e,n,s,r;return Mt(t)?(e=t.top,n=t.right,s=t.bottom,r=t.left):e=n=s=r=t,{top:e,right:n,bottom:s,left:r,disabled:t===!1}}function r4(t,e){const n=[],s=t._getSortedDatasetMetas(e);let r,i;for(r=0,i=s.length;r<i;++r)n.push(s[r].index);return n}function zT(t,e,n,s={}){const r=t.keys,i=s.mode==="single";let o,c,u,f;if(e===null)return;let m=!1;for(o=0,c=r.length;o<c;++o){if(u=+r[o],u===n){if(m=!0,s.all)continue;break}f=t.values[u],hs(f)&&(i||e===0||Va(e)===Va(f))&&(e+=f)}return!m&&!s.all?0:e}function pZ(t,e){const{iScale:n,vScale:s}=e,r=n.axis==="x"?"x":"y",i=s.axis==="x"?"x":"y",o=Object.keys(t),c=new Array(o.length);let u,f,m;for(u=0,f=o.length;u<f;++u)m=o[u],c[u]={[r]:m,[i]:t[m]};return c}function G0(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function gZ(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function yZ(t){const{min:e,max:n,minDefined:s,maxDefined:r}=t.getUserBounds();return{min:s?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function xZ(t,e,n){const s=t[e]||(t[e]={});return s[n]||(s[n]={})}function $T(t,e,n,s){for(const r of e.getMatchingVisibleMetas(s).reverse()){const i=t[r.index];if(n&&i>0||!n&&i<0)return r.index}return null}function HT(t,e){const{chart:n,_cachedMeta:s}=t,r=n._stacks||(n._stacks={}),{iScale:i,vScale:o,index:c}=s,u=i.axis,f=o.axis,m=gZ(i,o,s),h=e.length;let g;for(let x=0;x<h;++x){const b=e[x],{[u]:A,[f]:_}=b,j=b._stacks||(b._stacks={});g=j[f]=xZ(r,m,A),g[c]=_,g._top=$T(g,o,!0,s.type),g._bottom=$T(g,o,!1,s.type);const C=g._visualValues||(g._visualValues={});C[c]=_}}function K0(t,e){const n=t.scales;return Object.keys(n).filter(s=>n[s].axis===e).shift()}function bZ(t,e){return rc(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function vZ(t,e,n){return rc(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function ff(t,e){const n=t.controller.index,s=t.vScale&&t.vScale.axis;if(s){e=e||t._parsed;for(const r of e){const i=r._stacks;if(!i||i[s]===void 0||i[s][n]===void 0)return;delete i[s][n],i[s]._visualValues!==void 0&&i[s]._visualValues[n]!==void 0&&delete i[s]._visualValues[n]}}}const Q0=t=>t==="reset"||t==="none",UT=(t,e)=>e?t:Object.assign({},t),_Z=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:r4(n,!0),values:null};class yx{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=G0(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&ff(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,s=this.getDataset(),r=(h,g,x,b)=>h==="x"?g:h==="r"?b:x,i=n.xAxisID=Dt(s.xAxisID,K0(e,"x")),o=n.yAxisID=Dt(s.yAxisID,K0(e,"y")),c=n.rAxisID=Dt(s.rAxisID,K0(e,"r")),u=n.indexAxis,f=n.iAxisID=r(u,i,o,c),m=n.vAxisID=r(u,o,i,c);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(c),n.iScale=this.getScaleForId(f),n.vScale=this.getScaleForId(m)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&ST(this._data,this),e._stacked&&ff(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),s=this._data;if(Mt(n)){const r=this._cachedMeta;this._data=pZ(n,r)}else if(s!==n){if(s){ST(s,this);const r=this._cachedMeta;ff(r),r._parsed=[]}n&&Object.isExtensible(n)&&sX(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,s=this.getDataset();let r=!1;this._dataCheck();const i=n._stacked;n._stacked=G0(n.vScale,n),n.stack!==s.stack&&(r=!0,ff(n),n.stack=s.stack),this._resyncElements(e),(r||i!==n._stacked)&&(HT(this,n._parsed),n._stacked=G0(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:s,_data:r}=this,{iScale:i,_stacked:o}=s,c=i.axis;let u=e===0&&n===r.length?!0:s._sorted,f=e>0&&s._parsed[e-1],m,h,g;if(this._parsing===!1)s._parsed=r,s._sorted=!0,g=r;else{bn(r[e])?g=this.parseArrayData(s,r,e,n):Mt(r[e])?g=this.parseObjectData(s,r,e,n):g=this.parsePrimitiveData(s,r,e,n);const x=()=>h[c]===null||f&&h[c]<f[c];for(m=0;m<n;++m)s._parsed[m+e]=h=g[m],u&&(x()&&(u=!1),f=h);s._sorted=u}o&&HT(this,g)}parsePrimitiveData(e,n,s,r){const{iScale:i,vScale:o}=e,c=i.axis,u=o.axis,f=i.getLabels(),m=i===o,h=new Array(r);let g,x,b;for(g=0,x=r;g<x;++g)b=g+s,h[g]={[c]:m||i.parse(f[b],b),[u]:o.parse(n[b],b)};return h}parseArrayData(e,n,s,r){const{xScale:i,yScale:o}=e,c=new Array(r);let u,f,m,h;for(u=0,f=r;u<f;++u)m=u+s,h=n[m],c[u]={x:i.parse(h[0],m),y:o.parse(h[1],m)};return c}parseObjectData(e,n,s,r){const{xScale:i,yScale:o}=e,{xAxisKey:c="x",yAxisKey:u="y"}=this._parsing,f=new Array(r);let m,h,g,x;for(m=0,h=r;m<h;++m)g=m+s,x=n[g],f[m]={x:i.parse(ql(x,c),g),y:o.parse(ql(x,u),g)};return f}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,s){const r=this.chart,i=this._cachedMeta,o=n[e.axis],c={keys:r4(r,!0),values:n._stacks[e.axis]._visualValues};return zT(c,o,i.index,{mode:s})}updateRangeFromParsed(e,n,s,r){const i=s[n.axis];let o=i===null?NaN:i;const c=r&&s._stacks[n.axis];r&&c&&(r.values=c,o=zT(r,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const s=this._cachedMeta,r=s._parsed,i=s._sorted&&e===s.iScale,o=r.length,c=this._getOtherScale(e),u=_Z(n,s,this.chart),f={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:m,max:h}=yZ(c);let g,x;function b(){x=r[g];const A=x[c.axis];return!hs(x[e.axis])||m>A||h<A}for(g=0;g<o&&!(!b()&&(this.updateRangeFromParsed(f,e,x,u),i));++g);if(i){for(g=o-1;g>=0;--g)if(!b()){this.updateRangeFromParsed(f,e,x,u);break}}return f}getAllParsedValues(e){const n=this._cachedMeta._parsed,s=[];let r,i,o;for(r=0,i=n.length;r<i;++r)o=n[r][e.axis],hs(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,s=n.iScale,r=n.vScale,i=this.getParsed(e);return{label:s?""+s.getLabelForValue(i[s.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=mZ(Dt(this.options.clip,hZ(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,s=this._cachedMeta,r=s.data||[],i=n.chartArea,o=[],c=this._drawStart||0,u=this._drawCount||r.length-c,f=this.options.drawActiveElementsOnTop;let m;for(s.dataset&&s.dataset.draw(e,i,c,u),m=c;m<c+u;++m){const h=r[m];h.hidden||(h.active&&f?o.push(h):h.draw(e,i))}for(m=0;m<o.length;++m)o[m].draw(e,i)}getStyle(e,n){const s=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,n,s){const r=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=vZ(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=r.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=bZ(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=s,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",s){const r=n==="active",i=this._cachedDataOpts,o=e+"-"+n,c=i[o],u=this.enableOptionSharing&&ar(s);if(c)return UT(c,u);const f=this.chart.config,m=f.datasetElementScopeKeys(this._type,e),h=r?[`${e}Hover`,"hover",e,""]:[e,""],g=f.getOptionScopes(this.getDataset(),m),x=Object.keys(Mn.elements[e]),b=()=>this.getContext(s,r,n),A=f.resolveNamedOptions(g,x,b,h);return A.$shared&&(A.$shared=u,i[o]=Object.freeze(UT(A,u))),A}_resolveAnimations(e,n,s){const r=this.chart,i=this._cachedDataOpts,o=`animation-${n}`,c=i[o];if(c)return c;let u;if(r.options.animation!==!1){const m=this.chart.config,h=m.datasetAnimationScopeKeys(this._type,n),g=m.getOptionScopes(this.getDataset(),h);u=m.createResolver(g,this.getContext(e,s,n))}const f=new aS(r,u&&u.animations);return u&&u._cacheable&&(i[o]=Object.freeze(f)),f}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||Q0(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const s=this.resolveDataElementOptions(e,n),r=this._sharedOptions,i=this.getSharedOptions(s),o=this.includeOptions(n,i)||i!==r;return this.updateSharedOptions(i,n,s),{sharedOptions:i,includeOptions:o}}updateElement(e,n,s,r){Q0(r)?Object.assign(e,s):this._resolveAnimations(n,r).update(e,s)}updateSharedOptions(e,n,s){e&&!Q0(n)&&this._resolveAnimations(void 0,n).update(e,s)}_setStyle(e,n,s,r){e.active=r;const i=this.getStyle(n,r);this._resolveAnimations(n,s,r).update(e,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(e,n,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,n,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,s=this._cachedMeta.data;for(const[c,u,f]of this._syncList)this[c](u,f);this._syncList=[];const r=s.length,i=n.length,o=Math.min(i,r);o&&this.parse(0,o),i>r?this._insertElements(r,i-r,e):i<r&&this._removeElements(i,r-i)}_insertElements(e,n,s=!0){const r=this._cachedMeta,i=r.data,o=e+n;let c;const u=f=>{for(f.length+=n,c=f.length-1;c>=o;c--)f[c]=f[c-n]};for(u(i),c=e;c<o;++c)i[c]=new this.dataElementType;this._parsing&&u(r._parsed),this.parse(e,n),s&&this.updateElements(i,e,n,"reset")}updateElements(e,n,s,r){}_removeElements(e,n){const s=this._cachedMeta;if(this._parsing){const r=s._parsed.splice(e,n);s._stacked&&ff(s,r)}s.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,s,r]=e;this[n](s,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function AZ(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let s=[];for(let r=0,i=n.length;r<i;r++)s=s.concat(n[r].controller.getAllParsedValues(t));t._cache.$bar=zF(s.sort((r,i)=>r-i))}return t._cache.$bar}function wZ(t){const e=t.iScale,n=AZ(e,t.type);let s=e._length,r,i,o,c;const u=()=>{o===32767||o===-32768||(ar(c)&&(s=Math.min(s,Math.abs(o-c)||s)),c=o)};for(r=0,i=n.length;r<i;++r)o=e.getPixelForValue(n[r]),u();for(c=void 0,r=0,i=e.ticks.length;r<i;++r)o=e.getPixelForTick(r),u();return s}function jZ(t,e,n,s){const r=n.barThickness;let i,o;return zt(r)?(i=e.min*n.categoryPercentage,o=n.barPercentage):(i=r*s,o=1),{chunk:i/s,ratio:o,start:e.pixels[t]-i/2}}function SZ(t,e,n,s){const r=e.pixels,i=r[t];let o=t>0?r[t-1]:null,c=t<r.length-1?r[t+1]:null;const u=n.categoryPercentage;o===null&&(o=i-(c===null?e.end-e.start:c-i)),c===null&&(c=i+i-o);const f=i-(i-Math.min(o,c))/2*u;return{chunk:Math.abs(c-o)/2*u/s,ratio:n.barPercentage,start:f}}function CZ(t,e,n,s){const r=n.parse(t[0],s),i=n.parse(t[1],s),o=Math.min(r,i),c=Math.max(r,i);let u=o,f=c;Math.abs(o)>Math.abs(c)&&(u=c,f=o),e[n.axis]=f,e._custom={barStart:u,barEnd:f,start:r,end:i,min:o,max:c}}function a4(t,e,n,s){return bn(t)?CZ(t,e,n,s):e[n.axis]=n.parse(t,s),e}function WT(t,e,n,s){const r=t.iScale,i=t.vScale,o=r.getLabels(),c=r===i,u=[];let f,m,h,g;for(f=n,m=n+s;f<m;++f)g=e[f],h={},h[r.axis]=c||r.parse(o[f],f),u.push(a4(g,h,i,f));return u}function X0(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function NZ(t,e,n){return t!==0?Va(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function kZ(t){let e,n,s,r,i;return t.horizontal?(e=t.base>t.x,n="left",s="right"):(e=t.base<t.y,n="bottom",s="top"),e?(r="end",i="start"):(r="start",i="end"),{start:n,end:s,reverse:e,top:r,bottom:i}}function DZ(t,e,n,s){let r=e.borderSkipped;const i={};if(!r){t.borderSkipped=i;return}if(r===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:c,reverse:u,top:f,bottom:m}=kZ(t);r==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===s?r=f:(n._bottom||0)===s?r=m:(i[YT(m,o,c,u)]=!0,r=f)),i[YT(r,o,c,u)]=!0,t.borderSkipped=i}function YT(t,e,n,s){return s?(t=EZ(t,e,n),t=qT(t,n,e)):t=qT(t,e,n),t}function EZ(t,e,n){return t===e?n:t===n?e:t}function qT(t,e,n){return t==="start"?e:t==="end"?n:t}function TZ(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class MZ extends yx{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,n,s,r){return WT(e,n,s,r)}parseArrayData(e,n,s,r){return WT(e,n,s,r)}parseObjectData(e,n,s,r){const{iScale:i,vScale:o}=e,{xAxisKey:c="x",yAxisKey:u="y"}=this._parsing,f=i.axis==="x"?c:u,m=o.axis==="x"?c:u,h=[];let g,x,b,A;for(g=s,x=s+r;g<x;++g)A=n[g],b={},b[i.axis]=i.parse(ql(A,f),g),h.push(a4(ql(A,m),b,o,g));return h}updateRangeFromParsed(e,n,s,r){super.updateRangeFromParsed(e,n,s,r);const i=s._custom;i&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:s,vScale:r}=n,i=this.getParsed(e),o=i._custom,c=X0(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+s.getLabelForValue(i[s.axis]),value:c}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,s,r){const i=r==="reset",{index:o,_cachedMeta:{vScale:c}}=this,u=c.getBasePixel(),f=c.isHorizontal(),m=this._getRuler(),{sharedOptions:h,includeOptions:g}=this._getSharedOptions(n,r);for(let x=n;x<n+s;x++){const b=this.getParsed(x),A=i||zt(b[c.axis])?{base:u,head:u}:this._calculateBarValuePixels(x),_=this._calculateBarIndexPixels(x,m),j=(b._stacks||{})[c.axis],C={horizontal:f,base:A.base,enableBorderRadius:!j||X0(b._custom)||o===j._top||o===j._bottom,x:f?A.head:_.center,y:f?_.center:A.head,height:f?_.size:Math.abs(A.size),width:f?Math.abs(A.size):_.size};g&&(C.options=h||this.resolveDataElementOptions(x,e[x].active?"active":r));const k=C.options||e[x].options;DZ(C,k,j,o),TZ(C,k,m.ratio),this.updateElement(e[x],x,C,r)}}_getStacks(e,n){const{iScale:s}=this._cachedMeta,r=s.getMatchingVisibleMetas(this._type).filter(m=>m.controller.options.grouped),i=s.options.stacked,o=[],c=this._cachedMeta.controller.getParsed(n),u=c&&c[s.axis],f=m=>{const h=m._parsed.find(x=>x[s.axis]===u),g=h&&h[m.vScale.axis];if(zt(g)||isNaN(g))return!0};for(const m of r)if(!(n!==void 0&&f(m))&&((i===!1||o.indexOf(m.stack)===-1||i===void 0&&m.stack===void 0)&&o.push(m.stack),m.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(e).filter(s=>e[s].axis===n).shift()}_getAxis(){const e={},n=this.getFirstScaleIdForIndexAxis();for(const s of this.chart.data.datasets)e[Dt(this.chart.options.indexAxis==="x"?s.xAxisID:s.yAxisID,n)]=!0;return Object.keys(e)}_getStackIndex(e,n,s){const r=this._getStacks(e,s),i=n!==void 0?r.indexOf(n):-1;return i===-1?r.length-1:i}_getRuler(){const e=this.options,n=this._cachedMeta,s=n.iScale,r=[];let i,o;for(i=0,o=n.data.length;i<o;++i)r.push(s.getPixelForValue(this.getParsed(i)[s.axis],i));const c=e.barThickness;return{min:c||wZ(n),pixels:r,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:e.grouped,ratio:c?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:s,index:r},options:{base:i,minBarLength:o}}=this,c=i||0,u=this.getParsed(e),f=u._custom,m=X0(f);let h=u[n.axis],g=0,x=s?this.applyStack(n,u,s):h,b,A;x!==h&&(g=x-h,x=h),m&&(h=f.barStart,x=f.barEnd-f.barStart,h!==0&&Va(h)!==Va(f.barEnd)&&(g=0),g+=h);const _=!zt(i)&&!m?i:g;let j=n.getPixelForValue(_);if(this.chart.getDataVisibility(e)?b=n.getPixelForValue(g+x):b=j,A=b-j,Math.abs(A)<o){A=NZ(A,n,c)*o,h===c&&(j-=A/2);const C=n.getPixelForDecimal(0),k=n.getPixelForDecimal(1),E=Math.min(C,k),N=Math.max(C,k);j=Math.max(Math.min(j,N),E),b=j+A,s&&!m&&(u._stacks[n.axis]._visualValues[r]=n.getValueForPixel(b)-n.getValueForPixel(j))}if(j===n.getPixelForValue(c)){const C=Va(A)*n.getLineWidthForValue(c)/2;j+=C,A-=C}return{size:A,base:j,head:b,center:b+A/2}}_calculateBarIndexPixels(e,n){const s=n.scale,r=this.options,i=r.skipNull,o=Dt(r.maxBarThickness,1/0);let c,u;const f=this._getAxisCount();if(n.grouped){const m=i?this._getStackCount(e):n.stackCount,h=r.barThickness==="flex"?SZ(e,n,r,m*f):jZ(e,n,r,m*f),g=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,x=this._getAxis().indexOf(Dt(g,this.getFirstScaleIdForIndexAxis())),b=this._getStackIndex(this.index,this._cachedMeta.stack,i?e:void 0)+x;c=h.start+h.chunk*b+h.chunk/2,u=Math.min(o,h.chunk*h.ratio)}else c=s.getPixelForValue(this.getParsed(e)[s.axis],e),u=Math.min(o,n.min*n.ratio);return{base:c-u/2,head:c+u/2,center:c,size:u}}draw(){const e=this._cachedMeta,n=e.vScale,s=e.data,r=s.length;let i=0;for(;i<r;++i)this.getParsed(i)[n.axis]!==null&&!s[i].hidden&&s[i].draw(this._ctx)}}function RZ(t,e,n){let s=1,r=1,i=0,o=0;if(e<wn){const c=t,u=c+e,f=Math.cos(c),m=Math.sin(c),h=Math.cos(u),g=Math.sin(u),x=(k,E,N)=>vh(k,c,u,!0)?1:Math.max(E,E*n,N,N*n),b=(k,E,N)=>vh(k,c,u,!0)?-1:Math.min(E,E*n,N,N*n),A=x(0,f,h),_=x(Tn,m,g),j=b(Lt,f,h),C=b(Lt+Tn,m,g);s=(A-j)/2,r=(_-C)/2,i=-(A+j)/2,o=-(_+C)/2}return{ratioX:s,ratioY:r,offsetX:i,offsetY:o}}class OZ extends yx{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:s,color:r}}=e.legend.options;return n.labels.map((i,o)=>{const u=e.getDatasetMeta(0).controller.getStyle(o);return{text:i,fillStyle:u.backgroundColor,strokeStyle:u.borderColor,fontColor:r,lineWidth:u.borderWidth,pointStyle:s,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}}};constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const s=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=s;else{let i=u=>+s[u];if(Mt(s[e])){const{key:u="value"}=this._parsing;i=f=>+ql(s[f],u)}let o,c;for(o=e,c=e+n;o<c;++o)r._parsed[o]=i(o)}}_getRotation(){return ds(this.options.rotation-90)}_getCircumference(){return ds(this.options.circumference)}_getRotationExtents(){let e=wn,n=-wn;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const r=this.chart.getDatasetMeta(s).controller,i=r._getRotation(),o=r._getCircumference();e=Math.min(e,i),n=Math.max(n,i+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:s}=n,r=this._cachedMeta,i=r.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,c=Math.max((Math.min(s.width,s.height)-o)/2,0),u=Math.min($Q(this.options.cutout,c),1),f=this._getRingWeight(this.index),{circumference:m,rotation:h}=this._getRotationExtents(),{ratioX:g,ratioY:x,offsetX:b,offsetY:A}=RZ(h,m,u),_=(s.width-o)/g,j=(s.height-o)/x,C=Math.max(Math.min(_,j)/2,0),k=LF(this.options.radius,C),E=Math.max(k*u,0),N=(k-E)/this._getVisibleDatasetWeightTotal();this.offsetX=b*k,this.offsetY=A*k,r.total=this.calculateTotal(),this.outerRadius=k-N*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-N*f,0),this.updateElements(i,0,i.length,e)}_circumference(e,n){const s=this.options,r=this._cachedMeta,i=this._getCircumference();return n&&s.animation.animateRotate||!this.chart.getDataVisibility(e)||r._parsed[e]===null||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*i/wn)}updateElements(e,n,s,r){const i=r==="reset",o=this.chart,c=o.chartArea,f=o.options.animation,m=(c.left+c.right)/2,h=(c.top+c.bottom)/2,g=i&&f.animateScale,x=g?0:this.innerRadius,b=g?0:this.outerRadius,{sharedOptions:A,includeOptions:_}=this._getSharedOptions(n,r);let j=this._getRotation(),C;for(C=0;C<n;++C)j+=this._circumference(C,i);for(C=n;C<n+s;++C){const k=this._circumference(C,i),E=e[C],N={x:m+this.offsetX,y:h+this.offsetY,startAngle:j,endAngle:j+k,circumference:k,outerRadius:b,innerRadius:x};_&&(N.options=A||this.resolveDataElementOptions(C,E.active?"active":r)),j+=k,this.updateElement(E,C,N,r)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let s=0,r;for(r=0;r<n.length;r++){const i=e._parsed[r];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(r)&&!n[r].hidden&&(s+=Math.abs(i))}return s}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?wn*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,s=this.chart,r=s.data.labels||[],i=Zj(n._parsed[e],s.options.locale);return{label:r[e]||"",value:i}}getMaxBorderWidth(e){let n=0;const s=this.chart;let r,i,o,c,u;if(!e){for(r=0,i=s.data.datasets.length;r<i;++r)if(s.isDatasetVisible(r)){o=s.getDatasetMeta(r),e=o.data,c=o.controller;break}}if(!e)return 0;for(r=0,i=e.length;r<i;++r)u=c.resolveDataElementOptions(r),u.borderAlign!=="inner"&&(n=Math.max(n,u.borderWidth||0,u.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let s=0,r=e.length;s<r;++s){const i=this.resolveDataElementOptions(s);n=Math.max(n,i.offset||0,i.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let s=0;s<e;++s)this.chart.isDatasetVisible(s)&&(n+=this._getRingWeight(s));return n}_getRingWeight(e){return Math.max(Dt(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class PZ extends yx{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:s,data:r=[],_dataset:i}=n,o=this.chart._animationsDisabled;let{start:c,count:u}=iX(n,r,o);this._drawStart=c,this._drawCount=u,oX(n)&&(c=0,u=r.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!i._decimated,s.points=r;const f=this.resolveDatasetElementOptions(e);this.options.showLine||(f.borderWidth=0),f.segment=this.options.segment,this.updateElement(s,void 0,{animated:!o,options:f},e),this.updateElements(r,c,u,e)}updateElements(e,n,s,r){const i=r==="reset",{iScale:o,vScale:c,_stacked:u,_dataset:f}=this._cachedMeta,{sharedOptions:m,includeOptions:h}=this._getSharedOptions(n,r),g=o.axis,x=c.axis,{spanGaps:b,segment:A}=this.options,_=Gl(b)?b:Number.POSITIVE_INFINITY,j=this.chart._animationsDisabled||i||r==="none",C=n+s,k=e.length;let E=n>0&&this.getParsed(n-1);for(let N=0;N<k;++N){const L=e[N],M=j?L:{};if(N<n||N>=C){M.skip=!0;continue}const T=this.getParsed(N),O=zt(T[x]),I=M[g]=o.getPixelForValue(T[g],N),$=M[x]=i||O?c.getBasePixel():c.getPixelForValue(u?this.applyStack(c,T,u):T[x],N);M.skip=isNaN(I)||isNaN($)||O,M.stop=N>0&&Math.abs(T[g]-E[g])>_,A&&(M.parsed=T,M.raw=f.data[N]),h&&(M.options=m||this.resolveDataElementOptions(N,L.active?"active":r)),j||this.updateElement(L,N,M,r),E=T}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,s=n.options&&n.options.borderWidth||0,r=e.data||[];if(!r.length)return s;const i=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(s,i,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}function gl(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class iS{static override(e){Object.assign(iS.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return gl()}parse(){return gl()}format(){return gl()}add(){return gl()}diff(){return gl()}startOf(){return gl()}endOf(){return gl()}}var i4={_date:iS};function LZ(t,e,n,s){const{controller:r,data:i,_sorted:o}=t,c=r._cachedMeta.iScale,u=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(c&&e===c.axis&&e!=="r"&&o&&i.length){const f=c._reversePixels?tX:vi;if(s){if(r._sharedOptions){const m=i[0],h=typeof m.getRange=="function"&&m.getRange(e);if(h){const g=f(i,e,n-h),x=f(i,e,n+h);return{lo:g.lo,hi:x.hi}}}}else{const m=f(i,e,n);if(u){const{vScale:h}=r._cachedMeta,{_parsed:g}=t,x=g.slice(0,m.lo+1).reverse().findIndex(A=>!zt(A[h.axis]));m.lo-=Math.max(0,x);const b=g.slice(m.hi).findIndex(A=>!zt(A[h.axis]));m.hi+=Math.max(0,b)}return m}}return{lo:0,hi:i.length-1}}function xx(t,e,n,s,r){const i=t.getSortedVisibleDatasetMetas(),o=n[e];for(let c=0,u=i.length;c<u;++c){const{index:f,data:m}=i[c],{lo:h,hi:g}=LZ(i[c],e,o,r);for(let x=h;x<=g;++x){const b=m[x];b.skip||s(b,f,x)}}}function FZ(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(s,r){const i=e?Math.abs(s.x-r.x):0,o=n?Math.abs(s.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function Z0(t,e,n,s,r){const i=[];return!r&&!t.isPointInArea(e)||xx(t,n,e,function(c,u,f){!r&&!_h(c,t.chartArea,0)||c.inRange(e.x,e.y,s)&&i.push({element:c,datasetIndex:u,index:f})},!0),i}function BZ(t,e,n,s){let r=[];function i(o,c,u){const{startAngle:f,endAngle:m}=o.getProps(["startAngle","endAngle"],s),{angle:h}=fy(o,{x:e.x,y:e.y});vh(h,f,m)&&r.push({element:o,datasetIndex:c,index:u})}return xx(t,n,e,i),r}function IZ(t,e,n,s,r,i){let o=[];const c=FZ(n);let u=Number.POSITIVE_INFINITY;function f(m,h,g){const x=m.inRange(e.x,e.y,r);if(s&&!x)return;const b=m.getCenterPoint(r);if(!(!!i||t.isPointInArea(b))&&!x)return;const _=c(e,b);_<u?(o=[{element:m,datasetIndex:h,index:g}],u=_):_===u&&o.push({element:m,datasetIndex:h,index:g})}return xx(t,n,e,f),o}function J0(t,e,n,s,r,i){return!i&&!t.isPointInArea(e)?[]:n==="r"&&!s?BZ(t,e,n,r):IZ(t,e,n,s,r,i)}function GT(t,e,n,s,r){const i=[],o=n==="x"?"inXRange":"inYRange";let c=!1;return xx(t,n,e,(u,f,m)=>{u[o]&&u[o](e[n],r)&&(i.push({element:u,datasetIndex:f,index:m}),c=c||u.inRange(e.x,e.y,r))}),s&&!c?[]:i}var VZ={modes:{index(t,e,n,s){const r=vl(e,t),i=n.axis||"x",o=n.includeInvisible||!1,c=n.intersect?Z0(t,r,i,s,o):J0(t,r,i,!1,s,o),u=[];return c.length?(t.getSortedVisibleDatasetMetas().forEach(f=>{const m=c[0].index,h=f.data[m];h&&!h.skip&&u.push({element:h,datasetIndex:f.index,index:m})}),u):[]},dataset(t,e,n,s){const r=vl(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;let c=n.intersect?Z0(t,r,i,s,o):J0(t,r,i,!1,s,o);if(c.length>0){const u=c[0].datasetIndex,f=t.getDatasetMeta(u).data;c=[];for(let m=0;m<f.length;++m)c.push({element:f[m],datasetIndex:u,index:m})}return c},point(t,e,n,s){const r=vl(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return Z0(t,r,i,s,o)},nearest(t,e,n,s){const r=vl(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return J0(t,r,i,n.intersect,s,o)},x(t,e,n,s){const r=vl(e,t);return GT(t,r,"x",n.intersect,s)},y(t,e,n,s){const r=vl(e,t);return GT(t,r,"y",n.intersect,s)}}};const o4=["left","top","right","bottom"];function hf(t,e){return t.filter(n=>n.pos===e)}function KT(t,e){return t.filter(n=>o4.indexOf(n.pos)===-1&&n.box.axis===e)}function mf(t,e){return t.sort((n,s)=>{const r=e?s:n,i=e?n:s;return r.weight===i.weight?r.index-i.index:r.weight-i.weight})}function zZ(t){const e=[];let n,s,r,i,o,c;for(n=0,s=(t||[]).length;n<s;++n)r=t[n],{position:i,options:{stack:o,stackWeight:c=1}}=r,e.push({index:n,box:r,pos:i,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&i+o,stackWeight:c});return e}function $Z(t){const e={};for(const n of t){const{stack:s,pos:r,stackWeight:i}=n;if(!s||!o4.includes(r))continue;const o=e[s]||(e[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function HZ(t,e){const n=$Z(t),{vBoxMaxWidth:s,hBoxMaxHeight:r}=e;let i,o,c;for(i=0,o=t.length;i<o;++i){c=t[i];const{fullSize:u}=c.box,f=n[c.stack],m=f&&c.stackWeight/f.weight;c.horizontal?(c.width=m?m*s:u&&e.availableWidth,c.height=r):(c.width=s,c.height=m?m*r:u&&e.availableHeight)}return n}function UZ(t){const e=zZ(t),n=mf(e.filter(f=>f.box.fullSize),!0),s=mf(hf(e,"left"),!0),r=mf(hf(e,"right")),i=mf(hf(e,"top"),!0),o=mf(hf(e,"bottom")),c=KT(e,"x"),u=KT(e,"y");return{fullSize:n,leftAndTop:s.concat(i),rightAndBottom:r.concat(u).concat(o).concat(c),chartArea:hf(e,"chartArea"),vertical:s.concat(r).concat(u),horizontal:i.concat(o).concat(c)}}function QT(t,e,n,s){return Math.max(t[n],e[n])+Math.max(t[s],e[s])}function l4(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function WZ(t,e,n,s){const{pos:r,box:i}=n,o=t.maxPadding;if(!Mt(r)){n.size&&(t[r]-=n.size);const h=s[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?i.height:i.width),n.size=h.size/h.count,t[r]+=n.size}i.getPadding&&l4(o,i.getPadding());const c=Math.max(0,e.outerWidth-QT(o,t,"left","right")),u=Math.max(0,e.outerHeight-QT(o,t,"top","bottom")),f=c!==t.w,m=u!==t.h;return t.w=c,t.h=u,n.horizontal?{same:f,other:m}:{same:m,other:f}}function YZ(t){const e=t.maxPadding;function n(s){const r=Math.max(e[s]-t[s],0);return t[s]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function qZ(t,e){const n=e.maxPadding;function s(r){const i={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{i[o]=Math.max(e[o],n[o])}),i}return s(t?["left","right"]:["top","bottom"])}function Ff(t,e,n,s){const r=[];let i,o,c,u,f,m;for(i=0,o=t.length,f=0;i<o;++i){c=t[i],u=c.box,u.update(c.width||e.w,c.height||e.h,qZ(c.horizontal,e));const{same:h,other:g}=WZ(e,n,c,s);f|=h&&r.length,m=m||g,u.fullSize||r.push(c)}return f&&Ff(r,e,n,s)||m}function Yp(t,e,n,s,r){t.top=n,t.left=e,t.right=e+s,t.bottom=n+r,t.width=s,t.height=r}function XT(t,e,n,s){const r=n.padding;let{x:i,y:o}=e;for(const c of t){const u=c.box,f=s[c.stack]||{placed:0,weight:1},m=c.stackWeight/f.weight||1;if(c.horizontal){const h=e.w*m,g=f.size||u.height;ar(f.start)&&(o=f.start),u.fullSize?Yp(u,r.left,o,n.outerWidth-r.right-r.left,g):Yp(u,e.left+f.placed,o,h,g),f.start=o,f.placed+=h,o=u.bottom}else{const h=e.h*m,g=f.size||u.width;ar(f.start)&&(i=f.start),u.fullSize?Yp(u,i,r.top,g,n.outerHeight-r.bottom-r.top):Yp(u,i,e.top+f.placed,g,h),f.start=i,f.placed+=h,i=u.right}}e.x=i,e.y=o}var Vr={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,s){if(!t)return;const r=As(t.options.layout.padding),i=Math.max(e-r.width,0),o=Math.max(n-r.height,0),c=UZ(t.boxes),u=c.vertical,f=c.horizontal;an(t.boxes,A=>{typeof A.beforeLayout=="function"&&A.beforeLayout()});const m=u.reduce((A,_)=>_.box.options&&_.box.options.display===!1?A:A+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/m,hBoxMaxHeight:o/2}),g=Object.assign({},r);l4(g,As(s));const x=Object.assign({maxPadding:g,w:i,h:o,x:r.left,y:r.top},r),b=HZ(u.concat(f),h);Ff(c.fullSize,x,h,b),Ff(u,x,h,b),Ff(f,x,h,b)&&Ff(u,x,h,b),YZ(x),XT(c.leftAndTop,x,h,b),x.x+=x.w,x.y+=x.h,XT(c.rightAndBottom,x,h,b),t.chartArea={left:x.left,top:x.top,right:x.left+x.w,bottom:x.top+x.h,height:x.h,width:x.w},an(c.chartArea,A=>{const _=A.box;Object.assign(_,t.chartArea),_.update(x.w,x.h,{left:0,top:0,right:0,bottom:0})})}};class c4{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,s){}removeEventListener(e,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,s,r){return n=Math.max(0,n||e.width),s=s||e.height,{width:n,height:Math.max(0,r?Math.floor(n/r):s)}}isAttached(e){return!0}updateConfig(e){}}class GZ extends c4{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Tg="$chartjs",KZ={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},ZT=t=>t===null||t==="";function QZ(t,e){const n=t.style,s=t.getAttribute("height"),r=t.getAttribute("width");if(t[Tg]={initial:{height:s,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",ZT(r)){const i=PT(t,"width");i!==void 0&&(t.width=i)}if(ZT(s))if(t.style.height==="")t.height=t.width/(e||2);else{const i=PT(t,"height");i!==void 0&&(t.height=i)}return t}const u4=QX?{passive:!0}:!1;function XZ(t,e,n){t&&t.addEventListener(e,n,u4)}function ZZ(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,u4)}function JZ(t,e){const n=KZ[t.type]||t.type,{x:s,y:r}=vl(t,e);return{type:n,chart:e,native:t,x:s!==void 0?s:null,y:r!==void 0?r:null}}function my(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function eJ(t,e,n){const s=t.canvas,r=new MutationObserver(i=>{let o=!1;for(const c of i)o=o||my(c.addedNodes,s),o=o&&!my(c.removedNodes,s);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function tJ(t,e,n){const s=t.canvas,r=new MutationObserver(i=>{let o=!1;for(const c of i)o=o||my(c.removedNodes,s),o=o&&!my(c.addedNodes,s);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const jh=new Map;let JT=0;function d4(){const t=window.devicePixelRatio;t!==JT&&(JT=t,jh.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function nJ(t,e){jh.size||window.addEventListener("resize",d4),jh.set(t,e)}function sJ(t){jh.delete(t),jh.size||window.removeEventListener("resize",d4)}function rJ(t,e,n){const s=t.canvas,r=s&&rS(s);if(!r)return;const i=HF((c,u)=>{const f=r.clientWidth;n(c,u),f<r.clientWidth&&n()},window),o=new ResizeObserver(c=>{const u=c[0],f=u.contentRect.width,m=u.contentRect.height;f===0&&m===0||i(f,m)});return o.observe(r),nJ(t,i),o}function e_(t,e,n){n&&n.disconnect(),e==="resize"&&sJ(t)}function aJ(t,e,n){const s=t.canvas,r=HF(i=>{t.ctx!==null&&n(JZ(i,t))},t);return XZ(s,e,r),r}class iJ extends c4{acquireContext(e,n){const s=e&&e.getContext&&e.getContext("2d");return s&&s.canvas===e?(QZ(e,n),s):null}releaseContext(e){const n=e.canvas;if(!n[Tg])return!1;const s=n[Tg].initial;["height","width"].forEach(i=>{const o=s[i];zt(o)?n.removeAttribute(i):n.setAttribute(i,o)});const r=s.style||{};return Object.keys(r).forEach(i=>{n.style[i]=r[i]}),n.width=n.width,delete n[Tg],!0}addEventListener(e,n,s){this.removeEventListener(e,n);const r=e.$proxies||(e.$proxies={}),o={attach:eJ,detach:tJ,resize:rJ}[n]||aJ;r[n]=o(e,n,s)}removeEventListener(e,n){const s=e.$proxies||(e.$proxies={}),r=s[n];if(!r)return;({attach:e_,detach:e_,resize:e_}[n]||ZZ)(e,n,r),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,s,r){return KX(e,n,s,r)}isAttached(e){const n=e&&rS(e);return!!(n&&n.isConnected)}}function oJ(t){return!sS()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?GZ:iJ}let Ps=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:n,y:s}=this.getProps(["x","y"],e);return{x:n,y:s}}hasValue(){return Gl(this.x)&&Gl(this.y)}getProps(e,n){const s=this.$animations;if(!n||!s)return this;const r={};return e.forEach(i=>{r[i]=s[i]&&s[i].active()?s[i]._to:this[i]}),r}};function lJ(t,e){const n=t.options.ticks,s=cJ(t),r=Math.min(n.maxTicksLimit||s,s),i=n.major.enabled?dJ(e):[],o=i.length,c=i[0],u=i[o-1],f=[];if(o>r)return fJ(e,f,i,o/r),f;const m=uJ(i,e,r);if(o>0){let h,g;const x=o>1?Math.round((u-c)/(o-1)):null;for(qp(e,f,m,zt(x)?0:c-x,c),h=0,g=o-1;h<g;h++)qp(e,f,m,i[h],i[h+1]);return qp(e,f,m,u,zt(x)?e.length:u+x),f}return qp(e,f,m),f}function cJ(t){const e=t.options.offset,n=t._tickSize(),s=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(s,r))}function uJ(t,e,n){const s=hJ(t),r=e.length/n;if(!s)return Math.max(r,1);const i=KQ(s);for(let o=0,c=i.length-1;o<c;o++){const u=i[o];if(u>r)return u}return Math.max(r,1)}function dJ(t){const e=[];let n,s;for(n=0,s=t.length;n<s;n++)t[n].major&&e.push(n);return e}function fJ(t,e,n,s){let r=0,i=n[0],o;for(s=Math.ceil(s),o=0;o<t.length;o++)o===i&&(e.push(t[o]),r++,i=n[r*s])}function qp(t,e,n,s,r){const i=Dt(s,0),o=Math.min(Dt(r,t.length),t.length);let c=0,u,f,m;for(n=Math.ceil(n),r&&(u=r-s,n=u/Math.floor(u/n)),m=i;m<0;)c++,m=Math.round(i+c*n);for(f=Math.max(i,0);f<o;f++)f===m&&(e.push(t[f]),c++,m=Math.round(i+c*n))}function hJ(t){const e=t.length;let n,s;if(e<2)return!1;for(s=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==s)return!1;return s}const mJ=t=>t==="left"?"right":t==="right"?"left":t,eM=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,tM=(t,e)=>Math.min(e||t,t);function nM(t,e){const n=[],s=t.length/e,r=t.length;let i=0;for(;i<r;i+=s)n.push(t[Math.floor(i)]);return n}function pJ(t,e,n){const s=t.ticks.length,r=Math.min(e,s-1),i=t._startPixel,o=t._endPixel,c=1e-6;let u=t.getPixelForTick(r),f;if(!(n&&(s===1?f=Math.max(u-i,o-u):e===0?f=(t.getPixelForTick(1)-u)/2:f=(u-t.getPixelForTick(r-1))/2,u+=r<e?f:-f,u<i-c||u>o+c)))return u}function gJ(t,e){an(t,n=>{const s=n.gc,r=s.length/2;let i;if(r>e){for(i=0;i<r;++i)delete n.data[s[i]];s.splice(0,r)}})}function pf(t){return t.drawTicks?t.tickLength:0}function sM(t,e){if(!t.display)return 0;const n=es(t.font,e),s=As(t.padding);return(bn(t.text)?t.text.length:1)*n.lineHeight+s.height}function yJ(t,e){return rc(t,{scale:e,type:"scale"})}function xJ(t,e,n){return rc(t,{tick:n,index:e,type:"tick"})}function bJ(t,e,n){let s=Qj(t);return(n&&e!=="right"||!n&&e==="right")&&(s=mJ(s)),s}function vJ(t,e,n,s){const{top:r,left:i,bottom:o,right:c,chart:u}=t,{chartArea:f,scales:m}=u;let h=0,g,x,b;const A=o-r,_=c-i;if(t.isHorizontal()){if(x=ks(s,i,c),Mt(n)){const j=Object.keys(n)[0],C=n[j];b=m[j].getPixelForValue(C)+A-e}else n==="center"?b=(f.bottom+f.top)/2+A-e:b=eM(t,n,e);g=c-i}else{if(Mt(n)){const j=Object.keys(n)[0],C=n[j];x=m[j].getPixelForValue(C)-_+e}else n==="center"?x=(f.left+f.right)/2-_+e:x=eM(t,n,e);b=ks(s,o,r),h=n==="left"?-Tn:Tn}return{titleX:x,titleY:b,maxWidth:g,rotation:h}}class td extends Ps{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:s,_suggestedMax:r}=this;return e=va(e,Number.POSITIVE_INFINITY),n=va(n,Number.NEGATIVE_INFINITY),s=va(s,Number.POSITIVE_INFINITY),r=va(r,Number.NEGATIVE_INFINITY),{min:va(e,s),max:va(n,r),minDefined:hs(e),maxDefined:hs(n)}}getMinMax(e){let{min:n,max:s,minDefined:r,maxDefined:i}=this.getUserBounds(),o;if(r&&i)return{min:n,max:s};const c=this.getMatchingVisibleMetas();for(let u=0,f=c.length;u<f;++u)o=c[u].controller.getMinMax(this,e),r||(n=Math.min(n,o.min)),i||(s=Math.max(s,o.max));return n=i&&n>s?s:n,s=r&&n>s?n:s,{min:va(n,va(s,n)),max:va(s,va(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){rn(this.options.beforeUpdate,[this])}update(e,n,s){const{beginAtZero:r,grace:i,ticks:o}=this.options,c=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=NX(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const u=c<this.ticks.length;this._convertTicksToLabels(u?nM(this.ticks,c):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=lJ(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),u&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,e=!e),this._startPixel=n,this._endPixel=s,this._reversePixels=e,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){rn(this.options.afterUpdate,[this])}beforeSetDimensions(){rn(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){rn(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),rn(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){rn(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let s,r,i;for(s=0,r=e.length;s<r;s++)i=e[s],i.label=rn(n.callback,[i.value,s,e],this)}afterTickToLabelConversion(){rn(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){rn(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,s=tM(this.ticks.length,e.ticks.maxTicksLimit),r=n.minRotation||0,i=n.maxRotation;let o=r,c,u,f;if(!this._isVisible()||!n.display||r>=i||s<=1||!this.isHorizontal()){this.labelRotation=r;return}const m=this._getLabelSizes(),h=m.widest.width,g=m.highest.height,x=fs(this.chart.width-h,0,this.maxWidth);c=e.offset?this.maxWidth/s:x/(s-1),h+6>c&&(c=x/(s-(e.offset?.5:1)),u=this.maxHeight-pf(e.grid)-n.padding-sM(e.title,this.chart.options.font),f=Math.sqrt(h*h+g*g),o=IF(Math.min(Math.asin(fs((m.highest.height+6)/c,-1,1)),Math.asin(fs(u/f,-1,1))-Math.asin(fs(g/f,-1,1)))),o=Math.max(r,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){rn(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){rn(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:s,title:r,grid:i}}=this,o=this._isVisible(),c=this.isHorizontal();if(o){const u=sM(r,n.options.font);if(c?(e.width=this.maxWidth,e.height=pf(i)+u):(e.height=this.maxHeight,e.width=pf(i)+u),s.display&&this.ticks.length){const{first:f,last:m,widest:h,highest:g}=this._getLabelSizes(),x=s.padding*2,b=ds(this.labelRotation),A=Math.cos(b),_=Math.sin(b);if(c){const j=s.mirror?0:_*h.width+A*g.height;e.height=Math.min(this.maxHeight,e.height+j+x)}else{const j=s.mirror?0:A*h.width+_*g.height;e.width=Math.min(this.maxWidth,e.width+j+x)}this._calculatePadding(f,m,_,A)}}this._handleMargins(),c?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,s,r){const{ticks:{align:i,padding:o},position:c}=this.options,u=this.labelRotation!==0,f=c!=="top"&&this.axis==="x";if(this.isHorizontal()){const m=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let g=0,x=0;u?f?(g=r*e.width,x=s*n.height):(g=s*e.height,x=r*n.width):i==="start"?x=n.width:i==="end"?g=e.width:i!=="inner"&&(g=e.width/2,x=n.width/2),this.paddingLeft=Math.max((g-m+o)*this.width/(this.width-m),0),this.paddingRight=Math.max((x-h+o)*this.width/(this.width-h),0)}else{let m=n.height/2,h=e.height/2;i==="start"?(m=0,h=e.height):i==="end"&&(m=n.height,h=0),this.paddingTop=m+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){rn(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,s;for(n=0,s=e.length;n<s;n++)zt(e[n].label)&&(e.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=nM(s,n)),this._labelSizes=e=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,s){const{ctx:r,_longestTextCache:i}=this,o=[],c=[],u=Math.floor(n/tM(n,s));let f=0,m=0,h,g,x,b,A,_,j,C,k,E,N;for(h=0;h<n;h+=u){if(b=e[h].label,A=this._resolveTickFontOptions(h),r.font=_=A.string,j=i[_]=i[_]||{data:{},gc:[]},C=A.lineHeight,k=E=0,!zt(b)&&!bn(b))k=ET(r,j.data,j.gc,k,b),E=C;else if(bn(b))for(g=0,x=b.length;g<x;++g)N=b[g],!zt(N)&&!bn(N)&&(k=ET(r,j.data,j.gc,k,N),E+=C);o.push(k),c.push(E),f=Math.max(k,f),m=Math.max(E,m)}gJ(i,n);const L=o.indexOf(f),M=c.indexOf(m),T=O=>({width:o[O]||0,height:c[O]||0});return{first:T(0),last:T(n-1),widest:T(L),highest:T(M),widths:o,heights:c}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return eX(this._alignToPixels?pl(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const s=n[e];return s.$context||(s.$context=xJ(this.getContext(),e,s))}return this.$context||(this.$context=yJ(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=ds(this.labelRotation),s=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,c=i?i.widest.width+o:0,u=i?i.highest.height+o:0;return this.isHorizontal()?u*s>c*r?c/s:u/r:u*r<c*s?u/s:c/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,s=this.chart,r=this.options,{grid:i,position:o,border:c}=r,u=i.offset,f=this.isHorizontal(),h=this.ticks.length+(u?1:0),g=pf(i),x=[],b=c.setContext(this.getContext()),A=b.display?b.width:0,_=A/2,j=function(R){return pl(s,R,A)};let C,k,E,N,L,M,T,O,I,$,H,V;if(o==="top")C=j(this.bottom),M=this.bottom-g,O=C-_,$=j(e.top)+_,V=e.bottom;else if(o==="bottom")C=j(this.top),$=e.top,V=j(e.bottom)-_,M=C+_,O=this.top+g;else if(o==="left")C=j(this.right),L=this.right-g,T=C-_,I=j(e.left)+_,H=e.right;else if(o==="right")C=j(this.left),I=e.left,H=j(e.right)-_,L=C+_,T=this.left+g;else if(n==="x"){if(o==="center")C=j((e.top+e.bottom)/2+.5);else if(Mt(o)){const R=Object.keys(o)[0],P=o[R];C=j(this.chart.scales[R].getPixelForValue(P))}$=e.top,V=e.bottom,M=C+_,O=M+g}else if(n==="y"){if(o==="center")C=j((e.left+e.right)/2);else if(Mt(o)){const R=Object.keys(o)[0],P=o[R];C=j(this.chart.scales[R].getPixelForValue(P))}L=C-_,T=L-g,I=e.left,H=e.right}const G=Dt(r.ticks.maxTicksLimit,h),U=Math.max(1,Math.ceil(h/G));for(k=0;k<h;k+=U){const R=this.getContext(k),P=i.setContext(R),Z=c.setContext(R),ne=P.lineWidth,D=P.color,B=Z.dash||[],se=Z.dashOffset,le=P.tickWidth,ae=P.tickColor,te=P.tickBorderDash||[],X=P.tickBorderDashOffset;E=pJ(this,k,u),E!==void 0&&(N=pl(s,E,ne),f?L=T=I=H=N:M=O=$=V=N,x.push({tx1:L,ty1:M,tx2:T,ty2:O,x1:I,y1:$,x2:H,y2:V,width:ne,color:D,borderDash:B,borderDashOffset:se,tickWidth:le,tickColor:ae,tickBorderDash:te,tickBorderDashOffset:X}))}return this._ticksLength=h,this._borderValue=C,x}_computeLabelItems(e){const n=this.axis,s=this.options,{position:r,ticks:i}=s,o=this.isHorizontal(),c=this.ticks,{align:u,crossAlign:f,padding:m,mirror:h}=i,g=pf(s.grid),x=g+m,b=h?-m:x,A=-ds(this.labelRotation),_=[];let j,C,k,E,N,L,M,T,O,I,$,H,V="middle";if(r==="top")L=this.bottom-b,M=this._getXAxisLabelAlignment();else if(r==="bottom")L=this.top+b,M=this._getXAxisLabelAlignment();else if(r==="left"){const U=this._getYAxisLabelAlignment(g);M=U.textAlign,N=U.x}else if(r==="right"){const U=this._getYAxisLabelAlignment(g);M=U.textAlign,N=U.x}else if(n==="x"){if(r==="center")L=(e.top+e.bottom)/2+x;else if(Mt(r)){const U=Object.keys(r)[0],R=r[U];L=this.chart.scales[U].getPixelForValue(R)+x}M=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")N=(e.left+e.right)/2-x;else if(Mt(r)){const U=Object.keys(r)[0],R=r[U];N=this.chart.scales[U].getPixelForValue(R)}M=this._getYAxisLabelAlignment(g).textAlign}n==="y"&&(u==="start"?V="top":u==="end"&&(V="bottom"));const G=this._getLabelSizes();for(j=0,C=c.length;j<C;++j){k=c[j],E=k.label;const U=i.setContext(this.getContext(j));T=this.getPixelForTick(j)+i.labelOffset,O=this._resolveTickFontOptions(j),I=O.lineHeight,$=bn(E)?E.length:1;const R=$/2,P=U.color,Z=U.textStrokeColor,ne=U.textStrokeWidth;let D=M;o?(N=T,M==="inner"&&(j===C-1?D=this.options.reverse?"left":"right":j===0?D=this.options.reverse?"right":"left":D="center"),r==="top"?f==="near"||A!==0?H=-$*I+I/2:f==="center"?H=-G.highest.height/2-R*I+I:H=-G.highest.height+I/2:f==="near"||A!==0?H=I/2:f==="center"?H=G.highest.height/2-R*I:H=G.highest.height-$*I,h&&(H*=-1),A!==0&&!U.showLabelBackdrop&&(N+=I/2*Math.sin(A))):(L=T,H=(1-$)*I/2);let B;if(U.showLabelBackdrop){const se=As(U.backdropPadding),le=G.heights[j],ae=G.widths[j];let te=H-se.top,X=0-se.left;switch(V){case"middle":te-=le/2;break;case"bottom":te-=le;break}switch(M){case"center":X-=ae/2;break;case"right":X-=ae;break;case"inner":j===C-1?X-=ae:j>0&&(X-=ae/2);break}B={left:X,top:te,width:ae+se.width,height:le+se.height,color:U.backdropColor}}_.push({label:E,font:O,textOffset:H,options:{rotation:A,color:P,strokeColor:Z,strokeWidth:ne,textAlign:D,textBaseline:V,translation:[N,L],backdrop:B}})}return _}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-ds(this.labelRotation))return e==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:s,mirror:r,padding:i}}=this.options,o=this._getLabelSizes(),c=e+i,u=o.widest.width;let f,m;return n==="left"?r?(m=this.right+i,s==="near"?f="left":s==="center"?(f="center",m+=u/2):(f="right",m+=u)):(m=this.right-c,s==="near"?f="right":s==="center"?(f="center",m-=u/2):(f="left",m=this.left)):n==="right"?r?(m=this.left+i,s==="near"?f="right":s==="center"?(f="center",m-=u/2):(f="left",m-=u)):(m=this.left+c,s==="near"?f="left":s==="center"?(f="center",m+=u/2):(f="right",m=this.right)):f="right",{textAlign:f,x:m}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:s,top:r,width:i,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(s,r,i,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(i=>i.value===e);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const n=this.options.grid,s=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const c=(u,f,m)=>{!m.width||!m.color||(s.save(),s.lineWidth=m.width,s.strokeStyle=m.color,s.setLineDash(m.borderDash||[]),s.lineDashOffset=m.borderDashOffset,s.beginPath(),s.moveTo(u.x,u.y),s.lineTo(f.x,f.y),s.stroke(),s.restore())};if(n.display)for(i=0,o=r.length;i<o;++i){const u=r[i];n.drawOnChartArea&&c({x:u.x1,y:u.y1},{x:u.x2,y:u.y2},u),n.drawTicks&&c({x:u.tx1,y:u.ty1},{x:u.tx2,y:u.ty2},{color:u.tickColor,width:u.tickWidth,borderDash:u.tickBorderDash,borderDashOffset:u.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:s,grid:r}}=this,i=s.setContext(this.getContext()),o=s.display?i.width:0;if(!o)return;const c=r.setContext(this.getContext(0)).lineWidth,u=this._borderValue;let f,m,h,g;this.isHorizontal()?(f=pl(e,this.left,o)-o/2,m=pl(e,this.right,c)+c/2,h=g=u):(h=pl(e,this.top,o)-o/2,g=pl(e,this.bottom,c)+c/2,f=m=u),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(f,h),n.lineTo(m,g),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const s=this.ctx,r=this._computeLabelArea();r&&tm(s,r);const i=this.getLabelItems(e);for(const o of i){const c=o.options,u=o.font,f=o.label,m=o.textOffset;Ah(s,f,0,m,u,c)}r&&nm(s)}drawTitle(){const{ctx:e,options:{position:n,title:s,reverse:r}}=this;if(!s.display)return;const i=es(s.font),o=As(s.padding),c=s.align;let u=i.lineHeight/2;n==="bottom"||n==="center"||Mt(n)?(u+=o.bottom,bn(s.text)&&(u+=i.lineHeight*(s.text.length-1))):u+=o.top;const{titleX:f,titleY:m,maxWidth:h,rotation:g}=vJ(this,u,n,c);Ah(e,s.text,0,0,i,{color:s.color,maxWidth:h,rotation:g,textAlign:bJ(c,n,r),textBaseline:"middle",translation:[f,m]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,s=Dt(e.grid&&e.grid.z,-1),r=Dt(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==td.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:s,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",r=[];let i,o;for(i=0,o=n.length;i<o;++i){const c=n[i];c[s]===this.id&&(!e||c.type===e)&&r.push(c)}return r}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return es(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Gp{constructor(e,n,s){this.type=e,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let s;wJ(n)&&(s=this.register(n));const r=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in r||(r[i]=e,_J(e,o,s),this.override&&Mn.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,s=e.id,r=this.scope;s in n&&delete n[s],r&&s in Mn[r]&&(delete Mn[r][s],this.override&&delete Kl[s])}}function _J(t,e,n){const s=Ya(Object.create(null),[n?Mn.get(n):{},Mn.get(e),t.defaults]);Mn.set(e,s),t.defaultRoutes&&AJ(e,t.defaultRoutes),t.descriptors&&Mn.describe(e,t.descriptors)}function AJ(t,e){Object.keys(e).forEach(n=>{const s=n.split("."),r=s.pop(),i=[t].concat(s).join("."),o=e[n].split("."),c=o.pop(),u=o.join(".");Mn.route(i,r,u,c)})}function wJ(t){return"id"in t&&"defaults"in t}class jJ{constructor(){this.controllers=new Gp(yx,"datasets",!0),this.elements=new Gp(Ps,"elements"),this.plugins=new Gp(Object,"plugins"),this.scales=new Gp(td,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,s){[...n].forEach(r=>{const i=s||this._getRegistryForType(r);s||i.isForType(r)||i===this.plugins&&r.id?this._exec(e,i,r):an(r,o=>{const c=s||this._getRegistryForType(o);this._exec(e,c,o)})})}_exec(e,n,s){const r=qj(e);rn(s["before"+r],[],s),n[e](s),rn(s["after"+r],[],s)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(e))return s}return this.plugins}_get(e,n,s){const r=n.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+s+".");return r}}var ja=new jJ;class SJ{constructor(){this._init=[]}notify(e,n,s,r){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(i,e,n,s);return n==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,s,r){r=r||{};for(const i of e){const o=i.plugin,c=o[s],u=[n,r,i.options];if(rn(c,u,o)===!1&&r.cancelable)return!1}return!0}invalidate(){zt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const s=e&&e.config,r=Dt(s.options&&s.options.plugins,{}),i=CJ(s);return r===!1&&!n?[]:kJ(e,i,r,n)}_notifyStateChanges(e){const n=this._oldCache||[],s=this._cache,r=(i,o)=>i.filter(c=>!o.some(u=>c.plugin.id===u.plugin.id));this._notify(r(n,s),e,"stop"),this._notify(r(s,n),e,"start")}}function CJ(t){const e={},n=[],s=Object.keys(ja.plugins.items);for(let i=0;i<s.length;i++)n.push(ja.getPlugin(s[i]));const r=t.plugins||[];for(let i=0;i<r.length;i++){const o=r[i];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function NJ(t,e){return!e&&t===!1?null:t===!0?{}:t}function kJ(t,{plugins:e,localIds:n},s,r){const i=[],o=t.getContext();for(const c of e){const u=c.id,f=NJ(s[u],r);f!==null&&i.push({plugin:c,options:DJ(t.config,{plugin:c,local:n[u]},f,o)})}return i}function DJ(t,{plugin:e,local:n},s,r){const i=t.pluginScopeKeys(e),o=t.getOptionScopes(s,i);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function CA(t,e){const n=Mn.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function EJ(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function TJ(t,e){return t===e?"_index_":"_value_"}function rM(t){if(t==="x"||t==="y"||t==="r")return t}function MJ(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function NA(t,...e){if(rM(t))return t;for(const n of e){const s=n.axis||MJ(n.position)||t.length>1&&rM(t[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function aM(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function RJ(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(s=>s.xAxisID===t||s.yAxisID===t);if(n.length)return aM(t,"x",n[0])||aM(t,"y",n[0])}return{}}function OJ(t,e){const n=Kl[t.type]||{scales:{}},s=e.scales||{},r=CA(t.type,e),i=Object.create(null);return Object.keys(s).forEach(o=>{const c=s[o];if(!Mt(c))return console.error(`Invalid scale configuration for scale: ${o}`);if(c._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const u=NA(o,c,RJ(o,t),Mn.scales[c.type]),f=TJ(u,r),m=n.scales||{};i[o]=Zf(Object.create(null),[{axis:u},c,m[u],m[f]])}),t.data.datasets.forEach(o=>{const c=o.type||t.type,u=o.indexAxis||CA(c,e),m=(Kl[c]||{}).scales||{};Object.keys(m).forEach(h=>{const g=EJ(h,u),x=o[g+"AxisID"]||g;i[x]=i[x]||Object.create(null),Zf(i[x],[{axis:g},s[x],m[h]])})}),Object.keys(i).forEach(o=>{const c=i[o];Zf(c,[Mn.scales[c.type],Mn.scale])}),i}function f4(t){const e=t.options||(t.options={});e.plugins=Dt(e.plugins,{}),e.scales=OJ(t,e)}function h4(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function PJ(t){return t=t||{},t.data=h4(t.data),f4(t),t}const iM=new Map,m4=new Set;function Kp(t,e){let n=iM.get(t);return n||(n=e(),iM.set(t,n),m4.add(n)),n}const gf=(t,e,n)=>{const s=ql(e,n);s!==void 0&&t.add(s)};let LJ=class{constructor(e){this._config=PJ(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=h4(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),f4(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Kp(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Kp(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Kp(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,s=this.type;return Kp(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const s=this._scopeCache;let r=s.get(e);return(!r||n)&&(r=new Map,s.set(e,r)),r}getOptionScopes(e,n,s){const{options:r,type:i}=this,o=this._cachedScopes(e,s),c=o.get(n);if(c)return c;const u=new Set;n.forEach(m=>{e&&(u.add(e),m.forEach(h=>gf(u,e,h))),m.forEach(h=>gf(u,r,h)),m.forEach(h=>gf(u,Kl[i]||{},h)),m.forEach(h=>gf(u,Mn,h)),m.forEach(h=>gf(u,jA,h))});const f=Array.from(u);return f.length===0&&f.push(Object.create(null)),m4.has(n)&&o.set(n,f),f}chartOptionScopes(){const{options:e,type:n}=this;return[e,Kl[n]||{},Mn.datasets[n]||{},{type:n},Mn,jA]}resolveNamedOptions(e,n,s,r=[""]){const i={$shared:!0},{resolver:o,subPrefixes:c}=oM(this._resolverCache,e,r);let u=o;if(BJ(o,n)){i.$shared=!1,s=sr(s)?s():s;const f=this.createResolver(e,s,c);u=Su(o,s,f)}for(const f of n)i[f]=u[f];return i}createResolver(e,n,s=[""],r){const{resolver:i}=oM(this._resolverCache,e,s);return Mt(n)?Su(i,n,void 0,r):i}};function oM(t,e,n){let s=t.get(e);s||(s=new Map,t.set(e,s));const r=n.join();let i=s.get(r);return i||(i={resolver:eS(e,n),subPrefixes:n.filter(c=>!c.toLowerCase().includes("hover"))},s.set(r,i)),i}const FJ=t=>Mt(t)&&Object.getOwnPropertyNames(t).some(e=>sr(t[e]));function BJ(t,e){const{isScriptable:n,isIndexable:s}=qF(t);for(const r of e){const i=n(r),o=s(r),c=(o||i)&&t[r];if(i&&(sr(c)||FJ(c))||o&&bn(c))return!0}return!1}var IJ="4.5.0";const VJ=["top","bottom","left","right","chartArea"];function lM(t,e){return t==="top"||t==="bottom"||VJ.indexOf(t)===-1&&e==="x"}function cM(t,e){return function(n,s){return n[t]===s[t]?n[e]-s[e]:n[t]-s[t]}}function uM(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),rn(n&&n.onComplete,[t],e)}function zJ(t){const e=t.chart,n=e.options.animation;rn(n&&n.onProgress,[t],e)}function p4(t){return sS()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Mg={},dM=t=>{const e=p4(t);return Object.values(Mg).filter(n=>n.canvas===e).pop()};function $J(t,e,n){const s=Object.keys(t);for(const r of s){const i=+r;if(i>=e){const o=t[r];delete t[r],(n>0||i>e)&&(t[i+n]=o)}}}function HJ(t,e,n,s){return!n||t.type==="mouseout"?null:s?e:t}let zs=class{static defaults=Mn;static instances=Mg;static overrides=Kl;static registry=ja;static version=IJ;static getChart=dM;static register(...e){ja.add(...e),fM()}static unregister(...e){ja.remove(...e),fM()}constructor(e,n){const s=this.config=new LJ(n),r=p4(e),i=dM(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||oJ(r)),this.platform.updateConfig(s);const c=this.platform.acquireContext(r,o.aspectRatio),u=c&&c.canvas,f=u&&u.height,m=u&&u.width;if(this.id=zQ(),this.ctx=c,this.canvas=u,this.width=m,this.height=f,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new SJ,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=rX(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],Mg[this.id]=this,!c||!u){console.error("Failed to create chart: can't acquire context from the given item");return}hi.listen(this,"complete",uM),hi.listen(this,"progress",zJ),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:s,height:r,_aspectRatio:i}=this;return zt(e)?n&&i?i:r?s/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return ja}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():OT(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return TT(this.canvas,this.ctx),this}stop(){return hi.stop(this),this}resize(e,n){hi.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const s=this.options,r=this.canvas,i=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,n,i),c=s.devicePixelRatio||this.platform.getDevicePixelRatio(),u=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,OT(this,c,!0)&&(this.notifyPlugins("resize",{size:o}),rn(s.onResize,[this,o],this),this.attached&&this._doResize(u)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};an(n,(s,r)=>{s.id=r})}buildOrUpdateScales(){const e=this.options,n=e.scales,s=this.scales,r=Object.keys(s).reduce((o,c)=>(o[c]=!1,o),{});let i=[];n&&(i=i.concat(Object.keys(n).map(o=>{const c=n[o],u=NA(o,c),f=u==="r",m=u==="x";return{options:c,dposition:f?"chartArea":m?"bottom":"left",dtype:f?"radialLinear":m?"category":"linear"}}))),an(i,o=>{const c=o.options,u=c.id,f=NA(u,c),m=Dt(c.type,o.dtype);(c.position===void 0||lM(c.position,f)!==lM(o.dposition))&&(c.position=o.dposition),r[u]=!0;let h=null;if(u in s&&s[u].type===m)h=s[u];else{const g=ja.getScale(m);h=new g({id:u,type:m,ctx:this.ctx,chart:this}),s[h.id]=h}h.init(c,e)}),an(r,(o,c)=>{o||delete s[c]}),an(s,o=>{Vr.configure(this,o,o.options),Vr.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,s=e.length;if(e.sort((r,i)=>r.index-i.index),s>n){for(let r=n;r<s;++r)this._destroyDatasetMeta(r);e.splice(n,s-n)}this._sortedMetasets=e.slice(0).sort(cM("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((s,r)=>{n.filter(i=>i===s._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let s,r;for(this._removeUnreferencedMetasets(),s=0,r=n.length;s<r;s++){const i=n[s];let o=this.getDatasetMeta(s);const c=i.type||this.config.type;if(o.type&&o.type!==c&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=c,o.indexAxis=i.indexAxis||CA(c,this.options),o.order=i.order||0,o.index=s,o.label=""+i.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const u=ja.getController(c),{datasetElementType:f,dataElementType:m}=Mn.datasets[c];Object.assign(u,{dataElementType:ja.getElement(m),datasetElementType:f&&ja.getElement(f)}),o.controller=new u(this,s),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){an(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let f=0,m=this.data.datasets.length;f<m;f++){const{controller:h}=this.getDatasetMeta(f),g=!r&&i.indexOf(h)===-1;h.buildOrUpdateElements(g),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),r||an(i,f=>{f.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(cM("z","_idx"));const{_active:c,_lastEvent:u}=this;u?this._eventHandler(u,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){an(this.scales,e=>{Vr.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(e.events);(!AT(n,s)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:r,count:i}of n){const o=s==="_removeElements"?-i:i;$J(e,r,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=i=>new Set(e.filter(o=>o[0]===i).map((o,c)=>c+","+o.splice(1).join(","))),r=s(0);for(let i=1;i<n;i++)if(!AT(r,s(i)))return;return Array.from(r).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Vr.update(this,this.width,this.height,e);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],an(this.boxes,r=>{s&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,i)=>{r._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,sr(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const s=this.getDatasetMeta(e),r={meta:s,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(s.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(hi.has(this)?this.attached&&!hi.running(this)&&hi.start(this):(this.draw(),uM({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:s,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,s=[];let r,i;for(r=0,i=n.length;r<i;++r){const o=n[r];(!e||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,s={meta:e,index:e.index,cancelable:!0},r=s4(this,e);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(r&&tm(n,r),e.controller.draw(),r&&nm(n),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return _h(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,s,r){const i=VZ.modes[n];return typeof i=="function"?i(this,e,s,r):[]}getDatasetMeta(e){const n=this.data.datasets[e],s=this._metasets;let r=s.filter(i=>i&&i._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},s.push(r)),r}getContext(){return this.$context||(this.$context=rc(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const s=this.getDatasetMeta(e);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(e,n){const s=this.getDatasetMeta(e);s.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,s){const r=s?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,r);ar(n)?(i.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(e,s),o.update(i,{visible:s}),this.update(c=>c.datasetIndex===e?r:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),hi.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),TT(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Mg[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,s=(i,o)=>{n.addEventListener(this,i,o),e[i]=o},r=(i,o,c)=>{i.offsetX=o,i.offsetY=c,this._eventHandler(i)};an(this.options.events,i=>s(i,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,s=(u,f)=>{n.addEventListener(this,u,f),e[u]=f},r=(u,f)=>{e[u]&&(n.removeEventListener(this,u,f),delete e[u])},i=(u,f)=>{this.canvas&&this.resize(u,f)};let o;const c=()=>{r("attach",c),this.attached=!0,this.resize(),s("resize",i),s("detach",o)};o=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),s("attach",c)},n.isAttached(this.canvas)?c():o()}unbindEvents(){an(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},an(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,s){const r=s?"set":"remove";let i,o,c,u;for(n==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),c=0,u=e.length;c<u;++c){o=e[c];const f=o&&this.getDatasetMeta(o.datasetIndex).controller;f&&f[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],s=e.map(({datasetIndex:i,index:o})=>{const c=this.getDatasetMeta(i);if(!c)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:c.data[o],index:o}});!ly(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(e,n,s){return this._plugins.notify(this,e,n,s)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,s){const r=this.options.hover,i=(u,f)=>u.filter(m=>!f.some(h=>m.datasetIndex===h.datasetIndex&&m.index===h.index)),o=i(n,e),c=s?e:i(e,n);o.length&&this.updateHoverStyle(o,r.mode,!1),c.length&&r.mode&&this.updateHoverStyle(c,r.mode,!0)}_eventHandler(e,n){const s={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",s,r)===!1)return;const i=this._handleEvent(e,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,r),(i||s.changed)&&this.render(),this}_handleEvent(e,n,s){const{_active:r=[],options:i}=this,o=n,c=this._getActiveElements(e,r,s,o),u=qQ(e),f=HJ(e,this._lastEvent,s,u);s&&(this._lastEvent=null,rn(i.onHover,[e,c,this],this),u&&rn(i.onClick,[e,c,this],this));const m=!ly(c,r);return(m||n)&&(this._active=c,this._updateHoverStyles(c,r,n)),this._lastEvent=f,m}_getActiveElements(e,n,s,r){if(e.type==="mouseout")return[];if(!s)return n;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,r)}};function fM(){return an(zs.instances,t=>t._plugins.invalidate())}function UJ(t,e,n){const{startAngle:s,x:r,y:i,outerRadius:o,innerRadius:c,options:u}=e,{borderWidth:f,borderJoinStyle:m}=u,h=Math.min(f/o,mr(s-n));if(t.beginPath(),t.arc(r,i,o-f/2,s+h/2,n-h/2),c>0){const g=Math.min(f/c,mr(s-n));t.arc(r,i,c+f/2,n-g/2,s+g/2,!0)}else{const g=Math.min(f/2,o*mr(s-n));if(m==="round")t.arc(r,i,g,n-Lt/2,s+Lt/2,!0);else if(m==="bevel"){const x=2*g*g,b=-x*Math.cos(n+Lt/2)+r,A=-x*Math.sin(n+Lt/2)+i,_=x*Math.cos(s+Lt/2)+r,j=x*Math.sin(s+Lt/2)+i;t.lineTo(b,A),t.lineTo(_,j)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function WJ(t,e,n){const{startAngle:s,pixelMargin:r,x:i,y:o,outerRadius:c,innerRadius:u}=e;let f=r/c;t.beginPath(),t.arc(i,o,c,s-f,n+f),u>r?(f=r/u,t.arc(i,o,u,n+f,s-f,!0)):t.arc(i,o,r,n+Tn,s-Tn),t.closePath(),t.clip()}function YJ(t){return Jj(t,["outerStart","outerEnd","innerStart","innerEnd"])}function qJ(t,e,n,s){const r=YJ(t.options.borderRadius),i=(n-e)/2,o=Math.min(i,s*e/2),c=u=>{const f=(n-Math.min(i,u))*s/2;return fs(u,0,Math.min(i,f))};return{outerStart:c(r.outerStart),outerEnd:c(r.outerEnd),innerStart:fs(r.innerStart,0,o),innerEnd:fs(r.innerEnd,0,o)}}function Qc(t,e,n,s){return{x:n+t*Math.cos(e),y:s+t*Math.sin(e)}}function py(t,e,n,s,r,i){const{x:o,y:c,startAngle:u,pixelMargin:f,innerRadius:m}=e,h=Math.max(e.outerRadius+s+n-f,0),g=m>0?m+s+n+f:0;let x=0;const b=r-u;if(s){const U=m>0?m-s:0,R=h>0?h-s:0,P=(U+R)/2,Z=P!==0?b*P/(P+s):b;x=(b-Z)/2}const A=Math.max(.001,b*h-n/Lt)/h,_=(b-A)/2,j=u+_+x,C=r-_-x,{outerStart:k,outerEnd:E,innerStart:N,innerEnd:L}=qJ(e,g,h,C-j),M=h-k,T=h-E,O=j+k/M,I=C-E/T,$=g+N,H=g+L,V=j+N/$,G=C-L/H;if(t.beginPath(),i){const U=(O+I)/2;if(t.arc(o,c,h,O,U),t.arc(o,c,h,U,I),E>0){const ne=Qc(T,I,o,c);t.arc(ne.x,ne.y,E,I,C+Tn)}const R=Qc(H,C,o,c);if(t.lineTo(R.x,R.y),L>0){const ne=Qc(H,G,o,c);t.arc(ne.x,ne.y,L,C+Tn,G+Math.PI)}const P=(C-L/g+(j+N/g))/2;if(t.arc(o,c,g,C-L/g,P,!0),t.arc(o,c,g,P,j+N/g,!0),N>0){const ne=Qc($,V,o,c);t.arc(ne.x,ne.y,N,V+Math.PI,j-Tn)}const Z=Qc(M,j,o,c);if(t.lineTo(Z.x,Z.y),k>0){const ne=Qc(M,O,o,c);t.arc(ne.x,ne.y,k,j-Tn,O)}}else{t.moveTo(o,c);const U=Math.cos(O)*h+o,R=Math.sin(O)*h+c;t.lineTo(U,R);const P=Math.cos(I)*h+o,Z=Math.sin(I)*h+c;t.lineTo(P,Z)}t.closePath()}function GJ(t,e,n,s,r){const{fullCircles:i,startAngle:o,circumference:c}=e;let u=e.endAngle;if(i){py(t,e,n,s,u,r);for(let f=0;f<i;++f)t.fill();isNaN(c)||(u=o+(c%wn||wn))}return py(t,e,n,s,u,r),t.fill(),u}function KJ(t,e,n,s,r){const{fullCircles:i,startAngle:o,circumference:c,options:u}=e,{borderWidth:f,borderJoinStyle:m,borderDash:h,borderDashOffset:g,borderRadius:x}=u,b=u.borderAlign==="inner";if(!f)return;t.setLineDash(h||[]),t.lineDashOffset=g,b?(t.lineWidth=f*2,t.lineJoin=m||"round"):(t.lineWidth=f,t.lineJoin=m||"bevel");let A=e.endAngle;if(i){py(t,e,n,s,A,r);for(let _=0;_<i;++_)t.stroke();isNaN(c)||(A=o+(c%wn||wn))}b&&WJ(t,e,A),u.selfJoin&&A-o>=Lt&&x===0&&m!=="miter"&&UJ(t,e,A),i||(py(t,e,n,s,A,r),t.stroke())}class QJ extends Ps{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,n,s){const r=this.getProps(["x","y"],s),{angle:i,distance:o}=fy(r,{x:e,y:n}),{startAngle:c,endAngle:u,innerRadius:f,outerRadius:m,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),g=(this.options.spacing+this.options.borderWidth)/2,x=Dt(h,u-c),b=vh(i,c,u)&&c!==u,A=x>=wn||b,_=bi(o,f+g,m+g);return A&&_}getCenterPoint(e){const{x:n,y:s,startAngle:r,endAngle:i,innerRadius:o,outerRadius:c}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:u,spacing:f}=this.options,m=(r+i)/2,h=(o+c+f+u)/2;return{x:n+Math.cos(m)*h,y:s+Math.sin(m)*h}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:n,circumference:s}=this,r=(n.offset||0)/4,i=(n.spacing||0)/2,o=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=s>wn?Math.floor(s/wn):0,s===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const c=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(c)*r,Math.sin(c)*r);const u=1-Math.sin(Math.min(Lt,s||0)),f=r*u;e.fillStyle=n.backgroundColor,e.strokeStyle=n.borderColor,GJ(e,this,f,i,o),KJ(e,this,f,i,o),e.restore()}}function g4(t,e,n=e){t.lineCap=Dt(n.borderCapStyle,e.borderCapStyle),t.setLineDash(Dt(n.borderDash,e.borderDash)),t.lineDashOffset=Dt(n.borderDashOffset,e.borderDashOffset),t.lineJoin=Dt(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Dt(n.borderWidth,e.borderWidth),t.strokeStyle=Dt(n.borderColor,e.borderColor)}function XJ(t,e,n){t.lineTo(n.x,n.y)}function ZJ(t){return t.stepped?xX:t.tension||t.cubicInterpolationMode==="monotone"?bX:XJ}function y4(t,e,n={}){const s=t.length,{start:r=0,end:i=s-1}=n,{start:o,end:c}=e,u=Math.max(r,o),f=Math.min(i,c),m=r<o&&i<o||r>c&&i>c;return{count:s,start:u,loop:e.loop,ilen:f<u&&!m?s+f-u:f-u}}function JJ(t,e,n,s){const{points:r,options:i}=e,{count:o,start:c,loop:u,ilen:f}=y4(r,n,s),m=ZJ(i);let{move:h=!0,reverse:g}=s||{},x,b,A;for(x=0;x<=f;++x)b=r[(c+(g?f-x:x))%o],!b.skip&&(h?(t.moveTo(b.x,b.y),h=!1):m(t,A,b,g,i.stepped),A=b);return u&&(b=r[(c+(g?f:0))%o],m(t,A,b,g,i.stepped)),!!u}function eee(t,e,n,s){const r=e.points,{count:i,start:o,ilen:c}=y4(r,n,s),{move:u=!0,reverse:f}=s||{};let m=0,h=0,g,x,b,A,_,j;const C=E=>(o+(f?c-E:E))%i,k=()=>{A!==_&&(t.lineTo(m,_),t.lineTo(m,A),t.lineTo(m,j))};for(u&&(x=r[C(0)],t.moveTo(x.x,x.y)),g=0;g<=c;++g){if(x=r[C(g)],x.skip)continue;const E=x.x,N=x.y,L=E|0;L===b?(N<A?A=N:N>_&&(_=N),m=(h*m+E)/++h):(k(),t.lineTo(E,N),b=L,h=0,A=_=N),j=N}k()}function kA(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?eee:JJ}function tee(t){return t.stepped?XX:t.tension||t.cubicInterpolationMode==="monotone"?ZX:_l}function nee(t,e,n,s){let r=e._path;r||(r=e._path=new Path2D,e.path(r,n,s)&&r.closePath()),g4(t,e.options),t.stroke(r)}function see(t,e,n,s){const{segments:r,options:i}=e,o=kA(e);for(const c of r)g4(t,i,c.style),t.beginPath(),o(t,e,c,{start:n,end:n+s-1})&&t.closePath(),t.stroke()}const ree=typeof Path2D=="function";function aee(t,e,n,s){ree&&!e.options.segment?nee(t,e,n,s):see(t,e,n,s)}class fa extends Ps{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const r=s.spanGaps?this._loop:this._fullLoop;HX(this._points,s,e,r,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=rZ(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,s=e.length;return s&&n[e[s-1].end]}interpolate(e,n){const s=this.options,r=e[n],i=this.points,o=n4(this,{property:n,start:r,end:r});if(!o.length)return;const c=[],u=tee(s);let f,m;for(f=0,m=o.length;f<m;++f){const{start:h,end:g}=o[f],x=i[h],b=i[g];if(x===b){c.push(x);continue}const A=Math.abs((r-x[n])/(b[n]-x[n])),_=u(x,b,A,s.stepped);_[n]=e[n],c.push(_)}return c.length===1?c[0]:c}pathSegment(e,n,s){return kA(this)(e,this,n,s)}path(e,n,s){const r=this.segments,i=kA(this);let o=this._loop;n=n||0,s=s||this.points.length-n;for(const c of r)o&=i(e,this,c,{start:n,end:n+s-1});return!!o}draw(e,n,s,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),aee(e,this,s,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function hM(t,e,n,s){const r=t.options,{[n]:i}=t.getProps([n],s);return Math.abs(e-i)<r.radius+r.hitRadius}class $i extends Ps{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,n,s){const r=this.options,{x:i,y:o}=this.getProps(["x","y"],s);return Math.pow(e-i,2)+Math.pow(n-o,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,n){return hM(this,e,"x",n)}inYRange(e,n){return hM(this,e,"y",n)}getCenterPoint(e){const{x:n,y:s}=this.getProps(["x","y"],e);return{x:n,y:s}}size(e){e=e||this.options||{};let n=e.radius||0;n=Math.max(n,n&&e.hoverRadius||0);const s=n&&e.borderWidth||0;return(n+s)*2}draw(e,n){const s=this.options;this.skip||s.radius<.1||!_h(this,n,this.size(s)/2)||(e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.fillStyle=s.backgroundColor,SA(e,s,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function x4(t,e){const{x:n,y:s,base:r,width:i,height:o}=t.getProps(["x","y","base","width","height"],e);let c,u,f,m,h;return t.horizontal?(h=o/2,c=Math.min(n,r),u=Math.max(n,r),f=s-h,m=s+h):(h=i/2,c=n-h,u=n+h,f=Math.min(s,r),m=Math.max(s,r)),{left:c,top:f,right:u,bottom:m}}function wo(t,e,n,s){return t?0:fs(e,n,s)}function iee(t,e,n){const s=t.options.borderWidth,r=t.borderSkipped,i=YF(s);return{t:wo(r.top,i.top,0,n),r:wo(r.right,i.right,0,e),b:wo(r.bottom,i.bottom,0,n),l:wo(r.left,i.left,0,e)}}function oee(t,e,n){const{enableBorderRadius:s}=t.getProps(["enableBorderRadius"]),r=t.options.borderRadius,i=Il(r),o=Math.min(e,n),c=t.borderSkipped,u=s||Mt(r);return{topLeft:wo(!u||c.top||c.left,i.topLeft,0,o),topRight:wo(!u||c.top||c.right,i.topRight,0,o),bottomLeft:wo(!u||c.bottom||c.left,i.bottomLeft,0,o),bottomRight:wo(!u||c.bottom||c.right,i.bottomRight,0,o)}}function lee(t){const e=x4(t),n=e.right-e.left,s=e.bottom-e.top,r=iee(t,n/2,s/2),i=oee(t,n/2,s/2);return{outer:{x:e.left,y:e.top,w:n,h:s,radius:i},inner:{x:e.left+r.l,y:e.top+r.t,w:n-r.l-r.r,h:s-r.t-r.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,i.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(r.b,r.r))}}}}function t_(t,e,n,s){const r=e===null,i=n===null,c=t&&!(r&&i)&&x4(t,s);return c&&(r||bi(e,c.left,c.right))&&(i||bi(n,c.top,c.bottom))}function cee(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function uee(t,e){t.rect(e.x,e.y,e.w,e.h)}function n_(t,e,n={}){const s=t.x!==n.x?-e:0,r=t.y!==n.y?-e:0,i=(t.x+t.w!==n.x+n.w?e:0)-s,o=(t.y+t.h!==n.y+n.h?e:0)-r;return{x:t.x+s,y:t.y+r,w:t.w+i,h:t.h+o,radius:t.radius}}class bx extends Ps{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:s,backgroundColor:r}}=this,{inner:i,outer:o}=lee(this),c=cee(o.radius)?wh:uee;e.save(),(o.w!==i.w||o.h!==i.h)&&(e.beginPath(),c(e,n_(o,n,i)),e.clip(),c(e,n_(i,-n,o)),e.fillStyle=s,e.fill("evenodd")),e.beginPath(),c(e,n_(i,n)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,n,s){return t_(this,e,n,s)}inXRange(e,n){return t_(this,e,null,n)}inYRange(e,n){return t_(this,null,e,n)}getCenterPoint(e){const{x:n,y:s,base:r,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(n+r)/2:n,y:i?s:(s+r)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}function dee(t,e,n,s,r){const i=r.samples||s;if(i>=n)return t.slice(e,e+n);const o=[],c=(n-2)/(i-2);let u=0;const f=e+n-1;let m=e,h,g,x,b,A;for(o[u++]=t[m],h=0;h<i-2;h++){let _=0,j=0,C;const k=Math.floor((h+1)*c)+1+e,E=Math.min(Math.floor((h+2)*c)+1,n)+e,N=E-k;for(C=k;C<E;C++)_+=t[C].x,j+=t[C].y;_/=N,j/=N;const L=Math.floor(h*c)+1+e,M=Math.min(Math.floor((h+1)*c)+1,n)+e,{x:T,y:O}=t[m];for(x=b=-1,C=L;C<M;C++)b=.5*Math.abs((T-_)*(t[C].y-O)-(T-t[C].x)*(j-O)),b>x&&(x=b,g=t[C],A=C);o[u++]=g,m=A}return o[u++]=t[f],o}function fee(t,e,n,s){let r=0,i=0,o,c,u,f,m,h,g,x,b,A;const _=[],j=e+n-1,C=t[e].x,E=t[j].x-C;for(o=e;o<e+n;++o){c=t[o],u=(c.x-C)/E*s,f=c.y;const N=u|0;if(N===m)f<b?(b=f,h=o):f>A&&(A=f,g=o),r=(i*r+c.x)/++i;else{const L=o-1;if(!zt(h)&&!zt(g)){const M=Math.min(h,g),T=Math.max(h,g);M!==x&&M!==L&&_.push({...t[M],x:r}),T!==x&&T!==L&&_.push({...t[T],x:r})}o>0&&L!==x&&_.push(t[L]),_.push(c),m=N,i=0,b=A=f,h=g=x=o}}return _}function b4(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function mM(t){t.data.datasets.forEach(e=>{b4(e)})}function hee(t,e){const n=e.length;let s=0,r;const{iScale:i}=t,{min:o,max:c,minDefined:u,maxDefined:f}=i.getUserBounds();return u&&(s=fs(vi(e,i.axis,o).lo,0,n-1)),f?r=fs(vi(e,i.axis,c).hi+1,s,n)-s:r=n-s,{start:s,count:r}}var mee={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled){mM(t);return}const s=t.width;t.data.datasets.forEach((r,i)=>{const{_data:o,indexAxis:c}=r,u=t.getDatasetMeta(i),f=o||r.data;if(An([c,t.options.indexAxis])==="y"||!u.controller.supportsDecimation)return;const m=t.scales[u.xAxisID];if(m.type!=="linear"&&m.type!=="time"||t.options.parsing)return;let{start:h,count:g}=hee(u,f);const x=n.threshold||4*s;if(g<=x){b4(r);return}zt(o)&&(r._data=f,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(A){this._data=A}}));let b;switch(n.algorithm){case"lttb":b=dee(f,h,g,s,n);break;case"min-max":b=fee(f,h,g,s);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}r._decimated=b})},destroy(t){mM(t)}};function pee(t,e,n){const s=t.segments,r=t.points,i=e.points,o=[];for(const c of s){let{start:u,end:f}=c;f=vx(u,f,r);const m=DA(n,r[u],r[f],c.loop);if(!e.segments){o.push({source:c,target:m,start:r[u],end:r[f]});continue}const h=n4(e,m);for(const g of h){const x=DA(n,i[g.start],i[g.end],g.loop),b=t4(c,r,x);for(const A of b)o.push({source:A,target:g,start:{[n]:pM(m,x,"start",Math.max)},end:{[n]:pM(m,x,"end",Math.min)}})}}return o}function DA(t,e,n,s){if(s)return;let r=e[t],i=n[t];return t==="angle"&&(r=mr(r),i=mr(i)),{property:t,start:r,end:i}}function gee(t,e){const{x:n=null,y:s=null}=t||{},r=e.points,i=[];return e.segments.forEach(({start:o,end:c})=>{c=vx(o,c,r);const u=r[o],f=r[c];s!==null?(i.push({x:u.x,y:s}),i.push({x:f.x,y:s})):n!==null&&(i.push({x:n,y:u.y}),i.push({x:n,y:f.y}))}),i}function vx(t,e,n){for(;e>t;e--){const s=n[e];if(!isNaN(s.x)&&!isNaN(s.y))break}return e}function pM(t,e,n,s){return t&&e?s(t[n],e[n]):t?t[n]:e?e[n]:0}function v4(t,e){let n=[],s=!1;return bn(t)?(s=!0,n=t):n=gee(t,e),n.length?new fa({points:n,options:{tension:0},_loop:s,_fullLoop:s}):null}function gM(t){return t&&t.fill!==!1}function yee(t,e,n){let r=t[e].fill;const i=[e];let o;if(!n)return r;for(;r!==!1&&i.indexOf(r)===-1;){if(!hs(r))return r;if(o=t[r],!o)return!1;if(o.visible)return r;i.push(r),r=o.fill}return!1}function xee(t,e,n){const s=Aee(t);if(Mt(s))return isNaN(s.value)?!1:s;let r=parseFloat(s);return hs(r)&&Math.floor(r)===r?bee(s[0],e,r,n):["origin","start","end","stack","shape"].indexOf(s)>=0&&s}function bee(t,e,n,s){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=s?!1:n}function vee(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:Mt(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function _ee(t,e,n){let s;return t==="start"?s=n:t==="end"?s=e.options.reverse?e.min:e.max:Mt(t)?s=t.value:s=e.getBaseValue(),s}function Aee(t){const e=t.options,n=e.fill;let s=Dt(n&&n.target,n);return s===void 0&&(s=!!e.backgroundColor),s===!1||s===null?!1:s===!0?"origin":s}function wee(t){const{scale:e,index:n,line:s}=t,r=[],i=s.segments,o=s.points,c=jee(e,n);c.push(v4({x:null,y:e.bottom},s));for(let u=0;u<i.length;u++){const f=i[u];for(let m=f.start;m<=f.end;m++)See(r,o[m],c)}return new fa({points:r,options:{}})}function jee(t,e){const n=[],s=t.getMatchingVisibleMetas("line");for(let r=0;r<s.length;r++){const i=s[r];if(i.index===e)break;i.hidden||n.unshift(i.dataset)}return n}function See(t,e,n){const s=[];for(let r=0;r<n.length;r++){const i=n[r],{first:o,last:c,point:u}=Cee(i,e,"x");if(!(!u||o&&c)){if(o)s.unshift(u);else if(t.push(u),!c)break}}t.push(...s)}function Cee(t,e,n){const s=t.interpolate(e,n);if(!s)return{};const r=s[n],i=t.segments,o=t.points;let c=!1,u=!1;for(let f=0;f<i.length;f++){const m=i[f],h=o[m.start][n],g=o[m.end][n];if(bi(r,h,g)){c=r===h,u=r===g;break}}return{first:c,last:u,point:s}}class _4{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,s){const{x:r,y:i,radius:o}=this;return n=n||{start:0,end:wn},e.arc(r,i,o,n.end,n.start,!0),!s.bounds}interpolate(e){const{x:n,y:s,radius:r}=this,i=e.angle;return{x:n+Math.cos(i)*r,y:s+Math.sin(i)*r,angle:i}}}function Nee(t){const{chart:e,fill:n,line:s}=t;if(hs(n))return kee(e,n);if(n==="stack")return wee(t);if(n==="shape")return!0;const r=Dee(t);return r instanceof _4?r:v4(r,s)}function kee(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function Dee(t){return(t.scale||{}).getPointPositionForValue?Tee(t):Eee(t)}function Eee(t){const{scale:e={},fill:n}=t,s=vee(n,e);if(hs(s)){const r=e.isHorizontal();return{x:r?s:null,y:r?null:s}}return null}function Tee(t){const{scale:e,fill:n}=t,s=e.options,r=e.getLabels().length,i=s.reverse?e.max:e.min,o=_ee(n,e,i),c=[];if(s.grid.circular){const u=e.getPointPositionForValue(0,i);return new _4({x:u.x,y:u.y,radius:e.getDistanceFromCenterForValue(o)})}for(let u=0;u<r;++u)c.push(e.getPointPositionForValue(u,o));return c}function s_(t,e,n){const s=Nee(e),{chart:r,index:i,line:o,scale:c,axis:u}=e,f=o.options,m=f.fill,h=f.backgroundColor,{above:g=h,below:x=h}=m||{},b=r.getDatasetMeta(i),A=s4(r,b);s&&o.points.length&&(tm(t,n),Mee(t,{line:o,target:s,above:g,below:x,area:n,scale:c,axis:u,clip:A}),nm(t))}function Mee(t,e){const{line:n,target:s,above:r,below:i,area:o,scale:c,clip:u}=e,f=n._loop?"angle":e.axis;t.save();let m=i;i!==r&&(f==="x"?(yM(t,s,o.top),r_(t,{line:n,target:s,color:r,scale:c,property:f,clip:u}),t.restore(),t.save(),yM(t,s,o.bottom)):f==="y"&&(xM(t,s,o.left),r_(t,{line:n,target:s,color:i,scale:c,property:f,clip:u}),t.restore(),t.save(),xM(t,s,o.right),m=r)),r_(t,{line:n,target:s,color:m,scale:c,property:f,clip:u}),t.restore()}function yM(t,e,n){const{segments:s,points:r}=e;let i=!0,o=!1;t.beginPath();for(const c of s){const{start:u,end:f}=c,m=r[u],h=r[vx(u,f,r)];i?(t.moveTo(m.x,m.y),i=!1):(t.lineTo(m.x,n),t.lineTo(m.x,m.y)),o=!!e.pathSegment(t,c,{move:o}),o?t.closePath():t.lineTo(h.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function xM(t,e,n){const{segments:s,points:r}=e;let i=!0,o=!1;t.beginPath();for(const c of s){const{start:u,end:f}=c,m=r[u],h=r[vx(u,f,r)];i?(t.moveTo(m.x,m.y),i=!1):(t.lineTo(n,m.y),t.lineTo(m.x,m.y)),o=!!e.pathSegment(t,c,{move:o}),o?t.closePath():t.lineTo(n,h.y)}t.lineTo(n,e.first().y),t.closePath(),t.clip()}function r_(t,e){const{line:n,target:s,property:r,color:i,scale:o,clip:c}=e,u=pee(n,s,r);for(const{source:f,target:m,start:h,end:g}of u){const{style:{backgroundColor:x=i}={}}=f,b=s!==!0;t.save(),t.fillStyle=x,Ree(t,o,c,b&&DA(r,h,g)),t.beginPath();const A=!!n.pathSegment(t,f);let _;if(b){A?t.closePath():bM(t,s,g,r);const j=!!s.pathSegment(t,m,{move:A,reverse:!0});_=A&&j,_||bM(t,s,h,r)}t.closePath(),t.fill(_?"evenodd":"nonzero"),t.restore()}}function Ree(t,e,n,s){const r=e.chart.chartArea,{property:i,start:o,end:c}=s||{};if(i==="x"||i==="y"){let u,f,m,h;i==="x"?(u=o,f=r.top,m=c,h=r.bottom):(u=r.left,f=o,m=r.right,h=c),t.beginPath(),n&&(u=Math.max(u,n.left),m=Math.min(m,n.right),f=Math.max(f,n.top),h=Math.min(h,n.bottom)),t.rect(u,f,m-u,h-f),t.clip()}}function bM(t,e,n,s){const r=e.interpolate(n,s);r&&t.lineTo(r.x,r.y)}var A4={id:"filler",afterDatasetsUpdate(t,e,n){const s=(t.data.datasets||[]).length,r=[];let i,o,c,u;for(o=0;o<s;++o)i=t.getDatasetMeta(o),c=i.dataset,u=null,c&&c.options&&c instanceof fa&&(u={visible:t.isDatasetVisible(o),index:o,fill:xee(c,o,s),chart:t,axis:i.controller.options.indexAxis,scale:i.vScale,line:c}),i.$filler=u,r.push(u);for(o=0;o<s;++o)u=r[o],!(!u||u.fill===!1)&&(u.fill=yee(r,o,n.propagate))},beforeDraw(t,e,n){const s=n.drawTime==="beforeDraw",r=t.getSortedVisibleDatasetMetas(),i=t.chartArea;for(let o=r.length-1;o>=0;--o){const c=r[o].$filler;c&&(c.line.updateControlPoints(i,c.axis),s&&c.fill&&s_(t.ctx,c,i))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const s=t.getSortedVisibleDatasetMetas();for(let r=s.length-1;r>=0;--r){const i=s[r].$filler;gM(i)&&s_(t.ctx,i,t.chartArea)}},beforeDatasetDraw(t,e,n){const s=e.meta.$filler;!gM(s)||n.drawTime!=="beforeDatasetDraw"||s_(t.ctx,s,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const vM=(t,e)=>{let{boxHeight:n=e,boxWidth:s=e}=t;return t.usePointStyle&&(n=Math.min(n,e),s=t.pointStyleWidth||Math.min(s,e)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(e,n)}},Oee=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class _M extends Ps{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,s){this.maxWidth=e,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=rn(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(s=>e.filter(s,this.chart.data))),e.sort&&(n=n.sort((s,r)=>e.sort(s,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const s=e.labels,r=es(s.font),i=r.size,o=this._computeTitleHeight(),{boxWidth:c,itemHeight:u}=vM(s,i);let f,m;n.font=r.string,this.isHorizontal()?(f=this.maxWidth,m=this._fitRows(o,i,c,u)+10):(m=this.maxHeight,f=this._fitCols(o,r,c,u)+10),this.width=Math.min(f,e.maxWidth||this.maxWidth),this.height=Math.min(m,e.maxHeight||this.maxHeight)}_fitRows(e,n,s,r){const{ctx:i,maxWidth:o,options:{labels:{padding:c}}}=this,u=this.legendHitBoxes=[],f=this.lineWidths=[0],m=r+c;let h=e;i.textAlign="left",i.textBaseline="middle";let g=-1,x=-m;return this.legendItems.forEach((b,A)=>{const _=s+n/2+i.measureText(b.text).width;(A===0||f[f.length-1]+_+2*c>o)&&(h+=m,f[f.length-(A>0?0:1)]=0,x+=m,g++),u[A]={left:0,top:x,row:g,width:_,height:r},f[f.length-1]+=_+c}),h}_fitCols(e,n,s,r){const{ctx:i,maxHeight:o,options:{labels:{padding:c}}}=this,u=this.legendHitBoxes=[],f=this.columnSizes=[],m=o-e;let h=c,g=0,x=0,b=0,A=0;return this.legendItems.forEach((_,j)=>{const{itemWidth:C,itemHeight:k}=Pee(s,n,i,_,r);j>0&&x+k+2*c>m&&(h+=g+c,f.push({width:g,height:x}),b+=g+c,A++,g=x=0),u[j]={left:b,top:x,col:A,width:C,height:k},g=Math.max(g,C),x+=k+c}),h+=g,f.push({width:g,height:x}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:r},rtl:i}}=this,o=du(i,this.left,this.width);if(this.isHorizontal()){let c=0,u=ks(s,this.left+r,this.right-this.lineWidths[c]);for(const f of n)c!==f.row&&(c=f.row,u=ks(s,this.left+r,this.right-this.lineWidths[c])),f.top+=this.top+e+r,f.left=o.leftForLtr(o.x(u),f.width),u+=f.width+r}else{let c=0,u=ks(s,this.top+e+r,this.bottom-this.columnSizes[c].height);for(const f of n)f.col!==c&&(c=f.col,u=ks(s,this.top+e+r,this.bottom-this.columnSizes[c].height)),f.top=u,f.left+=this.left+r,f.left=o.leftForLtr(o.x(f.left),f.width),u+=f.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;tm(e,this),this._draw(),nm(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:s,ctx:r}=this,{align:i,labels:o}=e,c=Mn.color,u=du(e.rtl,this.left,this.width),f=es(o.font),{padding:m}=o,h=f.size,g=h/2;let x;this.drawTitle(),r.textAlign=u.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=f.string;const{boxWidth:b,boxHeight:A,itemHeight:_}=vM(o,h),j=function(L,M,T){if(isNaN(b)||b<=0||isNaN(A)||A<0)return;r.save();const O=Dt(T.lineWidth,1);if(r.fillStyle=Dt(T.fillStyle,c),r.lineCap=Dt(T.lineCap,"butt"),r.lineDashOffset=Dt(T.lineDashOffset,0),r.lineJoin=Dt(T.lineJoin,"miter"),r.lineWidth=O,r.strokeStyle=Dt(T.strokeStyle,c),r.setLineDash(Dt(T.lineDash,[])),o.usePointStyle){const I={radius:A*Math.SQRT2/2,pointStyle:T.pointStyle,rotation:T.rotation,borderWidth:O},$=u.xPlus(L,b/2),H=M+g;WF(r,I,$,H,o.pointStyleWidth&&b)}else{const I=M+Math.max((h-A)/2,0),$=u.leftForLtr(L,b),H=Il(T.borderRadius);r.beginPath(),Object.values(H).some(V=>V!==0)?wh(r,{x:$,y:I,w:b,h:A,radius:H}):r.rect($,I,b,A),r.fill(),O!==0&&r.stroke()}r.restore()},C=function(L,M,T){Ah(r,T.text,L,M+_/2,f,{strikethrough:T.hidden,textAlign:u.textAlign(T.textAlign)})},k=this.isHorizontal(),E=this._computeTitleHeight();k?x={x:ks(i,this.left+m,this.right-s[0]),y:this.top+m+E,line:0}:x={x:this.left+m,y:ks(i,this.top+E+m,this.bottom-n[0].height),line:0},ZF(this.ctx,e.textDirection);const N=_+m;this.legendItems.forEach((L,M)=>{r.strokeStyle=L.fontColor,r.fillStyle=L.fontColor;const T=r.measureText(L.text).width,O=u.textAlign(L.textAlign||(L.textAlign=o.textAlign)),I=b+g+T;let $=x.x,H=x.y;u.setWidth(this.width),k?M>0&&$+I+m>this.right&&(H=x.y+=N,x.line++,$=x.x=ks(i,this.left+m,this.right-s[x.line])):M>0&&H+N>this.bottom&&($=x.x=$+n[x.line].width+m,x.line++,H=x.y=ks(i,this.top+E+m,this.bottom-n[x.line].height));const V=u.x($);if(j(V,H,L),$=aX(O,$+b+g,k?$+I:this.right,e.rtl),C(u.x($),H,L),k)x.x+=I+m;else if(typeof L.text!="string"){const G=f.lineHeight;x.y+=w4(L,G)+m}else x.y+=N}),JF(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,s=es(n.font),r=As(n.padding);if(!n.display)return;const i=du(e.rtl,this.left,this.width),o=this.ctx,c=n.position,u=s.size/2,f=r.top+u;let m,h=this.left,g=this.width;if(this.isHorizontal())g=Math.max(...this.lineWidths),m=this.top+f,h=ks(e.align,h,this.right-g);else{const b=this.columnSizes.reduce((A,_)=>Math.max(A,_.height),0);m=f+ks(e.align,this.top,this.bottom-b-e.labels.padding-this._computeTitleHeight())}const x=ks(c,h,h+g);o.textAlign=i.textAlign(Qj(c)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=s.string,Ah(o,n.text,x,m,s)}_computeTitleHeight(){const e=this.options.title,n=es(e.font),s=As(e.padding);return e.display?n.lineHeight+s.height:0}_getLegendItemAt(e,n){let s,r,i;if(bi(e,this.left,this.right)&&bi(n,this.top,this.bottom)){for(i=this.legendHitBoxes,s=0;s<i.length;++s)if(r=i[s],bi(e,r.left,r.left+r.width)&&bi(n,r.top,r.top+r.height))return this.legendItems[s]}return null}handleEvent(e){const n=this.options;if(!Bee(e.type,n))return;const s=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,i=Oee(r,s);r&&!i&&rn(n.onLeave,[e,r,this],this),this._hoveredItem=s,s&&!i&&rn(n.onHover,[e,s,this],this)}else s&&rn(n.onClick,[e,s,this],this)}}function Pee(t,e,n,s,r){const i=Lee(s,t,e,n),o=Fee(r,s,e.lineHeight);return{itemWidth:i,itemHeight:o}}function Lee(t,e,n,s){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((i,o)=>i.length>o.length?i:o)),e+n.size/2+s.measureText(r).width}function Fee(t,e,n){let s=t;return typeof e.text!="string"&&(s=w4(e,n)),s}function w4(t,e){const n=t.text?t.text.length:0;return e*n}function Bee(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var Ho={id:"legend",_element:_M,start(t,e,n){const s=t.legend=new _M({ctx:t.ctx,options:n,chart:t});Vr.configure(t,s,n),Vr.addBox(t,s)},stop(t){Vr.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const s=t.legend;Vr.configure(t,s,n),s.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const s=e.datasetIndex,r=n.chart;r.isDatasetVisible(s)?(r.hide(s),e.hidden=!0):(r.show(s),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:r,color:i,useBorderRadius:o,borderRadius:c}}=t.legend.options;return t._getSortedDatasetMetas().map(u=>{const f=u.controller.getStyle(n?0:void 0),m=As(f.borderWidth);return{text:e[u.index].label,fillStyle:f.backgroundColor,fontColor:i,hidden:!u.visible,lineCap:f.borderCapStyle,lineDash:f.borderDash,lineDashOffset:f.borderDashOffset,lineJoin:f.borderJoinStyle,lineWidth:(m.width+m.height)/4,strokeStyle:f.borderColor,pointStyle:s||f.pointStyle,rotation:f.rotation,textAlign:r||f.textAlign,borderRadius:o&&(c||f.borderRadius),datasetIndex:u.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class j4 extends Ps{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const r=bn(s.text)?s.text.length:1;this._padding=As(s.padding);const i=r*es(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:s,bottom:r,right:i,options:o}=this,c=o.align;let u=0,f,m,h;return this.isHorizontal()?(m=ks(c,s,i),h=n+e,f=i-s):(o.position==="left"?(m=s+e,h=ks(c,r,n),u=Lt*-.5):(m=i-e,h=ks(c,n,r),u=Lt*.5),f=r-n),{titleX:m,titleY:h,maxWidth:f,rotation:u}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const s=es(n.font),i=s.lineHeight/2+this._padding.top,{titleX:o,titleY:c,maxWidth:u,rotation:f}=this._drawArgs(i);Ah(e,n.text,0,0,s,{color:n.color,maxWidth:u,rotation:f,textAlign:Qj(n.align),textBaseline:"middle",translation:[o,c]})}}function Iee(t,e){const n=new j4({ctx:t.ctx,options:e,chart:t});Vr.configure(t,n,e),Vr.addBox(t,n),t.titleBlock=n}var Uo={id:"title",_element:j4,start(t,e,n){Iee(t,n)},stop(t){const e=t.titleBlock;Vr.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const s=t.titleBlock;Vr.configure(t,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Bf={average(t){if(!t.length)return!1;let e,n,s=new Set,r=0,i=0;for(e=0,n=t.length;e<n;++e){const c=t[e].element;if(c&&c.hasValue()){const u=c.tooltipPosition();s.add(u.x),r+=u.y,++i}}return i===0||s.size===0?!1:{x:[...s].reduce((c,u)=>c+u)/s.size,y:r/i}},nearest(t,e){if(!t.length)return!1;let n=e.x,s=e.y,r=Number.POSITIVE_INFINITY,i,o,c;for(i=0,o=t.length;i<o;++i){const u=t[i].element;if(u&&u.hasValue()){const f=u.getCenterPoint(),m=ju(e,f);m<r&&(r=m,c=u)}}if(c){const u=c.tooltipPosition();n=u.x,s=u.y}return{x:n,y:s}}};function wa(t,e){return e&&(bn(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function mi(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function Vee(t,e){const{element:n,datasetIndex:s,index:r}=e,i=t.getDatasetMeta(s).controller,{label:o,value:c}=i.getLabelAndValue(r);return{chart:t,label:o,parsed:i.getParsed(r),raw:t.data.datasets[s].data[r],formattedValue:c,dataset:i.getDataset(),dataIndex:r,datasetIndex:s,element:n}}function AM(t,e){const n=t.chart.ctx,{body:s,footer:r,title:i}=t,{boxWidth:o,boxHeight:c}=e,u=es(e.bodyFont),f=es(e.titleFont),m=es(e.footerFont),h=i.length,g=r.length,x=s.length,b=As(e.padding);let A=b.height,_=0,j=s.reduce((E,N)=>E+N.before.length+N.lines.length+N.after.length,0);if(j+=t.beforeBody.length+t.afterBody.length,h&&(A+=h*f.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),j){const E=e.displayColors?Math.max(c,u.lineHeight):u.lineHeight;A+=x*E+(j-x)*u.lineHeight+(j-1)*e.bodySpacing}g&&(A+=e.footerMarginTop+g*m.lineHeight+(g-1)*e.footerSpacing);let C=0;const k=function(E){_=Math.max(_,n.measureText(E).width+C)};return n.save(),n.font=f.string,an(t.title,k),n.font=u.string,an(t.beforeBody.concat(t.afterBody),k),C=e.displayColors?o+2+e.boxPadding:0,an(s,E=>{an(E.before,k),an(E.lines,k),an(E.after,k)}),C=0,n.font=m.string,an(t.footer,k),n.restore(),_+=b.width,{width:_,height:A}}function zee(t,e){const{y:n,height:s}=e;return n<s/2?"top":n>t.height-s/2?"bottom":"center"}function $ee(t,e,n,s){const{x:r,width:i}=s,o=n.caretSize+n.caretPadding;if(t==="left"&&r+i+o>e.width||t==="right"&&r-i-o<0)return!0}function Hee(t,e,n,s){const{x:r,width:i}=n,{width:o,chartArea:{left:c,right:u}}=t;let f="center";return s==="center"?f=r<=(c+u)/2?"left":"right":r<=i/2?f="left":r>=o-i/2&&(f="right"),$ee(f,t,e,n)&&(f="center"),f}function wM(t,e,n){const s=n.yAlign||e.yAlign||zee(t,n);return{xAlign:n.xAlign||e.xAlign||Hee(t,e,n,s),yAlign:s}}function Uee(t,e){let{x:n,width:s}=t;return e==="right"?n-=s:e==="center"&&(n-=s/2),n}function Wee(t,e,n){let{y:s,height:r}=t;return e==="top"?s+=n:e==="bottom"?s-=r+n:s-=r/2,s}function jM(t,e,n,s){const{caretSize:r,caretPadding:i,cornerRadius:o}=t,{xAlign:c,yAlign:u}=n,f=r+i,{topLeft:m,topRight:h,bottomLeft:g,bottomRight:x}=Il(o);let b=Uee(e,c);const A=Wee(e,u,f);return u==="center"?c==="left"?b+=f:c==="right"&&(b-=f):c==="left"?b-=Math.max(m,g)+r:c==="right"&&(b+=Math.max(h,x)+r),{x:fs(b,0,s.width-e.width),y:fs(A,0,s.height-e.height)}}function Qp(t,e,n){const s=As(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-s.right:t.x+s.left}function SM(t){return wa([],mi(t))}function Yee(t,e,n){return rc(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function CM(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const S4={beforeTitle:di,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(s>0&&e.dataIndex<s)return n[e.dataIndex]}return""},afterTitle:di,beforeBody:di,beforeLabel:di,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return zt(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:di,afterBody:di,beforeFooter:di,footer:di,afterFooter:di};function qs(t,e,n,s){const r=t[e].call(n,s);return typeof r>"u"?S4[e].call(n,s):r}class NM extends Ps{static positioners=Bf;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,s=this.options.setContext(this.getContext()),r=s.enabled&&n.options.animation&&s.animations,i=new aS(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=Yee(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:s}=n,r=qs(s,"beforeTitle",this,e),i=qs(s,"title",this,e),o=qs(s,"afterTitle",this,e);let c=[];return c=wa(c,mi(r)),c=wa(c,mi(i)),c=wa(c,mi(o)),c}getBeforeBody(e,n){return SM(qs(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:s}=n,r=[];return an(e,i=>{const o={before:[],lines:[],after:[]},c=CM(s,i);wa(o.before,mi(qs(c,"beforeLabel",this,i))),wa(o.lines,qs(c,"label",this,i)),wa(o.after,mi(qs(c,"afterLabel",this,i))),r.push(o)}),r}getAfterBody(e,n){return SM(qs(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:s}=n,r=qs(s,"beforeFooter",this,e),i=qs(s,"footer",this,e),o=qs(s,"afterFooter",this,e);let c=[];return c=wa(c,mi(r)),c=wa(c,mi(i)),c=wa(c,mi(o)),c}_createItems(e){const n=this._active,s=this.chart.data,r=[],i=[],o=[];let c=[],u,f;for(u=0,f=n.length;u<f;++u)c.push(Vee(this.chart,n[u]));return e.filter&&(c=c.filter((m,h,g)=>e.filter(m,h,g,s))),e.itemSort&&(c=c.sort((m,h)=>e.itemSort(m,h,s))),an(c,m=>{const h=CM(e.callbacks,m);r.push(qs(h,"labelColor",this,m)),i.push(qs(h,"labelPointStyle",this,m)),o.push(qs(h,"labelTextColor",this,m))}),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=c,c}update(e,n){const s=this.options.setContext(this.getContext()),r=this._active;let i,o=[];if(!r.length)this.opacity!==0&&(i={opacity:0});else{const c=Bf[s.position].call(this,r,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const u=this._size=AM(this,s),f=Object.assign({},c,u),m=wM(this.chart,s,f),h=jM(s,f,m,this.chart);this.xAlign=m.xAlign,this.yAlign=m.yAlign,i={opacity:1,x:h.x,y:h.y,width:u.width,height:u.height,caretX:c.x,caretY:c.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,s,r){const i=this.getCaretPosition(e,s,r);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(e,n,s){const{xAlign:r,yAlign:i}=this,{caretSize:o,cornerRadius:c}=s,{topLeft:u,topRight:f,bottomLeft:m,bottomRight:h}=Il(c),{x:g,y:x}=e,{width:b,height:A}=n;let _,j,C,k,E,N;return i==="center"?(E=x+A/2,r==="left"?(_=g,j=_-o,k=E+o,N=E-o):(_=g+b,j=_+o,k=E-o,N=E+o),C=_):(r==="left"?j=g+Math.max(u,m)+o:r==="right"?j=g+b-Math.max(f,h)-o:j=this.caretX,i==="top"?(k=x,E=k-o,_=j-o,C=j+o):(k=x+A,E=k+o,_=j+o,C=j-o),N=k),{x1:_,x2:j,x3:C,y1:k,y2:E,y3:N}}drawTitle(e,n,s){const r=this.title,i=r.length;let o,c,u;if(i){const f=du(s.rtl,this.x,this.width);for(e.x=Qp(this,s.titleAlign,s),n.textAlign=f.textAlign(s.titleAlign),n.textBaseline="middle",o=es(s.titleFont),c=s.titleSpacing,n.fillStyle=s.titleColor,n.font=o.string,u=0;u<i;++u)n.fillText(r[u],f.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+c,u+1===i&&(e.y+=s.titleMarginBottom-c)}}_drawColorBox(e,n,s,r,i){const o=this.labelColors[s],c=this.labelPointStyles[s],{boxHeight:u,boxWidth:f}=i,m=es(i.bodyFont),h=Qp(this,"left",i),g=r.x(h),x=u<m.lineHeight?(m.lineHeight-u)/2:0,b=n.y+x;if(i.usePointStyle){const A={radius:Math.min(f,u)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},_=r.leftForLtr(g,f)+f/2,j=b+u/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,SA(e,A,_,j),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,SA(e,A,_,j)}else{e.lineWidth=Mt(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const A=r.leftForLtr(g,f),_=r.leftForLtr(r.xPlus(g,1),f-2),j=Il(o.borderRadius);Object.values(j).some(C=>C!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,wh(e,{x:A,y:b,w:f,h:u,radius:j}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),wh(e,{x:_,y:b+1,w:f-2,h:u-2,radius:j}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(A,b,f,u),e.strokeRect(A,b,f,u),e.fillStyle=o.backgroundColor,e.fillRect(_,b+1,f-2,u-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,n,s){const{body:r}=this,{bodySpacing:i,bodyAlign:o,displayColors:c,boxHeight:u,boxWidth:f,boxPadding:m}=s,h=es(s.bodyFont);let g=h.lineHeight,x=0;const b=du(s.rtl,this.x,this.width),A=function(T){n.fillText(T,b.x(e.x+x),e.y+g/2),e.y+=g+i},_=b.textAlign(o);let j,C,k,E,N,L,M;for(n.textAlign=o,n.textBaseline="middle",n.font=h.string,e.x=Qp(this,_,s),n.fillStyle=s.bodyColor,an(this.beforeBody,A),x=c&&_!=="right"?o==="center"?f/2+m:f+2+m:0,E=0,L=r.length;E<L;++E){for(j=r[E],C=this.labelTextColors[E],n.fillStyle=C,an(j.before,A),k=j.lines,c&&k.length&&(this._drawColorBox(n,e,E,b,s),g=Math.max(h.lineHeight,u)),N=0,M=k.length;N<M;++N)A(k[N]),g=h.lineHeight;an(j.after,A)}x=0,g=h.lineHeight,an(this.afterBody,A),e.y-=i}drawFooter(e,n,s){const r=this.footer,i=r.length;let o,c;if(i){const u=du(s.rtl,this.x,this.width);for(e.x=Qp(this,s.footerAlign,s),e.y+=s.footerMarginTop,n.textAlign=u.textAlign(s.footerAlign),n.textBaseline="middle",o=es(s.footerFont),n.fillStyle=s.footerColor,n.font=o.string,c=0;c<i;++c)n.fillText(r[c],u.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+s.footerSpacing}}drawBackground(e,n,s,r){const{xAlign:i,yAlign:o}=this,{x:c,y:u}=e,{width:f,height:m}=s,{topLeft:h,topRight:g,bottomLeft:x,bottomRight:b}=Il(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(c+h,u),o==="top"&&this.drawCaret(e,n,s,r),n.lineTo(c+f-g,u),n.quadraticCurveTo(c+f,u,c+f,u+g),o==="center"&&i==="right"&&this.drawCaret(e,n,s,r),n.lineTo(c+f,u+m-b),n.quadraticCurveTo(c+f,u+m,c+f-b,u+m),o==="bottom"&&this.drawCaret(e,n,s,r),n.lineTo(c+x,u+m),n.quadraticCurveTo(c,u+m,c,u+m-x),o==="center"&&i==="left"&&this.drawCaret(e,n,s,r),n.lineTo(c,u+h),n.quadraticCurveTo(c,u,c+h,u),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,s=this.$animations,r=s&&s.x,i=s&&s.y;if(r||i){const o=Bf[e.position].call(this,this._active,this._eventPosition);if(!o)return;const c=this._size=AM(this,e),u=Object.assign({},o,this._size),f=wM(n,e,u),m=jM(e,u,f,n);(r._to!==m.x||i._to!==m.y)&&(this.xAlign=f.xAlign,this.yAlign=f.yAlign,this.width=c.width,this.height=c.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,m))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=As(n.padding),c=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&c&&(e.save(),e.globalAlpha=s,this.drawBackground(i,e,r,n),ZF(e,n.textDirection),i.y+=o.top,this.drawTitle(i,e,n),this.drawBody(i,e,n),this.drawFooter(i,e,n),JF(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const s=this._active,r=e.map(({datasetIndex:c,index:u})=>{const f=this.chart.getDatasetMeta(c);if(!f)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:f.data[u],index:u}}),i=!ly(s,r),o=this._positionChanged(r,n);(i||o)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],o=this._getActiveElements(e,i,n,s),c=this._positionChanged(o,e),u=n||!ly(o,i)||c;return u&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),u}_getActiveElements(e,n,s,r){const i=this.options;if(e.type==="mouseout")return[];if(!r)return n.filter(c=>this.chart.data.datasets[c.datasetIndex]&&this.chart.getDatasetMeta(c.datasetIndex).controller.getParsed(c.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,s);return i.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:s,caretY:r,options:i}=this,o=Bf[i.position].call(this,e,n);return o!==!1&&(s!==o.x||r!==o.y)}}var Wo={id:"tooltip",_element:NM,positioners:Bf,afterInit(t,e,n){n&&(t.tooltip=new NM({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:S4},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const qee=(t,e,n,s)=>(typeof e=="string"?(n=t.push(e)-1,s.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function Gee(t,e,n,s){const r=t.indexOf(e);if(r===-1)return qee(t,e,n,s);const i=t.lastIndexOf(e);return r!==i?n:r}const Kee=(t,e)=>t===null?null:fs(Math.round(t),0,e);function kM(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Yo extends td{static id="category";static defaults={ticks:{callback:kM}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const s=this.getLabels();for(const{index:r,label:i}of n)s[r]===i&&s.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(zt(e))return null;const s=this.getLabels();return n=isFinite(n)&&s[n]===e?n:Gee(s,e,Dt(n,e),this._addedLabels),Kee(n,s.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:s,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(s=0),n||(r=this.getLabels().length-1)),this.min=s,this.max=r}buildTicks(){const e=this.min,n=this.max,s=this.options.offset,r=[];let i=this.getLabels();i=e===0&&n===i.length-1?i:i.slice(e,n+1),this._valueRange=Math.max(i.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=e;o<=n;o++)r.push({value:o});return r}getLabelForValue(e){return kM.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function Qee(t,e){const n=[],{bounds:r,step:i,min:o,max:c,precision:u,count:f,maxTicks:m,maxDigits:h,includeBounds:g}=t,x=i||1,b=m-1,{min:A,max:_}=e,j=!zt(o),C=!zt(c),k=!zt(f),E=(_-A)/(h+1);let N=wT((_-A)/b/x)*x,L,M,T,O;if(N<1e-14&&!j&&!C)return[{value:A},{value:_}];O=Math.ceil(_/N)-Math.floor(A/N),O>b&&(N=wT(O*N/b/x)*x),zt(u)||(L=Math.pow(10,u),N=Math.ceil(N*L)/L),r==="ticks"?(M=Math.floor(A/N)*N,T=Math.ceil(_/N)*N):(M=A,T=_),j&&C&&i&&XQ((c-o)/i,N/1e3)?(O=Math.round(Math.min((c-o)/N,m)),N=(c-o)/O,M=o,T=c):k?(M=j?o:M,T=C?c:T,O=f-1,N=(T-M)/O):(O=(T-M)/N,Jf(O,Math.round(O),N/1e3)?O=Math.round(O):O=Math.ceil(O));const I=Math.max(jT(N),jT(M));L=Math.pow(10,zt(u)?I:u),M=Math.round(M*L)/L,T=Math.round(T*L)/L;let $=0;for(j&&(g&&M!==o?(n.push({value:o}),M<o&&$++,Jf(Math.round((M+$*N)*L)/L,o,DM(o,E,t))&&$++):M<o&&$++);$<O;++$){const H=Math.round((M+$*N)*L)/L;if(C&&H>c)break;n.push({value:H})}return C&&g&&T!==c?n.length&&Jf(n[n.length-1].value,c,DM(c,E,t))?n[n.length-1].value=c:n.push({value:c}):(!C||T===c)&&n.push({value:T}),n}function DM(t,e,{horizontal:n,minRotation:s}){const r=ds(s),i=(n?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+t).length;return Math.min(e/i,o)}class Xee extends td{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return zt(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:s}=this.getUserBounds();let{min:r,max:i}=this;const o=u=>r=n?r:u,c=u=>i=s?i:u;if(e){const u=Va(r),f=Va(i);u<0&&f<0?c(0):u>0&&f>0&&o(0)}if(r===i){let u=i===0?1:Math.abs(i*.05);c(i+u),e||o(r-u)}this.min=r,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:s}=e,r;return s?(r=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let s=this.getTickLimit();s=Math.max(2,s);const r={maxTicks:s,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,o=Qee(r,i);return e.bounds==="ticks"&&ZQ(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,s=this.max;if(super.configure(),this.options.offset&&e.length){const r=(s-n)/Math.max(e.length-1,1)/2;n-=r,s+=r}this._startValue=n,this._endValue=s,this._valueRange=s-n}getLabelForValue(e){return Zj(e,this.chart.options.locale,this.options.ticks.format)}}class qo extends Xee{static id="linear";static defaults={ticks:{callback:UF.formatters.numeric}};determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=hs(e)?e:0,this.max=hs(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,s=ds(this.options.ticks.minRotation),r=(e?Math.sin(s):Math.cos(s))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const _x={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Xs=Object.keys(_x);function EM(t,e){return t-e}function TM(t,e){if(zt(e))return null;const n=t._adapter,{parser:s,round:r,isoWeekday:i}=t._parseOpts;let o=e;return typeof s=="function"&&(o=s(o)),hs(o)||(o=typeof s=="string"?n.parse(o,s):n.parse(o)),o===null?null:(r&&(o=r==="week"&&(Gl(i)||i===!0)?n.startOf(o,"isoWeek",i):n.startOf(o,r)),+o)}function MM(t,e,n,s){const r=Xs.length;for(let i=Xs.indexOf(t);i<r-1;++i){const o=_x[Xs[i]],c=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(c*o.size))<=s)return Xs[i]}return Xs[r-1]}function Zee(t,e,n,s,r){for(let i=Xs.length-1;i>=Xs.indexOf(n);i--){const o=Xs[i];if(_x[o].common&&t._adapter.diff(r,s,o)>=e-1)return o}return Xs[n?Xs.indexOf(n):0]}function Jee(t){for(let e=Xs.indexOf(t)+1,n=Xs.length;e<n;++e)if(_x[Xs[e]].common)return Xs[e]}function RM(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:s,hi:r}=Kj(n,e),i=n[s]>=e?n[s]:n[r];t[i]=!0}}function ete(t,e,n,s){const r=t._adapter,i=+r.startOf(e[0].value,s),o=e[e.length-1].value;let c,u;for(c=i;c<=o;c=+r.add(c,1,s))u=n[c],u>=0&&(e[u].major=!0);return e}function OM(t,e,n){const s=[],r={},i=e.length;let o,c;for(o=0;o<i;++o)c=e[o],r[c]=o,s.push({value:c,major:!1});return i===0||!n?s:ete(t,s,r,n)}class Oo extends td{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const s=e.time||(e.time={}),r=this._adapter=new i4._date(e.adapters.date);r.init(n),Zf(s.displayFormats,r.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:TM(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,s=e.time.unit||"day";let{min:r,max:i,minDefined:o,maxDefined:c}=this.getUserBounds();function u(f){!o&&!isNaN(f.min)&&(r=Math.min(r,f.min)),!c&&!isNaN(f.max)&&(i=Math.max(i,f.max))}(!o||!c)&&(u(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&u(this.getMinMax(!1))),r=hs(r)&&!isNaN(r)?r:+n.startOf(Date.now(),s),i=hs(i)&&!isNaN(i)?i:+n.endOf(Date.now(),s)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],s=e[e.length-1]),{min:n,max:s}}buildTicks(){const e=this.options,n=e.time,s=e.ticks,r=s.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,o=this.max,c=nX(r,i,o);return this._unit=n.unit||(s.autoSkip?MM(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):Zee(this,c.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:Jee(this._unit),this.initOffsets(r),e.reverse&&c.reverse(),OM(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,s=0,r,i;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?n=1-r:n=(this.getDecimalForValue(e[1])-r)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?s=i:s=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=fs(n,0,o),s=fs(s,0,o),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const e=this._adapter,n=this.min,s=this.max,r=this.options,i=r.time,o=i.unit||MM(i.minUnit,n,s,this._getLabelCapacity(n)),c=Dt(r.ticks.stepSize,1),u=o==="week"?i.isoWeekday:!1,f=Gl(u)||u===!0,m={};let h=n,g,x;if(f&&(h=+e.startOf(h,"isoWeek",u)),h=+e.startOf(h,f?"day":o),e.diff(s,n,o)>1e5*c)throw new Error(n+" and "+s+" are too far apart with stepSize of "+c+" "+o);const b=r.ticks.source==="data"&&this.getDataTimestamps();for(g=h,x=0;g<s;g=+e.add(g,c,o),x++)RM(m,g,b);return(g===s||r.bounds==="ticks"||x===1)&&RM(m,g,b),Object.keys(m).sort(EM).map(A=>+A)}getLabelForValue(e){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(e,s.tooltipFormat):n.format(e,s.displayFormats.datetime)}format(e,n){const r=this.options.time.displayFormats,i=this._unit,o=n||r[i];return this._adapter.format(e,o)}_tickFormatFunction(e,n,s,r){const i=this.options,o=i.ticks.callback;if(o)return rn(o,[e,n,s],this);const c=i.time.displayFormats,u=this._unit,f=this._majorUnit,m=u&&c[u],h=f&&c[f],g=s[n],x=f&&h&&g&&g.major;return this._adapter.format(e,r||(x?h:m))}generateTickLabels(e){let n,s,r;for(n=0,s=e.length;n<s;++n)r=e[n],r.label=this._tickFormatFunction(r.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,s=this.ctx.measureText(e).width,r=ds(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(r),o=Math.sin(r),c=this._resolveTickFontOptions(0).size;return{w:s*i+c*o,h:s*o+c*i}}_getLabelCapacity(e){const n=this.options.time,s=n.displayFormats,r=s[n.unit]||s.millisecond,i=this._tickFormatFunction(e,0,OM(this,[e],this._majorUnit),r),o=this._getLabelSize(i),c=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return c>0?c:1}getDataTimestamps(){let e=this._cache.data||[],n,s;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,s=r.length;n<s;++n)e=e.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,s;if(e.length)return e;const r=this.getLabels();for(n=0,s=r.length;n<s;++n)e.push(TM(this,r[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return zF(e.sort(EM))}}function Xp(t,e,n){let s=0,r=t.length-1,i,o,c,u;n?(e>=t[s].pos&&e<=t[r].pos&&({lo:s,hi:r}=vi(t,"pos",e)),{pos:i,time:c}=t[s],{pos:o,time:u}=t[r]):(e>=t[s].time&&e<=t[r].time&&({lo:s,hi:r}=vi(t,"time",e)),{time:i,pos:c}=t[s],{time:o,pos:u}=t[r]);const f=o-i;return f?c+(u-c)*(e-i)/f:c}class tte extends Oo{static id="timeseries";static defaults=Oo.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Xp(n,this.min),this._tableRange=Xp(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:s}=this,r=[],i=[];let o,c,u,f,m;for(o=0,c=e.length;o<c;++o)f=e[o],f>=n&&f<=s&&r.push(f);if(r.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(o=0,c=r.length;o<c;++o)m=r[o+1],u=r[o-1],f=r[o],Math.round((m+u)/2)!==f&&i.push({time:f,pos:o/(c-1)});return i}_generate(){const e=this.min,n=this.max;let s=super.getDataTimestamps();return(!s.includes(e)||!s.length)&&s.splice(0,0,e),(!s.includes(n)||s.length===1)&&s.push(n),s.sort((r,i)=>r-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?e=this.normalize(n.concat(s)):e=n.length?n:s,e=this._cache.all=e,e}getDecimalForValue(e){return(Xp(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return Xp(this._table,s*this._tableRange+this._minPos,!0)}}const C4="label";function PM(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function nte(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function N4(t,e){t.labels=e}function k4(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:C4;const s=[];t.datasets=e.map(r=>{const i=t.datasets.find(o=>o[n]===r[n]);return!i||!r.data||s.includes(i)?{...r}:(s.push(i),Object.assign(i,r),i)})}function ste(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:C4;const n={labels:[],datasets:[]};return N4(n,t.labels),k4(n,t.datasets,e),n}function rte(t,e){const{height:n=150,width:s=300,redraw:r=!1,datasetIdKey:i,type:o,data:c,options:u,plugins:f=[],fallbackContent:m,updateMode:h,...g}=t,x=v.useRef(null),b=v.useRef(null),A=()=>{x.current&&(b.current=new zs(x.current,{type:o,data:ste(c,i),options:u&&{...u},plugins:f}),PM(e,b.current))},_=()=>{PM(e,null),b.current&&(b.current.destroy(),b.current=null)};return v.useEffect(()=>{!r&&b.current&&u&&nte(b.current,u)},[r,u]),v.useEffect(()=>{!r&&b.current&&N4(b.current.config.data,c.labels)},[r,c.labels]),v.useEffect(()=>{!r&&b.current&&c.datasets&&k4(b.current.config.data,c.datasets,i)},[r,c.datasets]),v.useEffect(()=>{b.current&&(r?(_(),setTimeout(A)):b.current.update(h))},[r,u,c.labels,c.datasets,h]),v.useEffect(()=>{b.current&&(_(),setTimeout(A))},[o]),v.useEffect(()=>(A(),()=>_()),[]),fe.createElement("canvas",{ref:x,role:"img",height:n,width:s,...g},m)}const ate=v.forwardRef(rte);function D4(t,e){return zs.register(e),v.forwardRef((n,s)=>fe.createElement(ate,{...n,ref:s,type:t}))}const Rs=D4("line",PZ),ia=D4("bar",MZ),E4=6048e5,ite=864e5,sm=6e4,rm=36e5,ote=1e3,LM=Symbol.for("constructDateFrom");function mn(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&LM in t?t[LM](e):t instanceof Date?new t.constructor(e):new Date(e)}function it(t,e){return mn(e||t,t)}function $r(t,e,n){const s=it(t,n?.in);return isNaN(e)?mn(n?.in||t,NaN):(e&&s.setDate(s.getDate()+e),s)}function Yr(t,e,n){const s=it(t,n?.in);if(isNaN(e))return mn(t,NaN);if(!e)return s;const r=s.getDate(),i=mn(t,s.getTime());i.setMonth(s.getMonth()+e+1,0);const o=i.getDate();return r>=o?i:(s.setFullYear(i.getFullYear(),i.getMonth(),r),s)}function oS(t,e,n){return mn(t,+it(t)+e)}function T4(t,e,n){return oS(t,e*rm)}let lte={};function ac(){return lte}function oa(t,e){const n=ac(),s=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,r=it(t,e?.in),i=r.getDay(),o=(i<s?7:0)+i-s;return r.setDate(r.getDate()-o),r.setHours(0,0,0,0),r}function Nu(t,e){return oa(t,{...e,weekStartsOn:1})}function M4(t,e){const n=it(t,e?.in),s=n.getFullYear(),r=mn(n,0);r.setFullYear(s+1,0,4),r.setHours(0,0,0,0);const i=Nu(r),o=mn(n,0);o.setFullYear(s,0,4),o.setHours(0,0,0,0);const c=Nu(o);return n.getTime()>=i.getTime()?s+1:n.getTime()>=c.getTime()?s:s-1}function gy(t){const e=it(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Gr(t,...e){const n=mn.bind(null,e.find(s=>typeof s=="object"));return e.map(n)}function Po(t,e){const n=it(t,e?.in);return n.setHours(0,0,0,0),n}function ku(t,e,n){const[s,r]=Gr(n?.in,t,e),i=Po(s),o=Po(r),c=+i-gy(i),u=+o-gy(o);return Math.round((c-u)/ite)}function cte(t,e){const n=M4(t,e),s=mn(t,0);return s.setFullYear(n,0,4),s.setHours(0,0,0,0),Nu(s)}function yy(t,e,n){const s=it(t,n?.in);return s.setTime(s.getTime()+e*sm),s}function Ax(t,e,n){return Yr(t,e*3,n)}function R4(t,e,n){return oS(t,e*1e3)}function Sh(t,e,n){return $r(t,e*7,n)}function za(t,e,n){return Yr(t,e*12,n)}function FM(t,e){let n,s=e?.in;return t.forEach(r=>{!s&&typeof r=="object"&&(s=mn.bind(null,r));const i=it(r,s);(!n||n<i||isNaN(+i))&&(n=i)}),mn(s,n||NaN)}function BM(t,e){let n,s=e?.in;return t.forEach(r=>{!s&&typeof r=="object"&&(s=mn.bind(null,r));const i=it(r,s);(!n||n>i||isNaN(+i))&&(n=i)}),mn(s,n||NaN)}function nh(t,e){const n=+it(t)-+it(e);return n<0?-1:n>0?1:n}function ute(t,e,n){const[s,r]=Gr(n?.in,t,e);return+Po(s)==+Po(r)}function Ci(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Ch(t){return!(!Ci(t)&&typeof t!="number"||isNaN(+it(t)))}function Nh(t,e,n){const[s,r]=Gr(n?.in,t,e),i=s.getFullYear()-r.getFullYear(),o=s.getMonth()-r.getMonth();return i*12+o}function zl(t,e){const n=it(t,e?.in);return Math.trunc(n.getMonth()/3)+1}function xy(t,e,n){const[s,r]=Gr(n?.in,t,e),i=s.getFullYear()-r.getFullYear(),o=zl(s)-zl(r);return i*4+o}function kh(t,e,n){const[s,r]=Gr(n?.in,t,e);return s.getFullYear()-r.getFullYear()}function lS(t,e,n){const[s,r]=Gr(n?.in,t,e),i=IM(s,r),o=Math.abs(ku(s,r));s.setDate(s.getDate()-i*o);const c=+(IM(s,r)===-i),u=i*(o-c);return u===0?0:u}function IM(t,e){const n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function am(t){return e=>{const s=(t?Math[t]:Math.trunc)(e);return s===0?0:s}}function dte(t,e,n){const[s,r]=Gr(n?.in,t,e),i=(+s-+r)/rm;return am(n?.roundingMethod)(i)}function cS(t,e){return+it(t)-+it(e)}function fte(t,e,n){const s=cS(t,e)/sm;return am(n?.roundingMethod)(s)}function wx(t,e){const n=it(t,e?.in);return n.setHours(23,59,59,999),n}function jx(t,e){const n=it(t,e?.in),s=n.getMonth();return n.setFullYear(n.getFullYear(),s+1,0),n.setHours(23,59,59,999),n}function hte(t,e){const n=it(t,e?.in);return+wx(n,e)==+jx(n,e)}function O4(t,e,n){const[s,r,i]=Gr(n?.in,t,t,e),o=nh(r,i),c=Math.abs(Nh(r,i));if(c<1)return 0;r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-o*c);let u=nh(r,i)===-o;hte(s)&&c===1&&nh(s,i)===1&&(u=!1);const f=o*(c-+u);return f===0?0:f}function mte(t,e,n){const s=O4(t,e,n)/3;return am(n?.roundingMethod)(s)}function pte(t,e,n){const s=cS(t,e)/1e3;return am(n?.roundingMethod)(s)}function gte(t,e,n){const s=lS(t,e,n)/7;return am(n?.roundingMethod)(s)}function yte(t,e,n){const[s,r]=Gr(n?.in,t,e),i=nh(s,r),o=Math.abs(kh(s,r));s.setFullYear(1584),r.setFullYear(1584);const c=nh(s,r)===-i,u=i*(o-+c);return u===0?0:u}function by(t,e){const n=it(t,e?.in),s=n.getMonth(),r=s-s%3;return n.setMonth(r,1),n.setHours(0,0,0,0),n}function uS(t,e){const n=it(t,e?.in);return n.setDate(1),n.setHours(0,0,0,0),n}function dS(t,e){const n=it(t,e?.in),s=n.getFullYear();return n.setFullYear(s+1,0,0),n.setHours(23,59,59,999),n}function im(t,e){const n=it(t,e?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function xte(t,e){const n=it(t,e?.in);return n.setMinutes(59,59,999),n}function P4(t,e){const n=ac(),s=n.weekStartsOn??n.locale?.options?.weekStartsOn??0,r=it(t,e?.in),i=r.getDay(),o=(i<s?-7:0)+6-(i-s);return r.setDate(r.getDate()+o),r.setHours(23,59,59,999),r}function bte(t,e){const n=it(t,e?.in);return n.setSeconds(59,999),n}function vte(t,e){const n=it(t,e?.in),s=n.getMonth(),r=s-s%3+3;return n.setMonth(r,0),n.setHours(23,59,59,999),n}function _te(t,e){const n=it(t,e?.in);return n.setMilliseconds(999),n}const Ate={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},L4=(t,e,n)=>{let s;const r=Ate[t];return typeof r=="string"?s=r:e===1?s=r.one:s=r.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+s:s+" ago":s};function fu(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const wte={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},jte={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Ste={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Cte={date:fu({formats:wte,defaultWidth:"full"}),time:fu({formats:jte,defaultWidth:"full"}),dateTime:fu({formats:Ste,defaultWidth:"full"})},Nte={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},F4=(t,e,n,s)=>Nte[t];function yf(t){return(e,n)=>{const s=n?.context?String(n.context):"standalone";let r;if(s==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,c=n?.width?String(n.width):o;r=t.formattingValues[c]||t.formattingValues[o]}else{const o=t.defaultWidth,c=n?.width?String(n.width):t.defaultWidth;r=t.values[c]||t.values[o]}const i=t.argumentCallback?t.argumentCallback(e):e;return r[i]}}const kte={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Dte={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Ete={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Tte={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Mte={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Rte={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Ote=(t,e)=>{const n=Number(t),s=n%100;if(s>20||s<10)switch(s%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},B4={ordinalNumber:Ote,era:yf({values:kte,defaultWidth:"wide"}),quarter:yf({values:Dte,defaultWidth:"wide",argumentCallback:t=>t-1}),month:yf({values:Ete,defaultWidth:"wide"}),day:yf({values:Tte,defaultWidth:"wide"}),dayPeriod:yf({values:Mte,defaultWidth:"wide",formattingValues:Rte,defaultFormattingWidth:"wide"})};function xf(t){return(e,n={})=>{const s=n.width,r=s&&t.matchPatterns[s]||t.matchPatterns[t.defaultMatchWidth],i=e.match(r);if(!i)return null;const o=i[0],c=s&&t.parsePatterns[s]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(c)?Lte(c,h=>h.test(o)):Pte(c,h=>h.test(o));let f;f=t.valueCallback?t.valueCallback(u):u,f=n.valueCallback?n.valueCallback(f):f;const m=e.slice(o.length);return{value:f,rest:m}}}function Pte(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function Lte(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function Fte(t){return(e,n={})=>{const s=e.match(t.matchPattern);if(!s)return null;const r=s[0],i=e.match(t.parsePattern);if(!i)return null;let o=t.valueCallback?t.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const c=e.slice(r.length);return{value:o,rest:c}}}const Bte=/^(\d+)(th|st|nd|rd)?/i,Ite=/\d+/i,Vte={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},zte={any:[/^b/i,/^(a|c)/i]},$te={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Hte={any:[/1/i,/2/i,/3/i,/4/i]},Ute={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Wte={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Yte={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},qte={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Gte={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Kte={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},I4={ordinalNumber:Fte({matchPattern:Bte,parsePattern:Ite,valueCallback:t=>parseInt(t,10)}),era:xf({matchPatterns:Vte,defaultMatchWidth:"wide",parsePatterns:zte,defaultParseWidth:"any"}),quarter:xf({matchPatterns:$te,defaultMatchWidth:"wide",parsePatterns:Hte,defaultParseWidth:"any",valueCallback:t=>t+1}),month:xf({matchPatterns:Ute,defaultMatchWidth:"wide",parsePatterns:Wte,defaultParseWidth:"any"}),day:xf({matchPatterns:Yte,defaultMatchWidth:"wide",parsePatterns:qte,defaultParseWidth:"any"}),dayPeriod:xf({matchPatterns:Gte,defaultMatchWidth:"any",parsePatterns:Kte,defaultParseWidth:"any"})},V4={code:"en-US",formatDistance:L4,formatLong:Cte,formatRelative:F4,localize:B4,match:I4,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Qte(t,e){const n=it(t,e?.in);return ku(n,im(n))+1}function fS(t,e){const n=it(t,e?.in),s=+Nu(n)-+cte(n);return Math.round(s/E4)+1}function hS(t,e){const n=it(t,e?.in),s=n.getFullYear(),r=ac(),i=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,o=mn(e?.in||t,0);o.setFullYear(s+1,0,i),o.setHours(0,0,0,0);const c=oa(o,e),u=mn(e?.in||t,0);u.setFullYear(s,0,i),u.setHours(0,0,0,0);const f=oa(u,e);return+n>=+c?s+1:+n>=+f?s:s-1}function Xte(t,e){const n=ac(),s=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,r=hS(t,e),i=mn(e?.in||t,0);return i.setFullYear(r,0,s),i.setHours(0,0,0,0),oa(i,e)}function z4(t,e){const n=it(t,e?.in),s=+oa(n,e)-+Xte(n,e);return Math.round(s/E4)+1}function fn(t,e){const n=t<0?"-":"",s=Math.abs(t).toString().padStart(e,"0");return n+s}const ho={y(t,e){const n=t.getFullYear(),s=n>0?n:1-n;return fn(e==="yy"?s%100:s,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):fn(n+1,2)},d(t,e){return fn(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return fn(t.getHours()%12||12,e.length)},H(t,e){return fn(t.getHours(),e.length)},m(t,e){return fn(t.getMinutes(),e.length)},s(t,e){return fn(t.getSeconds(),e.length)},S(t,e){const n=e.length,s=t.getMilliseconds(),r=Math.trunc(s*Math.pow(10,n-3));return fn(r,e.length)}},Xc={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},VM={G:function(t,e,n){const s=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(s,{width:"abbreviated"});case"GGGGG":return n.era(s,{width:"narrow"});case"GGGG":default:return n.era(s,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const s=t.getFullYear(),r=s>0?s:1-s;return n.ordinalNumber(r,{unit:"year"})}return ho.y(t,e)},Y:function(t,e,n,s){const r=hS(t,s),i=r>0?r:1-r;if(e==="YY"){const o=i%100;return fn(o,2)}return e==="Yo"?n.ordinalNumber(i,{unit:"year"}):fn(i,e.length)},R:function(t,e){const n=M4(t);return fn(n,e.length)},u:function(t,e){const n=t.getFullYear();return fn(n,e.length)},Q:function(t,e,n){const s=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(s);case"QQ":return fn(s,2);case"Qo":return n.ordinalNumber(s,{unit:"quarter"});case"QQQ":return n.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(s,{width:"wide",context:"formatting"})}},q:function(t,e,n){const s=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(s);case"qq":return fn(s,2);case"qo":return n.ordinalNumber(s,{unit:"quarter"});case"qqq":return n.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(s,{width:"wide",context:"standalone"})}},M:function(t,e,n){const s=t.getMonth();switch(e){case"M":case"MM":return ho.M(t,e);case"Mo":return n.ordinalNumber(s+1,{unit:"month"});case"MMM":return n.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(s,{width:"wide",context:"formatting"})}},L:function(t,e,n){const s=t.getMonth();switch(e){case"L":return String(s+1);case"LL":return fn(s+1,2);case"Lo":return n.ordinalNumber(s+1,{unit:"month"});case"LLL":return n.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(s,{width:"wide",context:"standalone"})}},w:function(t,e,n,s){const r=z4(t,s);return e==="wo"?n.ordinalNumber(r,{unit:"week"}):fn(r,e.length)},I:function(t,e,n){const s=fS(t);return e==="Io"?n.ordinalNumber(s,{unit:"week"}):fn(s,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):ho.d(t,e)},D:function(t,e,n){const s=Qte(t);return e==="Do"?n.ordinalNumber(s,{unit:"dayOfYear"}):fn(s,e.length)},E:function(t,e,n){const s=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(s,{width:"short",context:"formatting"});case"EEEE":default:return n.day(s,{width:"wide",context:"formatting"})}},e:function(t,e,n,s){const r=t.getDay(),i=(r-s.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return fn(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(r,{width:"short",context:"formatting"});case"eeee":default:return n.day(r,{width:"wide",context:"formatting"})}},c:function(t,e,n,s){const r=t.getDay(),i=(r-s.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return fn(i,e.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(r,{width:"narrow",context:"standalone"});case"cccccc":return n.day(r,{width:"short",context:"standalone"});case"cccc":default:return n.day(r,{width:"wide",context:"standalone"})}},i:function(t,e,n){const s=t.getDay(),r=s===0?7:s;switch(e){case"i":return String(r);case"ii":return fn(r,e.length);case"io":return n.ordinalNumber(r,{unit:"day"});case"iii":return n.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(s,{width:"short",context:"formatting"});case"iiii":default:return n.day(s,{width:"wide",context:"formatting"})}},a:function(t,e,n){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(t,e,n){const s=t.getHours();let r;switch(s===12?r=Xc.noon:s===0?r=Xc.midnight:r=s/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(t,e,n){const s=t.getHours();let r;switch(s>=17?r=Xc.evening:s>=12?r=Xc.afternoon:s>=4?r=Xc.morning:r=Xc.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let s=t.getHours()%12;return s===0&&(s=12),n.ordinalNumber(s,{unit:"hour"})}return ho.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):ho.H(t,e)},K:function(t,e,n){const s=t.getHours()%12;return e==="Ko"?n.ordinalNumber(s,{unit:"hour"}):fn(s,e.length)},k:function(t,e,n){let s=t.getHours();return s===0&&(s=24),e==="ko"?n.ordinalNumber(s,{unit:"hour"}):fn(s,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):ho.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):ho.s(t,e)},S:function(t,e){return ho.S(t,e)},X:function(t,e,n){const s=t.getTimezoneOffset();if(s===0)return"Z";switch(e){case"X":return $M(s);case"XXXX":case"XX":return Al(s);case"XXXXX":case"XXX":default:return Al(s,":")}},x:function(t,e,n){const s=t.getTimezoneOffset();switch(e){case"x":return $M(s);case"xxxx":case"xx":return Al(s);case"xxxxx":case"xxx":default:return Al(s,":")}},O:function(t,e,n){const s=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+zM(s,":");case"OOOO":default:return"GMT"+Al(s,":")}},z:function(t,e,n){const s=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+zM(s,":");case"zzzz":default:return"GMT"+Al(s,":")}},t:function(t,e,n){const s=Math.trunc(+t/1e3);return fn(s,e.length)},T:function(t,e,n){return fn(+t,e.length)}};function zM(t,e=""){const n=t>0?"-":"+",s=Math.abs(t),r=Math.trunc(s/60),i=s%60;return i===0?n+String(r):n+String(r)+e+fn(i,2)}function $M(t,e){return t%60===0?(t>0?"-":"+")+fn(Math.abs(t)/60,2):Al(t,e)}function Al(t,e=""){const n=t>0?"-":"+",s=Math.abs(t),r=fn(Math.trunc(s/60),2),i=fn(s%60,2);return n+r+e+i}const HM=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},$4=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Zte=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],s=n[1],r=n[2];if(!r)return HM(t,e);let i;switch(s){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",HM(s,e)).replace("{{time}}",$4(r,e))},EA={p:$4,P:Zte},Jte=/^D+$/,ene=/^Y+$/,tne=["D","DD","YY","YYYY"];function H4(t){return Jte.test(t)}function U4(t){return ene.test(t)}function TA(t,e,n){const s=nne(t,e,n);if(console.warn(s),tne.includes(t))throw new RangeError(s)}function nne(t,e,n){const s=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${s} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const sne=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,rne=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ane=/^'([^]*?)'?$/,ine=/''/g,one=/[a-zA-Z]/;function MA(t,e,n){const s=ac(),r=n?.locale??s.locale??V4,i=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,o=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??s.weekStartsOn??s.locale?.options?.weekStartsOn??0,c=it(t,n?.in);if(!Ch(c))throw new RangeError("Invalid time value");let u=e.match(rne).map(m=>{const h=m[0];if(h==="p"||h==="P"){const g=EA[h];return g(m,r.formatLong)}return m}).join("").match(sne).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const h=m[0];if(h==="'")return{isToken:!1,value:lne(m)};if(VM[h])return{isToken:!0,value:m};if(h.match(one))throw new RangeError("Format string contains an unescaped latin alphabet character `"+h+"`");return{isToken:!1,value:m}});r.localize.preprocessor&&(u=r.localize.preprocessor(c,u));const f={firstWeekContainsDate:i,weekStartsOn:o,locale:r};return u.map(m=>{if(!m.isToken)return m.value;const h=m.value;(!n?.useAdditionalWeekYearTokens&&U4(h)||!n?.useAdditionalDayOfYearTokens&&H4(h))&&TA(h,e,String(t));const g=VM[h[0]];return g(c,h,r.localize,f)}).join("")}function lne(t){const e=t.match(ane);return e?e[1].replace(ine,"'"):t}function UM(t,e){return it(t,e?.in).getDate()}function cne(t,e){return it(t,e?.in).getDay()}function une(t,e){const n=it(t,e?.in),s=n.getFullYear(),r=n.getMonth(),i=mn(n,0);return i.setFullYear(s,r+1,0),i.setHours(0,0,0,0),i.getDate()}function dne(){return Object.assign({},ac())}function Ni(t,e){return it(t,e?.in).getHours()}function fne(t,e){const n=it(t,e?.in).getDay();return n===0?7:n}function ki(t,e){return it(t,e?.in).getMinutes()}function Ts(t,e){return it(t,e?.in).getMonth()}function Co(t){return it(t).getSeconds()}function RA(t){return+it(t)}function It(t,e){return it(t,e?.in).getFullYear()}function Lo(t,e){return+it(t)>+it(e)}function Ta(t,e){return+it(t)<+it(e)}function hne(t,e){return+it(t)==+it(e)}function mne(t,e){const n=pne(e)?new e(0):mn(e,0);return n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),n}function pne(t){return typeof t=="function"&&t.prototype?.constructor===t}const gne=10;class W4{subPriority=0;validate(e,n){return!0}}class yne extends W4{constructor(e,n,s,r,i){super(),this.value=e,this.validateValue=n,this.setValue=s,this.priority=r,i&&(this.subPriority=i)}validate(e,n){return this.validateValue(e,this.value,n)}set(e,n,s){return this.setValue(e,n,this.value,s)}}class xne extends W4{priority=gne;subPriority=-1;constructor(e,n){super(),this.context=e||(s=>mn(n,s))}set(e,n){return n.timestampIsSet?e:mn(e,mne(e,this.context))}}class tn{run(e,n,s,r){const i=this.parse(e,n,s,r);return i?{setter:new yne(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}validate(e,n,s){return!0}}class bne extends tn{priority=140;parse(e,n,s){switch(n){case"G":case"GG":case"GGG":return s.era(e,{width:"abbreviated"})||s.era(e,{width:"narrow"});case"GGGGG":return s.era(e,{width:"narrow"});case"GGGG":default:return s.era(e,{width:"wide"})||s.era(e,{width:"abbreviated"})||s.era(e,{width:"narrow"})}}set(e,n,s){return n.era=s,e.setFullYear(s,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["R","u","t","T"]}const Un={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Da={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Wn(t,e){return t&&{value:e(t.value),rest:t.rest}}function En(t,e){const n=e.match(t);return n?{value:parseInt(n[0],10),rest:e.slice(n[0].length)}:null}function Ea(t,e){const n=e.match(t);if(!n)return null;if(n[0]==="Z")return{value:0,rest:e.slice(1)};const s=n[1]==="+"?1:-1,r=n[2]?parseInt(n[2],10):0,i=n[3]?parseInt(n[3],10):0,o=n[5]?parseInt(n[5],10):0;return{value:s*(r*rm+i*sm+o*ote),rest:e.slice(n[0].length)}}function Y4(t){return En(Un.anyDigitsSigned,t)}function Fn(t,e){switch(t){case 1:return En(Un.singleDigit,e);case 2:return En(Un.twoDigits,e);case 3:return En(Un.threeDigits,e);case 4:return En(Un.fourDigits,e);default:return En(new RegExp("^\\d{1,"+t+"}"),e)}}function vy(t,e){switch(t){case 1:return En(Un.singleDigitSigned,e);case 2:return En(Un.twoDigitsSigned,e);case 3:return En(Un.threeDigitsSigned,e);case 4:return En(Un.fourDigitsSigned,e);default:return En(new RegExp("^-?\\d{1,"+t+"}"),e)}}function mS(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function q4(t,e){const n=e>0,s=n?e:1-e;let r;if(s<=50)r=t||100;else{const i=s+50,o=Math.trunc(i/100)*100,c=t>=i%100;r=t+o-(c?100:0)}return n?r:1-r}function G4(t){return t%400===0||t%4===0&&t%100!==0}class vne extends tn{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(e,n,s){const r=i=>({year:i,isTwoDigitYear:n==="yy"});switch(n){case"y":return Wn(Fn(4,e),r);case"yo":return Wn(s.ordinalNumber(e,{unit:"year"}),r);default:return Wn(Fn(n.length,e),r)}}validate(e,n){return n.isTwoDigitYear||n.year>0}set(e,n,s){const r=e.getFullYear();if(s.isTwoDigitYear){const o=q4(s.year,r);return e.setFullYear(o,0,1),e.setHours(0,0,0,0),e}const i=!("era"in n)||n.era===1?s.year:1-s.year;return e.setFullYear(i,0,1),e.setHours(0,0,0,0),e}}class _ne extends tn{priority=130;parse(e,n,s){const r=i=>({year:i,isTwoDigitYear:n==="YY"});switch(n){case"Y":return Wn(Fn(4,e),r);case"Yo":return Wn(s.ordinalNumber(e,{unit:"year"}),r);default:return Wn(Fn(n.length,e),r)}}validate(e,n){return n.isTwoDigitYear||n.year>0}set(e,n,s,r){const i=hS(e,r);if(s.isTwoDigitYear){const c=q4(s.year,i);return e.setFullYear(c,0,r.firstWeekContainsDate),e.setHours(0,0,0,0),oa(e,r)}const o=!("era"in n)||n.era===1?s.year:1-s.year;return e.setFullYear(o,0,r.firstWeekContainsDate),e.setHours(0,0,0,0),oa(e,r)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}class Ane extends tn{priority=130;parse(e,n){return vy(n==="R"?4:n.length,e)}set(e,n,s){const r=mn(e,0);return r.setFullYear(s,0,4),r.setHours(0,0,0,0),Nu(r)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}class wne extends tn{priority=130;parse(e,n){return vy(n==="u"?4:n.length,e)}set(e,n,s){return e.setFullYear(s,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}class jne extends tn{priority=120;parse(e,n,s){switch(n){case"Q":case"QQ":return Fn(n.length,e);case"Qo":return s.ordinalNumber(e,{unit:"quarter"});case"QQQ":return s.quarter(e,{width:"abbreviated",context:"formatting"})||s.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return s.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(e,{width:"wide",context:"formatting"})||s.quarter(e,{width:"abbreviated",context:"formatting"})||s.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=1&&n<=4}set(e,n,s){return e.setMonth((s-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}class Sne extends tn{priority=120;parse(e,n,s){switch(n){case"q":case"qq":return Fn(n.length,e);case"qo":return s.ordinalNumber(e,{unit:"quarter"});case"qqq":return s.quarter(e,{width:"abbreviated",context:"standalone"})||s.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return s.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(e,{width:"wide",context:"standalone"})||s.quarter(e,{width:"abbreviated",context:"standalone"})||s.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,n){return n>=1&&n<=4}set(e,n,s){return e.setMonth((s-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}class Cne extends tn{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(e,n,s){const r=i=>i-1;switch(n){case"M":return Wn(En(Un.month,e),r);case"MM":return Wn(Fn(2,e),r);case"Mo":return Wn(s.ordinalNumber(e,{unit:"month"}),r);case"MMM":return s.month(e,{width:"abbreviated",context:"formatting"})||s.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return s.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(e,{width:"wide",context:"formatting"})||s.month(e,{width:"abbreviated",context:"formatting"})||s.month(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=0&&n<=11}set(e,n,s){return e.setMonth(s,1),e.setHours(0,0,0,0),e}}class Nne extends tn{priority=110;parse(e,n,s){const r=i=>i-1;switch(n){case"L":return Wn(En(Un.month,e),r);case"LL":return Wn(Fn(2,e),r);case"Lo":return Wn(s.ordinalNumber(e,{unit:"month"}),r);case"LLL":return s.month(e,{width:"abbreviated",context:"standalone"})||s.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return s.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(e,{width:"wide",context:"standalone"})||s.month(e,{width:"abbreviated",context:"standalone"})||s.month(e,{width:"narrow",context:"standalone"})}}validate(e,n){return n>=0&&n<=11}set(e,n,s){return e.setMonth(s,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}function kne(t,e,n){const s=it(t,n?.in),r=z4(s,n)-e;return s.setDate(s.getDate()-r*7),it(s,n?.in)}class Dne extends tn{priority=100;parse(e,n,s){switch(n){case"w":return En(Un.week,e);case"wo":return s.ordinalNumber(e,{unit:"week"});default:return Fn(n.length,e)}}validate(e,n){return n>=1&&n<=53}set(e,n,s,r){return oa(kne(e,s,r),r)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}function Ene(t,e,n){const s=it(t,n?.in),r=fS(s,n)-e;return s.setDate(s.getDate()-r*7),s}class Tne extends tn{priority=100;parse(e,n,s){switch(n){case"I":return En(Un.week,e);case"Io":return s.ordinalNumber(e,{unit:"week"});default:return Fn(n.length,e)}}validate(e,n){return n>=1&&n<=53}set(e,n,s){return Nu(Ene(e,s))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}const Mne=[31,28,31,30,31,30,31,31,30,31,30,31],Rne=[31,29,31,30,31,30,31,31,30,31,30,31];class One extends tn{priority=90;subPriority=1;parse(e,n,s){switch(n){case"d":return En(Un.date,e);case"do":return s.ordinalNumber(e,{unit:"date"});default:return Fn(n.length,e)}}validate(e,n){const s=e.getFullYear(),r=G4(s),i=e.getMonth();return r?n>=1&&n<=Rne[i]:n>=1&&n<=Mne[i]}set(e,n,s){return e.setDate(s),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}class Pne extends tn{priority=90;subpriority=1;parse(e,n,s){switch(n){case"D":case"DD":return En(Un.dayOfYear,e);case"Do":return s.ordinalNumber(e,{unit:"date"});default:return Fn(n.length,e)}}validate(e,n){const s=e.getFullYear();return G4(s)?n>=1&&n<=366:n>=1&&n<=365}set(e,n,s){return e.setMonth(0,s),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}function pS(t,e,n){const s=ac(),r=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??s.weekStartsOn??s.locale?.options?.weekStartsOn??0,i=it(t,n?.in),o=i.getDay(),u=(e%7+7)%7,f=7-r,m=e<0||e>6?e-(o+f)%7:(u+f)%7-(o+f)%7;return $r(i,m,n)}class Lne extends tn{priority=90;parse(e,n,s){switch(n){case"E":case"EE":case"EEE":return s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return s.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return s.day(e,{width:"wide",context:"formatting"})||s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=0&&n<=6}set(e,n,s,r){return e=pS(e,s,r),e.setHours(0,0,0,0),e}incompatibleTokens=["D","i","e","c","t","T"]}class Fne extends tn{priority=90;parse(e,n,s,r){const i=o=>{const c=Math.floor((o-1)/7)*7;return(o+r.weekStartsOn+6)%7+c};switch(n){case"e":case"ee":return Wn(Fn(n.length,e),i);case"eo":return Wn(s.ordinalNumber(e,{unit:"day"}),i);case"eee":return s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"});case"eeeee":return s.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return s.day(e,{width:"wide",context:"formatting"})||s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=0&&n<=6}set(e,n,s,r){return e=pS(e,s,r),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}class Bne extends tn{priority=90;parse(e,n,s,r){const i=o=>{const c=Math.floor((o-1)/7)*7;return(o+r.weekStartsOn+6)%7+c};switch(n){case"c":case"cc":return Wn(Fn(n.length,e),i);case"co":return Wn(s.ordinalNumber(e,{unit:"day"}),i);case"ccc":return s.day(e,{width:"abbreviated",context:"standalone"})||s.day(e,{width:"short",context:"standalone"})||s.day(e,{width:"narrow",context:"standalone"});case"ccccc":return s.day(e,{width:"narrow",context:"standalone"});case"cccccc":return s.day(e,{width:"short",context:"standalone"})||s.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return s.day(e,{width:"wide",context:"standalone"})||s.day(e,{width:"abbreviated",context:"standalone"})||s.day(e,{width:"short",context:"standalone"})||s.day(e,{width:"narrow",context:"standalone"})}}validate(e,n){return n>=0&&n<=6}set(e,n,s,r){return e=pS(e,s,r),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}function Ine(t,e,n){const s=it(t,n?.in),r=fne(s,n),i=e-r;return $r(s,i,n)}class Vne extends tn{priority=90;parse(e,n,s){const r=i=>i===0?7:i;switch(n){case"i":case"ii":return Fn(n.length,e);case"io":return s.ordinalNumber(e,{unit:"day"});case"iii":return Wn(s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"}),r);case"iiiii":return Wn(s.day(e,{width:"narrow",context:"formatting"}),r);case"iiiiii":return Wn(s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"}),r);case"iiii":default:return Wn(s.day(e,{width:"wide",context:"formatting"})||s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"}),r)}}validate(e,n){return n>=1&&n<=7}set(e,n,s){return e=Ine(e,s),e.setHours(0,0,0,0),e}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}class zne extends tn{priority=80;parse(e,n,s){switch(n){case"a":case"aa":case"aaa":return s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return s.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(e,{width:"wide",context:"formatting"})||s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,n,s){return e.setHours(mS(s),0,0,0),e}incompatibleTokens=["b","B","H","k","t","T"]}class $ne extends tn{priority=80;parse(e,n,s){switch(n){case"b":case"bb":case"bbb":return s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return s.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(e,{width:"wide",context:"formatting"})||s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,n,s){return e.setHours(mS(s),0,0,0),e}incompatibleTokens=["a","B","H","k","t","T"]}class Hne extends tn{priority=80;parse(e,n,s){switch(n){case"B":case"BB":case"BBB":return s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return s.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(e,{width:"wide",context:"formatting"})||s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,n,s){return e.setHours(mS(s),0,0,0),e}incompatibleTokens=["a","b","t","T"]}class Une extends tn{priority=70;parse(e,n,s){switch(n){case"h":return En(Un.hour12h,e);case"ho":return s.ordinalNumber(e,{unit:"hour"});default:return Fn(n.length,e)}}validate(e,n){return n>=1&&n<=12}set(e,n,s){const r=e.getHours()>=12;return r&&s<12?e.setHours(s+12,0,0,0):!r&&s===12?e.setHours(0,0,0,0):e.setHours(s,0,0,0),e}incompatibleTokens=["H","K","k","t","T"]}class Wne extends tn{priority=70;parse(e,n,s){switch(n){case"H":return En(Un.hour23h,e);case"Ho":return s.ordinalNumber(e,{unit:"hour"});default:return Fn(n.length,e)}}validate(e,n){return n>=0&&n<=23}set(e,n,s){return e.setHours(s,0,0,0),e}incompatibleTokens=["a","b","h","K","k","t","T"]}class Yne extends tn{priority=70;parse(e,n,s){switch(n){case"K":return En(Un.hour11h,e);case"Ko":return s.ordinalNumber(e,{unit:"hour"});default:return Fn(n.length,e)}}validate(e,n){return n>=0&&n<=11}set(e,n,s){return e.getHours()>=12&&s<12?e.setHours(s+12,0,0,0):e.setHours(s,0,0,0),e}incompatibleTokens=["h","H","k","t","T"]}class qne extends tn{priority=70;parse(e,n,s){switch(n){case"k":return En(Un.hour24h,e);case"ko":return s.ordinalNumber(e,{unit:"hour"});default:return Fn(n.length,e)}}validate(e,n){return n>=1&&n<=24}set(e,n,s){const r=s<=24?s%24:s;return e.setHours(r,0,0,0),e}incompatibleTokens=["a","b","h","H","K","t","T"]}class Gne extends tn{priority=60;parse(e,n,s){switch(n){case"m":return En(Un.minute,e);case"mo":return s.ordinalNumber(e,{unit:"minute"});default:return Fn(n.length,e)}}validate(e,n){return n>=0&&n<=59}set(e,n,s){return e.setMinutes(s,0,0),e}incompatibleTokens=["t","T"]}class Kne extends tn{priority=50;parse(e,n,s){switch(n){case"s":return En(Un.second,e);case"so":return s.ordinalNumber(e,{unit:"second"});default:return Fn(n.length,e)}}validate(e,n){return n>=0&&n<=59}set(e,n,s){return e.setSeconds(s,0),e}incompatibleTokens=["t","T"]}class Qne extends tn{priority=30;parse(e,n){const s=r=>Math.trunc(r*Math.pow(10,-n.length+3));return Wn(Fn(n.length,e),s)}set(e,n,s){return e.setMilliseconds(s),e}incompatibleTokens=["t","T"]}class Xne extends tn{priority=10;parse(e,n){switch(n){case"X":return Ea(Da.basicOptionalMinutes,e);case"XX":return Ea(Da.basic,e);case"XXXX":return Ea(Da.basicOptionalSeconds,e);case"XXXXX":return Ea(Da.extendedOptionalSeconds,e);case"XXX":default:return Ea(Da.extended,e)}}set(e,n,s){return n.timestampIsSet?e:mn(e,e.getTime()-gy(e)-s)}incompatibleTokens=["t","T","x"]}class Zne extends tn{priority=10;parse(e,n){switch(n){case"x":return Ea(Da.basicOptionalMinutes,e);case"xx":return Ea(Da.basic,e);case"xxxx":return Ea(Da.basicOptionalSeconds,e);case"xxxxx":return Ea(Da.extendedOptionalSeconds,e);case"xxx":default:return Ea(Da.extended,e)}}set(e,n,s){return n.timestampIsSet?e:mn(e,e.getTime()-gy(e)-s)}incompatibleTokens=["t","T","X"]}class Jne extends tn{priority=40;parse(e){return Y4(e)}set(e,n,s){return[mn(e,s*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"}class ese extends tn{priority=20;parse(e){return Y4(e)}set(e,n,s){return[mn(e,s),{timestampIsSet:!0}]}incompatibleTokens="*"}const tse={G:new bne,y:new vne,Y:new _ne,R:new Ane,u:new wne,Q:new jne,q:new Sne,M:new Cne,L:new Nne,w:new Dne,I:new Tne,d:new One,D:new Pne,E:new Lne,e:new Fne,c:new Bne,i:new Vne,a:new zne,b:new $ne,B:new Hne,h:new Une,H:new Wne,K:new Yne,k:new qne,m:new Gne,s:new Kne,S:new Qne,X:new Xne,x:new Zne,t:new Jne,T:new ese},nse=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,sse=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,rse=/^'([^]*?)'?$/,ase=/''/g,ise=/\S/,ose=/[a-zA-Z]/;function K4(t,e,n,s){const r=()=>mn(s?.in||n,NaN),i=dne(),o=s?.locale??i.locale??V4,c=s?.firstWeekContainsDate??s?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,u=s?.weekStartsOn??s?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0;if(!e)return t?r():it(n,s?.in);const f={firstWeekContainsDate:c,weekStartsOn:u,locale:o},m=[new xne(s?.in,n)],h=e.match(sse).map(_=>{const j=_[0];if(j in EA){const C=EA[j];return C(_,o.formatLong)}return _}).join("").match(nse),g=[];for(let _ of h){!s?.useAdditionalWeekYearTokens&&U4(_)&&TA(_,e,t),!s?.useAdditionalDayOfYearTokens&&H4(_)&&TA(_,e,t);const j=_[0],C=tse[j];if(C){const{incompatibleTokens:k}=C;if(Array.isArray(k)){const N=g.find(L=>k.includes(L.token)||L.token===j);if(N)throw new RangeError(`The format string mustn't contain \`${N.fullToken}\` and \`${_}\` at the same time`)}else if(C.incompatibleTokens==="*"&&g.length>0)throw new RangeError(`The format string mustn't contain \`${_}\` and any other token at the same time`);g.push({token:j,fullToken:_});const E=C.run(t,_,o.match,f);if(!E)return r();m.push(E.setter),t=E.rest}else{if(j.match(ose))throw new RangeError("Format string contains an unescaped latin alphabet character `"+j+"`");if(_==="''"?_="'":j==="'"&&(_=lse(_)),t.indexOf(_)===0)t=t.slice(_.length);else return r()}}if(t.length>0&&ise.test(t))return r();const x=m.map(_=>_.priority).sort((_,j)=>j-_).filter((_,j,C)=>C.indexOf(_)===j).map(_=>m.filter(j=>j.priority===_).sort((j,C)=>C.subPriority-j.subPriority)).map(_=>_[0]);let b=it(n,s?.in);if(isNaN(+b))return r();const A={};for(const _ of x){if(!_.validate(b,f))return r();const j=_.set(b,A,f);Array.isArray(j)?(b=j[0],Object.assign(A,j[1])):b=j}return b}function lse(t){return t.match(rse)[1].replace(ase,"'")}function cse(t,e){const n=it(t,e?.in);return n.setMinutes(0,0,0),n}function use(t,e){const n=it(t,e?.in);return n.setSeconds(0,0),n}function dse(t,e,n){const[s,r]=Gr(n?.in,t,e);return s.getFullYear()===r.getFullYear()&&s.getMonth()===r.getMonth()}function fse(t,e,n){const[s,r]=Gr(n?.in,t,e);return+by(s)==+by(r)}function hse(t,e){const n=it(t,e?.in);return n.setMilliseconds(0),n}function mse(t,e,n){const[s,r]=Gr(n?.in,t,e);return s.getFullYear()===r.getFullYear()}function Dh(t,e,n){const s=+it(t,n?.in),[r,i]=[+it(e.start,n?.in),+it(e.end,n?.in)].sort((o,c)=>o-c);return s>=r&&s<=i}function pse(t,e,n){return $r(t,-1,n)}function Q4(t,e){const n=()=>mn(e?.in,NaN),s=e?.additionalDigits??2,r=bse(t);let i;if(r.date){const f=vse(r.date,s);i=_se(f.restDateString,f.year)}if(!i||isNaN(+i))return n();const o=+i;let c=0,u;if(r.time&&(c=Ase(r.time),isNaN(c)))return n();if(r.timezone){if(u=wse(r.timezone),isNaN(u))return n()}else{const f=new Date(o+c),m=it(0,e?.in);return m.setFullYear(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate()),m.setHours(f.getUTCHours(),f.getUTCMinutes(),f.getUTCSeconds(),f.getUTCMilliseconds()),m}return it(o+c+u,e?.in)}const Zp={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},gse=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,yse=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,xse=/^([+-])(\d{2})(?::?(\d{2}))?$/;function bse(t){const e={},n=t.split(Zp.dateTimeDelimiter);let s;if(n.length>2)return e;if(/:/.test(n[0])?s=n[0]:(e.date=n[0],s=n[1],Zp.timeZoneDelimiter.test(e.date)&&(e.date=t.split(Zp.timeZoneDelimiter)[0],s=t.substr(e.date.length,t.length))),s){const r=Zp.timezone.exec(s);r?(e.time=s.replace(r[1],""),e.timezone=r[1]):e.time=s}return e}function vse(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),s=t.match(n);if(!s)return{year:NaN,restDateString:""};const r=s[1]?parseInt(s[1]):null,i=s[2]?parseInt(s[2]):null;return{year:i===null?r:i*100,restDateString:t.slice((s[1]||s[2]).length)}}function _se(t,e){if(e===null)return new Date(NaN);const n=t.match(gse);if(!n)return new Date(NaN);const s=!!n[4],r=bf(n[1]),i=bf(n[2])-1,o=bf(n[3]),c=bf(n[4]),u=bf(n[5])-1;if(s)return kse(e,c,u)?jse(e,c,u):new Date(NaN);{const f=new Date(0);return!Cse(e,i,o)||!Nse(e,r)?new Date(NaN):(f.setUTCFullYear(e,i,Math.max(r,o)),f)}}function bf(t){return t?parseInt(t):1}function Ase(t){const e=t.match(yse);if(!e)return NaN;const n=a_(e[1]),s=a_(e[2]),r=a_(e[3]);return Dse(n,s,r)?n*rm+s*sm+r*1e3:NaN}function a_(t){return t&&parseFloat(t.replace(",","."))||0}function wse(t){if(t==="Z")return 0;const e=t.match(xse);if(!e)return 0;const n=e[1]==="+"?-1:1,s=parseInt(e[2]),r=e[3]&&parseInt(e[3])||0;return Ese(s,r)?n*(s*rm+r*sm):NaN}function jse(t,e,n){const s=new Date(0);s.setUTCFullYear(t,0,4);const r=s.getUTCDay()||7,i=(e-1)*7+n+1-r;return s.setUTCDate(s.getUTCDate()+i),s}const Sse=[31,null,31,30,31,30,31,31,30,31,30,31];function X4(t){return t%400===0||t%4===0&&t%100!==0}function Cse(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(Sse[e]||(X4(t)?29:28))}function Nse(t,e){return e>=1&&e<=(X4(t)?366:365)}function kse(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function Dse(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function Ese(t,e){return e>=0&&e<=59}function Lr(t,e,n){const s=it(t,n?.in),r=s.getFullYear(),i=s.getDate(),o=mn(t,0);o.setFullYear(r,e,15),o.setHours(0,0,0,0);const c=une(o);return s.setMonth(e,Math.min(i,c)),s}function Rg(t,e,n){const s=it(t,n?.in);return s.setHours(e),s}function Og(t,e,n){const s=it(t,n?.in);return s.setMinutes(e),s}function nu(t,e,n){const s=it(t,n?.in),r=Math.trunc(s.getMonth()/3)+1,i=e-r;return Lr(s,s.getMonth()+i*3)}function Pg(t,e,n){const s=it(t,n?.in);return s.setSeconds(e),s}function Sa(t,e,n){const s=it(t,n?.in);return isNaN(+s)?mn(t,NaN):(s.setFullYear(e),s)}function $l(t,e,n){return Yr(t,-e,n)}function Z4(t,e,n){return Ax(t,-1,n)}function WM(t,e,n){return Sh(t,-1,n)}function Du(t,e,n){return za(t,-e,n)}/*!
 * chartjs-adapter-date-fns v3.0.0
 * https://www.chartjs.org
 * (c) 2022 chartjs-adapter-date-fns Contributors
 * Released under the MIT license
 */const Tse={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};i4._date.override({_id:"date-fns",formats:function(){return Tse},parse:function(t,e){if(t===null||typeof t>"u")return null;const n=typeof t;return n==="number"||t instanceof Date?t=it(t):n==="string"&&(typeof e=="string"?t=K4(t,e,new Date,this.options):t=Q4(t,this.options)),Ch(t)?t.getTime():null},format:function(t,e){return MA(t,e,this.options)},add:function(t,e,n){switch(n){case"millisecond":return oS(t,e);case"second":return R4(t,e);case"minute":return yy(t,e);case"hour":return T4(t,e);case"day":return $r(t,e);case"week":return Sh(t,e);case"month":return Yr(t,e);case"quarter":return Ax(t,e);case"year":return za(t,e);default:return t}},diff:function(t,e,n){switch(n){case"millisecond":return cS(t,e);case"second":return pte(t,e);case"minute":return fte(t,e);case"hour":return dte(t,e);case"day":return lS(t,e);case"week":return gte(t,e);case"month":return O4(t,e);case"quarter":return mte(t,e);case"year":return yte(t,e);default:return 0}},startOf:function(t,e,n){switch(e){case"second":return hse(t);case"minute":return use(t);case"hour":return cse(t);case"day":return Po(t);case"week":return oa(t);case"isoWeek":return oa(t,{weekStartsOn:+n});case"month":return uS(t);case"quarter":return by(t);case"year":return im(t);default:return t}},endOf:function(t,e){switch(e){case"second":return _te(t);case"minute":return bte(t);case"hour":return xte(t);case"day":return wx(t);case"week":return P4(t);case"month":return jx(t);case"quarter":return vte(t);case"year":return dS(t);default:return t}}});zs.register(Yo,qo,$i,fa,Uo,Wo,Ho,Oo);function Mse({projectId:t}){const[e,n]=v.useState(null),{showNotification:s}=Os(),[r,i]=v.useState([]),[o,c]=v.useState(!0),[u,f]=v.useState([]),[m,h]=v.useState(!0),[g,x]=v.useState(null),[b,A]=v.useState(1),[_,j]=v.useState("upload"),[C,k]=v.useState(!1);v.useEffect(()=>{c(!0),Re.get(`${Ce}/api/projects/${t}/energy-data`).then(I=>i(I.data)).catch(I=>console.error("Fetch existing data error:",I)).finally(()=>c(!1))},[t]),v.useEffect(()=>{h(!0),Re.get(`${Ce}/api/load_profiles`).then(I=>f(I.data)).catch(I=>console.error("Fetch profiles error:",I)).finally(()=>h(!1))},[]);const E=I=>{if(I.preventDefault(),!e){s("Please upload a file.","danger");return}k(!0);const $=new FormData;$.append("file",e),$.append("project_id",t),Re.post(`${Ce}/api/projects/${t}/energy-data`,$,{headers:{"Content-Type":"multipart/form-data"}}).then(H=>{s(H.data.message,"success"),n(null),document.getElementById("energyFileInput").value=null,L()}).catch(H=>{console.error("Upload error:",H),s("Failed to upload: "+(H.response?.data?.error||H.message),"danger")}).finally(()=>k(!1))},N=()=>{if(!g){s("Please select a profile first.","danger");return}k(!0),Re.post(`${Ce}/api/projects/${t}/use-profile`,{profile_id:Number(g),scaler:Number(b,1)}).then(I=>{s("Profile data applied successfully!","success"),L()}).catch(I=>{console.error("Profile selection error:",I),s("Failed to apply profile: "+(I.response?.data?.error||I.message),"danger")}).finally(()=>k(!1))},L=()=>{c(!0),Re.get(`${Ce}/api/projects/${t}/energy-data`).then(I=>i(I.data)).catch(I=>console.error("Fetch existing data error:",I)).finally(()=>c(!1))},M=(I,$=1)=>{if(!I||I.length===0)return{labels:[],datasets:[]};const H=[...I].sort((R,P)=>new Date(R.timestamp||R.Timestamp)-new Date(P.timestamp||P.Timestamp)),V=H.slice(0,Math.min(336,H.length)),G=V.map(R=>new Date(R.timestamp||R.Timestamp)),U=V.map(R=>(R.demand_kw||R.Demand_kW)*$);return{labels:G,datasets:[{label:"Scaled Demand (kW)",data:U,borderColor:"rgb(75, 192, 192)",backgroundColor:"rgba(75, 192, 192, 0.1)",tension:.2,pointRadius:0,borderWidth:1.5}]}},T={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!1},tooltip:{enabled:!0,mode:"index",intersect:!1},datalabels:{display:!1}},scales:{x:{type:"time",time:{unit:"day",tooltipFormat:"MMM d, HH:mm",displayFormats:{day:"MMM d"}},ticks:{maxTicksLimit:7,autoSkip:!0},grid:{display:!1}},y:{beginAtZero:!0,ticks:{maxTicksLimit:5}}}},O=u.find(I=>I.id===g)||null;return a.jsxs("div",{children:[a.jsx("h4",{className:"mb-4",children:"Energy Data Management"}),a.jsxs(ZL,{activeKey:_,onSelect:I=>j(I),className:"mb-4",children:[a.jsx(KD,{eventKey:"upload",title:"Upload File",children:a.jsx(me,{className:"shadow-sm mb-4",children:a.jsxs(me.Body,{children:[a.jsx("h5",{className:"mb-3",children:"Upload Energy Data File"}),a.jsx("p",{className:"text-muted mb-3",children:'Upload a CSV or Excel file with energy consumption data. The file should contain two columns: "Timestamp" and "Demand_kW".'}),a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{htmlFor:"energyFileInput",children:"Select Energy Data File"}),a.jsx(z.Control,{type:"file",id:"energyFileInput",accept:".xlsx,.xls,.csv",onChange:I=>n(I.target.files[0])}),a.jsx(z.Text,{className:"text-muted",children:"Accepts CSV, XLS, and XLSX files."})]}),a.jsx(Fe,{variant:"primary",onClick:E,disabled:!e||C,children:C?a.jsxs(a.Fragment,{children:[a.jsx(Ot,{size:"sm",className:"me-2"})," Uploading..."]}):a.jsx(a.Fragment,{children:"Upload File"})})]})})}),a.jsx(KD,{eventKey:"profiles",title:"Use Existing Profile",children:a.jsx(me,{className:"shadow-sm mb-4",children:a.jsxs(me.Body,{children:[a.jsx("h5",{className:"mb-3",children:"Select Existing Load Profile"}),a.jsx("p",{className:"text-muted mb-3",children:"Choose from available load profiles and scale them to match your project's consumption."}),m?a.jsxs("div",{className:"text-center py-4",children:[a.jsx(Ot,{animation:"border",variant:"primary"}),a.jsx("p",{className:"mt-2",children:"Loading profiles..."})]}):u.length===0?a.jsx(kt,{variant:"info",children:"No profiles available. Please add profiles in the Profile Manager."}):a.jsxs(a.Fragment,{children:[a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{children:"Select Profile"}),a.jsxs(z.Select,{value:g||"",onChange:I=>x(I.target.value?parseInt(I.target.value):null),children:[a.jsx("option",{value:"",children:"-- Select a profile --"}),u.map(I=>a.jsxs("option",{value:I.id,children:[I.name," - ",I.description||I.profile_type]},I.id))]})]}),g&&a.jsxs(a.Fragment,{children:[(O?.monthly_avg_kwh_original||O?.max_peak_demand_kw)&&a.jsxs("div",{className:"mb-3 p-3 bg-light rounded",children:[a.jsx("h6",{className:"mb-2",children:"Original Profile Characteristics:"}),a.jsxs("div",{className:"d-flex flex-wrap gap-2",children:[O?.monthly_avg_kwh_original&&a.jsxs(tt,{bg:"warning",className:"text-dark",children:[a.jsx("i",{className:"bi bi-calendar3 me-1"}),Math.round(O.monthly_avg_kwh_original).toLocaleString()," kWh/month (original)"]}),O?.max_peak_demand_kw&&a.jsxs(tt,{bg:"danger",children:[a.jsx("i",{className:"bi bi-lightning-fill me-1"}),O.max_peak_demand_kw.toFixed(2)," kW peak demand"]})]})]}),a.jsxs(nt,{className:"mb-3 align-items-center",children:[a.jsx(ge,{md:6,children:a.jsxs(z.Group,{children:[a.jsx(z.Label,{children:"Scale Factor"}),a.jsx(z.Control,{type:"number",value:b,onChange:I=>A(Math.max(.01,parseFloat(I.target.value)||1)),step:"0.01",min:"0.01"}),a.jsx(z.Text,{className:"text-muted",children:"Adjust to match your target consumption"})]})}),a.jsx(ge,{md:6,children:a.jsxs("div",{className:"d-flex flex-column align-items-center p-2 bg-light rounded",children:[a.jsx("div",{className:"text-center mb-1",children:a.jsx("small",{children:"Monthly Consumption:"})}),a.jsxs("div",{className:"fs-5 fw-bold text-primary",children:[Math.round((O?.annual_kwh||12)*b/12)," kWh/month"]})]})})]}),O?.profile_data&&a.jsxs("div",{className:"mb-3",style:{height:"200px"},children:[a.jsx("p",{className:"mb-2 small",children:"Profile Preview (1 week):"}),a.jsx(Rs,{data:M(O.profile_data,b),options:T})]})]}),a.jsx(Fe,{variant:"primary",onClick:N,disabled:!g||C,className:"mt-2",children:C?a.jsxs(a.Fragment,{children:[a.jsx(Ot,{size:"sm",className:"me-2"})," Applying..."]}):a.jsx(a.Fragment,{children:"Apply Profile"})})]})]})})})]}),a.jsxs(me,{className:"shadow-sm",children:[a.jsx(me.Header,{children:a.jsx("h5",{className:"mb-0",children:"Current Energy Data"})}),a.jsx(me.Body,{children:o?a.jsxs("div",{className:"text-center py-3",children:[a.jsx(Ot,{animation:"border",size:"sm"}),a.jsx("p",{className:"mt-2",children:"Loading data..."})]}):r.length>0?a.jsxs(a.Fragment,{children:[a.jsxs("p",{className:"mb-3",children:[a.jsx("strong",{children:r.length})," data points available"]}),a.jsx("div",{style:{height:"200px"},className:"mb-3",children:a.jsx(Rs,{data:M(r),options:T})}),a.jsxs("table",{className:"table table-sm table-striped",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Timestamp"}),a.jsx("th",{children:"Demand (kW)"})]})}),a.jsxs("tbody",{children:[r.slice(0,5).map((I,$)=>{const H=new Date(I.timestamp),V=isNaN(H.getTime())?I.timestamp:H.toLocaleString();return a.jsxs("tr",{children:[a.jsx("td",{children:V}),a.jsx("td",{children:I.demand_kw})]},$)}),r.length>5&&a.jsx("tr",{children:a.jsx("td",{colSpan:"2",className:"text-center text-muted",children:a.jsxs("em",{children:["+ ",r.length-5," more data points"]})})})]})]}),a.jsx("div",{className:"text-end mt-3",children:a.jsxs(Fe,{variant:"outline-danger",size:"sm",onClick:()=>{window.confirm("Are you sure you want to delete all energy data for this project?")&&Re.delete(`${Ce}/api/projects/${t}/energy-data`).then(()=>{s("Energy data deleted successfully","success"),L()}).catch(I=>{console.error("Delete error:",I),s("Failed to delete energy data","danger")})},children:[a.jsx("i",{className:"bi bi-trash me-1"})," Delete All Data"]})})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"bi bi-exclamation-circle fs-1 text-muted"}),a.jsx("p",{className:"mt-3",children:"No energy data available for this project yet."}),a.jsx("p",{className:"text-muted",children:"Upload a file or select a profile to get started."})]})})]})]})}function J4(t){var e,n,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=J4(t[e]))&&(s&&(s+=" "),s+=n)}else for(n in t)t[n]&&(s&&(s+=" "),s+=n);return s}function _s(){for(var t,e,n=0,s="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=J4(t))&&(s&&(s+=" "),s+=e);return s}function Sx(){return typeof window<"u"}function nd(t){return eB(t)?(t.nodeName||"").toLowerCase():"#document"}function xr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Ka(t){var e;return(e=(eB(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function eB(t){return Sx()?t instanceof Node||t instanceof xr(t).Node:!1}function Vs(t){return Sx()?t instanceof Element||t instanceof xr(t).Element:!1}function qa(t){return Sx()?t instanceof HTMLElement||t instanceof xr(t).HTMLElement:!1}function YM(t){return!Sx()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof xr(t).ShadowRoot}const Rse=new Set(["inline","contents"]);function om(t){const{overflow:e,overflowX:n,overflowY:s,display:r}=qr(t);return/auto|scroll|overlay|hidden|clip/.test(e+s+n)&&!Rse.has(r)}const Ose=new Set(["table","td","th"]);function Pse(t){return Ose.has(nd(t))}const Lse=[":popover-open",":modal"];function Cx(t){return Lse.some(e=>{try{return t.matches(e)}catch{return!1}})}const Fse=["transform","translate","scale","rotate","perspective"],Bse=["transform","translate","scale","rotate","perspective","filter"],Ise=["paint","layout","strict","content"];function gS(t){const e=yS(),n=Vs(t)?qr(t):t;return Fse.some(s=>n[s]?n[s]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||Bse.some(s=>(n.willChange||"").includes(s))||Ise.some(s=>(n.contain||"").includes(s))}function Vse(t){let e=Fo(t);for(;qa(e)&&!Eu(e);){if(gS(e))return e;if(Cx(e))return null;e=Fo(e)}return null}function yS(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const zse=new Set(["html","body","#document"]);function Eu(t){return zse.has(nd(t))}function qr(t){return xr(t).getComputedStyle(t)}function Nx(t){return Vs(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Fo(t){if(nd(t)==="html")return t;const e=t.assignedSlot||t.parentNode||YM(t)&&t.host||Ka(t);return YM(e)?e.host:e}function tB(t){const e=Fo(t);return Eu(e)?t.ownerDocument?t.ownerDocument.body:t.body:qa(e)&&om(e)?e:tB(e)}function Eh(t,e,n){var s;e===void 0&&(e=[]),n===void 0&&(n=!0);const r=tB(t),i=r===((s=t.ownerDocument)==null?void 0:s.body),o=xr(r);if(i){const c=OA(o);return e.concat(o,o.visualViewport||[],om(r)?r:[],c&&n?Eh(c):[])}return e.concat(r,Eh(r,[],n))}function OA(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}const Tu=Math.min,Hl=Math.max,_y=Math.round,Jp=Math.floor,$a=t=>({x:t,y:t}),$se={left:"right",right:"left",bottom:"top",top:"bottom"},Hse={start:"end",end:"start"};function Use(t,e,n){return Hl(t,Tu(e,n))}function kx(t,e){return typeof t=="function"?t(e):t}function Mu(t){return t.split("-")[0]}function lm(t){return t.split("-")[1]}function Wse(t){return t==="x"?"y":"x"}function xS(t){return t==="y"?"height":"width"}const Yse=new Set(["top","bottom"]);function El(t){return Yse.has(Mu(t))?"y":"x"}function bS(t){return Wse(El(t))}function qse(t,e,n){n===void 0&&(n=!1);const s=lm(t),r=bS(t),i=xS(r);let o=r==="x"?s===(n?"end":"start")?"right":"left":s==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=Ay(o)),[o,Ay(o)]}function Gse(t){const e=Ay(t);return[PA(t),e,PA(e)]}function PA(t){return t.replace(/start|end/g,e=>Hse[e])}const qM=["left","right"],GM=["right","left"],Kse=["top","bottom"],Qse=["bottom","top"];function Xse(t,e,n){switch(t){case"top":case"bottom":return n?e?GM:qM:e?qM:GM;case"left":case"right":return e?Kse:Qse;default:return[]}}function Zse(t,e,n,s){const r=lm(t);let i=Xse(Mu(t),n==="start",s);return r&&(i=i.map(o=>o+"-"+r),e&&(i=i.concat(i.map(PA)))),i}function Ay(t){return t.replace(/left|right|bottom|top/g,e=>$se[e])}function Jse(t){return{top:0,right:0,bottom:0,left:0,...t}}function nB(t){return typeof t!="number"?Jse(t):{top:t,right:t,bottom:t,left:t}}function wy(t){const{x:e,y:n,width:s,height:r}=t;return{width:s,height:r,top:n,left:e,right:e+s,bottom:n+r,x:e,y:n}}var ere=typeof document<"u",tre=function(){},jy=ere?v.useLayoutEffect:tre;const nre={...Wg},sre=nre.useInsertionEffect,rre=sre||(t=>t());function are(t){const e=v.useRef(()=>{});return rre(()=>{e.current=t}),v.useCallback(function(){for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return e.current==null?void 0:e.current(...s)},[])}function KM(t,e,n){let{reference:s,floating:r}=t;const i=El(e),o=bS(e),c=xS(o),u=Mu(e),f=i==="y",m=s.x+s.width/2-r.width/2,h=s.y+s.height/2-r.height/2,g=s[c]/2-r[c]/2;let x;switch(u){case"top":x={x:m,y:s.y-r.height};break;case"bottom":x={x:m,y:s.y+s.height};break;case"right":x={x:s.x+s.width,y:h};break;case"left":x={x:s.x-r.width,y:h};break;default:x={x:s.x,y:s.y}}switch(lm(e)){case"start":x[o]-=g*(n&&f?-1:1);break;case"end":x[o]+=g*(n&&f?-1:1);break}return x}const ire=async(t,e,n)=>{const{placement:s="bottom",strategy:r="absolute",middleware:i=[],platform:o}=n,c=i.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(e));let f=await o.getElementRects({reference:t,floating:e,strategy:r}),{x:m,y:h}=KM(f,s,u),g=s,x={},b=0;for(let A=0;A<c.length;A++){const{name:_,fn:j}=c[A],{x:C,y:k,data:E,reset:N}=await j({x:m,y:h,initialPlacement:s,placement:g,strategy:r,middlewareData:x,rects:f,platform:o,elements:{reference:t,floating:e}});m=C??m,h=k??h,x={...x,[_]:{...x[_],...E}},N&&b<=50&&(b++,typeof N=="object"&&(N.placement&&(g=N.placement),N.rects&&(f=N.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:r}):N.rects),{x:m,y:h}=KM(f,g,u)),A=-1)}return{x:m,y:h,placement:g,strategy:r,middlewareData:x}};async function ore(t,e){var n;e===void 0&&(e={});const{x:s,y:r,platform:i,rects:o,elements:c,strategy:u}=t,{boundary:f="clippingAncestors",rootBoundary:m="viewport",elementContext:h="floating",altBoundary:g=!1,padding:x=0}=kx(e,t),b=nB(x),_=c[g?h==="floating"?"reference":"floating":h],j=wy(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(_)))==null||n?_:_.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(c.floating)),boundary:f,rootBoundary:m,strategy:u})),C=h==="floating"?{x:s,y:r,width:o.floating.width,height:o.floating.height}:o.reference,k=await(i.getOffsetParent==null?void 0:i.getOffsetParent(c.floating)),E=await(i.isElement==null?void 0:i.isElement(k))?await(i.getScale==null?void 0:i.getScale(k))||{x:1,y:1}:{x:1,y:1},N=wy(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:C,offsetParent:k,strategy:u}):C);return{top:(j.top-N.top+b.top)/E.y,bottom:(N.bottom-j.bottom+b.bottom)/E.y,left:(j.left-N.left+b.left)/E.x,right:(N.right-j.right+b.right)/E.x}}const lre=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:s,placement:r,rects:i,platform:o,elements:c,middlewareData:u}=e,{element:f,padding:m=0}=kx(t,e)||{};if(f==null)return{};const h=nB(m),g={x:n,y:s},x=bS(r),b=xS(x),A=await o.getDimensions(f),_=x==="y",j=_?"top":"left",C=_?"bottom":"right",k=_?"clientHeight":"clientWidth",E=i.reference[b]+i.reference[x]-g[x]-i.floating[b],N=g[x]-i.reference[x],L=await(o.getOffsetParent==null?void 0:o.getOffsetParent(f));let M=L?L[k]:0;(!M||!await(o.isElement==null?void 0:o.isElement(L)))&&(M=c.floating[k]||i.floating[b]);const T=E/2-N/2,O=M/2-A[b]/2-1,I=Tu(h[j],O),$=Tu(h[C],O),H=I,V=M-A[b]-$,G=M/2-A[b]/2+T,U=Use(H,G,V),R=!u.arrow&&lm(r)!=null&&G!==U&&i.reference[b]/2-(G<H?I:$)-A[b]/2<0,P=R?G<H?G-H:G-V:0;return{[x]:g[x]+P,data:{[x]:U,centerOffset:G-U-P,...R&&{alignmentOffset:P}},reset:R}}}),cre=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,s;const{placement:r,middlewareData:i,rects:o,initialPlacement:c,platform:u,elements:f}=e,{mainAxis:m=!0,crossAxis:h=!0,fallbackPlacements:g,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:A=!0,..._}=kx(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const j=Mu(r),C=El(c),k=Mu(c)===c,E=await(u.isRTL==null?void 0:u.isRTL(f.floating)),N=g||(k||!A?[Ay(c)]:Gse(c)),L=b!=="none";!g&&L&&N.push(...Zse(c,A,b,E));const M=[c,...N],T=await ore(e,_),O=[];let I=((s=i.flip)==null?void 0:s.overflows)||[];if(m&&O.push(T[j]),h){const G=qse(r,o,E);O.push(T[G[0]],T[G[1]])}if(I=[...I,{placement:r,overflows:O}],!O.every(G=>G<=0)){var $,H;const G=((($=i.flip)==null?void 0:$.index)||0)+1,U=M[G];if(U&&(!(h==="alignment"?C!==El(U):!1)||I.every(Z=>El(Z.placement)===C?Z.overflows[0]>0:!0)))return{data:{index:G,overflows:I},reset:{placement:U}};let R=(H=I.filter(P=>P.overflows[0]<=0).sort((P,Z)=>P.overflows[1]-Z.overflows[1])[0])==null?void 0:H.placement;if(!R)switch(x){case"bestFit":{var V;const P=(V=I.filter(Z=>{if(L){const ne=El(Z.placement);return ne===C||ne==="y"}return!0}).map(Z=>[Z.placement,Z.overflows.filter(ne=>ne>0).reduce((ne,D)=>ne+D,0)]).sort((Z,ne)=>Z[1]-ne[1])[0])==null?void 0:V[0];P&&(R=P);break}case"initialPlacement":R=c;break}if(r!==R)return{reset:{placement:R}}}return{}}}},ure=new Set(["left","top"]);async function dre(t,e){const{placement:n,platform:s,elements:r}=t,i=await(s.isRTL==null?void 0:s.isRTL(r.floating)),o=Mu(n),c=lm(n),u=El(n)==="y",f=ure.has(o)?-1:1,m=i&&u?-1:1,h=kx(e,t);let{mainAxis:g,crossAxis:x,alignmentAxis:b}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return c&&typeof b=="number"&&(x=c==="end"?b*-1:b),u?{x:x*m,y:g*f}:{x:g*f,y:x*m}}const fre=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,s;const{x:r,y:i,placement:o,middlewareData:c}=e,u=await dre(e,t);return o===((n=c.offset)==null?void 0:n.placement)&&(s=c.arrow)!=null&&s.alignmentOffset?{}:{x:r+u.x,y:i+u.y,data:{...u,placement:o}}}}};function sB(t){const e=qr(t);let n=parseFloat(e.width)||0,s=parseFloat(e.height)||0;const r=qa(t),i=r?t.offsetWidth:n,o=r?t.offsetHeight:s,c=_y(n)!==i||_y(s)!==o;return c&&(n=i,s=o),{width:n,height:s,$:c}}function vS(t){return Vs(t)?t:t.contextElement}function hu(t){const e=vS(t);if(!qa(e))return $a(1);const n=e.getBoundingClientRect(),{width:s,height:r,$:i}=sB(e);let o=(i?_y(n.width):n.width)/s,c=(i?_y(n.height):n.height)/r;return(!o||!Number.isFinite(o))&&(o=1),(!c||!Number.isFinite(c))&&(c=1),{x:o,y:c}}const hre=$a(0);function rB(t){const e=xr(t);return!yS()||!e.visualViewport?hre:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function mre(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==xr(t)?!1:e}function Ql(t,e,n,s){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=vS(t);let o=$a(1);e&&(s?Vs(s)&&(o=hu(s)):o=hu(t));const c=mre(i,n,s)?rB(i):$a(0);let u=(r.left+c.x)/o.x,f=(r.top+c.y)/o.y,m=r.width/o.x,h=r.height/o.y;if(i){const g=xr(i),x=s&&Vs(s)?xr(s):s;let b=g,A=OA(b);for(;A&&s&&x!==b;){const _=hu(A),j=A.getBoundingClientRect(),C=qr(A),k=j.left+(A.clientLeft+parseFloat(C.paddingLeft))*_.x,E=j.top+(A.clientTop+parseFloat(C.paddingTop))*_.y;u*=_.x,f*=_.y,m*=_.x,h*=_.y,u+=k,f+=E,b=xr(A),A=OA(b)}}return wy({width:m,height:h,x:u,y:f})}function Dx(t,e){const n=Nx(t).scrollLeft;return e?e.left+n:Ql(Ka(t)).left+n}function aB(t,e){const n=t.getBoundingClientRect(),s=n.left+e.scrollLeft-Dx(t,n),r=n.top+e.scrollTop;return{x:s,y:r}}function pre(t){let{elements:e,rect:n,offsetParent:s,strategy:r}=t;const i=r==="fixed",o=Ka(s),c=e?Cx(e.floating):!1;if(s===o||c&&i)return n;let u={scrollLeft:0,scrollTop:0},f=$a(1);const m=$a(0),h=qa(s);if((h||!h&&!i)&&((nd(s)!=="body"||om(o))&&(u=Nx(s)),qa(s))){const x=Ql(s);f=hu(s),m.x=x.x+s.clientLeft,m.y=x.y+s.clientTop}const g=o&&!h&&!i?aB(o,u):$a(0);return{width:n.width*f.x,height:n.height*f.y,x:n.x*f.x-u.scrollLeft*f.x+m.x+g.x,y:n.y*f.y-u.scrollTop*f.y+m.y+g.y}}function gre(t){return Array.from(t.getClientRects())}function yre(t){const e=Ka(t),n=Nx(t),s=t.ownerDocument.body,r=Hl(e.scrollWidth,e.clientWidth,s.scrollWidth,s.clientWidth),i=Hl(e.scrollHeight,e.clientHeight,s.scrollHeight,s.clientHeight);let o=-n.scrollLeft+Dx(t);const c=-n.scrollTop;return qr(s).direction==="rtl"&&(o+=Hl(e.clientWidth,s.clientWidth)-r),{width:r,height:i,x:o,y:c}}const QM=25;function xre(t,e){const n=xr(t),s=Ka(t),r=n.visualViewport;let i=s.clientWidth,o=s.clientHeight,c=0,u=0;if(r){i=r.width,o=r.height;const m=yS();(!m||m&&e==="fixed")&&(c=r.offsetLeft,u=r.offsetTop)}const f=Dx(s);if(f<=0){const m=s.ownerDocument,h=m.body,g=getComputedStyle(h),x=m.compatMode==="CSS1Compat"&&parseFloat(g.marginLeft)+parseFloat(g.marginRight)||0,b=Math.abs(s.clientWidth-h.clientWidth-x);b<=QM&&(i-=b)}else f<=QM&&(i+=f);return{width:i,height:o,x:c,y:u}}const bre=new Set(["absolute","fixed"]);function vre(t,e){const n=Ql(t,!0,e==="fixed"),s=n.top+t.clientTop,r=n.left+t.clientLeft,i=qa(t)?hu(t):$a(1),o=t.clientWidth*i.x,c=t.clientHeight*i.y,u=r*i.x,f=s*i.y;return{width:o,height:c,x:u,y:f}}function XM(t,e,n){let s;if(e==="viewport")s=xre(t,n);else if(e==="document")s=yre(Ka(t));else if(Vs(e))s=vre(e,n);else{const r=rB(t);s={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return wy(s)}function iB(t,e){const n=Fo(t);return n===e||!Vs(n)||Eu(n)?!1:qr(n).position==="fixed"||iB(n,e)}function _re(t,e){const n=e.get(t);if(n)return n;let s=Eh(t,[],!1).filter(c=>Vs(c)&&nd(c)!=="body"),r=null;const i=qr(t).position==="fixed";let o=i?Fo(t):t;for(;Vs(o)&&!Eu(o);){const c=qr(o),u=gS(o);!u&&c.position==="fixed"&&(r=null),(i?!u&&!r:!u&&c.position==="static"&&!!r&&bre.has(r.position)||om(o)&&!u&&iB(t,o))?s=s.filter(m=>m!==o):r=c,o=Fo(o)}return e.set(t,s),s}function Are(t){let{element:e,boundary:n,rootBoundary:s,strategy:r}=t;const o=[...n==="clippingAncestors"?Cx(e)?[]:_re(e,this._c):[].concat(n),s],c=o[0],u=o.reduce((f,m)=>{const h=XM(e,m,r);return f.top=Hl(h.top,f.top),f.right=Tu(h.right,f.right),f.bottom=Tu(h.bottom,f.bottom),f.left=Hl(h.left,f.left),f},XM(e,c,r));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function wre(t){const{width:e,height:n}=sB(t);return{width:e,height:n}}function jre(t,e,n){const s=qa(e),r=Ka(e),i=n==="fixed",o=Ql(t,!0,i,e);let c={scrollLeft:0,scrollTop:0};const u=$a(0);function f(){u.x=Dx(r)}if(s||!s&&!i)if((nd(e)!=="body"||om(r))&&(c=Nx(e)),s){const x=Ql(e,!0,i,e);u.x=x.x+e.clientLeft,u.y=x.y+e.clientTop}else r&&f();i&&!s&&r&&f();const m=r&&!s&&!i?aB(r,c):$a(0),h=o.left+c.scrollLeft-u.x-m.x,g=o.top+c.scrollTop-u.y-m.y;return{x:h,y:g,width:o.width,height:o.height}}function i_(t){return qr(t).position==="static"}function ZM(t,e){if(!qa(t)||qr(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Ka(t)===n&&(n=n.ownerDocument.body),n}function oB(t,e){const n=xr(t);if(Cx(t))return n;if(!qa(t)){let r=Fo(t);for(;r&&!Eu(r);){if(Vs(r)&&!i_(r))return r;r=Fo(r)}return n}let s=ZM(t,e);for(;s&&Pse(s)&&i_(s);)s=ZM(s,e);return s&&Eu(s)&&i_(s)&&!gS(s)?n:s||Vse(t)||n}const Sre=async function(t){const e=this.getOffsetParent||oB,n=this.getDimensions,s=await n(t.floating);return{reference:jre(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function Cre(t){return qr(t).direction==="rtl"}const Nre={convertOffsetParentRelativeRectToViewportRelativeRect:pre,getDocumentElement:Ka,getClippingRect:Are,getOffsetParent:oB,getElementRects:Sre,getClientRects:gre,getDimensions:wre,getScale:hu,isElement:Vs,isRTL:Cre};function lB(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function kre(t,e){let n=null,s;const r=Ka(t);function i(){var c;clearTimeout(s),(c=n)==null||c.disconnect(),n=null}function o(c,u){c===void 0&&(c=!1),u===void 0&&(u=1),i();const f=t.getBoundingClientRect(),{left:m,top:h,width:g,height:x}=f;if(c||e(),!g||!x)return;const b=Jp(h),A=Jp(r.clientWidth-(m+g)),_=Jp(r.clientHeight-(h+x)),j=Jp(m),k={rootMargin:-b+"px "+-A+"px "+-_+"px "+-j+"px",threshold:Hl(0,Tu(1,u))||1};let E=!0;function N(L){const M=L[0].intersectionRatio;if(M!==u){if(!E)return o();M?o(!1,M):s=setTimeout(()=>{o(!1,1e-7)},1e3)}M===1&&!lB(f,t.getBoundingClientRect())&&o(),E=!1}try{n=new IntersectionObserver(N,{...k,root:r.ownerDocument})}catch{n=new IntersectionObserver(N,k)}n.observe(t)}return o(!0),i}function cB(t,e,n,s){s===void 0&&(s={});const{ancestorScroll:r=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:u=!1}=s,f=vS(t),m=r||i?[...f?Eh(f):[],...Eh(e)]:[];m.forEach(j=>{r&&j.addEventListener("scroll",n,{passive:!0}),i&&j.addEventListener("resize",n)});const h=f&&c?kre(f,n):null;let g=-1,x=null;o&&(x=new ResizeObserver(j=>{let[C]=j;C&&C.target===f&&x&&(x.unobserve(e),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var k;(k=x)==null||k.observe(e)})),n()}),f&&!u&&x.observe(f),x.observe(e));let b,A=u?Ql(t):null;u&&_();function _(){const j=Ql(t);A&&!lB(A,j)&&n(),A=j,b=requestAnimationFrame(_)}return n(),()=>{var j;m.forEach(C=>{r&&C.removeEventListener("scroll",n),i&&C.removeEventListener("resize",n)}),h?.(),(j=x)==null||j.disconnect(),x=null,u&&cancelAnimationFrame(b)}}const Dre=fre,Ere=cre,JM=lre,Tre=(t,e,n)=>{const s=new Map,r={platform:Nre,...n},i={...r.platform,_c:s};return ire(t,e,{...r,platform:i})};var Mre=typeof document<"u",Rre=function(){},Lg=Mre?v.useLayoutEffect:Rre;function Sy(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,s,r;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(s=n;s--!==0;)if(!Sy(t[s],e[s]))return!1;return!0}if(r=Object.keys(t),n=r.length,n!==Object.keys(e).length)return!1;for(s=n;s--!==0;)if(!{}.hasOwnProperty.call(e,r[s]))return!1;for(s=n;s--!==0;){const i=r[s];if(!(i==="_owner"&&t.$$typeof)&&!Sy(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function uB(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function e2(t,e){const n=uB(t);return Math.round(e*n)/n}function o_(t){const e=v.useRef(t);return Lg(()=>{e.current=t}),e}function Ore(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:s=[],platform:r,elements:{reference:i,floating:o}={},transform:c=!0,whileElementsMounted:u,open:f}=t,[m,h]=v.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[g,x]=v.useState(s);Sy(g,s)||x(s);const[b,A]=v.useState(null),[_,j]=v.useState(null),C=v.useCallback(Z=>{Z!==L.current&&(L.current=Z,A(Z))},[]),k=v.useCallback(Z=>{Z!==M.current&&(M.current=Z,j(Z))},[]),E=i||b,N=o||_,L=v.useRef(null),M=v.useRef(null),T=v.useRef(m),O=u!=null,I=o_(u),$=o_(r),H=o_(f),V=v.useCallback(()=>{if(!L.current||!M.current)return;const Z={placement:e,strategy:n,middleware:g};$.current&&(Z.platform=$.current),Tre(L.current,M.current,Z).then(ne=>{const D={...ne,isPositioned:H.current!==!1};G.current&&!Sy(T.current,D)&&(T.current=D,vw.flushSync(()=>{h(D)}))})},[g,e,n,$,H]);Lg(()=>{f===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,h(Z=>({...Z,isPositioned:!1})))},[f]);const G=v.useRef(!1);Lg(()=>(G.current=!0,()=>{G.current=!1}),[]),Lg(()=>{if(E&&(L.current=E),N&&(M.current=N),E&&N){if(I.current)return I.current(E,N,V);V()}},[E,N,V,I,O]);const U=v.useMemo(()=>({reference:L,floating:M,setReference:C,setFloating:k}),[C,k]),R=v.useMemo(()=>({reference:E,floating:N}),[E,N]),P=v.useMemo(()=>{const Z={position:n,left:0,top:0};if(!R.floating)return Z;const ne=e2(R.floating,m.x),D=e2(R.floating,m.y);return c?{...Z,transform:"translate("+ne+"px, "+D+"px)",...uB(R.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ne,top:D}},[n,c,R.floating,m.x,m.y]);return v.useMemo(()=>({...m,update:V,refs:U,elements:R,floatingStyles:P}),[m,V,U,R,P])}const Pre=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:s,padding:r}=typeof t=="function"?t(n):t;return s&&e(s)?s.current!=null?JM({element:s.current,padding:r}).fn(n):{}:s?JM({element:s,padding:r}).fn(n):{}}}},Lre=(t,e)=>({...Dre(t),options:[t,e]}),Fre=(t,e)=>({...Ere(t),options:[t,e]}),Bre=(t,e)=>({...Pre(t),options:[t,e]}),Ire={...Wg};let t2=!1,Vre=0;const n2=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Vre++;function zre(){const[t,e]=v.useState(()=>t2?n2():void 0);return jy(()=>{t==null&&e(n2())},[]),v.useEffect(()=>{t2=!0},[]),t}const $re=Ire.useId,dB=$re||zre,Hre=v.forwardRef(function(e,n){const{context:{placement:s,elements:{floating:r},middlewareData:{arrow:i,shift:o}},width:c=14,height:u=7,tipRadius:f=0,strokeWidth:m=0,staticOffset:h,stroke:g,d:x,style:{transform:b,...A}={},..._}=e,j=dB(),[C,k]=v.useState(!1);if(jy(()=>{if(!r)return;qr(r).direction==="rtl"&&k(!0)},[r]),!r)return null;const[E,N]=s.split("-"),L=E==="top"||E==="bottom";let M=h;(L&&o!=null&&o.x||!L&&o!=null&&o.y)&&(M=null);const T=m*2,O=T/2,I=c/2*(f/-8+1),$=u/2*f/4,H=!!x,V=M&&N==="end"?"bottom":"top";let G=M&&N==="end"?"right":"left";M&&C&&(G=N==="end"?"left":"right");const U=i?.x!=null?M||i.x:"",R=i?.y!=null?M||i.y:"",P=x||"M0,0"+(" H"+c)+(" L"+(c-I)+","+(u-$))+(" Q"+c/2+","+u+" "+I+","+(u-$))+" Z",Z={top:H?"rotate(180deg)":"",left:H?"rotate(90deg)":"rotate(-90deg)",bottom:H?"":"rotate(180deg)",right:H?"rotate(-90deg)":"rotate(90deg)"}[E];return a.jsxs("svg",{..._,"aria-hidden":!0,ref:n,width:H?c:c+T,height:c,viewBox:"0 0 "+c+" "+(u>c?u:c),style:{position:"absolute",pointerEvents:"none",[G]:U,[V]:R,[E]:L||H?"100%":"calc(100% - "+T/2+"px)",transform:[Z,b].filter(ne=>!!ne).join(" "),...A},children:[T>0&&a.jsx("path",{clipPath:"url(#"+j+")",fill:"none",stroke:g,strokeWidth:T+(x?0:1),d:P}),a.jsx("path",{stroke:T&&!x?_.fill:"none",d:P}),a.jsx("clipPath",{id:j,children:a.jsx("rect",{x:-O,y:O*(H?-1:1),width:c+T,height:c})})]})});function Ure(){const t=new Map;return{emit(e,n){var s;(s=t.get(e))==null||s.forEach(r=>r(n))},on(e,n){t.has(e)||t.set(e,new Set),t.get(e).add(n)},off(e,n){var s;(s=t.get(e))==null||s.delete(n)}}}const Wre=v.createContext(null),Yre=v.createContext(null),qre=()=>{var t;return((t=v.useContext(Wre))==null?void 0:t.id)||null},Gre=()=>v.useContext(Yre);function Kre(t){const{open:e=!1,onOpenChange:n,elements:s}=t,r=dB(),i=v.useRef({}),[o]=v.useState(()=>Ure()),c=qre()!=null,[u,f]=v.useState(s.reference),m=are((x,b,A)=>{i.current.openEvent=x?b:void 0,o.emit("openchange",{open:x,event:b,reason:A,nested:c}),n?.(x,b,A)}),h=v.useMemo(()=>({setPositionReference:f}),[]),g=v.useMemo(()=>({reference:u||s.reference||null,floating:s.floating||null,domReference:s.reference}),[u,s.reference,s.floating]);return v.useMemo(()=>({dataRef:i,open:e,onOpenChange:m,elements:g,events:o,floatingId:r,refs:h}),[e,m,g,o,r,h])}function Qre(t){t===void 0&&(t={});const{nodeId:e}=t,n=Kre({...t,elements:{reference:null,floating:null,...t.elements}}),s=t.rootContext||n,r=s.elements,[i,o]=v.useState(null),[c,u]=v.useState(null),m=r?.domReference||i,h=v.useRef(null),g=Gre();jy(()=>{m&&(h.current=m)},[m]);const x=Ore({...t,elements:{...r,...c&&{reference:c}}}),b=v.useCallback(k=>{const E=Vs(k)?{getBoundingClientRect:()=>k.getBoundingClientRect(),getClientRects:()=>k.getClientRects(),contextElement:k}:k;u(E),x.refs.setReference(E)},[x.refs]),A=v.useCallback(k=>{(Vs(k)||k===null)&&(h.current=k,o(k)),(Vs(x.refs.reference.current)||x.refs.reference.current===null||k!==null&&!Vs(k))&&x.refs.setReference(k)},[x.refs]),_=v.useMemo(()=>({...x.refs,setReference:A,setPositionReference:b,domReference:h}),[x.refs,A,b]),j=v.useMemo(()=>({...x.elements,domReference:m}),[x.elements,m]),C=v.useMemo(()=>({...x,...s,refs:_,elements:j,nodeId:e}),[x,_,j,e,s]);return jy(()=>{s.dataRef.current.floatingContext=C;const k=g?.nodesRef.current.find(E=>E.id===e);k&&(k.context=C)}),v.useMemo(()=>({...x,context:C,refs:_,elements:j}),[x,_,j,C])}/*!
  react-datepicker v8.7.0
  https://github.com/Hacker0x01/react-datepicker
  Released under the MIT License.
*/var LA=function(e,n){return LA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,r){s.__proto__=r}||function(s,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(s[i]=r[i])},LA(e,n)};function ws(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");LA(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Yt=function(){return Yt=Object.assign||function(n){for(var s,r=1,i=arguments.length;r<i;r++){s=arguments[r];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(n[o]=s[o])}return n},Yt.apply(this,arguments)};function Ma(t,e,n){if(n||arguments.length===2)for(var s=0,r=e.length,i;s<r;s++)(i||!(s in e))&&(i||(i=Array.prototype.slice.call(e,0,s)),i[s]=e[s]);return t.concat(i||Array.prototype.slice.call(e))}var Xre=function(t){var e=t.showTimeSelectOnly,n=e===void 0?!1:e,s=t.showTime,r=s===void 0?!1:s,i=t.className,o=t.children,c=n?"Choose Time":"Choose Date".concat(r?" and Time":"");return fe.createElement("div",{className:i,role:"dialog","aria-label":c,"aria-modal":"true"},o)},Zre=function(t,e){var n=v.useRef(null),s=v.useRef(t);s.current=t;var r=v.useCallback(function(i){var o,c=i.composed&&i.composedPath&&i.composedPath().find(function(u){return u instanceof Node})||i.target;n.current&&!n.current.contains(c)&&(e&&c instanceof HTMLElement&&c.classList.contains(e)||(o=s.current)===null||o===void 0||o.call(s,i))},[e]);return v.useEffect(function(){return document.addEventListener("mousedown",r),function(){document.removeEventListener("mousedown",r)}},[r]),n},Ex=function(t){var e=t.children,n=t.onClickOutside,s=t.className,r=t.containerRef,i=t.style,o=t.ignoreClass,c=Zre(n,o);return fe.createElement("div",{className:s,style:i,ref:function(u){c.current=u,r&&(r.current=u)}},e)},at;(function(t){t.ArrowUp="ArrowUp",t.ArrowDown="ArrowDown",t.ArrowLeft="ArrowLeft",t.ArrowRight="ArrowRight",t.PageUp="PageUp",t.PageDown="PageDown",t.Home="Home",t.End="End",t.Enter="Enter",t.Space=" ",t.Tab="Tab",t.Escape="Escape",t.Backspace="Backspace",t.X="x"})(at||(at={}));function fB(){var t=typeof window<"u"?window:globalThis;return t}var cm=12;function on(t){if(t==null)return new Date;var e=typeof t=="string"?Q4(t):it(t);return Tx(e)?e:new Date}function l_(t,e,n,s,r){r===void 0&&(r=on());for(var i=Ru(n)||Ru(_S()),o=Array.isArray(e)?e:[e],c=0,u=o;c<u.length;c++){var f=u[c],m=K4(t,f,r,{locale:i,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});if(Tx(m)&&(!s||t===jn(m,f,n)))return m}return null}function Tx(t,e){return Ch(t)&&!Ta(t,new Date("1/1/1800"))}function jn(t,e,n){if(n==="en")return MA(t,e,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});var s=n?Ru(n):void 0;return n&&!s&&console.warn('A locale object was not found for the provided string ["'.concat(n,'"].')),s=s||Ru(_S()),MA(t,e,{locale:s,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})}function Or(t,e){var n=e.dateFormat,s=e.locale,r=Array.isArray(n)&&n.length>0?n[0]:n;return t&&jn(t,r,s)||""}var hB=" - ";function Jre(t,e,n){if(!t&&!e)return"";var s=t?Or(t,n):"",r=e?Or(e,n):"",i=n.rangeSeparator||hB;return"".concat(s).concat(i).concat(r)}function eae(t,e){if(!t?.length)return"";var n=t[0]?Or(t[0],e):"";if(t.length===1)return n;if(t.length===2&&t[1]){var s=Or(t[1],e);return"".concat(n,", ").concat(s)}var r=t.length-1;return"".concat(n," (+").concat(r,")")}function c_(t,e){var n=e.hour,s=n===void 0?0:n,r=e.minute,i=r===void 0?0:r,o=e.second,c=o===void 0?0:o;return Rg(Og(Pg(t,c),i),s)}function tae(t){return fS(t)}function nae(t,e){return jn(t,"ddd",e)}function Fg(t){return Po(t)}function No(t,e,n){var s=Ru(e||_S());return oa(t,{locale:s,weekStartsOn:n})}function Di(t){return uS(t)}function If(t){return im(t)}function s2(t){return by(t)}function r2(){return Po(on())}function a2(t){return wx(t)}function sae(t){return P4(t)}function rae(t){return jx(t)}function Ca(t,e){return t&&e?mse(t,e):!t&&!e}function Fs(t,e){return t&&e?dse(t,e):!t&&!e}function Cy(t,e){return t&&e?fse(t,e):!t&&!e}function Wt(t,e){return t&&e?ute(t,e):!t&&!e}function Tl(t,e){return t&&e?hne(t,e):!t&&!e}function wl(t,e,n){var s,r=Po(e),i=wx(n);try{s=Dh(t,{start:r,end:i})}catch{s=!1}return s}function _S(){var t=fB();return t.__localeId__}function Ru(t){if(typeof t=="string"){var e=fB();return e.__localeData__?e.__localeData__[t]:void 0}else return t}function aae(t,e,n){return e(jn(t,"EEEE",n))}function iae(t,e){return jn(t,"EEEEEE",e)}function oae(t,e){return jn(t,"EEE",e)}function AS(t,e){return jn(Lr(on(),t),"LLLL",e)}function mB(t,e){return jn(Lr(on(),t),"LLL",e)}function lae(t,e){return jn(nu(on(),t),"QQQ",e)}function Br(t,e){var n=e===void 0?{}:e,s=n.minDate,r=n.maxDate,i=n.excludeDates,o=n.excludeDateIntervals,c=n.includeDates,u=n.includeDateIntervals,f=n.filterDate;return um(t,{minDate:s,maxDate:r})||i&&i.some(function(m){return m instanceof Date?Wt(t,m):Wt(t,m.date)})||o&&o.some(function(m){var h=m.start,g=m.end;return Dh(t,{start:h,end:g})})||c&&!c.some(function(m){return Wt(t,m)})||u&&!u.some(function(m){var h=m.start,g=m.end;return Dh(t,{start:h,end:g})})||f&&!f(on(t))||!1}function wS(t,e){var n=e===void 0?{}:e,s=n.excludeDates,r=n.excludeDateIntervals;return r&&r.length>0?r.some(function(i){var o=i.start,c=i.end;return Dh(t,{start:o,end:c})}):s&&s.some(function(i){var o;return i instanceof Date?Wt(t,i):Wt(t,(o=i.date)!==null&&o!==void 0?o:new Date)})||!1}function pB(t,e){var n=e===void 0?{}:e,s=n.minDate,r=n.maxDate,i=n.excludeDates,o=n.includeDates,c=n.filterDate;return um(t,{minDate:s?uS(s):void 0,maxDate:r?jx(r):void 0})||i?.some(function(u){return Fs(t,u instanceof Date?u:u.date)})||o&&!o.some(function(u){return Fs(t,u)})||c&&!c(on(t))||!1}function eg(t,e,n,s){var r=It(t),i=Ts(t),o=It(e),c=Ts(e),u=It(s);return r===o&&r===u?i<=n&&n<=c:r<o?u===r&&i<=n||u===o&&c>=n||u<o&&u>r:!1}function cae(t,e){var n=e===void 0?{}:e,s=n.minDate,r=n.maxDate,i=n.excludeDates,o=n.includeDates;return um(t,{minDate:s,maxDate:r})||i&&i.some(function(c){return Fs(c instanceof Date?c:c.date,t)})||o&&!o.some(function(c){return Fs(c,t)})||!1}function tg(t,e){var n=e===void 0?{}:e,s=n.minDate,r=n.maxDate,i=n.excludeDates,o=n.includeDates,c=n.filterDate;return um(t,{minDate:s,maxDate:r})||i?.some(function(u){return Cy(t,u instanceof Date?u:u.date)})||o&&!o.some(function(u){return Cy(t,u)})||c&&!c(on(t))||!1}function ng(t,e,n){if(!e||!n||!Ch(e)||!Ch(n))return!1;var s=It(e),r=It(n);return s<=t&&r>=t}function Bg(t,e){var n=e===void 0?{}:e,s=n.minDate,r=n.maxDate,i=n.excludeDates,o=n.includeDates,c=n.filterDate,u=new Date(t,0,1);return um(u,{minDate:s?im(s):void 0,maxDate:r?dS(r):void 0})||i?.some(function(f){return Ca(u,f instanceof Date?f:f.date)})||o&&!o.some(function(f){return Ca(u,f)})||c&&!c(on(u))||!1}function sg(t,e,n,s){var r=It(t),i=zl(t),o=It(e),c=zl(e),u=It(s);return r===o&&r===u?i<=n&&n<=c:r<o?u===r&&i<=n||u===o&&c>=n||u<o&&u>r:!1}function um(t,e){var n,s=e===void 0?{}:e,r=s.minDate,i=s.maxDate;return(n=r&&ku(t,r)<0||i&&ku(t,i)>0)!==null&&n!==void 0?n:!1}function i2(t,e){return e.some(function(n){return Ni(n)===Ni(t)&&ki(n)===ki(t)&&Co(n)===Co(t)})}function o2(t,e){var n=e===void 0?{}:e,s=n.excludeTimes,r=n.includeTimes,i=n.filterTime;return s&&i2(t,s)||r&&!i2(t,r)||i&&!i(t)||!1}function l2(t,e){var n=e.minTime,s=e.maxTime;if(!n||!s)throw new Error("Both minTime and maxTime props required");var r=on();r=Rg(r,Ni(t)),r=Og(r,ki(t)),r=Pg(r,Co(t));var i=on();i=Rg(i,Ni(n)),i=Og(i,ki(n)),i=Pg(i,Co(n));var o=on();o=Rg(o,Ni(s)),o=Og(o,ki(s)),o=Pg(o,Co(s));var c;try{c=!Dh(r,{start:i,end:o})}catch{c=!1}return c}function c2(t,e){var n=e===void 0?{}:e,s=n.minDate,r=n.includeDates,i=$l(t,1);return s&&Nh(s,i)>0||r&&r.every(function(o){return Nh(o,i)>0})||!1}function u2(t,e){var n=e===void 0?{}:e,s=n.maxDate,r=n.includeDates,i=Yr(t,1);return s&&Nh(i,s)>0||r&&r.every(function(o){return Nh(i,o)>0})||!1}function uae(t,e){var n=e===void 0?{}:e,s=n.minDate,r=n.includeDates,i=im(t),o=Z4(i);return s&&xy(s,o)>0||r&&r.every(function(c){return xy(c,o)>0})||!1}function dae(t,e){var n=e===void 0?{}:e,s=n.maxDate,r=n.includeDates,i=dS(t),o=Ax(i,1);return s&&xy(o,s)>0||r&&r.every(function(c){return xy(o,c)>0})||!1}function d2(t,e){var n=e===void 0?{}:e,s=n.minDate,r=n.includeDates,i=Du(t,1);return s&&kh(s,i)>0||r&&r.every(function(o){return kh(o,i)>0})||!1}function fae(t,e){var n=e===void 0?{}:e,s=n.minDate,r=n.yearItemNumber,i=r===void 0?cm:r,o=If(Du(t,i)),c=_i(o,i).endPeriod,u=s&&It(s);return u&&u>c||!1}function f2(t,e){var n=e===void 0?{}:e,s=n.maxDate,r=n.includeDates,i=za(t,1);return s&&kh(i,s)>0||r&&r.every(function(o){return kh(i,o)>0})||!1}function hae(t,e){var n=e===void 0?{}:e,s=n.maxDate,r=n.yearItemNumber,i=r===void 0?cm:r,o=za(t,i),c=_i(o,i).startPeriod,u=s&&It(s);return u&&u<c||!1}function gB(t){var e=t.minDate,n=t.includeDates;if(n&&e){var s=n.filter(function(r){return ku(r,e)>=0});return BM(s)}else return n?BM(n):e}function yB(t){var e=t.maxDate,n=t.includeDates;if(n&&e){var s=n.filter(function(r){return ku(r,e)<=0});return FM(s)}else return n?FM(n):e}function h2(t,e){var n;t===void 0&&(t=[]),e===void 0&&(e="react-datepicker__day--highlighted");for(var s=new Map,r=0,i=t.length;r<i;r++){var o=t[r];if(Ci(o)){var c=jn(o,"MM.dd.yyyy"),u=s.get(c)||[];u.includes(e)||(u.push(e),s.set(c,u))}else if(typeof o=="object"){var f=Object.keys(o),m=(n=f[0])!==null&&n!==void 0?n:"",h=o[m];if(typeof m=="string"&&Array.isArray(h))for(var g=0,x=h.length;g<x;g++){var b=h[g];if(b){var c=jn(b,"MM.dd.yyyy"),u=s.get(c)||[];u.includes(m)||(u.push(m),s.set(c,u))}}}}return s}function mae(t,e){return t.length!==e.length?!1:t.every(function(n,s){return n===e[s]})}function pae(t,e){t===void 0&&(t=[]),e===void 0&&(e="react-datepicker__day--holidays");var n=new Map;return t.forEach(function(s){var r=s.date,i=s.holidayName;if(Ci(r)){var o=jn(r,"MM.dd.yyyy"),c=n.get(o)||{className:"",holidayNames:[]};if(!("className"in c&&c.className===e&&mae(c.holidayNames,[i]))){c.className=e;var u=c.holidayNames;c.holidayNames=u?Ma(Ma([],u,!0),[i],!1):[i],n.set(o,c)}}}),n}function gae(t,e,n,s,r){for(var i=r.length,o=[],c=0;c<i;c++){var u=t,f=r[c];f&&(u=T4(u,Ni(f)),u=yy(u,ki(f)),u=R4(u,Co(f)));var m=yy(t,(n+1)*s);Lo(u,e)&&Ta(u,m)&&f!=null&&o.push(f)}return o}function m2(t){return t<10?"0".concat(t):"".concat(t)}function _i(t,e){e===void 0&&(e=cm);var n=Math.ceil(It(t)/e)*e,s=n-(e-1);return{startPeriod:s,endPeriod:n}}function yae(t){var e=new Date(t.getFullYear(),t.getMonth(),t.getDate()),n=new Date(t.getFullYear(),t.getMonth(),t.getDate(),24);return Math.round((+n-+e)/36e5)}function p2(t){var e=t.getSeconds(),n=t.getMilliseconds();return it(t.getTime()-e*1e3-n)}function xae(t,e){return p2(t).getTime()===p2(e).getTime()}function g2(t){if(!Ci(t))throw new Error("Invalid date");var e=new Date(t);return e.setHours(0,0,0,0),e}function u_(t,e){if(!Ci(t)||!Ci(e))throw new Error("Invalid date received");var n=g2(t),s=g2(e);return Ta(n,s)}function xB(t){return t.key===at.Space}var bae=(function(t){ws(e,t);function e(n){var s=t.call(this,n)||this;return s.inputRef=fe.createRef(),s.onTimeChange=function(r){var i,o;s.setState({time:r});var c=s.props.date,u=c instanceof Date&&!isNaN(+c),f=u?c:new Date;if(r?.includes(":")){var m=r.split(":"),h=m[0],g=m[1];f.setHours(Number(h)),f.setMinutes(Number(g))}(o=(i=s.props).onChange)===null||o===void 0||o.call(i,f)},s.renderTimeInput=function(){var r=s.state.time,i=s.props,o=i.date,c=i.timeString,u=i.customTimeInput;return u?v.cloneElement(u,{date:o,value:r,onChange:s.onTimeChange}):fe.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",ref:s.inputRef,onClick:function(){var f;(f=s.inputRef.current)===null||f===void 0||f.focus()},required:!0,value:r,onChange:function(f){s.onTimeChange(f.target.value||c)}})},s.state={time:s.props.timeString},s}return e.getDerivedStateFromProps=function(n,s){return n.timeString!==s.time?{time:n.timeString}:null},e.prototype.render=function(){return fe.createElement("div",{className:"react-datepicker__input-time-container"},fe.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),fe.createElement("div",{className:"react-datepicker-time__input-container"},fe.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))},e})(v.Component),vae=(function(t){ws(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.dayEl=v.createRef(),n.handleClick=function(s){!n.isDisabled()&&n.props.onClick&&n.props.onClick(s)},n.handleMouseEnter=function(s){!n.isDisabled()&&n.props.onMouseEnter&&n.props.onMouseEnter(s)},n.handleOnKeyDown=function(s){var r,i,o=s.key;o===at.Space&&(s.preventDefault(),s.key=at.Enter),(i=(r=n.props).handleOnKeyDown)===null||i===void 0||i.call(r,s)},n.isSameDay=function(s){return Wt(n.props.day,s)},n.isKeyboardSelected=function(){var s;if(n.props.disabledKeyboardNavigation)return!1;var r=n.props.selectsMultiple?(s=n.props.selectedDates)===null||s===void 0?void 0:s.some(function(o){return n.isSameDayOrWeek(o)}):n.isSameDayOrWeek(n.props.selected),i=n.props.preSelection&&n.isDisabled(n.props.preSelection);return!r&&n.isSameDayOrWeek(n.props.preSelection)&&!i},n.isDisabled=function(s){return s===void 0&&(s=n.props.day),Br(s,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,includeDateIntervals:n.props.includeDateIntervals,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.isExcluded=function(){return wS(n.props.day,{excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals})},n.isStartOfWeek=function(){return Wt(n.props.day,No(n.props.day,n.props.locale,n.props.calendarStartDay))},n.isSameWeek=function(s){return n.props.showWeekPicker&&Wt(s,No(n.props.day,n.props.locale,n.props.calendarStartDay))},n.isSameDayOrWeek=function(s){return n.isSameDay(s)||n.isSameWeek(s)},n.getHighLightedClass=function(){var s=n.props,r=s.day,i=s.highlightDates;if(!i)return!1;var o=jn(r,"MM.dd.yyyy");return i.get(o)},n.getHolidaysClass=function(){var s,r=n.props,i=r.day,o=r.holidays;if(!o)return[void 0];var c=jn(i,"MM.dd.yyyy");return o.has(c)?[(s=o.get(c))===null||s===void 0?void 0:s.className]:[void 0]},n.isInRange=function(){var s=n.props,r=s.day,i=s.startDate,o=s.endDate;return!i||!o?!1:wl(r,i,o)},n.isInSelectingRange=function(){var s,r=n.props,i=r.day,o=r.selectsStart,c=r.selectsEnd,u=r.selectsRange,f=r.selectsDisabledDaysInRange,m=r.startDate,h=r.swapRange,g=r.endDate,x=(s=n.props.selectingDate)!==null&&s!==void 0?s:n.props.preSelection;if(!(o||c||u)||!x||!f&&n.isDisabled())return!1;if(o&&g&&(Ta(x,g)||Tl(x,g)))return wl(i,x,g);if(c&&m&&(Lo(x,m)||Tl(x,m)))return wl(i,m,x);if(u&&m&&!g){if(Tl(x,m)||Lo(x,m))return wl(i,m,x);if(h&&Ta(x,m))return wl(i,x,m)}return!1},n.isSelectingRangeStart=function(){var s;if(!n.isInSelectingRange())return!1;var r=n.props,i=r.day,o=r.startDate,c=r.selectsStart,u=r.swapRange,f=r.selectsRange,m=(s=n.props.selectingDate)!==null&&s!==void 0?s:n.props.preSelection;return c?Wt(i,m):f&&u&&o&&m?Wt(i,Ta(m,o)?m:o):Wt(i,o)},n.isSelectingRangeEnd=function(){var s;if(!n.isInSelectingRange())return!1;var r=n.props,i=r.day,o=r.endDate,c=r.selectsEnd,u=r.selectsRange,f=r.swapRange,m=r.startDate,h=(s=n.props.selectingDate)!==null&&s!==void 0?s:n.props.preSelection;return c?Wt(i,h):u&&f&&m&&h?Wt(i,Ta(h,m)?m:h):u?Wt(i,h):Wt(i,o)},n.isRangeStart=function(){var s=n.props,r=s.day,i=s.startDate,o=s.endDate;return!i||!o?!1:Wt(i,r)},n.isRangeEnd=function(){var s=n.props,r=s.day,i=s.startDate,o=s.endDate;return!i||!o?!1:Wt(o,r)},n.isWeekend=function(){var s=cne(n.props.day);return s===0||s===6},n.isAfterMonth=function(){return n.props.month!==void 0&&(n.props.month+1)%12===Ts(n.props.day)},n.isBeforeMonth=function(){return n.props.month!==void 0&&(Ts(n.props.day)+1)%12===n.props.month},n.isCurrentDay=function(){return n.isSameDay(on())},n.isSelected=function(){var s;return n.props.selectsMultiple?(s=n.props.selectedDates)===null||s===void 0?void 0:s.some(function(r){return n.isSameDayOrWeek(r)}):n.isSameDayOrWeek(n.props.selected)},n.getClassNames=function(s){var r=n.props.dayClassName?n.props.dayClassName(s):void 0;return _s("react-datepicker__day",r,"react-datepicker__day--"+nae(n.props.day),{"react-datepicker__day--disabled":n.isDisabled(),"react-datepicker__day--excluded":n.isExcluded(),"react-datepicker__day--selected":n.isSelected(),"react-datepicker__day--keyboard-selected":n.isKeyboardSelected(),"react-datepicker__day--range-start":n.isRangeStart(),"react-datepicker__day--range-end":n.isRangeEnd(),"react-datepicker__day--in-range":n.isInRange(),"react-datepicker__day--in-selecting-range":n.isInSelectingRange(),"react-datepicker__day--selecting-range-start":n.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":n.isSelectingRangeEnd(),"react-datepicker__day--today":n.isCurrentDay(),"react-datepicker__day--weekend":n.isWeekend(),"react-datepicker__day--outside-month":n.isAfterMonth()||n.isBeforeMonth()},n.getHighLightedClass(),n.getHolidaysClass())},n.getAriaLabel=function(){var s=n.props,r=s.day,i=s.ariaLabelPrefixWhenEnabled,o=i===void 0?"Choose":i,c=s.ariaLabelPrefixWhenDisabled,u=c===void 0?"Not available":c,f=n.isDisabled()||n.isExcluded()?u:o;return"".concat(f," ").concat(jn(r,"PPPP",n.props.locale))},n.getTitle=function(){var s=n.props,r=s.day,i=s.holidays,o=i===void 0?new Map:i,c=s.excludeDates,u=jn(r,"MM.dd.yyyy"),f=[];return o.has(u)&&f.push.apply(f,o.get(u).holidayNames),n.isExcluded()&&f.push(c?.filter(function(m){return m instanceof Date?Wt(m,r):Wt(m?.date,r)}).map(function(m){if(!(m instanceof Date))return m?.message})),f.join(", ")},n.getTabIndex=function(){var s=n.props.selected,r=n.props.preSelection,i=!(n.props.showWeekPicker&&(n.props.showWeekNumber||!n.isStartOfWeek()))&&(n.isKeyboardSelected()||n.isSameDay(s)&&Wt(r,s))?0:-1;return i},n.handleFocusDay=function(){var s;n.shouldFocusDay()&&((s=n.dayEl.current)===null||s===void 0||s.focus({preventScroll:!0}))},n.renderDayContents=function(){return n.props.monthShowsDuplicateDaysEnd&&n.isAfterMonth()||n.props.monthShowsDuplicateDaysStart&&n.isBeforeMonth()?null:n.props.renderDayContents?n.props.renderDayContents(UM(n.props.day),n.props.day):UM(n.props.day)},n.render=function(){return fe.createElement("div",{ref:n.dayEl,className:n.getClassNames(n.props.day),onKeyDown:n.handleOnKeyDown,onClick:n.handleClick,onMouseEnter:n.props.usePointerEvent?void 0:n.handleMouseEnter,onPointerEnter:n.props.usePointerEvent?n.handleMouseEnter:void 0,tabIndex:n.getTabIndex(),"aria-label":n.getAriaLabel(),role:"gridcell",title:n.getTitle(),"aria-disabled":n.isDisabled(),"aria-current":n.isCurrentDay()?"date":void 0,"aria-selected":n.isSelected()||n.isInRange()},n.renderDayContents(),n.getTitle()!==""&&fe.createElement("span",{className:"overlay"},n.getTitle()))},n}return e.prototype.componentDidMount=function(){this.handleFocusDay()},e.prototype.componentDidUpdate=function(){this.handleFocusDay()},e.prototype.shouldFocusDay=function(){var n=!1;return this.getTabIndex()===0&&this.isSameDay(this.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(n=!0),this.props.inline&&!this.props.shouldFocusDayInline&&(n=!1),this.isDayActiveElement()&&(n=!0),this.isDuplicateDay()&&(n=!1)),n},e.prototype.isDayActiveElement=function(){var n,s,r;return((s=(n=this.props.containerRef)===null||n===void 0?void 0:n.current)===null||s===void 0?void 0:s.contains(document.activeElement))&&((r=document.activeElement)===null||r===void 0?void 0:r.classList.contains("react-datepicker__day"))},e.prototype.isDuplicateDay=function(){return this.props.monthShowsDuplicateDaysEnd&&this.isAfterMonth()||this.props.monthShowsDuplicateDaysStart&&this.isBeforeMonth()},e})(v.Component),_ae=(function(t){ws(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.weekNumberEl=v.createRef(),n.handleClick=function(s){n.props.onClick&&n.props.onClick(s)},n.handleOnKeyDown=function(s){var r,i,o=s.key;o===at.Space&&(s.preventDefault(),s.key=at.Enter),(i=(r=n.props).handleOnKeyDown)===null||i===void 0||i.call(r,s)},n.isKeyboardSelected=function(){return!n.props.disabledKeyboardNavigation&&!Wt(n.props.date,n.props.selected)&&Wt(n.props.date,n.props.preSelection)},n.getTabIndex=function(){return n.props.showWeekPicker&&n.props.showWeekNumber&&(n.isKeyboardSelected()||Wt(n.props.date,n.props.selected)&&Wt(n.props.preSelection,n.props.selected))?0:-1},n.handleFocusWeekNumber=function(s){var r=!1;n.getTabIndex()===0&&!s?.isInputFocused&&Wt(n.props.date,n.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(r=!0),n.props.inline&&!n.props.shouldFocusDayInline&&(r=!1),n.props.containerRef&&n.props.containerRef.current&&n.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(r=!0)),r&&n.weekNumberEl.current&&n.weekNumberEl.current.focus({preventScroll:!0})},n}return Object.defineProperty(e,"defaultProps",{get:function(){return{ariaLabelPrefix:"week "}},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){this.handleFocusWeekNumber()},e.prototype.componentDidUpdate=function(n){this.handleFocusWeekNumber(n)},e.prototype.render=function(){var n=this.props,s=n.weekNumber,r=n.isWeekDisabled,i=n.ariaLabelPrefix,o=i===void 0?e.defaultProps.ariaLabelPrefix:i,c=n.onClick,u={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!c&&!r,"react-datepicker__week-number--selected":!!c&&Wt(this.props.date,this.props.selected)};return fe.createElement("div",{ref:this.weekNumberEl,className:_s(u),"aria-label":"".concat(o," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex(),role:"gridcell"},s)},e})(v.Component),Aae=(function(t){ws(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.isDisabled=function(s){return Br(s,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,includeDateIntervals:n.props.includeDateIntervals,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.handleDayClick=function(s,r){n.props.onDayClick&&n.props.onDayClick(s,r)},n.handleDayMouseEnter=function(s){n.props.onDayMouseEnter&&n.props.onDayMouseEnter(s)},n.handleWeekClick=function(s,r,i){for(var o,c,u,f=new Date(s),m=0;m<7;m++){var h=new Date(s);h.setDate(h.getDate()+m);var g=!n.isDisabled(h);if(g){f=h;break}}typeof n.props.onWeekSelect=="function"&&n.props.onWeekSelect(f,r,i),n.props.showWeekPicker&&n.handleDayClick(f,i),((o=n.props.shouldCloseOnSelect)!==null&&o!==void 0?o:e.defaultProps.shouldCloseOnSelect)&&((u=(c=n.props).setOpen)===null||u===void 0||u.call(c,!1))},n.formatWeekNumber=function(s){return n.props.formatWeekNumber?n.props.formatWeekNumber(s):tae(s)},n.isWeekDisabled=function(){for(var s=n.startOfWeek(),r=$r(s,6),i=new Date(s);i<=r;){if(!n.isDisabled(i))return!1;i=$r(i,1)}return!0},n.renderDays=function(){var s=n.startOfWeek(),r=[],i=n.formatWeekNumber(s);if(n.props.showWeekNumber){var o=n.props.onWeekSelect||n.props.showWeekPicker?n.handleWeekClick.bind(n,s,i):void 0;r.push(fe.createElement(_ae,Yt({key:"W"},e.defaultProps,n.props,{weekNumber:i,isWeekDisabled:n.isWeekDisabled(),date:s,onClick:o})))}return r.concat([0,1,2,3,4,5,6].map(function(c){var u=$r(s,c);return fe.createElement(vae,Yt({},e.defaultProps,n.props,{ariaLabelPrefixWhenEnabled:n.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:n.props.disabledDayAriaLabelPrefix,key:u.valueOf(),day:u,onClick:n.handleDayClick.bind(n,u),onMouseEnter:n.handleDayMouseEnter.bind(n,u)}))}))},n.startOfWeek=function(){return No(n.props.day,n.props.locale,n.props.calendarStartDay)},n.isKeyboardSelected=function(){return!n.props.disabledKeyboardNavigation&&!Wt(n.startOfWeek(),n.props.selected)&&Wt(n.startOfWeek(),n.props.preSelection)},n}return Object.defineProperty(e,"defaultProps",{get:function(){return{shouldCloseOnSelect:!0}},enumerable:!1,configurable:!0}),e.prototype.render=function(){var n={"react-datepicker__week":!0,"react-datepicker__week--selected":Wt(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()},s=this.props.weekClassName?this.props.weekClassName(this.startOfWeek()):void 0;return fe.createElement("div",{className:_s(n,s),role:"row"},this.renderDays())},e})(v.Component),vf,wae=6,mu={TWO_COLUMNS:"two_columns",THREE_COLUMNS:"three_columns",FOUR_COLUMNS:"four_columns"},d_=(vf={},vf[mu.TWO_COLUMNS]={grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2},vf[mu.THREE_COLUMNS]={grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3},vf[mu.FOUR_COLUMNS]={grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4},vf),rg=1;function y2(t,e){return t?mu.FOUR_COLUMNS:e?mu.TWO_COLUMNS:mu.THREE_COLUMNS}var jae=(function(t){ws(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.MONTH_REFS=Ma([],Array(12),!0).map(function(){return v.createRef()}),n.QUARTER_REFS=Ma([],Array(4),!0).map(function(){return v.createRef()}),n.isDisabled=function(s){return Br(s,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,includeDateIntervals:n.props.includeDateIntervals,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.isExcluded=function(s){return wS(s,{excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals})},n.handleDayClick=function(s,r){var i,o;(o=(i=n.props).onDayClick)===null||o===void 0||o.call(i,s,r,n.props.orderInDisplay)},n.handleDayMouseEnter=function(s){var r,i;(i=(r=n.props).onDayMouseEnter)===null||i===void 0||i.call(r,s)},n.handleMouseLeave=function(){var s,r;(r=(s=n.props).onMouseLeave)===null||r===void 0||r.call(s)},n.isRangeStartMonth=function(s){var r=n.props,i=r.day,o=r.startDate,c=r.endDate;return!o||!c?!1:Fs(Lr(i,s),o)},n.isRangeStartQuarter=function(s){var r=n.props,i=r.day,o=r.startDate,c=r.endDate;return!o||!c?!1:Cy(nu(i,s),o)},n.isRangeEndMonth=function(s){var r=n.props,i=r.day,o=r.startDate,c=r.endDate;return!o||!c?!1:Fs(Lr(i,s),c)},n.isRangeEndQuarter=function(s){var r=n.props,i=r.day,o=r.startDate,c=r.endDate;return!o||!c?!1:Cy(nu(i,s),c)},n.isInSelectingRangeMonth=function(s){var r,i=n.props,o=i.day,c=i.selectsStart,u=i.selectsEnd,f=i.selectsRange,m=i.startDate,h=i.endDate,g=(r=n.props.selectingDate)!==null&&r!==void 0?r:n.props.preSelection;return!(c||u||f)||!g?!1:c&&h?eg(g,h,s,o):u&&m||f&&m&&!h?eg(m,g,s,o):!1},n.isSelectingMonthRangeStart=function(s){var r;if(!n.isInSelectingRangeMonth(s))return!1;var i=n.props,o=i.day,c=i.startDate,u=i.selectsStart,f=Lr(o,s),m=(r=n.props.selectingDate)!==null&&r!==void 0?r:n.props.preSelection;return u?Fs(f,m):Fs(f,c)},n.isSelectingMonthRangeEnd=function(s){var r;if(!n.isInSelectingRangeMonth(s))return!1;var i=n.props,o=i.day,c=i.endDate,u=i.selectsEnd,f=i.selectsRange,m=Lr(o,s),h=(r=n.props.selectingDate)!==null&&r!==void 0?r:n.props.preSelection;return u||f?Fs(m,h):Fs(m,c)},n.isInSelectingRangeQuarter=function(s){var r,i=n.props,o=i.day,c=i.selectsStart,u=i.selectsEnd,f=i.selectsRange,m=i.startDate,h=i.endDate,g=(r=n.props.selectingDate)!==null&&r!==void 0?r:n.props.preSelection;return!(c||u||f)||!g?!1:c&&h?sg(g,h,s,o):u&&m||f&&m&&!h?sg(m,g,s,o):!1},n.isWeekInMonth=function(s){var r=n.props.day,i=$r(s,6);return Fs(s,r)||Fs(i,r)},n.isCurrentMonth=function(s,r){return It(s)===It(on())&&r===Ts(on())},n.isCurrentQuarter=function(s,r){return It(s)===It(on())&&r===zl(on())},n.isSelectedMonth=function(s,r,i){return Ts(i)===r&&It(s)===It(i)},n.isSelectMonthInList=function(s,r,i){return i.some(function(o){return n.isSelectedMonth(s,r,o)})},n.isSelectedQuarter=function(s,r,i){return zl(s)===r&&It(s)===It(i)},n.isMonthSelected=function(){var s=n.props,r=s.day,i=s.selected,o=s.selectedDates,c=s.selectsMultiple,u=Ts(r);return c?o?.some(function(f){return n.isSelectedMonth(r,u,f)}):!!i&&n.isSelectedMonth(r,u,i)},n.renderWeeks=function(){for(var s=[],r=n.props.fixedHeight,i=0,o=!1,c=No(Di(n.props.day),n.props.locale,n.props.calendarStartDay),u=function(b){return n.props.showWeekPicker?No(b,n.props.locale,n.props.calendarStartDay):n.props.preSelection},f=function(b){return n.props.showWeekPicker?No(b,n.props.locale,n.props.calendarStartDay):n.props.selected},m=n.props.selected?f(n.props.selected):void 0,h=n.props.preSelection?u(n.props.preSelection):void 0;s.push(fe.createElement(Aae,Yt({},n.props,{ariaLabelPrefix:n.props.weekAriaLabelPrefix,key:i,day:c,month:Ts(n.props.day),onDayClick:n.handleDayClick,onDayMouseEnter:n.handleDayMouseEnter,selected:m,preSelection:h,showWeekNumber:n.props.showWeekNumbers}))),!o;){i++,c=Sh(c,1);var g=r&&i>=wae,x=!r&&!n.isWeekInMonth(c);if(g||x)if(n.props.peekNextMonth)o=!0;else break}return s},n.onMonthClick=function(s,r){var i=n.isMonthDisabledForLabelDate(r),o=i.isDisabled,c=i.labelDate;o||n.handleDayClick(Di(c),s)},n.onMonthMouseEnter=function(s){var r=n.isMonthDisabledForLabelDate(s),i=r.isDisabled,o=r.labelDate;i||n.handleDayMouseEnter(Di(o))},n.handleMonthNavigation=function(s,r){var i,o,c,u;(o=(i=n.props).setPreSelection)===null||o===void 0||o.call(i,r),(u=(c=n.MONTH_REFS[s])===null||c===void 0?void 0:c.current)===null||u===void 0||u.focus()},n.handleKeyboardNavigation=function(s,r,i){var o,c=n.props,u=c.selected,f=c.preSelection,m=c.setPreSelection,h=c.minDate,g=c.maxDate,x=c.showFourColumnMonthYearPicker,b=c.showTwoColumnMonthYearPicker;if(f){var A=y2(x,b),_=n.getVerticalOffset(A),j=(o=d_[A])===null||o===void 0?void 0:o.grid,C=function(M,T,O){var I,$,H=T,V=O;switch(M){case at.ArrowRight:H=Yr(T,rg),V=O===11?0:O+rg;break;case at.ArrowLeft:H=$l(T,rg),V=O===0?11:O-rg;break;case at.ArrowUp:H=$l(T,_),V=!((I=j?.[0])===null||I===void 0)&&I.includes(O)?O+12-_:O-_;break;case at.ArrowDown:H=Yr(T,_),V=!(($=j?.[j.length-1])===null||$===void 0)&&$.includes(O)?O-12+_:O+_;break}return{newCalculatedDate:H,newCalculatedMonth:V}},k=function(M,T,O){for(var I=40,$=M,H=!1,V=0,G=C($,T,O),U=G.newCalculatedDate,R=G.newCalculatedMonth;!H;){if(V>=I){U=T,R=O;break}if(h&&U<h){$=at.ArrowRight;var P=C($,U,R);U=P.newCalculatedDate,R=P.newCalculatedMonth}if(g&&U>g){$=at.ArrowLeft;var P=C($,U,R);U=P.newCalculatedDate,R=P.newCalculatedMonth}if(cae(U,n.props)){var P=C($,U,R);U=P.newCalculatedDate,R=P.newCalculatedMonth}else H=!0;V++}return{newCalculatedDate:U,newCalculatedMonth:R}};if(r===at.Enter){n.isMonthDisabled(i)||(n.onMonthClick(s,i),m?.(u));return}var E=k(r,f,i),N=E.newCalculatedDate,L=E.newCalculatedMonth;switch(r){case at.ArrowRight:case at.ArrowLeft:case at.ArrowUp:case at.ArrowDown:n.handleMonthNavigation(L,N);break}}},n.getVerticalOffset=function(s){var r,i;return(i=(r=d_[s])===null||r===void 0?void 0:r.verticalNavigationOffset)!==null&&i!==void 0?i:0},n.onMonthKeyDown=function(s,r){var i=n.props,o=i.disabledKeyboardNavigation,c=i.handleOnMonthKeyDown,u=s.key;u!==at.Tab&&s.preventDefault(),o||n.handleKeyboardNavigation(s,u,r),c&&c(s)},n.onQuarterClick=function(s,r){var i=nu(n.props.day,r);tg(i,n.props)||n.handleDayClick(s2(i),s)},n.onQuarterMouseEnter=function(s){var r=nu(n.props.day,s);tg(r,n.props)||n.handleDayMouseEnter(s2(r))},n.handleQuarterNavigation=function(s,r){var i,o,c,u;n.isDisabled(r)||n.isExcluded(r)||((o=(i=n.props).setPreSelection)===null||o===void 0||o.call(i,r),(u=(c=n.QUARTER_REFS[s-1])===null||c===void 0?void 0:c.current)===null||u===void 0||u.focus())},n.onQuarterKeyDown=function(s,r){var i,o,c=s.key;if(!n.props.disabledKeyboardNavigation)switch(c){case at.Enter:n.onQuarterClick(s,r),(o=(i=n.props).setPreSelection)===null||o===void 0||o.call(i,n.props.selected);break;case at.ArrowRight:if(!n.props.preSelection)break;n.handleQuarterNavigation(r===4?1:r+1,Ax(n.props.preSelection,1));break;case at.ArrowLeft:if(!n.props.preSelection)break;n.handleQuarterNavigation(r===1?4:r-1,Z4(n.props.preSelection));break}},n.isMonthDisabledForLabelDate=function(s){var r,i=n.props,o=i.day,c=i.minDate,u=i.maxDate,f=i.excludeDates,m=i.includeDates,h=Lr(o,s);return{isDisabled:(r=(c||u||f||m)&&pB(h,n.props))!==null&&r!==void 0?r:!1,labelDate:h}},n.isMonthDisabled=function(s){var r=n.isMonthDisabledForLabelDate(s).isDisabled;return r},n.getMonthClassNames=function(s){var r=n.props,i=r.day,o=r.startDate,c=r.endDate,u=r.preSelection,f=r.monthClassName,m=f?f(Lr(i,s)):void 0,h=n.getSelection();return _s("react-datepicker__month-text","react-datepicker__month-".concat(s),m,{"react-datepicker__month-text--disabled":n.isMonthDisabled(s),"react-datepicker__month-text--selected":h?n.isSelectMonthInList(i,s,h):void 0,"react-datepicker__month-text--keyboard-selected":!n.props.disabledKeyboardNavigation&&u&&n.isSelectedMonth(i,s,u)&&!n.isMonthSelected()&&!n.isMonthDisabled(s),"react-datepicker__month-text--in-selecting-range":n.isInSelectingRangeMonth(s),"react-datepicker__month-text--in-range":o&&c?eg(o,c,s,i):void 0,"react-datepicker__month-text--range-start":n.isRangeStartMonth(s),"react-datepicker__month-text--range-end":n.isRangeEndMonth(s),"react-datepicker__month-text--selecting-range-start":n.isSelectingMonthRangeStart(s),"react-datepicker__month-text--selecting-range-end":n.isSelectingMonthRangeEnd(s),"react-datepicker__month-text--today":n.isCurrentMonth(i,s)})},n.getTabIndex=function(s){if(n.props.preSelection==null)return"-1";var r=Ts(n.props.preSelection),i=n.isMonthDisabledForLabelDate(r).isDisabled,o=s===r&&!(i||n.props.disabledKeyboardNavigation)?"0":"-1";return o},n.getQuarterTabIndex=function(s){if(n.props.preSelection==null)return"-1";var r=zl(n.props.preSelection),i=tg(n.props.day,n.props),o=s===r&&!(i||n.props.disabledKeyboardNavigation)?"0":"-1";return o},n.getAriaLabel=function(s){var r=n.props,i=r.chooseDayAriaLabelPrefix,o=i===void 0?"Choose":i,c=r.disabledDayAriaLabelPrefix,u=c===void 0?"Not available":c,f=r.day,m=r.locale,h=Lr(f,s),g=n.isDisabled(h)||n.isExcluded(h)?u:o;return"".concat(g," ").concat(jn(h,"MMMM yyyy",m))},n.getQuarterClassNames=function(s){var r=n.props,i=r.day,o=r.startDate,c=r.endDate,u=r.selected,f=r.minDate,m=r.maxDate,h=r.excludeDates,g=r.includeDates,x=r.filterDate,b=r.preSelection,A=r.disabledKeyboardNavigation,_=(f||m||h||g||x)&&tg(nu(i,s),n.props);return _s("react-datepicker__quarter-text","react-datepicker__quarter-".concat(s),{"react-datepicker__quarter-text--disabled":_,"react-datepicker__quarter-text--selected":u?n.isSelectedQuarter(i,s,u):void 0,"react-datepicker__quarter-text--keyboard-selected":!A&&b&&n.isSelectedQuarter(i,s,b)&&!_,"react-datepicker__quarter-text--in-selecting-range":n.isInSelectingRangeQuarter(s),"react-datepicker__quarter-text--in-range":o&&c?sg(o,c,s,i):void 0,"react-datepicker__quarter-text--range-start":n.isRangeStartQuarter(s),"react-datepicker__quarter-text--range-end":n.isRangeEndQuarter(s),"react-datepicker__quarter-text--today":n.isCurrentQuarter(i,s)})},n.getMonthContent=function(s){var r=n.props,i=r.showFullMonthYearPicker,o=r.renderMonthContent,c=r.locale,u=r.day,f=mB(s,c),m=AS(s,c);return o?o(s,f,m,u):i?m:f},n.getQuarterContent=function(s){var r,i=n.props,o=i.renderQuarterContent,c=i.locale,u=lae(s,c);return(r=o?.(s,u))!==null&&r!==void 0?r:u},n.renderMonths=function(){var s,r=n.props,i=r.showTwoColumnMonthYearPicker,o=r.showFourColumnMonthYearPicker,c=r.day,u=r.selected,f=(s=d_[y2(o,i)])===null||s===void 0?void 0:s.grid;return f?.map(function(m,h){return fe.createElement("div",{className:"react-datepicker__month-wrapper",key:h},m.map(function(g,x){return fe.createElement("div",{ref:n.MONTH_REFS[g],key:x,onClick:function(b){n.onMonthClick(b,g)},onKeyDown:function(b){xB(b)&&(b.preventDefault(),b.key=at.Enter),n.onMonthKeyDown(b,g)},onMouseEnter:n.props.usePointerEvent?void 0:function(){return n.onMonthMouseEnter(g)},onPointerEnter:n.props.usePointerEvent?function(){return n.onMonthMouseEnter(g)}:void 0,tabIndex:Number(n.getTabIndex(g)),className:n.getMonthClassNames(g),"aria-disabled":n.isMonthDisabled(g),role:"option","aria-label":n.getAriaLabel(g),"aria-current":n.isCurrentMonth(c,g)?"date":void 0,"aria-selected":u?n.isSelectedMonth(c,g,u):void 0},n.getMonthContent(g))}))})},n.renderQuarters=function(){var s=n.props,r=s.day,i=s.selected,o=[1,2,3,4];return fe.createElement("div",{className:"react-datepicker__quarter-wrapper"},o.map(function(c,u){return fe.createElement("div",{key:u,ref:n.QUARTER_REFS[u],role:"option",onClick:function(f){n.onQuarterClick(f,c)},onKeyDown:function(f){n.onQuarterKeyDown(f,c)},onMouseEnter:n.props.usePointerEvent?void 0:function(){return n.onQuarterMouseEnter(c)},onPointerEnter:n.props.usePointerEvent?function(){return n.onQuarterMouseEnter(c)}:void 0,className:n.getQuarterClassNames(c),"aria-selected":i?n.isSelectedQuarter(r,c,i):void 0,tabIndex:Number(n.getQuarterTabIndex(c)),"aria-current":n.isCurrentQuarter(r,c)?"date":void 0},n.getQuarterContent(c))}))},n.getClassNames=function(){var s=n.props,r=s.selectingDate,i=s.selectsStart,o=s.selectsEnd,c=s.showMonthYearPicker,u=s.showQuarterYearPicker,f=s.showWeekPicker;return _s("react-datepicker__month",{"react-datepicker__month--selecting-range":r&&(i||o)},{"react-datepicker__monthPicker":c},{"react-datepicker__quarterPicker":u},{"react-datepicker__weekPicker":f})},n}return e.prototype.getSelection=function(){var n=this.props,s=n.selected,r=n.selectedDates,i=n.selectsMultiple;if(i)return r;if(s)return[s]},e.prototype.render=function(){var n=this.props,s=n.showMonthYearPicker,r=n.showQuarterYearPicker,i=n.day,o=n.ariaLabelPrefix,c=o===void 0?"Month ":o,u=c?c.trim()+" ":"",f=s||r;return f?fe.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":"".concat(u).concat(jn(i,"MMMM, yyyy",this.props.locale)),role:"listbox"},s?this.renderMonths():this.renderQuarters()):fe.createElement("div",{role:"table"},this.props.dayNamesHeader&&fe.createElement("div",{role:"rowgroup"},this.props.dayNamesHeader),fe.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":"".concat(u).concat(jn(i,"MMMM, yyyy",this.props.locale)),role:"rowgroup"},this.renderWeeks()))},e})(v.Component),Sae=(function(t){ws(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.monthOptionButtonsRef={},n.isSelectedMonth=function(s){return n.props.month===s},n.handleOptionKeyDown=function(s,r){var i;switch(r.key){case"Enter":r.preventDefault(),n.onChange(s);break;case"Escape":r.preventDefault(),n.props.onCancel();break;case"ArrowUp":case"ArrowDown":{r.preventDefault();var o=(s+(r.key==="ArrowUp"?-1:1)+n.props.monthNames.length)%n.props.monthNames.length;(i=n.monthOptionButtonsRef[o])===null||i===void 0||i.focus();break}}},n.renderOptions=function(){return n.monthOptionButtonsRef={},n.props.monthNames.map(function(s,r){return fe.createElement("div",{ref:function(i){n.monthOptionButtonsRef[r]=i,n.isSelectedMonth(r)&&i?.focus()},role:"button",tabIndex:0,className:n.isSelectedMonth(r)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:s,onClick:n.onChange.bind(n,r),onKeyDown:n.handleOptionKeyDown.bind(n,r),"aria-selected":n.isSelectedMonth(r)?"true":void 0},n.isSelectedMonth(r)?fe.createElement("span",{className:"react-datepicker__month-option--selected"},"✓"):"",s)})},n.onChange=function(s){return n.props.onChange(s)},n.handleClickOutside=function(){return n.props.onCancel()},n}return e.prototype.render=function(){return fe.createElement(Ex,{className:"react-datepicker__month-dropdown",onClickOutside:this.handleClickOutside},this.renderOptions())},e})(v.Component),Cae=(function(t){ws(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state={dropdownVisible:!1},n.renderSelectOptions=function(s){return s.map(function(r,i){return fe.createElement("option",{key:r,value:i},r)})},n.renderSelectMode=function(s){return fe.createElement("select",{value:n.props.month,className:"react-datepicker__month-select",onChange:function(r){return n.onChange(parseInt(r.target.value))}},n.renderSelectOptions(s))},n.renderReadView=function(s,r){return fe.createElement("button",{key:"read",type:"button",style:{visibility:s?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:n.toggleDropdown},fe.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),fe.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},r[n.props.month]))},n.renderDropdown=function(s){return fe.createElement(Sae,Yt({key:"dropdown"},n.props,{monthNames:s,onChange:n.onChange,onCancel:n.toggleDropdown}))},n.renderScrollMode=function(s){var r=n.state.dropdownVisible,i=[n.renderReadView(!r,s)];return r&&i.unshift(n.renderDropdown(s)),i},n.onChange=function(s){n.toggleDropdown(),s!==n.props.month&&n.props.onChange(s)},n.toggleDropdown=function(){return n.setState({dropdownVisible:!n.state.dropdownVisible})},n}return e.prototype.render=function(){var n=this,s=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(i){return mB(i,n.props.locale)}:function(i){return AS(i,n.props.locale)}),r;switch(this.props.dropdownMode){case"scroll":r=this.renderScrollMode(s);break;case"select":r=this.renderSelectMode(s);break}return fe.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},r)},e})(v.Component);function Nae(t,e){for(var n=[],s=Di(t),r=Di(e);!Lo(s,r);)n.push(on(s)),s=Yr(s,1);return n}var kae=(function(t){ws(e,t);function e(n){var s=t.call(this,n)||this;return s.renderOptions=function(){return s.state.monthYearsList.map(function(r){var i=RA(r),o=Ca(s.props.date,r)&&Fs(s.props.date,r);return fe.createElement("div",{className:o?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:i,onClick:s.onChange.bind(s,i),"aria-selected":o?"true":void 0},o?fe.createElement("span",{className:"react-datepicker__month-year-option--selected"},"✓"):"",jn(r,s.props.dateFormat,s.props.locale))})},s.onChange=function(r){return s.props.onChange(r)},s.handleClickOutside=function(){s.props.onCancel()},s.state={monthYearsList:Nae(s.props.minDate,s.props.maxDate)},s}return e.prototype.render=function(){var n=_s({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return fe.createElement(Ex,{className:n,onClickOutside:this.handleClickOutside},this.renderOptions())},e})(v.Component),Dae=(function(t){ws(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state={dropdownVisible:!1},n.renderSelectOptions=function(){for(var s=Di(n.props.minDate),r=Di(n.props.maxDate),i=[];!Lo(s,r);){var o=RA(s);i.push(fe.createElement("option",{key:o,value:o},jn(s,n.props.dateFormat,n.props.locale))),s=Yr(s,1)}return i},n.onSelectChange=function(s){n.onChange(parseInt(s.target.value))},n.renderSelectMode=function(){return fe.createElement("select",{value:RA(Di(n.props.date)),className:"react-datepicker__month-year-select",onChange:n.onSelectChange},n.renderSelectOptions())},n.renderReadView=function(s){var r=jn(n.props.date,n.props.dateFormat,n.props.locale);return fe.createElement("div",{key:"read",style:{visibility:s?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:n.toggleDropdown},fe.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),fe.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},r))},n.renderDropdown=function(){return fe.createElement(kae,Yt({key:"dropdown"},n.props,{onChange:n.onChange,onCancel:n.toggleDropdown}))},n.renderScrollMode=function(){var s=n.state.dropdownVisible,r=[n.renderReadView(!s)];return s&&r.unshift(n.renderDropdown()),r},n.onChange=function(s){n.toggleDropdown();var r=on(s);Ca(n.props.date,r)&&Fs(n.props.date,r)||n.props.onChange(r)},n.toggleDropdown=function(){return n.setState({dropdownVisible:!n.state.dropdownVisible})},n}return e.prototype.render=function(){var n;switch(this.props.dropdownMode){case"scroll":n=this.renderScrollMode();break;case"select":n=this.renderSelectMode();break}return fe.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},n)},e})(v.Component),Eae=(function(t){ws(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state={height:null},n.scrollToTheSelectedTime=function(){requestAnimationFrame(function(){var s,r,i;n.list&&(n.list.scrollTop=(i=n.centerLi&&e.calcCenterPosition(n.props.monthRef?n.props.monthRef.clientHeight-((r=(s=n.header)===null||s===void 0?void 0:s.clientHeight)!==null&&r!==void 0?r:0):n.list.clientHeight,n.centerLi))!==null&&i!==void 0?i:0)})},n.handleClick=function(s){var r,i;(n.props.minTime||n.props.maxTime)&&l2(s,n.props)||(n.props.excludeTimes||n.props.includeTimes||n.props.filterTime)&&o2(s,n.props)||(i=(r=n.props).onChange)===null||i===void 0||i.call(r,s)},n.isSelectedTime=function(s){return n.props.selected&&xae(n.props.selected,s)},n.isDisabledTime=function(s){return(n.props.minTime||n.props.maxTime)&&l2(s,n.props)||(n.props.excludeTimes||n.props.includeTimes||n.props.filterTime)&&o2(s,n.props)},n.liClasses=function(s){var r,i=["react-datepicker__time-list-item",n.props.timeClassName?n.props.timeClassName(s):void 0];return n.isSelectedTime(s)&&i.push("react-datepicker__time-list-item--selected"),n.isDisabledTime(s)&&i.push("react-datepicker__time-list-item--disabled"),n.props.injectTimes&&(Ni(s)*3600+ki(s)*60+Co(s))%(((r=n.props.intervals)!==null&&r!==void 0?r:e.defaultProps.intervals)*60)!==0&&i.push("react-datepicker__time-list-item--injected"),i.join(" ")},n.handleOnKeyDown=function(s,r){var i,o;s.key===at.Space&&(s.preventDefault(),s.key=at.Enter),(s.key===at.ArrowUp||s.key===at.ArrowLeft)&&s.target instanceof HTMLElement&&s.target.previousSibling&&(s.preventDefault(),s.target.previousSibling instanceof HTMLElement&&s.target.previousSibling.focus()),(s.key===at.ArrowDown||s.key===at.ArrowRight)&&s.target instanceof HTMLElement&&s.target.nextSibling&&(s.preventDefault(),s.target.nextSibling instanceof HTMLElement&&s.target.nextSibling.focus()),s.key===at.Enter&&n.handleClick(r),(o=(i=n.props).handleOnKeyDown)===null||o===void 0||o.call(i,s)},n.renderTimes=function(){for(var s,r=[],i=typeof n.props.format=="string"?n.props.format:"p",o=(s=n.props.intervals)!==null&&s!==void 0?s:e.defaultProps.intervals,c=n.props.selected||n.props.openToDate||on(),u=Fg(c),f=n.props.injectTimes&&n.props.injectTimes.sort(function(_,j){return _.getTime()-j.getTime()}),m=60*yae(c),h=m/o,g=0;g<h;g++){var x=yy(u,g*o);if(r.push(x),f){var b=gae(u,x,g,o,f);r=r.concat(b)}}var A=r.reduce(function(_,j){return j.getTime()<=c.getTime()?j:_},r[0]);return r.map(function(_){return fe.createElement("li",{key:_.valueOf(),onClick:n.handleClick.bind(n,_),className:n.liClasses(_),ref:function(j){_===A&&(n.centerLi=j)},onKeyDown:function(j){n.handleOnKeyDown(j,_)},tabIndex:_===A?0:-1,role:"option","aria-selected":n.isSelectedTime(_)?"true":void 0,"aria-disabled":n.isDisabledTime(_)?"true":void 0},jn(_,i,n.props.locale))})},n.renderTimeCaption=function(){return n.props.showTimeCaption===!1?fe.createElement(fe.Fragment,null):fe.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(n.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(s){n.header=s}},fe.createElement("div",{className:"react-datepicker-time__header"},n.props.timeCaption))},n}return Object.defineProperty(e,"defaultProps",{get:function(){return{intervals:30,todayButton:null,timeCaption:"Time",showTimeCaption:!0}},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){this.scrollToTheSelectedTime(),this.observeDatePickerHeightChanges()},e.prototype.componentWillUnmount=function(){var n;(n=this.resizeObserver)===null||n===void 0||n.disconnect()},e.prototype.observeDatePickerHeightChanges=function(){var n=this,s=this.props.monthRef;this.updateContainerHeight(),s&&(this.resizeObserver=new ResizeObserver(function(){n.updateContainerHeight()}),this.resizeObserver.observe(s))},e.prototype.updateContainerHeight=function(){this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})},e.prototype.render=function(){var n=this,s,r=this.state.height;return fe.createElement("div",{className:"react-datepicker__time-container ".concat(((s=this.props.todayButton)!==null&&s!==void 0?s:e.defaultProps.todayButton)?"react-datepicker__time-container--with-today-button":"")},this.renderTimeCaption(),fe.createElement("div",{className:"react-datepicker__time"},fe.createElement("div",{className:"react-datepicker__time-box"},fe.createElement("ul",{className:"react-datepicker__time-list",ref:function(i){n.list=i},style:r?{height:r}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))},e.calcCenterPosition=function(n,s){return s.offsetTop-(n/2-s.clientHeight/2)},e})(v.Component),x2=3,Tae=(function(t){ws(e,t);function e(n){var s=t.call(this,n)||this;return s.YEAR_REFS=Ma([],Array(s.props.yearItemNumber),!0).map(function(){return v.createRef()}),s.isDisabled=function(r){return Br(r,{minDate:s.props.minDate,maxDate:s.props.maxDate,excludeDates:s.props.excludeDates,includeDates:s.props.includeDates,filterDate:s.props.filterDate})},s.isExcluded=function(r){return wS(r,{excludeDates:s.props.excludeDates})},s.selectingDate=function(){var r;return(r=s.props.selectingDate)!==null&&r!==void 0?r:s.props.preSelection},s.updateFocusOnPaginate=function(r){var i=function(){var o,c;(c=(o=s.YEAR_REFS[r])===null||o===void 0?void 0:o.current)===null||c===void 0||c.focus()};window.requestAnimationFrame(i)},s.handleYearClick=function(r,i){s.props.onDayClick&&s.props.onDayClick(r,i)},s.handleYearNavigation=function(r,i){var o,c,u,f,m=s.props,h=m.date,g=m.yearItemNumber;if(!(h===void 0||g===void 0)){var x=_i(h,g).startPeriod;s.isDisabled(i)||s.isExcluded(i)||((c=(o=s.props).setPreSelection)===null||c===void 0||c.call(o,i),r-x<0?s.updateFocusOnPaginate(g-(x-r)):r-x>=g?s.updateFocusOnPaginate(Math.abs(g-(r-x))):(f=(u=s.YEAR_REFS[r-x])===null||u===void 0?void 0:u.current)===null||f===void 0||f.focus())}},s.isSameDay=function(r,i){return Wt(r,i)},s.isCurrentYear=function(r){return r===It(on())},s.isRangeStart=function(r){return s.props.startDate&&s.props.endDate&&Ca(Sa(on(),r),s.props.startDate)},s.isRangeEnd=function(r){return s.props.startDate&&s.props.endDate&&Ca(Sa(on(),r),s.props.endDate)},s.isInRange=function(r){return ng(r,s.props.startDate,s.props.endDate)},s.isInSelectingRange=function(r){var i=s.props,o=i.selectsStart,c=i.selectsEnd,u=i.selectsRange,f=i.startDate,m=i.endDate;return!(o||c||u)||!s.selectingDate()?!1:o&&m?ng(r,s.selectingDate(),m):c&&f||u&&f&&!m?ng(r,f,s.selectingDate()):!1},s.isSelectingRangeStart=function(r){var i;if(!s.isInSelectingRange(r))return!1;var o=s.props,c=o.startDate,u=o.selectsStart,f=Sa(on(),r);return u?Ca(f,(i=s.selectingDate())!==null&&i!==void 0?i:null):Ca(f,c??null)},s.isSelectingRangeEnd=function(r){var i;if(!s.isInSelectingRange(r))return!1;var o=s.props,c=o.endDate,u=o.selectsEnd,f=o.selectsRange,m=Sa(on(),r);return u||f?Ca(m,(i=s.selectingDate())!==null&&i!==void 0?i:null):Ca(m,c??null)},s.isKeyboardSelected=function(r){if(!(s.props.disabledKeyboardNavigation||s.props.date===void 0||s.props.preSelection==null)){var i=s.props,o=i.minDate,c=i.maxDate,u=i.excludeDates,f=i.includeDates,m=i.filterDate,h=i.selected,g=If(Sa(s.props.date,r)),x=(o||c||u||f||m)&&Bg(r,s.props),b=!!h&&Wt(g,If(h)),A=Wt(g,If(s.props.preSelection));return!s.props.inline&&!b&&A&&!x}},s.isSelectedYear=function(r){var i=s.props,o=i.selectsMultiple,c=i.selected,u=i.selectedDates;return o?u?.some(function(f){return r===It(f)}):!!c&&r===It(c)},s.onYearClick=function(r,i){var o=s.props.date;o!==void 0&&s.handleYearClick(If(Sa(o,i)),r)},s.onYearKeyDown=function(r,i){var o,c,u=r.key,f=s.props,m=f.date,h=f.yearItemNumber,g=f.handleOnKeyDown;if(u!==at.Tab&&r.preventDefault(),!s.props.disabledKeyboardNavigation)switch(u){case at.Enter:if(s.props.selected==null)break;s.onYearClick(r,i),(c=(o=s.props).setPreSelection)===null||c===void 0||c.call(o,s.props.selected);break;case at.ArrowRight:if(s.props.preSelection==null)break;s.handleYearNavigation(i+1,za(s.props.preSelection,1));break;case at.ArrowLeft:if(s.props.preSelection==null)break;s.handleYearNavigation(i-1,Du(s.props.preSelection,1));break;case at.ArrowUp:{if(m===void 0||h===void 0||s.props.preSelection==null)break;var x=_i(m,h).startPeriod,b=x2,A=i-b;if(A<x){var _=h%b;i>=x&&i<x+_?b=_:b+=_,A=i-b}s.handleYearNavigation(A,Du(s.props.preSelection,b));break}case at.ArrowDown:{if(m===void 0||h===void 0||s.props.preSelection==null)break;var j=_i(m,h).endPeriod,b=x2,A=i+b;if(A>j){var _=h%b;i<=j&&i>j-_?b=_:b+=_,A=i+b}s.handleYearNavigation(A,za(s.props.preSelection,b));break}}g&&g(r)},s.getYearClassNames=function(r){var i=s.props,o=i.date,c=i.minDate,u=i.maxDate,f=i.excludeDates,m=i.includeDates,h=i.filterDate,g=i.yearClassName;return _s("react-datepicker__year-text","react-datepicker__year-".concat(r),o?g?.(Sa(o,r)):void 0,{"react-datepicker__year-text--selected":s.isSelectedYear(r),"react-datepicker__year-text--disabled":(c||u||f||m||h)&&Bg(r,s.props),"react-datepicker__year-text--keyboard-selected":s.isKeyboardSelected(r),"react-datepicker__year-text--range-start":s.isRangeStart(r),"react-datepicker__year-text--range-end":s.isRangeEnd(r),"react-datepicker__year-text--in-range":s.isInRange(r),"react-datepicker__year-text--in-selecting-range":s.isInSelectingRange(r),"react-datepicker__year-text--selecting-range-start":s.isSelectingRangeStart(r),"react-datepicker__year-text--selecting-range-end":s.isSelectingRangeEnd(r),"react-datepicker__year-text--today":s.isCurrentYear(r)})},s.getYearTabIndex=function(r){if(s.props.disabledKeyboardNavigation||s.props.preSelection==null)return"-1";var i=It(s.props.preSelection),o=Bg(r,s.props);return r===i&&!o?"0":"-1"},s.getYearContent=function(r){return s.props.renderYearContent?s.props.renderYearContent(r):r},s}return e.prototype.render=function(){var n=this,s=[],r=this.props,i=r.date,o=r.yearItemNumber,c=r.onYearMouseEnter,u=r.onYearMouseLeave;if(i===void 0)return null;for(var f=_i(i,o),m=f.startPeriod,h=f.endPeriod,g=function(A){s.push(fe.createElement("div",{ref:x.YEAR_REFS[A-m],onClick:function(_){n.onYearClick(_,A)},onKeyDown:function(_){xB(_)&&(_.preventDefault(),_.key=at.Enter),n.onYearKeyDown(_,A)},tabIndex:Number(x.getYearTabIndex(A)),className:x.getYearClassNames(A),onMouseEnter:x.props.usePointerEvent?void 0:function(_){return c(_,A)},onPointerEnter:x.props.usePointerEvent?function(_){return c(_,A)}:void 0,onMouseLeave:x.props.usePointerEvent?void 0:function(_){return u(_,A)},onPointerLeave:x.props.usePointerEvent?function(_){return u(_,A)}:void 0,key:A,"aria-current":x.isCurrentYear(A)?"date":void 0},x.getYearContent(A)))},x=this,b=m;b<=h;b++)g(b);return fe.createElement("div",{className:"react-datepicker__year"},fe.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.usePointerEvent?void 0:this.props.clearSelectingDate,onPointerLeave:this.props.usePointerEvent?this.props.clearSelectingDate:void 0},s))},e})(v.Component);function Mae(t,e,n,s){for(var r=[],i=0;i<2*e+1;i++){var o=t+e-i,c=!0;n&&(c=It(n)<=o),s&&c&&(c=It(s)>=o),c&&r.push(o)}return r}var Rae=(function(t){ws(e,t);function e(n){var s=t.call(this,n)||this;s.yearOptionButtonsRef={},s.handleOptionKeyDown=function(c,u){var f;switch(u.key){case"Enter":u.preventDefault(),s.onChange(c);break;case"Escape":u.preventDefault(),s.props.onCancel();break;case"ArrowUp":case"ArrowDown":{u.preventDefault();var m=c+(u.key==="ArrowUp"?1:-1);s.yearOptionButtonsRef[m]&&((f=s.yearOptionButtonsRef[m])===null||f===void 0||f.focus());break}}},s.renderOptions=function(){s.yearOptionButtonsRef={};var c=s.props.year,u=s.state.yearsList.map(function(h){return fe.createElement("div",{ref:function(g){s.yearOptionButtonsRef[h]=g,h===c&&g?.focus()},role:"button",tabIndex:0,className:c===h?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:h,onClick:s.onChange.bind(s,h),onKeyDown:s.handleOptionKeyDown.bind(s,h),"aria-selected":c===h?"true":void 0},c===h?fe.createElement("span",{className:"react-datepicker__year-option--selected"},"✓"):"",h)}),f=s.props.minDate?It(s.props.minDate):null,m=s.props.maxDate?It(s.props.maxDate):null;return(!m||!s.state.yearsList.find(function(h){return h===m}))&&u.unshift(fe.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:s.incrementYears},fe.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),(!f||!s.state.yearsList.find(function(h){return h===f}))&&u.push(fe.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:s.decrementYears},fe.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),u},s.onChange=function(c){s.props.onChange(c)},s.handleClickOutside=function(){s.props.onCancel()},s.shiftYears=function(c){var u=s.state.yearsList.map(function(f){return f+c});s.setState({yearsList:u})},s.incrementYears=function(){return s.shiftYears(1)},s.decrementYears=function(){return s.shiftYears(-1)};var r=n.yearDropdownItemNumber,i=n.scrollableYearDropdown,o=r||(i?10:5);return s.state={yearsList:Mae(s.props.year,o,s.props.minDate,s.props.maxDate)},s.dropdownRef=v.createRef(),s}return e.prototype.componentDidMount=function(){var n=this.dropdownRef.current;if(n){var s=n.children?Array.from(n.children):null,r=s?s.find(function(i){return i.ariaSelected}):null;n.scrollTop=r&&r instanceof HTMLElement?r.offsetTop+(r.clientHeight-n.clientHeight)/2:(n.scrollHeight-n.clientHeight)/2}},e.prototype.render=function(){var n=_s({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return fe.createElement(Ex,{className:n,containerRef:this.dropdownRef,onClickOutside:this.handleClickOutside},this.renderOptions())},e})(v.Component),Oae=(function(t){ws(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state={dropdownVisible:!1},n.renderSelectOptions=function(){for(var s=n.props.minDate?It(n.props.minDate):1900,r=n.props.maxDate?It(n.props.maxDate):2100,i=[],o=s;o<=r;o++)i.push(fe.createElement("option",{key:o,value:o},o));return i},n.onSelectChange=function(s){n.onChange(parseInt(s.target.value))},n.renderSelectMode=function(){return fe.createElement("select",{value:n.props.year,className:"react-datepicker__year-select",onChange:n.onSelectChange},n.renderSelectOptions())},n.renderReadView=function(s){return fe.createElement("button",{key:"read",type:"button",style:{visibility:s?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:n.toggleDropdown},fe.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),fe.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},n.props.year))},n.renderDropdown=function(){return fe.createElement(Rae,Yt({key:"dropdown"},n.props,{onChange:n.onChange,onCancel:n.toggleDropdown}))},n.renderScrollMode=function(){var s=n.state.dropdownVisible,r=[n.renderReadView(!s)];return s&&r.unshift(n.renderDropdown()),r},n.onChange=function(s){n.toggleDropdown(),s!==n.props.year&&n.props.onChange(s)},n.toggleDropdown=function(s){n.setState({dropdownVisible:!n.state.dropdownVisible},function(){n.props.adjustDateOnChange&&n.handleYearChange(n.props.date,s)})},n.handleYearChange=function(s,r){var i;(i=n.onSelect)===null||i===void 0||i.call(n,s,r),n.setOpen()},n.onSelect=function(s,r){var i,o;(o=(i=n.props).onSelect)===null||o===void 0||o.call(i,s,r)},n.setOpen=function(){var s,r;(r=(s=n.props).setOpen)===null||r===void 0||r.call(s,!0)},n}return e.prototype.render=function(){var n;switch(this.props.dropdownMode){case"scroll":n=this.renderScrollMode();break;case"select":n=this.renderSelectMode();break}return fe.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},n)},e})(v.Component),Pae=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],bB="react-datepicker-ignore-onclickoutside",Lae=function(t){var e=(t.className||"").split(/\s+/);return Pae.some(function(n){return e.indexOf(n)>=0})},Fae=(function(t){ws(e,t);function e(n){var s=t.call(this,n)||this;return s.monthContainer=void 0,s.handleClickOutside=function(r){s.props.onClickOutside(r)},s.setClickOutsideRef=function(){return s.containerRef.current},s.handleDropdownFocus=function(r){var i,o;Lae(r.target)&&((o=(i=s.props).onDropdownFocus)===null||o===void 0||o.call(i,r))},s.getDateInView=function(){var r=s.props,i=r.preSelection,o=r.selected,c=r.openToDate,u=gB(s.props),f=yB(s.props),m=on(),h=c||o||i;return h||(u&&Ta(m,u)?u:f&&Lo(m,f)?f:m)},s.increaseMonth=function(){s.setState(function(r){var i=r.date;return{date:Yr(i,1)}},function(){return s.handleMonthChange(s.state.date)})},s.decreaseMonth=function(){s.setState(function(r){var i=r.date;return{date:$l(i,1)}},function(){return s.handleMonthChange(s.state.date)})},s.handleDayClick=function(r,i,o){s.props.onSelect(r,i,o),s.props.setPreSelection&&s.props.setPreSelection(r)},s.handleDayMouseEnter=function(r){s.setState({selectingDate:r}),s.props.onDayMouseEnter&&s.props.onDayMouseEnter(r)},s.handleMonthMouseLeave=function(){s.setState({selectingDate:void 0}),s.props.onMonthMouseLeave&&s.props.onMonthMouseLeave()},s.handleYearMouseEnter=function(r,i){s.setState({selectingDate:Sa(on(),i)}),s.props.onYearMouseEnter&&s.props.onYearMouseEnter(r,i)},s.handleYearMouseLeave=function(r,i){s.props.onYearMouseLeave&&s.props.onYearMouseLeave(r,i)},s.handleYearChange=function(r){var i,o,c,u;(o=(i=s.props).onYearChange)===null||o===void 0||o.call(i,r),s.setState({isRenderAriaLiveMessage:!0}),s.props.adjustDateOnChange&&(s.props.onSelect(r),(u=(c=s.props).setOpen)===null||u===void 0||u.call(c,!0)),s.props.setPreSelection&&s.props.setPreSelection(r)},s.getEnabledPreSelectionDateForMonth=function(r){if(!Br(r,s.props))return r;for(var i=Di(r),o=rae(r),c=lS(o,i),u=null,f=0;f<=c;f++){var m=$r(i,f);if(!Br(m,s.props)){u=m;break}}return u},s.handleMonthChange=function(r){var i,o,c,u=(i=s.getEnabledPreSelectionDateForMonth(r))!==null&&i!==void 0?i:r;s.handleCustomMonthChange(u),s.props.adjustDateOnChange&&(s.props.onSelect(u),(c=(o=s.props).setOpen)===null||c===void 0||c.call(o,!0)),s.props.setPreSelection&&s.props.setPreSelection(u)},s.handleCustomMonthChange=function(r){var i,o;(o=(i=s.props).onMonthChange)===null||o===void 0||o.call(i,r),s.setState({isRenderAriaLiveMessage:!0})},s.handleMonthYearChange=function(r){s.handleYearChange(r),s.handleMonthChange(r)},s.changeYear=function(r){s.setState(function(i){var o=i.date;return{date:Sa(o,Number(r))}},function(){return s.handleYearChange(s.state.date)})},s.changeMonth=function(r){s.setState(function(i){var o=i.date;return{date:Lr(o,Number(r))}},function(){return s.handleMonthChange(s.state.date)})},s.changeMonthYear=function(r){s.setState(function(i){var o=i.date;return{date:Sa(Lr(o,Ts(r)),It(r))}},function(){return s.handleMonthYearChange(s.state.date)})},s.header=function(r){r===void 0&&(r=s.state.date);var i=No(r,s.props.locale,s.props.calendarStartDay),o=[];return s.props.showWeekNumbers&&o.push(fe.createElement("div",{key:"W",className:"react-datepicker__day-name",role:"columnheader"},fe.createElement("span",{className:"react-datepicker__sr-only"},"Week number"),fe.createElement("span",{"aria-hidden":"true"},s.props.weekLabel||"#"))),o.concat([0,1,2,3,4,5,6].map(function(c){var u=$r(i,c),f=s.formatWeekday(u,s.props.locale),m=s.props.weekDayClassName?s.props.weekDayClassName(u):void 0;return fe.createElement("div",{key:c,role:"columnheader",className:_s("react-datepicker__day-name",m)},fe.createElement("span",{className:"react-datepicker__sr-only"},jn(u,"EEEE",s.props.locale)),fe.createElement("span",{"aria-hidden":"true"},f))}))},s.formatWeekday=function(r,i){return s.props.formatWeekDay?aae(r,s.props.formatWeekDay,i):s.props.useWeekdaysShort?oae(r,i):iae(r,i)},s.decreaseYear=function(){s.setState(function(r){var i,o=r.date;return{date:Du(o,s.props.showYearPicker?(i=s.props.yearItemNumber)!==null&&i!==void 0?i:e.defaultProps.yearItemNumber:1)}},function(){return s.handleYearChange(s.state.date)})},s.clearSelectingDate=function(){s.setState({selectingDate:void 0})},s.renderPreviousButton=function(){var r,i,o;if(!s.props.renderCustomHeader){var c=(r=s.props.monthsShown)!==null&&r!==void 0?r:e.defaultProps.monthsShown,u=s.props.showPreviousMonths?c-1:0,f=(i=s.props.monthSelectedIn)!==null&&i!==void 0?i:u,m=$l(s.state.date,f),h;switch(!0){case s.props.showMonthYearPicker:h=d2(s.state.date,s.props);break;case s.props.showYearPicker:h=fae(s.state.date,s.props);break;case s.props.showQuarterYearPicker:h=uae(s.state.date,s.props);break;default:h=c2(m,s.props);break}if(!(!((o=s.props.forceShowMonthNavigation)!==null&&o!==void 0?o:e.defaultProps.forceShowMonthNavigation)&&!s.props.showDisabledMonthNavigation&&h||s.props.showTimeSelectOnly)){var g=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"],x=["react-datepicker__navigation","react-datepicker__navigation--previous"],b=s.decreaseMonth;(s.props.showMonthYearPicker||s.props.showQuarterYearPicker||s.props.showYearPicker)&&(b=s.decreaseYear),h&&s.props.showDisabledMonthNavigation&&(x.push("react-datepicker__navigation--previous--disabled"),b=void 0);var A=s.props.showMonthYearPicker||s.props.showQuarterYearPicker||s.props.showYearPicker,_=s.props,j=_.previousMonthButtonLabel,C=j===void 0?e.defaultProps.previousMonthButtonLabel:j,k=_.previousYearButtonLabel,E=k===void 0?e.defaultProps.previousYearButtonLabel:k,N=s.props,L=N.previousMonthAriaLabel,M=L===void 0?typeof C=="string"?C:"Previous Month":L,T=N.previousYearAriaLabel,O=T===void 0?typeof E=="string"?E:"Previous Year":T;return fe.createElement("button",{type:"button",className:x.join(" "),onClick:b,onKeyDown:s.props.handleOnKeyDown,"aria-label":A?O:M},fe.createElement("span",{className:g.join(" ")},A?E:C))}}},s.increaseYear=function(){s.setState(function(r){var i,o=r.date;return{date:za(o,s.props.showYearPicker?(i=s.props.yearItemNumber)!==null&&i!==void 0?i:e.defaultProps.yearItemNumber:1)}},function(){return s.handleYearChange(s.state.date)})},s.renderNextButton=function(){var r;if(!s.props.renderCustomHeader){var i;switch(!0){case s.props.showMonthYearPicker:i=f2(s.state.date,s.props);break;case s.props.showYearPicker:i=hae(s.state.date,s.props);break;case s.props.showQuarterYearPicker:i=dae(s.state.date,s.props);break;default:i=u2(s.state.date,s.props);break}if(!(!((r=s.props.forceShowMonthNavigation)!==null&&r!==void 0?r:e.defaultProps.forceShowMonthNavigation)&&!s.props.showDisabledMonthNavigation&&i||s.props.showTimeSelectOnly)){var o=["react-datepicker__navigation","react-datepicker__navigation--next"],c=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"];s.props.showTimeSelect&&o.push("react-datepicker__navigation--next--with-time"),s.props.todayButton&&o.push("react-datepicker__navigation--next--with-today-button");var u=s.increaseMonth;(s.props.showMonthYearPicker||s.props.showQuarterYearPicker||s.props.showYearPicker)&&(u=s.increaseYear),i&&s.props.showDisabledMonthNavigation&&(o.push("react-datepicker__navigation--next--disabled"),u=void 0);var f=s.props.showMonthYearPicker||s.props.showQuarterYearPicker||s.props.showYearPicker,m=s.props,h=m.nextMonthButtonLabel,g=h===void 0?e.defaultProps.nextMonthButtonLabel:h,x=m.nextYearButtonLabel,b=x===void 0?e.defaultProps.nextYearButtonLabel:x,A=s.props,_=A.nextMonthAriaLabel,j=_===void 0?typeof g=="string"?g:"Next Month":_,C=A.nextYearAriaLabel,k=C===void 0?typeof b=="string"?b:"Next Year":C;return fe.createElement("button",{type:"button",className:o.join(" "),onClick:u,onKeyDown:s.props.handleOnKeyDown,"aria-label":f?k:j},fe.createElement("span",{className:c.join(" ")},f?b:g))}}},s.renderCurrentMonth=function(r){r===void 0&&(r=s.state.date);var i=["react-datepicker__current-month"];return s.props.showYearDropdown&&i.push("react-datepicker__current-month--hasYearDropdown"),s.props.showMonthDropdown&&i.push("react-datepicker__current-month--hasMonthDropdown"),s.props.showMonthYearDropdown&&i.push("react-datepicker__current-month--hasMonthYearDropdown"),fe.createElement("h2",{className:i.join(" ")},jn(r,s.props.dateFormat,s.props.locale))},s.renderYearDropdown=function(r){if(r===void 0&&(r=!1),!(!s.props.showYearDropdown||r))return fe.createElement(Oae,Yt({},e.defaultProps,s.props,{date:s.state.date,onChange:s.changeYear,year:It(s.state.date)}))},s.renderMonthDropdown=function(r){if(r===void 0&&(r=!1),!(!s.props.showMonthDropdown||r))return fe.createElement(Cae,Yt({},e.defaultProps,s.props,{month:Ts(s.state.date),onChange:s.changeMonth}))},s.renderMonthYearDropdown=function(r){if(r===void 0&&(r=!1),!(!s.props.showMonthYearDropdown||r))return fe.createElement(Dae,Yt({},e.defaultProps,s.props,{date:s.state.date,onChange:s.changeMonthYear}))},s.handleTodayButtonClick=function(r){s.props.onSelect(r2(),r),s.props.setPreSelection&&s.props.setPreSelection(r2())},s.renderTodayButton=function(){if(!(!s.props.todayButton||s.props.showTimeSelectOnly))return fe.createElement("div",{className:"react-datepicker__today-button",onClick:s.handleTodayButtonClick},s.props.todayButton)},s.renderDayNamesHeader=function(r){return fe.createElement("div",{className:"react-datepicker__day-names",role:"row"},s.header(r))},s.renderDefaultHeader=function(r){var i=r.monthDate,o=r.i;return fe.createElement("div",{className:"react-datepicker__header ".concat(s.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},s.renderCurrentMonth(i),fe.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(s.props.dropdownMode),onFocus:s.handleDropdownFocus},s.renderMonthDropdown(o!==0),s.renderMonthYearDropdown(o!==0),s.renderYearDropdown(o!==0)))},s.renderCustomHeader=function(r){var i,o,c=r.monthDate,u=r.i;if(s.props.showTimeSelect&&!s.state.monthContainer||s.props.showTimeSelectOnly)return null;var f=s.props,m=f.showYearPicker,h=f.yearItemNumber,g;if(m){var x=_i(c,h),b=x.startPeriod,A=x.endPeriod;g={startYear:b,endYear:A}}var _=c2(s.state.date,s.props),j=u2(s.state.date,s.props),C=d2(s.state.date,s.props),k=f2(s.state.date,s.props);return fe.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:s.props.onDropdownFocus},(o=(i=s.props).renderCustomHeader)===null||o===void 0?void 0:o.call(i,Yt(Yt(Yt({},s.state),m&&{visibleYearsRange:g}),{customHeaderCount:u,monthDate:c,changeMonth:s.changeMonth,changeYear:s.changeYear,decreaseMonth:s.decreaseMonth,increaseMonth:s.increaseMonth,decreaseYear:s.decreaseYear,increaseYear:s.increaseYear,prevMonthButtonDisabled:_,nextMonthButtonDisabled:j,prevYearButtonDisabled:C,nextYearButtonDisabled:k})))},s.renderYearHeader=function(r){var i=r.monthDate,o=s.props,c=o.showYearPicker,u=o.yearItemNumber,f=u===void 0?e.defaultProps.yearItemNumber:u,m=_i(i,f),h=m.startPeriod,g=m.endPeriod;return fe.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},c?"".concat(h," - ").concat(g):It(i))},s.renderHeader=function(r){var i=r.monthDate,o=r.i,c=o===void 0?0:o,u={monthDate:i,i:c};switch(!0){case s.props.renderCustomHeader!==void 0:return s.renderCustomHeader(u);case(s.props.showMonthYearPicker||s.props.showQuarterYearPicker||s.props.showYearPicker):return s.renderYearHeader(u);default:return s.renderDefaultHeader(u)}},s.renderMonths=function(){var r,i;if(!(s.props.showTimeSelectOnly||s.props.showYearPicker)){for(var o=[],c=(r=s.props.monthsShown)!==null&&r!==void 0?r:e.defaultProps.monthsShown,u=s.props.showPreviousMonths?c-1:0,f=s.props.showMonthYearPicker||s.props.showQuarterYearPicker?za(s.state.date,u):$l(s.state.date,u),m=(i=s.props.monthSelectedIn)!==null&&i!==void 0?i:u,h=0;h<c;++h){var g=h-m+u,x=s.props.showMonthYearPicker||s.props.showQuarterYearPicker?za(f,g):Yr(f,g),b="month-".concat(h),A=h<c-1,_=h>0;o.push(fe.createElement("div",{key:b,ref:function(j){s.monthContainer=j??void 0},className:"react-datepicker__month-container"},s.renderHeader({monthDate:x,i:h}),fe.createElement(jae,Yt({},e.defaultProps,s.props,{containerRef:s.containerRef,ariaLabelPrefix:s.props.monthAriaLabelPrefix,day:x,onDayClick:s.handleDayClick,handleOnKeyDown:s.props.handleOnDayKeyDown,handleOnMonthKeyDown:s.props.handleOnKeyDown,onDayMouseEnter:s.handleDayMouseEnter,onMouseLeave:s.handleMonthMouseLeave,orderInDisplay:h,selectingDate:s.state.selectingDate,monthShowsDuplicateDaysEnd:A,monthShowsDuplicateDaysStart:_,dayNamesHeader:s.renderDayNamesHeader(x)}))))}return o}},s.renderYears=function(){if(!s.props.showTimeSelectOnly&&s.props.showYearPicker)return fe.createElement("div",{className:"react-datepicker__year--container"},s.renderHeader({monthDate:s.state.date}),fe.createElement(Tae,Yt({},e.defaultProps,s.props,{selectingDate:s.state.selectingDate,date:s.state.date,onDayClick:s.handleDayClick,clearSelectingDate:s.clearSelectingDate,onYearMouseEnter:s.handleYearMouseEnter,onYearMouseLeave:s.handleYearMouseLeave})))},s.renderTimeSection=function(){if(s.props.showTimeSelect&&(s.state.monthContainer||s.props.showTimeSelectOnly))return fe.createElement(Eae,Yt({},e.defaultProps,s.props,{onChange:s.props.onTimeChange,format:s.props.timeFormat,intervals:s.props.timeIntervals,monthRef:s.state.monthContainer}))},s.renderInputTimeSection=function(){var r=s.props.selected?new Date(s.props.selected):void 0,i=r&&Tx(r)&&!!s.props.selected,o=i?"".concat(m2(r.getHours()),":").concat(m2(r.getMinutes())):"";if(s.props.showTimeInput)return fe.createElement(bae,Yt({},e.defaultProps,s.props,{date:r,timeString:o,onChange:s.props.onTimeChange}))},s.renderAriaLiveRegion=function(){var r,i=_i(s.state.date,(r=s.props.yearItemNumber)!==null&&r!==void 0?r:e.defaultProps.yearItemNumber),o=i.startPeriod,c=i.endPeriod,u;return s.props.showYearPicker?u="".concat(o," - ").concat(c):s.props.showMonthYearPicker||s.props.showQuarterYearPicker?u=It(s.state.date):u="".concat(AS(Ts(s.state.date),s.props.locale)," ").concat(It(s.state.date)),fe.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},s.state.isRenderAriaLiveMessage&&u)},s.renderChildren=function(){if(s.props.children)return fe.createElement("div",{className:"react-datepicker__children-container"},s.props.children)},s.containerRef=v.createRef(),s.state={date:s.getDateInView(),selectingDate:void 0,monthContainer:void 0,isRenderAriaLiveMessage:!1},s}return Object.defineProperty(e,"defaultProps",{get:function(){return{monthsShown:1,forceShowMonthNavigation:!1,outsideClickIgnoreClass:bB,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",yearItemNumber:cm}},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){var n=this;this.props.showTimeSelect&&(this.assignMonthContainer=(function(){n.setState({monthContainer:n.monthContainer})})())},e.prototype.componentDidUpdate=function(n){var s=this;if(this.props.preSelection&&(!Wt(this.props.preSelection,n.preSelection)||this.props.monthSelectedIn!==n.monthSelectedIn)){var r=!Fs(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},function(){return r&&s.handleCustomMonthChange(s.state.date)})}else this.props.openToDate&&!Wt(this.props.openToDate,n.openToDate)&&this.setState({date:this.props.openToDate})},e.prototype.render=function(){var n=this.props.container||Xre;return fe.createElement(Ex,{onClickOutside:this.handleClickOutside,style:{display:"contents"},ignoreClass:this.props.outsideClickIgnoreClass},fe.createElement("div",{style:{display:"contents"},ref:this.containerRef},fe.createElement(n,{className:_s("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showTime:this.props.showTimeSelect||this.props.showTimeInput,showTimeSelectOnly:this.props.showTimeSelectOnly},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren())))},e})(v.Component),Bae=function(t){var e=t.icon,n=t.className,s=n===void 0?"":n,r=t.onClick,i="react-datepicker__calendar-icon";if(typeof e=="string")return fe.createElement("i",{className:"".concat(i," ").concat(e," ").concat(s),"aria-hidden":"true",onClick:r});if(fe.isValidElement(e)){var o=e;return fe.cloneElement(o,{className:"".concat(o.props.className||""," ").concat(i," ").concat(s),onClick:function(c){typeof o.props.onClick=="function"&&o.props.onClick(c),typeof r=="function"&&r(c)}})}return fe.createElement("svg",{className:"".concat(i," ").concat(s),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:r},fe.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},vB=(function(t){ws(e,t);function e(n){var s=t.call(this,n)||this;return s.portalRoot=null,s.el=document.createElement("div"),s}return e.prototype.componentDidMount=function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)},e.prototype.componentWillUnmount=function(){this.portalRoot&&this.portalRoot.removeChild(this.el)},e.prototype.render=function(){return Sl.createPortal(this.props.children,this.el)},e})(v.Component),Iae="[tabindex], a, button, input, select, textarea",Vae=function(t){return(t instanceof HTMLAnchorElement||!t.disabled)&&t.tabIndex!==-1},_B=(function(t){ws(e,t);function e(n){var s=t.call(this,n)||this;return s.getTabChildren=function(){var r;return Array.prototype.slice.call((r=s.tabLoopRef.current)===null||r===void 0?void 0:r.querySelectorAll(Iae),1,-1).filter(Vae)},s.handleFocusStart=function(){var r=s.getTabChildren();r&&r.length>1&&r[r.length-1].focus()},s.handleFocusEnd=function(){var r=s.getTabChildren();r&&r.length>1&&r[0].focus()},s.tabLoopRef=v.createRef(),s}return e.prototype.render=function(){var n;return((n=this.props.enableTabLoop)!==null&&n!==void 0?n:e.defaultProps.enableTabLoop)?fe.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},fe.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:0,onFocus:this.handleFocusStart}),this.props.children,fe.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:0,onFocus:this.handleFocusEnd})):this.props.children},e.defaultProps={enableTabLoop:!0},e})(v.Component);function zae(t){function e(n){var s,r=typeof n.hidePopper=="boolean"?n.hidePopper:!0,i=v.useRef(null),o=Qre(Yt({open:!r,whileElementsMounted:cB,placement:n.popperPlacement,middleware:Ma([Fre({padding:15}),Lre(10),Bre({element:i})],(s=n.popperModifiers)!==null&&s!==void 0?s:[],!0)},n.popperProps)),c=Yt(Yt({},n),{hidePopper:r,popperProps:Yt(Yt({},o),{arrowRef:i})});return fe.createElement(t,Yt({},c))}return e.displayName="withFloating(".concat(t.displayName||t.name||"Component",")"),e}var $ae=function(t){var e=t.className,n=t.wrapperClassName,s=t.hidePopper,r=s===void 0?!0:s,i=t.popperComponent,o=t.targetComponent,c=t.enableTabLoop,u=t.popperOnKeyDown,f=t.portalId,m=t.portalHost,h=t.popperProps,g=t.showArrow,x=void 0;if(!r){var b=_s("react-datepicker-popper",e);x=fe.createElement(_B,{enableTabLoop:c},fe.createElement("div",{ref:h.refs.setFloating,style:h.floatingStyles,className:b,"data-placement":h.placement,onKeyDown:u},i,g&&fe.createElement(Hre,{ref:h.arrowRef,context:h.context,fill:"currentColor",strokeWidth:1,height:8,width:16,style:{transform:"translateY(-1px)"},className:"react-datepicker__triangle"})))}t.popperContainer&&(x=v.createElement(t.popperContainer,{},x)),f&&!r&&(x=fe.createElement(vB,{portalId:f,portalHost:m},x));var A=_s("react-datepicker-wrapper",n);return fe.createElement(fe.Fragment,null,fe.createElement("div",{ref:h.refs.setReference,className:A},o),x)},Hae=zae($ae);function Uae(t,e){return t&&e?Ts(t)!==Ts(e)||It(t)!==It(e):t!==e}var f_="Date input not valid.",Xl=(function(t){ws(e,t);function e(n){var s=t.call(this,n)||this;return s.calendar=null,s.input=null,s.getPreSelection=function(){return s.props.openToDate?s.props.openToDate:s.props.selectsEnd&&s.props.startDate?s.props.startDate:s.props.selectsStart&&s.props.endDate?s.props.endDate:on()},s.modifyHolidays=function(){var r;return(r=s.props.holidays)===null||r===void 0?void 0:r.reduce(function(i,o){var c=new Date(o.date);return Tx(c)?Ma(Ma([],i,!0),[Yt(Yt({},o),{date:c})],!1):i},[])},s.calcInitialState=function(){var r,i=s.getPreSelection(),o=gB(s.props),c=yB(s.props),u=o&&Ta(i,Fg(o))?o:c&&Lo(i,a2(c))?c:i;return{open:s.props.startOpen||!1,preventFocus:!1,inputValue:null,preSelection:(r=s.props.selectsRange?s.props.startDate:s.props.selected)!==null&&r!==void 0?r:u,highlightDates:h2(s.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1,wasHidden:!1}},s.getInputValue=function(){var r,i=s.props,o=i.locale,c=i.startDate,u=i.endDate,f=i.rangeSeparator,m=i.selected,h=i.selectedDates,g=i.selectsMultiple,x=i.selectsRange,b=i.value,A=(r=s.props.dateFormat)!==null&&r!==void 0?r:e.defaultProps.dateFormat,_=s.state.inputValue;return typeof b=="string"?b:typeof _=="string"?_:x?Jre(c,u,{dateFormat:A,locale:o,rangeSeparator:f}):g?eae(h??[],{dateFormat:A,locale:o}):Or(m,{dateFormat:A,locale:o})},s.resetHiddenStatus=function(){s.setState(Yt(Yt({},s.state),{wasHidden:!1}))},s.setHiddenStatus=function(){s.setState(Yt(Yt({},s.state),{wasHidden:!0}))},s.setHiddenStateOnVisibilityHidden=function(){document.visibilityState==="hidden"&&s.setHiddenStatus()},s.clearPreventFocusTimeout=function(){s.preventFocusTimeout&&clearTimeout(s.preventFocusTimeout)},s.setFocus=function(){var r,i;(i=(r=s.input)===null||r===void 0?void 0:r.focus)===null||i===void 0||i.call(r,{preventScroll:!0})},s.setBlur=function(){var r,i;(i=(r=s.input)===null||r===void 0?void 0:r.blur)===null||i===void 0||i.call(r),s.cancelFocusInput()},s.deferBlur=function(){requestAnimationFrame(function(){s.setBlur()})},s.setOpen=function(r,i){i===void 0&&(i=!1),s.setState({open:r,preSelection:r&&s.state.open?s.state.preSelection:s.calcInitialState().preSelection,lastPreSelectChange:h_},function(){r||s.setState(function(o){return{focused:i?o.focused:!1}},function(){!i&&s.deferBlur(),s.setState({inputValue:null})})})},s.inputOk=function(){return Ci(s.state.preSelection)},s.isCalendarOpen=function(){return s.props.open===void 0?s.state.open&&!s.props.disabled&&!s.props.readOnly:s.props.open},s.handleFocus=function(r){var i,o,c=s.state.wasHidden,u=c?s.state.open:!0;c&&s.resetHiddenStatus(),s.state.preventFocus||((o=(i=s.props).onFocus)===null||o===void 0||o.call(i,r),u&&!s.props.preventOpenOnFocus&&!s.props.readOnly&&s.setOpen(!0)),s.setState({focused:!0})},s.sendFocusBackToInput=function(){s.preventFocusTimeout&&s.clearPreventFocusTimeout(),s.setState({preventFocus:!0},function(){s.preventFocusTimeout=setTimeout(function(){s.setFocus(),s.setState({preventFocus:!1})})})},s.cancelFocusInput=function(){clearTimeout(s.inputFocusTimeout),s.inputFocusTimeout=void 0},s.deferFocusInput=function(){s.cancelFocusInput(),s.inputFocusTimeout=setTimeout(function(){return s.setFocus()},1)},s.handleDropdownFocus=function(){s.cancelFocusInput()},s.resetInputValue=function(){s.setState(Yt(Yt({},s.state),{inputValue:null}))},s.handleBlur=function(r){var i,o;(!s.state.open||s.props.withPortal||s.props.showTimeInput)&&((o=(i=s.props).onBlur)===null||o===void 0||o.call(i,r)),s.resetInputValue(),s.state.open&&s.props.open===!1&&s.setOpen(!1),s.setState({focused:!1})},s.handleCalendarClickOutside=function(r){var i,o;s.props.inline||s.setOpen(!1),(o=(i=s.props).onClickOutside)===null||o===void 0||o.call(i,r),s.props.withPortal&&r.preventDefault()},s.handleChange=function(){for(var r,i,o,c,u,f=[],m=0;m<arguments.length;m++)f[m]=arguments[m];var h=f[0];if(!(s.props.onChangeRaw&&(s.props.onChangeRaw.apply(s,f),!h||typeof h.isDefaultPrevented!="function"||h.isDefaultPrevented()))){s.setState({inputValue:h?.target instanceof HTMLInputElement?h.target.value:null,lastPreSelectChange:Wae});var g=s.props,x=g.selectsRange,b=g.startDate,A=g.endDate,_=(r=s.props.dateFormat)!==null&&r!==void 0?r:e.defaultProps.dateFormat,j=(i=s.props.strictParsing)!==null&&i!==void 0?i:e.defaultProps.strictParsing,C=h?.target instanceof HTMLInputElement?h.target.value:"";if(x){var k=s.props.rangeSeparator,E=k.trim(),N=C.split(_.includes(E)?k:E,2).map(function(V){return V.trim()}),L=N[0],M=N[1],T=l_(L??"",_,s.props.locale,j),O=T?l_(M??"",_,s.props.locale,j):null,I=b?.getTime()!==T?.getTime(),$=A?.getTime()!==O?.getTime();if(!I&&!$||T&&Br(T,s.props)||O&&Br(O,s.props))return;(c=(o=s.props).onChange)===null||c===void 0||c.call(o,[T,O],h)}else{var H=l_(C,_,s.props.locale,j,(u=s.props.selected)!==null&&u!==void 0?u:void 0);(H||!C)&&s.setSelected(H,h,!0)}}},s.handleSelect=function(r,i,o){if(!s.props.readOnly){var c=s.props,u=c.selectsRange,f=c.startDate,m=c.endDate,h=c.swapRange,g=!u||f&&!m&&(h||!u_(r,f));s.props.shouldCloseOnSelect&&!s.props.showTimeSelect&&g&&s.sendFocusBackToInput(),s.props.onChangeRaw&&s.props.onChangeRaw(i),s.setSelected(r,i,!1,o),s.props.showDateSelect&&s.setState({isRenderAriaLiveMessage:!0}),!s.props.shouldCloseOnSelect||s.props.showTimeSelect?s.setPreSelection(r):g&&s.setOpen(!1)}},s.setSelected=function(r,i,o,c){var u,f,m=r;if(s.props.showYearPicker){if(m!==null&&Bg(It(m),s.props))return}else if(s.props.showMonthYearPicker){if(m!==null&&pB(m,s.props))return}else if(m!==null&&Br(m,s.props))return;var h=s.props,g=h.onChange,x=h.selectsRange,b=h.startDate,A=h.endDate,_=h.selectsMultiple,j=h.selectedDates,C=h.minTime,k=h.swapRange;if(!Tl(s.props.selected,m)||s.props.allowSameDay||x||_)if(m!==null&&(s.props.selected&&(!o||!s.props.showTimeSelect&&!s.props.showTimeSelectOnly&&!s.props.showTimeInput)&&(m=c_(m,{hour:Ni(s.props.selected),minute:ki(s.props.selected),second:Co(s.props.selected)})),!o&&(s.props.showTimeSelect||s.props.showTimeSelectOnly)&&C&&(m=c_(m,{hour:C.getHours(),minute:C.getMinutes(),second:C.getSeconds()})),s.props.inline||s.setState({preSelection:m}),s.props.focusSelectedMonth||s.setState({monthSelectedIn:c})),x){var E=!b&&!A,N=b&&!A,L=!b&&!!A,M=b&&A;E?g?.([m,null],i):N?m===null?g?.([null,null],i):u_(m,b)?g?.(k?[m,b]:[m,null],i):g?.([b,m],i):L&&(m&&u_(m,A)?g?.([m,A],i):g?.([m,null],i)),M&&g?.([m,null],i)}else if(_){if(m!==null)if(!j?.length)g?.([m],i);else{var T=j.some(function(I){return Wt(I,m)});if(T){var O=j.filter(function(I){return!Wt(I,m)});g?.(O,i)}else g?.(Ma(Ma([],j,!0),[m],!1),i)}}else g?.(m,i);o||((f=(u=s.props).onSelect)===null||f===void 0||f.call(u,m,i),s.setState({inputValue:null}))},s.setPreSelection=function(r){if(!s.props.readOnly){var i=Ci(s.props.minDate),o=Ci(s.props.maxDate),c=!0;if(r){var u=Fg(r);if(i&&o)c=wl(r,s.props.minDate,s.props.maxDate);else if(i){var f=Fg(s.props.minDate);c=Lo(r,f)||Tl(u,f)}else if(o){var m=a2(s.props.maxDate);c=Ta(r,m)||Tl(u,m)}}c&&s.setState({preSelection:r})}},s.toggleCalendar=function(){s.setOpen(!s.state.open)},s.handleTimeChange=function(r){var i,o;if(!(s.props.selectsRange||s.props.selectsMultiple)){var c=s.props.selected?s.props.selected:s.getPreSelection(),u=s.props.selected?r:c_(c,{hour:Ni(r),minute:ki(r)});s.setState({preSelection:u}),(o=(i=s.props).onChange)===null||o===void 0||o.call(i,u),s.props.shouldCloseOnSelect&&!s.props.showTimeInput&&(s.sendFocusBackToInput(),s.setOpen(!1)),s.props.showTimeInput&&s.setOpen(!0),(s.props.showTimeSelectOnly||s.props.showTimeSelect)&&s.setState({isRenderAriaLiveMessage:!0}),s.setState({inputValue:null})}},s.onInputClick=function(){var r,i;!s.props.disabled&&!s.props.readOnly&&s.setOpen(!0),(i=(r=s.props).onInputClick)===null||i===void 0||i.call(r)},s.onInputKeyDown=function(r){var i,o,c,u,f,m;(o=(i=s.props).onKeyDown)===null||o===void 0||o.call(i,r);var h=r.key;if(!s.state.open&&!s.props.inline&&!s.props.preventOpenOnFocus){(h===at.ArrowDown||h===at.ArrowUp||h===at.Enter)&&((c=s.onInputClick)===null||c===void 0||c.call(s));return}if(s.state.open){if(h===at.ArrowDown||h===at.ArrowUp){r.preventDefault();var g=s.props.showTimeSelectOnly?".react-datepicker__time-list-item[tabindex='0']":s.props.showWeekPicker&&s.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':s.props.showFullMonthYearPicker||s.props.showMonthYearPicker?'.react-datepicker__month-text[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',x=((u=s.calendar)===null||u===void 0?void 0:u.containerRef.current)instanceof Element&&s.calendar.containerRef.current.querySelector(g);x instanceof HTMLElement&&x.focus({preventScroll:!0});return}var b=on(s.state.preSelection);h===at.Enter?(r.preventDefault(),r.target.blur(),s.inputOk()&&s.state.lastPreSelectChange===h_?(s.handleSelect(b,r),!s.props.shouldCloseOnSelect&&s.setPreSelection(b)):s.setOpen(!1)):h===at.Escape?(r.preventDefault(),r.target.blur(),s.sendFocusBackToInput(),s.setOpen(!1)):h===at.Tab&&s.setOpen(!1),s.inputOk()||(m=(f=s.props).onInputError)===null||m===void 0||m.call(f,{code:1,msg:f_})}},s.onPortalKeyDown=function(r){var i=r.key;i===at.Escape&&(r.preventDefault(),s.setState({preventFocus:!0},function(){s.setOpen(!1),setTimeout(function(){s.setFocus(),s.setState({preventFocus:!1})})}))},s.onDayKeyDown=function(r){var i,o,c,u,f,m,h=s.props,g=h.minDate,x=h.maxDate,b=h.disabledKeyboardNavigation,A=h.showWeekPicker,_=h.shouldCloseOnSelect,j=h.locale,C=h.calendarStartDay,k=h.adjustDateOnChange,E=h.inline;if((o=(i=s.props).onKeyDown)===null||o===void 0||o.call(i,r),!b){var N=r.key,L=r.shiftKey,M=on(s.state.preSelection),T=function(U,R){var P=R;switch(U){case at.ArrowRight:P=A?Sh(R,1):$r(R,1);break;case at.ArrowLeft:P=A?WM(R):pse(R);break;case at.ArrowUp:P=WM(R);break;case at.ArrowDown:P=Sh(R,1);break;case at.PageUp:P=L?Du(R,1):$l(R,1);break;case at.PageDown:P=L?za(R,1):Yr(R,1);break;case at.Home:P=No(R,j,C);break;case at.End:P=sae(R);break}return P},O=function(U,R){for(var P=40,Z=U,ne=!1,D=0,B=T(U,R);!ne;){if(D>=P){B=R;break}g&&B<g&&(Z=at.ArrowRight,B=Br(g,s.props)?T(Z,B):g),x&&B>x&&(Z=at.ArrowLeft,B=Br(x,s.props)?T(Z,B):x),Br(B,s.props)?((Z===at.PageUp||Z===at.Home)&&(Z=at.ArrowRight),(Z===at.PageDown||Z===at.End)&&(Z=at.ArrowLeft),B=T(Z,B)):ne=!0,D++}return B};if(N===at.Enter){r.preventDefault(),s.handleSelect(M,r),!_&&s.setPreSelection(M);return}else if(N===at.Escape){r.preventDefault(),s.setOpen(!1),s.inputOk()||(u=(c=s.props).onInputError)===null||u===void 0||u.call(c,{code:1,msg:f_});return}var I=null;switch(N){case at.ArrowLeft:case at.ArrowRight:case at.ArrowUp:case at.ArrowDown:case at.PageUp:case at.PageDown:case at.Home:case at.End:I=O(N,M);break}if(!I){(m=(f=s.props).onInputError)===null||m===void 0||m.call(f,{code:1,msg:f_});return}if(r.preventDefault(),s.setState({lastPreSelectChange:h_}),k&&s.setSelected(I),s.setPreSelection(I),E){var $=Ts(M),H=Ts(I),V=It(M),G=It(I);$!==H||V!==G?s.setState({shouldFocusDayInline:!0}):s.setState({shouldFocusDayInline:!1})}}},s.onPopperKeyDown=function(r){var i=r.key;i===at.Escape&&(r.preventDefault(),s.sendFocusBackToInput(),s.setOpen(!1))},s.onClearClick=function(r){r&&r.preventDefault&&r.preventDefault(),s.sendFocusBackToInput();var i=s.props,o=i.selectsRange,c=i.onChange;c?.(o?[null,null]:null,r),s.setState({inputValue:null})},s.clear=function(){s.onClearClick()},s.onScroll=function(r){typeof s.props.closeOnScroll=="boolean"&&s.props.closeOnScroll?(r.target===document||r.target===document.documentElement||r.target===document.body)&&s.setOpen(!1):typeof s.props.closeOnScroll=="function"&&s.props.closeOnScroll(r)&&s.setOpen(!1)},s.renderCalendar=function(){var r,i;return!s.props.inline&&!s.isCalendarOpen()?null:fe.createElement(Fae,Yt({showMonthYearDropdown:void 0,ref:function(o){s.calendar=o}},s.props,s.state,{setOpen:s.setOpen,dateFormat:(r=s.props.dateFormatCalendar)!==null&&r!==void 0?r:e.defaultProps.dateFormatCalendar,onSelect:s.handleSelect,onClickOutside:s.handleCalendarClickOutside,holidays:pae(s.modifyHolidays()),outsideClickIgnoreClass:s.props.outsideClickIgnoreClass,onDropdownFocus:s.handleDropdownFocus,onTimeChange:s.handleTimeChange,className:s.props.calendarClassName,container:s.props.calendarContainer,handleOnKeyDown:s.props.onKeyDown,handleOnDayKeyDown:s.onDayKeyDown,setPreSelection:s.setPreSelection,dropdownMode:(i=s.props.dropdownMode)!==null&&i!==void 0?i:e.defaultProps.dropdownMode}),s.props.children)},s.renderAriaLiveRegion=function(){var r,i=s.props.locale,o=(r=s.props.dateFormat)!==null&&r!==void 0?r:e.defaultProps.dateFormat,c=s.props.showTimeInput||s.props.showTimeSelect,u=c?"PPPPp":"PPPP",f;return s.props.selectsRange?f="Selected start date: ".concat(Or(s.props.startDate,{dateFormat:u,locale:i}),". ").concat(s.props.endDate?"End date: "+Or(s.props.endDate,{dateFormat:u,locale:i}):""):s.props.showTimeSelectOnly?f="Selected time: ".concat(Or(s.props.selected,{dateFormat:o,locale:i})):s.props.showYearPicker?f="Selected year: ".concat(Or(s.props.selected,{dateFormat:"yyyy",locale:i})):s.props.showMonthYearPicker?f="Selected month: ".concat(Or(s.props.selected,{dateFormat:"MMMM yyyy",locale:i})):s.props.showQuarterYearPicker?f="Selected quarter: ".concat(Or(s.props.selected,{dateFormat:"yyyy, QQQ",locale:i})):f="Selected date: ".concat(Or(s.props.selected,{dateFormat:u,locale:i})),fe.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},f)},s.renderDateInput=function(){var r,i,o=_s(s.props.className,(r={},r[s.props.outsideClickIgnoreClass||e.defaultProps.outsideClickIgnoreClass]=s.state.open,r)),c=s.props.customInput||fe.createElement("input",{type:"text"}),u=s.props.customInputRef||"ref";return v.cloneElement(c,(i={},i[u]=function(f){s.input=f},i.value=s.getInputValue(),i.onBlur=s.handleBlur,i.onChange=s.handleChange,i.onClick=s.onInputClick,i.onFocus=s.handleFocus,i.onKeyDown=s.onInputKeyDown,i.id=s.props.id,i.name=s.props.name,i.form=s.props.form,i.autoFocus=s.props.autoFocus,i.placeholder=s.props.placeholderText,i.disabled=s.props.disabled,i.autoComplete=s.props.autoComplete,i.className=_s(c.props.className,o),i.title=s.props.title,i.readOnly=s.props.readOnly,i.required=s.props.required,i.tabIndex=s.props.tabIndex,i["aria-describedby"]=s.props.ariaDescribedBy,i["aria-invalid"]=s.props.ariaInvalid,i["aria-labelledby"]=s.props.ariaLabelledBy,i["aria-required"]=s.props.ariaRequired,i))},s.renderClearButton=function(){var r=s.props,i=r.isClearable,o=r.disabled,c=r.selected,u=r.startDate,f=r.endDate,m=r.clearButtonTitle,h=r.clearButtonClassName,g=h===void 0?"":h,x=r.ariaLabelClose,b=x===void 0?"Close":x,A=r.selectedDates,_=r.readOnly;return i&&!_&&(c!=null||u!=null||f!=null||A?.length)?fe.createElement("button",{type:"button",className:_s("react-datepicker__close-icon",g,{"react-datepicker__close-icon--disabled":o}),disabled:o,"aria-label":b,onClick:s.onClearClick,title:m,tabIndex:-1}):null},s.state=s.calcInitialState(),s.preventFocusTimeout=void 0,s}return Object.defineProperty(e,"defaultProps",{get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",preventOpenOnFocus:!1,monthsShown:1,outsideClickIgnoreClass:bB,readOnly:!1,rangeSeparator:hB,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,swapRange:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:cm,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1,usePointerEvent:!1}},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){window.addEventListener("scroll",this.onScroll,!0),document.addEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},e.prototype.componentDidUpdate=function(n,s){var r,i,o,c;n.inline&&Uae(n.selected,this.props.selected)&&this.setPreSelection(this.props.selected),this.state.monthSelectedIn!==void 0&&n.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),n.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:h2(this.props.highlightDates)}),!s.focused&&!Tl(n.selected,this.props.selected)&&this.setState({inputValue:null}),s.open!==this.state.open&&(s.open===!1&&this.state.open===!0&&((i=(r=this.props).onCalendarOpen)===null||i===void 0||i.call(r)),s.open===!0&&this.state.open===!1&&((c=(o=this.props).onCalendarClose)===null||c===void 0||c.call(o)))},e.prototype.componentWillUnmount=function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0),document.removeEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},e.prototype.renderInputContainer=function(){var n=this.props,s=n.showIcon,r=n.icon,i=n.calendarIconClassname,o=n.calendarIconClassName,c=n.toggleCalendarOnIconClick,u=this.state.open;return i&&console.warn("calendarIconClassname props is deprecated. should use calendarIconClassName props."),fe.createElement("div",{className:"react-datepicker__input-container".concat(s?" react-datepicker__view-calendar-icon":"")},s&&fe.createElement(Bae,Yt({icon:r,className:_s(o,!o&&i,u&&"react-datepicker-ignore-onclickoutside")},c?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())},e.prototype.render=function(){var n=this.renderCalendar();if(this.props.inline)return n;if(this.props.withPortal){var s=this.state.open?fe.createElement(_B,{enableTabLoop:this.props.enableTabLoop},fe.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},n)):null;return this.state.open&&this.props.portalId&&(s=fe.createElement(vB,Yt({portalId:this.props.portalId},this.props),s)),fe.createElement("div",null,this.renderInputContainer(),s)}return fe.createElement(Hae,Yt({},this.props,{className:this.props.popperClassName,hidePopper:!this.isCalendarOpen(),targetComponent:this.renderInputContainer(),popperComponent:n,popperOnKeyDown:this.onPopperKeyDown,showArrow:this.props.showPopperArrow}))},e})(v.Component),Wae="input",h_="navigate";/*!
 * chartjs-plugin-datalabels v2.2.0
 * https://chartjs-plugin-datalabels.netlify.app
 * (c) 2017-2022 chartjs-plugin-datalabels contributors
 * Released under the MIT license
 */var b2=(function(){if(typeof window<"u"){if(window.devicePixelRatio)return window.devicePixelRatio;var t=window.screen;if(t)return(t.deviceXDPI||1)/(t.logicalXDPI||1)}return 1})(),sh={toTextLines:function(t){var e=[],n;for(t=[].concat(t);t.length;)n=t.pop(),typeof n=="string"?e.unshift.apply(e,n.split(`
`)):Array.isArray(n)?t.push.apply(t,n):zt(t)||e.unshift(""+n);return e},textSize:function(t,e,n){var s=[].concat(e),r=s.length,i=t.font,o=0,c;for(t.font=n.string,c=0;c<r;++c)o=Math.max(t.measureText(s[c]).width,o);return t.font=i,{height:r*n.lineHeight,width:o}},bound:function(t,e,n){return Math.max(t,Math.min(e,n))},arrayDiff:function(t,e){var n=t.slice(),s=[],r,i,o,c;for(r=0,o=e.length;r<o;++r)c=e[r],i=n.indexOf(c),i===-1?s.push([c,1]):n.splice(i,1);for(r=0,o=n.length;r<o;++r)s.push([n[r],-1]);return s},rasterize:function(t){return Math.round(t*b2)/b2}};function m_(t,e){var n=e.x,s=e.y;if(n===null)return{x:0,y:-1};if(s===null)return{x:1,y:0};var r=t.x-n,i=t.y-s,o=Math.sqrt(r*r+i*i);return{x:o?r/o:0,y:o?i/o:-1}}function Yae(t,e,n,s,r){switch(r){case"center":n=s=0;break;case"bottom":n=0,s=1;break;case"right":n=1,s=0;break;case"left":n=-1,s=0;break;case"top":n=0,s=-1;break;case"start":n=-n,s=-s;break;case"end":break;default:r*=Math.PI/180,n=Math.cos(r),s=Math.sin(r);break}return{x:t,y:e,vx:n,vy:s}}var qae=0,AB=1,wB=2,jB=4,SB=8;function ag(t,e,n){var s=qae;return t<n.left?s|=AB:t>n.right&&(s|=wB),e<n.top?s|=SB:e>n.bottom&&(s|=jB),s}function Gae(t,e){for(var n=t.x0,s=t.y0,r=t.x1,i=t.y1,o=ag(n,s,e),c=ag(r,i,e),u,f,m;!(!(o|c)||o&c);)u=o||c,u&SB?(f=n+(r-n)*(e.top-s)/(i-s),m=e.top):u&jB?(f=n+(r-n)*(e.bottom-s)/(i-s),m=e.bottom):u&wB?(m=s+(i-s)*(e.right-n)/(r-n),f=e.right):u&AB&&(m=s+(i-s)*(e.left-n)/(r-n),f=e.left),u===o?(n=f,s=m,o=ag(n,s,e)):(r=f,i=m,c=ag(r,i,e));return{x0:n,x1:r,y0:s,y1:i}}function ig(t,e){var n=e.anchor,s=t,r,i;return e.clamp&&(s=Gae(s,e.area)),n==="start"?(r=s.x0,i=s.y0):n==="end"?(r=s.x1,i=s.y1):(r=(s.x0+s.x1)/2,i=(s.y0+s.y1)/2),Yae(r,i,t.vx,t.vy,e.align)}var og={arc:function(t,e){var n=(t.startAngle+t.endAngle)/2,s=Math.cos(n),r=Math.sin(n),i=t.innerRadius,o=t.outerRadius;return ig({x0:t.x+s*i,y0:t.y+r*i,x1:t.x+s*o,y1:t.y+r*o,vx:s,vy:r},e)},point:function(t,e){var n=m_(t,e.origin),s=n.x*t.options.radius,r=n.y*t.options.radius;return ig({x0:t.x-s,y0:t.y-r,x1:t.x+s,y1:t.y+r,vx:n.x,vy:n.y},e)},bar:function(t,e){var n=m_(t,e.origin),s=t.x,r=t.y,i=0,o=0;return t.horizontal?(s=Math.min(t.x,t.base),i=Math.abs(t.base-t.x)):(r=Math.min(t.y,t.base),o=Math.abs(t.base-t.y)),ig({x0:s,y0:r+o,x1:s+i,y1:r,vx:n.x,vy:n.y},e)},fallback:function(t,e){var n=m_(t,e.origin);return ig({x0:t.x,y0:t.y,x1:t.x+(t.width||0),y1:t.y+(t.height||0),vx:n.x,vy:n.y},e)}},Ai=sh.rasterize;function Kae(t){var e=t.borderWidth||0,n=t.padding,s=t.size.height,r=t.size.width,i=-r/2,o=-s/2;return{frame:{x:i-n.left-e,y:o-n.top-e,w:r+n.width+e*2,h:s+n.height+e*2},text:{x:i,y:o,w:r,h:s}}}function Qae(t,e){var n=e.chart.getDatasetMeta(e.datasetIndex).vScale;if(!n)return null;if(n.xCenter!==void 0&&n.yCenter!==void 0)return{x:n.xCenter,y:n.yCenter};var s=n.getBasePixel();return t.horizontal?{x:s,y:null}:{x:null,y:s}}function Xae(t){return t instanceof QJ?og.arc:t instanceof $i?og.point:t instanceof bx?og.bar:og.fallback}function Zae(t,e,n,s,r,i){var o=Math.PI/2;if(i){var c=Math.min(i,r/2,s/2),u=e+c,f=n+c,m=e+s-c,h=n+r-c;t.moveTo(e,f),u<m&&f<h?(t.arc(u,f,c,-Math.PI,-o),t.arc(m,f,c,-o,0),t.arc(m,h,c,0,o),t.arc(u,h,c,o,Math.PI)):u<m?(t.moveTo(u,n),t.arc(m,f,c,-o,o),t.arc(u,f,c,o,Math.PI+o)):f<h?(t.arc(u,f,c,-Math.PI,0),t.arc(u,h,c,0,Math.PI)):t.arc(u,f,c,-Math.PI,Math.PI),t.closePath(),t.moveTo(e,n)}else t.rect(e,n,s,r)}function Jae(t,e,n){var s=n.backgroundColor,r=n.borderColor,i=n.borderWidth;!s&&(!r||!i)||(t.beginPath(),Zae(t,Ai(e.x)+i/2,Ai(e.y)+i/2,Ai(e.w)-i,Ai(e.h)-i,n.borderRadius),t.closePath(),s&&(t.fillStyle=s,t.fill()),r&&i&&(t.strokeStyle=r,t.lineWidth=i,t.lineJoin="miter",t.stroke()))}function eie(t,e,n){var s=n.lineHeight,r=t.w,i=t.x,o=t.y+s/2;return e==="center"?i+=r/2:(e==="end"||e==="right")&&(i+=r),{h:s,w:r,x:i,y:o}}function tie(t,e,n){var s=t.shadowBlur,r=n.stroked,i=Ai(n.x),o=Ai(n.y),c=Ai(n.w);r&&t.strokeText(e,i,o,c),n.filled&&(s&&r&&(t.shadowBlur=0),t.fillText(e,i,o,c),s&&r&&(t.shadowBlur=s))}function nie(t,e,n,s){var r=s.textAlign,i=s.color,o=!!i,c=s.font,u=e.length,f=s.textStrokeColor,m=s.textStrokeWidth,h=f&&m,g;if(!(!u||!o&&!h))for(n=eie(n,r,c),t.font=c.string,t.textAlign=r,t.textBaseline="middle",t.shadowBlur=s.textShadowBlur,t.shadowColor=s.textShadowColor,o&&(t.fillStyle=i),h&&(t.lineJoin="round",t.lineWidth=m,t.strokeStyle=f),g=0,u=e.length;g<u;++g)tie(t,e[g],{stroked:h,filled:o,w:n.w,x:n.x,y:n.y+n.h*g})}var CB=function(t,e,n,s){var r=this;r._config=t,r._index=s,r._model=null,r._rects=null,r._ctx=e,r._el=n};Ya(CB.prototype,{_modelize:function(t,e,n,s){var r=this,i=r._index,o=es(An([n.font,{}],s,i)),c=An([n.color,Mn.color],s,i);return{align:An([n.align,"center"],s,i),anchor:An([n.anchor,"center"],s,i),area:s.chart.chartArea,backgroundColor:An([n.backgroundColor,null],s,i),borderColor:An([n.borderColor,null],s,i),borderRadius:An([n.borderRadius,0],s,i),borderWidth:An([n.borderWidth,0],s,i),clamp:An([n.clamp,!1],s,i),clip:An([n.clip,!1],s,i),color:c,display:t,font:o,lines:e,offset:An([n.offset,4],s,i),opacity:An([n.opacity,1],s,i),origin:Qae(r._el,s),padding:As(An([n.padding,4],s,i)),positioner:Xae(r._el),rotation:An([n.rotation,0],s,i)*(Math.PI/180),size:sh.textSize(r._ctx,e,o),textAlign:An([n.textAlign,"start"],s,i),textShadowBlur:An([n.textShadowBlur,0],s,i),textShadowColor:An([n.textShadowColor,c],s,i),textStrokeColor:An([n.textStrokeColor,c],s,i),textStrokeWidth:An([n.textStrokeWidth,0],s,i)}},update:function(t){var e=this,n=null,s=null,r=e._index,i=e._config,o,c,u,f=An([i.display,!0],t,r);f&&(o=t.dataset.data[r],c=Dt(rn(i.formatter,[o,t]),o),u=zt(c)?[]:sh.toTextLines(c),u.length&&(n=e._modelize(f,u,i,t),s=Kae(n))),e._model=n,e._rects=s},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(t,e){var n=this,s=t.ctx,r=n._model,i=n._rects,o;this.visible()&&(s.save(),r.clip&&(o=r.area,s.beginPath(),s.rect(o.left,o.top,o.right-o.left,o.bottom-o.top),s.clip()),s.globalAlpha=sh.bound(0,r.opacity,1),s.translate(Ai(e.x),Ai(e.y)),s.rotate(r.rotation),Jae(s,i.frame,r),nie(s,r.lines,i.text,r),s.restore())}});var sie=Number.MIN_SAFE_INTEGER||-9007199254740991,rie=Number.MAX_SAFE_INTEGER||9007199254740991;function _f(t,e,n){var s=Math.cos(n),r=Math.sin(n),i=e.x,o=e.y;return{x:i+s*(t.x-i)-r*(t.y-o),y:o+r*(t.x-i)+s*(t.y-o)}}function v2(t,e){var n=rie,s=sie,r=e.origin,i,o,c,u,f;for(i=0;i<t.length;++i)o=t[i],c=o.x-r.x,u=o.y-r.y,f=e.vx*c+e.vy*u,n=Math.min(n,f),s=Math.max(s,f);return{min:n,max:s}}function lg(t,e){var n=e.x-t.x,s=e.y-t.y,r=Math.sqrt(n*n+s*s);return{vx:(e.x-t.x)/r,vy:(e.y-t.y)/r,origin:t,ln:r}}var NB=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};Ya(NB.prototype,{center:function(){var t=this._rect;return{x:t.x+t.w/2,y:t.y+t.h/2}},update:function(t,e,n){this._rotation=n,this._rect={x:e.x+t.x,y:e.y+t.y,w:e.w,h:e.h}},contains:function(t){var e=this,n=1,s=e._rect;return t=_f(t,e.center(),-e._rotation),!(t.x<s.x-n||t.y<s.y-n||t.x>s.x+s.w+n*2||t.y>s.y+s.h+n*2)},intersects:function(t){var e=this._points(),n=t._points(),s=[lg(e[0],e[1]),lg(e[0],e[3])],r,i,o;for(this._rotation!==t._rotation&&s.push(lg(n[0],n[1]),lg(n[0],n[3])),r=0;r<s.length;++r)if(i=v2(e,s[r]),o=v2(n,s[r]),i.max<o.min||o.max<i.min)return!1;return!0},_points:function(){var t=this,e=t._rect,n=t._rotation,s=t.center();return[_f({x:e.x,y:e.y},s,n),_f({x:e.x+e.w,y:e.y},s,n),_f({x:e.x+e.w,y:e.y+e.h},s,n),_f({x:e.x,y:e.y+e.h},s,n)]}});function kB(t,e,n){var s=e.positioner(t,e),r=s.vx,i=s.vy;if(!r&&!i)return{x:s.x,y:s.y};var o=n.w,c=n.h,u=e.rotation,f=Math.abs(o/2*Math.cos(u))+Math.abs(c/2*Math.sin(u)),m=Math.abs(o/2*Math.sin(u))+Math.abs(c/2*Math.cos(u)),h=1/Math.max(Math.abs(r),Math.abs(i));return f*=r*h,m*=i*h,f+=e.offset*r,m+=e.offset*i,{x:s.x+f,y:s.y+m}}function aie(t,e){var n,s,r,i;for(n=t.length-1;n>=0;--n)for(r=t[n].$layout,s=n-1;s>=0&&r._visible;--s)i=t[s].$layout,i._visible&&r._box.intersects(i._box)&&e(r,i);return t}function iie(t){var e,n,s,r,i,o,c;for(e=0,n=t.length;e<n;++e)s=t[e],r=s.$layout,r._visible&&(c=new Proxy(s._el,{get:(u,f)=>u.getProps([f],!0)[f]}),i=s.geometry(),o=kB(c,s.model(),i),r._box.update(o,i,s.rotation()));return aie(t,function(u,f){var m=u._hidable,h=f._hidable;m&&h||h?f._visible=!1:m&&(u._visible=!1)})}var rh={prepare:function(t){var e=[],n,s,r,i,o;for(n=0,r=t.length;n<r;++n)for(s=0,i=t[n].length;s<i;++s)o=t[n][s],e.push(o),o.$layout={_box:new NB,_hidable:!1,_visible:!0,_set:n,_idx:o._index};return e.sort(function(c,u){var f=c.$layout,m=u.$layout;return f._idx===m._idx?m._set-f._set:m._idx-f._idx}),this.update(e),e},update:function(t){var e=!1,n,s,r,i,o;for(n=0,s=t.length;n<s;++n)r=t[n],i=r.model(),o=r.$layout,o._hidable=i&&i.display==="auto",o._visible=r.visible(),e|=o._hidable;e&&iie(t)},lookup:function(t,e){var n,s;for(n=t.length-1;n>=0;--n)if(s=t[n].$layout,s&&s._visible&&s._box.contains(e))return t[n];return null},draw:function(t,e){var n,s,r,i,o,c;for(n=0,s=e.length;n<s;++n)r=e[n],i=r.$layout,i._visible&&(o=r.geometry(),c=kB(r._el,r.model(),o),i._box.update(c,o,r.rotation()),r.draw(t,c))}},oie=function(t){if(zt(t))return null;var e=t,n,s,r;if(Mt(t))if(!zt(t.label))e=t.label;else if(!zt(t.r))e=t.r;else for(e="",n=Object.keys(t),r=0,s=n.length;r<s;++r)e+=(r!==0?", ":"")+n[r]+": "+t[n[r]];return""+e},lie={align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:oie,labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},Ks="$datalabels",DB="$default";function cie(t,e){var n=t.datalabels,s={},r=[],i,o;return n===!1?null:(n===!0&&(n={}),e=Ya({},[e,n]),i=e.labels||{},o=Object.keys(i),delete e.labels,o.length?o.forEach(function(c){i[c]&&r.push(Ya({},[e,i[c],{_key:c}]))}):r.push(e),s=r.reduce(function(c,u){return an(u.listeners||{},function(f,m){c[m]=c[m]||{},c[m][u._key||DB]=f}),delete u.listeners,c},{}),{labels:r,listeners:s})}function FA(t,e,n,s){if(e){var r=n.$context,i=n.$groups,o;e[i._set]&&(o=e[i._set][i._key],o&&rn(o,[r,s])===!0&&(t[Ks]._dirty=!0,n.update(r)))}}function uie(t,e,n,s,r){var i,o;!n&&!s||(n?s?n!==s&&(o=i=!0):o=!0:i=!0,o&&FA(t,e.leave,n,r),i&&FA(t,e.enter,s,r))}function die(t,e){var n=t[Ks],s=n._listeners,r,i;if(!(!s.enter&&!s.leave)){if(e.type==="mousemove")i=rh.lookup(n._labels,e);else if(e.type!=="mouseout")return;r=n._hovered,n._hovered=i,uie(t,s,r,i,e)}}function fie(t,e){var n=t[Ks],s=n._listeners.click,r=s&&rh.lookup(n._labels,e);r&&FA(t,s,r,e)}var jS={id:"datalabels",defaults:lie,beforeInit:function(t){t[Ks]={_actives:[]}},beforeUpdate:function(t){var e=t[Ks];e._listened=!1,e._listeners={},e._datasets=[],e._labels=[]},afterDatasetUpdate:function(t,e,n){var s=e.index,r=t[Ks],i=r._datasets[s]=[],o=t.isDatasetVisible(s),c=t.data.datasets[s],u=cie(c,n),f=e.meta.data||[],m=t.ctx,h,g,x,b,A,_,j,C;for(m.save(),h=0,x=f.length;h<x;++h)if(j=f[h],j[Ks]=[],o&&j&&t.getDataVisibility(h)&&!j.skip)for(g=0,b=u.labels.length;g<b;++g)A=u.labels[g],_=A._key,C=new CB(A,m,j,h),C.$groups={_set:s,_key:_||DB},C.$context={active:!1,chart:t,dataIndex:h,dataset:c,datasetIndex:s},C.update(C.$context),j[Ks].push(C),i.push(C);m.restore(),Ya(r._listeners,u.listeners,{merger:function(k,E,N){E[k]=E[k]||{},E[k][e.index]=N[k],r._listened=!0}})},afterUpdate:function(t){t[Ks]._labels=rh.prepare(t[Ks]._datasets)},afterDatasetsDraw:function(t){rh.draw(t,t[Ks]._labels)},beforeEvent:function(t,e){if(t[Ks]._listened){var n=e.event;switch(n.type){case"mousemove":case"mouseout":die(t,n);break;case"click":fie(t,n);break}}},afterEvent:function(t){var e=t[Ks],n=e._actives,s=e._actives=t.getActiveElements(),r=sh.arrayDiff(n,s),i,o,c,u,f,m,h;for(i=0,o=r.length;i<o;++i)if(f=r[i],f[1])for(h=f[0].element[Ks]||[],c=0,u=h.length;c<u;++c)m=h[c],m.$context.active=f[1]===1,m.update(m.$context);(e._dirty||r.length)&&(rh.update(e._labels),t.render()),delete e._dirty}};zs.register(Yo,qo,$i,fa,Uo,Wo,Ho);zs.unregister(jS);const Af=t=>t.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "),Zc=t=>{if(!t)return t;const e=new Date(t);return e.setHours(23,59,59,999),e};function hie({projectId:t}){const{showNotification:e}=Os(),[n,s]=v.useState([]),[r,i]=v.useState(null),[o,c]=v.useState(null),[u,f]=v.useState(""),[m,h]=v.useState(1),[g,x]=v.useState(!0),[b,A]=v.useState(null);v.useEffect(()=>{const X=sessionStorage.getItem("energyAnalysis_startDate"),de=sessionStorage.getItem("energyAnalysis_endDate");if(X&&de)i(new Date(X)),c(new Date(de));else{const Ne=new Date,Ke=new Date;Ke.setDate(Ne.getDate()-30),i(Ke),c(Zc(Ne))}},[]),v.useEffect(()=>{r&&o&&(sessionStorage.setItem("energyAnalysis_startDate",r.toISOString()),sessionStorage.setItem("energyAnalysis_endDate",o.toISOString()))},[r,o]),v.useEffect(()=>{t&&Re.get(`${Ce}/api/projects/${t}`).then(X=>{const de=X.data.energy_scale_factor||1;h(de),f(de.toString())}).catch(X=>{console.error("Error loading project data:",X),h(1),f("1")})},[t]),v.useEffect(()=>{if(!t||!r||!o)return;const X=r.toISOString().split("T")[0],de=o.getFullYear(),Ne=String(o.getMonth()+1).padStart(2,"0"),Ke=String(o.getDate()).padStart(2,"0"),ce=`${de}-${Ne}-${Ke}T23:59:59.999`;Re.get(`${Ce}/api/consumption_data/${t}`,{params:{start_date:X,end_date:ce,scale_factor:m,include_full_end_day:!0,local_timezone:!0}}).then(xe=>{xe.data.data&&Array.isArray(xe.data.data)?(s(xe.data.data),A(xe.data.profile_info)):Array.isArray(xe.data)&&s(xe.data)}).catch(xe=>{console.error("Error loading data:",xe),e("Failed to fetch consumption data","danger")})},[t,r,o,m,e]);const _=X=>{const de=X.target.value;if(f(de),de===""){x(!1);return}const Ne=parseFloat(de);if(isNaN(Ne)||Ne<=0){x(!1);return}x(!0),h(Ne)},j=async()=>{if(u===""){e("Scale factor cannot be empty. Please enter a positive number.","warning"),f(m.toString()),x(!0);return}const X=parseFloat(u);if(isNaN(X)||X<=0){e("Scale factor must be a positive number.","warning"),f(m.toString()),x(!0);return}try{await Re.put(`${Ce}/api/projects/${t}`,{energy_scale_factor:X}),h(X),x(!0)}catch(de){console.error("Error saving scale factor:",de),e("Failed to save scale factor","danger"),f(m.toString()),x(!0)}},C={labels:n.map(X=>new Date(X.timestamp).toLocaleString()),datasets:[{label:"Demand (kW)",data:n.map(X=>X.demand_kw),borderColor:"rgb(75, 192, 192)",backgroundColor:"rgba(75, 192, 192, 0.2)",fill:!0,tension:.1,pointRadius:0}]},k={responsive:!0,interaction:{mode:"index",intersect:!1},plugins:{tooltip:{mode:"index",intersect:!1},legend:{position:"top"},title:{display:!0,text:"Energy Consumption (kW)"},decimation:{enabled:!0,algorithm:"lttb",samples:Math.min(2e3,n.length)},datalabels:{display:!1}},scales:{x:{title:{display:!0,text:"Timestamp"},ticks:{autoSkip:!0}},y:{title:{display:!0,text:"Demand (kW)"},beginAtZero:!0}}},E=(n.reduce((X,de)=>X+de.demand_kw,0)*.5).toFixed(0),N=new Set(n.map(X=>X.timestamp.split("T")[0])),L=(E/N.size).toFixed(0),M=Math.max(...n.map(X=>X.demand_kw)).toFixed(1),T=(n.reduce((X,de)=>X+de.demand_kw,0)/n.length).toFixed(1),O=(T/M).toFixed(2),I=n.reduce((X,de)=>{const Ne=new Date(de.timestamp).getHours();return Ne>=17||Ne<7?X+de.demand_kw:X},0)*.5,$=(N.size>0?I/N.size:0).toFixed(0),H=Array(24).fill(0),V=Array(24).fill(0);n.forEach(X=>{const de=new Date(X.timestamp).getHours();H[de]+=X.demand_kw,V[de]+=1});const G=H.map((X,de)=>(X/(V[de]||1)).toFixed(2)),U={labels:Array.from({length:24},(X,de)=>`${de}:00`),datasets:[{label:"Avg Demand (kW)",data:G,borderColor:"purple",backgroundColor:"rgba(128, 0, 128, 0.2)",fill:!0,tension:.3,pointRadius:0}]},R={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{tooltip:{mode:"index",intersect:!1},title:{display:!0,text:"Average Daily Load Profle (Hourly)"},legend:{display:!1},datalabels:{display:!1}},scales:{x:{title:{display:!0,text:"Hour of Day"}},y:{beginAtZero:!0,title:{display:!0,text:"Avg Demand (kW)"}}}},P={};n.forEach(X=>{const de=X.timestamp.split("T")[0];P[de]||(P[de]=0),P[de]+=X.demand_kw*.5});const Z=Object.keys(P).sort(),ne=Z.map(X=>P[X].toFixed(1)),D={labels:Z,datasets:[{label:"Daily Energy Use (kWh)",data:ne,backgroundColor:"rgba(0, 123, 255, 0.6)",borderRadius:5,barPercentage:1,categoryPercentage:.5}]},B={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{tooltip:{mode:"index",intersect:!1},title:{display:!0,text:"Daily Energy Use (kWh/day)"},legend:{display:!1},decimation:{enabled:!0,algorithm:"lttb",samples:200},datalabels:{display:!1}},scales:{x:{title:{display:!0,text:"Date"},ticks:{maxTicksLimit:15}},y:{beginAtZero:!0,title:{display:!0,text:"kWh"}}}},se=Array.from({length:24},()=>Array(365).fill(0)),le=Array.from({length:24},()=>Array(365).fill(0)),ae={};let te=new Date("2025-01-01");return n.forEach(X=>{const de=new Date(X.timestamp),Ne=de.getHours(),Ke=de.toISOString().split("T")[0];if(!(Ke in ae)){const xe=Math.floor((de-te)/864e5);ae[Ke]=xe}const ce=ae[Ke];ce>=0&&ce<=365&&(se[Ne][ce]+=X.demand_kw,le[Ne][ce]+=1)}),a.jsxs("div",{className:"container",children:[a.jsx("h4",{children:"Energy Analysis"}),n.length>0&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"d-flex flex-wrap justify-content-between align-items-center mb-3",children:[a.jsxs("div",{children:[a.jsx("h5",{className:"mb-0",children:"Consumption Overview"}),b&&a.jsxs("div",{className:"small mt-1 d-flex align-items-center flex-wrap",children:[a.jsxs("span",{className:"badge bg-secondary me-2",children:[a.jsx("i",{className:"bi bi-lightning-fill me-1"}),b.name]}),b.monthly_avg_kwh_original&&a.jsxs("span",{className:"badge bg-primary me-2",children:[a.jsx("i",{className:"bi bi-lightning-charge me-1"}),Math.round(b.monthly_avg_kwh_original*12).toLocaleString("en-ZA")," kWh/yr"]}),b.max_peak_demand_kw&&a.jsxs("span",{className:"badge bg-danger me-2",children:[a.jsx("i",{className:"bi bi-arrow-up-right me-1"}),"Peak: ",b.max_peak_demand_kw.toFixed(2)," kW"]}),b.scaler&&b.scaler!==1&&a.jsxs("span",{className:"badge bg-warning text-dark me-2",children:[a.jsx("i",{className:"bi bi-rulers me-1"}),"Scaled ",b.scaler.toFixed(2),"x"]}),b.profile_type&&a.jsxs("span",{className:"badge bg-info text-dark me-2",children:[a.jsx("i",{className:"bi bi-tag me-1"}),b.profile_type]})]})]}),a.jsxs("div",{className:"d-flex gap-3 align-items-center",children:[a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("label",{className:"form-label mb-0 me-2 small text-muted",children:"Scale Factor:"}),a.jsx("input",{type:"number",className:`form-control form-control-sm ${g?"":"is-invalid"}`,style:{width:"80px"},value:u,onChange:_,onBlur:j,step:"0.01",placeholder:"1.0"})]}),a.jsxs("div",{className:"btn-group",children:[a.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>{const X=new Date,de=new Date;de.setDate(X.getDate()-7),i(de),c(Zc(X))},children:"Last 7 Days"}),a.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>{const X=new Date,de=new Date;de.setDate(X.getDate()-30),i(de),c(Zc(X))},children:"Last 30 Days"}),a.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>{i(new Date("2025-01-01")),c(Zc(new Date("2025-12-31")))},children:"Full Year"}),a.jsx(Xl,{selected:r,onChange:X=>{const[de,Ne]=X;i(de),c(Ne?Zc(new Date(Ne)):null),console.log("Date range set:",{startDate:de,endDate:Ne,endDateWithTime:Ne?Zc(new Date(Ne)).toISOString():null})},startDate:r,endDate:o,selectsRange:!0,isClearable:!1,dateFormat:"dd/MM/yyyy",className:"form-control form-control-sm shadow-sm",popperPlacement:"bottom-end"})]})]})]}),a.jsx(Rs,{data:C,options:k})]}),n.length>0&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"row mb-4 g-3",children:[a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"border-start border-4 border-primary bg-white shadow-sm rounded p-3 h-100",children:[a.jsx("div",{className:"text-muted small",children:"Total Consumption"}),a.jsxs("div",{className:"fs-4 fw-bold",children:[Af(E)," kWh"]})]})}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"border-start border-4 border-success bg-white shadow-sm rounded p-3 h-100",children:[a.jsx("div",{className:"text-muted small",children:"Average Daily Usage"}),a.jsxs("div",{className:"fs-4 fw-bold",children:[Af(L)," kWh/day"]})]})}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"border-start border-4 border-danger bg-white shadow-sm rounded p-3 h-100",children:[a.jsx("div",{className:"text-muted small",children:"Peak Demand"}),a.jsxs("div",{className:"fs-4 fw-bold",children:[Af(M)," kW"]})]})})]}),a.jsxs("div",{className:"row mb-4 g-3",children:[a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"border-start border-4 border-warning bg-white shadow-sm rounded p-3 h-100",children:[a.jsx("div",{className:"text-muted small",children:"Avg. Daily Nocturnal Load"}),a.jsxs("div",{className:"fs-4 fw-bold",children:[Af($)," kWh"]})]})}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"border-start border-4 border-info bg-white shadow-sm rounded p-3 h-100",children:[a.jsx("div",{className:"text-muted small",children:"Average Demand"}),a.jsxs("div",{className:"fs-4 fw-bold",children:[Af(T)," kW"]})]})}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"border-start border-4 border-dark bg-white shadow-sm rounded p-3 h-100",children:[a.jsx("div",{className:"text-muted small",children:"Load Factor"}),a.jsx("div",{className:"fs-4 fw-bold",children:O})]})})]})]}),n.length>0&&a.jsx("div",{className:"mb-5 chart-container",children:a.jsx(Rs,{data:U,options:R})}),n.length>0&&a.jsx("div",{className:"mb-5 chart-container",children:a.jsx(ia,{data:D,options:B})}),n.length===0&&a.jsx("p",{children:"No data available for the selected period."})]})}function Zl(t){"@babel/helpers - typeof";return Zl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zl(t)}function mie(t,e){if(Zl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(Zl(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function EB(t){var e=mie(t,"string");return Zl(e)=="symbol"?e:e+""}function Vf(t,e,n){return(e=EB(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function xt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_2(Object(n),!0).forEach(function(s){Vf(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_2(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function pie(t){if(Array.isArray(t))return t}function gie(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var s,r,i,o,c=[],u=!0,f=!1;try{if(i=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;u=!1}else for(;!(u=(s=i.call(n)).done)&&(c.push(s.value),c.length!==e);u=!0);}catch(m){f=!0,r=m}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(f)throw r}}return c}}function BA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,s=Array(e);n<e;n++)s[n]=t[n];return s}function TB(t,e){if(t){if(typeof t=="string")return BA(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?BA(t,e):void 0}}function yie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ei(t,e){return pie(t)||gie(t,e)||TB(t,e)||yie()}function Hi(t,e){if(t==null)return{};var n,s,r=Dw(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var xie=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function bie(t){var e=t.defaultInputValue,n=e===void 0?"":e,s=t.defaultMenuIsOpen,r=s===void 0?!1:s,i=t.defaultValue,o=i===void 0?null:i,c=t.inputValue,u=t.menuIsOpen,f=t.onChange,m=t.onInputChange,h=t.onMenuClose,g=t.onMenuOpen,x=t.value,b=Hi(t,xie),A=v.useState(c!==void 0?c:n),_=Ei(A,2),j=_[0],C=_[1],k=v.useState(u!==void 0?u:r),E=Ei(k,2),N=E[0],L=E[1],M=v.useState(x!==void 0?x:o),T=Ei(M,2),O=T[0],I=T[1],$=v.useCallback(function(Z,ne){typeof f=="function"&&f(Z,ne),I(Z)},[f]),H=v.useCallback(function(Z,ne){var D;typeof m=="function"&&(D=m(Z,ne)),C(D!==void 0?D:Z)},[m]),V=v.useCallback(function(){typeof g=="function"&&g(),L(!0)},[g]),G=v.useCallback(function(){typeof h=="function"&&h(),L(!1)},[h]),U=c!==void 0?c:j,R=u!==void 0?u:N,P=x!==void 0?x:O;return xt(xt({},b),{},{inputValue:U,menuIsOpen:R,onChange:$,onInputChange:H,onMenuClose:G,onMenuOpen:V,value:P})}function vie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function A2(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,EB(s.key),s)}}function _ie(t,e,n){return e&&A2(t.prototype,e),n&&A2(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Aie(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Gg(t,e)}function Ny(t){return Ny=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ny(t)}function MB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(MB=function(){return!!t})()}function wie(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jie(t,e){if(e&&(Zl(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wie(t)}function Sie(t){var e=MB();return function(){var n,s=Ny(t);if(e){var r=Ny(this).constructor;n=Reflect.construct(s,arguments,r)}else n=s.apply(this,arguments);return jie(this,n)}}function Cie(t){if(Array.isArray(t))return BA(t)}function Nie(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function kie(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SS(t){return Cie(t)||Nie(t)||TB(t)||kie()}function Die(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function Eie(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var Tie=(function(){function t(n){var s=this;this._insertTag=function(r){var i;s.tags.length===0?s.insertionPoint?i=s.insertionPoint.nextSibling:s.prepend?i=s.container.firstChild:i=s.before:i=s.tags[s.tags.length-1].nextSibling,s.container.insertBefore(r,i),s.tags.push(r)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(s){s.forEach(this._insertTag)},e.insert=function(s){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Eie(this));var r=this.tags[this.tags.length-1];if(this.isSpeedy){var i=Die(r);try{i.insertRule(s,i.cssRules.length)}catch{}}else r.appendChild(document.createTextNode(s));this.ctr++},e.flush=function(){this.tags.forEach(function(s){var r;return(r=s.parentNode)==null?void 0:r.removeChild(s)}),this.tags=[],this.ctr=0},t})(),Ns="-ms-",ky="-moz-",Jt="-webkit-",RB="comm",CS="rule",NS="decl",Mie="@import",OB="@keyframes",Rie="@layer",Oie=Math.abs,Mx=String.fromCharCode,Pie=Object.assign;function Lie(t,e){return vs(t,0)^45?(((e<<2^vs(t,0))<<2^vs(t,1))<<2^vs(t,2))<<2^vs(t,3):0}function PB(t){return t.trim()}function Fie(t,e){return(t=e.exec(t))?t[0]:t}function en(t,e,n){return t.replace(e,n)}function IA(t,e){return t.indexOf(e)}function vs(t,e){return t.charCodeAt(e)|0}function Th(t,e,n){return t.slice(e,n)}function Na(t){return t.length}function kS(t){return t.length}function cg(t,e){return e.push(t),t}function Bie(t,e){return t.map(e).join("")}var Rx=1,Ou=1,LB=0,ir=0,Zn=0,sd="";function Ox(t,e,n,s,r,i,o){return{value:t,root:e,parent:n,type:s,props:r,children:i,line:Rx,column:Ou,length:o,return:""}}function wf(t,e){return Pie(Ox("",null,null,"",null,null,0),t,{length:-t.length},e)}function Iie(){return Zn}function Vie(){return Zn=ir>0?vs(sd,--ir):0,Ou--,Zn===10&&(Ou=1,Rx--),Zn}function br(){return Zn=ir<LB?vs(sd,ir++):0,Ou++,Zn===10&&(Ou=1,Rx++),Zn}function Ha(){return vs(sd,ir)}function Ig(){return ir}function dm(t,e){return Th(sd,t,e)}function Mh(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function FB(t){return Rx=Ou=1,LB=Na(sd=t),ir=0,[]}function BB(t){return sd="",t}function Vg(t){return PB(dm(ir-1,VA(t===91?t+2:t===40?t+1:t)))}function zie(t){for(;(Zn=Ha())&&Zn<33;)br();return Mh(t)>2||Mh(Zn)>3?"":" "}function $ie(t,e){for(;--e&&br()&&!(Zn<48||Zn>102||Zn>57&&Zn<65||Zn>70&&Zn<97););return dm(t,Ig()+(e<6&&Ha()==32&&br()==32))}function VA(t){for(;br();)switch(Zn){case t:return ir;case 34:case 39:t!==34&&t!==39&&VA(Zn);break;case 40:t===41&&VA(t);break;case 92:br();break}return ir}function Hie(t,e){for(;br()&&t+Zn!==57;)if(t+Zn===84&&Ha()===47)break;return"/*"+dm(e,ir-1)+"*"+Mx(t===47?t:br())}function Uie(t){for(;!Mh(Ha());)br();return dm(t,ir)}function Wie(t){return BB(zg("",null,null,null,[""],t=FB(t),0,[0],t))}function zg(t,e,n,s,r,i,o,c,u){for(var f=0,m=0,h=o,g=0,x=0,b=0,A=1,_=1,j=1,C=0,k="",E=r,N=i,L=s,M=k;_;)switch(b=C,C=br()){case 40:if(b!=108&&vs(M,h-1)==58){IA(M+=en(Vg(C),"&","&\f"),"&\f")!=-1&&(j=-1);break}case 34:case 39:case 91:M+=Vg(C);break;case 9:case 10:case 13:case 32:M+=zie(b);break;case 92:M+=$ie(Ig()-1,7);continue;case 47:switch(Ha()){case 42:case 47:cg(Yie(Hie(br(),Ig()),e,n),u);break;default:M+="/"}break;case 123*A:c[f++]=Na(M)*j;case 125*A:case 59:case 0:switch(C){case 0:case 125:_=0;case 59+m:j==-1&&(M=en(M,/\f/g,"")),x>0&&Na(M)-h&&cg(x>32?j2(M+";",s,n,h-1):j2(en(M," ","")+";",s,n,h-2),u);break;case 59:M+=";";default:if(cg(L=w2(M,e,n,f,m,r,c,k,E=[],N=[],h),i),C===123)if(m===0)zg(M,e,L,L,E,i,h,c,N);else switch(g===99&&vs(M,3)===110?100:g){case 100:case 108:case 109:case 115:zg(t,L,L,s&&cg(w2(t,L,L,0,0,r,c,k,r,E=[],h),N),r,N,h,c,s?E:N);break;default:zg(M,L,L,L,[""],N,0,c,N)}}f=m=x=0,A=j=1,k=M="",h=o;break;case 58:h=1+Na(M),x=b;default:if(A<1){if(C==123)--A;else if(C==125&&A++==0&&Vie()==125)continue}switch(M+=Mx(C),C*A){case 38:j=m>0?1:(M+="\f",-1);break;case 44:c[f++]=(Na(M)-1)*j,j=1;break;case 64:Ha()===45&&(M+=Vg(br())),g=Ha(),m=h=Na(k=M+=Uie(Ig())),C++;break;case 45:b===45&&Na(M)==2&&(A=0)}}return i}function w2(t,e,n,s,r,i,o,c,u,f,m){for(var h=r-1,g=r===0?i:[""],x=kS(g),b=0,A=0,_=0;b<s;++b)for(var j=0,C=Th(t,h+1,h=Oie(A=o[b])),k=t;j<x;++j)(k=PB(A>0?g[j]+" "+C:en(C,/&\f/g,g[j])))&&(u[_++]=k);return Ox(t,e,n,r===0?CS:c,u,f,m)}function Yie(t,e,n){return Ox(t,e,n,RB,Mx(Iie()),Th(t,2,-2),0)}function j2(t,e,n,s){return Ox(t,e,n,NS,Th(t,0,s),Th(t,s+1,-1),s)}function pu(t,e){for(var n="",s=kS(t),r=0;r<s;r++)n+=e(t[r],r,t,e)||"";return n}function qie(t,e,n,s){switch(t.type){case Rie:if(t.children.length)break;case Mie:case NS:return t.return=t.return||t.value;case RB:return"";case OB:return t.return=t.value+"{"+pu(t.children,s)+"}";case CS:t.value=t.props.join(",")}return Na(n=pu(t.children,s))?t.return=t.value+"{"+n+"}":""}function Gie(t){var e=kS(t);return function(n,s,r,i){for(var o="",c=0;c<e;c++)o+=t[c](n,s,r,i)||"";return o}}function Kie(t){return function(e){e.root||(e=e.return)&&t(e)}}function Qie(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var Xie=function(e,n,s){for(var r=0,i=0;r=i,i=Ha(),r===38&&i===12&&(n[s]=1),!Mh(i);)br();return dm(e,ir)},Zie=function(e,n){var s=-1,r=44;do switch(Mh(r)){case 0:r===38&&Ha()===12&&(n[s]=1),e[s]+=Xie(ir-1,n,s);break;case 2:e[s]+=Vg(r);break;case 4:if(r===44){e[++s]=Ha()===58?"&\f":"",n[s]=e[s].length;break}default:e[s]+=Mx(r)}while(r=br());return e},Jie=function(e,n){return BB(Zie(FB(e),n))},S2=new WeakMap,eoe=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,s=e.parent,r=e.column===s.column&&e.line===s.line;s.type!=="rule";)if(s=s.parent,!s)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!S2.get(s))&&!r){S2.set(e,!0);for(var i=[],o=Jie(n,i),c=s.props,u=0,f=0;u<o.length;u++)for(var m=0;m<c.length;m++,f++)e.props[f]=i[u]?o[u].replace(/&\f/g,c[m]):c[m]+" "+o[u]}}},toe=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function IB(t,e){switch(Lie(t,e)){case 5103:return Jt+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Jt+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Jt+t+ky+t+Ns+t+t;case 6828:case 4268:return Jt+t+Ns+t+t;case 6165:return Jt+t+Ns+"flex-"+t+t;case 5187:return Jt+t+en(t,/(\w+).+(:[^]+)/,Jt+"box-$1$2"+Ns+"flex-$1$2")+t;case 5443:return Jt+t+Ns+"flex-item-"+en(t,/flex-|-self/,"")+t;case 4675:return Jt+t+Ns+"flex-line-pack"+en(t,/align-content|flex-|-self/,"")+t;case 5548:return Jt+t+Ns+en(t,"shrink","negative")+t;case 5292:return Jt+t+Ns+en(t,"basis","preferred-size")+t;case 6060:return Jt+"box-"+en(t,"-grow","")+Jt+t+Ns+en(t,"grow","positive")+t;case 4554:return Jt+en(t,/([^-])(transform)/g,"$1"+Jt+"$2")+t;case 6187:return en(en(en(t,/(zoom-|grab)/,Jt+"$1"),/(image-set)/,Jt+"$1"),t,"")+t;case 5495:case 3959:return en(t,/(image-set\([^]*)/,Jt+"$1$`$1");case 4968:return en(en(t,/(.+:)(flex-)?(.*)/,Jt+"box-pack:$3"+Ns+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Jt+t+t;case 4095:case 3583:case 4068:case 2532:return en(t,/(.+)-inline(.+)/,Jt+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Na(t)-1-e>6)switch(vs(t,e+1)){case 109:if(vs(t,e+4)!==45)break;case 102:return en(t,/(.+:)(.+)-([^]+)/,"$1"+Jt+"$2-$3$1"+ky+(vs(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~IA(t,"stretch")?IB(en(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(vs(t,e+1)!==115)break;case 6444:switch(vs(t,Na(t)-3-(~IA(t,"!important")&&10))){case 107:return en(t,":",":"+Jt)+t;case 101:return en(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Jt+(vs(t,14)===45?"inline-":"")+"box$3$1"+Jt+"$2$3$1"+Ns+"$2box$3")+t}break;case 5936:switch(vs(t,e+11)){case 114:return Jt+t+Ns+en(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Jt+t+Ns+en(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Jt+t+Ns+en(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return Jt+t+Ns+t+t}return t}var noe=function(e,n,s,r){if(e.length>-1&&!e.return)switch(e.type){case NS:e.return=IB(e.value,e.length);break;case OB:return pu([wf(e,{value:en(e.value,"@","@"+Jt)})],r);case CS:if(e.length)return Bie(e.props,function(i){switch(Fie(i,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return pu([wf(e,{props:[en(i,/:(read-\w+)/,":"+ky+"$1")]})],r);case"::placeholder":return pu([wf(e,{props:[en(i,/:(plac\w+)/,":"+Jt+"input-$1")]}),wf(e,{props:[en(i,/:(plac\w+)/,":"+ky+"$1")]}),wf(e,{props:[en(i,/:(plac\w+)/,Ns+"input-$1")]})],r)}return""})}},soe=[noe],roe=function(e){var n=e.key;if(n==="css"){var s=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(s,function(A){var _=A.getAttribute("data-emotion");_.indexOf(" ")!==-1&&(document.head.appendChild(A),A.setAttribute("data-s",""))})}var r=e.stylisPlugins||soe,i={},o,c=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(A){for(var _=A.getAttribute("data-emotion").split(" "),j=1;j<_.length;j++)i[_[j]]=!0;c.push(A)});var u,f=[eoe,toe];{var m,h=[qie,Kie(function(A){m.insert(A)})],g=Gie(f.concat(r,h)),x=function(_){return pu(Wie(_),g)};u=function(_,j,C,k){m=C,x(_?_+"{"+j.styles+"}":j.styles),k&&(b.inserted[j.name]=!0)}}var b={key:n,sheet:new Tie({key:n,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:i,registered:{},insert:u};return b.sheet.hydrate(c),b},p_={exports:{}},nn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C2;function aoe(){if(C2)return nn;C2=1;var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,n=t?Symbol.for("react.portal"):60106,s=t?Symbol.for("react.fragment"):60107,r=t?Symbol.for("react.strict_mode"):60108,i=t?Symbol.for("react.profiler"):60114,o=t?Symbol.for("react.provider"):60109,c=t?Symbol.for("react.context"):60110,u=t?Symbol.for("react.async_mode"):60111,f=t?Symbol.for("react.concurrent_mode"):60111,m=t?Symbol.for("react.forward_ref"):60112,h=t?Symbol.for("react.suspense"):60113,g=t?Symbol.for("react.suspense_list"):60120,x=t?Symbol.for("react.memo"):60115,b=t?Symbol.for("react.lazy"):60116,A=t?Symbol.for("react.block"):60121,_=t?Symbol.for("react.fundamental"):60117,j=t?Symbol.for("react.responder"):60118,C=t?Symbol.for("react.scope"):60119;function k(N){if(typeof N=="object"&&N!==null){var L=N.$$typeof;switch(L){case e:switch(N=N.type,N){case u:case f:case s:case i:case r:case h:return N;default:switch(N=N&&N.$$typeof,N){case c:case m:case b:case x:case o:return N;default:return L}}case n:return L}}}function E(N){return k(N)===f}return nn.AsyncMode=u,nn.ConcurrentMode=f,nn.ContextConsumer=c,nn.ContextProvider=o,nn.Element=e,nn.ForwardRef=m,nn.Fragment=s,nn.Lazy=b,nn.Memo=x,nn.Portal=n,nn.Profiler=i,nn.StrictMode=r,nn.Suspense=h,nn.isAsyncMode=function(N){return E(N)||k(N)===u},nn.isConcurrentMode=E,nn.isContextConsumer=function(N){return k(N)===c},nn.isContextProvider=function(N){return k(N)===o},nn.isElement=function(N){return typeof N=="object"&&N!==null&&N.$$typeof===e},nn.isForwardRef=function(N){return k(N)===m},nn.isFragment=function(N){return k(N)===s},nn.isLazy=function(N){return k(N)===b},nn.isMemo=function(N){return k(N)===x},nn.isPortal=function(N){return k(N)===n},nn.isProfiler=function(N){return k(N)===i},nn.isStrictMode=function(N){return k(N)===r},nn.isSuspense=function(N){return k(N)===h},nn.isValidElementType=function(N){return typeof N=="string"||typeof N=="function"||N===s||N===f||N===i||N===r||N===h||N===g||typeof N=="object"&&N!==null&&(N.$$typeof===b||N.$$typeof===x||N.$$typeof===o||N.$$typeof===c||N.$$typeof===m||N.$$typeof===_||N.$$typeof===j||N.$$typeof===C||N.$$typeof===A)},nn.typeOf=k,nn}var N2;function ioe(){return N2||(N2=1,p_.exports=aoe()),p_.exports}var g_,k2;function ooe(){if(k2)return g_;k2=1;var t=ioe(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},r={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},i={};i[t.ForwardRef]=s,i[t.Memo]=r;function o(b){return t.isMemo(b)?r:i[b.$$typeof]||e}var c=Object.defineProperty,u=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,m=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,g=Object.prototype;function x(b,A,_){if(typeof A!="string"){if(g){var j=h(A);j&&j!==g&&x(b,j,_)}var C=u(A);f&&(C=C.concat(f(A)));for(var k=o(b),E=o(A),N=0;N<C.length;++N){var L=C[N];if(!n[L]&&!(_&&_[L])&&!(E&&E[L])&&!(k&&k[L])){var M=m(A,L);try{c(b,L,M)}catch{}}}}return b}return g_=x,g_}ooe();var loe=!0;function coe(t,e,n){var s="";return n.split(" ").forEach(function(r){t[r]!==void 0?e.push(t[r]+";"):r&&(s+=r+" ")}),s}var VB=function(e,n,s){var r=e.key+"-"+n.name;(s===!1||loe===!1)&&e.registered[r]===void 0&&(e.registered[r]=n.styles)},uoe=function(e,n,s){VB(e,n,s);var r=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var i=n;do e.insert(n===i?"."+r:"",i,e.sheet,!0),i=i.next;while(i!==void 0)}};function doe(t){for(var e=0,n,s=0,r=t.length;r>=4;++s,r-=4)n=t.charCodeAt(s)&255|(t.charCodeAt(++s)&255)<<8|(t.charCodeAt(++s)&255)<<16|(t.charCodeAt(++s)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(r){case 3:e^=(t.charCodeAt(s+2)&255)<<16;case 2:e^=(t.charCodeAt(s+1)&255)<<8;case 1:e^=t.charCodeAt(s)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var foe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},hoe=/[A-Z]|^ms/g,moe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,zB=function(e){return e.charCodeAt(1)===45},D2=function(e){return e!=null&&typeof e!="boolean"},y_=Qie(function(t){return zB(t)?t:t.replace(hoe,"-$&").toLowerCase()}),E2=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(moe,function(s,r,i){return ka={name:r,styles:i,next:ka},r})}return foe[e]!==1&&!zB(e)&&typeof n=="number"&&n!==0?n+"px":n};function Rh(t,e,n){if(n==null)return"";var s=n;if(s.__emotion_styles!==void 0)return s;switch(typeof n){case"boolean":return"";case"object":{var r=n;if(r.anim===1)return ka={name:r.name,styles:r.styles,next:ka},r.name;var i=n;if(i.styles!==void 0){var o=i.next;if(o!==void 0)for(;o!==void 0;)ka={name:o.name,styles:o.styles,next:ka},o=o.next;var c=i.styles+";";return c}return poe(t,e,n)}case"function":{if(t!==void 0){var u=ka,f=n(t);return ka=u,Rh(t,e,f)}break}}var m=n;return m}function poe(t,e,n){var s="";if(Array.isArray(n))for(var r=0;r<n.length;r++)s+=Rh(t,e,n[r])+";";else for(var i in n){var o=n[i];if(typeof o!="object"){var c=o;D2(c)&&(s+=y_(i)+":"+E2(i,c)+";")}else if(Array.isArray(o)&&typeof o[0]=="string"&&e==null)for(var u=0;u<o.length;u++)D2(o[u])&&(s+=y_(i)+":"+E2(i,o[u])+";");else{var f=Rh(t,e,o);switch(i){case"animation":case"animationName":{s+=y_(i)+":"+f+";";break}default:s+=i+"{"+f+"}"}}}return s}var T2=/label:\s*([^\s;{]+)\s*(;|$)/g,ka;function $B(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var s=!0,r="";ka=void 0;var i=t[0];if(i==null||i.raw===void 0)s=!1,r+=Rh(n,e,i);else{var o=i;r+=o[0]}for(var c=1;c<t.length;c++)if(r+=Rh(n,e,t[c]),s){var u=i;r+=u[c]}T2.lastIndex=0;for(var f="",m;(m=T2.exec(r))!==null;)f+="-"+m[1];var h=doe(r)+f;return{name:h,styles:r,next:ka}}var goe=function(e){return e()},yoe=Wg.useInsertionEffect?Wg.useInsertionEffect:!1,xoe=yoe||goe,HB=v.createContext(typeof HTMLElement<"u"?roe({key:"css"}):null);HB.Provider;var boe=function(e){return v.forwardRef(function(n,s){var r=v.useContext(HB);return e(n,r,s)})},voe=v.createContext({}),DS={}.hasOwnProperty,zA="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",_oe=function(e,n){var s={};for(var r in n)DS.call(n,r)&&(s[r]=n[r]);return s[zA]=e,s},Aoe=function(e){var n=e.cache,s=e.serialized,r=e.isStringTag;return VB(n,s,r),xoe(function(){return uoe(n,s,r)}),null},woe=boe(function(t,e,n){var s=t.css;typeof s=="string"&&e.registered[s]!==void 0&&(s=e.registered[s]);var r=t[zA],i=[s],o="";typeof t.className=="string"?o=coe(e.registered,i,t.className):t.className!=null&&(o=t.className+" ");var c=$B(i,void 0,v.useContext(voe));o+=e.key+"-"+c.name;var u={};for(var f in t)DS.call(t,f)&&f!=="css"&&f!==zA&&(u[f]=t[f]);return u.className=o,n&&(u.ref=n),v.createElement(v.Fragment,null,v.createElement(Aoe,{cache:e,serialized:c,isStringTag:typeof r=="string"}),v.createElement(r,u))}),joe=woe,yt=function(e,n){var s=arguments;if(n==null||!DS.call(n,"css"))return v.createElement.apply(void 0,s);var r=s.length,i=new Array(r);i[0]=joe,i[1]=_oe(e,n);for(var o=2;o<r;o++)i[o]=s[o];return v.createElement.apply(null,i)};(function(t){var e;e||(e=t.JSX||(t.JSX={}))})(yt||(yt={}));function ES(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return $B(e)}function Soe(){var t=ES.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function Coe(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var $A=v.useLayoutEffect,Noe=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],Dy=function(){};function koe(t,e){return e?e[0]==="-"?t+e:t+"__"+e:t}function Doe(t,e){for(var n=arguments.length,s=new Array(n>2?n-2:0),r=2;r<n;r++)s[r-2]=arguments[r];var i=[].concat(s);if(e&&t)for(var o in e)e.hasOwnProperty(o)&&e[o]&&i.push("".concat(koe(t,o)));return i.filter(function(c){return c}).map(function(c){return String(c).trim()}).join(" ")}var M2=function(e){return Boe(e)?e.filter(Boolean):Zl(e)==="object"&&e!==null?[e]:[]},UB=function(e){e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme;var n=Hi(e,Noe);return xt({},n)},Ln=function(e,n,s){var r=e.cx,i=e.getStyles,o=e.getClassNames,c=e.className;return{css:i(n,e),className:r(s??{},o(n,e),c)}};function Px(t){return[document.documentElement,document.body,window].indexOf(t)>-1}function Eoe(t){return Px(t)?window.innerHeight:t.clientHeight}function WB(t){return Px(t)?window.pageYOffset:t.scrollTop}function Ey(t,e){if(Px(t)){window.scrollTo(0,e);return}t.scrollTop=e}function Toe(t){var e=getComputedStyle(t),n=e.position==="absolute",s=/(auto|scroll)/;if(e.position==="fixed")return document.documentElement;for(var r=t;r=r.parentElement;)if(e=getComputedStyle(r),!(n&&e.position==="static")&&s.test(e.overflow+e.overflowY+e.overflowX))return r;return document.documentElement}function Moe(t,e,n,s){return n*((t=t/s-1)*t*t+1)+e}function ug(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Dy,r=WB(t),i=e-r,o=10,c=0;function u(){c+=o;var f=Moe(c,r,i,n);Ey(t,f),c<n?window.requestAnimationFrame(u):s(t)}u()}function R2(t,e){var n=t.getBoundingClientRect(),s=e.getBoundingClientRect(),r=e.offsetHeight/3;s.bottom+r>n.bottom?Ey(t,Math.min(e.offsetTop+e.clientHeight-t.offsetHeight+r,t.scrollHeight)):s.top-r<n.top&&Ey(t,Math.max(e.offsetTop-r,0))}function Roe(t){var e=t.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}function O2(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function Ooe(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var YB=!1,Poe={get passive(){return YB=!0}},dg=typeof window<"u"?window:{};dg.addEventListener&&dg.removeEventListener&&(dg.addEventListener("p",Dy,Poe),dg.removeEventListener("p",Dy,!1));var Loe=YB;function Foe(t){return t!=null}function Boe(t){return Array.isArray(t)}function fg(t,e,n){return t?e:n}var Ioe=function(e){for(var n=arguments.length,s=new Array(n>1?n-1:0),r=1;r<n;r++)s[r-1]=arguments[r];var i=Object.entries(e).filter(function(o){var c=Ei(o,1),u=c[0];return!s.includes(u)});return i.reduce(function(o,c){var u=Ei(c,2),f=u[0],m=u[1];return o[f]=m,o},{})},Voe=["children","innerProps"],zoe=["children","innerProps"];function $oe(t){var e=t.maxHeight,n=t.menuEl,s=t.minHeight,r=t.placement,i=t.shouldScroll,o=t.isFixedPosition,c=t.controlHeight,u=Toe(n),f={placement:"bottom",maxHeight:e};if(!n||!n.offsetParent)return f;var m=u.getBoundingClientRect(),h=m.height,g=n.getBoundingClientRect(),x=g.bottom,b=g.height,A=g.top,_=n.offsetParent.getBoundingClientRect(),j=_.top,C=o?window.innerHeight:Eoe(u),k=WB(u),E=parseInt(getComputedStyle(n).marginBottom,10),N=parseInt(getComputedStyle(n).marginTop,10),L=j-N,M=C-A,T=L+k,O=h-k-A,I=x-C+k+E,$=k+A-N,H=160;switch(r){case"auto":case"bottom":if(M>=b)return{placement:"bottom",maxHeight:e};if(O>=b&&!o)return i&&ug(u,I,H),{placement:"bottom",maxHeight:e};if(!o&&O>=s||o&&M>=s){i&&ug(u,I,H);var V=o?M-E:O-E;return{placement:"bottom",maxHeight:V}}if(r==="auto"||o){var G=e,U=o?L:T;return U>=s&&(G=Math.min(U-E-c,e)),{placement:"top",maxHeight:G}}if(r==="bottom")return i&&Ey(u,I),{placement:"bottom",maxHeight:e};break;case"top":if(L>=b)return{placement:"top",maxHeight:e};if(T>=b&&!o)return i&&ug(u,$,H),{placement:"top",maxHeight:e};if(!o&&T>=s||o&&L>=s){var R=e;return(!o&&T>=s||o&&L>=s)&&(R=o?L-N:T-N),i&&ug(u,$,H),{placement:"top",maxHeight:R}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(r,'".'))}return f}function Hoe(t){var e={bottom:"top",top:"bottom"};return t?e[t]:"bottom"}var qB=function(e){return e==="auto"?"bottom":e},Uoe=function(e,n){var s,r=e.placement,i=e.theme,o=i.borderRadius,c=i.spacing,u=i.colors;return xt((s={label:"menu"},Vf(s,Hoe(r),"100%"),Vf(s,"position","absolute"),Vf(s,"width","100%"),Vf(s,"zIndex",1),s),n?{}:{backgroundColor:u.neutral0,borderRadius:o,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:c.menuGutter,marginTop:c.menuGutter})},GB=v.createContext(null),Woe=function(e){var n=e.children,s=e.minMenuHeight,r=e.maxMenuHeight,i=e.menuPlacement,o=e.menuPosition,c=e.menuShouldScrollIntoView,u=e.theme,f=v.useContext(GB)||{},m=f.setPortalPlacement,h=v.useRef(null),g=v.useState(r),x=Ei(g,2),b=x[0],A=x[1],_=v.useState(null),j=Ei(_,2),C=j[0],k=j[1],E=u.spacing.controlHeight;return $A(function(){var N=h.current;if(N){var L=o==="fixed",M=c&&!L,T=$oe({maxHeight:r,menuEl:N,minHeight:s,placement:i,shouldScroll:M,isFixedPosition:L,controlHeight:E});A(T.maxHeight),k(T.placement),m?.(T.placement)}},[r,i,o,c,s,m,E]),n({ref:h,placerProps:xt(xt({},e),{},{placement:C||qB(i),maxHeight:b})})},Yoe=function(e){var n=e.children,s=e.innerRef,r=e.innerProps;return yt("div",_t({},Ln(e,"menu",{menu:!0}),{ref:s},r),n)},qoe=Yoe,Goe=function(e,n){var s=e.maxHeight,r=e.theme.spacing.baseUnit;return xt({maxHeight:s,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},n?{}:{paddingBottom:r,paddingTop:r})},Koe=function(e){var n=e.children,s=e.innerProps,r=e.innerRef,i=e.isMulti;return yt("div",_t({},Ln(e,"menuList",{"menu-list":!0,"menu-list--is-multi":i}),{ref:r},s),n)},KB=function(e,n){var s=e.theme,r=s.spacing.baseUnit,i=s.colors;return xt({textAlign:"center"},n?{}:{color:i.neutral40,padding:"".concat(r*2,"px ").concat(r*3,"px")})},Qoe=KB,Xoe=KB,Zoe=function(e){var n=e.children,s=n===void 0?"No options":n,r=e.innerProps,i=Hi(e,Voe);return yt("div",_t({},Ln(xt(xt({},i),{},{children:s,innerProps:r}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),r),s)},Joe=function(e){var n=e.children,s=n===void 0?"Loading...":n,r=e.innerProps,i=Hi(e,zoe);return yt("div",_t({},Ln(xt(xt({},i),{},{children:s,innerProps:r}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),r),s)},ele=function(e){var n=e.rect,s=e.offset,r=e.position;return{left:n.left,position:r,top:s,width:n.width,zIndex:1}},tle=function(e){var n=e.appendTo,s=e.children,r=e.controlElement,i=e.innerProps,o=e.menuPlacement,c=e.menuPosition,u=v.useRef(null),f=v.useRef(null),m=v.useState(qB(o)),h=Ei(m,2),g=h[0],x=h[1],b=v.useMemo(function(){return{setPortalPlacement:x}},[]),A=v.useState(null),_=Ei(A,2),j=_[0],C=_[1],k=v.useCallback(function(){if(r){var M=Roe(r),T=c==="fixed"?0:window.pageYOffset,O=M[g]+T;(O!==j?.offset||M.left!==j?.rect.left||M.width!==j?.rect.width)&&C({offset:O,rect:M})}},[r,c,g,j?.offset,j?.rect.left,j?.rect.width]);$A(function(){k()},[k]);var E=v.useCallback(function(){typeof f.current=="function"&&(f.current(),f.current=null),r&&u.current&&(f.current=cB(r,u.current,k,{elementResize:"ResizeObserver"in window}))},[r,k]);$A(function(){E()},[E]);var N=v.useCallback(function(M){u.current=M,E()},[E]);if(!n&&c!=="fixed"||!j)return null;var L=yt("div",_t({ref:N},Ln(xt(xt({},e),{},{offset:j.offset,position:c,rect:j.rect}),"menuPortal",{"menu-portal":!0}),i),s);return yt(GB.Provider,{value:b},n?vw.createPortal(L,n):L)},nle=function(e){var n=e.isDisabled,s=e.isRtl;return{label:"container",direction:s?"rtl":void 0,pointerEvents:n?"none":void 0,position:"relative"}},sle=function(e){var n=e.children,s=e.innerProps,r=e.isDisabled,i=e.isRtl;return yt("div",_t({},Ln(e,"container",{"--is-disabled":r,"--is-rtl":i}),s),n)},rle=function(e,n){var s=e.theme.spacing,r=e.isMulti,i=e.hasValue,o=e.selectProps.controlShouldRenderValue;return xt({alignItems:"center",display:r&&i&&o?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},n?{}:{padding:"".concat(s.baseUnit/2,"px ").concat(s.baseUnit*2,"px")})},ale=function(e){var n=e.children,s=e.innerProps,r=e.isMulti,i=e.hasValue;return yt("div",_t({},Ln(e,"valueContainer",{"value-container":!0,"value-container--is-multi":r,"value-container--has-value":i}),s),n)},ile=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},ole=function(e){var n=e.children,s=e.innerProps;return yt("div",_t({},Ln(e,"indicatorsContainer",{indicators:!0}),s),n)},P2,lle=["size"],cle=["innerProps","isRtl","size"],ule={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},QB=function(e){var n=e.size,s=Hi(e,lle);return yt("svg",_t({height:n,width:n,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:ule},s))},TS=function(e){return yt(QB,_t({size:20},e),yt("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},XB=function(e){return yt(QB,_t({size:20},e),yt("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},ZB=function(e,n){var s=e.isFocused,r=e.theme,i=r.spacing.baseUnit,o=r.colors;return xt({label:"indicatorContainer",display:"flex",transition:"color 150ms"},n?{}:{color:s?o.neutral60:o.neutral20,padding:i*2,":hover":{color:s?o.neutral80:o.neutral40}})},dle=ZB,fle=function(e){var n=e.children,s=e.innerProps;return yt("div",_t({},Ln(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),s),n||yt(XB,null))},hle=ZB,mle=function(e){var n=e.children,s=e.innerProps;return yt("div",_t({},Ln(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),s),n||yt(TS,null))},ple=function(e,n){var s=e.isDisabled,r=e.theme,i=r.spacing.baseUnit,o=r.colors;return xt({label:"indicatorSeparator",alignSelf:"stretch",width:1},n?{}:{backgroundColor:s?o.neutral10:o.neutral20,marginBottom:i*2,marginTop:i*2})},gle=function(e){var n=e.innerProps;return yt("span",_t({},n,Ln(e,"indicatorSeparator",{"indicator-separator":!0})))},yle=Soe(P2||(P2=Coe([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),xle=function(e,n){var s=e.isFocused,r=e.size,i=e.theme,o=i.colors,c=i.spacing.baseUnit;return xt({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:r,lineHeight:1,marginRight:r,textAlign:"center",verticalAlign:"middle"},n?{}:{color:s?o.neutral60:o.neutral20,padding:c*2})},x_=function(e){var n=e.delay,s=e.offset;return yt("span",{css:ES({animation:"".concat(yle," 1s ease-in-out ").concat(n,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:s?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},ble=function(e){var n=e.innerProps,s=e.isRtl,r=e.size,i=r===void 0?4:r,o=Hi(e,cle);return yt("div",_t({},Ln(xt(xt({},o),{},{innerProps:n,isRtl:s,size:i}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),n),yt(x_,{delay:0,offset:s}),yt(x_,{delay:160,offset:!0}),yt(x_,{delay:320,offset:!s}))},vle=function(e,n){var s=e.isDisabled,r=e.isFocused,i=e.theme,o=i.colors,c=i.borderRadius,u=i.spacing;return xt({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:u.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},n?{}:{backgroundColor:s?o.neutral5:o.neutral0,borderColor:s?o.neutral10:r?o.primary:o.neutral20,borderRadius:c,borderStyle:"solid",borderWidth:1,boxShadow:r?"0 0 0 1px ".concat(o.primary):void 0,"&:hover":{borderColor:r?o.primary:o.neutral30}})},_le=function(e){var n=e.children,s=e.isDisabled,r=e.isFocused,i=e.innerRef,o=e.innerProps,c=e.menuIsOpen;return yt("div",_t({ref:i},Ln(e,"control",{control:!0,"control--is-disabled":s,"control--is-focused":r,"control--menu-is-open":c}),o,{"aria-disabled":s||void 0}),n)},Ale=_le,wle=["data"],jle=function(e,n){var s=e.theme.spacing;return n?{}:{paddingBottom:s.baseUnit*2,paddingTop:s.baseUnit*2}},Sle=function(e){var n=e.children,s=e.cx,r=e.getStyles,i=e.getClassNames,o=e.Heading,c=e.headingProps,u=e.innerProps,f=e.label,m=e.theme,h=e.selectProps;return yt("div",_t({},Ln(e,"group",{group:!0}),u),yt(o,_t({},c,{selectProps:h,theme:m,getStyles:r,getClassNames:i,cx:s}),f),yt("div",null,n))},Cle=function(e,n){var s=e.theme,r=s.colors,i=s.spacing;return xt({label:"group",cursor:"default",display:"block"},n?{}:{color:r.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:i.baseUnit*3,paddingRight:i.baseUnit*3,textTransform:"uppercase"})},Nle=function(e){var n=UB(e);n.data;var s=Hi(n,wle);return yt("div",_t({},Ln(e,"groupHeading",{"group-heading":!0}),s))},kle=Sle,Dle=["innerRef","isDisabled","isHidden","inputClassName"],Ele=function(e,n){var s=e.isDisabled,r=e.value,i=e.theme,o=i.spacing,c=i.colors;return xt(xt({visibility:s?"hidden":"visible",transform:r?"translateZ(0)":""},Tle),n?{}:{margin:o.baseUnit/2,paddingBottom:o.baseUnit/2,paddingTop:o.baseUnit/2,color:c.neutral80})},JB={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},Tle={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":xt({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},JB)},Mle=function(e){return xt({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},JB)},Rle=function(e){var n=e.cx,s=e.value,r=UB(e),i=r.innerRef,o=r.isDisabled,c=r.isHidden,u=r.inputClassName,f=Hi(r,Dle);return yt("div",_t({},Ln(e,"input",{"input-container":!0}),{"data-value":s||""}),yt("input",_t({className:n({input:!0},u),ref:i,style:Mle(c),disabled:o},f)))},Ole=Rle,Ple=function(e,n){var s=e.theme,r=s.spacing,i=s.borderRadius,o=s.colors;return xt({label:"multiValue",display:"flex",minWidth:0},n?{}:{backgroundColor:o.neutral10,borderRadius:i/2,margin:r.baseUnit/2})},Lle=function(e,n){var s=e.theme,r=s.borderRadius,i=s.colors,o=e.cropWithEllipsis;return xt({overflow:"hidden",textOverflow:o||o===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},n?{}:{borderRadius:r/2,color:i.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},Fle=function(e,n){var s=e.theme,r=s.spacing,i=s.borderRadius,o=s.colors,c=e.isFocused;return xt({alignItems:"center",display:"flex"},n?{}:{borderRadius:i/2,backgroundColor:c?o.dangerLight:void 0,paddingLeft:r.baseUnit,paddingRight:r.baseUnit,":hover":{backgroundColor:o.dangerLight,color:o.danger}})},e5=function(e){var n=e.children,s=e.innerProps;return yt("div",s,n)},Ble=e5,Ile=e5;function Vle(t){var e=t.children,n=t.innerProps;return yt("div",_t({role:"button"},n),e||yt(TS,{size:14}))}var zle=function(e){var n=e.children,s=e.components,r=e.data,i=e.innerProps,o=e.isDisabled,c=e.removeProps,u=e.selectProps,f=s.Container,m=s.Label,h=s.Remove;return yt(f,{data:r,innerProps:xt(xt({},Ln(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":o})),i),selectProps:u},yt(m,{data:r,innerProps:xt({},Ln(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:u},n),yt(h,{data:r,innerProps:xt(xt({},Ln(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(n||"option")},c),selectProps:u}))},$le=zle,Hle=function(e,n){var s=e.isDisabled,r=e.isFocused,i=e.isSelected,o=e.theme,c=o.spacing,u=o.colors;return xt({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},n?{}:{backgroundColor:i?u.primary:r?u.primary25:"transparent",color:s?u.neutral20:i?u.neutral0:"inherit",padding:"".concat(c.baseUnit*2,"px ").concat(c.baseUnit*3,"px"),":active":{backgroundColor:s?void 0:i?u.primary:u.primary50}})},Ule=function(e){var n=e.children,s=e.isDisabled,r=e.isFocused,i=e.isSelected,o=e.innerRef,c=e.innerProps;return yt("div",_t({},Ln(e,"option",{option:!0,"option--is-disabled":s,"option--is-focused":r,"option--is-selected":i}),{ref:o,"aria-disabled":s},c),n)},Wle=Ule,Yle=function(e,n){var s=e.theme,r=s.spacing,i=s.colors;return xt({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},n?{}:{color:i.neutral50,marginLeft:r.baseUnit/2,marginRight:r.baseUnit/2})},qle=function(e){var n=e.children,s=e.innerProps;return yt("div",_t({},Ln(e,"placeholder",{placeholder:!0}),s),n)},Gle=qle,Kle=function(e,n){var s=e.isDisabled,r=e.theme,i=r.spacing,o=r.colors;return xt({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n?{}:{color:s?o.neutral40:o.neutral80,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},Qle=function(e){var n=e.children,s=e.isDisabled,r=e.innerProps;return yt("div",_t({},Ln(e,"singleValue",{"single-value":!0,"single-value--is-disabled":s}),r),n)},Xle=Qle,Zle={ClearIndicator:mle,Control:Ale,DropdownIndicator:fle,DownChevron:XB,CrossIcon:TS,Group:kle,GroupHeading:Nle,IndicatorsContainer:ole,IndicatorSeparator:gle,Input:Ole,LoadingIndicator:ble,Menu:qoe,MenuList:Koe,MenuPortal:tle,LoadingMessage:Joe,NoOptionsMessage:Zoe,MultiValue:$le,MultiValueContainer:Ble,MultiValueLabel:Ile,MultiValueRemove:Vle,Option:Wle,Placeholder:Gle,SelectContainer:sle,SingleValue:Xle,ValueContainer:ale},Jle=function(e){return xt(xt({},Zle),e.components)},L2=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function ece(t,e){return!!(t===e||L2(t)&&L2(e))}function tce(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!ece(t[n],e[n]))return!1;return!0}function nce(t,e){e===void 0&&(e=tce);var n=null;function s(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(n&&n.lastThis===this&&e(r,n.lastArgs))return n.lastResult;var o=t.apply(this,r);return n={lastResult:o,lastArgs:r,lastThis:this},o}return s.clear=function(){n=null},s}var sce={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},rce=function(e){return yt("span",_t({css:sce},e))},F2=rce,ace={guidance:function(e){var n=e.isSearchable,s=e.isMulti,r=e.tabSelectsValue,i=e.context,o=e.isInitialFocus;switch(i){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(r?", press Tab to select the option and exit the menu":"",".");case"input":return o?"".concat(e["aria-label"]||"Select"," is focused ").concat(n?",type to refine list":"",", press Down to open the menu, ").concat(s?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var n=e.action,s=e.label,r=s===void 0?"":s,i=e.labels,o=e.isDisabled;switch(n){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(r,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(i.length>1?"s":""," ").concat(i.join(","),", selected.");case"select-option":return o?"option ".concat(r," is disabled. Select another option."):"option ".concat(r,", selected.");default:return""}},onFocus:function(e){var n=e.context,s=e.focused,r=e.options,i=e.label,o=i===void 0?"":i,c=e.selectValue,u=e.isDisabled,f=e.isSelected,m=e.isAppleDevice,h=function(A,_){return A&&A.length?"".concat(A.indexOf(_)+1," of ").concat(A.length):""};if(n==="value"&&c)return"value ".concat(o," focused, ").concat(h(c,s),".");if(n==="menu"&&m){var g=u?" disabled":"",x="".concat(f?" selected":"").concat(g);return"".concat(o).concat(x,", ").concat(h(r,s),".")}return""},onFilter:function(e){var n=e.inputValue,s=e.resultsMessage;return"".concat(s).concat(n?" for search term "+n:"",".")}},ice=function(e){var n=e.ariaSelection,s=e.focusedOption,r=e.focusedValue,i=e.focusableOptions,o=e.isFocused,c=e.selectValue,u=e.selectProps,f=e.id,m=e.isAppleDevice,h=u.ariaLiveMessages,g=u.getOptionLabel,x=u.inputValue,b=u.isMulti,A=u.isOptionDisabled,_=u.isSearchable,j=u.menuIsOpen,C=u.options,k=u.screenReaderStatus,E=u.tabSelectsValue,N=u.isLoading,L=u["aria-label"],M=u["aria-live"],T=v.useMemo(function(){return xt(xt({},ace),h||{})},[h]),O=v.useMemo(function(){var U="";if(n&&T.onChange){var R=n.option,P=n.options,Z=n.removedValue,ne=n.removedValues,D=n.value,B=function(Ne){return Array.isArray(Ne)?null:Ne},se=Z||R||B(D),le=se?g(se):"",ae=P||ne||void 0,te=ae?ae.map(g):[],X=xt({isDisabled:se&&A(se,c),label:le,labels:te},n);U=T.onChange(X)}return U},[n,T,A,c,g]),I=v.useMemo(function(){var U="",R=s||r,P=!!(s&&c&&c.includes(s));if(R&&T.onFocus){var Z={focused:R,label:g(R),isDisabled:A(R,c),isSelected:P,options:i,context:R===s?"menu":"value",selectValue:c,isAppleDevice:m};U=T.onFocus(Z)}return U},[s,r,g,A,T,i,c,m]),$=v.useMemo(function(){var U="";if(j&&C.length&&!N&&T.onFilter){var R=k({count:i.length});U=T.onFilter({inputValue:x,resultsMessage:R})}return U},[i,x,j,T,C,k,N]),H=n?.action==="initial-input-focus",V=v.useMemo(function(){var U="";if(T.guidance){var R=r?"value":j?"menu":"input";U=T.guidance({"aria-label":L,context:R,isDisabled:s&&A(s,c),isMulti:b,isSearchable:_,tabSelectsValue:E,isInitialFocus:H})}return U},[L,s,r,b,A,_,j,T,c,E,H]),G=yt(v.Fragment,null,yt("span",{id:"aria-selection"},O),yt("span",{id:"aria-focused"},I),yt("span",{id:"aria-results"},$),yt("span",{id:"aria-guidance"},V));return yt(v.Fragment,null,yt(F2,{id:f},H&&G),yt(F2,{"aria-live":M,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},o&&!H&&G))},oce=ice,HA=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],lce=new RegExp("["+HA.map(function(t){return t.letters}).join("")+"]","g"),t5={};for(var b_=0;b_<HA.length;b_++)for(var v_=HA[b_],__=0;__<v_.letters.length;__++)t5[v_.letters[__]]=v_.base;var n5=function(e){return e.replace(lce,function(n){return t5[n]})},cce=nce(n5),B2=function(e){return e.replace(/^\s+|\s+$/g,"")},uce=function(e){return"".concat(e.label," ").concat(e.value)},dce=function(e){return function(n,s){if(n.data.__isNew__)return!0;var r=xt({ignoreCase:!0,ignoreAccents:!0,stringify:uce,trim:!0,matchFrom:"any"},e),i=r.ignoreCase,o=r.ignoreAccents,c=r.stringify,u=r.trim,f=r.matchFrom,m=u?B2(s):s,h=u?B2(c(n)):c(n);return i&&(m=m.toLowerCase(),h=h.toLowerCase()),o&&(m=cce(m),h=n5(h)),f==="start"?h.substr(0,m.length)===m:h.indexOf(m)>-1}},fce=["innerRef"];function hce(t){var e=t.innerRef,n=Hi(t,fce),s=Ioe(n,"onExited","in","enter","exit","appear");return yt("input",_t({ref:e},s,{css:ES({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var mce=function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()};function pce(t){var e=t.isEnabled,n=t.onBottomArrive,s=t.onBottomLeave,r=t.onTopArrive,i=t.onTopLeave,o=v.useRef(!1),c=v.useRef(!1),u=v.useRef(0),f=v.useRef(null),m=v.useCallback(function(_,j){if(f.current!==null){var C=f.current,k=C.scrollTop,E=C.scrollHeight,N=C.clientHeight,L=f.current,M=j>0,T=E-N-k,O=!1;T>j&&o.current&&(s&&s(_),o.current=!1),M&&c.current&&(i&&i(_),c.current=!1),M&&j>T?(n&&!o.current&&n(_),L.scrollTop=E,O=!0,o.current=!0):!M&&-j>k&&(r&&!c.current&&r(_),L.scrollTop=0,O=!0,c.current=!0),O&&mce(_)}},[n,s,r,i]),h=v.useCallback(function(_){m(_,_.deltaY)},[m]),g=v.useCallback(function(_){u.current=_.changedTouches[0].clientY},[]),x=v.useCallback(function(_){var j=u.current-_.changedTouches[0].clientY;m(_,j)},[m]),b=v.useCallback(function(_){if(_){var j=Loe?{passive:!1}:!1;_.addEventListener("wheel",h,j),_.addEventListener("touchstart",g,j),_.addEventListener("touchmove",x,j)}},[x,g,h]),A=v.useCallback(function(_){_&&(_.removeEventListener("wheel",h,!1),_.removeEventListener("touchstart",g,!1),_.removeEventListener("touchmove",x,!1))},[x,g,h]);return v.useEffect(function(){if(e){var _=f.current;return b(_),function(){A(_)}}},[e,b,A]),function(_){f.current=_}}var I2=["boxSizing","height","overflow","paddingRight","position"],V2={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function z2(t){t.cancelable&&t.preventDefault()}function $2(t){t.stopPropagation()}function H2(){var t=this.scrollTop,e=this.scrollHeight,n=t+this.offsetHeight;t===0?this.scrollTop=1:n===e&&(this.scrollTop=t-1)}function U2(){return"ontouchstart"in window||navigator.maxTouchPoints}var W2=!!(typeof window<"u"&&window.document&&window.document.createElement),jf=0,Jc={capture:!1,passive:!1};function gce(t){var e=t.isEnabled,n=t.accountForScrollbars,s=n===void 0?!0:n,r=v.useRef({}),i=v.useRef(null),o=v.useCallback(function(u){if(W2){var f=document.body,m=f&&f.style;if(s&&I2.forEach(function(b){var A=m&&m[b];r.current[b]=A}),s&&jf<1){var h=parseInt(r.current.paddingRight,10)||0,g=document.body?document.body.clientWidth:0,x=window.innerWidth-g+h||0;Object.keys(V2).forEach(function(b){var A=V2[b];m&&(m[b]=A)}),m&&(m.paddingRight="".concat(x,"px"))}f&&U2()&&(f.addEventListener("touchmove",z2,Jc),u&&(u.addEventListener("touchstart",H2,Jc),u.addEventListener("touchmove",$2,Jc))),jf+=1}},[s]),c=v.useCallback(function(u){if(W2){var f=document.body,m=f&&f.style;jf=Math.max(jf-1,0),s&&jf<1&&I2.forEach(function(h){var g=r.current[h];m&&(m[h]=g)}),f&&U2()&&(f.removeEventListener("touchmove",z2,Jc),u&&(u.removeEventListener("touchstart",H2,Jc),u.removeEventListener("touchmove",$2,Jc)))}},[s]);return v.useEffect(function(){if(e){var u=i.current;return o(u),function(){c(u)}}},[e,o,c]),function(u){i.current=u}}var yce=function(e){var n=e.target;return n.ownerDocument.activeElement&&n.ownerDocument.activeElement.blur()},xce={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function bce(t){var e=t.children,n=t.lockEnabled,s=t.captureEnabled,r=s===void 0?!0:s,i=t.onBottomArrive,o=t.onBottomLeave,c=t.onTopArrive,u=t.onTopLeave,f=pce({isEnabled:r,onBottomArrive:i,onBottomLeave:o,onTopArrive:c,onTopLeave:u}),m=gce({isEnabled:n}),h=function(x){f(x),m(x)};return yt(v.Fragment,null,n&&yt("div",{onClick:yce,css:xce}),e(h))}var vce={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},_ce=function(e){var n=e.name,s=e.onFocus;return yt("input",{required:!0,name:n,tabIndex:-1,"aria-hidden":"true",onFocus:s,css:vce,value:"",onChange:function(){}})},Ace=_ce;function MS(t){var e;return typeof window<"u"&&window.navigator!=null?t.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function wce(){return MS(/^iPhone/i)}function s5(){return MS(/^Mac/i)}function jce(){return MS(/^iPad/i)||s5()&&navigator.maxTouchPoints>1}function Sce(){return wce()||jce()}function Cce(){return s5()||Sce()}var Nce=function(e){return e.label},kce=function(e){return e.label},Dce=function(e){return e.value},Ece=function(e){return!!e.isDisabled},Tce={clearIndicator:hle,container:nle,control:vle,dropdownIndicator:dle,group:jle,groupHeading:Cle,indicatorsContainer:ile,indicatorSeparator:ple,input:Ele,loadingIndicator:xle,loadingMessage:Xoe,menu:Uoe,menuList:Goe,menuPortal:ele,multiValue:Ple,multiValueLabel:Lle,multiValueRemove:Fle,noOptionsMessage:Qoe,option:Hle,placeholder:Yle,singleValue:Kle,valueContainer:rle},Mce={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},Rce=4,r5=4,Oce=38,Pce=r5*2,Lce={baseUnit:r5,controlHeight:Oce,menuGutter:Pce},A_={borderRadius:Rce,colors:Mce,spacing:Lce},Fce={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:O2(),captureMenuScroll:!O2(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:dce(),formatGroupLabel:Nce,getOptionLabel:kce,getOptionValue:Dce,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:Ece,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!Ooe(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var n=e.count;return"".concat(n," result").concat(n!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function Y2(t,e,n,s){var r=o5(t,e,n),i=l5(t,e,n),o=i5(t,e),c=Ty(t,e);return{type:"option",data:e,isDisabled:r,isSelected:i,label:o,value:c,index:s}}function $g(t,e){return t.options.map(function(n,s){if("options"in n){var r=n.options.map(function(o,c){return Y2(t,o,e,c)}).filter(function(o){return G2(t,o)});return r.length>0?{type:"group",data:n,options:r,index:s}:void 0}var i=Y2(t,n,e,s);return G2(t,i)?i:void 0}).filter(Foe)}function a5(t){return t.reduce(function(e,n){return n.type==="group"?e.push.apply(e,SS(n.options.map(function(s){return s.data}))):e.push(n.data),e},[])}function q2(t,e){return t.reduce(function(n,s){return s.type==="group"?n.push.apply(n,SS(s.options.map(function(r){return{data:r.data,id:"".concat(e,"-").concat(s.index,"-").concat(r.index)}}))):n.push({data:s.data,id:"".concat(e,"-").concat(s.index)}),n},[])}function Bce(t,e){return a5($g(t,e))}function G2(t,e){var n=t.inputValue,s=n===void 0?"":n,r=e.data,i=e.isSelected,o=e.label,c=e.value;return(!u5(t)||!i)&&c5(t,{label:o,value:c,data:r},s)}function Ice(t,e){var n=t.focusedValue,s=t.selectValue,r=s.indexOf(n);if(r>-1){var i=e.indexOf(n);if(i>-1)return n;if(r<e.length)return e[r]}return null}function Vce(t,e){var n=t.focusedOption;return n&&e.indexOf(n)>-1?n:e[0]}var w_=function(e,n){var s,r=(s=e.find(function(i){return i.data===n}))===null||s===void 0?void 0:s.id;return r||null},i5=function(e,n){return e.getOptionLabel(n)},Ty=function(e,n){return e.getOptionValue(n)};function o5(t,e,n){return typeof t.isOptionDisabled=="function"?t.isOptionDisabled(e,n):!1}function l5(t,e,n){if(n.indexOf(e)>-1)return!0;if(typeof t.isOptionSelected=="function")return t.isOptionSelected(e,n);var s=Ty(t,e);return n.some(function(r){return Ty(t,r)===s})}function c5(t,e,n){return t.filterOption?t.filterOption(e,n):!0}var u5=function(e){var n=e.hideSelectedOptions,s=e.isMulti;return n===void 0?s:n},zce=1,d5=(function(t){Aie(n,t);var e=Sie(n);function n(s){var r;if(vie(this,n),r=e.call(this,s),r.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:"",isAppleDevice:!1},r.blockOptionHover=!1,r.isComposing=!1,r.commonProps=void 0,r.initialTouchX=0,r.initialTouchY=0,r.openAfterFocus=!1,r.scrollToFocusedOptionOnUpdate=!1,r.userIsDragging=void 0,r.controlRef=null,r.getControlRef=function(u){r.controlRef=u},r.focusedOptionRef=null,r.getFocusedOptionRef=function(u){r.focusedOptionRef=u},r.menuListRef=null,r.getMenuListRef=function(u){r.menuListRef=u},r.inputRef=null,r.getInputRef=function(u){r.inputRef=u},r.focus=r.focusInput,r.blur=r.blurInput,r.onChange=function(u,f){var m=r.props,h=m.onChange,g=m.name;f.name=g,r.ariaOnChange(u,f),h(u,f)},r.setValue=function(u,f,m){var h=r.props,g=h.closeMenuOnSelect,x=h.isMulti,b=h.inputValue;r.onInputChange("",{action:"set-value",prevInputValue:b}),g&&(r.setState({inputIsHiddenAfterUpdate:!x}),r.onMenuClose()),r.setState({clearFocusValueOnUpdate:!0}),r.onChange(u,{action:f,option:m})},r.selectOption=function(u){var f=r.props,m=f.blurInputOnSelect,h=f.isMulti,g=f.name,x=r.state.selectValue,b=h&&r.isOptionSelected(u,x),A=r.isOptionDisabled(u,x);if(b){var _=r.getOptionValue(u);r.setValue(x.filter(function(j){return r.getOptionValue(j)!==_}),"deselect-option",u)}else if(!A)h?r.setValue([].concat(SS(x),[u]),"select-option",u):r.setValue(u,"select-option");else{r.ariaOnChange(u,{action:"select-option",option:u,name:g});return}m&&r.blurInput()},r.removeValue=function(u){var f=r.props.isMulti,m=r.state.selectValue,h=r.getOptionValue(u),g=m.filter(function(b){return r.getOptionValue(b)!==h}),x=fg(f,g,g[0]||null);r.onChange(x,{action:"remove-value",removedValue:u}),r.focusInput()},r.clearValue=function(){var u=r.state.selectValue;r.onChange(fg(r.props.isMulti,[],null),{action:"clear",removedValues:u})},r.popValue=function(){var u=r.props.isMulti,f=r.state.selectValue,m=f[f.length-1],h=f.slice(0,f.length-1),g=fg(u,h,h[0]||null);m&&r.onChange(g,{action:"pop-value",removedValue:m})},r.getFocusedOptionId=function(u){return w_(r.state.focusableOptionsWithIds,u)},r.getFocusableOptionsWithIds=function(){return q2($g(r.props,r.state.selectValue),r.getElementId("option"))},r.getValue=function(){return r.state.selectValue},r.cx=function(){for(var u=arguments.length,f=new Array(u),m=0;m<u;m++)f[m]=arguments[m];return Doe.apply(void 0,[r.props.classNamePrefix].concat(f))},r.getOptionLabel=function(u){return i5(r.props,u)},r.getOptionValue=function(u){return Ty(r.props,u)},r.getStyles=function(u,f){var m=r.props.unstyled,h=Tce[u](f,m);h.boxSizing="border-box";var g=r.props.styles[u];return g?g(h,f):h},r.getClassNames=function(u,f){var m,h;return(m=(h=r.props.classNames)[u])===null||m===void 0?void 0:m.call(h,f)},r.getElementId=function(u){return"".concat(r.state.instancePrefix,"-").concat(u)},r.getComponents=function(){return Jle(r.props)},r.buildCategorizedOptions=function(){return $g(r.props,r.state.selectValue)},r.getCategorizedOptions=function(){return r.props.menuIsOpen?r.buildCategorizedOptions():[]},r.buildFocusableOptions=function(){return a5(r.buildCategorizedOptions())},r.getFocusableOptions=function(){return r.props.menuIsOpen?r.buildFocusableOptions():[]},r.ariaOnChange=function(u,f){r.setState({ariaSelection:xt({value:u},f)})},r.onMenuMouseDown=function(u){u.button===0&&(u.stopPropagation(),u.preventDefault(),r.focusInput())},r.onMenuMouseMove=function(u){r.blockOptionHover=!1},r.onControlMouseDown=function(u){if(!u.defaultPrevented){var f=r.props.openMenuOnClick;r.state.isFocused?r.props.menuIsOpen?u.target.tagName!=="INPUT"&&u.target.tagName!=="TEXTAREA"&&r.onMenuClose():f&&r.openMenu("first"):(f&&(r.openAfterFocus=!0),r.focusInput()),u.target.tagName!=="INPUT"&&u.target.tagName!=="TEXTAREA"&&u.preventDefault()}},r.onDropdownIndicatorMouseDown=function(u){if(!(u&&u.type==="mousedown"&&u.button!==0)&&!r.props.isDisabled){var f=r.props,m=f.isMulti,h=f.menuIsOpen;r.focusInput(),h?(r.setState({inputIsHiddenAfterUpdate:!m}),r.onMenuClose()):r.openMenu("first"),u.preventDefault()}},r.onClearIndicatorMouseDown=function(u){u&&u.type==="mousedown"&&u.button!==0||(r.clearValue(),u.preventDefault(),r.openAfterFocus=!1,u.type==="touchend"?r.focusInput():setTimeout(function(){return r.focusInput()}))},r.onScroll=function(u){typeof r.props.closeMenuOnScroll=="boolean"?u.target instanceof HTMLElement&&Px(u.target)&&r.props.onMenuClose():typeof r.props.closeMenuOnScroll=="function"&&r.props.closeMenuOnScroll(u)&&r.props.onMenuClose()},r.onCompositionStart=function(){r.isComposing=!0},r.onCompositionEnd=function(){r.isComposing=!1},r.onTouchStart=function(u){var f=u.touches,m=f&&f.item(0);m&&(r.initialTouchX=m.clientX,r.initialTouchY=m.clientY,r.userIsDragging=!1)},r.onTouchMove=function(u){var f=u.touches,m=f&&f.item(0);if(m){var h=Math.abs(m.clientX-r.initialTouchX),g=Math.abs(m.clientY-r.initialTouchY),x=5;r.userIsDragging=h>x||g>x}},r.onTouchEnd=function(u){r.userIsDragging||(r.controlRef&&!r.controlRef.contains(u.target)&&r.menuListRef&&!r.menuListRef.contains(u.target)&&r.blurInput(),r.initialTouchX=0,r.initialTouchY=0)},r.onControlTouchEnd=function(u){r.userIsDragging||r.onControlMouseDown(u)},r.onClearIndicatorTouchEnd=function(u){r.userIsDragging||r.onClearIndicatorMouseDown(u)},r.onDropdownIndicatorTouchEnd=function(u){r.userIsDragging||r.onDropdownIndicatorMouseDown(u)},r.handleInputChange=function(u){var f=r.props.inputValue,m=u.currentTarget.value;r.setState({inputIsHiddenAfterUpdate:!1}),r.onInputChange(m,{action:"input-change",prevInputValue:f}),r.props.menuIsOpen||r.onMenuOpen()},r.onInputFocus=function(u){r.props.onFocus&&r.props.onFocus(u),r.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(r.openAfterFocus||r.props.openMenuOnFocus)&&r.openMenu("first"),r.openAfterFocus=!1},r.onInputBlur=function(u){var f=r.props.inputValue;if(r.menuListRef&&r.menuListRef.contains(document.activeElement)){r.inputRef.focus();return}r.props.onBlur&&r.props.onBlur(u),r.onInputChange("",{action:"input-blur",prevInputValue:f}),r.onMenuClose(),r.setState({focusedValue:null,isFocused:!1})},r.onOptionHover=function(u){if(!(r.blockOptionHover||r.state.focusedOption===u)){var f=r.getFocusableOptions(),m=f.indexOf(u);r.setState({focusedOption:u,focusedOptionId:m>-1?r.getFocusedOptionId(u):null})}},r.shouldHideSelectedOptions=function(){return u5(r.props)},r.onValueInputFocus=function(u){u.preventDefault(),u.stopPropagation(),r.focus()},r.onKeyDown=function(u){var f=r.props,m=f.isMulti,h=f.backspaceRemovesValue,g=f.escapeClearsValue,x=f.inputValue,b=f.isClearable,A=f.isDisabled,_=f.menuIsOpen,j=f.onKeyDown,C=f.tabSelectsValue,k=f.openMenuOnFocus,E=r.state,N=E.focusedOption,L=E.focusedValue,M=E.selectValue;if(!A&&!(typeof j=="function"&&(j(u),u.defaultPrevented))){switch(r.blockOptionHover=!0,u.key){case"ArrowLeft":if(!m||x)return;r.focusValue("previous");break;case"ArrowRight":if(!m||x)return;r.focusValue("next");break;case"Delete":case"Backspace":if(x)return;if(L)r.removeValue(L);else{if(!h)return;m?r.popValue():b&&r.clearValue()}break;case"Tab":if(r.isComposing||u.shiftKey||!_||!C||!N||k&&r.isOptionSelected(N,M))return;r.selectOption(N);break;case"Enter":if(u.keyCode===229)break;if(_){if(!N||r.isComposing)return;r.selectOption(N);break}return;case"Escape":_?(r.setState({inputIsHiddenAfterUpdate:!1}),r.onInputChange("",{action:"menu-close",prevInputValue:x}),r.onMenuClose()):b&&g&&r.clearValue();break;case" ":if(x)return;if(!_){r.openMenu("first");break}if(!N)return;r.selectOption(N);break;case"ArrowUp":_?r.focusOption("up"):r.openMenu("last");break;case"ArrowDown":_?r.focusOption("down"):r.openMenu("first");break;case"PageUp":if(!_)return;r.focusOption("pageup");break;case"PageDown":if(!_)return;r.focusOption("pagedown");break;case"Home":if(!_)return;r.focusOption("first");break;case"End":if(!_)return;r.focusOption("last");break;default:return}u.preventDefault()}},r.state.instancePrefix="react-select-"+(r.props.instanceId||++zce),r.state.selectValue=M2(s.value),s.menuIsOpen&&r.state.selectValue.length){var i=r.getFocusableOptionsWithIds(),o=r.buildFocusableOptions(),c=o.indexOf(r.state.selectValue[0]);r.state.focusableOptionsWithIds=i,r.state.focusedOption=o[c],r.state.focusedOptionId=w_(i,o[c])}return r}return _ie(n,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&R2(this.menuListRef,this.focusedOptionRef),Cce()&&this.setState({isAppleDevice:!0})}},{key:"componentDidUpdate",value:function(r){var i=this.props,o=i.isDisabled,c=i.menuIsOpen,u=this.state.isFocused;(u&&!o&&r.isDisabled||u&&c&&!r.menuIsOpen)&&this.focusInput(),u&&o&&!r.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!u&&!o&&r.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(R2(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(r,i){this.props.onInputChange(r,i)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(r){var i=this,o=this.state,c=o.selectValue,u=o.isFocused,f=this.buildFocusableOptions(),m=r==="first"?0:f.length-1;if(!this.props.isMulti){var h=f.indexOf(c[0]);h>-1&&(m=h)}this.scrollToFocusedOptionOnUpdate=!(u&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:f[m],focusedOptionId:this.getFocusedOptionId(f[m])},function(){return i.onMenuOpen()})}},{key:"focusValue",value:function(r){var i=this.state,o=i.selectValue,c=i.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var u=o.indexOf(c);c||(u=-1);var f=o.length-1,m=-1;if(o.length){switch(r){case"previous":u===0?m=0:u===-1?m=f:m=u-1;break;case"next":u>-1&&u<f&&(m=u+1);break}this.setState({inputIsHidden:m!==-1,focusedValue:o[m]})}}}},{key:"focusOption",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",i=this.props.pageSize,o=this.state.focusedOption,c=this.getFocusableOptions();if(c.length){var u=0,f=c.indexOf(o);o||(f=-1),r==="up"?u=f>0?f-1:c.length-1:r==="down"?u=(f+1)%c.length:r==="pageup"?(u=f-i,u<0&&(u=0)):r==="pagedown"?(u=f+i,u>c.length-1&&(u=c.length-1)):r==="last"&&(u=c.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:c[u],focusedValue:null,focusedOptionId:this.getFocusedOptionId(c[u])})}}},{key:"getTheme",value:(function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(A_):xt(xt({},A_),this.props.theme):A_})},{key:"getCommonProps",value:function(){var r=this.clearValue,i=this.cx,o=this.getStyles,c=this.getClassNames,u=this.getValue,f=this.selectOption,m=this.setValue,h=this.props,g=h.isMulti,x=h.isRtl,b=h.options,A=this.hasValue();return{clearValue:r,cx:i,getStyles:o,getClassNames:c,getValue:u,hasValue:A,isMulti:g,isRtl:x,options:b,selectOption:f,selectProps:h,setValue:m,theme:this.getTheme()}}},{key:"hasValue",value:function(){var r=this.state.selectValue;return r.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var r=this.props,i=r.isClearable,o=r.isMulti;return i===void 0?o:i}},{key:"isOptionDisabled",value:function(r,i){return o5(this.props,r,i)}},{key:"isOptionSelected",value:function(r,i){return l5(this.props,r,i)}},{key:"filterOption",value:function(r,i){return c5(this.props,r,i)}},{key:"formatOptionLabel",value:function(r,i){if(typeof this.props.formatOptionLabel=="function"){var o=this.props.inputValue,c=this.state.selectValue;return this.props.formatOptionLabel(r,{context:i,inputValue:o,selectValue:c})}else return this.getOptionLabel(r)}},{key:"formatGroupLabel",value:function(r){return this.props.formatGroupLabel(r)}},{key:"startListeningComposition",value:(function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))})},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:(function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))})},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:(function(){var r=this.props,i=r.isDisabled,o=r.isSearchable,c=r.inputId,u=r.inputValue,f=r.tabIndex,m=r.form,h=r.menuIsOpen,g=r.required,x=this.getComponents(),b=x.Input,A=this.state,_=A.inputIsHidden,j=A.ariaSelection,C=this.commonProps,k=c||this.getElementId("input"),E=xt(xt(xt({"aria-autocomplete":"list","aria-expanded":h,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":g,role:"combobox","aria-activedescendant":this.state.isAppleDevice?void 0:this.state.focusedOptionId||""},h&&{"aria-controls":this.getElementId("listbox")}),!o&&{"aria-readonly":!0}),this.hasValue()?j?.action==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return o?v.createElement(b,_t({},C,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:k,innerRef:this.getInputRef,isDisabled:i,isHidden:_,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:f,form:m,type:"text",value:u},E)):v.createElement(hce,_t({id:k,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:Dy,onFocus:this.onInputFocus,disabled:i,tabIndex:f,inputMode:"none",form:m,value:""},E))})},{key:"renderPlaceholderOrValue",value:function(){var r=this,i=this.getComponents(),o=i.MultiValue,c=i.MultiValueContainer,u=i.MultiValueLabel,f=i.MultiValueRemove,m=i.SingleValue,h=i.Placeholder,g=this.commonProps,x=this.props,b=x.controlShouldRenderValue,A=x.isDisabled,_=x.isMulti,j=x.inputValue,C=x.placeholder,k=this.state,E=k.selectValue,N=k.focusedValue,L=k.isFocused;if(!this.hasValue()||!b)return j?null:v.createElement(h,_t({},g,{key:"placeholder",isDisabled:A,isFocused:L,innerProps:{id:this.getElementId("placeholder")}}),C);if(_)return E.map(function(T,O){var I=T===N,$="".concat(r.getOptionLabel(T),"-").concat(r.getOptionValue(T));return v.createElement(o,_t({},g,{components:{Container:c,Label:u,Remove:f},isFocused:I,isDisabled:A,key:$,index:O,removeProps:{onClick:function(){return r.removeValue(T)},onTouchEnd:function(){return r.removeValue(T)},onMouseDown:function(V){V.preventDefault()}},data:T}),r.formatOptionLabel(T,"value"))});if(j)return null;var M=E[0];return v.createElement(m,_t({},g,{data:M,isDisabled:A}),this.formatOptionLabel(M,"value"))}},{key:"renderClearIndicator",value:function(){var r=this.getComponents(),i=r.ClearIndicator,o=this.commonProps,c=this.props,u=c.isDisabled,f=c.isLoading,m=this.state.isFocused;if(!this.isClearable()||!i||u||!this.hasValue()||f)return null;var h={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return v.createElement(i,_t({},o,{innerProps:h,isFocused:m}))}},{key:"renderLoadingIndicator",value:function(){var r=this.getComponents(),i=r.LoadingIndicator,o=this.commonProps,c=this.props,u=c.isDisabled,f=c.isLoading,m=this.state.isFocused;if(!i||!f)return null;var h={"aria-hidden":"true"};return v.createElement(i,_t({},o,{innerProps:h,isDisabled:u,isFocused:m}))}},{key:"renderIndicatorSeparator",value:function(){var r=this.getComponents(),i=r.DropdownIndicator,o=r.IndicatorSeparator;if(!i||!o)return null;var c=this.commonProps,u=this.props.isDisabled,f=this.state.isFocused;return v.createElement(o,_t({},c,{isDisabled:u,isFocused:f}))}},{key:"renderDropdownIndicator",value:function(){var r=this.getComponents(),i=r.DropdownIndicator;if(!i)return null;var o=this.commonProps,c=this.props.isDisabled,u=this.state.isFocused,f={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return v.createElement(i,_t({},o,{innerProps:f,isDisabled:c,isFocused:u}))}},{key:"renderMenu",value:function(){var r=this,i=this.getComponents(),o=i.Group,c=i.GroupHeading,u=i.Menu,f=i.MenuList,m=i.MenuPortal,h=i.LoadingMessage,g=i.NoOptionsMessage,x=i.Option,b=this.commonProps,A=this.state.focusedOption,_=this.props,j=_.captureMenuScroll,C=_.inputValue,k=_.isLoading,E=_.loadingMessage,N=_.minMenuHeight,L=_.maxMenuHeight,M=_.menuIsOpen,T=_.menuPlacement,O=_.menuPosition,I=_.menuPortalTarget,$=_.menuShouldBlockScroll,H=_.menuShouldScrollIntoView,V=_.noOptionsMessage,G=_.onMenuScrollToTop,U=_.onMenuScrollToBottom;if(!M)return null;var R=function(le,ae){var te=le.type,X=le.data,de=le.isDisabled,Ne=le.isSelected,Ke=le.label,ce=le.value,xe=A===X,Te=de?void 0:function(){return r.onOptionHover(X)},Ie=de?void 0:function(){return r.selectOption(X)},Ue="".concat(r.getElementId("option"),"-").concat(ae),Ze={id:Ue,onClick:Ie,onMouseMove:Te,onMouseOver:Te,tabIndex:-1,role:"option","aria-selected":r.state.isAppleDevice?void 0:Ne};return v.createElement(x,_t({},b,{innerProps:Ze,data:X,isDisabled:de,isSelected:Ne,key:Ue,label:Ke,type:te,value:ce,isFocused:xe,innerRef:xe?r.getFocusedOptionRef:void 0}),r.formatOptionLabel(le.data,"menu"))},P;if(this.hasOptions())P=this.getCategorizedOptions().map(function(se){if(se.type==="group"){var le=se.data,ae=se.options,te=se.index,X="".concat(r.getElementId("group"),"-").concat(te),de="".concat(X,"-heading");return v.createElement(o,_t({},b,{key:X,data:le,options:ae,Heading:c,headingProps:{id:de,data:se.data},label:r.formatGroupLabel(se.data)}),se.options.map(function(Ne){return R(Ne,"".concat(te,"-").concat(Ne.index))}))}else if(se.type==="option")return R(se,"".concat(se.index))});else if(k){var Z=E({inputValue:C});if(Z===null)return null;P=v.createElement(h,b,Z)}else{var ne=V({inputValue:C});if(ne===null)return null;P=v.createElement(g,b,ne)}var D={minMenuHeight:N,maxMenuHeight:L,menuPlacement:T,menuPosition:O,menuShouldScrollIntoView:H},B=v.createElement(Woe,_t({},b,D),function(se){var le=se.ref,ae=se.placerProps,te=ae.placement,X=ae.maxHeight;return v.createElement(u,_t({},b,D,{innerRef:le,innerProps:{onMouseDown:r.onMenuMouseDown,onMouseMove:r.onMenuMouseMove},isLoading:k,placement:te}),v.createElement(bce,{captureEnabled:j,onTopArrive:G,onBottomArrive:U,lockEnabled:$},function(de){return v.createElement(f,_t({},b,{innerRef:function(Ke){r.getMenuListRef(Ke),de(Ke)},innerProps:{role:"listbox","aria-multiselectable":b.isMulti,id:r.getElementId("listbox")},isLoading:k,maxHeight:X,focusedOption:A}),P)}))});return I||O==="fixed"?v.createElement(m,_t({},b,{appendTo:I,controlElement:this.controlRef,menuPlacement:T,menuPosition:O}),B):B}},{key:"renderFormField",value:function(){var r=this,i=this.props,o=i.delimiter,c=i.isDisabled,u=i.isMulti,f=i.name,m=i.required,h=this.state.selectValue;if(m&&!this.hasValue()&&!c)return v.createElement(Ace,{name:f,onFocus:this.onValueInputFocus});if(!(!f||c))if(u)if(o){var g=h.map(function(A){return r.getOptionValue(A)}).join(o);return v.createElement("input",{name:f,type:"hidden",value:g})}else{var x=h.length>0?h.map(function(A,_){return v.createElement("input",{key:"i-".concat(_),name:f,type:"hidden",value:r.getOptionValue(A)})}):v.createElement("input",{name:f,type:"hidden",value:""});return v.createElement("div",null,x)}else{var b=h[0]?this.getOptionValue(h[0]):"";return v.createElement("input",{name:f,type:"hidden",value:b})}}},{key:"renderLiveRegion",value:function(){var r=this.commonProps,i=this.state,o=i.ariaSelection,c=i.focusedOption,u=i.focusedValue,f=i.isFocused,m=i.selectValue,h=this.getFocusableOptions();return v.createElement(oce,_t({},r,{id:this.getElementId("live-region"),ariaSelection:o,focusedOption:c,focusedValue:u,isFocused:f,selectValue:m,focusableOptions:h,isAppleDevice:this.state.isAppleDevice}))}},{key:"render",value:function(){var r=this.getComponents(),i=r.Control,o=r.IndicatorsContainer,c=r.SelectContainer,u=r.ValueContainer,f=this.props,m=f.className,h=f.id,g=f.isDisabled,x=f.menuIsOpen,b=this.state.isFocused,A=this.commonProps=this.getCommonProps();return v.createElement(c,_t({},A,{className:m,innerProps:{id:h,onKeyDown:this.onKeyDown},isDisabled:g,isFocused:b}),this.renderLiveRegion(),v.createElement(i,_t({},A,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:g,isFocused:b,menuIsOpen:x}),v.createElement(u,_t({},A,{isDisabled:g}),this.renderPlaceholderOrValue(),this.renderInput()),v.createElement(o,_t({},A,{isDisabled:g}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(r,i){var o=i.prevProps,c=i.clearFocusValueOnUpdate,u=i.inputIsHiddenAfterUpdate,f=i.ariaSelection,m=i.isFocused,h=i.prevWasFocused,g=i.instancePrefix,x=r.options,b=r.value,A=r.menuIsOpen,_=r.inputValue,j=r.isMulti,C=M2(b),k={};if(o&&(b!==o.value||x!==o.options||A!==o.menuIsOpen||_!==o.inputValue)){var E=A?Bce(r,C):[],N=A?q2($g(r,C),"".concat(g,"-option")):[],L=c?Ice(i,C):null,M=Vce(i,E),T=w_(N,M);k={selectValue:C,focusedOption:M,focusedOptionId:T,focusableOptionsWithIds:N,focusedValue:L,clearFocusValueOnUpdate:!1}}var O=u!=null&&r!==o?{inputIsHidden:u,inputIsHiddenAfterUpdate:void 0}:{},I=f,$=m&&h;return m&&!$&&(I={value:fg(j,C,C[0]||null),options:C,action:"initial-input-focus"},$=!h),f?.action==="initial-input-focus"&&(I=null),xt(xt(xt({},k),O),{},{prevProps:r,ariaSelection:I,prevWasFocused:$})}}]),n})(v.Component);d5.defaultProps=Fce;var $ce=v.forwardRef(function(t,e){var n=bie(t);return v.createElement(d5,_t({ref:e},n))}),hg=$ce;zs.register(Yo,qo,$i,fa,Uo,Wo,Ho,Oo,tte,mee);const ah=565,K2=[{value:20,label:"20 kW"},{value:30,label:"30 kW"},{value:40,label:"40 kW"},{value:50,label:"50 kW"},{value:60,label:"60 kW"},{value:75,label:"75 kW"},{value:100,label:"100 kW"},{value:125,label:"125 kW"},{value:135,label:"135 kW"},{value:150,label:"150 kW"},{value:175,label:"175 kW"},{value:200,label:"200 kW"},{value:230,label:"230 kW"},{value:250,label:"250 kW"},{value:300,label:"300 kW"},{value:350,label:"350 kW"},{value:400,label:"400 kW"},{value:500,label:"500 kW"},{value:600,label:"600 kW"},{value:750,label:"750 kW"},{value:1e3,label:"1000 kW"},{value:1250,label:"1250 kW"},{value:1500,label:"1500 kW"},{value:1750,label:"1750 kW"},{value:2e3,label:"2000 kW"}],Hce=({projectId:t,design:e,onDesignChange:n,products:s,usePvgis:r,setUsePvgis:i,profileName:o,setProfileName:c,showNotification:u})=>{const f=async(x,b,A)=>{try{await Re.put(`${Ce}/api/projects/${t}`,{panel_id:x||null,panel_kw:b?parseFloat(b):0,num_panels:A?parseInt(A):0}),sessionStorage.setItem(`systemDesignModified_${t}`,"true")}catch(_){console.error("Failed to save panel selection",_),u&&u("Failed to save panel selection","danger")}},m=async x=>{const b=x.target.value,A=e.selectedPanel?.product?.power_w||ah,_=b&&parseFloat(b)>0?Math.max(1,Math.ceil(Math.round(parseFloat(b)*1e3*100)/100/A)):"";n({...e,panelKw:b,numPanels:_});const j=e.selectedPanel?.product?.id||null;await f(j,b||0,_||0)},h=async x=>{const b=x.target.value,A=e.selectedPanel?.product?.power_w||ah,_=b&&parseInt(b)>0?(parseInt(b)*A/1e3).toFixed(2):"";n({...e,numPanels:b,panelKw:_});const j=e.selectedPanel?.product?.id||null;await f(j,_||0,b||0)},g=async(x,b)=>{if(!s)return;if(!b){n({...e,[x]:null}),x==="selectedPanel"&&await f(null,e.panelKw||0);return}let A;if(x==="selectedPanel")A="panels";else if(x==="selectedInverter")A="inverters";else if(x==="selectedBattery")A="batteries";else return;const j=(s[A]||[]).find(k=>k.id===b.value),C=j?{...b,product:j}:null;if(n({...e,[x]:C}),x==="selectedPanel"){const k=j?.id||null,E=j?.power_w||ah,N=parseInt(e.numPanels||0,10),L=N>0?(N*E/1e3).toFixed(2):e.panelKw||0;N>0&&n({...e,[x]:C,panelKw:L}),await f(k,L)}};return a.jsx(a.Fragment,{children:a.jsxs("div",{className:"row g-4 mb-4",children:[a.jsx("div",{className:"col-lg-6",children:a.jsx(me,{className:"h-100 shadow-sm",children:a.jsxs(me.Body,{className:"d-flex flex-column",children:[a.jsxs(me.Title,{as:"h5",className:"fw-semibold mb-3",children:[a.jsx("i",{className:"bi bi-gear-fill me-2 text-primary"}),"Core Configuration"]}),a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{children:"Generation Data Source"}),a.jsx(z.Check,{type:"switch",id:"pvgis-switch",label:r?"Live PVGIS Data (Slow)":"Standard Profile (Fast)",checked:r,onChange:x=>i(x.target.checked)})]}),!r&&a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{children:"Standard Profile Type"}),a.jsxs(z.Select,{value:o,onChange:x=>c(x.target.value),children:[a.jsx("option",{value:"hopetown_14_15",children:"Hopetown Azth:14 Tilt:15"}),a.jsx("option",{value:"midrand_ew_5",children:"Midrand Azth:east-west Tilt:5"}),a.jsx("option",{value:"pvlib_hopetown_0_15",children:"Pvlib Hopetown Azth:0 Tilt:15"}),a.jsx("option",{value:"pvlib_hopetown_0_15_0.9",children:"Pvlib Hopetown (x0.9) Azth:0 Tilt:15"})]})]}),a.jsxs(nt,{children:[a.jsx(ge,{md:6,children:a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{children:"System Type"}),a.jsxs(z.Select,{value:e.systemType,onChange:x=>n({...e,systemType:x.target.value}),children:[a.jsx("option",{value:"grid",children:"Grid-tied"}),a.jsx("option",{value:"hybrid",children:"Hybrid"}),a.jsx("option",{value:"off-grid",children:"Off-grid"})]})]})}),a.jsx(ge,{md:6,children:a.jsxs(z.Group,{children:[a.jsx(z.Label,{children:"Grid Export"}),a.jsx(z.Check,{type:"switch",id:"allow_export_switch",label:e.allowExport?"Allowed":"Not Allowed",checked:e.allowExport,onChange:x=>n({...e,allowExport:x.target.checked})})]})})]}),r&&a.jsxs(nt,{children:[a.jsx(ge,{md:6,children:a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{children:"Panel Tilt (°)"}),a.jsx(z.Control,{type:"number",value:e.tilt,onChange:x=>n({...e,tilt:x.target.value}),placeholder:"e.g., 15"})]})}),a.jsx(ge,{md:6,children:a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{children:"Panel Azimuth (°)"}),a.jsx(z.Control,{type:"number",value:e.azimuth,onChange:x=>n({...e,azimuth:x.target.value}),placeholder:"0=N, 180=S"})]})})]})]})})}),a.jsx("div",{className:"col-lg-6",children:a.jsx(me,{className:"h-100 shadow-sm",children:a.jsxs(me.Body,{className:"d-flex flex-column",children:[a.jsxs(me.Title,{as:"h5",className:"fw-semibold mb-3",children:[a.jsx("i",{className:"bi bi-box-seam me-2 text-primary"}),"PV Array (Solar Panels)"]}),a.jsxs(nt,{children:[a.jsx(ge,{md:6,children:a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{children:"Target Size (kWp)"}),a.jsx(z.Control,{type:"number",value:e.panelKw,onChange:m,placeholder:"e.g., 200"})]})}),a.jsx(ge,{md:6,children:a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{children:"Number of Panels"}),a.jsx(z.Control,{type:"number",value:e.numPanels,onChange:h,placeholder:"e.g., 354"})]})})]}),a.jsx(nt,{children:a.jsx(ge,{md:12,children:a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{children:"Panel"}),a.jsx(hg,{options:s.panels.map(x=>({value:x.id,label:`${x.brand} ${x.model}`})),value:e.selectedPanel,onChange:x=>g("selectedPanel",x),isClearable:!0,placeholder:"Select panel.."})]})})})]})})}),a.jsx("div",{className:"col-12",children:a.jsx(me,{className:"shadow-sm",children:a.jsxs(me.Body,{children:[a.jsxs(me.Title,{as:"h5",className:"fw-semibold mb-3",children:[a.jsx("i",{className:"bi bi-cpu-fill me-2 text-primary"}),"Equipment Selection"]}),a.jsxs(nt,{children:[a.jsxs(ge,{md:6,children:[a.jsxs(z.Group,{children:[a.jsx(z.Label,{children:"Inverter"}),a.jsx(hg,{options:s.inverters.map(x=>({value:x.id,label:`${x.brand} ${x.model} (${x.rating_kva}kVA)`})),value:e.selectedInverter,onChange:x=>g("selectedInverter",x),isClearable:!0})]}),a.jsxs(z.Group,{className:"mt-2",children:[a.jsx(z.Label,{className:"small",children:"Inverter Quantity"}),a.jsx(z.Control,{type:"number",size:"sm",min:"1",value:e.inverterQuantity,onChange:x=>n({...e,inverterQuantity:x.target.value}),onBlur:x=>n({...e,inverterQuantity:Math.max(1,parseInt(x.target.value)||1)})})]})]}),a.jsxs(ge,{md:6,children:[a.jsxs(z.Group,{children:[a.jsx(z.Label,{children:"Battery"}),a.jsx(hg,{isDisabled:e.systemType==="grid",options:s.batteries.map(x=>({value:x.id,label:`${x.brand} ${x.model} (${x.capacity_kwh}kWh)`})),value:e.selectedBattery,onChange:x=>g("selectedBattery",x),isClearable:!0})]}),a.jsxs(nt,{className:"mt-2",children:[a.jsx(ge,{md:6,children:a.jsxs(z.Group,{children:[a.jsx(z.Label,{className:"small",children:"Battery Quantity"}),a.jsx(z.Control,{type:"number",size:"sm",min:"1",value:e.batteryQuantity,onChange:x=>n({...e,batteryQuantity:x.target.value}),onBlur:x=>n({...e,batteryQuantity:Math.max(1,parseInt(x.target.value)||1)}),disabled:e.systemType==="grid"})]})}),a.jsx(ge,{md:6,children:a.jsxs(z.Group,{children:[a.jsx(z.Label,{className:"small",children:"Min SOC Limit (%)"}),a.jsx(z.Control,{type:"number",size:"sm",min:"0",max:"100",value:e.batterySocLimit,onChange:x=>n({...e,batterySocLimit:x.target.value}),onBlur:x=>n({...e,batterySocLimit:Math.max(0,Math.min(50,parseInt(x.target.value)||0))}),disabled:e.systemType==="grid"})]})})]})]})]})]})})}),e.systemType==="off-grid"&&a.jsx("div",{className:"col-12 mt-4",children:a.jsx(me,{className:"shadow-sm",children:a.jsxs(me.Body,{children:[a.jsxs(me.Title,{as:"h5",className:"fw-semibold mb-3",children:[a.jsx("i",{className:"bi bi-fuel-pump me-2 text-danger"}),"Generator (Off-Grid)"]}),a.jsxs(nt,{className:"g-3",children:[a.jsx(ge,{md:4,children:a.jsxs(z.Group,{children:[a.jsx(z.Label,{children:"Enable Generator"}),a.jsx(z.Check,{type:"switch",id:"gen-enabled",checked:e.generatorEnabled,onChange:x=>n({...e,generatorEnabled:x.target.checked}),label:e.generatorEnabled?"Enabled":"Disabled"})]})}),a.jsx(ge,{md:4,children:a.jsxs(z.Group,{children:[a.jsx(z.Label,{children:"Rated Power (kW)"}),a.jsx(hg,{value:K2.find(x=>x.value===e.generatorKva),onChange:x=>n({...e,generatorKva:x.value}),options:K2,isDisabled:!e.generatorEnabled,placeholder:"Select generator size..."})]})}),a.jsx(ge,{md:4,children:a.jsxs(z.Group,{children:[a.jsx(z.Label,{children:"Min Loading (%)"}),a.jsx(z.Control,{type:"number",value:e.generatorMinLoading,min:0,max:100,onChange:x=>n({...e,generatorMinLoading:x.target.value}),disabled:!e.generatorEnabled})]})})]}),a.jsxs(nt,{className:"g-3 mt-1",children:[a.jsx(ge,{md:4,children:a.jsxs(z.Group,{children:[a.jsx(z.Label,{children:"Diesel Price (R / liter)"}),a.jsx(z.Control,{type:"number",step:"0.10",value:e.dieselPrice,onChange:x=>n({...e,dieselPrice:x.target.value}),disabled:!e.generatorEnabled})]})}),a.jsx(ge,{md:4,children:a.jsxs(z.Group,{children:[a.jsx(z.Label,{children:"Min Run Time (hours)"}),a.jsx(z.Control,{type:"number",step:"0.1",value:e.generatorMinRunTime,onChange:x=>n({...e,generatorMinRunTime:x.target.value}),disabled:!e.generatorEnabled})]})}),a.jsx(ge,{md:4,children:a.jsx(z.Group,{className:"mt-md-4",children:a.jsx(z.Check,{type:"checkbox",id:"gen-charge-batt",label:"Charge battery while running",checked:e.generatorChargeBattery,onChange:x=>n({...e,generatorChargeBattery:x.target.checked}),disabled:!e.generatorEnabled})})})]}),a.jsxs(nt,{className:"g-3 mt-1",children:[a.jsx(ge,{md:4,children:a.jsxs(z.Group,{children:[a.jsx(z.Label,{children:"Battery Start SoC (%)"}),a.jsx(z.Control,{type:"number",value:e.generatorBatteryStartSoc,min:0,max:100,onChange:x=>n({...e,generatorBatteryStartSoc:x.target.value}),disabled:!e.generatorEnabled,placeholder:"e.g., 20"})]})}),a.jsx(ge,{md:4,children:a.jsxs(z.Group,{children:[a.jsx(z.Label,{children:"Battery Stop SoC (%)"}),a.jsx(z.Control,{type:"number",value:e.generatorBatteryStopSoc,min:0,max:100,onChange:x=>n({...e,generatorBatteryStopSoc:x.target.value}),disabled:!e.generatorEnabled,placeholder:"e.g., 90"})]})})]}),a.jsxs(nt,{className:"g-3 mt-1",children:[a.jsx(ge,{md:4,children:a.jsxs(z.Group,{children:[a.jsx(z.Label,{children:"Service Cost (R)"}),a.jsx(z.Control,{type:"number",step:"10",value:e.generatorServiceCost,onChange:x=>n({...e,generatorServiceCost:x.target.value}),disabled:!e.generatorEnabled,placeholder:"e.g., 1000"})]})}),a.jsx(ge,{md:4,children:a.jsxs(z.Group,{children:[a.jsx(z.Label,{children:"Service Interval (hours)"}),a.jsx(z.Control,{type:"number",step:"100",value:e.generatorServiceInterval,onChange:x=>n({...e,generatorServiceInterval:x.target.value}),disabled:!e.generatorEnabled,placeholder:"e.g., 1000"})]})})]})]})})})]})})},j_=t=>(t.setHours(0,0,0,0),t),_a=t=>{if(!t)return t;const e=new Date(t);return e.setHours(23,59,59,999),e},Uce=({templates:t,loading:e,onSelectSystem:n})=>e?a.jsxs("div",{className:"text-center p-5",children:[a.jsx(Ot,{animation:"border",variant:"primary"}),a.jsx("p",{className:"mt-3",children:"Loading standard designs..."})]}):!t||t.length===0?a.jsxs(kt,{variant:"info",className:"my-4",children:[a.jsx(kt.Heading,{children:"No Standard Designs Available"}),a.jsx("p",{children:"There are no standard designs available. You can create a design in the System Builder Tool."})]}):a.jsx("div",{className:"row g-4 mb-4",children:t.map(s=>a.jsx("div",{className:"col-md-6 col-lg-4",children:a.jsx(me,{className:"h-100 shadow-sm hover-card",children:a.jsxs(me.Body,{className:"d-flex flex-column",children:[a.jsxs("div",{className:"d-flex align-items-center mb-3",children:[a.jsx("div",{className:`rounded-circle bg-${Wce(s.system_type)} p-2 me-2`,children:a.jsx("i",{className:`bi ${Yce(s.system_type)} text-white`})}),a.jsx(me.Title,{className:"mb-0 fs-5",children:s.name})]}),a.jsx(me.Text,{className:"small text-muted mb-3",children:s.description||"No description available."}),a.jsxs("div",{className:"small mb-3",children:[a.jsxs("div",{className:"small mb-3",children:[a.jsx("span",{children:"PV Size:"}),a.jsxs(tt,{bg:"warning",text:"dark",children:[s.panel_kw," kWp"]})]}),a.jsxs("div",{className:"d-flex justify-content-between mb-1",children:[a.jsx("span",{children:"Inverter:"}),a.jsxs(tt,{bg:"info",children:[s.inverter_kva," kVA"]})]}),a.jsxs("div",{className:"d-flex justify-content-between mb-1",children:[a.jsx("span",{children:"Battery:"}),a.jsx(tt,{bg:"success",children:s.battery_kwh>0?`${s.battery_kwh} kWh`:"None"})]}),a.jsxs("div",{className:"d-flex justify-content-between mb-1",children:[a.jsx("span",{children:"Type:"}),a.jsx("span",{className:"fw-semibold",children:qce(s.system_type)})]})]}),a.jsx("div",{className:"mt-auto pt-3 border-top",children:a.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[a.jsxs("span",{className:"fw-bold text-primary",children:["R",s.total_cost.toLocaleString()]}),a.jsx(Fe,{variant:"primary",size:"sm",onClick:()=>n(s),children:"Use This System"})]})})]})})},s.id))}),Wce=t=>{switch(t?.toLowerCase()){case"hybrid":return"success";case"grid-tied":return"primary";case"off-grid":return"danger";default:return"secondary"}},Yce=t=>{switch(t?.toLowerCase()){case"hybrid":return"bi-battery-charging";case"grid-tied":return"bi-plug-fill";case"off-grid":return"bi-sun-fill";default:return"bi-gear-fill"}},qce=t=>t?t.charAt(0).toUpperCase()+t.slice(1).toLowerCase().replace("-"," "):"Unknown",Sf=(t,e)=>{const n=[{size_kw:20,lph:{.25:2.3,.5:3.4,.75:4.9,1:6.1}},{size_kw:30,lph:{.25:4.9,.5:6.8,.75:9.1,1:10}},{size_kw:40,lph:{.25:6.1,.5:8.7,.75:12,1:15}},{size_kw:50,lph:{.25:6.45,.5:9.8,.75:13.15,1:16.85}},{size_kw:60,lph:{.25:6.8,.5:10.9,.75:14.3,1:18.7}},{size_kw:75,lph:{.25:9.1,.5:12.8,.75:17.4,1:23}},{size_kw:100,lph:{.25:9.8,.5:15.5,.75:21.9,1:28}},{size_kw:125,lph:{.25:11.7,.5:18.9,.75:26.8,1:34.4}},{size_kw:135,lph:{.25:12.4,.5:20.4,.75:28.7,1:37}},{size_kw:150,lph:{.25:13.6,.5:22.3,.75:31.7,1:41.2}},{size_kw:175,lph:{.25:15.5,.5:25.7,.75:36.7,1:48}},{size_kw:200,lph:{.25:17.7,.5:29.1,.75:41.6,1:54.5}},{size_kw:230,lph:{.25:20,.5:33.3,.75:47.3,1:62.8}},{size_kw:250,lph:{.25:21.5,.5:35.9,.75:51.4,1:68.1}},{size_kw:300,lph:{.25:25.7,.5:42.7,.75:60.9,1:81.3}},{size_kw:350,lph:{.25:29.9,.5:49.5,.75:70.7,1:95}},{size_kw:400,lph:{.25:33.6,.5:56.4,.75:80.6,1:108.2}},{size_kw:500,lph:{.25:41.6,.5:70,.75:99.9,1:135.1}},{size_kw:600,lph:{.25:49.9,.5:83.2,.75:119.2,1:182.4}},{size_kw:750,lph:{.25:61.7,.5:103.7,.75:148.7,1:202.1}},{size_kw:1e3,lph:{.25:81.7,.5:137.7,.75:197.2,1:269.1}},{size_kw:1250,lph:{.25:101.8,.5:171.4,.75:246,1:336.1}},{size_kw:1500,lph:{.25:121.8,.5:205.5,.75:294.5,1:403.1}},{size_kw:1750,lph:{.25:141.9,.5:273,.75:343.3,1:470.1}},{size_kw:2e3,lph:{.25:162,.5:273.3,.75:391.7,1:537.1}}];if(t<=0)return 0;const s=n.find(r=>r.size_kw===t);if(!s){const i=n.map(c=>c.size_kw).sort((c,u)=>c-u).reduce((c,u)=>Math.abs(u-t)<Math.abs(c-t)?u:c),o=n.find(c=>c.size_kw===i);return o?Q2(o.lph,e):0}return Q2(s.lph,e)},Q2=(t,e)=>{if(e<=.25)return t[.25];if(e<=.5){const n=(e-.25)/.25;return t[.25]+n*(t[.5]-t[.25])}if(e<=.75){const n=(e-.5)/.25;return t[.5]+n*(t[.75]-t[.5])}if(e<=1){const n=(e-.75)/.25;return t[.75]+n*(t[1]-t[.75])}return t[1]*e};function f5({projectId:t}){const e=v.useRef(null),[n,s]=v.useState(!1),[r,i]=v.useState(null),[o,c]=v.useState(null),[u,f]=v.useState(null),[m,h]=v.useState(!1),[g,x]=v.useState(!0),[b,A]=v.useState({panels:[],inverters:[],batteries:[]}),[_,j]=v.useState(null),[C,k]=v.useState(!1),[E,N]=v.useState("midrand_ew_5"),[L,M]=v.useState("custom"),[T,O]=v.useState([]),[I,$]=v.useState(!0),[H,V]=v.useState(""),[G,U]=v.useState(""),{showNotification:R}=Os(),[P,Z]=v.useState(()=>{const ee={systemType:"grid",panelKw:"",numPanels:"",tilt:"15",azimuth:"0",selectedPanel:null,selectedInverter:null,inverterQuantity:1,selectedBattery:null,batteryQuantity:1,allowExport:!1,batterySocLimit:20,generatorEnabled:!1,generatorKva:50,generatorMinLoading:25,dieselPrice:20.4,generatorChargeBattery:!0,generatorMinRunTime:0,generatorBatteryStartSoc:20,generatorBatteryStopSoc:100,generatorServiceCost:1e3,generatorServiceInterval:1e3};if(!t)return ee;const De=sessionStorage.getItem(`generatorSettings_${t}`);if(De)try{const be=JSON.parse(De);return console.log("Loading cached generator settings in initializer:",be),{...ee,generatorEnabled:be.generatorEnabled??ee.generatorEnabled,generatorKva:be.generatorKva??ee.generatorKva,generatorMinLoading:be.generatorMinLoading??ee.generatorMinLoading,generatorChargeBattery:be.generatorChargeBattery??ee.generatorChargeBattery,dieselPrice:be.dieselPrice??ee.dieselPrice,generatorMinRunTime:be.generatorMinRunTime??ee.generatorMinRunTime,generatorBatteryStartSoc:be.generatorBatteryStartSoc??ee.generatorBatteryStartSoc,generatorBatteryStopSoc:be.generatorBatteryStopSoc??ee.generatorBatteryStopSoc,generatorServiceCost:be.generatorServiceCost??ee.generatorServiceCost,generatorServiceInterval:be.generatorServiceInterval??ee.generatorServiceInterval}}catch(be){console.error("Failed to parse cached generator settings in initializer:",be),sessionStorage.removeItem(`generatorSettings_${t}`)}return console.log("No cached generator settings found in initializer for project:",t),ee}),[ne,D]=v.useState({totalEnergyConsumption:0,totalPVGeneration:0,utilizedPVGeneration:0,gridImport:0,gridExport:0,batteryChargeDischarge:0,pvUtilization:"0"}),[B,se]=v.useState({daytimeConsumption:"0",consumptionFromPV:"0",pvUtilization:"0",potentialGenDaily:"0",utilizedGenDaily:"0",throttlingLossesDaily:"0",specificYieldWithThrottling:"0",potentialGenAnnual:"0",utilizedGenAnnual:"0",throttlingLossesAnnual:"0",specificYieldExclThrottling:"0",batteryCyclesAnnual:"0",totalConsumptionAnnual:"0",avgDailyConsumption:"0"});v.useEffect(()=>{L==="standard"&&($(!0),Re.get(`${Ce}/api/system_templates`).then(ee=>{O(ee.data),$(!1)}).catch(ee=>{console.error("Error fetching system templates:",ee),R("Failed to load standard designs.","danger"),$(!1)}))},[L,R]),v.useEffect(()=>{(async()=>{try{const[De,be,J]=await Promise.all([Re.get(`${Ce}/api/products?category=panel`),Re.get(`${Ce}/api/products?category=inverter`),Re.get(`${Ce}/api/products?category=battery`)]);A({panels:De.data,inverters:be.data,batteries:J.data})}catch{R("Failed to load product lists.","danger")}})()},[R]),v.useEffect(()=>{const ee=async()=>{try{const[be,J,ie]=await Promise.all([Re.get(`${Ce}/api/products?category=panel`),Re.get(`${Ce}/api/products?category=inverter`),Re.get(`${Ce}/api/products?category=battery`)]);A({panels:be.data,inverters:J.data,batteries:ie.data})}catch{R("Failed to refresh product lists.","danger")}},De=()=>ee();return window.addEventListener("refresh-products",De),()=>window.removeEventListener("refresh-products",De)},[R]),v.useEffect(()=>{if(!t)return;const ee=sessionStorage.getItem(`simulationData_${t}`);if(ee)try{const De=JSON.parse(ee);De.timestamps&&i(De)}catch(De){console.error("Failed to parse cached simulation data:",De),sessionStorage.removeItem(`simulationData_${t}`)}},[t]),v.useEffect(()=>{if(!t)return;const ee={generatorEnabled:P.generatorEnabled,generatorKva:P.generatorKva,generatorMinLoading:P.generatorMinLoading,generatorChargeBattery:P.generatorChargeBattery,dieselPrice:P.dieselPrice,generatorMinRunTime:P.generatorMinRunTime,generatorBatteryStartSoc:P.generatorBatteryStartSoc,generatorBatteryStopSoc:P.generatorBatteryStopSoc,generatorServiceCost:P.generatorServiceCost,generatorServiceInterval:P.generatorServiceInterval};sessionStorage.setItem(`generatorSettings_${t}`,JSON.stringify(ee))},[t,P.generatorEnabled,P.generatorKva,P.generatorMinLoading,P.generatorChargeBattery,P.dieselPrice,P.generatorMinRunTime,P.generatorBatteryStartSoc,P.generatorBatteryStopSoc,P.generatorServiceCost,P.generatorServiceInterval]),v.useEffect(()=>{if(!t||b.inverters.length===0)return;const ee=`quoteLoadCoreComponents_${t}`,De=sessionStorage.getItem(ee);if(De){try{const be=JSON.parse(De);console.log("Loading core components from quote instead of project data:",be);let J={};if(be.panel){const ie=b.panels.find(Be=>Be.id===be.panel.id);ie&&(J.selectedPanel={value:ie.id,label:`${ie.brand_name} ${ie.model}`,product:ie},J.panelKw=(be.panel.quantity*(ie.power_w||ah)/1e3).toFixed(2),J.numPanels=be.panel.quantity)}if(be.inverter){console.log("Looking for inverter with ID:",be.inverter.id,"in products:",b.inverters.length,"inverters");const ie=b.inverters.find(Be=>Be.id===be.inverter.id);console.log("Found inverter product:",ie),ie?(J.selectedInverter={value:ie.id,label:`${ie.model} (${ie.rating_kva}kVA)`,product:ie},J.inverterQuantity=be.inverter.quantity,console.log("Set inverter:",J.selectedInverter,"quantity:",J.inverterQuantity)):console.warn("Inverter product not found with ID:",be.inverter.id)}if(be.battery){const ie=b.batteries.find(Be=>Be.id===be.battery.id);ie&&(J.selectedBattery={value:ie.id,label:`${ie.description} (${ie.capacity_kwh}kWh)`,product:ie},J.batteryQuantity=be.battery.quantity)}Object.keys(J).length>0&&(Z(ie=>({...ie,...J})),oe(!0),He({name:be.quote_name||"Quote Components",number:be.quote_number||"Unknown"}),gt(!1),Pe(null),console.log("Updated SystemDesign with core components from quote")),sessionStorage.removeItem(ee)}catch(be){console.error("Failed to parse core components data:",be),sessionStorage.removeItem(ee)}return}Re.get(`${Ce}/api/projects/${t}`).then(be=>{const J=be.data;if(!J)return;(J.from_standard_template||J.template_id)&&(console.log("Loading project from standard template:",J.template_name),gt(!0),Pe({id:J.template_id,name:J.template_name||"Standard Design"}));const ie=`quoteLoadCoreComponents_${t}`;if(sessionStorage.getItem(ie))return;const $e=J.panel_kw||"",Y=J.panel_id,pe=Y?b.panels.find(Ee=>Ee.id===Y):b.panels.find(Ee=>Ee.power_w===ah),we=J.num_panels||"",ze=J.inverter_kva&&typeof J.inverter_kva=="object"?J.inverter_kva:{model:null,capacity:J.inverter_kva,quantity:1},ve=ze.model?b.inverters.find(Ee=>Ee.model===ze.model):null,Le=J.battery_kwh&&typeof J.battery_kwh=="object"?J.battery_kwh:{model:null,capacity:J.battery_kwh,quantity:1},ye=b.batteries.find(Ee=>Ee.model===Le.model);k(J.use_pvgis||!1),N(J.generation_profile_name||"midrand_ew_5"),Z(Ee=>({...Ee,systemType:J.system_type||"grid",panelKw:$e,numPanels:we,tilt:J.surface_tilt??"15",azimuth:J.surface_azimuth??"0",selectedPanel:pe?{value:pe.id,label:`${pe.brand} ${pe.model}`,product:pe}:null,selectedInverter:ve?{value:ve.id,label:`${ve.model} (${ve.rating_kva}kVA)`,product:ve}:null,inverterQuantity:ze.quantity||1,selectedBattery:ye?{value:ye.id,label:`${ye.model} (${ye.capacity_kwh}kWh)`,product:ye}:null,batteryQuantity:Le.quantity||1,allowExport:J.allow_export||!1,batterySocLimit:J.battery_soc_limit||20}))})},[t,b]);const le=ee=>{s(!0);const De=ee.components?.find(Le=>b.panels.some(ye=>ye.id===Le.product_id)),be=ee.components?.find(Le=>b.inverters.some(ye=>ye.id===Le.product_id)),J=ee.components?.find(Le=>b.batteries.some(ye=>ye.id===Le.product_id)),ie=De?b.panels.find(Le=>Le.id===De.product_id):null,Be=be?b.inverters.find(Le=>Le.id===be.product_id):null,$e=J?b.batteries.find(Le=>Le.id===J.product_id):null,Y=De?.quantity||0,pe=be?.quantity||1,we=J?.quantity||1,ze=ie&&Y>0?ie.power_w*Y/1e3:0,ve={systemType:ee.system_type?.toLowerCase()||"grid",panelKw:ze.toString(),numPanels:Y.toString(),tilt:"15",azimuth:"0",selectedPanel:ie?{value:ie.id,label:`${ie.brand} ${ie.model}`,product:ie}:null,selectedInverter:Be?{value:Be.id,label:`${Be.brand} ${Be.model} (${Be.rating_kva} kVA)`,product:Be}:null,inverterQuantity:pe,selectedBattery:$e?{value:$e.id,label:`${$e.brand} ${$e.model} (${$e.capacity_kwh} kWh)`,product:$e}:null,batteryQuantity:we,allowExport:ee.allow_export||!1,batterySocLimit:ee.battery_soc_limit||20,from_standard_template:!0,template_id:ee.id,template_name:ee.name};Z(Le=>({...Le,...ve})),gt(!0),Pe({id:ee.id,name:ee.name}),M("custom"),R(`Applied system template: ${ee.name}`,"success"),e.current&&e.current.scrollIntoView({behavior:"smooth",block:"start"}),setTimeout(()=>{const Le={system_type:ve.systemType,panel_kw:parseFloat(ve.panelKw),num_panels:parseInt(ve.numPanels),surface_tilt:parseFloat(ve.tilt),surface_azimuth:parseFloat(ve.azimuth),allow_export:ve.allowExport,panel_id:ve.selectedPanel?.product?.id,inverter_kva:ve.selectedInverter?{model:ve.selectedInverter.product.model,capacity:ve.selectedInverter.product.rating_kva,quantity:ve.inverterQuantity}:null,inverter_ids:ve.selectedInverter?[ve.selectedInverter.product.id]:[],battery_kwh:ve.systemType!=="grid"&&ve.selectedBattery?{model:ve.selectedBattery.product.model,capacity:ve.selectedBattery.product.capacity_kwh,quantity:ve.batteryQuantity}:null,battery_ids:ve.systemType!=="grid"&&ve.selectedBattery?[ve.selectedBattery.product.id]:[],use_pvgis:C,generation_profile_name:E,battery_soc_limit:ve.batterySocLimit,project_value_excl_vat:ee.total_cost,from_standard_template:!0,template_id:ee.id,template_name:ee.name};sessionStorage.setItem(`systemDesignModified_${t}`,"true"),Re.put(`${Ce}/api/projects/${t}`,Le).then(()=>Re.post(`${Ce}/api/projects/${t}/bom/clear`)).then(()=>{const ye={project_id:t,use_pvgis:C,profile_name:E,system:{panel_kw:parseFloat(ve.panelKw),panel_id:ve.selectedPanel?.product?.id||null,tilt:parseFloat(ve.tilt),azimuth:parseFloat(ve.azimuth),system_type:ve.systemType,inverter_kva:(ve.selectedInverter?.product?.rating_kva||0)*ve.inverterQuantity,battery_kwh:(ve.selectedBattery?.product?.capacity_kwh||0)*ve.batteryQuantity,allow_export:ve.allowExport,battery_soc_limit:ve.batterySocLimit,generator:{enabled:ve.systemType==="off-grid"&&!!P.generatorEnabled,kva:parseFloat(P.generatorKva||0),min_loading_pct:parseFloat(P.generatorMinLoading||25),can_charge_battery:!!P.generatorChargeBattery,diesel_price_r_per_liter:parseFloat(P.dieselPrice||23.5),min_run_time_hours:parseFloat(P.generatorMinRunTime||1),battery_start_soc:parseFloat(P.generatorBatteryStartSoc||20),battery_stop_soc:parseFloat(P.generatorBatteryStopSoc||100),service_cost:parseFloat(P.generatorServiceCost||1e3),service_interval_hours:parseFloat(P.generatorServiceInterval||1e3)}}};return Re.post(`${Ce}/api/simulate`,ye)}).then(ye=>{if(!ye.data||!ye.data.timestamps){R("Simulation failed: No data returned.","danger");return}i(ye.data);try{sessionStorage.setItem(`simulationData_${t}`,JSON.stringify(ye.data)),console.log("Cached simulation data:",t)}catch(Ee){console.error("Failed to cache simulation data:",Ee)}R("Standard system applied, saved, and simulated!","success")}).catch(ye=>{const Ee=ye.response?.data?.error||"Failed to save or simulate the system.";R(Ee,"danger")}).finally(()=>s(!1))},100)};v.useEffect(()=>{if(r?.timestamps?.length>0){const ee=new Date(r.timestamps[0]),De=new Date(ee);De.setHours(0,0,0,0);const be=new Date(r.timestamps[r.timestamps.length-1]),J=_a(be),ie=new Date(De.getTime()+8640*60*1e3),Be=ie>J?J:ie;c(De),f(_a(Be))}},[r]);const ae=v.useMemo(()=>{if(!o||!u)return 0;const ee=Math.round((u-o)/(1e3*60*60*24));return Math.max(1,ee)},[o,u]),te=v.useMemo(()=>{if(!r||!o||!u)return{labels:[],datasets:[]};const ee=r,De=ee.timestamps.findIndex(bt=>new Date(bt)>=o);let be=ee.timestamps.findIndex(bt=>new Date(bt)>u);if(be===-1&&(be=ee.timestamps.length),De===-1)return{labels:[],datasets:[]};const J=ee.timestamps.slice(De,be).map(bt=>new Date(bt)),ie=ae>120&&J.length>=3,Be=ee.demand.slice(De,be),$e=ee.import_from_grid.slice(De,be),Y=ee.export_to_grid.slice(De,be),pe=ee.battery_soc.slice(De,be),we=ee.generation.slice(De,be),ze=ee.potential_generation?ee.potential_generation.slice(De,be):[],ve=ee.generator_kw?ee.generator_kw.slice(De,be):[],Le=(bt,jt)=>{const ln=new Array(bt.length);for(let Ft=0;Ft<bt.length;Ft++){const Bn=bt[Ft]instanceof Date?bt[Ft].getTime():+bt[Ft],$s=jt?.[Ft],Qr=Number.isFinite($s)?$s:0;ln[Ft]={x:Bn,y:Qr}}return ln},ye=ie?[]:J,Ee=ie?Le(J,Be):Be,Q=ie?Le(J,$e):$e,he=ie?Le(J,Y):Y,qe=ie?Le(J,pe):pe,K=ie?Le(J,we):we,Qe=ie?Le(J,ze):ze,Je=ie?Le(J,ve):ve,rt=[{label:"Demand (kW)",data:Ee,borderColor:"#ff6384",backgroundColor:"#ff638420",tension:.3,pointRadius:0,borderWidth:2},{label:"Grid Import (kW)",data:Q,borderColor:"#cc65fe",backgroundColor:"#cc65fe20",tension:.3,pointRadius:0,borderWidth:1.5,borderDash:[5,5]},{label:"Battery SOC (%)",data:qe,yAxisID:"y1",borderColor:"#ffce56",backgroundColor:"#ffce5620",tension:.3,pointRadius:0,borderWidth:2},{label:"PV Generation (kW)",data:K,borderColor:"#36a2eb",backgroundColor:"#36a2eb20",tension:.3,pointRadius:0,borderWidth:2,fill:!0}];return m&&Qe.length>0&&rt.push({label:"PV Potential (kW)",data:Qe,borderColor:"#4bc0c0",backgroundColor:"#386f6f20",tension:.3,pointRadius:0,borderWidth:1,borderDash:[5,5],fill:!0}),m&&he.length>0&&P.allowExport&&rt.push({label:"Grid Export (kW)",data:he,borderColor:"#ff9f40",backgroundColor:"#ff9f4020",tension:.3,pointRadius:0,borderWidth:1.5}),P.systemType==="off-grid"&&Je.length>0&&rt.push({label:"Generator (kW)",data:Je,borderColor:"#33ff92ff",backgroundColor:"#33ff6320",tension:.3,pointRadius:0,borderWidth:2}),{labels:ye,datasets:rt}},[r,o,u,m,P.systemType,P.allowExport,ae]),X=v.useMemo(()=>{if(!r||!o||!u)return{labels:[],datasets:[]};const ee=r,De=ee.timestamps.findIndex(Le=>new Date(Le)>=o);let be=ee.timestamps.findIndex(Le=>new Date(Le)>u);if(be===-1&&(be=ee.timestamps.length),De===-1)return{labels:[],datasets:[]};ee.timestamps.slice(De,be).map(Le=>new Date(Le));let J=[],ie=[],Be=[],$e=[],Y=[],pe=[],we=[],ze=[];if(ae>90){console.log("Downsampling data for better performance - showing daily averages");const Le={};for(let Ee=De;Ee<be;Ee++){const he=new Date(ee.timestamps[Ee]).toISOString().split("T")[0];Le[he]||(Le[he]={count:0,demand:0,import:0,export:0,battery:0,genArr:[],potArr:[],generator:0,timestamp:new Date(he)}),Le[he].count++,Le[he].demand+=ee.demand[Ee]||0,Le[he].import+=ee.import_from_grid[Ee]||0,Le[he].export+=ee.export_to_grid[Ee]||0,Le[he].battery+=ee.battery_soc[Ee]||0,Le[he].genArr.push(ee.generation[Ee]||0),Le[he].potArr.push((ee.potential_generation?ee.potential_generation[Ee]:ee.generation[Ee])||0),Le[he].generator+=(ee.generator_kw?ee.generator_kw[Ee]:0)||0}Object.keys(Le).sort().forEach(Ee=>{const Q=Le[Ee];J.push(Q.timestamp),ie.push(Q.demand/Q.count),Be.push(Q.import/Q.count),we.push(Q.export/Q.count),$e.push(Q.battery/Q.count);const he=parseFloat(P.panelKw||0)||0,qe=he>0?.02*he:.05,K=Q.potArr.length?Math.max(...Q.potArr):0,Qe=Math.max(qe,.05*K);let Je=0,rt=0,bt=0;for(let jt=0;jt<Q.genArr.length;jt++){const ln=Q.genArr[jt]||0,Ft=Q.potArr[jt]||0;(Ft>Qe||ln>Qe)&&(Je+=ln,rt+=Ft,bt++)}Y.push(bt?Je/bt:0),pe.push(bt?rt/bt:0),ze.push(Q.generator/Q.count)})}else J=ee.timestamps.slice(De,be).map(Le=>new Date(Le)),ie=ee.demand.slice(De,be),Be=ee.import_from_grid.slice(De,be),we=ee.export_to_grid.slice(De,be),$e=ee.battery_soc.slice(De,be),Y=ee.generation.slice(De,be),pe=ee.potential_generation?ee.potential_generation.slice(De,be):[],ze=ee.generator_kw?ee.generator_kw.slice(De,be):[];const ve=[{label:"Demand (kW)",data:ie,borderColor:"#ff6384",backgroundColor:"#ff638420",tension:.3,pointRadius:0,borderWidth:2},{label:"Grid Import (kW)",data:Be,borderColor:"#cc65fe",backgroundColor:"#cc65fe20",tension:.3,pointRadius:0,borderWidth:1.5,borderDash:[5,5]},{label:"Battery SOC (%)",data:$e,borderColor:"#ffce56",backgroundColor:"#ffce5620",yAxisID:"y1",tension:.3,pointRadius:0,borderWidth:2}];return m?(ve.push({label:"PV Generation (kW)",data:Y,borderColor:"#36a2eb",backgroundColor:"#36a2eb20",tension:.3,pointRadius:0,borderWidth:2,fill:!0}),pe.length>0&&ve.push({label:"PV Potential (kW)",data:pe,borderColor:"#4bc0c0",backgroundColor:"#386f6f20",tension:.3,pointRadius:0,borderWidth:1,borderDash:[5,5],fill:!0}),we.length>0&&P.allowExport&&ve.push({label:"Grid Export (kW)",data:we,borderColor:"#ff9f40",backgroundColor:"#ff9f4020",tension:.3,pointRadius:0,borderWidth:1.5})):ve.push({label:"PV Generation (kW)",data:Y,borderColor:"#36a2eb",backgroundColor:"#36a2eb20",tension:.3,pointRadius:0,borderWidth:2,fill:!0}),P.systemType==="off-grid"&&ze.length>0&&ve.push({label:"Generator (kW)",data:ze,borderColor:"#33ff92ff",backgroundColor:"#33ff6320",tension:.3,pointRadius:0,borderWidth:2}),{labels:J,datasets:ve}},[r,o,u,m,P.systemType,P.allowExport,ae,P.panelKw]),de=v.useMemo(()=>{const ee=ae>120,De=Math.min(1200,Math.max(600,Math.round(ae*3))),be=Math.max(De*1.5,1e3);return{responsive:!0,maintainAspectRatio:!1,animation:{duration:ee?0:300},interaction:{mode:"index",intersect:!1},elements:{point:{radius:0,hitRadius:10},line:{borderWidth:2,tension:.3}},parsing:!ee,normalized:!0,plugins:{datalabels:{display:!1},decimation:ee?{enabled:!0,algorithm:"lttb",samples:De,threshold:be}:{enabled:!1}},scales:{x:{type:"time",time:{unit:ae>180?"month":ae>60?"week":"day",tooltipFormat:ae>60?"MMM dd":"MMM dd, HH:mm",displayFormats:{day:"MMM dd",week:"MMM dd",month:"MMM yyyy"}},ticks:{maxTicksLimit:15},min:o?new Date(o):void 0,max:u?_a(new Date(u)):void 0},y:{beginAtZero:!0,title:{display:!0,text:"Power (kW)"}},y1:{type:"linear",position:"right",beginAtZero:!0,max:100,title:{display:!0,text:"Battery SOC (%)"},grid:{drawOnChartArea:!1}}}}},[ae,o,u]),Ne=v.useMemo(()=>({responsive:!0,maintainAspectRatio:!1,animation:{duration:ae>90?0:300},interaction:{mode:"index",intersect:!1},elements:{point:{radius:0,hitRadius:10},line:{borderWidth:2,tension:.3}},parsing:!0,normalized:!0,plugins:{datalabels:{display:!1}},scales:{x:{type:"time",time:{unit:ae>90?"month":ae>30?"week":"day",tooltipFormat:ae>90?"MMM dd":"MMM dd, HH:mm",displayFormats:{day:"MMM dd",week:"MMM dd",month:"MMM yyyy"}},ticks:{maxTicksLimit:15},min:o?new Date(o):void 0,max:u?_a(new Date(u)):void 0},y:{beginAtZero:!0,title:{display:!0,text:"Power (kW)"}},y1:{type:"linear",display:!0,position:"right",beginAtZero:!0,max:100,title:{display:!0,text:"Battery SOC (%)"},grid:{drawOnChartArea:!1}}}}),[ae,o,u]),Ke=ee=>Re.put(`${Ce}/api/projects/${t}`,ee).then(()=>{R("System saved to project 👍","success")}).catch(De=>{const be=De.response?.data?.error||"Could not save the system.";R(be,"danger")}),[ce,xe]=v.useState(!1),[Te,Ie]=v.useState(!1),Ue=async()=>{try{gt(!1),Pe(null);const ee={system_type:P.systemType,panel_kw:parseFloat(P.panelKw),num_panels:parseInt(P.numPanels),surface_tilt:parseFloat(P.tilt),surface_azimuth:parseFloat(P.azimuth),allow_export:P.allowExport,panel_id:P.selectedPanel?.product?.id,inverter_kva:P.selectedInverter?{model:P.selectedInverter.product.model,capacity:P.selectedInverter.product.rating_kva,quantity:P.inverterQuantity}:null,battery_kwh:P.systemType!=="grid"&&P.selectedBattery?{model:P.selectedBattery.product.model,capacity:P.selectedBattery.product.capacity_kwh,quantity:P.batteryQuantity}:null,from_standard_template:!1,template_id:null,template_name:null};await Re.put(`${Ce}/api/projects/${t}`,ee),await Re.post(`${Ce}/api/projects/${t}/bom/clear-template-extras`),sessionStorage.removeItem(`standardTemplateModified_${t}`),sessionStorage.setItem(`systemDesignModified_${t}`,"true"),xe(!1),R("Stopped using template. Core components retained.","success")}catch(ee){console.error("Error stopping template usage:",ee),R("Failed to stop using template","danger"),xe(!1)}},Ze=async()=>{try{sessionStorage.removeItem(`systemDesignModified_${t}`),sessionStorage.removeItem(`standardTemplateModified_${t}`);const ee=await Re.get(`${Ce}/api/system_templates/${dt.id}`);le(ee.data),Ie(!1),R("Reset to original template components","success")}catch(ee){console.error("Error resetting to template:",ee),R("Failed to reset template","danger"),Ie(!1)}},[mt,gt]=v.useState(!1),[dt,Pe]=v.useState(null),[q,oe]=v.useState(!1),[Ae,He]=v.useState(null),We=()=>{s(!0),mt&&sessionStorage.setItem(`standardTemplateModified_${t}`,"true");const ee={system_type:P.systemType,panel_kw:parseFloat(P.panelKw),num_panels:parseInt(P.numPanels),surface_tilt:parseFloat(P.tilt),surface_azimuth:parseFloat(P.azimuth),allow_export:P.allowExport,panel_id:P.selectedPanel?.product?.id,inverter_kva:P.selectedInverter?{model:P.selectedInverter.product.model,capacity:P.selectedInverter.product.rating_kva,quantity:P.inverterQuantity}:null,battery_kwh:P.systemType!=="grid"&&P.selectedBattery?{model:P.selectedBattery.product.model,capacity:P.selectedBattery.product.capacity_kwh,quantity:P.batteryQuantity}:null,use_pvgis:C,generation_profile_name:E,battery_soc_limit:P.batterySocLimit,inverter_ids:P.selectedInverter?[P.selectedInverter.product.id]:[],battery_ids:P.systemType!=="grid"&&P.selectedBattery?[P.selectedBattery.product.id]:[],from_standard_template:mt,template_id:dt?.id,template_name:dt?.name};sessionStorage.setItem(`systemDesignModified_${t}`,"true"),Ke(ee).then(()=>{const De={project_id:t,use_pvgis:C,profile_name:E,system:{panel_kw:parseFloat(P.panelKw),panel_id:P.selectedPanel?.product.id,tilt:parseFloat(P.tilt),azimuth:parseFloat(P.azimuth),system_type:P.systemType,inverter_kva:(P.selectedInverter?.product.rating_kva||0)*P.inverterQuantity,battery_kwh:(P.selectedBattery?.product.capacity_kwh||0)*P.batteryQuantity,allow_export:P.allowExport,battery_soc_limit:P.batterySocLimit,generator:{enabled:P.systemType==="off-grid"&&!!P.generatorEnabled,kva:parseFloat(P.generatorKva||0),min_loading_pct:parseFloat(P.generatorMinLoading||25),can_charge_battery:!!P.generatorChargeBattery,diesel_price_r_per_liter:parseFloat(P.dieselPrice||23.5),min_run_time_hours:parseFloat(P.generatorMinRunTime||1),battery_start_soc:parseFloat(P.generatorBatteryStartSoc||20),battery_stop_soc:parseFloat(P.generatorBatteryStopSoc||100),service_cost:parseFloat(P.generatorServiceCost||1e3),service_interval_hours:parseFloat(P.generatorServiceInterval||1e3)}}};return Re.post(`${Ce}/api/simulate`,De)}).then(De=>{if(!De||!De.data||!De.data.timestamps){R("Simulation failed: No data returned.","danger");return}i(De.data);try{sessionStorage.setItem(`simulationData_${t}`,JSON.stringify(De.data)),console.log("Simulation Data: ",De.data),console.log("Cached simulation data:",t)}catch(be){console.error("Failed to cache simulation data:",be)}R("System saved and simulation complete!","success")}).catch(De=>{const be=De.response?.data?.error||"Failed to save system or run simulation.";R(be,"danger")}).finally(()=>s(!1))},Ve=v.useMemo(()=>{if(!r)return null;if(!o||!u)return r;const ee=new Date(o),De=_a(new Date(u));console.log("SystemDesign - Date Range:",{startDate:ee.toISOString(),endDate:De.toISOString(),includesFullDayEnd:!0});const be={timestamps:[],demand:[],generation:[],import_from_grid:[],export_to_grid:[],battery_soc:[],potential_generation:[],generator_kw:[],shortfall_kw:[]};return r.timestamps.forEach((J,ie)=>{const Be=new Date(J);Be>=ee&&Be<=De&&(be.timestamps.push(J),be.demand.push(r.demand[ie]),be.generation.push(r.generation[ie]),be.import_from_grid.push(r.import_from_grid[ie]),be.export_to_grid.push(r.export_to_grid[ie]),be.battery_soc.push(r.battery_soc[ie]),be.potential_generation.push(r.potential_generation[ie]),r.generator_kw&&be.generator_kw.push(r.generator_kw[ie]||0),r.shortfall_kw&&be.shortfall_kw.push(r.shortfall_kw[ie]||0))}),console.log("SystemDesign - Filtered Data:",{pointCount:be.timestamps.length,firstPoint:be.timestamps.length>0?{time:be.timestamps[0],demand:be.demand[0]}:null,lastPoint:be.timestamps.length>0?{time:be.timestamps[be.timestamps.length-1],demand:be.demand[be.demand.length-1]}:null}),be},[r,o,u]);return v.useEffect(()=>{if(!Ve||!Ve.timestamps||Ve.timestamps.length===0)return;const ee=.5,De=Ve.demand.reduce((ve,Le)=>ve+Le*ee,0),be=Ve.potential_generation.reduce((ve,Le)=>ve+Le*ee,0),J=Ve.generation.reduce((ve,Le)=>ve+Le*ee,0),ie=Ve.import_from_grid.reduce((ve,Le)=>ve+Le*ee,0),Be=Ve.export_to_grid.reduce((ve,Le)=>ve+Le*ee,0),$e=J-Be,Y=J>0?$e/be*100:0,pe=Ve.shortfall_kw.reduce((ve,Le)=>ve+Le*ee,0),we=Ve.generator_kw.reduce((ve,Le)=>ve+Le*ee,0);let ze=0;if(P.systemType==="off-grid"&&P.generatorEnabled){const ve=parseFloat(P.generatorKva||0),Le=parseFloat(P.dieselPrice||23.5),ye=parseFloat(P.generatorServiceCost||1e3),Ee=parseFloat(P.generatorServiceInterval||1e3);let Q=0,he=0;Ve.generator_kw.forEach(Qe=>{if(Qe>0&&ve>0){const Je=Qe/ve,rt=Sf(ve,Je);Q+=rt*ee,he+=ee}});const qe=Q*Le,K=he/Ee*ye;ze=qe+K}D({totalConsumption:De.toFixed(0),totalPVGeneration:be.toFixed(0),utilizedPVGeneration:$e.toFixed(0),gridImport:ie.toFixed(0),gridExport:Be.toFixed(0),pvUtilization:Y.toFixed(0),energyShortfall:pe.toFixed(0),generatorEnergy:we.toFixed(0),dieselCost:ze.toFixed(0)})},[Ve,P.systemType,P.generatorEnabled,P.generatorKva,P.dieselPrice,P.generatorServiceCost,P.generatorServiceInterval]),v.useEffect(()=>{if(!r||!r.timestamps||r.timestamps.length===0||!r.annual_metrics)return;const ee=r.annual_metrics,De=.5,be=r.demand.reduce((Be,$e)=>Be+$e*De,0),J=r.timestamps.length/48,ie=be/J;se({daytimeConsumption:ee.daytime_consumption_pct.toString(),consumptionFromPV:ee.consumption_from_pv_pct.toString(),pvUtilization:ee.pv_utilization_pct.toString(),potentialGenDaily:ee.potential_gen_daily_kwh.toFixed(2),utilizedGenDaily:ee.utilized_gen_daily_kwh.toFixed(2),throttlingLossesDaily:ee.throttling_losses_daily_kwh.toFixed(2),specificYieldWithThrottling:ee.specific_yield_incl_losses.toFixed(2),specificYieldExclThrottling:ee.specific_yield_excl_losses.toFixed(2),potentialGenAnnual:ee.potential_gen_annual_kwh.toString(),utilizedGenAnnual:ee.utilized_gen_annual_kwh.toString(),throttlingLossesAnnual:ee.throttling_losses_annual_kwh.toString(),batteryCyclesAnnual:ee.battery_cycles_annual.toString(),totalConsumptionAnnual:be.toFixed(0),avgDailyConsumption:ie.toString()})},[r]),a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"mb-4",children:a.jsx(me,{className:"shadow-sm border-0",children:a.jsxs(me.Body,{children:[a.jsx("h4",{className:"mb-3",children:"System Design Mode"}),a.jsxs("div",{className:"d-flex gap-3",children:[a.jsxs(Fe,{variant:L==="custom"?"primary":"outline-primary",onClick:()=>M("custom"),className:"flex-grow-1 py-2",children:[a.jsx("i",{className:"bi bi-tools me-2"}),"Custom Design"]}),a.jsxs(Fe,{variant:L==="standard"?"primary":"outline-primary",onClick:()=>M("standard"),className:"flex-grow-1 py-2",children:[a.jsx("i",{className:"bi bi-collection me-2"}),"Standard Design"]})]})]})})}),mt&&!q&&a.jsxs(kt,{variant:"success",className:"d-flex align-items-center mb-4",children:[a.jsxs("div",{className:"d-flex align-items-center flex-grow-1",children:[a.jsx("i",{className:"bi bi-collection-fill fs-4 me-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"fw-bold",children:"Standard Design Template"}),a.jsxs("div",{children:[`You're using "`,dt?.name,'" template as a starting point']})]})]}),a.jsxs("div",{children:[a.jsxs(Fe,{variant:"outline-success",size:"sm",className:"me-2",onClick:()=>Ie(!0),children:[a.jsx("i",{className:"bi bi-arrow-counterclockwise me-1"}),"Reset to Template"]}),a.jsxs(Fe,{variant:"outline-danger",size:"sm",onClick:()=>xe(!0),children:[a.jsx("i",{className:"bi bi-x-circle me-1"}),"Stop Using Template"]})]})]}),q&&a.jsxs(kt,{variant:"info",className:"d-flex align-items-center mb-4",children:[a.jsxs("div",{className:"d-flex align-items-center flex-grow-1",children:[a.jsx("i",{className:"bi bi-file-earmark-text-fill fs-4 me-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"fw-bold",children:"Loaded from Quote"}),a.jsxs("div",{children:['Components loaded from quote: "',Ae?.name,'"']})]})]}),a.jsx("div",{children:a.jsxs(Fe,{variant:"outline-info",size:"sm",onClick:()=>{oe(!1),He(null),sessionStorage.removeItem(`quoteComponents_${t}`)},className:"d-flex align-items-center",children:[a.jsx("i",{className:"bi bi-x-circle me-1"}),"Clear Quote Loading"]})})]}),L==="custom"?a.jsx(Hce,{projectId:t,design:P,onDesignChange:Z,products:b,usePvgis:C,setUsePvgis:k,profileName:E,setProfileName:N,showNotification:R}):a.jsx(Uce,{templates:T,loading:I,onSelectSystem:le}),a.jsx("div",{className:"row g-3 my-4",children:a.jsx("div",{className:"col-12 d-flex gap-2",children:a.jsxs(Fe,{variant:"primary",onClick:We,disabled:n,children:[n?a.jsx(Ot,{as:"span",animation:"border",size:"sm",className:"me-2"}):a.jsx("i",{className:"bi bi-play-fill me-2"}),n?"Simulating…":"Simulate"]})})}),r&&o&&a.jsxs("div",{className:"mt-5",children:[a.jsxs(me,{className:"shadow-sm my-4",children:[a.jsxs(me.Header,{as:"h5",className:"d-flex justify-content-between align-items-center flex-wrap",ref:e,children:[a.jsxs("span",{children:[a.jsx("i",{className:"bi bi-bar-chart-line-fill me-2"}),"Simulation Results"]}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsxs(Fe,{variant:m?"primary":"outline-secondary",size:"sm",className:"me-3",onClick:()=>h(!m),children:[a.jsx("i",{className:`bi ${m?"bi-eye-slash-fill":"bi-eye-fill"} me-2`}),m?"Hide Losses":"Show Losses"]}),a.jsxs(Fe,{variant:g?"primary":"outline-secondary",size:"sm",className:"me-3",onClick:()=>x(!g),children:[a.jsx("i",{className:`bi ${g?"bi-eye-slash-fill":"bi-eye-fill"} me-2`}),g?"Hide Averages (for full year)":"Show Averages (for full year)"]})]}),a.jsxs("div",{className:"date-picker-container",children:[a.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>{const ee=_a(new Date),De=j_(new Date);De.setDate(ee.getDate()-7),c(De),f(ee)},children:"Last 7 Days"}),a.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>{const ee=_a(new Date),De=j_(new Date);De.setDate(ee.getDate()-30),c(De),f(ee)},children:"Last 30 Days"}),a.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>{c(j_(new Date(2025,0,1))),f(_a(new Date(2025,11,31)))},children:"Full Year"}),a.jsx(Xl,{selected:o,onChange:ee=>{const[De,be]=ee;c(De),f(be?_a(new Date(be)):null),console.log("Date range set (datepicker): ",{startDate:De,endDate:be,endDateWithTime:be?_a(new Date(be)).toISOString():null})},startDate:o,endDate:u?new Date(u.getTime()):null,selectsRange:!0,isClearable:!1,dateFormat:"dd/MM/yyyy",className:"form-control form-control-sm shadow-sm",popperPlacement:"bottom-end",minDate:r?.timestamps&&new Date(r.timestamps[0]),maxDate:r?.timestamps&&new Date(r.timestamps[r.timestamps.length-1])})]})]}),a.jsx(me.Body,{style:{height:"400px"},children:a.jsx(Rs,{options:g?Ne:de,data:g?X:te})})]}),Number(ne.energyShortfall||0)>0&&a.jsxs(kt,{variant:"danger",className:"mb-3",children:[a.jsx("i",{className:"bi bi-exclamation-triangle-fill me-2"}),"This off-grid design has ",a.jsxs("b",{children:[ne.energyShortfall," kWh"]})," of energy shortfall. Consider adding PV/battery capacity."]}),a.jsxs(nt,{className:"mb-4 g-3 mt-4",children:[a.jsx(ge,{md:4,lg:!0,children:a.jsxs(me,{className:"border-start border-4 border-secondary bg-white shadow-sm rounded p-3 h-100",children:[a.jsx("div",{className:"text-muted small",children:"Total Energy Consumption"}),a.jsxs("div",{className:"fs-4 fw-bold",children:[ne.totalConsumption," kWh"]})]})}),a.jsx(ge,{md:4,lg:!0,children:a.jsxs(me,{className:"border-start border-4 border-primary bg-white shadow-sm rounded p-3 h-100",children:[a.jsx("div",{className:"text-muted small",children:"Total PV Generation"}),a.jsxs("div",{className:"fs-4 fw-bold",children:[ne.totalPVGeneration," kWh"]})]})}),a.jsx(ge,{md:4,lg:!0,children:a.jsxs(me,{className:"border-start border-4 border-success bg-white shadow-sm rounded p-3 h-100",children:[a.jsx("div",{className:"text-muted small",children:"PV Energy Utilized"}),a.jsxs("div",{className:"fs-4 fw-bold",children:[ne.utilizedPVGeneration," kWh"]})]})}),a.jsx(ge,{md:4,lg:!0,children:a.jsxs(me,{className:"border-start border-4 border-danger bg-white shadow-sm rounded p-3 h-100",children:[a.jsx("div",{className:"text-muted small",children:"Grid Import"}),a.jsxs("div",{className:"fs-4 fw-bold",children:[ne.gridImport," kWh"]})]})}),a.jsx(ge,{md:4,lg:!0,children:a.jsxs(me,{className:"border-start border-4 border-warning bg-white shadow-sm rounded p-3 h-100",children:[a.jsx("div",{className:"text-muted small",children:"Grid Export"}),a.jsxs("div",{className:"fs-4 fw-bold",children:[ne.gridExport," kWh"]})]})}),a.jsx(ge,{md:4,lg:!0,children:a.jsxs(me,{className:"border-start border-4 border-info bg-white shadow-sm rounded p-3 h-100",children:[a.jsx("div",{className:"text-muted small",children:"PV Utilization"}),a.jsxs("div",{className:"fs-4 fw-bold",children:[ne.pvUtilization,"%"]})]})})]}),r&&o&&P.systemType==="off-grid"&&a.jsxs(nt,{children:[a.jsx(ge,{md:4,lg:!0,children:a.jsxs(me,{className:"border-start border-4 border-danger bg-white shadow-sm rounded p-3 h-100",children:[a.jsx("div",{className:"text-muted small",children:"Energy Shortfall"}),a.jsxs("div",{className:"fs-6 fw-bold",children:[ne.energyShortfall||0," kWh"]})]})}),a.jsx(ge,{md:4,lg:!0,children:a.jsx(me,{className:"border-start border-4 border-success bg-white shadow-sm rounded p-3 h-100",children:a.jsxs(nt,{children:[a.jsxs(ge,{xs:6,children:[a.jsx("div",{className:"text-muted small",children:"Generator Energy"}),a.jsxs("div",{className:"fs-6 fw-bold mb-1",children:[ne.generatorEnergy||0," kWh"]})]}),a.jsxs(ge,{xs:6,children:[a.jsx("div",{className:"text-muted small",children:"Total Cost"}),a.jsxs("div",{className:"fs-6 fw-bold mb-1",children:["R ",(ne.dieselCost||0).toLocaleString()]})]})]})})})]}),r&&P.systemType==="off-grid"&&P.generatorEnabled&&(()=>{const De=r.generator_kw?.reduce((ve,Le)=>ve+Le*.5,0)||0,be=parseFloat(P.generatorKva||0),J=parseFloat(P.dieselPrice||23.5),ie=parseFloat(P.generatorServiceCost||1e3),Be=parseFloat(P.generatorServiceInterval||1e3);let $e=0,Y=0;r.generator_kw?.forEach(ve=>{if(ve>0&&be>0){const Le=ve/be,ye=Sf(be,Le);$e+=ye*.5,Y+=.5}});const pe=$e*J,we=Y/Be*ie,ze=pe+we;return a.jsxs(me,{className:"shadow-sm mt-3",children:[a.jsxs(me.Header,{as:"h5",children:[a.jsx("i",{className:"bi bi-fuel-pump me-2"}),"Generator Performance Analysis - ",P.generatorKva,"kW Generator"]}),a.jsxs(me.Body,{children:[a.jsxs(nt,{className:"mb-3",children:[a.jsxs(ge,{md:6,children:[a.jsx("div",{className:"text-muted small",children:"Annual Generator Energy"}),a.jsxs("div",{className:"fs-5 fw-bold text-primary",children:[Math.round(De)," kWh/year"]})]}),a.jsxs(ge,{md:6,children:[a.jsx("div",{className:"text-muted small",children:"Annual Total Cost"}),a.jsxs("div",{className:"fs-5 fw-bold text-primary",children:["R ",Math.round(ze).toLocaleString(),"/year"]})]})]}),a.jsx("h6",{className:"mt-4 mb-3",children:"Generator Efficiency by Load Factor"}),a.jsx("div",{className:"table-responsive",children:a.jsxs(vn,{size:"sm",striped:!0,hover:!0,children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Load %"}),a.jsx("th",{children:"Output (kW)"}),a.jsx("th",{children:"Fuel Rate (L/h)"}),a.jsx("th",{children:"Running Cost (R/h)"}),a.jsx("th",{children:"Total Cost (R/kWh)"})]})}),a.jsx("tbody",{children:[25,50,75,100].map(ve=>{const Le=parseFloat(P.generatorKva)||0,ye=parseFloat(P.dieselPrice)||23.5,Ee=parseFloat(P.generatorServiceCost)||1e3,Q=parseFloat(P.generatorServiceInterval)||1e3,he=Le*ve/100,qe=Sf(Le,ve/100),K=qe*ye,Qe=Ee/Q,Je=K+Qe,rt=he>0?Je/he:0;return a.jsxs("tr",{children:[a.jsxs("td",{children:[ve,"%"]}),a.jsxs("td",{children:[he.toFixed(1)," kW"]}),a.jsxs("td",{children:[qe.toFixed(2)," L/h"]}),a.jsxs("td",{children:["R ",Je.toFixed(2),"/h"]}),a.jsxs("td",{children:["R ",rt.toFixed(2),"/kWh"]})]},ve)})})]})}),a.jsx("h6",{className:"mt-4 mb-3",children:"Average Load Analysis"}),a.jsx("div",{className:"table-responsive",children:a.jsxs(vn,{size:"sm",striped:!0,hover:!0,className:"mb-0",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Metric"}),a.jsx("th",{children:"Value"})]})}),a.jsx("tbody",{children:(()=>{const ve=parseFloat(P.generatorKva)||0,Le=parseFloat(P.dieselPrice)||23.5,ye=parseFloat(P.generatorServiceCost)||1e3,Ee=parseFloat(P.generatorServiceInterval)||1e3,he=(r.generator_kw||[]).filter(lc=>lc>0),qe=he.length>0?he.reduce((lc,Ko)=>lc+Ko,0)/he.length:0,K=ve>0?qe/ve:0,Qe=Math.min(1,Math.max(.25,K)),Je=Sf(ve,Qe),rt=Je*Le,bt=ye/Ee,jt=Sf(ve,1),ln=ve>0?jt*Le/ve:0,Ft=qe>0?rt/qe:0,Bn=Ft<ln?ln:Ft,$s=rt+bt,Qr=qe>0?$s/qe:0,ha=ve>0?(jt*Le+bt)/ve:0,qx=Qr<ha?ha:Qr;return a.jsxs(a.Fragment,{children:[a.jsxs("tr",{children:[a.jsx("td",{children:"Average Generator Demand"}),a.jsxs("td",{children:[qe.toFixed(1)," kW"]})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Average Load Factor"}),a.jsxs("td",{children:[(K*100).toFixed(1),"%"]})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Fuel Rate at Average Load"}),a.jsxs("td",{children:[Je.toFixed(2)," L/h"]})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Cost per kWh (excl. service)"}),a.jsx("td",{children:a.jsxs("strong",{children:["R ",Bn.toFixed(2),"/kWh"]})})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Cost per kWh (incl. service)"}),a.jsx("td",{children:a.jsxs("strong",{children:["R ",qx.toFixed(2),"/kWh"]})})]})]})})()})]})})]})]})})(),a.jsxs(me,{className:"shadow-sm",children:[a.jsxs(me.Header,{as:"h5",children:[a.jsx("i",{className:"bi bi-table me-2"}),"Plant Output Specifications"]}),a.jsx(me.Body,{children:a.jsxs(vn,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"small",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Metric"}),a.jsx("th",{children:"Value"}),a.jsx("th",{children:"Units"})]})}),a.jsxs("tbody",{children:[a.jsxs("tr",{children:[a.jsx("td",{children:"Total Consumption"}),a.jsx("td",{children:B.totalConsumptionAnnual}),a.jsx("td",{children:"kWh"})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Daytime Consumption"}),a.jsx("td",{children:B.daytimeConsumption}),a.jsx("td",{children:"%"})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Overall Consumption from PV"}),a.jsx("td",{children:B.consumptionFromPV}),a.jsx("td",{children:"%"})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"PV Utilization"}),a.jsx("td",{children:B.pvUtilization}),a.jsx("td",{children:"%"})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Potential Generation (daily)"}),a.jsx("td",{children:B.potentialGenDaily}),a.jsx("td",{children:"kWh"})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Utilized Generation (daily)"}),a.jsx("td",{children:B.utilizedGenDaily}),a.jsx("td",{children:"kWh"})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Throttling Losses (daily)"}),a.jsx("td",{children:B.throttlingLossesDaily}),a.jsx("td",{children:"kWh"})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Specific Yield (incl. losses)"}),a.jsx("td",{children:B.specificYieldWithThrottling}),a.jsx("td",{children:"kWh/kWp/day"})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Potential Yield (excl. losses)"}),a.jsx("td",{children:B.specificYieldExclThrottling}),a.jsx("td",{children:"kWh/kWp/day"})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Potential Generation p.a."}),a.jsx("td",{children:B.potentialGenAnnual}),a.jsx("td",{children:"kWh"})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Utilized Generation p.a."}),a.jsx("td",{children:B.utilizedGenAnnual}),a.jsx("td",{children:"kWh"})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Throttling Losses p.a."}),a.jsx("td",{children:B.throttlingLossesAnnual}),a.jsx("td",{children:"kWh"})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Battery cycles in 1 year"}),a.jsx("td",{children:B.batteryCyclesAnnual}),a.jsx("td",{children:"cycles/y"})]})]})]})})]})]}),a.jsxs(wt,{show:ce,onHide:()=>xe(!1),centered:!0,children:[a.jsx(wt.Header,{closeButton:!0,className:"border-0 pb-0",children:a.jsx(wt.Title,{className:"d-flex align-items-center",children:"Stop Using Template"})}),a.jsx(wt.Body,{className:"pt-0",children:a.jsxs("div",{className:"mb-3",children:[a.jsxs("p",{className:"text-muted mb-3",children:['Are you sure you want to stop using the template "',a.jsx("strong",{children:dt?.name}),'"?']}),a.jsxs("div",{className:"bg-light rounded p-3",children:[a.jsxs("h6",{className:"text-success mb-2",children:[a.jsx("i",{className:"bi bi-check-circle me-1"}),"What will be kept:"]}),a.jsx("ul",{className:"list-unstyled mb-3 ps-3",children:a.jsxs("li",{children:[a.jsx("i",{className:"bi bi-dot text-success"}),"Panels, inverters, and batteries"]})}),a.jsxs("h6",{className:"text-danger mb-2",children:[a.jsx("i",{className:"bi bi-x-circle me-1"}),"What will be removed:"]}),a.jsx("ul",{className:"list-unstyled mb-0 ps-3",children:a.jsxs("li",{children:[a.jsx("i",{className:"bi bi-dot text-danger"}),"All other template components from BOM"]})})]})]})}),a.jsxs(wt.Footer,{className:"border-0 pt-0",children:[a.jsx(Fe,{variant:"outline-secondary",onClick:()=>xe(!1),children:"Cancel"}),a.jsxs(Fe,{variant:"danger",onClick:Ue,className:"d-flex align-items-center",children:[a.jsx("i",{className:"bi bi-x-circle me-1"}),"Stop Using Template"]})]})]}),a.jsxs(wt,{show:Te,onHide:()=>Ie(!1),centered:!0,children:[a.jsx(wt.Header,{closeButton:!0,className:"border-0 pb-0",children:a.jsxs(wt.Title,{className:"d-flex align-items-center",children:[a.jsx("i",{className:"bi bi-arrow-counterclockwise text-success me-2"}),"Reset to Template"]})}),a.jsx(wt.Body,{className:"pt-0",children:a.jsxs("div",{className:"mb-3",children:[a.jsxs("p",{className:"text-muted mb-3",children:["Are you sure you want to reset to the original template: ",a.jsx("strong",{children:dt?.name})]}),a.jsxs("div",{className:"bg-light rounded p-3",children:[a.jsxs("h6",{className:"text-warning mb-2",children:[a.jsx("i",{className:"bi bi-exclamation-triangle me-1"}),"This action will:"]}),a.jsxs("ul",{className:"list-unstyled mb-0 ps-3",children:[a.jsxs("li",{children:[a.jsx("i",{className:"bi bi-dot text-danger"}),"Discard all your custom changes"]}),a.jsxs("li",{children:[a.jsx("i",{className:"bi bi-dot text-success"}),"Reset BOM to original template"]})]})]})]})}),a.jsxs(wt.Footer,{className:"border-0 pt-0",children:[a.jsx(Fe,{variant:"outline-secondary",onClick:()=>Ie(!1),children:"Cancel"}),a.jsxs(Fe,{variant:"success",onClick:Ze,className:"d-flex align-items-center",children:[a.jsx("i",{className:"bi bi-arrow-counterclockwise me-1"}),"Reset to Template"]})]})]})]})}function Fi(t){return Array.isArray?Array.isArray(t):p5(t)==="[object Array]"}function Gce(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function Kce(t){return t==null?"":Gce(t)}function Ra(t){return typeof t=="string"}function h5(t){return typeof t=="number"}function Qce(t){return t===!0||t===!1||Xce(t)&&p5(t)=="[object Boolean]"}function m5(t){return typeof t=="object"}function Xce(t){return m5(t)&&t!==null}function gr(t){return t!=null}function S_(t){return!t.trim().length}function p5(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const Zce="Incorrect 'index' type",Jce=t=>`Invalid value for key ${t}`,eue=t=>`Pattern length exceeds max of ${t}.`,tue=t=>`Missing ${t} property in key`,nue=t=>`Property 'weight' in key '${t}' must be a positive integer`,X2=Object.prototype.hasOwnProperty;class sue{constructor(e){this._keys=[],this._keyMap={};let n=0;e.forEach(s=>{let r=g5(s);this._keys.push(r),this._keyMap[r.id]=r,n+=r.weight}),this._keys.forEach(s=>{s.weight/=n})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function g5(t){let e=null,n=null,s=null,r=1,i=null;if(Ra(t)||Fi(t))s=t,e=Z2(t),n=UA(t);else{if(!X2.call(t,"name"))throw new Error(tue("name"));const o=t.name;if(s=o,X2.call(t,"weight")&&(r=t.weight,r<=0))throw new Error(nue(o));e=Z2(o),n=UA(o),i=t.getFn}return{path:e,id:n,weight:r,src:s,getFn:i}}function Z2(t){return Fi(t)?t:t.split(".")}function UA(t){return Fi(t)?t.join("."):t}function rue(t,e){let n=[],s=!1;const r=(i,o,c)=>{if(gr(i))if(!o[c])n.push(i);else{let u=o[c];const f=i[u];if(!gr(f))return;if(c===o.length-1&&(Ra(f)||h5(f)||Qce(f)))n.push(Kce(f));else if(Fi(f)){s=!0;for(let m=0,h=f.length;m<h;m+=1)r(f[m],o,c+1)}else o.length&&r(f,o,c+1)}};return r(t,Ra(e)?e.split("."):e,0),s?n:n[0]}const aue={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},iue={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},oue={location:0,threshold:.6,distance:100},lue={useExtendedSearch:!1,getFn:rue,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var Nt={...iue,...aue,...oue,...lue};const cue=/[^ ]+/g;function uue(t=1,e=3){const n=new Map,s=Math.pow(10,e);return{get(r){const i=r.match(cue).length;if(n.has(i))return n.get(i);const o=1/Math.pow(i,.5*t),c=parseFloat(Math.round(o*s)/s);return n.set(i,c),c},clear(){n.clear()}}}class RS{constructor({getFn:e=Nt.getFn,fieldNormWeight:n=Nt.fieldNormWeight}={}){this.norm=uue(n,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((n,s)=>{this._keysMap[n.id]=s})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Ra(this.docs[0])?this.docs.forEach((e,n)=>{this._addString(e,n)}):this.docs.forEach((e,n)=>{this._addObject(e,n)}),this.norm.clear())}add(e){const n=this.size();Ra(e)?this._addString(e,n):this._addObject(e,n)}removeAt(e){this.records.splice(e,1);for(let n=e,s=this.size();n<s;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(e,n){return e[this._keysMap[n]]}size(){return this.records.length}_addString(e,n){if(!gr(e)||S_(e))return;let s={v:e,i:n,n:this.norm.get(e)};this.records.push(s)}_addObject(e,n){let s={i:n,$:{}};this.keys.forEach((r,i)=>{let o=r.getFn?r.getFn(e):this.getFn(e,r.path);if(gr(o)){if(Fi(o)){let c=[];const u=[{nestedArrIndex:-1,value:o}];for(;u.length;){const{nestedArrIndex:f,value:m}=u.pop();if(gr(m))if(Ra(m)&&!S_(m)){let h={v:m,i:f,n:this.norm.get(m)};c.push(h)}else Fi(m)&&m.forEach((h,g)=>{u.push({nestedArrIndex:g,value:h})})}s.$[i]=c}else if(Ra(o)&&!S_(o)){let c={v:o,n:this.norm.get(o)};s.$[i]=c}}}),this.records.push(s)}toJSON(){return{keys:this.keys,records:this.records}}}function y5(t,e,{getFn:n=Nt.getFn,fieldNormWeight:s=Nt.fieldNormWeight}={}){const r=new RS({getFn:n,fieldNormWeight:s});return r.setKeys(t.map(g5)),r.setSources(e),r.create(),r}function due(t,{getFn:e=Nt.getFn,fieldNormWeight:n=Nt.fieldNormWeight}={}){const{keys:s,records:r}=t,i=new RS({getFn:e,fieldNormWeight:n});return i.setKeys(s),i.setIndexRecords(r),i}function mg(t,{errors:e=0,currentLocation:n=0,expectedLocation:s=0,distance:r=Nt.distance,ignoreLocation:i=Nt.ignoreLocation}={}){const o=e/t.length;if(i)return o;const c=Math.abs(s-n);return r?o+c/r:c?1:o}function fue(t=[],e=Nt.minMatchCharLength){let n=[],s=-1,r=-1,i=0;for(let o=t.length;i<o;i+=1){let c=t[i];c&&s===-1?s=i:!c&&s!==-1&&(r=i-1,r-s+1>=e&&n.push([s,r]),s=-1)}return t[i-1]&&i-s>=e&&n.push([s,i-1]),n}const jl=32;function hue(t,e,n,{location:s=Nt.location,distance:r=Nt.distance,threshold:i=Nt.threshold,findAllMatches:o=Nt.findAllMatches,minMatchCharLength:c=Nt.minMatchCharLength,includeMatches:u=Nt.includeMatches,ignoreLocation:f=Nt.ignoreLocation}={}){if(e.length>jl)throw new Error(eue(jl));const m=e.length,h=t.length,g=Math.max(0,Math.min(s,h));let x=i,b=g;const A=c>1||u,_=A?Array(h):[];let j;for(;(j=t.indexOf(e,b))>-1;){let M=mg(e,{currentLocation:j,expectedLocation:g,distance:r,ignoreLocation:f});if(x=Math.min(M,x),b=j+m,A){let T=0;for(;T<m;)_[j+T]=1,T+=1}}b=-1;let C=[],k=1,E=m+h;const N=1<<m-1;for(let M=0;M<m;M+=1){let T=0,O=E;for(;T<O;)mg(e,{errors:M,currentLocation:g+O,expectedLocation:g,distance:r,ignoreLocation:f})<=x?T=O:E=O,O=Math.floor((E-T)/2+T);E=O;let I=Math.max(1,g-O+1),$=o?h:Math.min(g+O,h)+m,H=Array($+2);H[$+1]=(1<<M)-1;for(let G=$;G>=I;G-=1){let U=G-1,R=n[t.charAt(U)];if(A&&(_[U]=+!!R),H[G]=(H[G+1]<<1|1)&R,M&&(H[G]|=(C[G+1]|C[G])<<1|1|C[G+1]),H[G]&N&&(k=mg(e,{errors:M,currentLocation:U,expectedLocation:g,distance:r,ignoreLocation:f}),k<=x)){if(x=k,b=U,b<=g)break;I=Math.max(1,2*g-b)}}if(mg(e,{errors:M+1,currentLocation:g,expectedLocation:g,distance:r,ignoreLocation:f})>x)break;C=H}const L={isMatch:b>=0,score:Math.max(.001,k)};if(A){const M=fue(_,c);M.length?u&&(L.indices=M):L.isMatch=!1}return L}function mue(t){let e={};for(let n=0,s=t.length;n<s;n+=1){const r=t.charAt(n);e[r]=(e[r]||0)|1<<s-n-1}return e}const My=String.prototype.normalize?(t=>t.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,"")):(t=>t);class x5{constructor(e,{location:n=Nt.location,threshold:s=Nt.threshold,distance:r=Nt.distance,includeMatches:i=Nt.includeMatches,findAllMatches:o=Nt.findAllMatches,minMatchCharLength:c=Nt.minMatchCharLength,isCaseSensitive:u=Nt.isCaseSensitive,ignoreDiacritics:f=Nt.ignoreDiacritics,ignoreLocation:m=Nt.ignoreLocation}={}){if(this.options={location:n,threshold:s,distance:r,includeMatches:i,findAllMatches:o,minMatchCharLength:c,isCaseSensitive:u,ignoreDiacritics:f,ignoreLocation:m},e=u?e:e.toLowerCase(),e=f?My(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;const h=(x,b)=>{this.chunks.push({pattern:x,alphabet:mue(x),startIndex:b})},g=this.pattern.length;if(g>jl){let x=0;const b=g%jl,A=g-b;for(;x<A;)h(this.pattern.substr(x,jl),x),x+=jl;if(b){const _=g-jl;h(this.pattern.substr(_),_)}}else h(this.pattern,0)}searchIn(e){const{isCaseSensitive:n,ignoreDiacritics:s,includeMatches:r}=this.options;if(e=n?e:e.toLowerCase(),e=s?My(e):e,this.pattern===e){let A={isMatch:!0,score:0};return r&&(A.indices=[[0,e.length-1]]),A}const{location:i,distance:o,threshold:c,findAllMatches:u,minMatchCharLength:f,ignoreLocation:m}=this.options;let h=[],g=0,x=!1;this.chunks.forEach(({pattern:A,alphabet:_,startIndex:j})=>{const{isMatch:C,score:k,indices:E}=hue(e,A,_,{location:i+j,distance:o,threshold:c,findAllMatches:u,minMatchCharLength:f,includeMatches:r,ignoreLocation:m});C&&(x=!0),g+=k,C&&E&&(h=[...h,...E])});let b={isMatch:x,score:x?g/this.chunks.length:1};return x&&r&&(b.indices=h),b}}class Go{constructor(e){this.pattern=e}static isMultiMatch(e){return J2(e,this.multiRegex)}static isSingleMatch(e){return J2(e,this.singleRegex)}search(){}}function J2(t,e){const n=t.match(e);return n?n[1]:null}class pue extends Go{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const n=e===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class gue extends Go{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const s=e.indexOf(this.pattern)===-1;return{isMatch:s,score:s?0:1,indices:[0,e.length-1]}}}class yue extends Go{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const n=e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class xue extends Go{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const n=!e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class bue extends Go{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const n=e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class vue extends Go{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const n=!e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class b5 extends Go{constructor(e,{location:n=Nt.location,threshold:s=Nt.threshold,distance:r=Nt.distance,includeMatches:i=Nt.includeMatches,findAllMatches:o=Nt.findAllMatches,minMatchCharLength:c=Nt.minMatchCharLength,isCaseSensitive:u=Nt.isCaseSensitive,ignoreDiacritics:f=Nt.ignoreDiacritics,ignoreLocation:m=Nt.ignoreLocation}={}){super(e),this._bitapSearch=new x5(e,{location:n,threshold:s,distance:r,includeMatches:i,findAllMatches:o,minMatchCharLength:c,isCaseSensitive:u,ignoreDiacritics:f,ignoreLocation:m})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class v5 extends Go{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let n=0,s;const r=[],i=this.pattern.length;for(;(s=e.indexOf(this.pattern,n))>-1;)n=s+i,r.push([s,n-1]);const o=!!r.length;return{isMatch:o,score:o?0:1,indices:r}}}const WA=[pue,v5,yue,xue,vue,bue,gue,b5],eR=WA.length,_ue=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Aue="|";function wue(t,e={}){return t.split(Aue).map(n=>{let s=n.trim().split(_ue).filter(i=>i&&!!i.trim()),r=[];for(let i=0,o=s.length;i<o;i+=1){const c=s[i];let u=!1,f=-1;for(;!u&&++f<eR;){const m=WA[f];let h=m.isMultiMatch(c);h&&(r.push(new m(h,e)),u=!0)}if(!u)for(f=-1;++f<eR;){const m=WA[f];let h=m.isSingleMatch(c);if(h){r.push(new m(h,e));break}}}return r})}const jue=new Set([b5.type,v5.type]);class Sue{constructor(e,{isCaseSensitive:n=Nt.isCaseSensitive,ignoreDiacritics:s=Nt.ignoreDiacritics,includeMatches:r=Nt.includeMatches,minMatchCharLength:i=Nt.minMatchCharLength,ignoreLocation:o=Nt.ignoreLocation,findAllMatches:c=Nt.findAllMatches,location:u=Nt.location,threshold:f=Nt.threshold,distance:m=Nt.distance}={}){this.query=null,this.options={isCaseSensitive:n,ignoreDiacritics:s,includeMatches:r,minMatchCharLength:i,findAllMatches:c,ignoreLocation:o,location:u,threshold:f,distance:m},e=n?e:e.toLowerCase(),e=s?My(e):e,this.pattern=e,this.query=wue(this.pattern,this.options)}static condition(e,n){return n.useExtendedSearch}searchIn(e){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:s,isCaseSensitive:r,ignoreDiacritics:i}=this.options;e=r?e:e.toLowerCase(),e=i?My(e):e;let o=0,c=[],u=0;for(let f=0,m=n.length;f<m;f+=1){const h=n[f];c.length=0,o=0;for(let g=0,x=h.length;g<x;g+=1){const b=h[g],{isMatch:A,indices:_,score:j}=b.search(e);if(A){if(o+=1,u+=j,s){const C=b.constructor.type;jue.has(C)?c=[...c,..._]:c.push(_)}}else{u=0,o=0,c.length=0;break}}if(o){let g={isMatch:!0,score:u/o};return s&&(g.indices=c),g}}return{isMatch:!1,score:1}}}const YA=[];function Cue(...t){YA.push(...t)}function qA(t,e){for(let n=0,s=YA.length;n<s;n+=1){let r=YA[n];if(r.condition(t,e))return new r(t,e)}return new x5(t,e)}const Ry={AND:"$and",OR:"$or"},GA={PATH:"$path",PATTERN:"$val"},KA=t=>!!(t[Ry.AND]||t[Ry.OR]),Nue=t=>!!t[GA.PATH],kue=t=>!Fi(t)&&m5(t)&&!KA(t),tR=t=>({[Ry.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function _5(t,e,{auto:n=!0}={}){const s=r=>{let i=Object.keys(r);const o=Nue(r);if(!o&&i.length>1&&!KA(r))return s(tR(r));if(kue(r)){const u=o?r[GA.PATH]:i[0],f=o?r[GA.PATTERN]:r[u];if(!Ra(f))throw new Error(Jce(u));const m={keyId:UA(u),pattern:f};return n&&(m.searcher=qA(f,e)),m}let c={children:[],operator:i[0]};return i.forEach(u=>{const f=r[u];Fi(f)&&f.forEach(m=>{c.children.push(s(m))})}),c};return KA(t)||(t=tR(t)),s(t)}function Due(t,{ignoreFieldNorm:e=Nt.ignoreFieldNorm}){t.forEach(n=>{let s=1;n.matches.forEach(({key:r,norm:i,score:o})=>{const c=r?r.weight:null;s*=Math.pow(o===0&&c?Number.EPSILON:o,(c||1)*(e?1:i))}),n.score=s})}function Eue(t,e){const n=t.matches;e.matches=[],gr(n)&&n.forEach(s=>{if(!gr(s.indices)||!s.indices.length)return;const{indices:r,value:i}=s;let o={indices:r,value:i};s.key&&(o.key=s.key.src),s.idx>-1&&(o.refIndex=s.idx),e.matches.push(o)})}function Tue(t,e){e.score=t.score}function Mue(t,e,{includeMatches:n=Nt.includeMatches,includeScore:s=Nt.includeScore}={}){const r=[];return n&&r.push(Eue),s&&r.push(Tue),t.map(i=>{const{idx:o}=i,c={item:e[o],refIndex:o};return r.length&&r.forEach(u=>{u(i,c)}),c})}class Oa{constructor(e,n={},s){this.options={...Nt,...n},this.options.useExtendedSearch,this._keyStore=new sue(this.options.keys),this.setCollection(e,s)}setCollection(e,n){if(this._docs=e,n&&!(n instanceof RS))throw new Error(Zce);this._myIndex=n||y5(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){gr(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const n=[];for(let s=0,r=this._docs.length;s<r;s+=1){const i=this._docs[s];e(i,s)&&(this.removeAt(s),s-=1,r-=1,n.push(i))}return n}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:n=-1}={}){const{includeMatches:s,includeScore:r,shouldSort:i,sortFn:o,ignoreFieldNorm:c}=this.options;let u=Ra(e)?Ra(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return Due(u,{ignoreFieldNorm:c}),i&&u.sort(o),h5(n)&&n>-1&&(u=u.slice(0,n)),Mue(u,this._docs,{includeMatches:s,includeScore:r})}_searchStringList(e){const n=qA(e,this.options),{records:s}=this._myIndex,r=[];return s.forEach(({v:i,i:o,n:c})=>{if(!gr(i))return;const{isMatch:u,score:f,indices:m}=n.searchIn(i);u&&r.push({item:i,idx:o,matches:[{score:f,value:i,norm:c,indices:m}]})}),r}_searchLogical(e){const n=_5(e,this.options),s=(c,u,f)=>{if(!c.children){const{keyId:h,searcher:g}=c,x=this._findMatches({key:this._keyStore.get(h),value:this._myIndex.getValueForItemAtKeyId(u,h),searcher:g});return x&&x.length?[{idx:f,item:u,matches:x}]:[]}const m=[];for(let h=0,g=c.children.length;h<g;h+=1){const x=c.children[h],b=s(x,u,f);if(b.length)m.push(...b);else if(c.operator===Ry.AND)return[]}return m},r=this._myIndex.records,i={},o=[];return r.forEach(({$:c,i:u})=>{if(gr(c)){let f=s(n,c,u);f.length&&(i[u]||(i[u]={idx:u,item:c,matches:[]},o.push(i[u])),f.forEach(({matches:m})=>{i[u].matches.push(...m)}))}}),o}_searchObjectList(e){const n=qA(e,this.options),{keys:s,records:r}=this._myIndex,i=[];return r.forEach(({$:o,i:c})=>{if(!gr(o))return;let u=[];s.forEach((f,m)=>{u.push(...this._findMatches({key:f,value:o[m],searcher:n}))}),u.length&&i.push({idx:c,item:o,matches:u})}),i}_findMatches({key:e,value:n,searcher:s}){if(!gr(n))return[];let r=[];if(Fi(n))n.forEach(({v:i,i:o,n:c})=>{if(!gr(i))return;const{isMatch:u,score:f,indices:m}=s.searchIn(i);u&&r.push({score:f,key:e,value:i,idx:o,norm:c,indices:m})});else{const{v:i,n:o}=n,{isMatch:c,score:u,indices:f}=s.searchIn(i);c&&r.push({score:u,key:e,value:i,norm:o,indices:f})}return r}}Oa.version="7.1.0";Oa.createIndex=y5;Oa.parseIndex=due;Oa.config=Nt;Oa.parseQuery=_5;Cue(Sue);const yl={panel:{name:"Panel",icon:"bi-grid-3x3-gap-fill",color:"warning"},inverter:{name:"Inverter",icon:"bi-box-seam",color:"info"},battery:{name:"Battery",icon:"bi-battery-full",color:"success"},mppt:{name:"MPPT",icon:"bi-arrow-down-up",color:"info"},protection:{name:"Protection",icon:"bi-shield-slash-fill",color:"danger"},inverter_aux:{name:"Inverter Aux",icon:"bi-hdd-stack-fill",color:"secondary"},contactor:{name:"Contactor",icon:"bi-lightning-charge-fill",color:"danger"},enclosure:{name:"Enclosure",icon:"bi-box",color:"secondary"},change_over_switch:{name:"Change Over Switch",icon:"bi-toggle-on",color:"secondary"},db:{name:"DB",icon:"bi-hdd-network",color:"secondary"},cable:{name:"Cable",icon:"bi-lightning",color:"dark"},cable_management:{name:"Cable Management",icon:"bi-bezier2",color:"dark"},conductor:{name:"Conductor",icon:"bi-plug-fill",color:"dark"},mounting_system:{name:"Mounting System",icon:"bi-bricks",color:"secondary"},monitoring:{name:"Monitoring",icon:"bi-graph-up",color:"primary"},monitoring_control:{name:"Monitoring & Control Equipment",icon:"bi-display",color:"primary"},auxiliaries:{name:"Auxiliaries",icon:"bi-tools",color:"secondary"},solar_geyser:{name:"Solar Geyser",icon:"bi-water",color:"info"},lights:{name:"Lights",icon:"bi-lightbulb",color:"warning"},aux_generator:{name:"Aux Generator",icon:"bi-lightning-charge",color:"warning"},vsd:{name:"VSD",icon:"bi-speedometer2",color:"info"},professional_services:{name:"Professional Services",icon:"bi-person-badge",color:"primary"},transport_logistics:{name:"Transport & Logistics",icon:"bi-truck",color:"dark"},human_resources:{name:"Human Resources",icon:"bi-people",color:"primary"},hseq_compliance:{name:"HSEQ & Compliance",icon:"bi-check-circle",color:"success"},st:{name:"S&T",icon:"bi-clipboard-check",color:"secondary"},0:{name:"Uncategorized",icon:"bi-question-circle",color:"secondary"},other:{name:"Other",icon:"bi-box",color:"secondary"}},nR=["panel","inverter","battery"],C_=t=>(t||"").toString().toLowerCase().replace(/&/g," and ").replace(/[^\w\s]/g,"").trim().replace(/\s+/g,"_"),Aa=t=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR",minimumFractionDigits:2}).format(t||0).replace("R","R").replace(/,/g," "),Rue=t=>t===""||t==null?0:Number(t),QA=.25,Oue=t=>["panel","inverter","battery"].includes(t),XA=t=>Rue(t.unit_cost_at_time??t.product?.unit_cost),Pue=t=>{if(t.override_margin!=null&&t.override_margin!=="")return Number(t.override_margin);const e=Number(t.product?.margin);return Number.isFinite(e)&&e>=0?e<=1?e:e/100:QA},pg=t=>{const e=XA(t),n=Pue(t);return Number.isFinite(e)?e*(1+n):Number(t.product?.price||0)};function Lue({projectId:t,onNavigateToPrintBom:e,quoteContext:n}){const{showNotification:s}=Os(),[r,i]=v.useState(!0),[o,c]=v.useState([]),[u,f]=v.useState(null),[m,h]=v.useState([]),[g,x]=v.useState([]),[b,A]=v.useState(!1),[_,j]=v.useState(null),[C,k]=v.useState(""),[E,N]=v.useState("all"),[L,M]=v.useState(""),[T,O]=v.useState(!0),[I,$]=v.useState("hybrid");v.useRef({hasUnsavedChanges:!1,bom:[],lastSavedBom:[]}),v.useEffect(()=>{r===!1&&x(JSON.parse(JSON.stringify(m)))},[r]);const H=v.useMemo(()=>g.length!==m.length?!0:m.some((J,ie)=>{const Be=g[ie];return Be?J.product.id!==Be.product.id||J.quantity!==Be.quantity||J.override_margin!==Be.override_margin||J.unit_cost_at_time!==Be.unit_cost_at_time:!0}),[m,g]);v.useEffect(()=>{const J=ie=>{console.log("Tab change attempt intercepted in BillOfMaterials",ie.detail),console.log("Current unsaved state:",H),H?(ie.preventDefault(),console.log("Preventing default tab change due to unsaved changes"),j(ie.detail),A(!0),console.log("Showing unsaved changes modal")):(console.log("No unsaved changes, proceeding with tab change"),ie.detail.actuallyChangeTab(ie.detail.newTab))};return window.addEventListener("attempt-tab-change",J),()=>{window.removeEventListener("attempt-tab-change",J)}},[H]),console.log("hasUnsavedChanges:",H,"bom:",m.length,"lastSavedBom:",g.length);const V=async()=>{try{const ie=((await Re.get(`${Ce}/api/products`)).data||[]).map(Be=>({...Be,originalCategory:Be.category,category:C_(Be.category)}));c(ie),h(Be=>Be.map($e=>{const Y=ie.find(we=>we.id===$e.product.id);if(!Y)return $e;const pe=$e.unit_cost_at_time!=null?$e.unit_cost_at_time:null;return{...$e,product:Y,unit_cost_at_time:pe}}))}catch(J){console.error("softRefreshProducts failed",J)}};v.useEffect(()=>{if(t)try{localStorage.setItem(`bomFullSystemMode_project_${t}`,T)}catch{}},[T,t]);const G=J=>n?.docId?!0:T&&Oue(J);v.useEffect(()=>{let J=!0;return(async()=>{i(!0);try{const[ie,Be]=await Promise.all([Re.get(`${Ce}/api/products`),Re.get(`${Ce}/api/projects/${t}`)]),$e=(ie.data||[]).map(ve=>({...ve,originalCategory:ve.category,category:C_(ve.category)})),Y=Be.data;if(!J)return;c($e),f(Y);const pe=Y?.bom_modified===!0,we=!!(Y?.template_id||Y?.template_name||Y?.from_standard_template);let ze=[];if(pe)ze=((await Re.get(`${Ce}/api/projects/${t}/bom`)).data||[]).map(Le=>{const ye=$e.find(Ee=>Ee.id===Le.product_id);return ye?{product:ye,quantity:Number(Le.quantity)||1,override_margin:Le.override_margin??null,unit_cost_at_time:Le.unit_cost_at_time??null}:null}).filter(Boolean),ze=R(ze,Y,$e);else if(we){let ve=null;if(Y.template_id)try{ve=(await Re.get(`${Ce}/api/system_templates/${Y.template_id}`)).data}catch{}if(!ve&&Y.template_name)try{const ye=((await Re.get(`${Ce}/api/system_templates`)).data||[]).find(Ee=>(Ee.name||"").toLowerCase().trim()===Y.template_name?.toLowerCase().trim());ye&&(ve=(await Re.get(`${Ce}/api/system_templates/${ye.id}`)).data)}catch{}ze=P(ve,$e),ze=R(ze,Y,$e)}else ze=R([],Y,$e);if(!J)return;h(ze)}catch(ie){console.error(ie),s("Failed to load Bill of Materials","danger")}finally{J&&i(!1)}})(),()=>{J=!1}},[t,s,n?.docId]);const U=async()=>{try{const ie=(await Re.get(`${Ce}/api/projects/${t}`)).data;f(ie);let Be=o;(!Array.isArray(Be)||!Be.length)&&(Be=((await Re.get(`${Ce}/api/products`)).data||[]).map(Y=>({...Y,originalCategory:Y.category,category:C_(Y.category)})),c(Be)),h($e=>{let Y=$e.filter(pe=>!["panel","inverter","battery"].includes(pe.product?.category));if(ie?.panel_id){const pe=Be.find(we=>we.id===ie.panel_id);if(pe){const we=$e.find(ve=>ve.product?.id===pe.id),ze=Number(ie.num_panels)||1;Y.push({product:pe,quantity:ze,override_margin:we?.override_margin??null,unit_cost_at_time:we?.unit_cost_at_time??null})}}if(Array.isArray(ie?.inverter_ids)&&ie.inverter_ids.length){const pe=Number(ie?.inverter_kva?.quantity)||1;ie.inverter_ids.forEach((we,ze)=>{const ve=Be.find(Le=>Le.id===we);if(ve){const Le=$e.find(ye=>ye.product?.id===we);Y.push({product:ve,quantity:ze===0?pe:1,override_margin:Le?.override_margin??null,unit_cost_at_time:Le?.unit_cost_at_time??null})}})}if(Array.isArray(ie?.battery_ids)&&ie.battery_ids.length){const pe=Number(ie?.battery_kwh?.quantity)||1;ie.battery_ids.forEach((we,ze)=>{const ve=Be.find(Le=>Le.id===we);if(ve){const Le=$e.find(ye=>ye.product?.id===we);Y.push({product:ve,quantity:ze===0?pe:1,override_margin:Le?.override_margin??null,unit_cost_at_time:Le?.unit_cost_at_time??null})}})}return Y})}catch(J){console.error("softRefreshProject failed",J)}};v.useEffect(()=>{const J=()=>U(),ie=()=>V();return window.addEventListener("refresh-project",J),window.addEventListener("refresh-products",ie),()=>{window.removeEventListener("refresh-project",J),window.removeEventListener("refresh-products",ie)}},[t,o]);const R=(J,ie,Be)=>{let $e=[...J];if(ie?.panel_id){const Y=Be.find(pe=>pe.id===ie.panel_id);if(Y){const pe=$e.find(ze=>ze.product?.id===Y.id)?.override_margin??null;$e=$e.filter(ze=>ze.product?.category!=="panel");const we=Number(ie.num_panels)||1;$e.push({product:Y,quantity:we,override_margin:pe,unit_cost_at_time:$e.find(ze=>ze.product?.id===Y.id)?.unit_cost_at_time??null})}}if(Array.isArray(ie?.inverter_ids)&&ie.inverter_ids.length){const Y=Number(ie?.inverter_kva?.quantity)||1,pe=$e.filter(we=>we.product?.category==="inverter");$e=$e.filter(we=>we.product?.category!=="inverter"),ie.inverter_ids.forEach((we,ze)=>{const ve=Be.find(Le=>Le.id===we);if(ve){const Le=pe.find(ye=>ye.product?.id===we)?.override_margin??null;$e.push({product:ve,quantity:ze===0?Y:1,override_margin:Le,unit_cost_at_time:pe.find(ye=>ye.product?.id===we)?.unit_cost_at_time??null})}})}if(Array.isArray(ie?.battery_ids)&&ie.battery_ids.length){const Y=Number(ie?.battery_kwh?.quantity)||1,pe=$e.filter(we=>we.product?.category==="battery");$e=$e.filter(we=>we.product?.category!=="battery"),ie.battery_ids.forEach((we,ze)=>{const ve=Be.find(Le=>Le.id===we);if(ve){const Le=pe.find(ye=>ye.product?.id===we)?.override_margin??null;$e.push({product:ve,quantity:ze===0?Y:1,override_margin:Le,unit_cost_at_time:pe.find(ye=>ye.product?.id===we)?.unit_cost_at_time??null})}})}return $e},P=(J,ie)=>J?(J.components||[]).map(Be=>{const $e=ie.find(Y=>Y.id===Be.product_id);return $e?{product:$e,quantity:Number(Be.quantity)||1,override_margin:null,unit_cost_at_time:null}:null}).filter(Boolean):[],Z=J=>{const ie=m.find($e=>$e.product.id===J.id);if(ie)return D(J.id,Number(ie.quantity||1)+1);const Be=[...m,{product:J,quantity:1,override_margin:null,unit_cost_at_time:null}];h(Be)},ne=J=>{const ie=m.find(Be=>Be.product.id===J);if(ie&&G(ie.product.category))return s("Core components are managed in System Design","warning");h(m.filter(Be=>Be.product.id!==J))},D=(J,ie)=>{const Be=m.find(Y=>Y.product.id===J);if(Be&&G(Be.product.category))return s("Core quantities are managed in System Design","warning");const $e=Math.max(1,parseInt(ie||1,10));h(m.map(Y=>Y.product.id===J?{...Y,quantity:$e}:Y))},B=(J,ie)=>{const Be=ie===""?"":Math.max(0,Number(ie)||0);h(m.map($e=>$e.product.id===J?{...$e,override_margin:Be===""?"":Be/100}:$e))},se=J=>{h(m.map(ie=>ie.product.id===J?{...ie,override_margin:ie.override_margin===""||ie.override_margin==null?null:Math.max(0,Number(ie.override_margin))}:ie))},le=(J,ie)=>{gt(Be=>({...Be,[J]:ie}))},ae=J=>{const ie=mt[J],Be=m.map($e=>$e.product.id===J?{...$e,unit_cost_at_time:ie===""||ie==null?null:Math.max(0,Number(ie)),price_at_time:$e.price_at_time}:$e);h(Be),gt($e=>{const Y={...$e};return delete Y[J],Y})},te=async()=>{try{const J=m.map($e=>mt[$e.product.id]!==void 0?{...$e,unit_cost_at_time:mt[$e.product.id]===""||mt[$e.product.id]==null?null:Math.max(0,Number(mt[$e.product.id]))}:$e);Object.keys(mt).length&&h(J);const ie=J.map($e=>({product_id:$e.product.id,quantity:Math.max(1,Number($e.quantity)||1),override_margin:$e.override_margin??null,unit_cost_at_time:$e.unit_cost_at_time??null}));await Re.post(`${Ce}/api/projects/${t}/bom`,{project_id:t,components:ie}),await Re.put(`${Ce}/api/projects/${t}`,{project_value_excl_vat:Ae.subtotal});const Be=JSON.parse(JSON.stringify(J));return x(Be),s("BOM saved","success"),!0}catch(J){return console.error(J),s("Failed to save BOM","danger"),!1}},[X,de]=v.useState(!1),[Ne,Ke]=v.useState(!1),[ce,xe]=v.useState(""),[Te,Ie]=v.useState(""),[Ue,Ze]=v.useState(!1),[mt,gt]=v.useState({}),dt=async()=>{if(!m.length)return s("Add items to the BOM first","warning");de(!0);try{await te();const ie=(await Re.post(`${Ce}/api/projects/${t}/quotes`,{tz:"Africa/Johannesburg"})).data?.document?.id;s("Quote created","success"),ie&&(window.location.href=`/projects/${t}/quotes/${ie}`)}catch(J){console.error(J),s("Failed to create quote","danger")}finally{de(!1)}},Pe=async()=>{if(!ce.trim())return s("Give the template a name","warning");Ze(!0);try{const J={name:ce.trim(),description:Te.trim(),components:m.map(ie=>({product_id:ie.product.id,quantity:Math.max(1,Number(ie.quantity)||1)}))};await Re.post(`${Ce}/api/system_templates`,J),Ke(!1),xe(""),Ie(""),$("hybrid"),s("Template saved","success")}catch(J){console.error(J),s("Failed to save template","danger")}finally{Ze(!1)}},q=()=>{let J="hybrid";u?.system_type?J=u.system_type:m.some(ie=>ie.product?.category==="battery")?J="hybrid":J="grid",$(J),Ke(!0)},oe=v.useMemo(()=>{let J=0,ie=0,Be=0;return(Array.isArray(m)?m:[]).forEach(Y=>{const pe=Y.product.category;pe==="panel"&&Y.product.power_w?J+=(Number(Y.product.power_w)||0)*(Number(Y.quantity)||0):pe==="inverter"&&Y.product.rating_kva?ie+=(Number(Y.product.rating_kva)||0)*(Number(Y.quantity)||0):pe==="battery"&&Y.product.capacity_kwh&&(Be+=(Number(Y.product.capacity_kwh)||0)*(Number(Y.quantity)||0))}),{panelKw:(J/1e3).toFixed(2),inverterKva:ie.toFixed(2),batteryKwh:Be.toFixed(2)}},[m]),Ae=v.useMemo(()=>{const J=m.reduce((we,ze)=>we+pg(ze)*(Number(ze.quantity)||0),0),ie=15,Be=J*ie/100,$e=J+Be,Y=m.reduce((we,ze)=>we+XA(ze)*(Number(ze.quantity)||0),0),pe=J-Y;return{subtotal:J,total_cost:Y,vat_perc:ie,vat_price:Be,total:$e,total_markup:pe}},[m]),He=v.useMemo(()=>m?.length?new Oa(m,{includeScore:!0,threshold:.45,ignoreLocation:!0,useExtendedSearch:!0,keys:[{name:"product.brand",weight:2},{name:"product.model",weight:2},{name:"product.brand_name",weight:1.5},{name:"product.description",weight:1},{name:"product.notes",weight:.5},{name:"product.originalCategory",weight:.5},{name:"product.category",weight:.5},{name:"product.component_type",weight:.5},{name:"product.power_w",weight:.3},{name:"product.rating_kva",weight:.3},{name:"product.capacity_kwh",weight:.3}].filter(Boolean)}):null,[m]),We=v.useMemo(()=>{const J=L.trim();if(!J)return m;const ie=J.split(/\s+/).filter(Boolean);let Be=[];if(He&&ie.length)try{let $e=m;for(const Y of ie){const pe=Y.length<=2?`=${Y}`:Y;if($e=new Oa($e,He.options).search(pe).map(ve=>ve.item),!$e.length)break}Be=$e,Be.length||(Be=He.search(J).map(pe=>pe.item))}catch{const Y=J.toLowerCase();Be=m.filter(pe=>`${pe.product.brand} ${pe.product.model} ${pe.product.description||""}`.toLowerCase().includes(Y))}return Be.length?Be:m},[m,L,He]),Ve=v.useMemo(()=>{const J={};return We.forEach(ie=>{const Be=ie.product.category||"other";J[Be]||(J[Be]=[]),J[Be].push(ie)}),J},[We]),ee=v.useMemo(()=>Object.keys(Ve).sort((ie,Be)=>{const $e=nR.indexOf(ie),Y=nR.indexOf(Be);if($e!==-1&&Y!==-1)return $e-Y;if($e!==-1)return-1;if(Y!==-1)return 1;const pe=yl[ie]?.name||ie,we=yl[Be]?.name||Be;return pe.localeCompare(we)}),[Ve]),De=v.useMemo(()=>o?.length?new Oa(o,{includeScore:!0,threshold:.45,ignoreLocation:!0,useExtendedSearch:!0,keys:[{name:"brand",weight:2},{name:"model",weight:2},{name:"brand_name",weight:1.5},{name:"description",weight:1},{name:"notes",weight:.5},{name:"originalCategory",weight:.5},{name:"category",weight:.5},{name:"component_type",weight:.5},{name:"power_w",weight:.3},{name:"rating_kva",weight:.3},{name:"capacity_kwh",weight:.3},"properties.manufacturer","properties.series","properties.type","properties.variant"].filter(Boolean)}):null,[o]),be=v.useMemo(()=>{let J=o;E!=="all"&&(J=J.filter(Y=>Y.category===E));const ie=C.trim();if(!ie)return J;const Be=ie.split(/\s+/).filter(Boolean);let $e=[];if(De&&Be.length)try{let Y=J;for(const pe of Be){const we=pe.length<=2?`=${pe}`:pe;if(Y=new Oa(Y,De.options).search(we).map(Le=>Le.item),!Y.length)break}$e=Y,$e.length||($e=De.search(ie).map(we=>we.item))}catch{const pe=ie.toLowerCase();$e=J.filter(we=>`${we.brand} ${we.model} ${we.description||""}`.toLowerCase().includes(pe))}return $e.length?$e:J},[o,E,C,De]);return r?a.jsxs("div",{className:"text-center py-5",children:[a.jsx(Ot,{animation:"border"}),a.jsx("div",{className:"mt-2",children:"Loading bill of materials…"})]}):a.jsxs("div",{children:[a.jsxs(rr,{fluid:!0,children:[a.jsx(nt,{className:"mb-3",children:a.jsx(ge,{children:a.jsxs("div",{className:"bom-toolbar-wrapper d-flex flex-column flex-xl-row gap-3 align-items-stretch align-items-xl-center justify-content-between",children:[a.jsxs("div",{className:"bom-heading flex-grow-1",children:[a.jsxs("h4",{className:"mb-1 d-flex align-items-center fw-semibold",children:[a.jsx("i",{className:"bi bi-basket3 me-2 text-primary"}),"Bill of Materials"]}),a.jsxs("div",{className:"small text-muted d-flex flex-wrap align-items-center gap-2",children:[a.jsxs("span",{children:["Project: ",a.jsx("strong",{children:u?.name})]}),u?.template_id||u?.template_name?a.jsxs(tt,{bg:"secondary",className:"rounded-pill px-2 py-1",children:["Standard: ",u?.template_name||"Template"]}):null]})]}),a.jsxs("div",{className:"bom-toolbar d-flex flex-wrap align-items-center gap-2",children:[a.jsx("div",{className:"mode-switch card shadow-sm border-0 px-3 py-2 d-flex align-items-center",children:a.jsx(z.Check,{type:"switch",id:"bom-mode-switch",label:G("panel")?"Input from System Design":"Single Quote",checked:T,onChange:()=>O(J=>!J),disabled:!!n?.docId})}),a.jsxs(Fe,{variant:"success",className:"bom-btn shadow-sm",onClick:te,children:[a.jsx("i",{className:"bi bi-check2-circle me-1"})," Save BOM"]}),a.jsxs(Fe,{variant:"outline-secondary",className:"bom-btn shadow-sm",onClick:q,disabled:!m.length||Ue,children:[a.jsx("i",{className:"bi bi-save me-1"})," Save Template"]}),!n?.docId&&a.jsxs(Fe,{variant:"primary",className:"bom-btn shadow-sm bom-generate-btn",onClick:dt,disabled:!m.length||X,children:[a.jsx("i",{className:"bi bi-file-earmark-plus me-1"})," ",X?"Generating…":"Generate Quote"]})]})]})})}),n?.docId&&a.jsx(nt,{children:a.jsx(ge,{children:a.jsx(kt,{variant:"info",className:"d-flex justify-content-between align-items-center",children:a.jsxs("div",{children:["Editing ",a.jsx("b",{children:n.number||`quote #${n.docId}`}),". Core components are locked."]})})})}),a.jsxs(nt,{children:[a.jsx(ge,{lg:6,children:a.jsx("div",{style:{position:"sticky",top:"max(20px, calc(50vh - 40vh))",zIndex:1e3,maxHeight:"95vh",overflow:"visible"},children:a.jsxs(me,{className:"shadow-sm mb-4",children:[a.jsxs(me.Header,{as:"h5",className:"py-2",children:[a.jsx("i",{className:"bi bi-list-ul me-2"})," Add Components"]}),a.jsxs(me.Body,{className:"p-2",children:[a.jsxs(nt,{className:"mb-2",children:[a.jsx(ge,{md:6,children:a.jsxs(hn,{size:"sm",children:[a.jsx(hn.Text,{className:"py-0",children:a.jsx("i",{className:"bi bi-search"})}),a.jsx(z.Control,{size:"sm",placeholder:"Search products…",value:C,onChange:J=>k(J.target.value)})]})}),a.jsx(ge,{md:6,children:a.jsxs(z.Select,{size:"sm",value:E,onChange:J=>N(J.target.value),children:[a.jsx("option",{value:"all",children:"All categories"}),Object.keys(yl).map(J=>a.jsx("option",{value:J,children:yl[J].name},J))]})})]}),a.jsx("div",{className:"table-responsive",style:{maxHeight:400,overflowY:"auto"},children:a.jsxs(vn,{hover:!0,size:"sm",className:"align-middle small",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Product"}),a.jsx("th",{children:"Updated"}),a.jsx("th",{children:"Specs"}),a.jsx("th",{className:"text-end",children:"Price"}),a.jsx("th",{className:"text-center",style:{width:100},children:"Add"})]})}),a.jsxs("tbody",{children:[be.map(J=>{const ie=m.find($e=>$e.product.id===J.id),Be=J.category==="panel"&&J.power_w&&a.jsxs(tt,{bg:"warning",text:"dark",className:"small",children:[Number(J.power_w).toFixed(0),"W"]})||J.category==="inverter"&&J.rating_kva&&a.jsxs(tt,{bg:"info",className:"small",children:[J.rating_kva,"kVA"]})||J.category==="battery"&&J.capacity_kwh&&a.jsxs(tt,{bg:"success",className:"small",children:[J.capacity_kwh,"kWh"]})||null;return a.jsxs("tr",{children:[a.jsxs("td",{children:[a.jsxs("div",{className:"fw-medium small",children:[J.brand," ",J.model]}),a.jsx("div",{className:"text-muted",style:{fontSize:"0.75rem"},children:yl[J.category]?.name||J.originalCategory||J.category})]}),a.jsx("td",{children:a.jsxs("div",{className:"d-flex flex-column",children:[a.jsx("small",{className:"text-muted",children:J.updated_at?new Date(J.updated_at).toLocaleDateString("en-GB"):"—"}),J.updated_by&&a.jsx("small",{className:"text-muted",style:{fontSize:"0.6rem"},children:J.updated_by})]})}),a.jsx("td",{children:Be}),a.jsx("td",{className:"text-end small",children:Aa(pg({product:J}))}),a.jsx("td",{className:"text-center",children:ie?a.jsxs(aa,{size:"sm",children:[a.jsx(Fe,{variant:"outline-secondary",size:"sm",className:"py-0 px-1",onClick:()=>D(J.id,Math.max(1,Number(ie.quantity)-1)),disabled:G(J.category),children:"-"}),a.jsx(Fe,{variant:"outline-secondary",size:"sm",className:"py-0 px-1",disabled:!0,children:Number(ie.quantity)||1}),a.jsx(Fe,{variant:"outline-secondary",size:"sm",className:"py-0 px-1",onClick:()=>D(J.id,Number(ie.quantity)+1),disabled:G(J.category),children:"+"})]}):a.jsxs(Fe,{variant:"outline-primary",size:"sm",className:"py-0",onClick:()=>Z(J),children:[a.jsx("i",{className:"bi bi-plus-lg"})," Add"]})})]},J.id)}),be.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:"4",className:"text-center text-muted",children:"No products match your search."})})]})]})})]})]})})}),a.jsxs(ge,{lg:6,children:[a.jsxs(me,{className:"shadow-sm mb-4",children:[a.jsxs(me.Header,{as:"h5",className:"d-flex justify-content-between align-items-center",children:[a.jsxs("div",{children:[a.jsx("i",{className:"bi bi-clipboard-check me-2"})," Your BOM (",We.length," of ",m.length," items)"]}),m.length>0&&a.jsx("div",{style:{width:"200px"},children:a.jsxs(hn,{size:"sm",children:[a.jsx(hn.Text,{className:"py-0",children:a.jsx("i",{className:"bi bi-search"})}),a.jsx(z.Control,{size:"sm",placeholder:"Search BOM...",value:L,onChange:J=>M(J.target.value)})]})})]}),a.jsx(me.Body,{children:m.length?We.length?a.jsx("div",{className:"table-responsive",children:a.jsxs(vn,{hover:!0,size:"sm",className:"align-middle",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Product"}),a.jsx("th",{className:"text-end",style:{width:90},children:"Unit Cost"}),a.jsx("th",{style:{width:100},children:"Margin"}),a.jsx("th",{style:{width:90},children:"Qty"}),a.jsx("th",{className:"text-end",style:{width:100},children:"Total"}),a.jsx("th",{style:{width:40}})]})}),a.jsxs("tbody",{children:[ee.map(J=>a.jsxs(fe.Fragment,{children:[a.jsxs("tr",{className:"table-light",children:[a.jsx("td",{colSpan:4,className:"py-1",children:a.jsxs("div",{className:"fw-semibold",children:[a.jsx("i",{className:`bi ${yl[J]?.icon||"bi-box"} me-1`}),yl[J]?.name||Ve[J][0]?.product?.originalCategory||J]})}),a.jsx("td",{className:"py-1 text-end fw-semibold",children:Aa(Ve[J].reduce((ie,Be)=>ie+pg(Be)*(Number(Be.quantity)||0),0))}),a.jsx("td",{})]}),Ve[J].map(ie=>{const Be=pg(ie),$e=XA(ie),Y=Be*(Number(ie.quantity)||0),pe=ie.override_margin==null||ie.override_margin===""?Math.round(((Number(ie.product?.margin)||QA)<=1?Number(ie.product?.margin)||QA:Number(ie.product?.margin)/100)*100):Math.round(Number(ie.override_margin)*100);return a.jsxs("tr",{children:[a.jsx("td",{children:a.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[a.jsxs("div",{className:"small fw-small",children:[ie.product.brand," ",ie.product.model]}),G(ie.product.category)&&a.jsx(tt,{bg:"info",className:"ms-2",title:"Core component - quantities managed in System Design",children:a.jsx("i",{className:"bi bi-gear-fill",style:{fontSize:"0.75em"}})})]})}),a.jsx("td",{className:"text-end small",children:T?Aa($e):a.jsx(z.Control,{type:"number",min:"0",step:"0.01",style:{minWidth:90,maxWidth:110,fontSize:"0.85rem"},className:"py-0 text-end",value:mt[ie.product.id]??ie.unit_cost_at_time??ie.product.unit_cost??0,onChange:we=>le(ie.product.id,we.target.value),onBlur:()=>ae(ie.product.id)})}),a.jsx("td",{children:a.jsxs(hn,{size:"sm",children:[a.jsx(hn.Text,{className:"py-0 px-1",children:"%"}),a.jsx(z.Control,{type:"number",min:"0",step:"1",value:ie.override_margin===""?"":pe,onChange:we=>B(ie.product.id,we.target.value),onBlur:()=>se(ie.product.id),className:"py-0"})]})}),a.jsx("td",{children:a.jsx(hn,{size:"sm",children:a.jsx(z.Control,{type:"number",min:"1",value:ie.quantity,onChange:we=>D(ie.product.id,we.target.value),className:"py-0",disabled:G(ie.product.category)})})}),a.jsx("td",{className:"text-end small",children:Aa(Y)}),a.jsx("td",{className:"text-end",children:a.jsx(Fe,{variant:"outline-danger",size:"sm",className:"py-0 px-1",onClick:()=>ne(ie.product.id),disabled:G(ie.product.category),children:a.jsx("i",{className:"bi bi-trash"})})})]},ie.product.id)})]},J)),a.jsxs("tr",{className:"border-top border-dark",children:[a.jsxs("td",{className:"fw-semibold",style:{whiteSpace:"nowrap"},children:["Cost: ",Aa(Ae.total_cost)]}),a.jsx("td",{colSpan:3,className:"text-end fw-semibold",style:{whiteSpace:"nowrap"},children:"Subtotal (excl. VAT):"}),a.jsx("td",{className:"text-end fw-semibold",style:{whiteSpace:"nowrap"},children:Aa(Ae.subtotal)}),a.jsx("td",{})]}),a.jsxs("tr",{children:[a.jsx("td",{}),a.jsxs("td",{colSpan:3,className:"text-end fw-semibold",style:{whiteSpace:"nowrap"},children:[Ae.vat_perc,"% VAT:"]}),a.jsx("td",{className:"text-end fw-semibold",style:{whiteSpace:"nowrap"},children:Aa(Ae.vat_price)}),a.jsx("td",{})]}),a.jsxs("tr",{className:"border-top border-dark",children:[a.jsxs("td",{className:"fw-semibold",style:{whiteSpace:"nowrap"},children:["Markup: ",Aa(Ae.total_markup)]}),a.jsx("td",{colSpan:3,className:"text-end fw-bold",style:{whiteSpace:"nowrap"},children:"Total (incl. VAT):"}),a.jsx("td",{className:"text-end fw-bold",style:{whiteSpace:"nowrap"},children:Aa(Ae.total)}),a.jsx("td",{})]})]})]})}):a.jsxs("div",{className:"text-muted text-center py-3",children:[a.jsx("i",{className:"bi bi-search me-2"}),'No items match your search "',L,'".']}):a.jsx("div",{className:"text-muted",children:"Add components on the left to build your BOM."})})]}),a.jsxs(me,{className:"shadow-sm",children:[a.jsxs(me.Header,{as:"h5",children:[a.jsx("i",{className:"bi bi-info-circle me-2"}),"System Specifications"]}),a.jsx(me.Body,{children:a.jsxs(nt,{children:[a.jsxs(ge,{sm:3,className:"mb-3 text-center",children:[a.jsx("div",{className:"small text-muted",children:"PV Size"}),a.jsxs("div",{className:"fs-6 fw-bold text-warning",children:[oe.panelKw," ",a.jsx("small",{children:"kWp"})]})]}),a.jsxs(ge,{sm:3,className:"mb-3 text-center",children:[a.jsx("div",{className:"small text-muted",children:"Inverter"}),a.jsxs("div",{className:"fs-6 fw-bold text-info",children:[oe.inverterKva," ",a.jsx("small",{children:"kVA"})]})]}),a.jsxs(ge,{sm:3,className:"mb-3 text-center",children:[a.jsx("div",{className:"small text-muted",children:"Battery"}),a.jsxs("div",{className:"fs-6 fw-bold text-success",children:[oe.batteryKwh," ",a.jsx("small",{children:"kWh"})]})]}),a.jsxs(ge,{sm:3,className:"mb-3 text-center",children:[a.jsx("div",{className:"small text-muted",children:"Cost per kWp"}),a.jsxs("div",{className:"fs-6 fw-bold text-success",children:[oe.panelKw>0?Aa(Ae.subtotal/oe.panelKw):10,a.jsx("small",{children:"/kWp"})]})]})]})})]})]})]})]}),a.jsxs(wt,{show:Ne,onHide:()=>Ke(!1),children:[a.jsx(wt.Header,{closeButton:!0,children:a.jsx(wt.Title,{children:"Save as System Template"})}),a.jsxs(wt.Body,{children:[a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{children:"Template Name"}),a.jsx(z.Control,{type:"text",value:ce,onChange:J=>xe(J.target.value),placeholder:"e.g., 30kWp Victron 40kWh"})]}),a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{children:"System Type"}),a.jsxs(z.Select,{value:I,onChange:J=>$(J.target.value),children:[a.jsx("option",{value:"hybrid",children:"Hybrid"}),a.jsx("option",{value:"grid",children:"Grid-Tied"}),a.jsx("option",{value:"off-grid",children:"Off-Grid"})]})]}),a.jsxs(z.Group,{children:[a.jsx(z.Label,{children:"Description"}),a.jsx(z.Control,{as:"textarea",rows:3,value:Te,onChange:J=>Ie(J.target.value),placeholder:"Describe this system template…"})]})]}),a.jsxs(wt.Footer,{children:[a.jsx(Fe,{variant:"secondary",onClick:()=>Ke(!1),disabled:Ue,children:"Cancel"}),a.jsx(Fe,{variant:"primary",onClick:Pe,disabled:Ue||!ce.trim(),children:Ue?a.jsxs(a.Fragment,{children:[a.jsx(Ot,{as:"span",animation:"border",size:"sm",className:"me-2"}),"Saving…"]}):"Save Template"})]})]}),a.jsxs(wt,{show:b,onHide:()=>A(!1),backdrop:"static",centered:!0,children:[a.jsx(wt.Header,{closeButton:!0,children:a.jsx(wt.Title,{children:"Unsaved Changes"})}),a.jsx(wt.Body,{children:"You have unsaved changes in your Bill of Materials. Would you like to save before leaving this page?"}),a.jsxs(wt.Footer,{children:[a.jsx(Fe,{variant:"secondary",onClick:()=>{console.log("Discarding changes and navigating to",_?.newTab),A(!1),_&&_.actuallyChangeTab(_.newTab)},children:"Discard Changes"}),a.jsx(Fe,{variant:"primary",onClick:async()=>{console.log("Saving changes before navigation");const J=await te();console.log("Save result:",J),A(!1),J&&_&&(console.log("Navigating after save to",_.newTab),_.actuallyChangeTab(_.newTab))},children:"Save and Continue"})]})]})]})}const Fue="/assets/orka_logo_text-BQg-Xxqf.png";function Hg({projectId:t}){const e=ms(),{user:n}=is(),{projectId:s,docId:r}=Vi(),[i]=DO(),o=t||s,c=i.get("action")==="download",u=!!r,[f,m]=v.useState(null),[h,g]=v.useState(!1),[x,b]=v.useState(!1),{showNotification:A}=Os(),[_,j]=v.useState(null),[C,k]=v.useState(!1),E=u?`quoteData_${r}`:`printBomData_${o}`,[N,L]=v.useState({}),M=ye=>{const Ee=Number(ye);return Number.isInteger(Ee)?Ee.toString():Ee.toFixed(2)};v.useEffect(()=>{const ye=localStorage.getItem(E);if(ye)try{const Ee=JSON.parse(ye);if(!u&&Ee.categories&&(!Ee.project?.inverter_brand_model||!Ee.project?.battery_brand_model)){let Q=Ee.project?.inverter_brand_model||"",he=Ee.project?.battery_brand_model||"";Ee.categories.forEach(qe=>{const K=qe.name?.toLowerCase()||"";if(K==="inverter"&&qe.items&&qe.items.length>0&&!Q){const Qe=qe.items[0];if(Qe.product?.brand){const Je=Qe.product.brand,rt=Qe.product?.rating_kva?`${Number(Qe.product.rating_kva).toFixed(0)}kVA`:Qe.product?.power_w?`${Number(Qe.product.power_w/1e3).toFixed(0)}kW`:"";Q=rt?`${Je} ${rt}`:Je}}else if(K==="battery"&&qe.items&&qe.items.length>0&&!he){const Qe=qe.items[0];if(Qe.product?.brand){const Je=Qe.product.brand,rt=Qe.product?.capacity_kwh?`${(Number(Qe.product.capacity_kwh)/.8).toFixed(0)}kWh`:"";he=rt?`${Je} ${rt}`:Je}}}),Ee.project&&(Ee.project.inverter_brand_model=Q,Ee.project.battery_brand_model=he),localStorage.setItem(E,JSON.stringify(Ee))}L(Ee)}catch(Ee){console.error("Failed to parse stored data:",Ee),L({})}},[E,u]);const T=new Date().toLocaleDateString("en-ZA");v.useEffect(()=>{if(c){const ye=setTimeout(()=>{window.print()},1e3);return()=>clearTimeout(ye)}},[c]),v.useEffect(()=>{(async()=>{if(o){k(!0);try{const Q=(await Re.get(`${Ce}/api/projects/${o}`)).data;console.log("Fetched project data:",Q);const he=Q.inverter_ids||[];if(he.length>0){const K=he[0],Je=(await Re.get(`${Ce}/api/products/${K}`)).data;if(console.log("Fetched inverter data:",Je),Je){const rt=Je.brand||"",bt=Q.inverter_kva.quantity||1,jt=Je.rating_kva?`${M(Number(Je.rating_kva)*bt)}kVA`:"";console.log("Inverter brand and capacity:",rt,jt),Q.inverter_brand_model=jt?`${rt} ${jt}`:rt}}const qe=Q.battery_ids||[];if(qe.length>0){const K=qe[0],Je=(await Re.get(`${Ce}/api/products/${K}`)).data;if(console.log("Fetched battery data:",Je),Je){const rt=Je.brand||"",bt=Q.battery_kwh.quantity||1,jt=Je.nominal_rating_kwh?`${M(Number(Je.nominal_rating_kwh)*bt)}kWh`:"";console.log("Battery brand and capacity:",rt,jt),console.log("Battery quantity from project data:",bt),Q.battery_brand_model=jt?`${rt} ${jt}`:rt}}j(Q)}catch(Ee){console.error("Failed to load project data:",Ee),A("Failed to load project data","danger")}finally{k(!1)}}})()},[o,A]),v.useEffect(()=>{u&&r&&(async()=>{g(!0);try{const Q=(await Re.get(`${Ce}/api/quotes/${r}`)).data,he=Q.versions[Q.versions.length-1],K=(await Re.get(`${Ce}/api/quote-versions/${he.id}`)).data;m({quote:Q,version:K});const Qe={};K.lines.forEach(jt=>{const ln=jt.category||jt.product_snapshot?.category||"Other";Qe[ln]||(Qe[ln]={name:ln,items:[]}),Qe[ln].items.push({product:{brand:jt.brand||"",model:jt.model||""},quantity:jt.qty||0,cost:jt.unit_cost_locked||0,price:jt.unit_price_locked||0,lineTotal:jt.line_total_locked||0})});let Je="",rt="";K.lines.forEach(jt=>{const ln=(jt.category||jt.product_snapshot?.category||"").toLowerCase(),Ft=jt.brand||jt.product_snapshot?.brand||"",Bn=jt.product_snapshot?.power_w,$s=jt.product_snapshot?.rating_kva,Qr=jt.product_snapshot?.capacity_kwh;if(ln==="inverter"&&Ft){const ha=$s?`${Number($s).toFixed(0)}kVA`:Bn?`${Number(Bn/1e3).toFixed(0)}kW`:"";Je=ha?`${Ft} ${ha}`:Ft}else if(ln==="battery"&&Ft){const ha=Qr?`${(Number(Qr)/.8).toFixed(0)}kWh`:"";rt=ha?`${Ft} ${ha}`:Ft}});const bt={project:{id:parseInt(o),project_name:_?.name||`Quote ${Q.number}`,name:_?.name||`Quote ${Q.number}`,client_name:_?.client_name||Q.client_snapshot_json?.name||"Client Name",client_email:_?.client_email||Q.client_snapshot_json?.email||"",client_phone:_?.client_phone||Q.client_snapshot_json?.phone||"",location:_?.location||Q.client_snapshot_json?.location||"",created_at:K.created_at,quote_number:Q.number,quote_status:Q.status||"draft",inverter_brand_model:Je,battery_brand_model:rt},systemSpecs:K.payload||{},totals:{subtotal_excl_vat:K.totals?.subtotal_items_excl_vat||0,extras_excl_vat:K.totals?.extras_excl_vat||0,total_excl_vat:K.totals?.total_excl_vat||0,vat_perc:K.totals?.vat_perc||15,vat_price:K.totals?.vat_price||0,total_incl_vat:K.totals?.total_incl_vat||0},categories:Object.values(Qe)};localStorage.setItem(E,JSON.stringify(bt)),L(bt)}catch(Ee){console.error("Failed to load quote data:",Ee),A("Failed to load quote data","danger")}finally{g(!1)}})()},[u,r,o,E,A]);const O=async()=>{if(window.confirm("Send this quote to the client?")){b(!0);try{await Re.post(`${Ce}/api/quotes/${r}/send`),A("Quote sent successfully!","success");const Ee=(await Re.get(`${Ce}/api/quotes/${r}`)).data;console.log("Updated quote status:",Ee.status);const Q=Ee.versions[Ee.versions.length-1],qe=(await Re.get(`${Ce}/api/quote-versions/${Q.id}`)).data;m({quote:Ee,version:qe}),setTimeout(()=>window.print(),500)}catch(ye){console.error(ye),A(ye.response?.data?.error||"Failed to send quote","danger")}finally{b(!1)}}},I=async()=>{if(window.confirm("Mark this quote as accepted?")){b(!0);try{await Re.post(`${Ce}/api/quotes/${r}/accept`),A("Quote accepted!","success");const Ee=(await Re.get(`${Ce}/api/quotes/${r}`)).data,Q=Ee.versions[Ee.versions.length-1],qe=(await Re.get(`${Ce}/api/quote-versions/${Q.id}`)).data;m({quote:Ee,version:qe})}catch(ye){console.error(ye),A(ye.response?.data?.error||"Failed to accept quote","danger")}finally{b(!1)}}},$=async()=>{if(window.confirm("Mark this quote as declined?")){b(!0);try{await Re.post(`${Ce}/api/quotes/${r}/decline`),A("Quote declined","info");const Ee=(await Re.get(`${Ce}/api/quotes/${r}`)).data,Q=Ee.versions[Ee.versions.length-1],qe=(await Re.get(`${Ce}/api/quote-versions/${Q.id}`)).data;m({quote:Ee,version:qe})}catch(ye){console.error(ye),A(ye.response?.data?.error||"Failed to decline quote","danger")}finally{b(!1)}}},H=()=>{if(t)return;const ye=i.get("from");e(ye==="quotes"?`/projects/${o}?tab=quotes`:ye==="bom"?`/projects/${o}?tab=bom`:`/projects/${o}?tab=${u?"quotes":"bom"}`)},V=async()=>{if(f)try{const ye=f.version.id,Ee=await Re.post(`${Ce}/api/quote-versions/${ye}/load-to-bom`);A("Quote loaded to BOM for editing","success"),Ee.data.core_components&&sessionStorage.setItem(`quoteLoadCoreComponents_${o}`,JSON.stringify(Ee.data.core_components)),e(`/projects/${o}?tab=bom`)}catch(ye){console.error(ye),A("Failed to load quote to BOM","danger")}},[G,U]=v.useState(()=>localStorage.getItem("bomPriceMode")||"all");v.useEffect(()=>localStorage.setItem("bomPriceMode",G),[G]);const R=v.useMemo(()=>{const ye={};return(N.categories||[]).forEach(Ee=>{ye[Ee.name]=(Ee.items||[]).reduce((Q,he)=>Q+(he.price||0)*(he.quantity||0),0)}),ye},[N]),[P,Z]=v.useState(()=>{const ye=localStorage.getItem(`bomTermsPerc_${o}`);return ye?JSON.parse(ye):[65,25,10]});v.useEffect(()=>{localStorage.setItem(`bomTermsPerc_${o}`,JSON.stringify(P))},[P,o]);const ne=(ye,Ee)=>{const Q=Math.max(0,Math.min(100,parseFloat(Ee)||0));Z(he=>he.map((qe,K)=>K===ye?Q:qe))},D=v.useMemo(()=>P.reduce((ye,Ee)=>ye+(+Ee||0),0),[P]),B=ye=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR",minimumFractionDigits:2,maximumFractionDigits:2}).format(ye||0).replace("R","R ").replace(/,/g," "),se=37.79527559,le=29.7,ae=7.3,te=.7,X=0,de=1.25,Ne=.75,Ke=.75,ce=.02,xe=.4,Te=(le-ae-te-X)*se,Ie=(Ne+ce)*se,Ue=(Ke+ce)*se,Ze=(de+ce)*se,gt=(8+ce)*se,dt=xe*se,Pe=3,q=6.4,oe=4.2,Ae=.3,He=(Pe+ce)*se,We=(q+ce)*se,Ve=(oe+ce)*se,ee=Ae*se,De=v.useMemo(()=>{const ye=[];if(Array.isArray(N.categories)){const Ee=["panel","inverter","battery"];[...N.categories].sort((he,qe)=>{const K=(he.name||"").toLowerCase(),Qe=(qe.name||"").toLowerCase(),Je=Ee.indexOf(K),rt=Ee.indexOf(Qe);return Je!==-1&&rt!==-1?Je-rt:Je!==-1?-1:rt!==-1?1:K.localeCompare(Qe)}).forEach(he=>{ye.push({type:"category",name:he.name}),(he.items||[]).forEach(qe=>{ye.push({type:"item",item:qe})})})}return ye},[N]),be=v.useMemo(()=>{const ye=[];let Ee=[],Q=Te-Ze;const he=()=>{Ee.length&&(ye.push(Ee),Ee=[],Q=Te-Ze)};return De.forEach(qe=>{const K=qe.type==="category"?Ue:Ie;K>Q&&he(),Ee.push(qe),Q-=K}),Ee.length&&ye.push(Ee),ye},[De,Te,Ze,Ie,Ue]),J=v.useMemo(()=>{if(!be.length)return 0;const Ee=be[be.length-1].reduce((Q,he)=>Q+(he.type==="category"?Ue:Ie),0);return Te-(Ze+Ee)},[be,Te,Ze,Ie,Ue]),ie=v.useMemo(()=>{const ye=[{key:"totals",h:He},{key:"termsDeposit",h:We},{key:"bankingAccept",h:Ve}],Ee=[],Q=[];let he=J;for(const qe of ye){const K=qe.h+(Ee.length?ee:0);K+dt<=he?(Ee.push(qe.key),he-=K):Q.push(qe.key)}return{inlineKeys:Ee,carryKeys:Q}},[J,He,We,Ve,ee,dt]),Be=v.useMemo(()=>{if(!ie.carryKeys.length)return[];const ye={totals:He,termsDeposit:We,bankingAccept:Ve},Ee=[];let Q=[],he=Te;for(const qe of ie.carryKeys){const K=ye[qe]+(Q.length?ee:0);K>he&&(Ee.push(Q),Q=[],he=Te),Q.push(qe),he-=K}return Q.length&&Ee.push(Q),Ee},[ie,Te,He,We,Ve,ee]);v.useMemo(()=>{if(!be.length)return!0;const Ee=be[be.length-1].reduce((qe,K)=>qe+(K.type==="category"?Ue:Ie),0),Q=Ze+Ee;return Te-Q<gt},[be,Te,Ze,Ie,Ue,gt]);const $e=v.useMemo(()=>{const ye=be.map(Q=>({kind:"rows",rows:Q}));return Be.map(Q=>Q.filter(he=>he==="bankingAccept"||he==="totals"||he==="termsDeposit")).filter(Q=>Q.length).forEach(Q=>ye.push({kind:"totals",blocks:Q})),ye},[be,Be]);$e.length;const Y=()=>a.jsxs("header",{className:"bom-header",children:[a.jsxs("div",{className:"bom-header-top",children:[a.jsx("img",{className:"bom-logo",src:Fue,alt:"Orka Solar Logo"}),a.jsxs("div",{className:"bom-company-meta",children:[a.jsx("div",{children:"Orka Solar (Pty) Ltd"}),a.jsx("div",{children:"Reg No: 2017/141572/07"}),a.jsx("div",{children:"VAT No: 463 028 1337"}),a.jsx("div",{children:"T: 082 660 0851  E: info@orkasolar.co.za  W: www.orkasolar.co.za"})]})]}),a.jsx("div",{className:"bom-title",children:u?"Quotation":"Bill of Materials"}),a.jsxs("div",{className:"bom-info-grid",children:[a.jsxs("div",{children:[a.jsx("span",{className:"label",children:"For attention:"})," ",_?.client_name||N.project?.client_name||"Client Name"]}),a.jsxs("div",{children:[a.jsx("span",{className:"label",children:"Date:"})," ",T]}),a.jsxs("div",{children:[a.jsx("span",{className:"label",children:"Company:"})," ",_?.company||_?.client_name||"Company Name"]}),a.jsxs("div",{children:[a.jsx("span",{className:"label",children:"Quote number:"})," ",u?N.project?.quote_number||"QTE000000":`QTE${(_?.id||N.project?.id||"").toString().padStart(8,"0")}`]}),a.jsxs("div",{children:[a.jsx("span",{className:"label",children:"Address:"})," ",_?.location||N.project?.location||"Address"]}),a.jsxs("div",{children:[a.jsx("span",{className:"label",children:"Contact Person:"})," ",n?.first_name||"Lourens"," ",n?.last_name||"de Jongh"]}),a.jsxs("div",{children:[a.jsx("span",{className:"label",children:"Email:"})," ",_?.client_email||N.project?.client_email||"-"]}),a.jsxs("div",{children:[a.jsx("span",{className:"label",children:"Email:"})," ",n?.email||"lourens@orkasolar.co.za"]}),a.jsxs("div",{children:[a.jsx("span",{className:"label",children:"Tel:"})," ",_?.client_phone||N.project?.client_phone||"-"]}),a.jsxs("div",{children:[a.jsx("span",{className:"label",children:"Tel:"})," ",n?.phone||"082 660 0851"]}),a.jsx("div",{})]}),a.jsx("div",{className:"bom-project-strip",children:(()=>{const ye=_?.name||N.project?.name||N.project?.project_name||"Project Name",Ee=_?.inverter_brand_model,Q=_?.battery_brand_model;let he="";return Ee&&Q?he=` - ${Ee} & ${Q}`:Ee?he=` - ${Ee}`:Q&&(he=` - ${Q}`),`${ye}${he}`})()})]}),pe=()=>a.jsx("thead",{children:a.jsxs("tr",{className:"bom-thead-row",children:[a.jsx("th",{className:"bom-thead-cell bom-col-desc",children:"Item Description"}),a.jsx("th",{className:"bom-thead-cell bom-col-units",children:"Units"}),G==="all"&&a.jsx("th",{className:"bom-thead-cell bom-col-unitprice",children:"Price per Unit"}),G!=="qty"&&a.jsx("th",{className:"bom-thead-cell bom-col-total",children:"Total"})]})}),we=(ye,Ee)=>{if(ye.type==="category"){const qe=R[ye.name]||0;if(G==="qty")return a.jsx("tr",{className:"bom-category-row",children:a.jsx("td",{className:"bom-category-cell",colSpan:2,children:ye.name})},`cat-${Ee}`);const K=G==="all"?3:2;return a.jsxs("tr",{className:"bom-category-row",children:[a.jsx("td",{className:"bom-category-cell",colSpan:K,children:ye.name}),a.jsx("td",{className:"bom-cell bom-col-total",style:{textAlign:"right",fontWeight:700},children:B(qe)})]},`cat-${Ee}`)}const{item:Q}=ye;if(!Q||!Q.product)return null;const he=a.jsxs("div",{className:"bom-item-model",children:[Q.product.brand||""," ",Q.product.model||""]});return G==="qty"?a.jsxs("tr",{className:"bom-row",children:[a.jsx("td",{className:"bom-cell bom-col-desc",children:he}),a.jsx("td",{className:"bom-cell bom-col-units",style:{textAlign:"center"},children:Q.quantity})]},`row-${Ee}`):G==="category"?a.jsxs("tr",{className:"bom-row",children:[a.jsx("td",{className:"bom-cell bom-col-desc",children:he}),a.jsx("td",{className:"bom-cell bom-col-units",style:{textAlign:"center"},children:Q.quantity}),a.jsx("td",{className:"bom-cell bom-col-total"})]},`row-${Ee}`):a.jsxs("tr",{className:"bom-row",children:[a.jsx("td",{className:"bom-cell bom-col-desc",children:he}),a.jsx("td",{className:"bom-cell bom-col-units",style:{textAlign:"center"},children:Q.quantity}),a.jsx("td",{className:"bom-cell bom-col-unitprice",children:B(Q.price)}),a.jsx("td",{className:"bom-cell bom-col-total",children:B(Q.price*Q.quantity)})]},`row-${Ee}`)},ze=()=>{const ye=Number(N.totals?.vat_perc??0);return a.jsx("section",{className:"bom-block bom-block-totals",children:a.jsxs("div",{className:"bom-totals",children:[a.jsx("div",{className:"rule"}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"label",children:"Total (excl. VAT)"}),a.jsx("div",{className:"value",children:B(N.totals?.total_excl_vat||0)})]}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"label",children:[ye,"% VAT"]}),a.jsx("div",{className:"value",children:B(N.totals?.vat_price||0)})]}),a.jsx("div",{className:"rule"}),a.jsxs("div",{className:"row grand",children:[a.jsx("div",{className:"label",children:"Total (incl. VAT)"}),a.jsx("div",{className:"value",children:B(N.totals?.total_incl_vat||0)})]}),a.jsx("div",{className:"rule double"})]})})},ve=()=>{const ye=N.totals?.total_incl_vat||0,[Ee,Q,he]=P.map(K=>+K||0),qe=K=>B(ye*(K/100));return a.jsxs("section",{className:"bom-block bom-block-termsdeposit",children:[a.jsx("div",{className:"bom-terms",children:a.jsxs("p",{style:{margin:"5px 0",fontWeight:700},children:["Please note that a ",Ee,"% deposit will be required before Orka Solar will commence with any work."]})}),a.jsxs("table",{className:"bom-table bom-terms-table",style:{marginTop:"6px"},children:[a.jsxs("colgroup",{children:[a.jsx("col",{className:"col-desc"}),a.jsx("col",{className:"col-perc"}),a.jsx("col",{className:"col-flex"}),a.jsx("col",{className:"col-amount"}),a.jsx("col",{className:"col-incl"})]}),a.jsxs("tbody",{children:[a.jsxs("tr",{className:"bom-row-terms",children:[a.jsx("td",{className:"bom-cell-terms",children:"Deposit"}),a.jsxs("td",{className:"bom-cell-terms",children:[Ee,"%"]}),a.jsx("td",{className:"bom-cell-terms"}),a.jsx("td",{className:"bom-cell-terms amount",children:qe(Ee)}),a.jsx("td",{className:"bom-cell-terms incl",children:a.jsx("span",{children:"Incl. VAT"})})]}),a.jsxs("tr",{className:"bom-row-terms",children:[a.jsx("td",{className:"bom-cell-terms",children:"On delivery of inverters and panels to site"}),a.jsxs("td",{className:"bom-cell-terms",children:[Q,"%"]}),a.jsx("td",{className:"bom-cell-terms"}),a.jsx("td",{className:"bom-cell-terms amount",children:qe(Q)}),a.jsx("td",{className:"bom-cell-terms incl",children:a.jsx("span",{children:"Incl. VAT"})})]}),a.jsxs("tr",{className:"bom-row-terms",children:[a.jsx("td",{className:"bom-cell-terms",children:"On project completion"}),a.jsxs("td",{className:"bom-cell-terms",children:[he,"%"]}),a.jsx("td",{className:"bom-cell-terms"}),a.jsx("td",{className:"bom-cell-terms amount",children:qe(he)}),a.jsx("td",{className:"bom-cell-terms incl",children:a.jsx("span",{children:"Incl. VAT"})})]}),a.jsxs("tr",{className:"bom-row-terms grand",children:[a.jsx("td",{className:"bom-cell-terms",colSpan:3}),a.jsx("td",{className:"bom-cell-terms amount total-amount",children:B(ye)}),a.jsx("td",{className:"bom-cell-terms incl",children:a.jsx("span",{children:"Incl. VAT"})})]})]})]})]})},Le=()=>a.jsx("section",{className:"bom-block bom-block-bankingaccept",children:a.jsxs("div",{className:"bom-two-col",children:[a.jsxs("div",{className:"bom-box",style:{fontSize:"12px"},children:[a.jsx("div",{style:{fontWeight:700,borderBottom:"1px solid #000",paddingBottom:4,marginBottom:4},children:"Banking details:"}),a.jsx("div",{children:"Company: Orka Solar (Pty) Ltd."}),a.jsx("div",{children:"Branch: ABSA Mooirivier Mall"}),a.jsx("div",{children:"Account name: Orka Solar (PTY) Ltd"}),a.jsx("div",{children:"Account type: Cheque"}),a.jsx("div",{children:"Account number: 409 240 5135"})]}),a.jsxs("div",{className:"bom-box",style:{display:"flex",flexDirection:"column",fontSize:"12px"},children:[a.jsx("div",{style:{fontWeight:700,borderBottom:"1px solid #000",paddingBottom:4,marginBottom:4},children:"Client acceptance: "}),a.jsx("div",{style:{marginTop:"auto",textAlign:"center",paddingBottom:"0px",fontStyle:"italic"},children:"signature and date"})]})]})});return u&&h?a.jsxs("div",{className:"container mt-5 text-center",children:[a.jsx(Ot,{animation:"border"}),a.jsx("p",{children:"Loading quote data..."})]}):!N||!N.project||!N.categories||N.categories.length===0?u&&!h?a.jsx("div",{className:"container mt-5 text-center",children:a.jsxs(kt,{variant:"warning",children:[a.jsx("h4",{children:"Quote Data Not Available"}),a.jsx("p",{children:"Unable to load quote data. Please try refreshing the page or contact support."})]})}):u?a.jsxs("div",{className:"container mt-5 text-center",children:[a.jsx(Ot,{animation:"border"}),a.jsx("p",{children:"Loading quote data..."})]}):a.jsx("div",{className:"container mt-5 text-center",children:a.jsxs("div",{className:"alert alert-info",children:[a.jsx("h4",{children:"No Print Data Available"}),a.jsxs("p",{children:["Please go to the ",a.jsx("strong",{children:"Bill of Materials"})," tab and click ",a.jsx("strong",{children:'"Generate Quote"'})," to create a printable quote for this project."]})]})}):a.jsxs("div",{className:"bom-report",style:{position:"relative"},children:[a.jsxs("div",{className:"no-print",style:{position:"fixed",left:"20px",top:"50%",transform:"translateY(-50%)",zIndex:1e3,display:"flex",flexDirection:"column",gap:"12px"},children:[!t&&a.jsx(Fe,{variant:"outline-secondary",size:"sm",onClick:H,style:{color:"#495057",borderColor:"#6c757d",backgroundColor:"white",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",border:"1px solid #dee2e6"},title:"Back to Project Dashboard",children:a.jsx("i",{className:"bi bi-arrow-left"})}),a.jsx(Fe,{variant:"primary",size:"sm",onClick:()=>window.print(),style:{backgroundColor:"#0d6efd",borderColor:"#0d6efd",color:"white",boxShadow:"0 2px 8px rgba(0,0,0,0.15)"},title:"Print Document",children:a.jsx("i",{className:"bi bi-printer"})}),a.jsx("div",{style:{backgroundColor:"white",padding:"8px",borderRadius:"6px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",border:"1px solid #dee2e6"},children:a.jsxs(z.Select,{size:"sm",style:{width:"180px",fontSize:"0.75rem"},value:G,onChange:ye=>U(ye.target.value),"aria-label":"Price visibility",children:[a.jsx("option",{value:"all",children:"Show all prices"}),a.jsx("option",{value:"category",children:"Category prices"}),a.jsx("option",{value:"qty",children:"Qty only"})]})})]}),a.jsxs("div",{className:"no-print",style:{position:"fixed",right:"20px",top:"50%",transform:"translateY(-50%)",zIndex:1e3,display:"flex",flexDirection:"column",gap:"12px"},children:[u&&f&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{style:{backgroundColor:"white",padding:"8px 12px",borderRadius:"6px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",border:"1px solid #dee2e6",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"0.75rem",color:"#6c757d",marginBottom:"4px"},children:"Status"}),a.jsx(tt,{bg:f.quote.status==="sent"?"success":f.quote.status==="accepted"?"primary":f.quote.status==="declined"?"danger":"secondary",children:f.quote.status||"draft"})]}),f.quote.status!=="sent"&&f.quote.status!=="accepted"&&f.quote.status!=="declined"&&a.jsx(Fe,{variant:"success",size:"sm",onClick:O,disabled:x,style:{backgroundColor:x?"#6c757d":"#198754",borderColor:x?"#6c757d":"#198754",color:"white",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",opacity:x?.8:1},title:x?"Sending quote...":"Send Quote to Client",children:x?a.jsxs(a.Fragment,{children:[a.jsx(Ot,{animation:"border",size:"sm",className:"me-1"}),"Sending..."]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"bi bi-send me-1"}),"Send"]})}),f.quote.status==="sent"&&a.jsxs(a.Fragment,{children:[a.jsxs(Fe,{variant:"success",size:"sm",disabled:!0,style:{backgroundColor:"#6c757d",borderColor:"#6c757d",color:"white",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",opacity:.8},title:"Quote has been sent",children:[a.jsx("i",{className:"bi bi-check2 me-1"}),"Sent"]}),a.jsxs(Fe,{variant:"success",size:"sm",onClick:I,disabled:x,style:{backgroundColor:"#198754",borderColor:"#198754",color:"white",boxShadow:"0 2px 8px rgba(0,0,0,0.15)"},title:"Accept Quote",children:[a.jsx("i",{className:"bi bi-check-circle me-1"}),"Accept"]}),a.jsxs(Fe,{variant:"outline-danger",size:"sm",onClick:$,disabled:x,style:{color:"#dc3545",borderColor:"#dc3545",backgroundColor:"white",boxShadow:"0 2px 8px rgba(0,0,0,0.15)"},title:"Decline Quote",children:[a.jsx("i",{className:"bi bi-x-circle me-1"}),"Decline"]})]}),a.jsxs(Fe,{variant:"outline-secondary",size:"sm",onClick:V,disabled:x,style:{color:"#495057",borderColor:"#6c757d",backgroundColor:"white",boxShadow:"0 2px 8px rgba(0,0,0,0.15)"},title:"Edit in BOM",children:[a.jsx("i",{className:"bi bi-pencil me-1"}),"Edit"]})]}),a.jsxs("div",{style:{backgroundColor:"white",padding:"12px",borderRadius:"6px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",border:"1px solid #dee2e6",maxWidth:"200px"},children:[a.jsx("div",{style:{fontSize:"0.75rem",color:"#6c757d",fontWeight:"600",marginBottom:"8px",textAlign:"center"},children:"Payment Terms"}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[a.jsx("label",{style:{fontSize:"0.7rem",color:"#6c757d",margin:0,minWidth:"50px"},children:"Deposit"}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"2px"},children:[a.jsx(z.Control,{type:"number",size:"sm",min:"0",max:"100",step:"1",style:{width:"50px",fontSize:"0.7rem"},value:P[0],onChange:ye=>ne(0,ye.target.value)}),a.jsx("span",{style:{fontSize:"0.7rem",color:"#6c757d"},children:"%"})]})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[a.jsx("label",{style:{fontSize:"0.7rem",color:"#6c757d",margin:0,minWidth:"50px"},children:"Delivery"}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"2px"},children:[a.jsx(z.Control,{type:"number",size:"sm",min:"0",max:"100",step:"1",style:{width:"50px",fontSize:"0.7rem"},value:P[1],onChange:ye=>ne(1,ye.target.value)}),a.jsx("span",{style:{fontSize:"0.7rem",color:"#6c757d"},children:"%"})]})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[a.jsx("label",{style:{fontSize:"0.7rem",color:"#6c757d",margin:0,minWidth:"50px"},children:"Complete"}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"2px"},children:[a.jsx(z.Control,{type:"number",size:"sm",min:"0",max:"100",step:"1",style:{width:"50px",fontSize:"0.7rem"},value:P[2],onChange:ye=>ne(2,ye.target.value)}),a.jsx("span",{style:{fontSize:"0.7rem",color:"#6c757d"},children:"%"})]})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:"4px"},children:[a.jsxs(tt,{bg:D===100?"success":"warning",style:{fontSize:"0.65rem"},children:["Sum: ",D,"%"]}),a.jsx(Fe,{variant:"outline-secondary",size:"sm",onClick:()=>Z([65,25,10]),title:"Reset to default: 65% / 25% / 10%",style:{fontSize:"0.65rem",padding:"2px 6px",color:"#495057",borderColor:"#6c757d",backgroundColor:"transparent"},children:"Reset"})]})]})]})]}),a.jsx("main",{className:"bom-printarea",children:$e.map((ye,Ee)=>a.jsxs("section",{className:"bom-page",children:[Y(),a.jsxs("div",{className:"bom-content",children:[ye.kind==="rows"&&a.jsxs("table",{className:"bom-table",children:[pe(),a.jsx("tbody",{children:ye.rows.map((Q,he)=>we(Q,he))})]}),ye.kind==="rows"&&Ee===be.length-1&&a.jsxs(a.Fragment,{children:[ie.inlineKeys.includes("totals")&&a.jsx(ze,{}),ie.inlineKeys.includes("termsDeposit")&&a.jsx(ve,{}),ie.inlineKeys.includes("bankingAccept")&&a.jsx(Le,{})]}),ye.kind==="totals"&&a.jsxs(a.Fragment,{children:[ye.blocks.includes("totals")&&a.jsx(ze,{}),ye.blocks.includes("termsDeposit")&&a.jsx(ve,{}),ye.blocks.includes("bankingAccept")&&a.jsx(Le,{})]})]})]},Ee))})]})}/*!
* chartjs-plugin-annotation v3.1.0
* https://www.chartjs.org/chartjs-plugin-annotation/index
 * (c) 2024 chartjs-plugin-annotation Contributors
 * Released under the MIT License
 */const sR={modes:{point(t,e){return Ug(t,e,{intersect:!0})},nearest(t,e,n){return Vue(t,e,n)},x(t,e,n){return Ug(t,e,{intersect:n.intersect,axis:"x"})},y(t,e,n){return Ug(t,e,{intersect:n.intersect,axis:"y"})}}};function OS(t,e,n){return(sR.modes[n.mode]||sR.modes.nearest)(t,e,n)}function Bue(t,e,n){return n!=="x"&&n!=="y"?t.inRange(e.x,e.y,"x",!0)||t.inRange(e.x,e.y,"y",!0):t.inRange(e.x,e.y,n,!0)}function Iue(t,e,n){return n==="x"?{x:t.x,y:e.y}:n==="y"?{x:e.x,y:t.y}:e}function Ug(t,e,n){return t.filter(s=>n.intersect?s.inRange(e.x,e.y):Bue(s,e,n.axis))}function Vue(t,e,n){let s=Number.POSITIVE_INFINITY;return Ug(t,e,n).reduce((r,i)=>{const o=i.getCenterPoint(),c=Iue(e,o,n.axis),u=ju(e,c);return u<s?(r=[i],s=u):u===s&&r.push(i),r},[]).sort((r,i)=>r._index-i._index).slice(0,1)}function ic(t,e,n){const s=Math.cos(n),r=Math.sin(n),i=e.x,o=e.y;return{x:i+s*(t.x-i)-r*(t.y-o),y:o+r*(t.x-i)+s*(t.y-o)}}const zue=(t,e)=>e>t||t.length>e.length&&t.slice(0,e.length)===e,Ml=.001,Lx=(t,e,n)=>Math.min(n,Math.max(e,t)),A5=(t,e)=>t.value>=t.start-e&&t.value<=t.end+e;function $ue(t,e,n){for(const s of Object.keys(t))t[s]=Lx(t[s],e,n);return t}function Hue(t,e,n,s){return!t||!e||n<=0?!1:Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)<=Math.pow(n+s,2)}function w5(t,{x:e,y:n,x2:s,y2:r},i,{borderWidth:o,hitTolerance:c}){const u=(o+c)/2,f=t.x>=e-u-Ml&&t.x<=s+u+Ml,m=t.y>=n-u-Ml&&t.y<=r+u+Ml;return i==="x"?f:(i==="y"||f)&&m}function j5(t,{rect:e,center:n},s,{rotation:r,borderWidth:i,hitTolerance:o}){const c=ic(t,n,ds(-r));return w5(c,e,s,{borderWidth:i,hitTolerance:o})}function oc(t,e){const{centerX:n,centerY:s}=t.getProps(["centerX","centerY"],e);return{x:n,y:s}}function Uue(t,e,n,s=!0){const r=n.split(".");let i=0;for(const o of e.split(".")){const c=r[i++];if(parseInt(o,10)<parseInt(c,10))break;if(zue(c,o)){if(s)throw new Error(`${t} v${n} is not supported. v${e} or newer is required.`);return!1}}return!0}const S5=t=>typeof t=="string"&&t.endsWith("%"),C5=t=>parseFloat(t)/100,N5=t=>Lx(C5(t),0,1),Cf=(t,e)=>({x:t,y:e,x2:t,y2:e,width:0,height:0}),Wue={box:t=>Cf(t.centerX,t.centerY),doughnutLabel:t=>Cf(t.centerX,t.centerY),ellipse:t=>({centerX:t.centerX,centerY:t.centerX,radius:0,width:0,height:0}),label:t=>Cf(t.centerX,t.centerY),line:t=>Cf(t.x,t.y),point:t=>({centerX:t.centerX,centerY:t.centerY,radius:0,width:0,height:0}),polygon:t=>Cf(t.centerX,t.centerY)};function PS(t,e){return e==="start"?0:e==="end"?t:S5(e)?N5(e)*t:t/2}function Bo(t,e,n=!0){return typeof e=="number"?e:S5(e)?(n?N5(e):C5(e))*t:t}function Yue(t,e){const{x:n,width:s}=t,r=e.textAlign;return r==="center"?n+s/2:r==="end"||r==="right"?n+s:n}function k5(t,e,{borderWidth:n,position:s,xAdjust:r,yAdjust:i},o){const c=Mt(o),u=e.width+(c?o.width:0)+n,f=e.height+(c?o.height:0)+n,m=LS(s),h=rR(t.x,u,r,m.x),g=rR(t.y,f,i,m.y);return{x:h,y:g,x2:h+u,y2:g+f,width:u,height:f,centerX:h+u/2,centerY:g+f/2}}function LS(t,e="center"){return Mt(t)?{x:Dt(t.x,e),y:Dt(t.y,e)}:(t=Dt(t,e),{x:t,y:t})}const D5=(t,e)=>t&&t.autoFit&&e<1;function E5(t,e){const n=t.font,s=bn(n)?n:[n];return D5(t,e)?s.map(function(r){const i=es(r);return i.size=Math.floor(r.size*e),i.lineHeight=r.lineHeight,es(i)}):s.map(r=>es(r))}function T5(t){return t&&(ar(t.xValue)||ar(t.yValue))}function rR(t,e,n=0,s){return t-PS(e,s)+n}function rd(t,e,n){const s=n.init;if(s){if(s===!0)return R5(e,n)}else return;return que(t,e,n)}function M5(t,e,n){let s=!1;return e.forEach(r=>{sr(t[r])?(s=!0,n[r]=t[r]):ar(n[r])&&delete n[r]}),s}function R5(t,e){const n=e.type||"line";return Wue[n](t)}function que(t,e,n){const s=rn(n.init,[{chart:t,properties:e,options:n}]);if(s===!0)return R5(e,n);if(Mt(s))return s}const N_=new Map,Gue=t=>isNaN(t)||t<=0,Kue=t=>t.reduce(function(e,n){return e+=n.string,e},"");function Fx(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object HTMLImageElement]"||e==="[object HTMLCanvasElement]"}}function Bx(t,{x:e,y:n},s){s&&(t.translate(e,n),t.rotate(ds(s)),t.translate(-e,-n))}function Bi(t,e){if(e&&e.borderWidth)return t.lineCap=e.borderCapStyle||"butt",t.setLineDash(e.borderDash),t.lineDashOffset=e.borderDashOffset,t.lineJoin=e.borderJoinStyle||"miter",t.lineWidth=e.borderWidth,t.strokeStyle=e.borderColor,!0}function ad(t,e){t.shadowColor=e.backgroundShadowColor,t.shadowBlur=e.shadowBlur,t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY}function Ix(t,e){const n=e.content;if(Fx(n))return{width:Bo(n.width,e.width),height:Bo(n.height,e.height)};const s=E5(e),r=e.textStrokeWidth,i=bn(n)?n:[n],o=i.join()+Kue(s)+r+(t._measureText?"-spriting":"");return N_.has(o)||N_.set(o,Jue(t,i,s,r)),N_.get(o)}function O5(t,e,n){const{x:s,y:r,width:i,height:o}=e;t.save(),ad(t,n);const c=Bi(t,n);t.fillStyle=n.backgroundColor,t.beginPath(),wh(t,{x:s,y:r,w:i,h:o,radius:$ue(Il(n.borderRadius),0,Math.min(i,o)/2)}),t.closePath(),t.fill(),c&&(t.shadowColor=n.borderShadowColor,t.stroke()),t.restore()}function P5(t,e,n,s){const r=n.content;if(Fx(r)){t.save(),t.globalAlpha=nde(n.opacity,r.style.opacity),t.drawImage(r,e.x,e.y,e.width,e.height),t.restore();return}const i=bn(r)?r:[r],o=E5(n,s),c=n.color,u=bn(c)?c:[c],f=Yue(e,n),m=e.y+n.textStrokeWidth/2;t.save(),t.textBaseline="middle",t.textAlign=n.textAlign,Que(t,n)&&ede(t,{x:f,y:m},i,o),tde(t,{x:f,y:m},i,{fonts:o,colors:u}),t.restore()}function Que(t,e){if(e.textStrokeWidth>0)return t.lineJoin="round",t.miterLimit=2,t.lineWidth=e.textStrokeWidth,t.strokeStyle=e.textStrokeColor,!0}function Xue(t,e,n,s){const{radius:r,options:i}=e,o=i.pointStyle,c=i.rotation;let u=(c||0)*Gj;if(Fx(o)){t.save(),t.translate(n,s),t.rotate(u),t.drawImage(o,-o.width/2,-o.height/2,o.width,o.height),t.restore();return}Gue(r)||Zue(t,{x:n,y:s,radius:r,rotation:c,style:o,rad:u})}function Zue(t,{x:e,y:n,radius:s,rotation:r,style:i,rad:o}){let c,u,f,m;switch(t.beginPath(),i){default:t.arc(e,n,s,0,wn),t.closePath();break;case"triangle":t.moveTo(e+Math.sin(o)*s,n-Math.cos(o)*s),o+=dy,t.lineTo(e+Math.sin(o)*s,n-Math.cos(o)*s),o+=dy,t.lineTo(e+Math.sin(o)*s,n-Math.cos(o)*s),t.closePath();break;case"rectRounded":m=s*.516,f=s-m,c=Math.cos(o+Pr)*f,u=Math.sin(o+Pr)*f,t.arc(e-c,n-u,m,o-Lt,o-Tn),t.arc(e+u,n-c,m,o-Tn,o),t.arc(e+c,n+u,m,o,o+Tn),t.arc(e-u,n+c,m,o+Tn,o+Lt),t.closePath();break;case"rect":if(!r){f=Math.SQRT1_2*s,t.rect(e-f,n-f,2*f,2*f);break}o+=Pr;case"rectRot":c=Math.cos(o)*s,u=Math.sin(o)*s,t.moveTo(e-c,n-u),t.lineTo(e+u,n-c),t.lineTo(e+c,n+u),t.lineTo(e-u,n+c),t.closePath();break;case"crossRot":o+=Pr;case"cross":c=Math.cos(o)*s,u=Math.sin(o)*s,t.moveTo(e-c,n-u),t.lineTo(e+c,n+u),t.moveTo(e+u,n-c),t.lineTo(e-u,n+c);break;case"star":c=Math.cos(o)*s,u=Math.sin(o)*s,t.moveTo(e-c,n-u),t.lineTo(e+c,n+u),t.moveTo(e+u,n-c),t.lineTo(e-u,n+c),o+=Pr,c=Math.cos(o)*s,u=Math.sin(o)*s,t.moveTo(e-c,n-u),t.lineTo(e+c,n+u),t.moveTo(e+u,n-c),t.lineTo(e-u,n+c);break;case"line":c=Math.cos(o)*s,u=Math.sin(o)*s,t.moveTo(e-c,n-u),t.lineTo(e+c,n+u);break;case"dash":t.moveTo(e,n),t.lineTo(e+Math.cos(o)*s,n+Math.sin(o)*s);break}t.fill()}function Jue(t,e,n,s){t.save();const r=e.length;let i=0,o=s;for(let c=0;c<r;c++){const u=n[Math.min(c,n.length-1)];t.font=u.string;const f=e[c];i=Math.max(i,t.measureText(f).width+s),o+=u.lineHeight}return t.restore(),{width:i,height:o}}function ede(t,{x:e,y:n},s,r){t.beginPath();let i=0;s.forEach(function(o,c){const u=r[Math.min(c,r.length-1)],f=u.lineHeight;t.font=u.string,t.strokeText(o,e,n+f/2+i),i+=f}),t.stroke()}function tde(t,{x:e,y:n},s,{fonts:r,colors:i}){let o=0;s.forEach(function(c,u){const f=i[Math.min(u,i.length-1)],m=r[Math.min(u,r.length-1)],h=m.lineHeight;t.beginPath(),t.font=m.string,t.fillStyle=f,t.fillText(c,e,n+h/2+o),o+=h,t.fill()})}function nde(t,e){const n=Gl(t)?t:e;return Gl(n)?Lx(n,0,1):1}const L5=["left","bottom","top","right"];function sde(t,e){const{pointX:n,pointY:s,options:r}=e,i=r.callout,o=i&&i.display&&lde(e,i);if(!o||ude(e,i,o))return;if(t.save(),t.beginPath(),!Bi(t,i))return t.restore();const{separatorStart:u,separatorEnd:f}=rde(e,o),{sideStart:m,sideEnd:h}=ide(e,o,u);(i.margin>0||r.borderWidth===0)&&(t.moveTo(u.x,u.y),t.lineTo(f.x,f.y)),t.moveTo(m.x,m.y),t.lineTo(h.x,h.y);const g=ic({x:n,y:s},e.getCenterPoint(),ds(-e.rotation));t.lineTo(g.x,g.y),t.stroke(),t.restore()}function rde(t,e){const{x:n,y:s,x2:r,y2:i}=t,o=ade(t,e);let c,u;return e==="left"||e==="right"?(c={x:n+o,y:s},u={x:c.x,y:i}):(c={x:n,y:s+o},u={x:r,y:c.y}),{separatorStart:c,separatorEnd:u}}function ade(t,e){const{width:n,height:s,options:r}=t,i=r.callout.margin+r.borderWidth/2;return e==="right"?n+i:e==="bottom"?s+i:-i}function ide(t,e,n){const{y:s,width:r,height:i,options:o}=t,c=o.callout.start,u=ode(e,o.callout);let f,m;return e==="left"||e==="right"?(f={x:n.x,y:s+Bo(i,c)},m={x:f.x+u,y:f.y}):(f={x:n.x+Bo(r,c),y:n.y},m={x:f.x,y:f.y+u}),{sideStart:f,sideEnd:m}}function ode(t,e){const n=e.side;return t==="left"||t==="top"?-n:n}function lde(t,e){const n=e.position;return L5.includes(n)?n:cde(t,e)}function cde(t,e){const{x:n,y:s,x2:r,y2:i,width:o,height:c,pointX:u,pointY:f,centerX:m,centerY:h,rotation:g}=t,x={x:m,y:h},b=e.start,A=Bo(o,b),_=Bo(c,b),j=[n,n+A,n+A,r],C=[s+_,i,s,i],k=[];for(let E=0;E<4;E++){const N=ic({x:j[E],y:C[E]},x,ds(g));k.push({position:L5[E],distance:ju(N,{x:u,y:f})})}return k.sort((E,N)=>E.distance-N.distance)[0].position}function ude(t,e,n){const{pointX:s,pointY:r}=t,i=e.margin;let o=s,c=r;return n==="left"?o+=i:n==="right"?o-=i:n==="top"?c+=i:n==="bottom"&&(c-=i),t.inRange(o,c)}const aR={xScaleID:{min:"xMin",max:"xMax",start:"left",end:"right",startProp:"x",endProp:"x2"},yScaleID:{min:"yMin",max:"yMax",start:"bottom",end:"top",startProp:"y",endProp:"y2"}};function Pu(t,e,n){return e=typeof e=="number"?e:t.parse(e),hs(e)?t.getPixelForValue(e):n}function Jl(t,e,n){const s=e[n];if(s||n==="scaleID")return s;const r=n.charAt(0),i=Object.values(t).filter(o=>o.axis&&o.axis===r);return i.length?i[0].id:r}function F5(t,e){if(t){const n=t.options.reverse,s=Pu(t,e.min,n?e.end:e.start),r=Pu(t,e.max,n?e.start:e.end);return{start:s,end:r}}}function B5(t,e){const{chartArea:n,scales:s}=t,r=s[Jl(s,e,"xScaleID")],i=s[Jl(s,e,"yScaleID")];let o=n.width/2,c=n.height/2;return r&&(o=Pu(r,e.xValue,r.left+r.width/2)),i&&(c=Pu(i,e.yValue,i.top+i.height/2)),{x:o,y:c}}function FS(t,e){const n=t.scales,s=n[Jl(n,e,"xScaleID")],r=n[Jl(n,e,"yScaleID")];if(!s&&!r)return{};let{left:i,right:o}=s||t.chartArea,{top:c,bottom:u}=r||t.chartArea;const f=iR(s,{min:e.xMin,max:e.xMax,start:i,end:o});i=f.start,o=f.end;const m=iR(r,{min:e.yMin,max:e.yMax,start:u,end:c});return c=m.start,u=m.end,{x:i,y:c,x2:o,y2:u,width:o-i,height:u-c,centerX:i+(o-i)/2,centerY:c+(u-c)/2}}function I5(t,e){if(!T5(e)){const n=FS(t,e);let s=e.radius;(!s||isNaN(s))&&(s=Math.min(n.width,n.height)/2,e.radius=s);const r=s*2,i=n.centerX+e.xAdjust,o=n.centerY+e.yAdjust;return{x:i-s,y:o-s,x2:i+s,y2:o+s,centerX:i,centerY:o,width:r,height:r,radius:s}}return fde(t,e)}function dde(t,e){const{scales:n,chartArea:s}=t,r=n[e.scaleID],i={x:s.left,y:s.top,x2:s.right,y2:s.bottom};return r?hde(r,i,e):mde(n,i,e),i}function V5(t,e){const n=FS(t,e);return n.initProperties=rd(t,n,e),n.elements=[{type:"label",optionScope:"label",properties:yde(t,n,e),initProperties:n.initProperties}],n}function fde(t,e){const n=B5(t,e),s=e.radius*2;return{x:n.x-e.radius+e.xAdjust,y:n.y-e.radius+e.yAdjust,x2:n.x+e.radius+e.xAdjust,y2:n.y+e.radius+e.yAdjust,centerX:n.x+e.xAdjust,centerY:n.y+e.yAdjust,radius:e.radius,width:s,height:s}}function iR(t,e){const n=F5(t,e)||e;return{start:Math.min(n.start,n.end),end:Math.max(n.start,n.end)}}function hde(t,e,n){const s=Pu(t,n.value,NaN),r=Pu(t,n.endValue,s);t.isHorizontal()?(e.x=s,e.x2=r):(e.y=s,e.y2=r)}function mde(t,e,n){for(const s of Object.keys(aR)){const r=t[Jl(t,n,s)];if(r){const{min:i,max:o,start:c,end:u,startProp:f,endProp:m}=aR[s],h=F5(r,{min:n[i],max:n[o],start:r[c],end:r[u]});e[f]=h.start,e[m]=h.end}}}function pde({properties:t,options:e},n,s,r){const{x:i,x2:o,width:c}=t;return z5({start:i,end:o,borderWidth:e.borderWidth},{position:s.x,padding:{start:r.left,end:r.right},adjust:e.label.xAdjust,size:n.width})}function gde({properties:t,options:e},n,s,r){const{y:i,y2:o,height:c}=t;return z5({start:i,end:o,borderWidth:e.borderWidth},{position:s.y,padding:{start:r.top,end:r.bottom},adjust:e.label.yAdjust,size:n.height})}function z5(t,e){const{start:n,end:s,borderWidth:r}=t,{position:i,padding:{start:o,end:c},adjust:u}=e,f=s-r-n-o-c-e.size;return n+r/2+u+PS(f,i)}function yde(t,e,n){const s=n.label;s.backgroundColor="transparent",s.callout.display=!1;const r=LS(s.position),i=As(s.padding),o=Ix(t.ctx,s),c=pde({properties:e,options:n},o,r,i),u=gde({properties:e,options:n},o,r,i),f=o.width+i.width,m=o.height+i.height;return{x:c,y:u,x2:c+f,y2:u+m,width:f,height:m,centerX:c+f/2,centerY:u+m/2,rotation:s.rotation}}const ZA=["enter","leave"],BS=ZA.concat("click");function xde(t,e,n){e.listened=M5(n,BS,e.listeners),e.moveListened=!1,ZA.forEach(s=>{sr(n[s])&&(e.moveListened=!0)}),(!e.listened||!e.moveListened)&&e.annotations.forEach(s=>{!e.listened&&sr(s.click)&&(e.listened=!0),e.moveListened||ZA.forEach(r=>{sr(s[r])&&(e.listened=!0,e.moveListened=!0)})})}function bde(t,e,n){if(t.listened)switch(e.type){case"mousemove":case"mouseout":return vde(t,e,n);case"click":return _de(t,e,n)}}function vde(t,e,n){if(!t.moveListened)return;let s;e.type==="mousemove"?s=OS(t.visibleElements,e,n.interaction):s=[];const r=t.hovered;t.hovered=s;const i={state:t,event:e};let o=oR(i,"leave",r,s);return oR(i,"enter",s,r)||o}function oR({state:t,event:e},n,s,r){let i;for(const o of s)r.indexOf(o)<0&&(i=$5(o.options[n]||t.listeners[n],o,e)||i);return i}function _de(t,e,n){const s=t.listeners,r=OS(t.visibleElements,e,n.interaction);let i;for(const o of r)i=$5(o.options.click||s.click,o,e)||i;return i}function $5(t,e,n){return rn(t,[e.$context,n])===!0}const Oy=["afterDraw","beforeDraw"];function Ade(t,e,n){const s=e.visibleElements;e.hooked=M5(n,Oy,e.hooks),e.hooked||s.forEach(r=>{e.hooked||Oy.forEach(i=>{sr(r.options[i])&&(e.hooked=!0)})})}function lR(t,e,n){if(t.hooked){const s=e.options[n]||t.hooks[n];return rn(s,[e.$context])}}function wde(t,e,n){const s=kde(t.scales,e,n);let r=cR(e,s,"min","suggestedMin");r=cR(e,s,"max","suggestedMax")||r,r&&sr(e.handleTickRangeOptions)&&e.handleTickRangeOptions()}function jde(t,e){for(const n of t)Cde(n,e)}function cR(t,e,n,s){if(hs(e[n])&&!Sde(t.options,n,s)){const r=t[n]!==e[n];return t[n]=e[n],r}}function Sde(t,e,n){return ar(t[e])||ar(t[n])}function Cde(t,e){for(const n of["scaleID","xScaleID","yScaleID"]){const s=Jl(e,t,n);s&&!e[s]&&Nde(t,n)&&console.warn(`No scale found with id '${s}' for annotation '${t.id}'`)}}function Nde(t,e){if(e==="scaleID")return!0;const n=e.charAt(0);for(const s of["Min","Max","Value"])if(ar(t[n+s]))return!0;return!1}function kde(t,e,n){const s=e.axis,r=e.id,i=s+"ScaleID",o={min:Dt(e.min,Number.NEGATIVE_INFINITY),max:Dt(e.max,Number.POSITIVE_INFINITY)};for(const c of n)c.scaleID===r?uR(c,e,["value","endValue"],o):Jl(t,c,i)===r&&uR(c,e,[s+"Min",s+"Max",s+"Value"],o);return o}function uR(t,e,n,s){for(const r of n){const i=t[r];if(ar(i)){const o=e.parse(i);s.min=Math.min(s.min,o),s.max=Math.max(s.max,o)}}}class id extends Ps{inRange(e,n,s,r){const{x:i,y:o}=ic({x:e,y:n},this.getCenterPoint(r),ds(-this.options.rotation));return w5({x:i,y:o},this.getProps(["x","y","x2","y2"],r),s,this.options)}getCenterPoint(e){return oc(this,e)}draw(e){e.save(),Bx(e,this.getCenterPoint(),this.options.rotation),O5(e,this,this.options),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){return V5(e,n)}}id.id="boxAnnotation";id.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,hitTolerance:0,label:{backgroundColor:"transparent",borderWidth:0,callout:{display:!1},color:"black",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:void 0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};id.defaultRoutes={borderColor:"color",backgroundColor:"color"};id.descriptors={label:{_fallback:!0}};class Vx extends Ps{inRange(e,n,s,r){return j5({x:e,y:n},{rect:this.getProps(["x","y","x2","y2"],r),center:this.getCenterPoint(r)},s,{rotation:this.rotation,borderWidth:0,hitTolerance:this.options.hitTolerance})}getCenterPoint(e){return oc(this,e)}draw(e){const n=this.options;!n.display||!n.content||(Ode(e,this),e.save(),Bx(e,this.getCenterPoint(),this.rotation),P5(e,this,n,this._fitRatio),e.restore())}resolveElementProperties(e,n){const s=Dde(e,n);if(!s)return{};const{controllerMeta:r,point:i,radius:o}=Tde(e,n,s);let c=Ix(e.ctx,n);const u=Mde(c,o);D5(n,u)&&(c={width:c.width*u,height:c.height*u});const{position:f,xAdjust:m,yAdjust:h}=n,g=k5(i,c,{borderWidth:0,position:f,xAdjust:m,yAdjust:h});return{initProperties:rd(e,g,n),...g,...r,rotation:n.rotation,_fitRatio:u}}}Vx.id="doughnutLabelAnnotation";Vx.defaults={autoFit:!0,autoHide:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderColor:"transparent",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:0,color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,spacing:1,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0};Vx.defaultRoutes={};function Dde(t,e){return t.getSortedVisibleDatasetMetas().reduce(function(n,s){const r=s.controller;return r instanceof OZ&&Ede(t,e,s.data)&&(!n||r.innerRadius<n.controller.innerRadius)&&r.options.circumference>=90?s:n},void 0)}function Ede(t,e,n){if(!e.autoHide)return!0;for(let s=0;s<n.length;s++)if(!n[s].hidden&&t.getDataVisibility(s))return!0}function Tde({chartArea:t},e,n){const{left:s,top:r,right:i,bottom:o}=t,{innerRadius:c,offsetX:u,offsetY:f}=n.controller,m=(s+i)/2+u,h=(r+o)/2+f,g={left:Math.max(m-c,s),right:Math.min(m+c,i),top:Math.max(h-c,r),bottom:Math.min(h+c,o)},x={x:(g.left+g.right)/2,y:(g.top+g.bottom)/2},b=e.spacing+e.borderWidth/2,A=c-b,_=x.y>h,j=_?r+b:o-b,C=Rde(j,m,h,A);return{controllerMeta:{_centerX:m,_centerY:h,_radius:A,_counterclockwise:_,...C},point:x,radius:Math.min(c,Math.min(g.right-g.left,g.bottom-g.top)/2)}}function Mde({width:t,height:e},n){const s=Math.sqrt(Math.pow(t,2)+Math.pow(e,2));return n*2/s}function Rde(t,e,n,s){const r=Math.pow(n-t,2),i=Math.pow(s,2),o=e*-2,c=Math.pow(e,2)+r-i,u=Math.pow(o,2)-4*c;if(u<=0)return{_startAngle:0,_endAngle:wn};const f=(-o-Math.sqrt(u))/2,m=(-o+Math.sqrt(u))/2;return{_startAngle:fy({x:e,y:n},{x:f,y:t}).angle,_endAngle:fy({x:e,y:n},{x:m,y:t}).angle}}function Ode(t,e){const{_centerX:n,_centerY:s,_radius:r,_startAngle:i,_endAngle:o,_counterclockwise:c,options:u}=e;t.save();const f=Bi(t,u);t.fillStyle=u.backgroundColor,t.beginPath(),t.arc(n,s,r,i,o,c),t.closePath(),t.fill(),f&&t.stroke(),t.restore()}class fm extends Ps{inRange(e,n,s,r){return j5({x:e,y:n},{rect:this.getProps(["x","y","x2","y2"],r),center:this.getCenterPoint(r)},s,{rotation:this.rotation,borderWidth:this.options.borderWidth,hitTolerance:this.options.hitTolerance})}getCenterPoint(e){return oc(this,e)}draw(e){const n=this.options,s=!ar(this._visible)||this._visible;!n.display||!n.content||!s||(e.save(),Bx(e,this.getCenterPoint(),this.rotation),sde(e,this),O5(e,this,n),P5(e,Pde(this),n),e.restore())}resolveElementProperties(e,n){let s;if(T5(n))s=B5(e,n);else{const{centerX:c,centerY:u}=FS(e,n);s={x:c,y:u}}const r=As(n.padding),i=Ix(e.ctx,n),o=k5(s,i,n,r);return{initProperties:rd(e,o,n),pointX:s.x,pointY:s.y,...o,rotation:n.rotation}}}fm.id="labelAnnotation";fm.defaults={adjustScaleRange:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:0,callout:{borderCapStyle:"butt",borderColor:void 0,borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:1,display:!1,margin:5,position:"auto",side:5,start:"50%"},color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};fm.defaultRoutes={borderColor:"color"};function Pde({x:t,y:e,width:n,height:s,options:r}){const i=r.borderWidth/2,o=As(r.padding);return{x:t+o.left+i,y:e+o.top+i,width:n-o.left-o.right-r.borderWidth,height:s-o.top-o.bottom-r.borderWidth}}const IS=(t,e,n)=>({x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}),JA=(t,e,n)=>IS(e,n,Math.abs((t-e.y)/(n.y-e.y))).x,dR=(t,e,n)=>IS(e,n,Math.abs((t-e.x)/(n.x-e.x))).y,zf=t=>t*t,Lde=(t,e,{x:n,y:s,x2:r,y2:i},o)=>o==="y"?{start:Math.min(s,i),end:Math.max(s,i),value:e}:{start:Math.min(n,r),end:Math.max(n,r),value:t},fR=(t,e,n,s)=>(1-s)*(1-s)*t+2*(1-s)*s*e+s*s*n,ew=(t,e,n,s)=>({x:fR(t.x,e.x,n.x,s),y:fR(t.y,e.y,n.y,s)}),hR=(t,e,n,s)=>2*(1-s)*(e-t)+2*s*(n-e),mR=(t,e,n,s)=>-Math.atan2(hR(t.x,e.x,n.x,s),hR(t.y,e.y,n.y,s))+.5*Lt;class hm extends Ps{inRange(e,n,s,r){const i=(this.options.borderWidth+this.options.hitTolerance)/2;if(s!=="x"&&s!=="y"){const o={mouseX:e,mouseY:n},{path:c,ctx:u}=this;if(c){Bi(u,this.options),u.lineWidth+=this.options.hitTolerance;const{chart:m}=this.$context,h=e*m.currentDevicePixelRatio,g=n*m.currentDevicePixelRatio,x=u.isPointInStroke(c,h,g)||tw(this,o,r);return u.restore(),x}const f=zf(i);return Vde(this,o,f,r)||tw(this,o,r)}return Fde(this,{mouseX:e,mouseY:n},s,{hitSize:i,useFinalPosition:r})}getCenterPoint(e){return oc(this,e)}draw(e){const{x:n,y:s,x2:r,y2:i,cp:o,options:c}=this;if(e.save(),!Bi(e,c))return e.restore();ad(e,c);const u=Math.sqrt(Math.pow(r-n,2)+Math.pow(i-s,2));if(c.curve&&o)return Gde(e,this,o,u),e.restore();const{startOpts:f,endOpts:m,startAdjust:h,endAdjust:g}=H5(this),x=Math.atan2(i-s,r-n);e.translate(n,s),e.rotate(x),e.beginPath(),e.moveTo(0+h,0),e.lineTo(u-g,0),e.shadowColor=c.borderShadowColor,e.stroke(),nw(e,0,h,f),nw(e,u,-g,m),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){const s=dde(e,n),{x:r,y:i,x2:o,y2:c}=s,u=Bde(s,e.chartArea),f=u?Ide({x:r,y:i},{x:o,y:c},e.chartArea):{x:r,y:i,x2:o,y2:c,width:Math.abs(o-r),height:Math.abs(c-i)};if(f.centerX=(o+r)/2,f.centerY=(c+i)/2,f.initProperties=rd(e,f,n),n.curve){const h={x:f.x,y:f.y},g={x:f.x2,y:f.y2};f.cp=qde(f,n,ju(h,g))}const m=zde(e,f,n.label);return m._visible=u,f.elements=[{type:"label",optionScope:"label",properties:m,initProperties:f.initProperties}],f}}hm.id="lineAnnotation";const pR={backgroundColor:void 0,backgroundShadowColor:void 0,borderColor:void 0,borderDash:void 0,borderDashOffset:void 0,borderShadowColor:void 0,borderWidth:void 0,display:void 0,fill:void 0,length:void 0,shadowBlur:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,width:void 0};hm.defaults={adjustScaleRange:!0,arrowHeads:{display:!1,end:Object.assign({},pR),fill:!1,length:12,start:Object.assign({},pR),width:6},borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:2,curve:!1,controlPoint:{y:"-50%"},display:!0,endValue:void 0,init:void 0,hitTolerance:0,label:{backgroundColor:"rgba(0,0,0,0.8)",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderColor:"black",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:6,borderShadowColor:"transparent",borderWidth:0,callout:Object.assign({},fm.defaults.callout),color:"#fff",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},scaleID:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,value:void 0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};hm.descriptors={arrowHeads:{start:{_fallback:!0},end:{_fallback:!0},_fallback:!0}};hm.defaultRoutes={borderColor:"color"};function Fde(t,{mouseX:e,mouseY:n},s,{hitSize:r,useFinalPosition:i}){const o=Lde(e,n,t.getProps(["x","y","x2","y2"],i),s);return A5(o,r)||tw(t,{mouseX:e,mouseY:n},i,s)}function Bde({x:t,y:e,x2:n,y2:s},{top:r,right:i,bottom:o,left:c}){return!(t<c&&n<c||t>i&&n>i||e<r&&s<r||e>o&&s>o)}function gR({x:t,y:e},n,{top:s,right:r,bottom:i,left:o}){return t<o&&(e=dR(o,{x:t,y:e},n),t=o),t>r&&(e=dR(r,{x:t,y:e},n),t=r),e<s&&(t=JA(s,{x:t,y:e},n),e=s),e>i&&(t=JA(i,{x:t,y:e},n),e=i),{x:t,y:e}}function Ide(t,e,n){const{x:s,y:r}=gR(t,e,n),{x:i,y:o}=gR(e,t,n);return{x:s,y:r,x2:i,y2:o,width:Math.abs(i-s),height:Math.abs(o-r)}}function Vde(t,{mouseX:e,mouseY:n},s=Ml,r){const{x:i,y:o,x2:c,y2:u}=t.getProps(["x","y","x2","y2"],r),f=c-i,m=u-o,h=zf(f)+zf(m),g=h===0?-1:((e-i)*f+(n-o)*m)/h;let x,b;return g<0?(x=i,b=o):g>1?(x=c,b=u):(x=i+g*f,b=o+g*m),zf(e-x)+zf(n-b)<=s}function tw(t,{mouseX:e,mouseY:n},s,r){const i=t.label;return i.options.display&&i.inRange(e,n,r,s)}function zde(t,e,n){const s=n.borderWidth,r=As(n.padding),i=Ix(t.ctx,n),o=i.width+r.width+s,c=i.height+r.height+s;return Hde(e,n,{width:o,height:c,padding:r},t.chartArea)}function $de(t){const{x:e,y:n,x2:s,y2:r}=t,i=Math.atan2(r-n,s-e);return i>Lt/2?i-Lt:i<Lt/-2?i+Lt:i}function Hde(t,e,n,s){const{width:r,height:i,padding:o}=n,{xAdjust:c,yAdjust:u}=e,f={x:t.x,y:t.y},m={x:t.x2,y:t.y2},h=e.rotation==="auto"?$de(t):ds(e.rotation),g=Ude(r,i,h),x=Wde(t,e,{labelSize:g,padding:o},s),b=t.cp?ew(f,t.cp,m,x):IS(f,m,x),A={size:g.w,min:s.left,max:s.right,padding:o.left},_={size:g.h,min:s.top,max:s.bottom,padding:o.top},j=xR(b.x,A)+c,C=xR(b.y,_)+u;return{x:j-r/2,y:C-i/2,x2:j+r/2,y2:C+i/2,centerX:j,centerY:C,pointX:b.x,pointY:b.y,width:r,height:i,rotation:IF(h)}}function Ude(t,e,n){const s=Math.cos(n),r=Math.sin(n);return{w:Math.abs(t*s)+Math.abs(e*r),h:Math.abs(t*r)+Math.abs(e*s)}}function Wde(t,e,n,s){let r;const i=Yde(t,s);return e.position==="start"?r=yR({w:t.x2-t.x,h:t.y2-t.y},n,e,i):e.position==="end"?r=1-yR({w:t.x-t.x2,h:t.y-t.y2},n,e,i):r=PS(1,e.position),r}function yR(t,e,n,s){const{labelSize:r,padding:i}=e,o=t.w*s.dx,c=t.h*s.dy,u=o>0&&(r.w/2+i.left-s.x)/o,f=c>0&&(r.h/2+i.top-s.y)/c;return Lx(Math.max(u,f),0,.25)}function Yde(t,e){const{x:n,x2:s,y:r,y2:i}=t,o=Math.min(r,i)-e.top,c=Math.min(n,s)-e.left,u=e.bottom-Math.max(r,i),f=e.right-Math.max(n,s);return{x:Math.min(c,f),y:Math.min(o,u),dx:c<=f?1:-1,dy:o<=u?1:-1}}function xR(t,e){const{size:n,min:s,max:r,padding:i}=e,o=n/2;return n>r-s?(r+s)/2:(s>=t-i-o&&(t=s+i+o),r<=t+i+o&&(t=r-i-o),t)}function H5(t){const e=t.options,n=e.arrowHeads&&e.arrowHeads.start,s=e.arrowHeads&&e.arrowHeads.end;return{startOpts:n,endOpts:s,startAdjust:bR(t,n),endAdjust:bR(t,s)}}function bR(t,e){if(!e||!e.display)return 0;const{length:n,width:s}=e,r=t.options.borderWidth/2,i={x:n,y:s+r};return Math.abs(JA(0,i,{x:0,y:r}))}function nw(t,e,n,s){if(!s||!s.display)return;const{length:r,width:i,fill:o,backgroundColor:c,borderColor:u}=s,f=Math.abs(e-r)+n;t.beginPath(),ad(t,s),Bi(t,s),t.moveTo(f,-i),t.lineTo(e+n,0),t.lineTo(f,i),o===!0?(t.fillStyle=c||u,t.closePath(),t.fill(),t.shadowColor="transparent"):t.shadowColor=s.borderShadowColor,t.stroke()}function qde(t,e,n){const{x:s,y:r,x2:i,y2:o,centerX:c,centerY:u}=t,f=Math.atan2(o-r,i-s),m=LS(e.controlPoint,0),h={x:c+Bo(n,m.x,!1),y:u+Bo(n,m.y,!1)};return ic(h,{x:c,y:u},f)}function vR(t,{x:e,y:n},{angle:s,adjust:r},i){!i||!i.display||(t.save(),t.translate(e,n),t.rotate(s),nw(t,0,-r,i),t.restore())}function Gde(t,e,n,s){const{x:r,y:i,x2:o,y2:c,options:u}=e,{startOpts:f,endOpts:m,startAdjust:h,endAdjust:g}=H5(e),x={x:r,y:i},b={x:o,y:c},A=mR(x,n,b,0),_=mR(x,n,b,1)-Lt,j=ew(x,n,b,h/s),C=ew(x,n,b,1-g/s),k=new Path2D;t.beginPath(),k.moveTo(j.x,j.y),k.quadraticCurveTo(n.x,n.y,C.x,C.y),t.shadowColor=u.borderShadowColor,t.stroke(k),e.path=k,e.ctx=t,vR(t,j,{angle:A,adjust:h},f),vR(t,C,{angle:_,adjust:g},m)}class mm extends Ps{inRange(e,n,s,r){const i=this.options.rotation,o=(this.options.borderWidth+this.options.hitTolerance)/2;if(s!=="x"&&s!=="y")return Kde({x:e,y:n},this.getProps(["width","height","centerX","centerY"],r),i,o);const{x:c,y:u,x2:f,y2:m}=this.getProps(["x","y","x2","y2"],r),h=s==="y"?{start:u,end:m}:{start:c,end:f},g=ic({x:e,y:n},this.getCenterPoint(r),ds(-i));return g[s]>=h.start-o-Ml&&g[s]<=h.end+o+Ml}getCenterPoint(e){return oc(this,e)}draw(e){const{width:n,height:s,centerX:r,centerY:i,options:o}=this;e.save(),Bx(e,this.getCenterPoint(),o.rotation),ad(e,this.options),e.beginPath(),e.fillStyle=o.backgroundColor;const c=Bi(e,o);e.ellipse(r,i,s/2,n/2,Lt/2,0,2*Lt),e.fill(),c&&(e.shadowColor=o.borderShadowColor,e.stroke()),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){return V5(e,n)}}mm.id="ellipseAnnotation";mm.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,label:Object.assign({},id.defaults.label),rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};mm.defaultRoutes={borderColor:"color",backgroundColor:"color"};mm.descriptors={label:{_fallback:!0}};function Kde(t,e,n,s){const{width:r,height:i,centerX:o,centerY:c}=e,u=r/2,f=i/2;if(u<=0||f<=0)return!1;const m=ds(n||0),h=Math.cos(m),g=Math.sin(m),x=Math.pow(h*(t.x-o)+g*(t.y-c),2),b=Math.pow(g*(t.x-o)-h*(t.y-c),2);return x/Math.pow(u+s,2)+b/Math.pow(f+s,2)<=1.0001}class zx extends Ps{inRange(e,n,s,r){const{x:i,y:o,x2:c,y2:u,width:f}=this.getProps(["x","y","x2","y2","width"],r),m=(this.options.borderWidth+this.options.hitTolerance)/2;return s!=="x"&&s!=="y"?Hue({x:e,y:n},this.getCenterPoint(r),f/2,m):A5(s==="y"?{start:o,end:u,value:n}:{start:i,end:c,value:e},m)}getCenterPoint(e){return oc(this,e)}draw(e){const n=this.options,s=n.borderWidth;if(n.radius<.1)return;e.save(),e.fillStyle=n.backgroundColor,ad(e,n);const r=Bi(e,n);Xue(e,this,this.centerX,this.centerY),r&&!Fx(n.pointStyle)&&(e.shadowColor=n.borderShadowColor,e.stroke()),e.restore(),n.borderWidth=s}resolveElementProperties(e,n){const s=I5(e,n);return s.initProperties=rd(e,s,n),s}}zx.id="pointAnnotation";zx.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,pointStyle:"circle",radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};zx.defaultRoutes={borderColor:"color",backgroundColor:"color"};class $x extends Ps{inRange(e,n,s,r){if(s!=="x"&&s!=="y")return this.options.radius>=.1&&this.elements.length>1&&Xde(this.elements,e,n,r);const i=ic({x:e,y:n},this.getCenterPoint(r),ds(-this.options.rotation)),o=this.elements.map(f=>s==="y"?f.bY:f.bX),c=Math.min(...o),u=Math.max(...o);return i[s]>=c&&i[s]<=u}getCenterPoint(e){return oc(this,e)}draw(e){const{elements:n,options:s}=this;e.save(),e.beginPath(),e.fillStyle=s.backgroundColor,ad(e,s);const r=Bi(e,s);let i=!0;for(const o of n)i?(e.moveTo(o.x,o.y),i=!1):e.lineTo(o.x,o.y);e.closePath(),e.fill(),r&&(e.shadowColor=s.borderShadowColor,e.stroke()),e.restore()}resolveElementProperties(e,n){const s=I5(e,n),{sides:r,rotation:i}=n,o=[],c=2*Lt/r;let u=i*Gj;for(let f=0;f<r;f++,u+=c){const m=Qde(s,n,u);m.initProperties=rd(e,s,n),o.push(m)}return s.elements=o,s}}$x.id="polygonAnnotation";$x.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,point:{radius:0},radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,sides:3,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};$x.defaultRoutes={borderColor:"color",backgroundColor:"color"};function Qde({centerX:t,centerY:e},{radius:n,borderWidth:s,hitTolerance:r},i){const o=(s+r)/2,c=Math.sin(i),u=Math.cos(i),f={x:t+c*n,y:e-u*n};return{type:"point",optionScope:"point",properties:{x:f.x,y:f.y,centerX:f.x,centerY:f.y,bX:t+c*(n+o),bY:e-u*(n+o)}}}function Xde(t,e,n,s){let r=!1,i=t[t.length-1].getProps(["bX","bY"],s);for(const o of t){const c=o.getProps(["bX","bY"],s);c.bY>n!=i.bY>n&&e<(i.bX-c.bX)*(n-c.bY)/(i.bY-c.bY)+c.bX&&(r=!r),i=c}return r}const ko={box:id,doughnutLabel:Vx,ellipse:mm,label:fm,line:hm,point:zx,polygon:$x};Object.keys(ko).forEach(t=>{Mn.describe(`elements.${ko[t].id}`,{_fallback:"plugins.annotation.common"})});const Zde={update:Object.assign},Jde=BS.concat(Oy),_R=(t,e)=>Mt(e)?rw(t,e):t,sw=t=>t==="color"||t==="font";function VS(t="line"){return ko[t]?t:(console.warn(`Unknown annotation type: '${t}', defaulting to 'line'`),"line")}function efe(t,e,n,s){const r=nfe(t,n.animations,s),i=e.annotations,o=afe(e.elements,i);for(let c=0;c<i.length;c++){const u=i[c],f=U5(o,c,u.type),m=u.setContext(rfe(t,f,o,u)),h=f.resolveElementProperties(t,m);h.skip=tfe(h),"elements"in h&&(sfe(f,h.elements,m,r),delete h.elements),ar(f.x)||Object.assign(f,h),Object.assign(f,h.initProperties),h.options=W5(m),r.update(f,h)}}function tfe(t){return isNaN(t.x)||isNaN(t.y)}function nfe(t,e,n){return n==="reset"||n==="none"||n==="resize"?Zde:new aS(t,e)}function sfe(t,e,n,s){const r=t.elements||(t.elements=[]);r.length=e.length;for(let i=0;i<e.length;i++){const o=e[i],c=o.properties,u=U5(r,i,o.type,o.initProperties),f=n[o.optionScope].override(o);c.options=W5(f),s.update(u,c)}}function U5(t,e,n,s){const r=ko[VS(n)];let i=t[e];return(!i||!(i instanceof r))&&(i=t[e]=new r,Object.assign(i,s)),i}function W5(t){const e=ko[VS(t.type)],n={};n.id=t.id,n.type=t.type,n.drawTime=t.drawTime,Object.assign(n,rw(t,e.defaults),rw(t,e.defaultRoutes));for(const s of Jde)n[s]=t[s];return n}function rw(t,e){const n={};for(const s of Object.keys(e)){const r=e[s],i=t[s];sw(s)&&bn(i)?n[s]=i.map(o=>_R(o,r)):n[s]=_R(i,r)}return n}function rfe(t,e,n,s){return e.$context||(e.$context=Object.assign(Object.create(t.getContext()),{element:e,get elements(){return n.filter(r=>r&&r.options)},id:s.id,type:"annotation"}))}function afe(t,e){const n=e.length,s=t.length;if(s<n){const r=n-s;t.splice(s,0,...new Array(r))}else s>n&&t.splice(n,s-n);return t}var ife="3.1.0";const yo=new Map,AR=t=>t.type!=="doughnutLabel",ofe=BS.concat(Oy);var Y5={id:"annotation",version:ife,beforeRegister(){Uue("chart.js","4.0",zs.version)},afterRegister(){zs.register(ko)},afterUnregister(){zs.unregister(ko)},beforeInit(t){yo.set(t,{annotations:[],elements:[],visibleElements:[],listeners:{},listened:!1,moveListened:!1,hooks:{},hooked:!1,hovered:[]})},beforeUpdate(t,e,n){const s=yo.get(t),r=s.annotations=[];let i=n.annotations;Mt(i)?Object.keys(i).forEach(o=>{const c=i[o];Mt(c)&&(c.id=o,r.push(c))}):bn(i)&&r.push(...i),jde(r.filter(AR),t.scales)},afterDataLimits(t,e){const n=yo.get(t);wde(t,e.scale,n.annotations.filter(AR).filter(s=>s.display&&s.adjustScaleRange))},afterUpdate(t,e,n){const s=yo.get(t);xde(t,s,n),efe(t,s,n,e.mode),s.visibleElements=s.elements.filter(r=>!r.skip&&r.options.display),Ade(t,s,n)},beforeDatasetsDraw(t,e,n){Nf(t,"beforeDatasetsDraw",n.clip)},afterDatasetsDraw(t,e,n){Nf(t,"afterDatasetsDraw",n.clip)},beforeDatasetDraw(t,e,n){Nf(t,e.index,n.clip)},beforeDraw(t,e,n){Nf(t,"beforeDraw",n.clip)},afterDraw(t,e,n){Nf(t,"afterDraw",n.clip)},beforeEvent(t,e,n){const s=yo.get(t);bde(s,e.event,n)&&(e.changed=!0)},afterDestroy(t){yo.delete(t)},getAnnotations(t){const e=yo.get(t);return e?e.elements:[]},_getAnnotationElementsAtEventForMode(t,e,n){return OS(t,e,n)},defaults:{animations:{numbers:{properties:["x","y","x2","y2","width","height","centerX","centerY","pointX","pointY","radius"],type:"number"},colors:{properties:["backgroundColor","borderColor"],type:"color"}},clip:!0,interaction:{mode:void 0,axis:void 0,intersect:void 0},common:{drawTime:"afterDatasetsDraw",init:!1,label:{}}},descriptors:{_indexable:!1,_scriptable:t=>!ofe.includes(t)&&t!=="init",annotations:{_allKeys:!1,_fallback:(t,e)=>`elements.${ko[VS(e.type)].id}`},interaction:{_fallback:!0},common:{label:{_indexable:sw,_fallback:!0},_indexable:sw}},additionalOptionScopes:[""]};function Nf(t,e,n){const{ctx:s,chartArea:r}=t,i=yo.get(t);n&&tm(s,r);const o=lfe(i.visibleElements,e).sort((c,u)=>c.element.options.z-u.element.options.z);for(const c of o)cfe(s,r,i,c);n&&nm(s)}function lfe(t,e){const n=[];for(const s of t)if(s.options.drawTime===e&&n.push({element:s,main:!0}),s.elements&&s.elements.length)for(const r of s.elements)r.options.display&&r.options.drawTime===e&&n.push({element:r});return n}function cfe(t,e,n,s){const r=s.element;s.main?(lR(n,r,"beforeDraw"),r.draw(t,e),lR(n,r,"afterDraw")):r.draw(t,e)}const ufe={full:"EEEE, dd MMMM yyyy",long:"dd MMMM yyyy",medium:"dd MMM yyyy",short:"yyyy/MM/dd"},dfe={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},ffe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},hfe={date:fu({formats:ufe,defaultWidth:"full"}),time:fu({formats:dfe,defaultWidth:"full"}),dateTime:fu({formats:ffe,defaultWidth:"full"})},zS={code:"en-ZA",formatDistance:L4,formatLong:hfe,formatRelative:F4,localize:B4,match:I4,options:{weekStartsOn:0,firstWeekContainsDate:1}},Hx=v.createContext({schedule:[],setSchedule:()=>{}});function mfe({children:t}){const e=[.12,.06,.05,...Array(17).fill(.09)],[n,s]=v.useState(e);return a.jsx(Hx.Provider,{value:{schedule:n,setSchedule:s},children:t})}zs.register(Yo,qo,bx,$i,fa,Uo,Wo,Ho,Oo,Y5,jS);const kf=t=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR",maximumFractionDigits:0}).format(t||0);function q5({projectId:t}){const{showNotification:e}=Os(),[n,s]=v.useState(""),[r,i]=v.useState(1),[o,c]=v.useState(!1),[u,f]=v.useState(null),[m,h]=v.useState(null),[g,x]=v.useState(!1),[b,A]=v.useState(null),[_,j]=v.useState(null),[C,k]=v.useState(!1),[E,N]=v.useState(!1),[L,M]=v.useState(null),{schedule:T}=v.useContext(Hx);v.useEffect(()=>{Re.get(`${Ce}/api/projects/${t}`).then(ae=>{const te=ae.data;te&&te.project_value_excl_vat!=null&&(s(te.project_value_excl_vat),console.log("Project VALUE from FinModeling: ",te.project_value_excl_vat),te.from_standard_template&&(N(!0),M({name:te.template_name||"Standard Design"})))}).catch(ae=>console.error("Error loading project value:",ae));const D=sessionStorage.getItem(`simulationData_${t}`);if(D)try{const ae=JSON.parse(D);if(ae&&ae.timestamps&&(h(ae),ae.timestamps&&ae.timestamps.length>0)){const te=new Date(ae.timestamps[0]),X=new Date(te);X.setDate(X.getDate()+7),A(te),j(X)}}catch{e("Failed to parse cached simulation data.","danger")}else e("No simulation data found in session storage. Please run a simulation first.","danger");const B=sessionStorage.getItem(`financialResult_${t}`);B&&f(JSON.parse(B));const se=sessionStorage.getItem(`feedInTariff_${t}`),le=sessionStorage.getItem(`allowExport_${t}`);se&&i(se),le&&c(le==="true")},[t,e]);const O=()=>{if(!m){e("Please run a simulation first to generate the required data.","danger");return}x(!0),Re.post(`${Ce}/api/financial_model`,{project_id:t,export_enabled:o,feed_in_tariff:parseFloat(r),simulation_data:m,escalation_schedule:T}).then(D=>{f(D.data),sessionStorage.setItem(`financialResult_${t}`,JSON.stringify(D.data)),x(!1)}).catch(D=>{const B=D.response?.data?.error||D.message;console.error("Error calculating financial model:",B),e(`Error calculating financial model: ${B}`,"danger"),x(!1)})},I=v.useMemo(()=>{if(!m||!b||!_)return{labels:[],datasets:[]};const D=m,B=D.timestamps.findIndex(te=>new Date(te)>=b);let se=D.timestamps.findIndex(te=>new Date(te)>_);if(se===-1&&(se=D.timestamps.length),B===-1)return{labels:[],datasets:[]};const le=D.timestamps.slice(B,se).map(te=>new Date(te)),ae=[{label:"Demand (kW)",data:D.demand.slice(B,se),borderColor:"#ff6384",backgroundColor:"#ff638420",tension:.3,pointRadius:0,borderWidth:2},{label:"Grid Import (kW)",data:D.import_from_grid.slice(B,se),borderColor:"#cc65fe",backgroundColor:"#cc65fe20",tension:.3,pointRadius:0,borderWidth:1.5,borderDash:[5,5]},{label:"Battery SOC (%)",data:D.battery_soc.slice(B,se),borderColor:"#ffce56",backgroundColor:"#ffce5620",yAxisID:"y1",tension:.3,pointRadius:0,borderWidth:2}];return C?(ae.push({label:"PV Generation (kW)",data:D.generation.slice(B,se),borderColor:"#36a2eb",backgroundColor:"#36a2eb20",tension:.3,pointRadius:0,borderWidth:1.5}),ae.push({label:"Potential PV (kW)",data:D.potential_generation.slice(B,se),borderColor:"rgba(75, 192, 192, 0.7)",backgroundColor:"rgba(75, 192, 192, 0.1)",tension:.3,pointRadius:0,borderWidth:1.5,borderDash:[3,3]})):ae.push({label:"PV Generation (kW)",data:D.generation.slice(B,se),borderColor:"#36a2eb",backgroundColor:"#36a2eb20",tension:.3,pointRadius:0,borderWidth:2}),{labels:le,datasets:ae}},[m,b,_,C]),$=v.useMemo(()=>{if(!u?.cost_comparison)return{labels:[],datasets:[]};const D=u;return{labels:D.cost_comparison.map(se=>new Date(se.month).toLocaleString("default",{month:"short",year:"2-digit"})),datasets:[{label:"Old Bill",data:D.cost_comparison.map(se=>se.old_cost),backgroundColor:"#ff6384"},{label:"New Bill (with Solar)",data:D.cost_comparison.map(se=>se.new_cost),backgroundColor:"#36a2eb"}]}},[u]),H=v.useMemo(()=>{if(!u?.cost_comparison)return{labels:[],datasets:[]};const D=u,B=D.is_offgrid_with_generator,se=D.cost_comparison.map(ae=>new Date(ae.month).toLocaleString("default",{month:"short",year:"2-digit"}));let le=[];return B?le=[{label:"Old Bill - Energy",data:D.cost_comparison.map(ae=>ae.old_bill_breakdown?.energy||0),backgroundColor:"#f87171",stack:"Stack 0"},{label:"Old Bill - Fixed",data:D.cost_comparison.map(ae=>ae.old_bill_breakdown?.fixed||0),backgroundColor:"#9ca3af",stack:"Stack 0"},{label:"Old Bill - Demand",data:D.cost_comparison.map(ae=>ae.old_bill_breakdown?.demand||0),backgroundColor:"#b91c1c",stack:"Stack 0"},{label:"New Generator Costs",data:D.cost_comparison.map(ae=>ae.new_bill_breakdown?.generator||0),backgroundColor:"#059669",stack:"Stack 1"}]:le=[{label:"Old Bill - Energy",data:D.cost_comparison.map(ae=>ae.old_bill_breakdown?.energy||0),backgroundColor:"#f87171",stack:"Stack 0"},{label:"Old Bill - Fixed",data:D.cost_comparison.map(ae=>ae.old_bill_breakdown?.fixed||0),backgroundColor:"#9ca3af",stack:"Stack 0"},{label:"Old Bill - Demand",data:D.cost_comparison.map(ae=>ae.old_bill_breakdown?.demand||0),backgroundColor:"#b91c1c",stack:"Stack 0"},{label:"New Bill - Energy",data:D.cost_comparison.map(ae=>ae.new_bill_breakdown?.energy||0),backgroundColor:"#60a5fa",stack:"Stack 1"},{label:"New Bill - Fixed",data:D.cost_comparison.map(ae=>ae.new_bill_breakdown?.fixed||0),backgroundColor:"#6b7280",stack:"Stack 1"},{label:"New Bill - Demand",data:D.cost_comparison.map(ae=>ae.new_bill_breakdown?.demand||0),backgroundColor:"#1d4ed8",stack:"Stack 1"}],{labels:se,datasets:le.filter(ae=>ae.data.some(te=>te!==0&&te!==null))}},[u]),V=v.useMemo(()=>!u?.lifetime_cashflow||u.lifetime_cashflow.length===0?{labels:[],datasets:[]}:{labels:u.lifetime_cashflow.map(D=>`Year ${D.year}`),datasets:[{label:"Cumulative Cashflow (R)",data:u.lifetime_cashflow.map(D=>D.cashflow),borderColor:"#27ae60",backgroundColor:"rgba(39, 174, 96, 0.1)",fill:!0,tension:.3}]},[u]),G=v.useMemo(()=>{if(!u?.lifetime_cashflow||u.lifetime_cashflow.length===0)return null;const D=u.lifetime_cashflow.findIndex(ae=>ae.cashflow>=0);if(D===-1)return null;if(D===0)return 0;const B=u.lifetime_cashflow[D-1].cashflow,se=u.lifetime_cashflow[D].cashflow;if(se-B===0)return D;const le=-B/(se-B);return D-1+le},[u]),U={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},scales:{x:{type:"time",time:{unit:"day",tooltipFormat:"MMM dd, HH:mm"},adapters:{date:{locale:zS}}},y:{beginAtZero:!0,title:{display:!0,text:"Power (kW)"}},y1:{type:"linear",display:!0,position:"right",beginAtZero:!0,max:100,title:{display:!0,text:"Battery SOC (%)"},grid:{drawOnChartArea:!1}}},plugins:{datalabels:{display:!1}}};if(g)return a.jsxs("div",{className:"text-center py-5",children:[a.jsx(Ot,{animation:"border",variant:"primary"}),a.jsx("p",{className:"mt-3",children:"Calculating financial projections..."})]});const R=u?.cost_comparison||[],P=R.filter(D=>D.month.startsWith("2025-")).reduce((D,B)=>D+B.old_cost,0),Z=R.filter(D=>D.month.startsWith("2025-")).reduce((D,B)=>D+B.new_cost,0),ne=P-Z;return a.jsxs("div",{className:"p-lg-4",style:{backgroundColor:"#f8f9fa"},children:[a.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-4 text-center",children:"Financial Analysis"}),a.jsx(me,{className:"shadow-sm mb-4",children:a.jsxs(me.Body,{children:[a.jsx("h5",{className:"mb-3",children:"Financial Parameters"}),a.jsxs(nt,{children:[a.jsx(ge,{md:4,children:a.jsxs(z.Group,{className:"mb-3",children:[a.jsxs(z.Label,{children:["Project Value (excl. VAT)",a.jsx("span",{className:"text-muted ms-2",style:{fontSize:"0.85em"},children:E?"Set from standard design":""})]}),a.jsx(z.Control,{type:"number",className:`${E?"border-success":"border-light"}`,value:n,onChange:D=>{s(D.target.value),sessionStorage.setItem(`projectValue_${t}`,D.target.value)},onBlur:()=>{Re.put(`${Ce}/api/projects/${t}`,{project_value_excl_vat:parseFloat(n)}).then(()=>console.log("Project value updated")).catch(D=>{console.error("Error saving project value:",D),e("Could not save project value.","danger")})}})]})}),u?.system_type!=="off-grid"&&a.jsxs(a.Fragment,{children:[a.jsx(ge,{md:4,children:a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{children:"Allow Export to Grid?"}),a.jsx(z.Check,{type:"switch",id:"export-switch",checked:o,onChange:()=>{const D=!o;c(D),sessionStorage.setItem(`allowExport_${t}`,D)},label:o?"Enabled":"Disabled"})]})}),a.jsx(ge,{md:4,children:a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{children:"Feed-in Tariff (R/kWh)"}),a.jsx(z.Control,{type:"number",value:r,onChange:D=>{i(D.target.value),sessionStorage.setItem(`feedInTariff_${t}`,D.target.value)},step:"0.01",min:"0",disabled:!o})]})})]}),u?.system_type==="off-grid"&&a.jsx(ge,{md:8,children:a.jsxs("div",{className:"p-3 bg-info bg-opacity-10 rounded",children:[a.jsx("i",{className:"bi bi-info-circle text-info me-2"}),a.jsx("strong",{children:"Off-grid System"})]})})]}),a.jsx(Fe,{variant:"primary",onClick:O,disabled:g||!m,className:"mt-2",children:g?a.jsxs(a.Fragment,{children:[a.jsx(Ot,{size:"sm",animation:"border",className:"me-2"}),"Calculating..."]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"bi bi-calculator me-2"}),"Calculate Financial Model"]})})]})}),a.jsxs(nt,{className:"mb-2 g-2",children:[a.jsx(ge,{md:3,className:"mb-1",children:a.jsx(me,{className:"text-center shadow-sm h-100",children:a.jsxs(me.Body,{className:"py-2",children:[a.jsx("div",{className:"fs-1 text-secondary",children:a.jsx("i",{className:"bi bi-cash-stack"})}),a.jsx("h5",{children:"Total System Cost"}),a.jsx("h3",{className:"fw-bold",children:kf(n)})]})})}),a.jsx(ge,{md:3,className:"mb-1",children:a.jsx(me,{className:"text-center shadow-sm h-100",children:a.jsxs(me.Body,{className:"py-2",children:[a.jsx("div",{className:"fs-1 text-warning",children:a.jsx("i",{className:"bi bi-sun-fill"})}),a.jsx("h5",{children:"PV Size"}),a.jsx("h3",{className:"fw-bold",children:m?.panel_kw?`${m.panel_kw} kWp`:"N/A"})]})})}),a.jsx(ge,{md:3,className:"mb-1",children:a.jsx(me,{className:"text-center shadow-sm h-100",children:a.jsxs(me.Body,{className:"py-2",children:[a.jsx("div",{className:"fs-1 text-danger",children:a.jsx("i",{className:"bi bi-cpu-fill"})}),a.jsx("h5",{children:"Inverter Size"}),a.jsx("h3",{className:"fw-bold",children:m?.inverter_kva?`${m.inverter_kva} kVA`:"N/A"})]})})}),a.jsx(ge,{md:3,className:"mb-1",children:a.jsx(me,{className:"text-center shadow-sm h-100",children:a.jsxs(me.Body,{className:"py-2",children:[a.jsx("div",{className:"fs-1 text-success",children:a.jsx("i",{className:"bi bi-battery-charging"})}),a.jsx("h5",{children:"Battery Size"}),a.jsx("h3",{className:"fw-bold",children:m?.battery_kwh&&m.battery_kwh>0?`${m.battery_kwh} kWh`:"0 kWh"})]})})})]}),u&&a.jsxs(a.Fragment,{children:[a.jsxs(nt,{className:"mb-4 g-2",children:[a.jsx(ge,{md:3,className:"mb-1",children:a.jsx(me,{className:"text-center shadow-sm h-100",children:a.jsxs(me.Body,{className:"py-2",children:[a.jsx("div",{className:"fs-1 text-success",children:a.jsx("i",{className:"bi bi-wallet2"})}),a.jsx("h5",{children:"Annual Savings"}),a.jsx("h3",{className:"fw-bold",children:kf(u.annual_savings)})]})})}),a.jsx(ge,{md:3,className:"mb-1",children:a.jsx(me,{className:"text-center shadow-sm h-100",children:a.jsxs(me.Body,{className:"py-2",children:[a.jsx("div",{className:"fs-1 text-primary",children:a.jsx("i",{className:"bi bi-lightning-charge-fill"})}),a.jsx("h5",{children:"LCOE"}),a.jsxs("h3",{className:"fw-bold",children:["R ",u.lcoe?.toFixed(2)||"N/A","/kWh"]})]})})}),a.jsx(ge,{md:3,className:"mb-1",children:a.jsx(me,{className:"text-center shadow-sm h-100",children:a.jsxs(me.Body,{className:"py-2",children:[a.jsx("div",{className:"fs-1 text-info",children:a.jsx("i",{className:"bi bi-calendar-check"})}),a.jsx("h5",{children:"Payback Period"}),a.jsxs("h3",{className:"fw-bold",children:[G!==null?G.toFixed(1):u.payback_period," Years"]})]})})}),a.jsx(ge,{md:3,className:"mb-1",children:a.jsx(me,{className:"text-center shadow-sm h-100",children:a.jsxs(me.Body,{className:"py-2",children:[a.jsx("div",{className:"fs-1 text-warning",children:a.jsx("i",{className:"bi bi-graph-up-arrow"})}),a.jsx("h5",{children:"20-Year ROI"}),a.jsxs("h3",{className:"fw-bold",children:[u.roi,"%"]})]})})})]}),a.jsxs(me,{className:"shadow-sm my-4",children:[a.jsxs(me.Header,{as:"h5",className:"d-flex justify-content-between align-items-center flex-wrap",children:[a.jsxs("span",{children:[a.jsx("i",{className:"bi bi-bar-chart-line-fill me-2"}),"Weekly Energy Flow (Sample)"]}),a.jsx("div",{className:"d-flex align-items-center",children:a.jsxs(Fe,{variant:C?"primary":"outline-secondary",size:"sm",className:"me-3",onClick:()=>k(!C),children:[a.jsx("i",{className:`bi ${C?"bi-eye-slash-fill":"bi-eye-fill"} me-2`}),C?"Hide Losses":"Show Losses"]})}),a.jsx("div",{className:"date-picker-container",children:a.jsx(Xl,{selected:b,onChange:D=>{const[B,se]=D;A(B),j(se)},startDate:b,endDate:_,selectsRange:!0,isClearable:!1,dateFormat:"dd/MM/yyyy",className:"form-control form-control-sm shadow-sm",popperPlacement:"bottom-end",minDate:m?.timestamps&&new Date(m.timestamps[0]),maxDate:m?.timestamps&&new Date(m.timestamps[m.timestamps.length-1])})})]}),a.jsx(me.Body,{style:{height:"400px"},children:a.jsx(Rs,{options:U,data:I})})]}),u?.system_type==="off-grid"&&u?.has_shortfall&&a.jsxs(kt,{variant:"danger",className:"mb-3",children:[a.jsxs("b",{children:["Shortfall: ",u.energy_shortfall_total_kwh.toFixed(1)," kWh/year "]}),"(Add more PV/battery or a generator)."]}),a.jsxs(nt,{children:[a.jsx(ge,{lg:6,className:"mb-4",children:a.jsxs(me,{className:"shadow-sm h-100",children:[a.jsxs(me.Header,{as:"h5",children:[a.jsx("i",{className:"bi bi-piggy-bank-fill me-2"}),"Annual Performance"]}),a.jsx(vn,{striped:!0,hover:!0,responsive:!0,className:"mb-0",children:a.jsxs("tbody",{children:[a.jsxs("tr",{children:[a.jsx("td",{children:"Total Consumption"}),a.jsxs("td",{className:"text-end fw-bold",children:[u.total_demand_kwh?.toLocaleString()," kWh"]})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Direct Solar Consumption"}),a.jsxs("td",{className:"text-end fw-bold",children:[u.total_generation_kwh?.toLocaleString()," kWh"]})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Potential Generation"}),a.jsxs("td",{className:"text-end fw-bold",children:[u.potential_generation_kwh?.toLocaleString()," kWh"]})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Energy Imported from Grid"}),a.jsxs("td",{className:"text-end fw-bold text-danger",children:[u.total_import_kwh?.toLocaleString()," kWh"]})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Self-Consumption Rate"}),a.jsx("td",{className:"text-end fw-bold",children:a.jsxs(tt,{bg:"primary",className:"fs-6",children:[u.self_consumption_rate,"%"]})})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Grid Independence"}),a.jsx("td",{className:"text-end fw-bold",children:a.jsxs(tt,{bg:"primary",className:"fs-6",children:[u.grid_independence_rate,"%"]})})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Throttling Losses"}),a.jsx("td",{className:"text-end fw-bold",children:a.jsxs(tt,{bg:"warning",text:"dark",className:"fs-6",children:[u.throttling_loss_percent,"%"]})})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Specific Yield (incl. throttling losses)"}),a.jsx("td",{className:"text-end fw-bold",children:a.jsxs(tt,{bg:"secondary",className:"fs-6",children:[u.yield_incl_losses," kWh/kWp/day"]})})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Specific Yield (excl. throttling losses)"}),a.jsx("td",{className:"text-end fw-bold",children:a.jsxs(tt,{bg:"secondary",className:"fs-6",children:[u.yield_excl_losses," kWh/kWp/day"]})})]})]})})]})}),a.jsx(ge,{lg:6,className:"mb-4",children:a.jsxs(me,{className:"shadow-sm h-100",children:[a.jsxs(me.Header,{as:"h5",children:[a.jsx("i",{className:"bi bi-calendar-month-fill me-2"}),"Monthly Bill Comparison"]}),a.jsx(me.Body,{style:{height:"350px"},children:a.jsx(ia,{options:{responsive:!0,maintainAspectRatio:!1,plugins:{datalabels:{display:!1}},scales:{x:{stacked:!1},y:{stacked:!1,title:{display:!0,text:"Cost (R)"}}}},data:$})})]})})]}),a.jsx("hr",{className:"my-5"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-700 mb-4 text-center",children:u?.is_offgrid_with_generator?"Generator Cost Analysis":"Tariff & Cost Analysis"}),a.jsxs(nt,{children:[a.jsx(ge,{lg:4,className:"mb-4",children:a.jsxs(me,{className:"shadow-sm h-100",children:[a.jsxs(me.Header,{as:"h5",children:[a.jsx("i",{className:`bi ${u?.is_offgrid_with_generator?"bi-fuel-pump":"bi-clock-history"} me-2`}),u?.is_offgrid_with_generator?"Generator Cost Structure":"Tariff Rate Sample (First Week)"]}),a.jsx(me.Body,{style:{height:"450px",overflowY:"auto"},children:u?.is_offgrid_with_generator?a.jsxs("div",{children:[a.jsxs("div",{className:"mb-3 p-3 bg-light rounded",children:[a.jsx("h6",{className:"text-primary mb-2",children:"⛽ Diesel Information"}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-6",children:[a.jsx("p",{className:"small text-muted mb-1",children:a.jsx("strong",{children:"Diesel Price:"})}),a.jsxs("p",{className:"h6 mb-2",children:["R",u.diesel_price_r_per_liter?.toFixed(2)||"23.50","/L"]})]}),a.jsxs("div",{className:"col-6",children:[a.jsx("p",{className:"small text-muted mb-1",children:a.jsx("strong",{children:"Generator Efficiency:"})}),a.jsxs("p",{className:"h6 mb-2",children:[u.generator_efficiency_kwh_per_liter?.toFixed(2)||"0.00"," kWh/L"]})]})]}),a.jsx("p",{className:"small text-muted mb-1",children:a.jsx("strong",{children:"Total Generator Energy (Annual):"})}),a.jsxs("p",{className:"h6 mb-0",children:[u.generator_energy?.toLocaleString()||"0"," kWh"]})]}),a.jsxs("div",{className:"p-3 bg-success bg-opacity-10 rounded",children:[a.jsx("h6",{className:"text-success mb-2",children:"📊 Annual Savings"}),a.jsx("p",{className:"h4 text-success mb-1",children:kf(u.annual_savings)}),a.jsx("p",{className:"small text-muted mb-0",children:"Reduced fuel and maintenance costs"})]})]}):a.jsxs(vn,{striped:!0,hover:!0,size:"sm",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Timestamp"}),a.jsx("th",{className:"text-end",children:"Rate (R/kWh)"})]})}),a.jsx("tbody",{children:u.tariff_sample?.map((D,B)=>a.jsxs("tr",{children:[a.jsx("td",{children:new Date(D.timestamp).toLocaleString("en-ZA",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}),a.jsx("td",{className:"text-end fw-bold",children:D.rate.toFixed(2)})]},B))})]})})]})}),a.jsx(ge,{lg:8,className:"mb-4",children:a.jsxs(me,{className:"shadow-sm h-100",children:[a.jsxs(me.Header,{as:"h5",children:[a.jsx("i",{className:"bi bi-pie-chart-fill me-2"}),u?.is_offgrid_with_generator?"Monthly Generator Cost Comparison":"Monthly Bill Composition (New Bill)"]}),a.jsx(me.Body,{style:{height:"450px"},children:a.jsx(ia,{options:{responsive:!0,maintainAspectRatio:!1,plugins:{datalabels:{display:!1}},scales:{x:{stacked:!0},y:{stacked:!0,title:{display:!0,text:"Cost (R)"}}}},data:H})})]})})]}),a.jsx("hr",{className:"my-5"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-700 mb-4 text-center",children:"Advanced Financial Analysis"}),a.jsxs(nt,{children:[a.jsx(ge,{lg:5,className:"mb-4",children:a.jsxs(me,{className:"shadow-sm h-100",children:[a.jsxs(me.Header,{as:"h5",children:[a.jsx("i",{className:"bi bi-calendar-range-fill me-2"}),"Bill Fluctuation Analysis"]}),a.jsxs(me.Body,{className:"d-flex flex-column justify-content-center",children:[a.jsx("p",{className:"text-muted",children:"An estimate of the highest and lowest monthly bills you can expect after installing solar."}),a.jsxs(vn,{borderless:!0,className:"text-center mt-3",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:a.jsx(tt,{bg:"danger",className:"fs-6 px-3 py-2",children:"Highest Bill"})}),a.jsx("th",{children:a.jsx(tt,{bg:"success",className:"fs-6 px-3 py-2",children:"Lowest Bill"})})]})}),a.jsx("tbody",{children:a.jsxs("tr",{className:"align-middle",children:[a.jsxs("td",{className:"py-3",children:[a.jsx("h4",{className:"fw-bold mb-0",children:kf(u.bill_fluctuation?.worst?.cost)}),a.jsxs("span",{className:"text-muted small",children:["(",u.bill_fluctuation?.worst?.month&&new Date(u.bill_fluctuation.worst.month+"-01").toLocaleString("default",{month:"long"}),")"]})]}),a.jsxs("td",{className:"py-3",children:[a.jsx("h4",{className:"fw-bold mb-0",children:kf(u.bill_fluctuation?.best?.cost)}),a.jsxs("span",{className:"text-muted small",children:["(",u.bill_fluctuation?.best?.month&&new Date(u.bill_fluctuation.best.month+"-01").toLocaleString("default",{month:"long"}),")"]})]})]})})]})]})]})}),a.jsx(ge,{lg:7,className:"mb-4",children:a.jsxs(me,{className:"shadow-sm h-100",children:[a.jsxs(me.Header,{as:"h5",children:[a.jsx("i",{className:"bi bi-cash-stack me-2"}),"Lifetime Financial Performance (20 Years)"]}),a.jsx(me.Body,{style:{height:"350px"},children:a.jsx(Rs,{options:{responsive:!0,maintainAspectRatio:!1,plugins:{annotation:G!==null?{annotations:{paybackLine:{type:"line",xMin:G,xMax:G,borderColor:"red",borderWidth:2,label:{content:`Payback: Year ${G?.toFixed(1)}`,enabled:!0,position:"start",backgroundColor:"red",color:"white"}}}}:{},datalabels:{display:!1}},scales:{y:{title:{display:!0,text:"Cumulative Savings (R)"}}}},data:V})})]})})]}),a.jsxs(me,{className:"shadow-sm my-4",children:[a.jsxs(me.Header,{as:"h5",children:[a.jsx("i",{className:"bi bi-bar-chart-fill me-2"}),"2025 Annual Cost Comparison"]}),a.jsx(me.Body,{children:a.jsx("div",{style:{height:"350px"},children:a.jsx(ia,{data:{labels:["2025 Costs"],datasets:[{label:"Current Cost (R)",data:[P],backgroundColor:"rgba(255, 99, 132, 0.5)"},{label:"New Cost (R)",data:[Z],backgroundColor:"rgba(54, 162, 235, 0.5)",stack:"combined"},{label:"Savings (R)",data:[ne],backgroundColor:"rgba(75, 192, 192, 0.5)",stack:"combined"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"2025 Annual Cost Comparison"},datalabels:{display:!0,formatter:D=>`R${D.toFixed(0)}`,font:{weight:"bold"},color:"white"}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Rand"},stacked:!0},x:{stacked:!0}}}})})})]}),a.jsxs(me,{className:"shadow-sm my-4",children:[a.jsxs(me.Header,{as:"h5",children:[a.jsx("i",{className:"bi bi-graph-up me-2"}),"Projected Savings Over 20 Years"]}),a.jsx(me.Body,{children:a.jsx("div",{style:{height:"350px"},children:a.jsx(ia,{data:{labels:u.yearly_savings.map(D=>D.year),datasets:[{label:"Annual Savings (R)",data:u.yearly_savings.map(D=>D.savings),backgroundColor:"rgba(75, 192, 192, 0.6)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Projected Savings Over 20 Years"},datalabels:{display:!1}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Rand"}},x:{title:{display:!0,text:"Year"}}}}})})})]})]}),!m&&!g&&a.jsxs("div",{className:"text-center py-5",children:[a.jsx("i",{className:"bi bi-exclamation-circle fs-1 text-warning"}),a.jsx("h4",{className:"mt-3",children:"No Simulation Data Available"}),a.jsx("p",{className:"text-muted mb-4",children:"Please run a simulation in the System Design tab first before calculating financial metrics."})]})]})}const pfe="/assets/OrkaLogoWithText-CUNk_zOx.png",gfe="/assets/solar_panel_bg-DhYdkrLQ.png";function yfe({data:t}){const e=(r,i,o="")=>r==null?i:typeof r=="object"?o==="battery_kwh"&&r.capacity&&r.quantity?(r.capacity*r.quantity).toString():r.capacity&&r.quantity?`${r.capacity*r.quantity}`:r.capacity||r.quantity||Object.values(r)[0]||i:r,n=t?.project||{name:"Toets Solar PV Solution",id:"24108_Proposal",description:"Design Report and Costing for grid tied solar PV supply solution",inverter_kva:"50",panel_kw:"32.1",load_shedding:"0",version:"Final",compiled_by:"L. Botha",client_name:"Cecil & Bryan Rutherford"},s=new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"long",year:"numeric"});return a.jsxs("section",{className:"orka-reference-cover",children:[a.jsx("img",{className:"orka-cover-bgimg",src:gfe,alt:""}),a.jsx("img",{className:"orka-cover-logo-topright",src:pfe,alt:"Orka Solar Logo"}),a.jsxs("div",{className:"orka-cover-centerblock",children:[a.jsx("div",{className:"orka-cover-mainheading",children:"Design Report and Costing"}),a.jsxs("div",{className:"orka-cover-proposalno",children:["Proposal_270825_",n.id]}),a.jsx("hr",{className:"orka-cover-line"}),a.jsx("div",{className:"orka-cover-projectname",children:n.name}),a.jsxs("div",{className:"orka-cover-specblock",children:[a.jsxs("span",{children:["Inverting: ",a.jsxs("b",{children:[e(n.inverter_kva,"50","inverter_kva")," kVA"]})]}),a.jsx("br",{}),a.jsxs("span",{children:["ESS: ",a.jsxs("b",{children:[n.battery_nominal_rating," kWh"]})]}),a.jsx("br",{}),a.jsxs("span",{children:["PV: ",a.jsxs("b",{children:[e(n.panel_kw,"32.1","panel_kw")," kWp"]})]}),a.jsx("br",{}),a.jsxs("span",{children:["Load Shedding Scenario: ",a.jsx("b",{children:e(n.load_shedding,"0")})]})]}),a.jsx("hr",{className:"orka-cover-line"}),a.jsx("div",{className:"orka-cover-description",children:n.description})]}),a.jsxs("div",{className:"orka-cover-footerblock",children:[a.jsx("div",{className:"orka-cover-date",children:s}),a.jsxs("div",{className:"orka-cover-preparedfor",children:["Prepared for: ",e(n.client_name,"Client"),a.jsx("br",{}),"Project Owner: ",e(n.client_name,"Owner"),a.jsx("br",{}),"Document version: ",e(n.version,"1.0"),a.jsx("br",{}),"Compiled by: ",e(n.compiled_by,"Orka Solar")]})]})]})}const xfe="/assets/site_photo-CUqxVTPh.png",G5="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABOCAMAAAC0aqBoAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAJMUExURQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgwKRIAAADEdFJOUwAbKykJuvf0KvX/bbjFaIL6bt6HsSHnYjj+ZcYZ7ZVZ8EQKyAjVAqS2BYz26Qu3EuB0EI5N/PMwBsNkTI/KAx+aPG+AQyP4kj/aBIPWDfsnu98PxJazFJgeSg69cUEaHJupAXIk6l1nSMfmtFrvB/0sExHUF6jRzc7Sz/kV4eTZ2/Lc6OU6M53MXzs3L9d+Y65/PrmlkcJ8LpdWTnXdFj05Xkvsn4ktILXiq4pw8UCUvAx3eniTeeOE7hh2cyhPUx2FYFs6i/7EAAAACXBIWXMAAA1KAAANSgEnP2qyAAAEOUlEQVRYR+2X/1tTVRzHj3Nc2NvxPUZrDGkCpks3jGEWG5EyNkALsXIJkoTY4staoRgKUzQVlYq+WplFWqll5ZfMvtm3f6xn457POfesVvD01PP07PXT+33f577hufd87r1jLEuWLP86S0xLF4BpiXo+x5yj5S4ALcesNujkWbAgLHlqg84ydeVfsUxt0LEC+QU6hUU5XBaXlBRzXYo7uMwHrGrDPGU2oJybO+13UeBwkKxwVnJZDtjKKJBZDlRRUo67uXStWOHiurrGUavLsipgOT9uYCVwzypuVrvpSspFzHrvGl2tWguspOMSHi9QR25tyTouDUX3aUu5rAO8HgoE9T40rOfmfu8GCgxFD9gf5HJ9A3z1FAgaAX+AmybLQxQYiprxMJcBP9BIAbGmBthIbpO9mLShqCXYSnojUMOvmKC5CFqIXAE2kTYUecLWNq5DGoqaKeG0Ax2bya3e8ghpQ1Hto51bud7cAbRTouPqAraRCzzW+biI5CL2hG876W1AlxSlMAWBCLknwzvouitF3eghHQGCJhGl6Aa8O8n1Fj0lImNRBAWkd3qBbhElqbUCu/rIhvC0yIxF/XZxy/t2AVY+MvO07AYGhN2DZ4Spjkarhdv67KAwA8DuFmEZY0PAcJ7ZpTNSGXuOjDnu98fJuZ7f8MIod+a8YWDIULQXCO4b26/jd+JFMmPjubnjwu2vOkALx/YFgb1yz8EJYDJxSCfcGTsc5uZQeErTpoRNHMFRWpmYBCYOSkX1Plhe8sQ5x7TjpOPx3hMneoXzTGMPrfSctBgHtxXIp53P2CkxmYyxkWh0RLKniwqFaXMAYviYawZ4WVj2CuS/Yrz9bN3wq5KbBWZEGgrC/ZqUNgbp6ZVeVDs+LnY9C7kRFLPeDtRIW4W9fkQ+Uylib9ikV6xZHlyzA3hTZMw185bY5OlFb285JrlWwMHfuGc0xMTAMtZf9Y7k0orexXuSi8SgndH1WeD9c1L2gfEVqhZ96DsrudESQPdtVmV7zuEj2apF289fkG1ycOe3Tr9TGZiP3Z/IVi0KzPhlOwQ4+1NqDjj/qRxdvERP0yRqERu0iWcyY2VOYC6lLgOD0rZmgamo5P6g6DPDf9x2EbicFBUTwOdSwJquHJdtetE06CWZpBuYqEgOrB3iPZ/ki5jx8ZlWdNJ4V00a7MmR+hL4Sj7OBiD2fJI+h0Pen4z1XpG3L2M7gErGriaArmvXBTdy8PUNyd+c/ebS7E35wK1vOyR7/VoXkLjKeoLqB91iCPawUvXY4ihlfvWrV6bhAF9ot6iZET/7LhPxQl5kaxpVQyOGy59OHS86Sh+Fi+N7KpIffIvgf1z0Ay+aNH50/F1+vF2fInKBFzl/Sh24/bO6NDO3+PlpTKtLM/OPFf2ink/8qi7NzKxbnSUd7Td1aWbO/dmvZBP91MmSJct/w+9vLVGavhahZAAAAABJRU5ErkJggg==",K5="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADyCAMAAACML1J9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAH7UExURQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGJSJ8sAAACpdFJOUwAIP1hyjKW/2fL/plkZZbD8ZCp1wUG7LqcalIH6ErQ111f5vY50WygOefisYBVhm8RQBF3qcROJZ/1Fz+8cREggbPtU93hMrnBo57dWPqvdiwyKHp6tLDmcqprIZsIkGJnwJYiiODBO6cf2XsvjQDSzr9Mi7Dufg4+kRsC5IQXg1t+dKw/ufUuAtW43thQCk+F8G5Idhy3rwxBf1dDb8zwLaRYnhuQzqGqCpHBGAAAACXBIWXMAADLAAAAywAEoZFrbAAALJ0lEQVR4Xu2d+XvcRhnHx1fsyHHs+L69vhOv7yuJk+DEiUviEictR6EBQgoNV+sQA24p5QhH6wIl0AJtgIb7+DN5VrvzvqNXI2l2V7Pel2c+P0nzfufVfKvZGc0otYSIpaa2rr7hWGPTca/6ON7U2NxQf6K2hjbanJaTrW00bRXS1nqqhTbdhPaOTpqqiunsaKcGEujqpjmqnu4uaiKGnl5anQW9PdRIBH39tCob+vuoGR0Dg7QeIwYHqJ0QQ8O0EjOGh6ilICMZWoMdmRFqSmV0jOq98YnJqa7p01RZBZye7pqanBinDfbGRqkSOUO0M9nZOaqpOubmszOk3WeoRrIQ1C0uLVNFlbK8tBhs+gJV5AnewcwKjVc1K8EBRHsXR1XF6hoNVz1rq6oBzW9xRB1ksus0zID1rOJgLDSiDql3+SyNMuGs4iFD50V1oj9HYnw4p7gYDoYGMHJ+Ixg6Mi7IFl2kkWg2zqORwANcn/IsWi0GS3IoNtDIoPoYrqwmqqeLluRQ7aj9WNqDpVU0yJTmUB1ucL2IC95sQHy0lOhQ4KTRK4u6oGi1mubBUh2u49QvNzZwT6aqnmRKdSjWwE93vqAdCjJUW2EufUw90zvcvKye6cGnl/wOXAecH+3D9vKVi1tXlXOtw6tb17YTlzwr4KjDP4d90UWqrCjPfDxn5joW6Bze2PE879lPYIEeWEx15s5a5Jm3RIUKN7d3b4HQiFu72zdplmhqbm/5tZS7qHF4NS/yFp6DIi1L0IrcbvgpeTITc/efhypF8TzNE8UnPyWr4F0MO/TvoM+nPwNVdSzDqv+kEKJVnkTPhS/AxYrlwgs0l5ZLn8UqYDHkEA163uemlephYE5sFaIGXr7MUxlQskHPu0Bz6eh7Ualx5/OFvhRyOPsFRdb8RTUDZVbK2mpELdSJ3HQqsYvmMeiod7+E8nsT0P9CDsVLX1bW8V+JmzbmQFYrTsjDcaqS3AR1SSQPN7dRvPMyFocdCnFf6agR2015YJOxTtTLwwkqkmxDzpLYpvkoX/0aaC+ow7nOodj8Ooi/8U2lnDIhVfWiQR5OUpFkF3KWxC7NR3kFpDuB4UPrUEzjXXw15u3vpBQ1iGZ5OEVFkiLnQcotmo+wh9K9QEDvUDwozIme580GAgGmpOaYaJSHkS8YISENxGNa7VsgfBgMRDhUNq73gwEVWC81iiZ5GDnBQEIaiMew2re/I3WrZP8kyqHy9ui7wYjCtJQ0CfhXFpEvXyAfDcRjWO0Z0B2QSJRD8RpUuUIiyGkpOW7QkGSFFsNqr4PuBolEOtyEKqRfq4DGoCHJCi2G1b4HujdIJNIhLmi/TyIKoDFoSLJCi2G1N6Vs8AckEunwhz+SkR+TiIKUHL1DGMtDupf3CijPOXkeySqPaATBtHgURbJCi2G1n4DupzQUxc9+Lqu8SUMIpDVoSLJCi2G1t0D3Ng1FcR+qvEhDCGgMGpKs0GJYrQ50hzQUBazZ4555QWPQkGSFFsNqeEN2Yh4zA+ByNWbfBTQGDUlWaDGstvwOCH9BY3rwrr8S80+gQGTQkGSFFtNqN0B455c0puOlX0GFt2hMAUQGDUlWaDGt1oerp2Pv0mCYXz8G+W/u06ACqAwakqzQYlztt6D0btNYmOuojl3kg8qgIckKLcbV3lOW2O//jkaDrP8eV4fjf6BRFZAZNCRZocW82qUPQOt9eJdGVZ48i8prcX20yhyKP94Dsfen7cgB8t36P6Mu6T0Z6AwakqzQUkw12FXJ8VGddmJcvrqvql6ncQIIDRpieZ/Gp+6pWuXi4wdUMH1b2Uf0vC3lDY4ekBo4tL3X5vMgYMDzPni4vXf5SS7y3OW/TD4k0aebtH4I0Bo4tL1fmufuh7Rijp1XaUmO/cg9JQTEBg6t73nn+evf7tCqevY7/k7ragC5gUPr7y0k//jnv2jtMPfe/zetpwUqmDi0/u4JmH6sTI06nh7Ez4IIVDFyaP39IfLe/H9gBU+51vrf2FdqAaCWkcOSO2oRXRS5dOVA838MfNR73dxeCQ6tv8cnPNk8PNht3H+05T3KND48eG3JYNURBNph6pAdziF/nEP+OIf8cQ754xzyxznkj3PIH+eQP84hf5xD/jiH/HEO+eMc8sc55I9zyB/nkD/OIX+cQ/44h/xxDvnjHPLHOeSPc8gf55A/ziF/nEP+OIf8cQ754xzyxznkj3PIH+eQP84hf5xD/jiH/HEO+eMc8sc55I9zaI29w+CflrfGETnM/w194z82Ww5H4/CwcKlKWDwSh/gVhAr0VPSFR9bBP91dgYvhpSp3UdlHczTSYOqgLzyyjGqwAj9F9IVHdgkatG8RLlQph9SgdYtwnQo5VD4mA9gdUOEyFXKoDKOA3dEGLlMZh+E+msOqRbhKRRzqDdr9KcJFKuFQ97AWLkkZ9IVHtoA7qPiRZfZGG/SFR5bAYVQphDJrFvGqeGQJ3Ydk8IdpbbTBq+KRHdCMppNatAgXsO1Q8aI4xEJrow3kt+xQnSfwJ1eJh3BIb9dh4GENi9VSW6MNZLfrEJIHfnChBwAbFiG5VYeBp1HsjCGHNkYbSG7TYdAJ3CjNOsOCRcht0SG5VVHlPumPNpDankNiRPkZFgiEU7cIma05pH0xZIEsGdMebSCxNYeQtwB1GOqrKVuEvLYchhb1JB4ymPZoA3ktOQwbKPz4CncqHE/bIqS141BnIE++s9IfaR7akcsCslpxGG2wcBVaWiBNi5DUhkP9HfLJewj9SCUpjjaQ04ZDSBnGtxBzi9OzCCktOIy8Q4WLxBhMcbSBlAZfrS6SOAO5ThoXT8+i8tXq5C+PF0esgfgfqU9Ko43y5fHkr8cXRazB3A2K68M+6VhUvh5/TB5OUVEpxN+hw4T/AnlSGW2mZLZm0SAPJ6moFKCZWowMpmMRvjfYIOrl4QQVlUB8Fzw0M5jKaDMhk9Xj13XHqah4EgwcxvdhJAWL4zLXCVELeeeoqlgSDCpzbxJljzZzkKpW1LTJ41kqK5Ikg4fxfThAuRbnZaK2GiFa5UmWyorDtAuaUeZok5V5WoUQJ+XJzDLVFQU0Lh3Ksrg8I9OcEkK0QNKYL5UnU0QXNKKs0WYJ0rTkTjvl2SIVFkG6fTRHOTdxUSbp9E87IOkKVZqTvkN6hSJYgSQd/nk7nGeotAiSRtJiKWc0xQ9EtucLuqEg4UvQ8ezJrd4UKKeLijXw010ogedwb3WdiDmyvgp+YL3UC0VlzolVAcyFXi+U9UCZdzYg5shZNNODpf1Yek5VM+QcWulXivsGsXxDKefHBhoZ7FMDAxg4z9nixnk0MhAMDWOEcUdVuqg3TGJD6meUuQ43yiDjZYZodGRMCWc5zovrOE143tgIDQsxqsS91bKebo6ENZzoPc8bpeEcZ1SFlynjMfwIWAl+rPwMjedZCIi8xaXylsSVY3kJlkt5FqhCEryLnjeTnS97e8o6c7NZWNEXiLiDOUbV4SbP+MTkVNd0Wq9tSoGuO3xyL1+mu6YmJ2DbEBjT/gYlI8HuzJGMZhRVGVKnfo4Mh+bBEAPKMyo7Bsmjmp4+ZaXBjP7Aw3YMPbgk5kSvsh5MpAv3brjQXewr3vYO2EdlQGdHYVetOFpOtcJrmyqmrfWkv7NdGjW1J+obmhub4F9sVBHHmxqPNdTX1dbQRrODOvOhItZQcz5UxBpqzoeKWEPN+VARa6g5HypiDTXnQ0WsoeZ8qIg11JwPFbGGmvOhItZQcz5UxBpqzoeKWEPN+VARa6g5HypiDTXnQ0WsoeZ8qIg1b+igIofD4XA4HI7/b/4HbS/xDef0NUoAAAAASUVORK5CYII=",Q5="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAABQCAMAAACqGEJrAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFBUExURQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKYELpIAAABrdFJOUwAIEGAg00j/p0b2TKvfWJU4y5t87zTkQPMw+4O/UPcYItJxPAwPwI9egK38OuqJKNhULAR3zxbG22VNA7RSoiSfh3gu3tB9HMzVKWuBCrraWYZo54uQ6T3uQprjR69cyMOkcBRRdKlWrgJbg2dUZgAAAAlwSFlzAAAOwwAADsMBx2+oZAAAAjlJREFUWEftlmtT00AUhk9JcdW2goiIJRQVFBUUEfGuVFHEuyLe7+IF/f8/wNndZHfzJtlm6WZGZ/J8yrznzdOdNm0PUUVFRcX/QW0AE08EdUw8MViSeBcrSby7JPGevTsRN5qDLQv7iGiIcfEwjjT7R9IvfIBZGa0RHRwT4kM4Mxk/DN6BNlaSTBDRBOstZiGIJ7GQpDNFdORoEXHHTTxERMf4RU8xA3Egwul6DjNEx0/wRp2ohsOY2SyxPDG+8yYnRSP9qWtO7Ux8uiRxY64k8Ygo+BfPnylJfFZ6vYsXzhUWB0GweH5JhT3EFyJvAbFgeSEO7eKLlxzF7HItCu3iK+qGomJ2NQqt4mvXVb+wOIhCq/iG7vsV39R9r+IVo9/sKm5hz1ksfw5T3Maeq3j1jnmD4u4KFl3Fa2Zfs4Y9V/G9dbOvuP8Ai67ih2Zd8wh7IF6Mwlzx4ydmXfF0FYtJcXsqCnPFz4y2wXPsJcXtjTjMFW/oB7fbfRHfyPeMFFLMe5vDKswVJwhj8SZOOFIMoZt4TJ/IwIP4JQ4E/YtfvcaBoH8x3+Qy6Fv85i3mkr7F7zCOyBTLbfM97v4G/AkT4vEPRPQRx61WazRL/EmENrqxmF9YdmQQz+M8RSzuNIioiVPFZxDTF2wgsfir/cDfULyVfwhJJJ77bn61kc4P9BLRDK7+Sbak8Cev4kyhdzY3QsZ+YeaFkG3/xswLIfuDkR/CZUw8EU5i4olZDHyR9U9XUVFR8a/yF3aPWTISDHLTAAAAAElFTkSuQmCC",bfe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEwAAABECAMAAAAcGiN0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAzUExURQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKMFRskAAAARdFJOUwAgMFBgcEAQgK/P7//fj5+/35OmHgAAAAlwSFlzAAAOwwAADsMBx2+oZAAAAu9JREFUWEftl9kSpCAMRWUJIJv8/9dOJYhKUOmeqql56fPUrXCNIbngsvz48b8QUmlAtDJGCn77Q6xUbvUhMtKa1ZeS1myDzIWQDZ/xiHVvSpWg+ax7ZGLzQvLeJ/4AL/nEG2SbFUoGI609b1mhtCtNLczVbNUKTl5UeoyrsSd+Y0CRFDwqVTSpTZch46h5dumZwK9yKCUfim38KofEpgtvKLOficXo3fNaSefroE/FMLzVadMvBPZYOcvwC7FGSL6U4lPgZfs3YreQcOGTOSQm1MZnXwlFC/oxC41UDIkm1qRI8IkikvXvyqf3UNEGjWKwLC5GD87FGDOAj9FR8ZfFtOe8N4GtgzAA2GfSNUHB1ktpL415aLXtaCAYYGJZwXrcR2ZrAN3oGMuKi1JKGUoDncNMTJzS9gVpderJZeyHpdazursQbZ+UL8hjeFMt3BPKum4b9Vh3i5sNGRUW923FZjCCPV8onY/EsLJrfWQWw3JX9PgaB3v/hT5x7S1XWtWim3cl1Q0bqTtk7+RHOF5n6mRT/773DUK937d+/26nGM/tCLVO3148UVtLYu6GDdhMC/sqdmV7XAGrjoNOl7QXsdo52shWHdYKabQrp4kwNRI7DxSPhJs9oXKpDpKRy9I9DReX/R9pAVwWFF0VXQqdkLaCUFtBCHiIhMCDzv7zsga1EoI+bLUcx48SY8mDqwWPfleOGur88mz0vItV782nbRejsIW1Mf64dB43O/O9ZAfNPun2fuFlW6gb6Sg2+PYFv+FW1YltkPvFYduCbd39RKL9KaXhoIuMe4yEeamNvBwahAK3Xuz0LowrRVkso3uxC1R9TqiHcEMpMYb9dD3Zl9s+n7HkNiFRGgAXOYNem1GF/dAwN6vmt+fMZUlkmYeFhjqGOfcd4khYygBMrCh3lHqY2TvCP4ISHRe8Zx9+06P1zkstN4J7ss8RVa35gVBm3zUco0ffoE9aYAfzz5FGKQ3OOQegzfMn248f/5Q/1spdYYpwVdgAAAAASUVORK5CYII=",vfe="data:image/png;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wAARCABWAFYDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD9U6KKKACiiigAooooAKK4j4o/G3wH8FdJ/tLxx4q0zw3bEZQXs4Ekn+5GMu/T+EGvjpP+CwXw4134x+FfCPh3QdRufD2p6hHZXviXUm+zJAJDtV44QGZl3FclimBnigD78ooooAKKKKACiiobu6SytpJ5A5SMZIijaRj9FUEk+wBNAE1NkkWKNndgiKCzMxwAB1JNeI+PPi38VL9pbP4Y/CefUm4Ca54vvo9LsQc9RBuN0wHvGn1r5i+K/wCyN8ePjTCtx8cP2jdF8H+GiD5mj+G4nhscYPykyPCH69ZN+KAPbvjt/wAFHPgj8CFubW68SjxVr0J2/wBj+Gwt1IGx0eTIiTtnL59jX55/GH/grL8ZvjPqDaB8M9HXwTa3LbIY9LjN/qs3sJCuBn0jjDD+8a7Z/wBm79g74MKw8ZfF+78cX0Z+a306+NxGxH8IWxjJX8ZPxFdH4c/4KP8A7MH7OFm+n/B74QajIyg5vTDFavN2+a4keSdhgfxCgDxX4Xf8Ewvj7+0TrJ8RfEXUJPCFvctum1HxPM93qMoPOVgDbu54kaP2r0H4/wD/AARz8SaBd+D4fg7ezeIlkhlXWr3Xb2G2EEyspjkRQAdjBmG1Q5Hl8k5rH8cf8FrPibrKvF4U8FeHfDisfllvGmv5VHscxrn6qa8/f9oT9tr9oeZk0WbxxNazjA/4RzSGsbdVPH+uijXA92egD9lvhvc6v4C+D3heL4l6tpFt4g0/TYLbVdQju8WskyIFaQSSBPvY3HIHJOOOa7XTtRtNX0+1v7C6hvbG6iWe3ubeQSRTRsAyujDIZSCCCOCDX88H7Qv7MXx4+FvhHT/GvxbsNQhsr+9FlDNqerpfT+ayM43BZHK5CN94g5Ffsb/wTb8bJ45/Yw+HE/mb59OtZdJmU9UNvM8aD/v2sZ+hFAH01RRRQB8f/tz/ALfVx+xt4h8KaZD4Ji8WDXLWe5MkmqG08ny3VcYET7s7vbpXzB/w/Kvv+iN2/wD4Ujf/ACLWV/wXB/5H/wCFn/YMvf8A0bHX0D+wr/wT4+FOkfAHwx4n8X+HNN8d6/4s0201qSbV7VZY7OOaFZY4IkbIG1XG5urH2AAAPE/+H5V9/wBEbt//AApG/wDkWqd9/wAFsV1Nla8+BunXbIMKZ9e3kD2zaV+gH/DFHwE/6JD4P/8ABTF/hR/wxR8BP+iQ+D//AAUxf4UAfnt/w+dsf+iBaP8A+Dpf/kSj/h87Y/8ARAtH/wDB0v8A8iV90+Pv2aP2Y/hd4S1DxP4q+G/gfRNB09A9ze3WlxBEBIAH3ckkkAAZJJAFfJvgf9pn9gvxr41j8PyfCjTfDsM0nlw6zrXhy1ismOOMsrsyAnjLqBzzigDiov8AgtHaQSrJH8BdJjkQ7ldNbAIPqD9krT/4flX3/RG7f/wpG/8AkWvvOP8AYs+AUsaunwj8HOjAMrLpUJBB6EHFL/wxR8BP+iQ+D/8AwUxf4UAfAd7/AMFupNShEV38ErG6iB3BJ/EG9QfXBtevNLZ/8Fu5dOh8m0+CdlaxZz5cPiEoufXAta++/wDhij4Cf9Eh8H/+CmL/AAr4K/4K0fsjfDT4U/DDwz8QfBPh628Kak2rx6Lc2WlxiK0uIpIZ5RI0Y4EimHG4YyGIOcLgA+9f2QP2jJP2pvgrZePZdBTw29xeXFr9gS7NyF8ptu7fsTOfTHFFeNf8EjP+TMtG/wCwtf8A/o2igD5b/wCC4P8AyP8A8LP+wZe/+jY6/R/9k7/k1j4N/wDYmaN/6Qw1+cH/AAXB/wCR/wDhZ/2DL3/0bHX6L/sgaja6n+yl8HZrO5hu4V8I6VA0kEgdRJHaRxyISP4ldWVh1BUg8g0AfPHxm/4KBeLfhn+3B4e+Ctj4Dh1Dw/eXWn2k19J5v2y5+1BCZ7fB2bI95BBVsmJ/mXt9yVWk020mvob2S1ge8hUpHcNGDIgPUK2MgH2qzQB+Zn/BbvxhqeneBPhn4at5J4tK1S+vbu7CHEcjwJCIlb1I85yB7V+RVf0Hft+/smS/tZfBpNK0ieC18XaNOb7SJbpisUjEbZIWI+6HXGDg4KrnjNfkx4I/4Jm/tBeLvG8fh+78DXHhy3WUJc6xqcsa2kCd3Dqx83jtHuJ9qAP1y/4J2eMdU8dfsafDXU9YkuJ75LSayM9ySXkSC5lhjOT1GyNRn2r2X4q+M5/hz8MvFfiq10ubW7jRNLudRj023/1ly0UTOIxgE87ccA/Q9Kr/AAd+F+l/Bb4X+GvA+jFm07RLNLSORxhpCOXc+7MWY/WuyoA+Q/8Agnl+2h4m/bC0HxnceJfC9noc+g3NvHFeaZ5gtrhZhIfLxIzHzE8sFsNgiReF78D/AMFpf+TVPDv/AGOFp/6R3tfeNhptppcBhsrWG0hLFzHBGEUsepwB1PrXwb/wWlI/4ZV8ODIyfF9ocf8AbneUAdX/AMEjP+TMtG/7C1//AOjaKP8AgkZ/yZlo3/YWv/8A0bRQB81f8FsPD+qax47+F8lhpt5fImm3qs1tA0gU+bHwSAa+R/gF+018fv2adF1DR/Asup2WkX0wuJLC80n7VCkoGC8ayIdhIwG243bVznAx/Q7RQB+G3/Dy/wDax/5+P/LYi/8AjdH/AA8v/ax/5+P/AC2Iv/jdfuTRQB+G3/Dy/wDax/5+P/LYi/8AjdH/AA8v/ax/5+P/AC2Iv/jdfuTRQB+G3/Dy/wDax/5+P/LYi/8AjdH/AA8v/ax/5+P/AC2Iv/jdfuTRQB+G3/Dy/wDax/5+P/LYi/8AjdeJ/H343fGz9pnUdOu/H/8AauqLp0ZS1tYNMa3t4sn5mEaIF3HjLHnAA6Cv6NaKAPjf/gk3p11pf7HWj297bTWk41a/JinjKMAZeODzRX2RRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQB//9k=";function _fe({data:t,settings:e,pageNumber:n=1,totalPages:s=24}){const r=(_,j=0)=>_!=null?typeof _=="number"?Math.round(_).toString().replace(/\B(?=(\d{3})+(?!\d))/g," "):typeof _=="string"&&!isNaN(parseFloat(_))?Math.round(parseFloat(_)).toString().replace(/\B(?=(\d{3})+(?!\d))/g," "):_:typeof j=="number"?Math.round(j).toString().replace(/\B(?=(\d{3})+(?!\d))/g," "):j,i=(_,j,C="")=>_==null?j:typeof _=="object"?C==="battery_kwh"&&_.capacity&&_.quantity?(_.capacity*_.quantity).toString():_.capacity&&_.quantity?`${_.capacity*_.quantity}`:_.capacity||_.quantity||Object.values(_)[0]||j:_,o=t?.project||{name:"Rutherfords - Grid Tied Solar PV Solution",system_type:"grid",panel_kw:32.2,num_panels:57,battery_chem:"LiFePO₄"},c=t?.financials||{yield_year1:0};let u="";o.system_type==="grid"?u="a grid tied solar PV solution":o.system_type==="hybrid"?u="a hybrid solar and battery backup system":o.system_type==="off-grid"&&(u="an off-grid solar and battery solution");const f=`Orka Solar is pleased to respond to the request for ${u}.`,h=o.num_panels||Math.ceil(o.panel_kw*1e3/565),g=15,x=Number(o.project_value_excl_vat)||0,b=x*(g/100),A=x+b;return console.log("EXEC SUMMARY: inverter_brand_model =",o.inverter_brand_model),console.log("EXEC SUMMARY: battery_brand_model =",o.battery_brand_model),a.jsxs("section",{className:"orka-exec-summary-page",children:[a.jsxs("div",{className:"orka-summary-headerbar",children:[a.jsxs("div",{className:"orka-summary-project",children:[o.name," -",o.inverter_brand_model?` ${o.inverter_brand_model} `:" ",i(o.inverter_kva,"0","inverter_kva")," kVA",Number(i(o.battery_kwh,"0","battery_kwh"))>0&&`& ${i(o.battery_nominal_rating,"0","battery_kwh")} kWh`]}),a.jsx("img",{className:"orka-summary-logo",src:dx,alt:"Orka Solar Logo"})]}),a.jsx("hr",{className:"orka-summary-topline"}),a.jsx("h2",{className:"orka-summary-title",children:"EXECUTIVE SUMMARY"}),a.jsxs("div",{className:"orka-summary-paragraphs",children:[a.jsx("p",{children:f}),a.jsx("p",{children:"The proposal is in the form of a full turn key solution. All engineering, procurement and construction (EPC) will be handled by Orka Solar. The client will own the system outright and in return will benefit from the electrical power provided by the system, related cost and taxation benefits as well as meeting their carbon reduction/green energy goals."}),a.jsxs("p",{children:[" ",e.usedActualConsumption?"Orka Solar made use of actual electrical consumption data of a similar site in the design of this system.":"Orka Solar made use of a similar client's electrical consumption data in the design of this system."]}),a.jsx("p",{children:"The details of the proposal are discussed in this document, with the key figures summarised below:"})]}),a.jsxs("div",{className:"orka-summary-icons-row1",children:[a.jsxs("div",{className:"orka-summary-icon-col",children:[a.jsx("img",{src:G5,className:"orka-summary-icon",alt:""}),a.jsx("div",{className:"orka-summary-label",children:"Solar PV"}),a.jsxs("div",{className:"orka-summary-value",children:[i(o.panel_kw,"0","panel_kw").toFixed(2)," ",a.jsx("span",{className:"orka-summary-unit",children:"kWp"})]}),a.jsxs("div",{className:"orka-summary-sublabel",children:[h," panels"]})]}),a.jsxs("div",{className:"orka-summary-icon-col",children:[a.jsx("img",{src:K5,className:"orka-summary-icon",alt:""}),a.jsx("div",{className:"orka-summary-label",children:"Inverters"}),a.jsxs("div",{className:"orka-summary-value",children:["Total: ",i(o.inverter_kva,"0","inverter_kva")," ",a.jsx("span",{className:"orka-summary-unit",children:"kVA"})]}),a.jsx("div",{className:"orka-summary-sublabel"})]}),a.jsxs("div",{className:"orka-summary-icon-col",children:[a.jsx("img",{src:Q5,className:"orka-summary-icon",alt:""}),a.jsx("div",{className:"orka-summary-label",children:"Backup"}),a.jsxs("div",{className:"orka-summary-sublabel",children:["Chemistry: ",o.battery_chem||"LFP"]}),a.jsxs("div",{className:"orka-summary-sublabel",children:[o.battery_nominal_rating," kWh @ 100%"]}),a.jsxs("div",{className:"orka-summary-sublabel",children:[i(o.battery_kwh,"0","battery_kwh_80")," kWh @ 80%"]})]})]}),a.jsxs("div",{className:"orka-summary-icons-row2",children:[a.jsxs("div",{className:"orka-summary-icon-col orka-summary-icon-col-wide",children:[a.jsx("img",{src:bfe,className:"orka-summary-icon",alt:""}),a.jsx("div",{className:"orka-summary-label",children:"Cost"}),a.jsxs("div",{className:"orka-summary-value",children:["R ",r(o.project_value_excl_vat)," ",a.jsx("span",{className:"orka-summary-unit",children:"(excl VAT)"})]}),a.jsxs("div",{className:"orka-summary-sublabel",align:"left",children:["VAT (15%): R ",r(b)]}),a.jsxs("div",{className:"orka-summary-sublabel",align:"left",children:["Total (incl VAT): R ",r(A)]})]}),a.jsxs("div",{className:"orka-summary-icon-col orka-summary-icon-col-wide",children:[a.jsx("img",{src:vfe,className:"orka-summary-icon",alt:""}),a.jsx("div",{className:"orka-summary-label",children:"Savings"}),a.jsxs("div",{className:"orka-summary-sublabel",children:["Savings year 1: R ",r(c.annual_savings)]}),a.jsxs("div",{className:"orka-summary-sublabel",children:["First year yield: ",c.yield_year1,"%"]}),a.jsxs("div",{className:"orka-summary-sublabel",children:["Payback (years): ",c.payback_period.toFixed(1)]}),a.jsxs("div",{className:"orka-summary-sublabel",children:["LCOE (25y): R ",c.lcoe]})]})]}),a.jsx("div",{className:"orka-summary-footnote",children:t?.project?.project_type==="Commercial"?"*Tax incentive available to companies, 100% deduction":""}),a.jsx("div",{className:"orka-summary-sitephoto-fullwrap",children:a.jsx("img",{className:"orka-summary-sitephoto-full",src:xfe,alt:"Site Photo"})})]})}function xs({header:t,children:e,footer:n,className:s="",data:r,pageNumber:i,totalPages:o=24}){const c=r?.project||{name:t||"Project Report"},u=(f,m,h="")=>f==null?m:typeof f=="object"?h==="battery_kwh"&&f.capacity&&f.quantity?(f.capacity*f.quantity).toString():f.capacity&&f.quantity?`${f.capacity*f.quantity}`:f.capacity||f.quantity||Object.values(f)[0]||m:f;return a.jsxs("section",{className:`orka-standard-page ${s}`,children:[a.jsxs("div",{className:"orka-summary-headerbar",children:[a.jsxs("div",{className:"orka-summary-project",children:[c.name," - ",u(c.inverter_kva,"0","inverter_kva")," kVA ",Number(u(c.battery_kwh,"0","battery_kwh"))>0&&`& ${u(c.battery_nominal_rating,"0","battery_kwh")} kWh`]}),a.jsx("img",{className:"orka-summary-logo",src:dx,alt:"Orka Solar Logo"})]}),a.jsx("hr",{className:"orka-summary-topline"}),a.jsx("div",{className:"orka-page-content",children:e}),a.jsxs("footer",{className:"orka-page-footer",children:[i&&a.jsxs(a.Fragment,{children:[a.jsx("hr",{className:"orka-page-footer-line"}),a.jsxs("div",{className:"orka-page-number",children:["Page ",i," of ",o]})]}),n&&a.jsx("div",{className:"orka-page-footer-text",children:n})]})]})}const Afe="/assets/southafrica_ghi_map-DGseRHbg.png",wfe="/assets/MeanAnnualRainfall-DQOR6NrA.jpg",jfe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD4AAABDCAMAAADzo0ZpAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAGhUExURQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKi6pD8AAACLdFJOUwBAOO//DFhMGATDcDz7xxOZa1PXohws81Ao51vf3EHF+HNl6dNPYFQ3u31v9MpGLrKHA3n+wSSpkg2EtzMIo78bn5wXl0ibq3T3fM9sHp4laHgw2uQ6hY8QXWqVFiDx26VhbYo16oMKmhQmoKctoeVa3jQHjK8rXIK4wHr8wj5FyfLLR2Zj6NXgqCMHxsy4AAAACXBIWXMAAA7DAAAOwwHHb6hkAAACuUlEQVRYR+2X6VcSURyGf8iLOgipoQGarQgtlmFWJiqZhdGubZZZaWWb2Z7t2WLbX925M+LMfbkcRE/n9MHnk/ed95EZ7njvVeT/xefzVXFWAX7Az1kFrOkrpiI9UM2JSa+p5cTBCqKOIoMeCq8LUGRT3wD4G/WsWF8fAZqa9cxmQxRAOKZlRXq8RZVCWrZI60YAbdrzs75pM4AtW72Ry7btABLtniSZTKY8wx07AWCXJ9HY3QFgz16OC3TuU3a6i/Ml9ncDOGB8NJGDh5Tdc5hzD72qkemzf+6PpQey2YF0rN8eHhlU144OkaFzTH2zx0WkNqdmwiaaUzNlz0zQOOcu1jDCKRHrhL8gK/InLZGaME6VsUWs7GmRM+omNM6eE0klSryvXiyRQJBt57Yt7hrp6mFXkSt744ucZ9NhhHtmRi+w6HDxEjeNXGavwBVumhjLs1Ygv4wvXq6y5XKNuwbGWXJp4q6BCEsuvHDZhAZd4tKvva063dcl7ik7f5lJT8EnE55REZ0y6hk5C2sFum91uunT6dlveArMkOHZiZvsuES5a6CBJZdb3DUwyZLLFHcNlH7nw6bNqYjbrBUY56aRO2qzMnDXx00zIyw6THOvBPfus6loqudeKUwrbeQBt4wEsimRh4/YnnksEsuWXambZ/FkUsSa1qYvnA6IPH2GhjK3YA2rd/O5iEzMLP2C/HBcRKrUHpdjQePFS1V/9doeBOZymUQik5tz9oe+jLrWS4bGG9V4qz7cQOiduvqeY5eRDwA+fuK4wOd5AB18eFti6guAr988CZ1t2hPq5fvuSTws/ADwUzuZ8cmqug3Ar1ZvVMA+PUT1FYR1dUQAoqNa5tA8C7Qs6FmRLo1+4PcfPXMIBMFn4mJd6hAZo2iR2iQnBl2Sy9koHUx6BazpK2aV+ir/g/7X/AX191fbOqSDgQAAAABJRU5ErkJggg==",Sfe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEkAAABJCAMAAABGrfvuAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAGVUExURQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJj0h6kAAACHdFJOUwAkgGhw/42YT8HREBPqkzxUZNYWtloI3twbMJ1ZX4LhIKqj0yX75iZOqHZqn+wrx60a8G9C8TFrs3S89jbzXDfN+oiSscApA9nuV4UdfUtQ5yOnXdU+bA6aSciDvjT4blOpgR/jrxjdRpQKzqILRNA5f/65li/0xC3yW6SJ37dV5Y98BCx4FORWSecAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAH7SURBVFhH7dfpN1VhGIbxEz1ImRKlDBUyU0nGIxIylnmWBpVKpaKMifR3t860t31Z65znffngg9/Hd9/7WtZZNvv4fGdOj3NxR8Rzo3NejkjgRieRHZEkbnQusCPJF7lRuZTCkKRyo5PGjkg6NzoZ7MjlTG50EhiSRE6UrjAkWZzoZF9l6FoONzrXGZIbnCjlMiR5nCjlM1RwkxOlWyzd5kKrkKUMLpSKihG6U8KJUilCUsaFVjlLFVxoVSJUVc2FVg1KdznQuncfpVoutB4gVPeQC616lBo4UEtFqZEDtSZvqLmFAzW/t+SvPKSV42geeUMebUY/Xx5vd7WbPcmPeb+rg9vonvB+R2cXt1F1P2UgoqeX2+iqGXD0cRpDOgMRDf2cxjDAQljBIJexPDv8HvfcLdk/MwFDbmnY7vUpYsQJjY7xmhn3HXGcl8xMOP/3Jrt5zcxUJDRt/VczbCYcarZ9v3DMhkuWb+KuuflQqKmIV0y9CIVSFnjB2MtQ6RXPjb1+EwwtvuUFY6FXxHfveW5uKVg63oMb9OFjIPRpmefmPgdCX77y2MKKiHyz/J7p9V1EfvDQxuqayM9fPLVRIbK+wUMrmyJbPLOSsy07tt8wvH7LbinP7PyRPR5Z2q7Z55Gdv/6T+ZB8vr0T+eUOOOCBrf1/PDlzuvwHFn06JWqWJqwAAAAASUVORK5CYII=";function Cfe({data:t,settings:e,showSiteLayout:n,siteLayoutImage:s,startPageNumber:r=3,totalPages:i=24}){const{showNotification:o}=Os(),[c,u]=v.useState([]),[f,m]=v.useState(null),[h,g]=v.useState(null),[x,b]=v.useState(null),[A,_]=v.useState(null),[j,C]=v.useState([]),[k,E]=v.useState([]),[N]=v.useState(t?.project?.project_type||"Residential"),[L,M]=v.useState(null),[T,O]=v.useState(null);console.log("Report data received (from MainReportContent):",t),v.useEffect(()=>{sessionStorage.removeItem("reportEnergyStartDate"),sessionStorage.removeItem("reportEnergyEndDate");const ce=new Date().getFullYear(),xe=new Date(ce,0,1,0,0,0),Te=new Date(ce,11,31,23,59,59);m(xe),g(Te),console.log("Setting date range:",xe,"to",Te)},[]),v.useEffect(()=>{f&&h&&(sessionStorage.setItem("reportEnergyStartDate",f.toISOString()),sessionStorage.setItem("reportEnergyEndDate",h.toISOString()))},[f,h]),v.useEffect(()=>{if(!t?.project?.id||!f||!h)return;const ce=f.toISOString().split("T")[0],xe=h.toISOString().split("T")[0];console.log(`Fetching data from ${ce} to ${xe}`),Re.get(`${Ce}/api/consumption_data/${t.project.id}`,{params:{start_date:ce,end_date:xe}}).then(Te=>{const Ie=Te.data&&Te.data.data?Te.data.data:Te.data;Array.isArray(Ie)?u(Ie):(console.error("Unexpected data format:",Te.data),u([]))}).catch(Te=>{console.error("Error loading consumption data:",Te),o("Error loading consumption data","error")})},[t?.project?.id,f,h,o]);const I=fe.useMemo(()=>{if(c.length===0)return[];const ce={},xe=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];c.forEach(Ie=>{const Ue=new Date(Ie.timestamp),Ze=`${xe[Ue.getMonth()]} ${Ue.getFullYear()}`;ce[Ze]||(ce[Ze]=0),ce[Ze]+=Ie.demand_kw*.5});const Te=Object.keys(ce).sort((Ie,Ue)=>{const[Ze,mt]=Ie.split(" "),[gt,dt]=Ue.split(" ");return mt!==dt?parseInt(mt)-parseInt(dt):xe.indexOf(Ze)-xe.indexOf(gt)});return{months:Te,values:Te.map(Ie=>Math.round(ce[Ie]))}},[c]),$={labels:I.months||[],datasets:[{label:"Monthly Energy Consumption (kWh)",data:I.values||[],backgroundColor:"rgba(22, 144, 144, 0.19)",borderColor:"rgba(27, 95, 95, 1)",borderWidth:2,tension:.2,fill:!0}]},H={responsive:!0,maintainAspectRatio:!1,plugins:{tooltip:{mode:"index",intersect:!1},legend:{display:!1},title:{display:!0,text:"Monthly Energy Consumption (kWh)"},datalabels:{display:!1}},scales:{x:{title:{display:!0,text:"Month"},grid:{display:!1}},y:{title:{display:!0,text:"Energy (kWh)"},beginAtZero:!0,ticks:{callback:function(ce){return ne(ce)}}}}},V=c.length>0?(c.reduce((ce,xe)=>ce+xe.demand_kw,0)*.5).toFixed(0):0,G=new Set(c.map(ce=>ce.timestamp?.split("T")[0]||""));G.size>0&&(V/G.size).toFixed(0),c.length>0&&Math.max(...c.map(ce=>ce.demand_kw)).toFixed(1),c.length>0&&(c.reduce((ce,xe)=>ce+xe.demand_kw,0)/c.length).toFixed(1),c.map(ce=>new Date(ce.timestamp).toLocaleString()),c.map(ce=>ce.demand_kw);const U=fe.useMemo(()=>{if(!t?.financials?.cost_comparison||!t.financials.cost_comparison?.length)return{labels:[],datasets:[]};const ce=t.financials,xe=ce.cost_comparison.map(Ie=>new Date(Ie.month).toLocaleString("default",{month:"short",year:"2-digit"})),Te=[{label:"Old Bill - Energy",data:ce.cost_comparison.map(Ie=>Ie.old_bill_breakdown.energy),backgroundColor:"#f87171",stack:"Stack 0"},{label:"Old Bill - Fixed",data:ce.cost_comparison.map(Ie=>Ie.old_bill_breakdown.fixed),backgroundColor:"#9ca3af",stack:"Stack 0"},{label:"Old Bill - Demand",data:ce.cost_comparison.map(Ie=>Ie.old_bill_breakdown.demand),backgroundColor:"#b91c1c",stack:"Stack 0"}];return{labels:xe,datasets:Te.filter(Ie=>Ie.data.some(Ue=>Ue!==0&&Ue!==null))}},[t?.financials?.cost_comparison,t?.financials]),R=fe.useMemo(()=>{if(!t?.simulation?.timestamps||!L||!T)return{labels:[],demand:[],generation:[],import_from_grid:[],battery_soc:[]};const ce=new Date(L),xe=new Date(T);let Te=-1,Ie=-1;for(let Ue=0;Ue<t.simulation.timestamps.length;Ue++){const Ze=new Date(t.simulation.timestamps[Ue]);Te===-1&&Ze>=ce&&(Te=Ue),Ze<=xe&&(Ie=Ue)}return(Te===-1||Ie===-1)&&(Te=0,Ie=Math.min(335,t.simulation.timestamps.length-1)),{labels:t.simulation.timestamps.slice(Te,Ie+1).map(Ue=>new Date(Ue)),demand:t.simulation.demand.slice(Te,Ie+1),generation:t.simulation.generation.slice(Te,Ie+1),import_from_grid:t.simulation.import_from_grid.slice(Te,Ie+1),battery_soc:t.simulation.battery_soc.slice(Te,Ie+1)}},[t?.simulation,L,T]),P={responsive:!0,maintainAspectRatio:!1,plugins:{tooltip:{mode:"index",intersect:!1},legend:{position:"top"},title:{display:!0,text:"Current Monthly Electricity Costs"},datalabels:{display:!1}},scales:{x:{stacked:!0,title:{display:!0,text:"Month"}},y:{stacked:!0,title:{display:!0,text:"Cost (R)"},ticks:{callback:function(ce){return"R "+ne(ce)}}}}},Z=(ce,xe,Te="")=>ce==null?xe:typeof ce=="object"?Te==="battery_kwh"&&ce.capacity&&ce.quantity?(ce.capacity*ce.quantity).toString():ce.capacity&&ce.quantity?`${ce.capacity*ce.quantity}`:ce.capacity||ce.quantity||Object.values(ce)[0]||xe:ce,ne=(ce,xe=0)=>ce!=null?typeof ce=="number"?Math.round(ce).toString().replace(/\B(?=(\d{3})+(?!\d))/g," "):typeof ce=="string"&&!isNaN(parseFloat(ce))?Math.round(parseFloat(ce)).toString().replace(/\B(?=(\d{3})+(?!\d))/g," "):ce:typeof xe=="number"?Math.round(xe).toString().replace(/\B(?=(\d{3})+(?!\d))/g," "):xe,D={grid:{projectGoal:"The goal of this project is to reduce grid dependency and electricity costs through a grid-tied solar PV system.",benefits:["Cost savings on grid supplied electricity","Independece from high-cost increases","Reduced carbon footprint and greenhouse gas emiissions, through reducing use of fossil fuels"],systemDescription:"This grid-tied solar PV system is designed to work in conjunction with the utility grid. It produces electricity during daylight hours, reducing dependency on utility power when the sun is shining."},hybrid:{projectGoal:"The goal of this project is to provide both energy cost savings and backup power during outages.",benefits:["Reduced electricity bills","Backup power during outages","Increased energy independence","Lower carbon footprint","Protection against load shedding"],systemDescription:"This hybrid solar PV system combines the benefits of grid-tied operation with battery storage for backup power."},off_grid:{projectGoal:"The goal of this project is to achieve complete energy independence from the utility grid.",benefits:["Cost savings by eliminating grid supplied electricity.","Long term power supply cost certainty: The cost of electricity from the system is defined, hence future cost certainty is improved, reducing the risks of unknown grid electricity price increases.","Reduced carbon footprint and greenhouse gas emissions, through reducing the use of fossil-based energy."],systemDescription:"This off-grid solar PV system with battery storage is designed to meet all of the site's energy needs without connection to the utility grid."},default:{projectGoal:"The goal of this project is to provide a custom solar energy solution tailored to the client's specific requirements, optimizing energy production while ensuring reliability and performance.",benefits:["Reduced electricity bills","Increased energy independence","Lower carbon footprint","Customized to specific needs"],systemDescription:"This solar PV system is designed to meet the specific energy needs of the site, taking into account local conditions, consumption patterns, and future requirements."}},B=ce=>{const xe=t?.project?.system_type?.toLowerCase()||"default";return(D[xe]||D.default)[ce]};v.useEffect(()=>{const ce=new Date().getFullYear(),xe=new Date(ce,1,3),Te=sessionStorage.getItem("reportDemandStartDate"),Ie=Te?new Date(Te):xe;b(Ie);const Ue=new Date(Ie);Ue.setDate(Ie.getDate()+6),_(Ue)},[]),v.useEffect(()=>{x&&sessionStorage.setItem("reportDemandStartDate",x.toISOString())},[x]),v.useEffect(()=>{const ce=new Date().getFullYear(),xe=new Date(ce,2,15),Te=sessionStorage.getItem("reportSimulationStartDate"),Ie=Te?new Date(Te):xe;M(Ie);const Ue=new Date(Ie);Ue.setDate(Ie.getDate()+6),O(Ue)},[]),v.useEffect(()=>{L&&sessionStorage.setItem("reportSimulationStartDate",L.toISOString())},[L]),v.useEffect(()=>{if(!t?.project?.id||!x||!A)return;const ce=x.toISOString().split("T")[0],xe=A.toISOString().split("T")[0];console.log(`Fetching demand data from ${ce} to ${xe}`),Re.get(`${Ce}/api/consumption_data/${t.project.id}`,{params:{start_date:ce,end_date:xe}}).then(Te=>{const Ie=Te.data&&Te.data.data?Te.data.data:Te.data;Array.isArray(Ie)?C(Ie):(console.error("Unexpected data format for demand data:",Te.data),C([]))}).catch(Te=>{console.error("Error loading demand data:",Te)})},[t?.project?.id,x,A,o]),v.useEffect(()=>{if(!t?.project?.id)return;const ce=new Date("2025-01-01"),xe=new Date("2025-12-31"),Te=ce.toISOString().split("T")[0],Ie=xe.toISOString().split("T")[0];console.log(`Fetching yearly data from ${Te} to ${Ie}`),Re.get(`${Ce}/api/consumption_data/${t.project.id}`,{params:{start_date:Te,end_date:Ie}}).then(Ue=>{const Ze=Ue.data&&Ue.data.data?Ue.data.data:Ue.data;Array.isArray(Ze)?(E(Ze),console.log(`Yearly data loaded: ${Ze.length} records`)):(console.error("Unexpected data format:",Ue.data),console.log("Yearly data loaded: undefined records"),E([]))}).catch(Ue=>{console.error("Error loading yearly consumption data:",Ue),console.log("Yearly data loaded: undefined records")})},[t?.project?.id]);const se=fe.useMemo(()=>{const ce={};return j.forEach(xe=>{const Te=new Date(xe.timestamp),Ie=Te.toLocaleDateString();ce[Ie]||(ce[Ie]=[]),ce[Ie].push({time:Te,demand:xe.demand_kw})}),{labels:j.map(xe=>new Date(xe.timestamp)),datasets:[{label:"Demand (kW)",data:j.map(xe=>xe.demand_kw),borderColor:"#18736a",backgroundColor:"#98e7c8",fill:!0,tension:.1,pointRadius:0}]}},[j]),le={responsive:!0,maintainAspectRatio:!1,plugins:{tooltip:{mode:"index",intersect:!1,callbacks:{title:function(ce){return new Date(ce[0].label).toLocaleString()}}},legend:{display:!0,position:"top"},title:{display:!0,text:"Detailed Demand Profile (kW)"},datalabels:{display:!1}},scales:{x:{type:"time",time:{unit:"day",displayFormats:{day:"MMM d"},tooltipFormat:"MMM d, HH:mm"},title:{display:!0,text:"Date"},ticks:{maxTicksLimit:10}},y:{title:{display:!0,text:"Demand (kW)"},beginAtZero:!0}}},ae=fe.useMemo(()=>{if(t?.simulation?.timestamps&&t?.simulation?.generation){const Ze=t.simulation.timestamps,mt=t.simulation.potential_generation,gt=.5,dt={};Ze.forEach((q,oe)=>{const Ae=new Date(q),He=`${Ae.getFullYear()}-${Ae.getMonth()+1}`,We=Ae.toLocaleString("default",{month:"short"});dt[He]||(dt[He]={monthName:We,totalKWh:0,monthIndex:Ae.getMonth(),year:Ae.getFullYear()}),dt[He].totalKWh+=mt[oe]*gt});const Pe=Object.values(dt).sort((q,oe)=>q.year!==oe.year?q.year-oe.year:q.monthIndex-oe.monthIndex);return{labels:Pe.map(q=>q.monthName),datasets:[{label:"Energy Production (kWh)",data:Pe.map(q=>Math.round(q.totalKWh)),backgroundColor:"rgba(255, 193, 7, 0.6)",borderColor:"rgba(255, 193, 7, 1)",borderWidth:1,borderRadius:5}]}}if(!t?.financials?.cost_comparison)return{labels:[],datasets:[]};const ce=t.financials.cost_comparison.map(Ze=>{const mt=new Date(Ze.month);return{monthName:mt.toLocaleString("default",{month:"short"}),monthNum:mt.getMonth(),year:mt.getFullYear(),originalKey:Ze.month}}),xe=[.06,.07,.08,.09,.1,.1,.11,.11,.1,.08,.06,.04],Te=xe.reduce((Ze,mt)=>Ze+mt,0),Ie=t?.financials?.total_generation_kwh||0,Ue=ce.map(Ze=>{const mt=xe[Ze.monthNum];return Math.round(mt/Te*Ie)});return{labels:ce.map(Ze=>Ze.monthName),datasets:[{label:"Energy Production (kWh)",data:Ue,backgroundColor:"rgba(255, 193, 7, 0.6)",borderColor:"rgba(255, 193, 7, 1)",borderWidth:1,borderRadius:5}]}},[t?.simulation,t?.financials?.cost_comparison,t?.financials?.total_generation_kwh]),te={responsive:!0,maintainAspectRatio:!1,plugins:{tooltip:{mode:"index",intersect:!1,callbacks:{label:function(ce){let xe=ce.dataset.label||"";return xe&&(xe+=": "),ce.parsed.y!==null&&(xe+=ne(ce.parsed.y)+" kWh"),xe}}},legend:{display:!1},title:{display:!0,text:"Monthly Energy Production (kWh)"},datalabels:{display:!1}},scales:{x:{title:{display:!0,text:"Month"},grid:{display:!1}},y:{title:{display:!0,text:"Energy (kWh)"},beginAtZero:!0,ticks:{callback:function(ce){return ne(ce)}}}}},[X,de]=v.useState(()=>{const ce=new Date;ce.setMonth(ce.getMonth()+1);const xe=String(ce.getDate()).padStart(2,"0"),Te=ce.toLocaleString("default",{month:"long"}),Ie=ce.getFullYear();return`${xe} ${Te} ${Ie}`}),[Ne,Ke]=v.useState([{activity:"Deposit received & document compilation",timeline:"Week 1"},{activity:"Equipment procurement & delivery",timeline:"Week 2 (provided no major supplier delays)"},{activity:"Construction & installation",timeline:"Week 2-4"},{activity:"Commissioning",timeline:"Week 5"},{activity:"Training",timeline:"Week 5"},{activity:"Handover",timeline:"Week 6"}]);return a.jsxs(a.Fragment,{children:[a.jsxs(xs,{header:"System Performance",data:t,pageNumber:r,totalPages:i,children:[a.jsx("h4",{className:"fw-bold",children:"Site Information"}),a.jsxs("div",{children:["This site is located at ",t?.project?.location,", South Africa: ",t?.project?.latitude,", ",t?.project?.longitude,"."]}),n&&a.jsxs("div",{className:"site-layout-section mt-4",children:[a.jsx("h4",{className:"fw-bold",children:"General Site Layout"}),a.jsx("p",{children:"The proposed module layout is shown below, this may change after detailed site visit but has in principle been proposed to the client:"}),s?a.jsx("div",{className:"site-layout-image-container",children:a.jsx("img",{src:s,alt:"Proposed Module Layout",style:{maxWidth:"100%",maxHeight:"100%",display:"block",margin:"1rem auto",border:"1px solid #ddd"}})}):a.jsx("div",{className:"no-layout-image",children:a.jsx("p",{className:"text-muted fst-italic",children:" No layout image available. Please upload one in the sidebar."})})]})]}),a.jsxs(xs,{header:"System Performance",data:t,pageNumber:r+1,totalPages:i,children:[a.jsx("h4",{className:"fw-bold",children:"Project Goal"}),a.jsx("p",{children:B("projectGoal")}),a.jsx("p",{children:"The following benefits will be achieved:"}),a.jsx("ol",{children:B("benefits").map((ce,xe)=>a.jsx("li",{children:ce},xe))}),a.jsx("h5",{className:"fw-bold",children:"Current load profile and electrical consumption"}),a.jsxs("p",{className:"mt-3",children:["The chart below shows the monthly energy consumption for ",t?.project?.client_name,"'s facility. This data was used as the foundation in the design of an optimal solar solution tailored to the actual usage patterns of the site."]}),a.jsx("div",{className:"chart-container",style:{height:"400px"},children:I.months?.length>0?a.jsx(Rs,{data:$,options:H}):a.jsx("div",{className:"text-center text-muted p-5",children:"No consumption data available"})})]}),a.jsxs(xs,{header:"System Performance",data:t,pageNumber:r+2,totalPages:i,children:[a.jsx("h5",{className:"fw-bold",children:"Current Electricity Costs"}),a.jsx("p",{children:"The chart below shows the monthly electricity costs without solar. The cost can be divided into an energy and fixed cost component. This analysis helps identify the areas where the solar solution will have the greatest financial impact."}),a.jsx("div",{className:"chart-container",style:{height:"400px"},children:t?.financials?.cost_comparison?.length>0?a.jsx(ia,{data:U,options:P}):a.jsx("div",{className:"text-center text-muted p-5",children:"No cost comparison data available"})}),t?.financials?.annual_savings&&a.jsxs("div",{className:"mt-4",children:[a.jsx("h5",{className:"fw-bold",children:"Annual Electricity Cost"}),a.jsxs("p",{children:[(()=>{const xe=(t.financials.cost_comparison||[]).map(Ue=>Ue.old_cost),Te=xe.length>0?xe.reduce((Ue,Ze)=>Ue+Ze,0)/xe.length:0,Ie=xe.length>0?Math.max(...xe):0;return`Based on this simulation using the client's required energy consumption and tariff, the client's 2025 costs for electricity ${N==="Commercial"?"(grid plus generator)":""} will be on average R ${ne(Te)} per month with a maximum of R ${ne(Ie)} (excl. VAT).`})(),a.jsx("br",{}),"This equates to an annual electricity cost of approximately ",a.jsxs("strong",{children:["R ",ne(t.financials.original_annual_cost)]})," (excl. VAT)."]})]})]}),a.jsxs(xs,{header:"System Performance",data:t,pageNumber:r+3,totalPages:i,children:[a.jsx("h4",{className:"fw-bold",children:"Detailed Load Profile"}),a.jsx("p",{children:"The client's typical diurnal load profile is shown in the graph below. This visualization helps understand hourly usage patterns and identify opportunities for peak saving and load management."}),a.jsx("div",{className:"chart-header d-flex justify-content-end align-items-center mb-2",children:a.jsxs("div",{className:"no-print d-flex align-items-center",style:{minWidth:"280px"},children:[a.jsx(Xl,{selected:x,onChange:ce=>{const xe=new Date(ce);xe.setHours(0,0,0,0),b(xe);const Te=new Date(xe);Te.setDate(xe.getDate()+6),Te.setHours(23,59,59,999),_(Te)},dateFormat:"MMM d, yyyy",className:"form-control form-control-sm",style:{width:"160px"},popperPlacement:"bottom-end",minDate:new Date(new Date().getFullYear(),0,1),maxDate:new Date(new Date().getFullYear(),11,31),placeholderText:"Select week start date"}),a.jsx("small",{className:"text-muted ms-2 text-nowrap",children:"(Shows 7-day period)"})]})}),a.jsx("div",{className:"chart-container",style:{height:"300px"},children:j.length>0?a.jsx(Rs,{data:se,options:le}):a.jsx("div",{className:"text-center text-muted p-5",children:"No demand data available for the selected period"})}),a.jsxs("div",{className:"mt-2",children:[a.jsxs("p",{className:"mb-1 ",children:[a.jsx("strong",{children:"Before Project:"})," The table below summarizes the current consumption and cost as before the project:"]}),a.jsx("p",{className:"mb-1 small",children:"Table 1: Existing operation information"}),a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-bordered table-sm compact-table",children:[a.jsx("thead",{children:a.jsx("tr",{children:a.jsx("th",{colSpan:"2",className:"compact-header",style:{backgroundColor:"#f8f9fa"},children:"Current Operation"})})}),a.jsxs("tbody",{className:"small",children:[a.jsx("tr",{children:a.jsx("td",{colSpan:"2",className:"fst-italic py-1",children:"All values below are for p.a. for year 1 of simulation, excl. VAT, unless specifically stated otherwise"})}),a.jsxs("tr",{children:[a.jsx("td",{className:"py-1",children:"Electricity requirement p.a. (kWh)"}),a.jsx("td",{className:"text-end py-1",children:ne(t?.financials?.total_demand_kwh||0)})]}),a.jsxs("tr",{children:[a.jsx("td",{className:"py-1",children:"Off-Grid electricity (kWh)"}),a.jsx("td",{className:"text-end py-1",children:"-"})]}),a.jsxs("tr",{children:[a.jsx("td",{className:"py-1",children:"Total Energy Consumption (kWh)"}),a.jsx("td",{className:"text-end py-1",children:ne(t?.financials?.total_demand_kwh||0)})]}),a.jsxs("tr",{children:[a.jsx("td",{className:"py-1",children:a.jsx("strong",{children:"Total Cost of Electricity"})}),a.jsx("td",{className:"text-end py-1",children:a.jsxs("strong",{children:["R ",ne(t?.financials?.original_annual_cost||0)]})})]}),a.jsxs("tr",{children:[a.jsx("td",{className:"py-1",children:"Blended Rate"}),a.jsxs("td",{className:"text-end py-1",children:["R ",((t?.financials?.original_annual_cost||0)/(t?.financials?.total_demand_kwh||0)).toFixed(2)," /kWh"]})]}),a.jsxs("tr",{children:[a.jsx("td",{className:"py-1",style:{backgroundColor:"#f8f9fa"},children:a.jsx("strong",{children:"Grid Supply"})}),a.jsx("td",{style:{backgroundColor:"#f8f9fa"}})]}),a.jsxs("tr",{children:[a.jsx("td",{className:"py-1",children:"Grid Electricity Consumption (y1) (kWh)"}),a.jsx("td",{className:"text-end py-1",children:ne(t?.financials?.total_demand_kwh||0)})]}),a.jsxs("tr",{children:[a.jsx("td",{className:"py-1",children:"Grid Electricity Cost (y1)"}),a.jsxs("td",{className:"text-end py-1",children:["R ",ne(t?.financials?.original_annual_cost||0)]})]}),a.jsxs("tr",{children:[a.jsx("td",{className:"py-1",children:"Cost per unit (y1 energy only)"}),a.jsxs("td",{className:"text-end py-1",children:["R ",((t?.financials?.original_annual_cost||0)/(t?.financials?.total_demand_kwh||0)).toFixed(2)," /kWh"]})]})]})]})}),a.jsx("p",{className:"mt-2",children:"Grid electricity cost shows what it would have been, if there was a grid connection available."})]})]}),a.jsxs(xs,{header:"System Performance",data:t,pageNumber:r+4,totalPages:i,children:[a.jsx("h4",{className:"fw-bold",children:"System Design"}),a.jsx("p",{children:"This section covers the design process and technical data used."}),a.jsx("h5",{className:"fw-bold",children:"Meteorological Data"}),a.jsx("p",{children:"The detailed designs were done using our verified proprietary software which takes into account the site's specific meteorological information to predict the typical generation that can be expected from the specified equipment simulated over 365 days of the year. This enables an accurate analysis of the system yields and in return accurate results on the financial returns."}),a.jsx(J_,{width:300,src:Afe,alt:"Meteorological Data"}),a.jsx(J_,{align:"right",width:375,src:wfe,alt:"Rainfall Data"})]}),a.jsxs(xs,{header:"System Performance",data:t,pageNumber:r+5,totalPages:i,children:[a.jsx("h5",{className:"fw-bold",children:"System's Technical & Financial Information"}),a.jsx("p",{children:"Based on the design and simulation results, the system specifications and financial metrics are as follows:"}),a.jsx("div",{className:"system-specs-banner",style:{background:"#cddae6ff",padding:"20px 0",marginTop:"20px",marginBottom:"20px",borderRadius:"4px"},children:a.jsxs("div",{className:"spec-items-container",style:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",alignItems:"flex-start"},children:[a.jsxs("div",{className:"spec-item",style:{textAlign:"center",width:"16%"},children:[a.jsx("img",{src:G5,alt:"Solar PV",style:{width:"60px",height:"60px",marginBottom:"5px"}}),a.jsx("div",{style:{fontWeight:"bold",fontSize:"16px"},children:"Solar PV"}),a.jsxs("div",{style:{fontSize:"14px"},children:[(t?.project?.panel_kw).toFixed(2)||0," ",a.jsx("span",{style:{fontSize:"14px"},children:"kWp"})]}),a.jsxs("div",{style:{fontSize:"14px"},children:[t?.project?.num_panels||Math.ceil((t?.project?.panel_kw||0)*1e3/565)," panels"]})]}),a.jsxs("div",{className:"spec-item",style:{textAlign:"center",width:"16%"},children:[a.jsx("img",{src:K5,alt:"Inverters",style:{width:"60px",height:"60px",marginBottom:"5px"}}),a.jsx("div",{style:{fontWeight:"bold",fontSize:"16px"},children:"Inverters"}),a.jsxs("div",{style:{fontSize:"15px"},children:["Total"," ",a.jsxs("span",{style:{},children:[ne(Z(t?.project?.inverter_kva,85,"inverter_kva"))," ",a.jsx("span",{style:{fontSize:"14px"},children:"kVA"})]})]})]}),a.jsxs("div",{className:"spec-item",style:{textAlign:"center",width:"16%"},children:[a.jsx("img",{src:Q5,alt:"Battery",style:{width:"60px",height:"60px",marginBottom:"5px"}}),a.jsx("div",{style:{fontWeight:"bold",fontSize:"16px"},children:"Battery"}),a.jsxs("div",{style:{fontSize:"15px"},children:["Chemistry: ",t?.project?.battery_chem||"LiFePO4"]}),a.jsxs("div",{style:{fontSize:"15px"},children:[a.jsx("span",{style:{fontWeight:""},children:t.project.battery_nominal_rating?ne(t.project.battery_nominal_rating):ne(Z(t?.project?.battery_kwh,0,"battery_kwh"))})," ",a.jsx("span",{style:{fontSize:"14px"},children:"kWh @100%"})]}),a.jsxs("div",{style:{fontSize:"15px"},children:[a.jsx("span",{style:{fontWeight:""},children:ne(t?.project?.battery_kwh_80||Z(t?.project?.battery_kwh,0,"battery_kwh"))})," ",a.jsx("span",{style:{fontSize:"14px"},children:"kWh @80%"})]})]}),a.jsxs("div",{className:"spec-item",style:{textAlign:"center",width:"16%"},children:[a.jsx("img",{src:jfe,alt:"Specific Yield",style:{width:"60px",height:"60px",marginBottom:"5px"}}),a.jsx("div",{style:{fontWeight:"bold",fontSize:"16px"},children:"Specific Yield"}),a.jsx("div",{style:{fontSize:"18px",fontWeight:""},children:ne(t?.financials?.yield_excl_losses*365||1612)}),a.jsx("div",{style:{fontSize:"14px"},children:"kWh/kWp/year"})]}),a.jsxs("div",{className:"spec-item",style:{textAlign:"center",width:"16%"},children:[a.jsx("img",{src:Sfe,alt:"Utilized Energy",style:{width:"60px",height:"60px",marginBottom:"5px"}}),a.jsxs("div",{style:{fontWeight:"bold",fontSize:"16px"},children:["Utilized Energy",a.jsx("br",{}),"from System"]}),a.jsx("div",{style:{fontSize:"18px",fontWeight:""},children:ne(t?.financials?.total_generation_kwh||68166)}),a.jsx("div",{style:{fontSize:"14px"},children:"kWh/year"})]})]})}),a.jsxs("div",{className:"mt-3",children:[a.jsx("h5",{className:"fw-bold",children:"Installed capacity and simulated yield"}),a.jsx("p",{className:"mb-3",children:"Combined installation capacity and yields are shown in the tables below:"}),a.jsxs("div",{className:"table-responsive mb-4",children:[a.jsx("p",{className:"small mb-1",children:"Table 2: Technical Specifications"}),a.jsxs("table",{className:"table table-bordered table-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{style:{width:"60%"},children:"Technical Specifications"}),a.jsx("th",{style:{width:"20%"},children:"Value"}),a.jsx("th",{style:{width:"20%"},children:"Units"})]})}),a.jsxs("tbody",{className:"small",children:[a.jsxs("tr",{children:[a.jsx("td",{children:"PV Array"}),a.jsx("td",{className:"text-end",children:(t?.project?.panel_kw||0).toFixed(2)}),a.jsx("td",{children:"kWp"})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Number of panels"}),a.jsx("td",{className:"text-end",children:t?.project?.num_panels||Math.ceil((t?.project?.panel_kw||0)*1e3/565)||0}),a.jsx("td",{children:"ea"})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Inverter Capacity (Total)"}),a.jsx("td",{className:"text-end",children:ne(Z(t?.project?.inverter_kva,0,"inverter_kva"))}),a.jsx("td",{children:"kVA"})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Battery selected"}),a.jsxs("td",{className:"text-end",children:[ne(t?.project?.battery_nominal_rating),"/",ne(t?.project?.battery_kwh_80||Z(t?.project?.battery_kwh,0,"battery_kwh"))]}),a.jsx("td",{children:"kWh"})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Distribution"}),a.jsx("td",{className:"text-end",colSpan:"2",children:e.threePhase?"Three Phase":"Single Phase"})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Monitoring"}),a.jsx("td",{className:"text-end",colSpan:"2",children:"Smart metered, remote"})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Feedback Prevention"}),a.jsx("td",{className:"text-end",colSpan:"2",children:"Yes"})]})]})]})]})]})]}),a.jsxs(xs,{header:"System Performance",data:t,pageNumber:r+6,totalPages:i,children:[a.jsx("p",{className:"mb-3",children:"The table below shows the simulated performance yields from the system:"}),a.jsxs("div",{className:"table-responsive",children:[a.jsx("p",{className:"small mb-1",children:"Table 3: Simulated yields (y1)"}),a.jsxs("table",{className:"table table-bordered table-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{style:{width:"60%"},children:"Plant Output Specifications"}),a.jsx("th",{style:{width:"20%"},children:"Value"}),a.jsx("th",{style:{width:"20%"},children:"Units"})]})}),a.jsxs("tbody",{className:"small",children:[a.jsxs("tr",{children:[a.jsx("td",{children:"Daytime Consumption"}),a.jsx("td",{className:"text-end",children:ne(t?.simulation?.annual_metrics?.daytime_consumption_pct||0)}),a.jsx("td",{children:"%"})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"PV Utilization"}),a.jsx("td",{className:"text-end",children:ne(t?.simulation?.annual_metrics?.pv_utilization_pct||0)}),a.jsx("td",{children:"%"})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Overall Consumption from PV"}),a.jsx("td",{className:"text-end",children:ne(t?.simulation?.annual_metrics?.consumption_from_pv_pct||0)}),a.jsx("td",{children:"%"})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Potential Generation (daily)"}),a.jsx("td",{className:"text-end",children:ne(t?.simulation?.annual_metrics?.potential_gen_daily_kwh||0)}),a.jsx("td",{children:"kWh"})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Utilized Generation (daily)"}),a.jsx("td",{className:"text-end",children:ne(t?.simulation?.annual_metrics?.utilized_gen_daily_kwh||0)}),a.jsx("td",{children:"kWh"})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Throttling Losses (daily)"}),a.jsx("td",{className:"text-end",children:ne(t?.simulation?.annual_metrics?.throttling_losses_daily_kwh||0)}),a.jsx("td",{children:"kWh"})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Specific Yield Including Throttling Losses"}),a.jsx("td",{className:"text-end",children:t?.simulation?.annual_metrics?.specific_yield_incl_losses||0}),a.jsx("td",{children:"kWh/kWp/day"})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Potential Generation p.a."}),a.jsx("td",{className:"text-end",children:ne(t?.simulation?.annual_metrics?.potential_gen_annual_kwh||0)}),a.jsx("td",{children:"kWh"})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Utilized Generation p.a."}),a.jsx("td",{className:"text-end",children:ne(t?.simulation?.annual_metrics?.utilized_gen_annual_kwh||0)}),a.jsx("td",{children:"kWh"})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Throttling Losses p.a."}),a.jsx("td",{className:"text-end",children:ne(t?.simulation?.annual_metrics?.throttling_losses_annual_kwh||0)}),a.jsx("td",{children:"kWh"})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Specific Yield Excl. Throttling Losses"}),a.jsx("td",{className:"text-end",children:t?.simulation?.annual_metrics?.specific_yield_excl_losses||0}),a.jsx("td",{children:"kWh/kWp/day"})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Battery cycles in 1 year"}),a.jsx("td",{className:"text-end",children:t?.simulation?.annual_metrics?.battery_cycles_annual||"-"}),a.jsx("td",{children:"cycles/y"})]})]})]})]})]}),a.jsxs(xs,{header:"System Performance",data:t,pageNumber:r+7,totalPages:i,children:[a.jsx("h5",{className:"fw-bold",children:"Energy Production"}),a.jsx("p",{children:"The below graph shows the potential solar production from the system per month."}),a.jsx("div",{className:"chart-container",style:{height:"300px"},children:t?.financials?.cost_comparison?.length>0?a.jsx(ia,{data:ae,options:te}):a.jsx("div",{className:"text-center text-muted p-5",children:"No production data available"})}),a.jsxs("p",{className:"mt-3",children:["The system is projected to generate approximately ",ne(t?.financials?.potential_generation_kwh||0)," kWh per year."]}),a.jsx("h5",{className:"fw-bold",children:"Simulated Profiles"}),a.jsxs("div",{className:"mb-4",children:[a.jsx("p",{children:"The below graph shows the consumption and generation profiles for the different components of the system, post implementation for a number of days in the year."}),a.jsx("div",{className:"chart-header d-flex justify-content-end align-items-center mb-2",children:a.jsxs("div",{className:"no-print d-flex align-items-center",style:{minWidth:"280px"},children:[a.jsx(Xl,{selected:L,onChange:ce=>{const xe=new Date(ce);xe.setHours(0,0,0,0),M(xe);const Te=new Date(xe);Te.setDate(xe.getDate()+6),Te.setHours(23,59,59,999),O(Te)},dateFormat:"MMM d, yyyy",className:"form-control form-control-sm",style:{width:"160px"},popperPlacement:"bottom-end",minDate:new Date(new Date().getFullYear(),0,1),maxDate:new Date(new Date().getFullYear(),11,31),placeholderText:"Select week start date"}),a.jsx("small",{className:"text-muted ms-2 text-nowrap",children:"(Shows 7-day period)"})]})}),a.jsx("div",{className:"chart-container",style:{height:"320px"},children:t?.simulation?.timestamps?a.jsx(Rs,{data:{labels:R.labels,datasets:[{label:"Load Demand (kW)",data:R.demand,borderColor:"#ff6384",backgroundColor:"rgba(255, 99, 132, 0.1)",tension:.3,pointRadius:0,borderWidth:2,fill:!1},{label:"Solar Generation (kW)",data:R.generation,borderColor:"#ffce56",backgroundColor:"rgba(255, 206, 86, 0.1)",tension:.3,pointRadius:0,borderWidth:2},{label:"Grid Import (kW)",data:R.import_from_grid,borderColor:"#cc65fe",backgroundColor:"rgba(204, 101, 254, 0.1)",tension:.3,pointRadius:0,borderWidth:1.5,borderDash:[5,5]},{label:"Battery SOC (%)",data:R.battery_soc,borderColor:"#36a2eb",backgroundColor:"rgba(54, 162, 235, 0.1)",yAxisID:"y1",tension:.3,pointRadius:0,borderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},scales:{x:{type:"time",time:{unit:"day",tooltipFormat:"MMM dd, HH:mm"},title:{display:!0,text:"Date"}},y:{beginAtZero:!0,title:{display:!0,text:"Power (kW)"}},y1:{type:"linear",display:!0,position:"right",beginAtZero:!0,max:100,title:{display:!0,text:"Battery SOC (%)"},grid:{drawOnChartArea:!1}}},plugins:{legend:{position:"top"},title:{display:!0,text:"System Performance Simulation (Sample Week)"},tooltip:{mode:"index",intersect:!1,callbacks:{title:function(ce){return new Date(ce[0].parsed.x).toLocaleString("en-ZA",{weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}}},datalabels:{display:!1}}}}):a.jsx("div",{className:"text-center text-muted p-5",children:"No simulation data available. Please run a system simulation first."})})]})]}),a.jsxs(xs,{header:"System Performance",data:t,pageNumber:r+8,totalPages:i,children:[a.jsx("h5",{className:"fw-bold",children:"Financial Information"}),a.jsx("p",{children:"The key metrics to evaluate the business case of the project are shown in the table below:"}),a.jsxs("div",{className:"table-responsive",children:[a.jsx("p",{className:"small mb-1",children:"Table 4: Project Business Case Metrics and Benchmarking"}),a.jsxs("table",{className:"table table-bordered table-sm",children:[a.jsxs("thead",{children:[a.jsx("tr",{children:a.jsx("th",{colSpan:"2",className:"bg-light",children:t?.project?.system_type==="off-grid"?"Off-Grid Investment Metrics":t?.project?.system_type==="hybrid"?"Hybrid Investement Metrics":"Grid-Tied Investment Metrics"})}),a.jsx("tr",{children:a.jsx("td",{colSpan:"2",className:"fst-italic small bg-light",children:"All values below are year 1 of simulation, excl. VAT."})})]}),a.jsxs("tbody",{className:"small",children:[a.jsxs("tr",{children:[a.jsx("td",{children:"Total Capital Cost"}),a.jsxs("td",{className:"text-end",children:["R ",ne(t?.project?.project_value_excl_vat||0)]})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Effective cost after tax incentive"}),a.jsxs("td",{className:"text-end",children:["R ",ne(t?.project?.project_value_excl_vat*.73||0)]})]}),t?.project?.system_type==="off-grid"&&a.jsxs("tr",{children:[a.jsx("td",{children:"Generator Running Cost"}),a.jsxs("td",{className:"text-end",children:["R ",ne(t?.financials?.generator_running_cost||0)]})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Savings (year 1)"}),a.jsxs("td",{className:"text-end",children:["R ",ne(t?.financials?.annual_savings||0)]})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"First year yield"}),a.jsxs("td",{className:"text-end",children:[t?.financials?.yield_year1||Math.round(t?.financials?.annual_savings/t?.project?.project_value_excl_vat*100)||0,"%"]})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Payback (years)"}),a.jsx("td",{className:"text-end",children:(t?.financials?.payback_period||0).toFixed(2)})]})]})]})]}),a.jsx("p",{className:"mt-3",children:"The client's new monthly cost of electricity compared the current cost, as well as the cost and savings in year one after installation is shown in the graphs below."}),a.jsxs("div",{className:"figures-side-by-side mt-4",children:[a.jsxs("div",{className:"figure-left",children:[a.jsx("p",{className:"small mb-1",children:"Figure 12: Client new monthly utility cost"}),a.jsx("div",{className:"chart-container",style:{height:"300px"},children:t?.financials?.cost_comparison?.length>0?a.jsx(Rs,{data:{labels:t.financials.cost_comparison.map(ce=>{const xe=new Date(ce.month);return`${xe.getFullYear()}-${String(xe.getMonth()+1).padStart(2,"0")}`}),datasets:[{label:"Grid Electricity Cost (no load shedding)",data:t.financials.cost_comparison.map(ce=>ce.old_cost),borderColor:"#6c757d",borderWidth:2.5,tension:.3,pointRadius:0,fill:!1},{label:N==="Commercial"?"New Grid + Generator Cost":"New Grid Cost",data:t.financials.cost_comparison.map(ce=>ce.new_cost),borderColor:"#20c997",borderWidth:2.5,tension:.3,pointRadius:0,fill:!1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!1},tooltip:{mode:"index",intersect:!1},datalabels:{display:!1}},scales:{x:{grid:{display:!1},ticks:{maxRotation:0}},y:{beginAtZero:!0,ticks:{callback:function(ce){return"R "+ce.toLocaleString("en-ZA")}},title:{display:!1}}}}}):a.jsx("div",{className:"text-center text-muted p-5",children:"No cost comparison data available"})})]}),a.jsxs("div",{className:"figure-right",children:[a.jsx("p",{className:"small mb-1",children:"Figure 13: Cost saving in year 1"}),a.jsx("div",{className:"chart-container",style:{height:"300px"},children:t?.financials?.original_annual_cost&&t?.financials?.new_annual_cost?a.jsx(ia,{data:{labels:["Cost of Electricity p.a."],datasets:[{label:"Current cost p.a. - total",data:[t.financials.original_annual_cost],backgroundColor:"#6c757d",barPercentage:.6},{label:"New Cost p.a. - total",data:[t.financials.new_annual_cost],backgroundColor:"#18736a",stack:"savings-stack",barPercentage:.6},{label:"Saving p.a. y1",data:[t.financials.annual_savings],backgroundColor:"#98e7c8",stack:"savings-stack",barPercentage:.6}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"},title:{display:!0,text:"Cost of Electricity p.a.",position:"top",align:"center",font:{size:14}},tooltip:{mode:"index",intersect:!1},datalabels:{display:!0,color:"#fff",font:{weight:"bold"},formatter:ce=>"R"+ne(ce),anchor:"center",align:"center"}},scales:{x:{display:!1},y:{beginAtZero:!0,ticks:{callback:function(ce){return"R"+ce.toLocaleString("en-ZA")}}}}}}):a.jsx("div",{className:"text-center text-muted p-5",children:"No annual cost data available"})})]})]})]}),a.jsxs(xs,{header:"System Performance",data:t,pageNumber:r+9,totalPages:i,children:[a.jsx("h6",{className:"fw-bold",children:"Post installation cost summary:"}),a.jsxs("div",{className:"table-responsive",children:[a.jsx("p",{className:"small mb-1",children:"Table 5: Cost and Savings Details"}),a.jsxs("table",{className:"table table-bordered table-sm",children:[a.jsxs("thead",{children:[a.jsx("tr",{children:a.jsx("th",{colSpan:"2",className:"bg-light",children:t?.project?.system_type==="off-grid"?"Off-Grid ESS":t?.project?.system_type==="hybrid"?"Hybrid ESS":"Grid-Tied Solar PV"})}),a.jsx("tr",{children:a.jsx("td",{colSpan:"2",className:"fst-italic small bg-light",children:"All values below are for p.a. for year 1 of simulation, excl. VAT, unless specifically stated otherwise"})})]}),a.jsxs("tbody",{className:"small",children:[a.jsxs("tr",{children:[a.jsx("td",{children:"Total Capital Costs (excl. VAT)"}),a.jsxs("td",{className:"text-end",children:["R ",ne(t?.project?.project_value_excl_vat||0)]})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Effective cost (after appl. tax benefit)"}),a.jsxs("td",{className:"text-end",children:["R ",ne(t?.project?.project_value_excl_vat*.73||0)]})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Total Energy Consumption (kWh)"}),a.jsx("td",{className:"text-end",children:ne(t?.financials?.total_demand_kwh||0)})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Total Cost of Electricity"}),a.jsxs("td",{className:"text-end",children:["R ",ne(t?.financials?.new_annual_cost||0)]})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Blended Rate (R/kWh)"}),a.jsxs("td",{className:"text-end",children:["R ",((t?.financials?.new_annual_cost||0)/(t?.financials?.total_demand_kwh||1)).toFixed(2)]})]}),a.jsx("tr",{className:"bg-light",children:a.jsx("td",{colSpan:"2",className:"bg-light",children:a.jsx("strong",{children:"Savings"})})}),a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("strong",{children:"Total Cost Savings (y1)"})}),a.jsxs("td",{className:"text-end",children:["R ",ne(t?.financials?.annual_savings||0)]})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Grid savings (y1)"}),a.jsxs("td",{className:"text-end",children:["R ",ne(t?.financials?.annual_savings||0)]})]}),(t?.project?.system_type==="hybrid"||t?.project?.system_type==="off-grid")&&N==="Commercial"&&a.jsxs("tr",{children:[a.jsx("td",{children:"Generator cost savings (y1)"}),a.jsxs("td",{className:"text-end",children:["R ",ne(t?.financials?.generator_cost_savings||0)]})]}),t?.project?.system_type!=="off-grid"&&a.jsxs(a.Fragment,{children:[a.jsx("tr",{className:"bg-light",children:a.jsx("td",{colSpan:"2",className:"bg-light",children:a.jsx("strong",{children:"New Grid Supply"})})}),a.jsxs("tr",{children:[a.jsx("td",{children:"Grid Electricity Consumption (y1) (kWh)"}),a.jsx("td",{className:"text-end",children:ne(t?.financials?.total_import_kwh||0)})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Grid Electricity Cost (y1)"}),a.jsxs("td",{className:"text-end",children:["R ",ne(t?.financials?.new_annual_cost||0)]})]})]}),a.jsx("tr",{className:"bg-light",children:a.jsx("td",{colSpan:"2",className:"bg-light",children:a.jsx("strong",{children:t?.project?.system_type==="hybrid"?"Hybrid ESS":t?.project?.system_type==="off-grid"?"Off-Grid ESS":"Grid-Tied Solar PV"})})}),a.jsxs("tr",{children:[a.jsxs("td",{children:["Electricity from PV (y1) direct ",t?.project?.system_type==="off-grid"?"Off-Grid":"On-Grid"," (kWh)"]}),a.jsx("td",{className:"text-end",children:ne(t?.financials?.pv_direct_consumption||t?.financials?.total_generation_kwh*.6||0)})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Electricity from PV (y1) direct consumption (kWh)"}),a.jsx("td",{className:"text-end",children:ne(t?.financials?.pv_direct_consumption||t?.financials?.total_generation_kwh*.6||0)})]}),(t?.project?.system_type==="hybrid"||t?.project?.system_type==="off-grid")&&a.jsxs(a.Fragment,{children:[a.jsxs("tr",{children:[a.jsxs("td",{children:["Electricity from PV (y1) direct ",t?.project?.system_type==="off-grid"?"Off-Grid":"On-Grid"," (kWh)"]}),a.jsx("td",{className:"text-end",children:ne(t?.financials?.pv_direct_consumption||t?.financials?.total_generation_kwh*.6||0)})]}),t?.project?.allow_export&&a.jsxs("tr",{children:[a.jsx("td",{children:"Electricity from PV (y1) surplus recovery (kWh)"}),a.jsx("td",{className:"text-end",children:ne(t?.financials?.exported_energy||0)})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Electricity from Battery (y1) (kWh)"}),a.jsx("td",{className:"text-end",children:ne(t?.financials?.battery_discharge||t?.financials?.total_generation_kwh*.4||0)})]})]}),(t?.project?.system_type==="hybrid"||t?.project?.system_type==="off-grid")&&N==="Commercial"&&a.jsxs(a.Fragment,{children:[a.jsx("tr",{className:"bg-light",children:a.jsx("td",{colSpan:"2",children:a.jsx("strong",{children:"New Diesel Generator"})})}),a.jsxs("tr",{children:[a.jsx("td",{children:"Electricity from generator (y1) (kWh)"}),a.jsx("td",{className:"text-end",children:ne(t?.financials?.generator_energy||0)})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Generator Electricity Cost (y1)"}),a.jsxs("td",{className:"text-end",children:["R ",ne(t?.financials?.generator_running_cost||0)]})]})]})]})]}),(t?.project?.system_type==="hybrid"||t?.project?.system_type==="off-grid")&&N==="Commercial"&&a.jsx("p",{className:"small mt-2 fst-italic",children:"*Generator costs based on simulated load shedding scenarios and quiet hours."})]})]}),a.jsx(xs,{header:"System Performance",data:t,pageNumber:r+10,totalPages:i,children:a.jsxs("div",{className:"scope-of-work",children:[a.jsx("h5",{className:"fw-bold",children:"Scope of Work"}),a.jsx("p",{children:"The following scope of work will be completed as part of the project and are included in the cost of the proposal:"}),a.jsxs("ul",{className:"ps-4",children:[a.jsx("li",{children:"Engineering design done by qualified Orka Solar engineers."}),a.jsxs("li",{children:["Full ",a.jsx("span",{className:"fw-bold",children:"turn key"})," solution, done by experienced Orka Solar employees, including:",a.jsxs("ul",{className:"circle-list",children:[a.jsx("li",{children:"Procurement, delivery and installation"}),a.jsx("li",{children:"Site supervision"}),a.jsx("li",{children:"SHEQ management"}),a.jsx("li",{children:"Project management"}),a.jsx("li",{children:"Testing and commissioning"}),a.jsx("li",{children:"Electrical Certificate of Compliance"}),a.jsx("li",{children:"Client training and project hand over"})]})]}),a.jsx("li",{children:"Manufacturer's warranty on all major equipment and workmanship warranty."}),a.jsx("li",{children:"Orka Solar warranty on installation and project performance."})]}),a.jsx("h5",{className:"fw-bold",children:"Quality and Warranty"}),a.jsx("p",{children:"Orka Solar is product agnostic and can therefore supply equipment to the client's specification, provided that the equipment meets the minimum quality standards of our company. Orka Solar has long standing relationships with our product suppliers and the products proposed as part of this design are of the highest quality and comes with standard supplier or manufacturer's warranties."}),a.jsx("p",{children:"Major component warranty details are provided below:"}),a.jsxs("ul",{className:"ps-4",children:[a.jsxs("li",{children:["PV modules: ",a.jsx("span",{className:"fw-bold",children:"12-year"})," product warranty, ",a.jsx("span",{className:"fw-bold",children:"25-year"})," linear power output warranty"]}),a.jsxs("li",{children:["Inverter: ",a.jsx("span",{className:"fw-bold",children:"5-year"})," manufacturer's warranty (option to extend to 10 years)"]}),a.jsxs("li",{children:["Mounting system ",a.jsx("span",{className:"fw-bold",children:"10-year"})," manufacturer's warranty"]}),a.jsxs("li",{children:["Workmanship warranty of ",a.jsx("span",{className:"fw-bold",children:"2-years"})]}),a.jsx("li",{children:"Post installation maintenance, monitoring and control service available from Orka Solar to ensure optimal benefit from the system."})]})]})}),a.jsx(xs,{header:"System Performance",data:t,pageNumber:r+11,totalPages:i,children:a.jsxs("div",{className:"terms-of-service",children:[a.jsx("h5",{className:"fw-bold",children:"Terms of Service"}),a.jsxs("p",{children:["The project's invoicing will be as follows: 50% deposit on order, 40% on delivery of panels and inverters to site and 10% on project handover certificate sign off. Prices are valid to ",X,". Thereafter, prices may change due to exchange rate fluctuations, inflation (CPI) and/or supplier price changes. Invoices will be paid on 7 days terms. Late delivery penalty due to delays caused by the contractor will be 0.5% of project value per week."]}),a.jsx("h5",{className:"fw-bold",children:"Project Schedule"}),a.jsx("p",{children:"The project timeline is dependent on the date of deposit and availability of key components. An indicative timeline for this project without any delays due to long lead items are shown below:"}),a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-bordered table-sm compact-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Activity/ phase/ milestone"}),a.jsx("th",{children:"Project week"})]})}),a.jsx("tbody",{children:e.projectSchedule.map((ce,xe)=>a.jsxs("tr",{children:[a.jsx("td",{children:ce.activity}),a.jsx("td",{children:ce.timeline})]},xe))})]})}),a.jsx("h5",{className:"fw-bold",children:"Standards and Regulations"}),a.jsx("p",{children:"Orka Solar installations are completed in compliance with the following standards and regulations where applicable:"}),a.jsxs("ul",{className:"ps-4",children:[a.jsx("li",{children:"Electricity Regulation Act, 2006"}),a.jsx("li",{children:"NRS097-2-1: Utility Interface"}),a.jsx("li",{children:"NRS097-2-3: Simplified utility connection criteria for low-voltage connected generators"}),a.jsx("li",{children:"South African Renewable Power Plant Grid Code (although the NRS 097-2 series cover most issues relevant to SSEG)"}),a.jsx("li",{children:"NRS 048: Electricity Supply – Quality of Supply"}),a.jsx("li",{children:"SANS 10142-1 and 10142-1-2: The wiring of premises (as amended and published)"}),a.jsx("li",{children:"SANS 62305-4:2011 Protection against lightning and Surge – Surge Arrestors and Earthing Regulations"}),a.jsx("li",{children:"SANS 474 / NRS 057: Code of Practice for Electricity Metering"}),a.jsx("li",{children:"Municipal Electricity Supply by-laws of the applicable municipality"})]})]})}),a.jsxs(xs,{header:"System Performance",data:t,pageNumber:r+12,totalPages:i,children:[a.jsx("h5",{className:"fw-bold",children:"Notable Points"}),a.jsx("p",{children:"The following assumptions and exclusions were made and form part of this proposal:"}),a.jsxs("ol",{className:"ps-4",children:[a.jsxs("li",{children:[e.usedActualConsumption?"Actual consumption data was used for the design and simulations of the solution.":"Actual consumption data was not used for the design and simulations of the solution."," Should the loads change or differ from the data analysed Orka Solar should be notified by the client."]}),a.jsx("li",{children:"It was assumed that the consumption data is a fair representation of the future consumption."}),a.jsx("li",{children:"When applicable, in most municipalities there is currently either no regulations around exporting electricity to the grid, or such export is prohibited. For this reason, Orka Solar advise against exporting excess solar energy to the grid without the required permits, although many of Orka Solar' clients have chosen to export where possible. All inverters supplied by Orka Solar conform to internationally recognized grid-export safety regulations."}),a.jsx("li",{children:"The scope and activities listed as part of this proposal is sufficient so successfully delivery the project. Any additional work, not listed as part of this scope and which could not be taken into account, will be negotiated separately, regarding any additional time and/or materials that may be required."}),a.jsx("li",{children:"Orka Solar reserve the right to requote should a detailed site visit and logging not have been completed or if any of the assumptions or information provided are found not to be accurate."}),a.jsx("li",{children:"It was assumed that all existing infrastructure on site are installed according to the relevant standards and complies with regulation."}),a.jsxs("li",{children:["Unless specified otherwise:",a.jsxs("ol",{type:"a",className:"ps-4",children:[a.jsxs("li",{children:["Generator integration is ",e.generatorIncluded?"included":"excluded","."]}),a.jsx("li",{children:"No roof inspection for possible roof mounted panels were included, it is recommended that the client conduct such an inspection or contact Orka Solar to facilitate an inspection with a qualified third party."}),a.jsx("li",{children:"Tree trimming/removal is excluded from the scope of work."}),a.jsx("li",{children:"MV Transformers and/or MV switchgear are excluded."}),a.jsx("li",{children:"No cost for building an inverter enclosure has been excluded."}),a.jsx("li",{children:"No cost for internet supply has been allowed for, as the client will supply internet to the inverter enclosure by means of an ethernet socket."}),a.jsx("li",{children:"No costs for Eskom's SSEG or NERSA administration has been allowed."}),a.jsx("li",{children:"It was assumed that all existing infrastructure on site are installed according to the relevant standards and complies with regulation."})]})]}),a.jsx("li",{children:"Orka Solar guarantees the production output of the system if an active Orka Solar SLA is in place."})]})]})]})}const Nfe=t=>String(t||"").toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""),kfe=t=>(t||"").replace(/-/g," ").replace(/\b\w/g,e=>e.toUpperCase()),wR=["panel","inverter","battery"],jR=" ",xl=(t=0)=>{const e=t<0?"-":"",n=Math.abs(t).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(/,/g,jR);return`${e}R${jR}${n}`};function Dfe({data:t,settings:e,startPageNumber:n=16,totalPages:s=24}){const r=t?.project?.id,i=e?.bomPriceMode||"none",[o,c]=v.useState([]),[u,f]=v.useState(!0);v.useEffect(()=>{r&&(async()=>{f(!0);try{const O=((await Re.get(`${Ce}/api/products`)).data||[]).map(V=>({...V,category:Nfe(V.category)})),H=((await Re.get(`${Ce}/api/projects/${r}/bom`)).data||[]).map(V=>{const G=O.find(U=>U.id===V.product_id);return G?{product:G,quantity:Number(V.quantity)||1,unitPrice:Number(G.price??0)}:null}).filter(Boolean);c(H)}catch{c([])}finally{f(!1)}})()},[r]);const m=v.useMemo(()=>{const T=new Map;for(const I of o){const $=I.product||{},H=$.category||"other";T.has(H)||T.set(H,new Map);const V=T.get(H);V.has($.id)||V.set($.id,{id:$.id,name:[$.brand,$.model].filter(Boolean).join(" ").trim()||$.name||"Unnamed product",qty:0,unitPrice:Number(I.unitPrice||0)});const G=V.get($.id);G.qty+=I.quantity||0}const O=[];for(const[I,$]of Array.from(T.entries()).sort((H,V)=>{const G=wR.indexOf(H[0]),U=wR.indexOf(V[0]);return G!==-1&&U!==-1?G-U:G!==-1?-1:U!==-1?1:H[0].localeCompare(V[0])})){const H=Array.from($.values()).sort((G,U)=>G.name.localeCompare(U.name)),V=H.reduce((G,U)=>G+U.qty*(U.unitPrice||0),0);O.push({type:"category",cat:I,label:kfe(I),total:V}),H.forEach(G=>O.push({type:"item",...G}))}return O},[o]),h=v.useRef(null),g=v.useRef(null),x=v.useRef(null),b=v.useRef(null),[A,_]=v.useState({contentH:0,headH:0,itemH:10,catH:18}),[j,C]=v.useState(0);v.useLayoutEffect(()=>{if(!h.current)return;const T=requestAnimationFrame(()=>{const I=h.current.querySelector(".orka-page-content");if(!I||!g.current||!x.current||!b.current)return;const $=I.clientHeight,H=g.current.getBoundingClientRect().height||18,V=x.current.getBoundingClientRect().height||16,G=b.current.getBoundingClientRect().height||V;_({contentH:$,headH:H,itemH:V,catH:G})});return()=>cancelAnimationFrame(T)},[u,m.length,i]);const k=v.useMemo(()=>{const{contentH:T,headH:O,itemH:I,catH:$}=A;if(!T)return[[]];const H=[];let V=[],G=T-O;const U=()=>{V.length&&H.push(V),V=[],G=T-O};for(const R of m){const P=R.type==="category"?$:I;P>G&&U(),V.push(R),G-=P}return V.length&&H.push(V),H.length?H:[[]]},[m,A]),E=i!=="none",N=i==="line",L=v.useMemo(()=>{const T=m.filter(H=>H.type==="item").reduce((H,V)=>H+V.qty*(V.unitPrice||0),0),O=15,I=T*(O/100),$=T+I;return{total_excl_vat:T,vat_perc:O,vat_price:I,total_incl_vat:$}},[m]),M=()=>a.jsx("div",{className:"bom-measurer no-print","aria-hidden":"true",style:{position:"absolute",visibility:"hidden",pointerEvents:"none",inset:0},ref:h,children:a.jsx(xs,{header:"Bill of Materials",className:"bom-dense",data:t,children:a.jsxs("table",{className:"bom-compact-table",children:[a.jsx("thead",{ref:g,children:a.jsxs("tr",{children:[a.jsx("th",{className:"bom-prod-col",children:"Product"}),a.jsx("th",{className:"bom-qty-col",children:"Qty"}),E&&a.jsx("th",{style:{width:94,textAlign:"right"},children:"Total"})]})}),a.jsxs("tbody",{children:[a.jsxs("tr",{ref:b,children:[a.jsx("td",{colSpan:2,children:a.jsx("strong",{children:"Category"})}),E&&a.jsx("td",{style:{textAlign:"right"},children:xl(0)})]}),a.jsxs("tr",{ref:x,children:[a.jsx("td",{children:"Example product name"}),a.jsx("td",{style:{textAlign:"right"},children:"9"}),E&&a.jsx("td",{style:{textAlign:"right"},children:N?xl(0):""})]})]})]})})});return u?a.jsxs(xs,{header:"Bill of Materials",className:"bom-dense",data:t,pageNumber:n,totalPages:s,children:[a.jsx("div",{className:"text-center text-muted py-2",children:"Loading BOM…"}),a.jsx(M,{})]}):m.length?a.jsxs(a.Fragment,{children:[k.map((T,O)=>a.jsx(xs,{header:`Bill of Materials ${k.length>1?`(${O+1}/${k.length})`:""}`,className:"bom-dense",data:t,pageNumber:n+O,totalPages:s+1,children:a.jsxs("div",{className:"table-responsive",children:[a.jsx("h5",{className:"fw-bold",children:"Bill Of Materials"}),a.jsxs("table",{className:"bom-compact-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{className:"bom-prod-col",children:"Product"}),a.jsx("th",{className:"bom-qty-col",children:"Qty"}),E&&a.jsx("th",{style:{width:80,textAlign:"right"},children:"Total"})]})}),a.jsxs("tbody",{children:[T.map((I,$)=>{if(I.type==="category")return a.jsxs("tr",{style:{background:"#f7f7f7"},children:[a.jsx("td",{colSpan:2,children:a.jsx("strong",{children:I.label})}),E&&a.jsx("td",{style:{textAlign:"right",fontWeight:700},children:xl(I.total)})]},`cat-${O}-${$}`);const H=I.qty*(I.unitPrice||0);return a.jsxs("tr",{children:[a.jsx("td",{className:"bom-prod-cell",children:I.name}),a.jsx("td",{className:"bom-qty-cell",children:I.qty}),E&&a.jsx("td",{style:{textAlign:"right"},children:N?xl(H):""})]},`row-${O}-${$}`)}),E&&O===k.length-1&&a.jsxs(a.Fragment,{children:[a.jsxs("tr",{className:"border-top border-dark",children:[a.jsx("td",{className:"fw-semibold",colSpan:2,children:"Total (excl. VAT):"}),a.jsx("td",{className:"text-end fw-semibold",children:xl(L.total_excl_vat)})]}),a.jsxs("tr",{children:[a.jsxs("td",{className:"fw-semibold",colSpan:2,children:[L.vat_perc,"% VAT:"]}),a.jsx("td",{className:"text-end fw-semibold",children:xl(L.vat_price)})]}),a.jsxs("tr",{className:"border-top border-dark",children:[a.jsx("td",{className:"fw-bold",colSpan:2,children:"Total (incl. VAT):"}),a.jsx("td",{className:"text-end fw-bold",children:xl(L.total_incl_vat)})]})]})]})]})]})},O)),a.jsx(M,{})]}):a.jsxs(xs,{header:"Bill of Materials",className:"bom-dense",data:t,pageNumber:n,totalPages:s,children:[a.jsx("div",{className:"text-center text-muted py-2",children:"No saved BOM for this project."}),a.jsx(M,{})]})}function Efe({projectId:t,onNavigateToTab:e}){const{showNotification:n}=Os(),[s,r]=v.useState(!0);v.useEffect(()=>{window.matchMedia("(max-width: 992px)").matches&&r(!1)},[]);const[i,o]=v.useState([]);v.useEffect(()=>{Re.get(`${Ce}/api/products`).then(T=>{o(T.data),console.log("REPORT BUILDER: products loaded = ",T.data)})},[]);const[c,u]=v.useState({cover:!0,clientDetails:!0,performance:!0,bom:!0,financial:!0,custom:!1,siteLayout:!0}),[f,m]=v.useState({usedActualConsumption:!1,threePhase:!0,bomPriceMode:"none",generatorIncluded:!1,projectSchedule:[{activity:"Deposit received & document compilation",timeline:"Week 1"},{activity:"Equipment procurement & delivery",timeline:"Week 2 (provided no major supplier delays)"},{activity:"Construction & installation",timeline:"Week 2-4"},{activity:"Commissioning",timeline:"Week 5"},{activity:"Training",timeline:"Week 5"},{activity:"Handover",timeline:"Week 6"}]}),[h,g]=v.useState(null),[x,b]=v.useState(!0),[A,_]=v.useState(null),[j,C]=v.useState([]),k=T=>{const O=[];return(!T?.simulation?.timestamps||T.simulation.timestamps.length===0)&&O.push({type:"simulation",title:"System Simulation",tab:"design",action:"Go to System Design"}),!T?.financials?.annual_savings&&!T?.financials?.original_annual_cost&&!T?.financials?.cost_comparison&&O.push({type:"financial",title:"Financial Modeling",tab:"finance",action:"Go to Financial Modeling"}),O},N=(()=>{const T={cover:0,executiveSummary:1,designReportMeta:1,mainReportContent:13,bomSection:c.bom?1:0};let O=Object.values(T).reduce(($,H)=>$+H,0),I=1;return{totalPages:O,executiveSummary:{start:I,count:T.executiveSummary},designReportMeta:{start:I+=T.executiveSummary,count:T.designReportMeta},mainReportContent:{start:I+=T.designReportMeta,count:T.mainReportContent},bomSection:{start:I+=T.mainReportContent,count:T.bomSection}}})();v.useEffect(()=>{},[c]);const L=({missingItems:T,onNavigateToTab:O})=>a.jsx("div",{className:"missing-data-warning p-4 m-4",children:a.jsxs("div",{className:"alert alert-info",children:[a.jsxs("h5",{className:"alert-heading",children:[a.jsx("i",{className:"bi bi-info-circle me-2"}),"Simulations Required"]}),a.jsx("p",{className:"mb-3",children:"Please run the required simulations to generate the report:"}),a.jsx("div",{className:"missing-items",children:T.map((I,$)=>a.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2 p-2 border rounded",children:[a.jsx("span",{children:I.title}),a.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>O&&O(I.tab),children:I.action})]},$))})]})});v.useEffect(()=>{if(!t)return;b(!0);const T=JSON.parse(sessionStorage.getItem(`simulationData_${t}`)||"{}"),O=JSON.parse(sessionStorage.getItem(`financialResult_${t}`)||"{}");Re.get(`${Ce}/api/projects/${t}`).then(I=>{const $=I.data;console.log("Project data loaded:",$);const H=(R,P,Z)=>{if(!Array.isArray(P)||!R)return"";const ne=R.find(D=>P.includes(D.id)&&D.category===Z);return ne?`${ne.brand}`:""},V=(R,P,Z)=>{if(!Array.isArray(P)||!R)return"";const ne=R.find(D=>P.includes(D.id)&&D.category===Z);return ne?ne.nominal_rating_kwh:""};$.inverter_brand_model=H(i,$.inverter_ids,"Inverter"),$.battery_brand_model=H(i,$.battery_ids,"Battery"),$.battery_nominal_rating=$.battery_kwh>0?Number(V(i,$.battery_ids,"Battery")*$.battery_kwh.quantity).toFixed(2):0;const G={project:$,simulation:T,financials:O,products:i};g(G);const U=k(G);C(U),b(!1)}).catch(I=>{console.error("Error loading report data:",I),n("Error loading report data","error"),b(!1)})},[t,n,i]);const M=T=>{const O=T.target.files[0];if(O){const I=new FileReader;I.onload=$=>{_($.target.result),sessionStorage.setItem(`siteLayoutImage_${t}`,$.target.result)},I.readAsDataURL(O)}};return v.useEffect(()=>{if(t){const T=sessionStorage.getItem(`siteLayoutImage_${t}`);T&&_(T)}},[t]),v.useEffect(()=>{const T=localStorage.getItem("report_sections");T&&u(O=>({...O,...JSON.parse(T)}))},[]),v.useEffect(()=>{localStorage.setItem("report_sections",JSON.stringify(c))},[c]),a.jsxs("div",{className:`report-builder ${s?"sidebar-open":""}`,children:[a.jsx("div",{className:"section-controls no-print",children:a.jsxs("div",{className:"section-toggle",children:[a.jsxs("label",{children:[a.jsx("input",{type:"checkbox",checked:f.usedActualConsumption,onChange:()=>m(T=>({...T,usedActualConsumption:!T.usedActualConsumption}))}),"Actual data used for sim?"]}),a.jsxs("label",{children:[a.jsx("input",{type:"checkbox",checked:c.siteLayout,onChange:()=>u(T=>({...T,siteLayout:!T.siteLayout}))}),"Show Site Layout"]}),c.siteLayout&&a.jsxs("div",{className:"image-upload mt-2",children:[a.jsx("label",{htmlFor:"site-layout-image",className:"btn btn-sm btn-outline-secondary",children:A?"Change Layout Image":"Upload Layout Image"}),a.jsx("input",{id:"site-layout-image",type:"file",accept:"image/*",style:{display:"none"},onChange:M})]}),a.jsxs("label",{children:[a.jsx("input",{type:"checkbox",checked:c.bom,onChange:()=>u(T=>({...T,bom:!T.bom}))}),"Bill of Materials"]}),a.jsxs("label",{children:[a.jsx("input",{type:"checkbox",checked:f.threePhase,onChange:()=>m(T=>({...T,threePhase:!T.threePhase}))}),"Three Phase?"]}),a.jsxs("label",{children:[a.jsx("input",{type:"checkbox",checked:f.generatorIncluded,onChange:()=>m(T=>({...T,generatorIncluded:!T.generatorIncluded}))}),"Include Generator Integration"]}),a.jsxs("div",{children:["Adjust Project Schedule",f.projectSchedule.map((T,O)=>a.jsxs("div",{children:[a.jsx("label",{children:T.activity}),a.jsx("input",{type:"text",value:T.timeline,onChange:I=>{const $=[...f.projectSchedule];$[O].timeline=I.target.value,m(H=>({...H,projectSchedule:$}))}})]},O))]}),a.jsxs("label",{style:{display:"flex",gap:"6px",alignItems:"center",marginTop:8},children:[a.jsx("span",{style:{minWidth:115},children:"BOM prices:"}),a.jsxs("select",{value:f.bomPriceMode,onChange:T=>m(O=>({...O,bomPriceMode:T.target.value})),children:[a.jsx("option",{value:"none",children:"Hide all"}),a.jsx("option",{value:"category",children:"Category totals only"}),a.jsx("option",{value:"line",children:"Line-item prices"})]})]})]})}),a.jsxs("button",{className:"orka-sidebar-export-btn",onClick:()=>window.print(),children:[a.jsx("span",{role:"img","aria-label":"Export",children:"📄"})," Export as PDF"]}),a.jsx("main",{className:"orka-report-printarea report-content",children:x?a.jsx("div",{className:"loading-spinner",children:"Loading report data..."}):j.length>0?a.jsx(L,{missingItems:j,onNavigateToTab:e}):a.jsxs(a.Fragment,{children:[c.cover&&a.jsx(yfe,{data:h}),a.jsx(_fe,{data:h,settings:f,pageNumber:N.executiveSummary.start,totalPages:N.totalPages}),a.jsx(Cfe,{data:h,settings:f,showSiteLayout:c.siteLayout,siteLayoutImage:A,startPageNumber:N.mainReportContent.start,totalPages:N.totalPages}),c.bom&&a.jsx(Dfe,{data:h,settings:f,startPageNumber:N.bomSection.start,totalPages:N.totalPages})]})})]})}function X5({projectId:t}){const[e,n]=v.useState("grid"),[s,r]=v.useState(100),[i,o]=v.useState(!1),[c,u]=v.useState(null),[f,m]=v.useState(0),[h,g]=v.useState(0),[x,b]=v.useState(!1),[A,_]=v.useState([]),j=()=>{o(!0),Re.post(`${Ce}/api/optimize`,{project_id:t,system_type:e,roof_kw_limit:parseFloat(s),tariff:f,feed_in_tariff:h,export_enabled:x,sample_size:10}).then(C=>{u(C.data.best),_(C.data.samples)}).finally(()=>o(!1))};return a.jsxs("div",{className:"container",children:[a.jsx("h4",{children:"Automatic System Optimizer"}),a.jsxs("div",{className:"row g-3 mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"System Type"}),a.jsxs("select",{className:"form-select",value:e,onChange:C=>n(C.target.value),children:[a.jsx("option",{value:"grid",children:"Grid-tied"}),a.jsx("option",{value:"hybrid",children:"Hybrid"}),a.jsx("option",{value:"off-grid",children:"Off-grid"})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Roof Limit (kWp)"}),a.jsx("input",{type:"number",className:"form-control",value:s,onChange:C=>r(C.target.value)})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Allow Export?"}),a.jsx("br",{}),a.jsx("input",{type:"checkbox",checked:x,onChange:C=>b(C.target.checked)})]}),a.jsx("div",{className:"col-md-12",children:a.jsx("button",{className:"btn btn-primary",onClick:j,disabled:i,children:i?"Running…":"Run Optimizer"})})]}),c&&a.jsxs("div",{className:"alert alert-success",children:[a.jsx("h5",{className:"mb-1",children:"Suggested Design"}),a.jsxs("ul",{className:"mb-0",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Panels:"})," ",c.kwp," kWp"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Inverter:"})," ",c.inv_model||"-"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Battery:"})," ",c.bat_kwh," kWh"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Total System Cost:"})," R",c.capex.toFixed(0)]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Annual Savings:"})," R",c.annual_savings.toFixed(0)]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Payback:"})," ",c.payback_years.toFixed(1)," years"]})]})]}),A.length>0&&a.jsxs("div",{className:"mt-4",children:[a.jsx("h6",{children:"Sample of Designs Tried"}),a.jsxs("table",{className:"table table-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"kWp"}),a.jsx("th",{children:"Inverter"}),a.jsx("th",{children:"Bat (kWh)"}),a.jsx("th",{children:"Capex (R)"}),a.jsx("th",{children:"Payback (yr)"})]})}),a.jsx("tbody",{children:A.map((C,k)=>a.jsxs("tr",{children:[a.jsx("td",{children:C.kwp}),a.jsx("td",{children:C.inv_model}),a.jsx("td",{children:C.bat_kwh}),a.jsx("td",{children:C.capex.toFixed(0)}),a.jsx("td",{children:C.payback_years.toFixed(1)})]},k))})]})]})]})}function Ux({currentTariffId:t,currentCustomRate:e,onChange:n}){const[s,r]=v.useState([]),[i,o]=v.useState(!0),[c,u]=v.useState(""),[f,m]=v.useState("catalogue"),[h,g]=v.useState(""),[x,b]=v.useState(null),[A,_]=v.useState(""),[j,C]=v.useState({power_user_type:"all",tariff_category:"all",structure:"all",supply_voltage:"all",transmission_zone:"all"});v.useEffect(()=>{(async()=>{try{const I=await Re.get(`${Ce}/api/tariffs`);r(I.data)}catch{u("Could not load tariff catalogue.")}finally{o(!1)}})()},[]),v.useEffect(()=>{if(t){m("catalogue");const O=s.find(I=>I.id===t);b(O)}else e&&(m("custom"),_(e))},[t,e,s]);const k=v.useMemo(()=>{let O=s;j.power_user_type!=="all"&&(O=O.filter(U=>U.power_user_type===j.power_user_type));const I=[...new Set(s.map(U=>U.power_user_type))],$=[...new Set(O.map(U=>U.tariff_category))],H=[...new Set(O.map(U=>U.structure))],V=[...new Set(O.filter(U=>U.supply_voltage).map(U=>U.supply_voltage))],G=[...new Set(O.filter(U=>U.transmission_zone).map(U=>U.transmission_zone))];return{powerUserTypes:I,categories:$,structures:H,voltages:V,zones:G}},[s,j.power_user_type]),E=v.useMemo(()=>{const O=h.toLowerCase().trim();return s.filter(I=>j.power_user_type==="all"||I.power_user_type===j.power_user_type).filter(I=>j.tariff_category==="all"||I.tariff_category===j.tariff_category).filter(I=>j.structure==="all"||I.structure===j.structure).filter(I=>j.supply_voltage==="all"||I.supply_voltage===j.supply_voltage).filter(I=>j.transmission_zone==="all"||I.transmission_zone===j.transmission_zone).filter(I=>!O||I.name.toLowerCase().includes(O))},[h,s,j]),N=O=>{m(O),O==="custom"?(b(null),n({tariff_id:null,custom_flat_rate:A})):(_(""),n({tariff_id:x?.id||null,custom_flat_rate:null}))},L=O=>{b(O),n({tariff_id:O.id,custom_flat_rate:null})},M=O=>{const I=O.target.value;_(I),n({tariff_id:null,custom_flat_rate:I})},T=O=>{const{name:I,value:$}=O.target;C(H=>{const V={...H,[I]:$};return I==="power_user_type"&&$!=="LPU"&&(V.supply_voltage="all",V.transmission_zone="all"),I==="power_user_type"&&(V.tariff_category="all",V.structure="all"),V})};return a.jsxs(me,{children:[a.jsx(me.Header,{as:"h5",children:"Tariff Configuration"}),a.jsxs(me.Body,{children:[a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Check,{type:"radio",name:"tariffMode",label:"Select from Tariff Catalogue",value:"catalogue",checked:f==="catalogue",onChange:O=>N(O.target.value)}),a.jsx(z.Check,{type:"radio",name:"tariffMode",label:"Enter Custom Flat Rate (c/kWh)",value:"custom",checked:f==="custom",onChange:O=>N(O.target.value)})]}),a.jsx("hr",{}),f==="catalogue"?a.jsxs(a.Fragment,{children:[a.jsx("h5",{children:"Tariff Catalogue"}),a.jsxs(nt,{className:"mb-3 g-2",children:[a.jsx(ge,{md:4,children:a.jsxs(z.Select,{size:"sm",name:"power_user_type",value:j.power_user_type,onChange:T,children:[a.jsx("option",{value:"all",children:"All Power User Types"}),k.powerUserTypes.map(O=>a.jsx("option",{value:O,children:O},O))]})}),a.jsx(ge,{md:4,children:a.jsxs(z.Select,{size:"sm",name:"tariff_category",value:j.tariff_category,onChange:T,children:[a.jsx("option",{value:"all",children:"All Categories"}),k.categories.map(O=>a.jsx("option",{value:O,children:O},O))]})}),a.jsx(ge,{md:4,children:a.jsxs(z.Select,{size:"sm",name:"structure",value:j.structure,onChange:T,children:[a.jsx("option",{value:"all",children:"All Structures"}),k.structures.map(O=>a.jsx("option",{value:O,children:O},O))]})}),j.power_user_type==="LPU"&&a.jsxs(a.Fragment,{children:[a.jsx(ge,{md:6,className:"mt-2",children:a.jsxs(z.Select,{size:"sm",name:"supply_voltage",value:j.supply_voltage,onChange:T,children:[a.jsx("option",{value:"all",children:"All Supply Voltages"}),k.voltages.map(O=>a.jsx("option",{value:O,children:O},O))]})}),a.jsx(ge,{md:6,className:"mt-2",children:a.jsxs(z.Select,{size:"sm",name:"transmission_zone",value:j.transmission_zone,onChange:T,children:[a.jsx("option",{value:"all",children:"All Transmission Zones"}),k.zones.map(O=>a.jsx("option",{value:O,children:O},O))]})})]})]}),a.jsxs(hn,{className:"mb-3",children:[a.jsx(hn.Text,{children:a.jsx(Hj,{})}),a.jsx(z.Control,{placeholder:"Search tariffs...",value:h,onChange:O=>g(O.target.value)})]}),i&&a.jsx(Ot,{animation:"border",size:"sm"}),c&&a.jsx(kt,{variant:"danger",children:c}),a.jsx(Ll,{style:{maxHeight:"200px",overflowY:"auto"},children:E.map(O=>a.jsxs(Ll.Item,{action:!0,active:x?.id===O.id,onClick:()=>L(O),type:"button",children:[O.name," ",a.jsx(tt,{pill:!0,bg:"secondary",children:O.power_user_type})]},O.id))}),x&&a.jsxs("div",{className:"mt-3 p-3 border rounded bg-light",children:[a.jsxs("h6",{children:["Tariff Summary: ",a.jsx("span",{className:"text-primary",children:x.name})]}),a.jsx(vn,{bordered:!0,size:"sm",className:"mb-0",children:a.jsxs("tbody",{children:[x.rates.slice(0,3).map(O=>a.jsxs("tr",{children:[a.jsx("td",{children:O.charge_name}),a.jsxs("td",{children:[a.jsx("strong",{children:O.rate_value})," ",O.rate_unit]})]},O.id)),x.rates.length>3&&a.jsx("tr",{children:a.jsxs("td",{colSpan:"2",className:"text-center text-muted",children:["...and ",x.rates.length-3," more rates."]})})]})})]})]}):a.jsxs(a.Fragment,{children:[a.jsx("h5",{children:"Custom Flat Rate"}),a.jsxs(hn,{children:[a.jsx(z.Control,{type:"number",placeholder:"e.g., 250.5",value:A,onChange:M}),a.jsx(hn.Text,{children:"c/kWh"})]})]})]})]})}function Z5({tariff:t,customRate:e}){return a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"fw-semibold form-label",children:"Current Tariff"}),a.jsx(me,{bg:"light",text:"dark",className:"p-3 border",children:t?a.jsxs("div",{children:[a.jsxs("h5",{className:"mb-1",children:[t.name," ",a.jsxs("span",{className:"text-muted",children:["(",t.matrix_code,")"]})]}),a.jsxs("div",{className:"mb-2",children:[a.jsx(tt,{pill:!0,bg:"primary",className:"me-1",children:t.power_user_type}),a.jsx(tt,{pill:!0,bg:"info",text:"dark",children:t.structure})]}),a.jsxs(vn,{striped:!0,bordered:!0,size:"sm",className:"mb-0",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Charge Name"}),a.jsx("th",{children:"Rate"})]})}),a.jsx("tbody",{children:t.rates.slice(0,3).map((n,s)=>a.jsxs("tr",{children:[a.jsx("td",{children:n.charge_name}),a.jsxs("td",{children:[a.jsx("strong",{children:n.rate_value})," ",n.rate_unit]})]},s))})]}),t.rates.length>3&&a.jsxs("small",{className:"text-muted d-block mt-1",children:["...and ",t.rates.length-3," more rates."]})]}):e?a.jsxs("div",{children:[a.jsx("h5",{className:"mb-1",children:"Custom Flat Rate"}),a.jsxs(tt,{pill:!0,bg:"success",children:[e," R/kWh"]})]}):a.jsx("p",{className:"mb-0 text-muted",children:"No tariff selected for this project."})})]})}function Tfe({projectId:t,savedData:e,onSubmit:n,currentTariffId:s,currentCustomRate:r,onTariffChange:i,tariffDetails:o}){const[c,u]=v.useState(""),[f,m]=v.useState("Residential"),[h,g]=v.useState(""),[x,b]=v.useState("");v.useEffect(()=>{e&&(u(e.consumption||""),m(e.consumerType||"Residential"),g(e.transformerSize||""))},[e]);const A=j=>{if(j.preventDefault(),!c||!f||!h){b("Please fill in all fields.");return}const C=parseFloat(c),k=parseFloat(h);if(isNaN(C)||isNaN(k)){b("Consumption, and transformer/max demand size must be valid numbers.");return}if(C<=0||k<=0){b("All numerical values must be positive.");return}b(""),n({consumption:C,consumerType:f,transformerSize:k})},_="shadow-sm border-gray-300 focus:border-indigo-500 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md";return a.jsxs("div",{className:"p-4 p-md-5 bg-white rounded-xl shadow-xl",style:{maxWidth:"800px",margin:"2rem auto"},children:[" ",a.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-4 text-center",children:"Client & Site Information"}),x&&a.jsxs(kt,{variant:"danger",className:"mb-4 shadow-sm d-flex align-items-center",children:[a.jsx("i",{className:"bi bi-exclamation-triangle-fill me-2 fs-5"})," ",x]}),a.jsxs(z,{onSubmit:A,children:[a.jsxs(nt,{className:"g-4",children:[" ",a.jsx(ge,{md:6,children:a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{className:"text-sm font-medium text-gray-700",children:"Monthly Consumption (kWh)"}),a.jsx(z.Control,{type:"number",value:c,onChange:j=>u(j.target.value),placeholder:"e.g., 1500",className:_,required:!0})]})}),a.jsx(ge,{md:6,children:a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{className:"text-sm font-medium text-gray-700",children:"Type of Consumer"}),a.jsxs(z.Select,{value:f,onChange:j=>m(j.target.value),className:_,required:!0,children:[a.jsx("option",{value:"",disabled:!0,children:"Select type..."})," ",a.jsx("option",{value:"Residential",children:"Residential"}),a.jsx("option",{value:"Commercial",children:"Commercial"})]})]})}),a.jsx(ge,{md:6,children:a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{className:"text-sm font-medium text-gray-700",children:"Transformer/Max Demand (kW)"}),a.jsx(z.Control,{type:"number",value:h,onChange:j=>g(j.target.value),placeholder:"e.g., 100",className:_,required:!0})]})})]}),a.jsx("hr",{className:"my-4"}),a.jsx(Z5,{tariff:o,customRate:r}),a.jsx(Ux,{currentTariffId:s,currentCustomRate:r,onChange:i}),a.jsxs("div",{className:"mt-4 pt-2 text-end",children:[" ",a.jsxs(Fe,{variant:"primary",type:"submit",className:"px-5 py-2 fw-semibold rounded-md shadow-sm hover:bg-blue-700",style:{backgroundColor:"#2563eb",borderColor:"#1d4ed8"},children:["Next ",a.jsx("i",{className:"bi bi-arrow-right ms-2"})," "]})]})]})]})}zs.register(Yo,qo,$i,fa,Uo,Wo,Ho,Oo);const Mfe=(t,e=1)=>{if(!t||t.length===0)return{labels:[],datasets:[]};const n=[...t].sort((u,f)=>new Date(u.Timestamp||u.timestamp)-new Date(f.Timestamp||f.timestamp));let s=0;const r=6;if(n.length>0){const u=new Date(n[0].Timestamp||n[0].timestamp).getFullYear(),f=n.findIndex(m=>{const h=new Date(m.Timestamp||m.timestamp);return h.getFullYear()===u&&h.getMonth()>=r});f!==-1&&(s=f)}let i=[];if(n.length>0&&s<n.length){const u=new Date(n[s].Timestamp||n[s].timestamp).getTime(),f=10080*60*1e3,m=u+f;for(let h=s;h<n.length;h++){const g=n[h];if(new Date(g.Timestamp||g.timestamp).getTime()<=m)i.push(g);else break}}if(i.length===0&&n.length>0){const u=n.slice(0,Math.min(n.length,336));if(u.length>0){const f=new Date(u[0].Timestamp||u[0].timestamp).getTime(),m=10080*60*1e3,h=f+m;i=u.filter(g=>new Date(g.Timestamp||g.timestamp).getTime()<=h)}}const o=i.map(u=>new Date(u.Timestamp||u.timestamp)),c=i.map(u=>(u.Demand_kW||u.demand_kw)*e);return{labels:o,datasets:[{label:"Scaled Demand (kW)",data:c,borderColor:"rgb(75, 192, 192)",backgroundColor:"rgba(75, 192, 192, 0.1)",tension:.2,pointRadius:0,borderWidth:1.5}]}},Rfe={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!1},tooltip:{enabled:!0,mode:"index",intersect:!1,backgroundColor:"rgba(0,0,0,0.7)",titleFont:{size:14,weight:"bold"},bodyFont:{size:12},padding:10,cornerRadius:4},datalabels:{display:!1}},scales:{x:{type:"time",time:{unit:"day",tooltipFormat:"MMM d, HH:mm",displayFormats:{day:"MMM d"}},ticks:{maxTicksLimit:7,autoSkip:!0,font:{size:10,family:"Inter, sans-serif"},color:"#6b7280"},grid:{display:!1}},y:{beginAtZero:!0,ticks:{maxTicksLimit:5,font:{size:10,family:"Inter, sans-serif"},color:"#6b7280",padding:5},grid:{color:"rgba(229, 231, 235, 0.8)",drawBorder:!1}}}};function Ofe({projectId:t,consumerType:e,basicInfo:n,savedData:s,onSelect:r,onBack:i}){const[o,c]=v.useState([]),[u,f]=v.useState(!0),[m,h]=v.useState(""),[g,x]=v.useState({});v.useEffect(()=>{(async()=>{f(!0),h("");try{const C=await Re.get(`${Ce}/api/load_profiles`);c(C.data)}catch(C){console.error("Error fetching profiles:",C),h(C.response?.data?.error||"Failed to load profiles. Please try again.")}finally{f(!1)}})()},[]),v.useEffect(()=>{if(o.length===0)return;const j={};o.forEach(C=>{s?.selectedProfileId===C.id?j[C.id]=s.profileScaler||1:j[C.id]=1}),x(j)},[o,s]);const b=async j=>{h("");try{const C=g[j.id]||1,k={...j,scaler:C};localStorage.setItem("selectedProfileForQuickDesign",JSON.stringify(k)),await Re.post(`${Ce}/api/projects/${t}/quick_design`,{selectedProfileId:j.id,profileScaler:C}),r(k)}catch(C){console.error("Error saving profile selection:",C),h(C.response?.data?.error||"Failed to save selection. Please try again.")}},A=(j,C)=>{const k=parseFloat(C);!isNaN(k)&&k>0?x(E=>({...E,[j]:k})):C===""&&x(E=>({...E,[j]:""}))},_=n?.consumption;return u?a.jsxs("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"300px"},children:[a.jsx(Ot,{animation:"border",role:"status",variant:"primary",children:a.jsx("span",{className:"visually-hidden",children:"Loading profiles..."})}),a.jsx("p",{className:"ms-3 mb-0 fs-5 text-secondary",children:"Loading Profiles..."})]}):m&&!o.length?a.jsxs("div",{className:"p-4 p-md-5 bg-light rounded-3 text-center",children:[a.jsx(kt,{variant:"danger",className:"shadow-sm",children:m}),a.jsxs(Fe,{variant:"outline-secondary",onClick:i,className:"mt-4 px-4 py-2",children:[a.jsx("i",{className:"bi bi-arrow-left me-2"}),"Back"]})]}):!u&&o.length===0?a.jsxs("div",{className:"p-4 p-md-5 bg-light rounded-3 text-center",children:[a.jsx(kt,{variant:"info",className:"shadow-sm",children:"No load profiles found. Please ensure profiles are imported."}),a.jsxs(Fe,{variant:"outline-secondary",onClick:i,className:"mt-4 px-4 py-2",children:[a.jsx("i",{className:"bi bi-arrow-left me-2"}),"Back"]})]}):a.jsxs("div",{className:"container-fluid py-4 px-md-4",style:{backgroundColor:"#f8f9fa"},children:[a.jsxs("div",{className:"mb-4 p-3 bg-white rounded-3 shadow-sm",children:[a.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-2",children:"Select & Scale Load Profile"}),e&&a.jsxs("p",{className:"text-sm text-gray-500 mb-0",children:["For consumer type: ",e]})]}),_&&a.jsxs(kt,{variant:"primary",className:"mb-4 shadow-sm d-flex align-items-center",style:{backgroundColor:"#e0f2fe",borderColor:"#7dd3fc"},children:[a.jsx("i",{className:"bi bi-info-circle-fill me-3 fs-4 text-primary"})," ",a.jsxs("div",{children:[a.jsx("strong",{className:"d-block",children:"Client's Target Monthly Consumption:"}),a.jsxs("span",{className:"fs-5 fw-bold",children:[_.toFixed(0)," kWh"]})]})]}),m&&a.jsx(kt,{variant:"danger",className:"mb-3 shadow-sm",children:m}),a.jsxs(nt,{xs:1,md:2,lg:3,className:"g-4 justify-content-center",children:[" ",o.map(j=>{const C=j.annual_kwh?j.annual_kwh/12:0,k=g[j.id]===""?1:g[j.id]||1,E=C*k,N=j.id===s?.selectedProfileId;return a.jsx(ge,{children:a.jsx(me,{className:`h-100 shadow-lg rounded-xl transition-all duration-300 ease-in-out ${N?"selected-card":""}`,children:a.jsxs(me.Body,{className:"d-flex flex-column p-4",children:[a.jsx(me.Title,{className:"text-xl font-semibold text-gray-800 mb-1",children:j.name}),a.jsxs(me.Text,{className:"text-xs text-gray-500 mb-2",children:[j.description," (",j.profile_type,")"]}),a.jsx("div",{className:"mb-3 p-3 bg-light rounded-lg",style:{backgroundColor:"#f1f5f9"},children:a.jsxs(nt,{children:[a.jsxs(ge,{xs:6,children:[a.jsx("p",{className:"text-xs text-gray-600 mb-0",children:"Original Avg."}),a.jsxs("p",{className:"text-sm font-semibold text-gray-700",children:[C.toFixed(0)," kWh/month"]})]}),a.jsxs(ge,{xs:6,children:[a.jsx("p",{className:"text-xs text-blue-600 mb-0",children:"Scaled Avg."}),a.jsxs("p",{className:"text-sm font-bold text-blue-700",children:[E.toFixed(0)," kWh/month"]})]})]})}),a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{htmlFor:`scaler-${j.id}`,className:"text-xs font-medium text-gray-600 mb-1",children:"Scale Factor:"}),a.jsx(z.Control,{type:"number",id:`scaler-${j.id}`,value:g[j.id]||"",onChange:L=>A(j.id,L.target.value),step:"0.01",min:"0.01",size:"sm",className:"rounded-md shadow-sm border-gray-300 focus:border-indigo-500 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"})]}),a.jsxs("div",{className:"mb-3",style:{height:"160px"},children:[" ",j.profile_data&&j.profile_data.length>0?a.jsx(Rs,{data:Mfe(j.profile_data,k),options:Rfe}):a.jsx("div",{className:"d-flex align-items-center justify-content-center h-100 text-muted",children:a.jsx("small",{children:"No preview data"})})]}),a.jsx(Fe,{variant:"primary",onClick:()=>b(j),className:"w-100 mt-auto py-2 fw-semibold rounded-md shadow-sm hover:bg-blue-700",style:{backgroundColor:"#2563eb",borderColor:"#1d4ed8"},children:"Select This Profile"})]})})},j.id)})]}),a.jsx("div",{className:"mt-5 text-center",children:a.jsxs(Fe,{variant:"outline-secondary",onClick:i,className:"px-5 py-2 rounded-md",children:[a.jsx("i",{className:"bi bi-arrow-left me-2"}),"Back"]})})]})}function Pfe({projectId:t,savedData:e,onSelect:n,onBack:s}){const[r,i]=v.useState([]),[o,c]=v.useState(!0),[u,f]=v.useState("");return v.useEffect(()=>{Re.get(`${Ce}/api/system_templates`).then(m=>{i(m.data),c(!1)}).catch(m=>{console.error("Error fetching system templates:",m),f("Failed to load system configurations. Please try again later."),c(!1)})},[]),o?a.jsx("div",{className:"text-center p-5",children:a.jsx(Ot,{animation:"border"})}):u?a.jsx(kt,{variant:"danger",children:u}):a.jsxs("div",{className:"p-4 py-md-5 px-md-4 bg-white rounded-xl shadow-xl",style:{maxWidth:"900px",margin:"2rem auto"},children:[a.jsx("h2",{className:"text-2xl lg:text-3xl font-semibold text-gray-800 mb-5 text-center",children:"Select System Configuration"}),a.jsx(nt,{xs:1,md:2,lg:3,className:"g-4",children:r.map(m=>{const h=m.id===e?.selectedSystem?.id;return a.jsx(ge,{children:a.jsx(me,{className:`h-100 shadow-lg rounded-xl transition-all duration-300 ease-in-out hover:scale-105 ${h?"selected-card":""}`,children:a.jsxs(me.Body,{className:"d-flex flex-column p-4",children:[m.icon&&a.jsx("i",{className:`${m.icon} fs-2 text-primary mb-3`}),a.jsx(me.Title,{className:"text-xl font-semibold text-gray-800 mb-2",children:m.name}),a.jsx(me.Text,{className:"text-xs text-gray-600 mb-1 flex-grow-0",children:m.description}),a.jsxs("div",{className:"mt-2 mb-3 pt-2 border-top border-gray-200",children:[a.jsxs("p",{className:"text-sm text-gray-700 mb-1",children:[a.jsx("strong",{children:"Type:"})," ",m.system_type]}),a.jsxs("p",{className:"text-sm text-gray-700 mb-1",children:[a.jsx("strong",{children:"Capacity:"})," ",m.panel_kw," kWp"]}),m.battery_kwh>0&&a.jsxs("p",{className:"text-sm text-gray-700 mb-1",children:[a.jsx("strong",{children:"Battery:"})," ",m.battery_kwh," kWh"]}),a.jsxs("p",{className:"text-lg font-bold text-primary mt-2",children:["Est. Cost: R",m.total_cost.toLocaleString()]})]}),a.jsxs(Fe,{variant:"primary",onClick:()=>n(m),className:"w-100 mt-auto py-2 fw-semibold rounded-md shadow-sm hover:shadow-lg transition-shadow",style:{backgroundColor:"#2563eb",borderColor:"#1d4ed8"},children:["Select System ",a.jsx("i",{className:"bi bi-check-lg ms-2"})]})]})})},m.id)})}),a.jsx("div",{className:"mt-5 pt-3 text-center",children:a.jsxs(Fe,{variant:"outline-secondary",onClick:s,className:"px-5 py-2 rounded-md shadow-sm hover:shadow-md transition-shadow",children:[a.jsx("i",{className:"bi bi-arrow-left me-2"}),"Back"]})})]})}zs.register(Yo,qo,$i,fa,bx,Uo,Wo,Ho,Oo,Y5);const k_=t=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR",maximumFractionDigits:0}).format(t||0);function Lfe({projectId:t,basicInfo:e,selectedSystem:n,onBack:s,clientName:r}){const[i,o]=v.useState(null),[c,u]=v.useState(!0),[f,m]=v.useState(""),[h,g]=v.useState(null),[x,b]=v.useState(null),[A,_]=v.useState(!1),{schedule:j}=v.useContext(Hx);v.useEffect(()=>{(async()=>{const V=JSON.parse(localStorage.getItem("selectedProfileForQuickDesign"));console.log("Selected Profile:",V),console.log("Scaler value:",V?.scaler);const G=V.profile_data.reduce((U,R)=>U+(R.demand_kw||R.Demand_kW||0)*.5,0);if(console.log("Unscaled Annual kWh:",G),!e||!V||!n){m("Cannot run simulation because data from a previous step is missing."),u(!1);return}try{const U={projectId:t,basicInfo:e,selectedProfile:V,selectedSystem:n},R=await Re.post(`${Ce}/api/quick_simulate`,U);if(o(R.data),R.data?.simulation?.timestamps?.length>0){const P=R.data.simulation.timestamps,Z=new Date(P[0]),ne=new Date(P[P.length-1]),D=new Date(Z);D.setDate(Z.getDate()+7),g(Z),b(D>ne?ne:D)}}catch(U){m(U.response?.data?.error||"An API error occurred.")}finally{u(!1)}})()},[e,n]);const C=v.useMemo(()=>{if(!i?.financials?.lifetime_cashflow)return[];const H=i.financials.lifetime_cashflow,V=Math.abs(H[0].cashflow),G=i.financials.annual_savings,U=.005;let R=-V;const P=[{year:H[0].year,cashflow:-V,cumulative:R}];for(let Z=1;Z<H.length;Z++){const ne=j[Z-1]??j[j.length-1]??.09,B=G*Math.pow(1+ne,Z-1)*Math.pow(1-U,Z-1);R+=B,P.push({year:H[Z].year,cashflow:B,cumulative:R})}return P},[i,j]),k=v.useMemo(()=>{if(!i?.simulation||!h||!x)return{labels:[],datasets:[]};const H=i.simulation,V=H.timestamps.findIndex(P=>new Date(P)>=h);let G=H.timestamps.findIndex(P=>new Date(P)>x);if(G===-1&&(G=H.timestamps.length),V===-1)return{labels:[],datasets:[]};const U=H.timestamps.slice(V,G).map(P=>new Date(P)),R=[{label:"Demand (kW)",data:H.demand.slice(V,G),borderColor:"#ff6384",backgroundColor:"#ff638420",tension:.3,pointRadius:0,borderWidth:2},{label:"Grid Import (kW)",data:H.import_from_grid.slice(V,G),borderColor:"#cc65fe",backgroundColor:"#cc65fe20",tension:.3,pointRadius:0,borderWidth:1.5,borderDash:[5,5]},{label:"Battery SOC (%)",data:H.battery_soc.slice(V,G),borderColor:"#ffce56",backgroundColor:"#ffce5620",yAxisID:"y1",tension:.3,pointRadius:0,borderWidth:2}];return A?R.push({label:"PV Generation (kW)",data:H.generation.slice(V,G),borderColor:"#4bc0c0",backgroundColor:"#4bc0c020",tension:.3,pointRadius:0,borderWidth:2,fill:!0},{label:"Throttling Losses",data:H.potential_generation.slice(V,G),borderColor:"transparent",backgroundColor:"rgba(108, 117, 125, 0.3)",pointRadius:0,fill:3}):R.push({label:"PV Generation (kW)",data:H.generation.slice(V,G),borderColor:"#4bc0c0",backgroundColor:"#4bc0c020",tension:.3,pointRadius:0,borderWidth:2}),{labels:U,datasets:R}},[i,h,x,A]),E=v.useMemo(()=>{if(!i?.financials?.cost_comparison)return{labels:[],datasets:[]};const H=i.financials;return{labels:H.cost_comparison.map(G=>new Date(G.month).toLocaleString("default",{month:"short",year:"2-digit"})),datasets:[{label:"Old Bill",data:H.cost_comparison.map(G=>G.old_cost),backgroundColor:"#ff6384"},{label:"New Bill (with Solar)",data:H.cost_comparison.map(G=>G.new_cost),backgroundColor:"#36a2eb"}]}},[i]),N=v.useMemo(()=>{if(!i?.financials?.cost_comparison)return{labels:[],datasets:[]};const H=i.financials,V=H.cost_comparison.map(U=>new Date(U.month).toLocaleString("default",{month:"short",year:"2-digit"})),G=[{label:"Old Bill - Energy",data:H.cost_comparison.map(U=>U.old_bill_breakdown.energy),backgroundColor:"#f87171",stack:"Stack 0"},{label:"Old Bill - Fixed",data:H.cost_comparison.map(U=>U.old_bill_breakdown.fixed),backgroundColor:"#9ca3af",stack:"Stack 0"},{label:"Old Bill - Demand",data:H.cost_comparison.map(U=>U.old_bill_breakdown.demand),backgroundColor:"#b91c1c",stack:"Stack 0"},{label:"New Bill - Energy",data:H.cost_comparison.map(U=>U.new_bill_breakdown.energy),backgroundColor:"#60a5fa",stack:"Stack 1"},{label:"New Bill - Fixed",data:H.cost_comparison.map(U=>U.new_bill_breakdown.fixed),backgroundColor:"#6b7280",stack:"Stack 1"},{label:"New Bill - Demand",data:H.cost_comparison.map(U=>U.new_bill_breakdown.demand),backgroundColor:"#1d4ed8",stack:"Stack 1"}];return{labels:V,datasets:G.filter(U=>U.data.some(R=>R!==0&&R!==null))}},[i]),L=v.useMemo(()=>C.length?{labels:C.map(H=>`Year ${H.year}`),datasets:[{label:"Cumulative Cashflow (R)",data:C.map(H=>H.cumulative),borderColor:"#27ae60",backgroundColor:"rgba(39, 174, 96, 0.1)",fill:!0,tension:.3}]}:{labels:[],datasets:[]},[C]),M=v.useMemo(()=>{if(!C.length)return null;const H=C.findIndex(R=>R.cumulative>=0);if(H===-1)return null;if(H===0)return 0;const V=C[H-1].cumulative,G=C[H].cumulative;if(G===V)return H;const U=-V/(G-V);return H-1+U},[C]),T=M!==null?`Year ${M.toFixed(1)}`:null,O=v.useMemo(()=>{if(!i?.financials?.tariff_sample)return[];const H=i.financials.tariff_sample.reduce((G,U)=>G+U.rate,0)/i.financials.tariff_sample.length;let V=1;return Array.from({length:20},(G,U)=>{const R=j[U]??j[j.length-1]??0;return V*=1+R,{year:U+1,tariff:H*V}})},[i,j]),I={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},scales:{x:{type:"time",time:{unit:"day",tooltipFormat:"MMM dd, HH:mm"},adapters:{date:{locale:zS}}},y:{beginAtZero:!0,title:{display:!0,text:"Power (kW)"}},y1:{type:"linear",display:!0,position:"right",beginAtZero:!0,max:100,title:{display:!0,text:"Battery SOC (%)"},grid:{drawOnChartArea:!1}}},plugins:{datalabels:{display:!1}}};if(c)return a.jsxs("div",{className:"text-center p-5",children:[a.jsx(Ot,{animation:"border",variant:"primary"}),a.jsx("p",{className:"mt-2",children:"Running simulations..."})]});if(f)return a.jsxs("div",{className:"p-4",children:[a.jsxs(kt,{variant:"danger",children:[a.jsx("strong",{children:"Error:"})," ",f]}),a.jsx(Fe,{onClick:s,children:"Back"})]});if(!i)return a.jsxs("div",{className:"p-4",children:[a.jsx(kt,{variant:"warning",children:"No data returned from simulation."}),a.jsx(Fe,{onClick:s,children:"Back"})]});const{financials:$}=i;return a.jsxs("div",{className:"p-lg-4",style:{backgroundColor:"#f8f9fa"},children:[a.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-4 text-center",children:"Quick Design Report"}),a.jsxs(nt,{children:[" ",a.jsx(ge,{md:3,className:"mb-3",children:a.jsx(me,{className:"text-center shadow-sm h-100",children:a.jsxs(me.Body,{children:[a.jsx("div",{className:"fs-1 text-success",children:a.jsx("i",{className:"bi bi-wallet2"})}),a.jsx("h5",{children:"Annual Savings"}),a.jsx("h3",{className:"fw-bold",children:k_($.annual_savings)})]})})}),a.jsx(ge,{md:3,className:"mb-3",children:a.jsx(me,{className:"text-center shadow-sm h-100",children:a.jsxs(me.Body,{children:[a.jsx("div",{className:"fs-1 text-primary",children:a.jsx("i",{className:"bi bi-lightning-charge-fill"})}),a.jsx("h5",{children:"LCOE"}),a.jsxs("h3",{className:"fw-bold",children:["R ",(()=>{const H=Math.abs((i.financials.lifetime_cashflow||[])[0]?.cashflow||0),V=i.financials?.total_generation_kwh||0,G=.005,R=H*(1+.01*20),P=Array.from({length:20},(Z,ne)=>Math.pow(1-G,ne)).reduce((Z,ne)=>Z+ne,0)*V;return P>0?(R/P).toFixed(2):"0.00"})(),"/kWh"]})]})})}),a.jsx(ge,{md:3,className:"mb-3",children:a.jsx(me,{className:"text-center shadow-sm h-100",children:a.jsxs(me.Body,{children:[a.jsx("div",{className:"fs-1 text-info",children:a.jsx("i",{className:"bi bi-calendar-check"})}),a.jsx("h5",{children:"Payback Period"}),a.jsxs("h3",{className:"fw-bold",children:[M!==null?M.toFixed(1):$.payback_period," Years"]})]})})}),a.jsx(ge,{md:3,className:"mb-3",children:a.jsx(me,{className:"text-center shadow-sm h-100",children:a.jsxs(me.Body,{children:[a.jsx("div",{className:"fs-1 text-warning",children:a.jsx("i",{className:"bi bi-graph-up-arrow"})}),a.jsx("h5",{children:"20-Year ROI"}),a.jsxs("h3",{className:"fw-bold",children:[$.roi,"%"]})]})})})]}),a.jsxs(me,{className:"shadow-sm my-4",children:[a.jsxs(me.Header,{as:"h5",className:"d-flex justify-content-between align-items-center flex-wrap",children:[a.jsxs("span",{children:[a.jsx("i",{className:"bi bi-bar-chart-line-fill me-2"}),"Weekly Energy Flow (Sample)"]}),a.jsx("div",{className:"d-flex align-items-center",children:a.jsxs(Fe,{variant:A?"primary":"outline-secondary",size:"sm",className:"me-3",onClick:()=>_(!A),children:[a.jsx("i",{className:`bi ${A?"bi-eye-slash-fill":"bi-eye-fill"} me-2`}),A?"Hide Losses":"Show Losses"]})}),a.jsx("div",{className:"date-picker-container",children:a.jsx(Xl,{selected:h,onChange:H=>{const[V,G]=H;g(V),b(G)},startDate:h,endDate:x,selectsRange:!0,isClearable:!1,dateFormat:"dd/MM/yyyy",className:"form-control form-control-sm shadow-sm",popperPlacement:"bottem-end",minDate:i?.simulation?.timestamps&&new Date(i.simulation.timestamps[0]),maxDate:i?.simulation?.timestamps&&new Date(i.simulation.timestamps[i.simulation.timestamps.length-1])})})]}),a.jsx(me.Body,{style:{height:"400px"},children:a.jsx(Rs,{options:I,data:k})})]}),a.jsxs(nt,{children:[a.jsx(ge,{lg:6,className:"mb-4",children:a.jsxs(me,{className:"shadow-sm h-100",children:[a.jsxs(me.Header,{as:"h5",children:[a.jsx("i",{className:"bi bi-piggy-bank-fill me-2"}),"Annual Performance"]}),a.jsx(vn,{striped:!0,hover:!0,responsive:!0,className:"mb-0",children:a.jsxs("tbody",{children:[a.jsxs("tr",{children:[a.jsx("td",{children:"Total Consumption"}),a.jsxs("td",{className:"text-end fw-bold",children:[$.total_demand_kwh.toLocaleString()," kWh"]})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Total Solar Production"}),a.jsxs("td",{className:"text-end fw-bold",children:[$.total_generation_kwh.toLocaleString()," kWh"]})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Potential Generation"}),a.jsxs("td",{className:"text-end fw-bold",children:[$.potential_generation_kwh.toLocaleString()," kWh"]})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Energy Imported from Grid"}),a.jsxs("td",{className:"text-end fw-bold text-danger",children:[$.total_import_kwh.toLocaleString()," kWh"]})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Self-Consumption Rate"}),a.jsx("td",{className:"text-end fw-bold",children:a.jsxs(tt,{bg:"primary",className:"fs-6",children:[$.self_consumption_rate,"%"]})})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Grid Independence"}),a.jsx("td",{className:"text-end fw-bold",children:a.jsxs(tt,{bg:"primary",className:"fs-6",children:[$.grid_independence_rate,"%"]})})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Throttling Losses"}),a.jsx("td",{className:"text-end fw-bold",children:a.jsxs(tt,{bg:"warning",text:"dark",className:"fs-6",children:[$.throttling_loss_percent,"%"]})})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Yield (incl. throttling losses)"}),a.jsx("td",{className:"text-end fw-bold",children:a.jsxs(tt,{bg:"secondary",className:"fs-6",children:[$.yield_incl_losses," kWh/kWp/day"]})})]}),a.jsxs("tr",{children:[a.jsx("td",{children:"Yield (excl. throttling losses)"}),a.jsx("td",{className:"text-end fw-bold",children:a.jsxs(tt,{bg:"secondary",className:"fs-6",children:[$.yield_excl_losses," kWh/kWp/day"]})})]})]})})]})}),a.jsx(ge,{lg:6,className:"mb-4",children:a.jsxs(me,{className:"shadow-sm h-100",children:[a.jsxs(me.Header,{as:"h5",children:[a.jsx("i",{className:"bi bi-calendar-month-fill me-2"}),"Monthly Bill Comparison"]}),a.jsx(me.Body,{style:{height:"350px"},children:a.jsx(ia,{options:{responsive:!0,maintainAspectRatio:!1,plugins:{datalabels:{display:!1}},scales:{x:{stacked:!1},y:{stacked:!1,title:{display:!0,text:"Cost (R)"}}}},data:E})})]})})]}),a.jsx("hr",{className:"my-5"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-700 mb-4 text-center",children:"Tariff & Cost Analysis"}),a.jsxs(nt,{children:[a.jsx(ge,{lg:4,className:"mb-4",children:a.jsxs(me,{className:"shadow-sm h-100",children:[a.jsxs(me.Header,{as:"h5",children:[a.jsx("i",{className:"bi bi-clock-history me-2"}),"Tariff Rate Sample (First Week)"]}),a.jsx(me.Body,{style:{height:"450px",overflowY:"auto"},children:a.jsxs(vn,{striped:!0,hover:!0,size:"sm",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Timestamp"}),a.jsx("th",{className:"text-end",children:"Rate (R/kWh)"})]})}),a.jsx("tbody",{children:$.tariff_sample?.map((H,V)=>a.jsxs("tr",{children:[a.jsx("td",{children:new Date(H.timestamp).toLocaleString("en-ZA",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}),a.jsx("td",{className:"text-end fw-bold",children:H.rate.toFixed(2)})]},V))})]})})]})}),a.jsx(ge,{lg:8,className:"mb-4",children:a.jsxs(me,{className:"shadow-sm h-100",children:[a.jsxs(me.Header,{as:"h5",children:[a.jsx("i",{className:"bi bi-pie-chart-fill me-2"}),"Monthly Bill Composition (New Bill)"]}),a.jsx(me.Body,{style:{height:"450px"},children:a.jsx(ia,{options:{responsive:!0,maintainAspectRatio:!1,plugins:{datalabels:{display:!1}},scales:{x:{stacked:!0},y:{stacked:!0,title:{display:!0,text:"Cost (R)"}}}},data:N})})]})})]}),a.jsx("hr",{className:"my-5"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-700 mb-4 text-center",children:"Advanced Financial Analysis"}),a.jsxs(nt,{children:[a.jsx(ge,{lg:5,className:"mb-4",children:a.jsxs(me,{className:"shadow-sm h-100",children:[a.jsxs(me.Header,{as:"h5",children:[a.jsx("i",{className:"bi bi-calendar-range-fill me-2"}),"Bill Fluctuation Analysis"]}),a.jsxs(me.Body,{className:"d-flex flex-column justify-content-center",children:[a.jsx("p",{className:"text-muted",children:"An estimate of the highest and lowest monthly bills you can expect after installing solar."}),a.jsxs(vn,{borderless:!0,className:"text-center mt-3",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:a.jsx(tt,{bg:"danger",className:"fs-6 px-3 py-2",children:"Highest Bill"})}),a.jsx("th",{children:a.jsx(tt,{bg:"success",className:"fs-6 px-3 py-2",children:"Lowest Bill"})})]})}),a.jsx("tbody",{children:a.jsxs("tr",{className:"align-middle",children:[a.jsxs("td",{className:"py-3",children:[a.jsx("h4",{className:"fw-bold mb-0",children:k_($.bill_fluctuation.worst.cost)}),a.jsxs("span",{className:"text-muted small",children:["(",new Date($.bill_fluctuation.worst.month).toLocaleString("default",{month:"long"}),")"]})]}),a.jsxs("td",{className:"py-3",children:[a.jsx("h4",{className:"fw-bold mb-0",children:k_($.bill_fluctuation.best.cost)}),a.jsxs("span",{className:"text-muted small",children:["(",new Date($.bill_fluctuation.best.month).toLocaleString("default",{month:"long"}),")"]})]})]})})]})]})]})}),a.jsx(ge,{lg:7,className:"mb-4",children:a.jsxs(me,{className:"shadow-sm h-100",children:[a.jsxs(me.Header,{as:"h5",children:[a.jsx("i",{className:"bi bi-cash-stack me-2"}),"Lifetime Financial Performance (20 Years)"]}),a.jsx(me.Body,{style:{height:"350px"},children:a.jsx(Rs,{options:{responsive:!0,maintainAspectRatio:!1,plugins:{annotation:M!==null?{annotations:{paybackLine:{type:"line",xMin:M,xMax:M,borderColor:"red",borderWidth:2,label:{content:T||"Payback",enabled:!0,position:"start",backgroundColor:"red",color:"white"}}}}:{},datalabels:{display:!1}},scales:{y:{title:{display:!0,text:"Cumulative Savings (R)"}}}},data:L})})]})})]}),a.jsxs("div",{className:"text-center mt-5",children:[a.jsx(Fe,{variant:"outline-secondary",onClick:s,className:"me-3",children:"Back to System Selection"}),a.jsxs(as,{to:`/proposal/${t}`,target:"_blank",className:"btn btn-primary btn-lg",children:[a.jsx("i",{className:"bi bi-file-earmark-arrow-down-fill me-2"}),"Generate Client Proposal"]}),a.jsxs(vn,{striped:!0,bordered:!0,size:"sm",className:"mt-4 mx-auto",style:{maxWidth:"400px"},children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Year"}),a.jsx("th",{children:"Avg Tariff (R/kWh)"})]})}),a.jsx("tbody",{children:O.map(H=>a.jsxs("tr",{children:[a.jsx("td",{children:H.year}),a.jsx("td",{className:"text-end",children:H.tariff.toFixed(2)})]},H.year))})]})]})]})}var pm={};(function t(e,n,s,r){var i=!!(e.Worker&&e.Blob&&e.Promise&&e.OffscreenCanvas&&e.OffscreenCanvasRenderingContext2D&&e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype.transferControlToOffscreen&&e.URL&&e.URL.createObjectURL),o=typeof Path2D=="function"&&typeof DOMMatrix=="function",c=(function(){if(!e.OffscreenCanvas)return!1;var D=new OffscreenCanvas(1,1),B=D.getContext("2d");B.fillRect(0,0,1,1);var se=D.transferToImageBitmap();try{B.createPattern(se,"no-repeat")}catch{return!1}return!0})();function u(){}function f(D){var B=n.exports.Promise,se=B!==void 0?B:e.Promise;return typeof se=="function"?new se(D):(D(u,u),null)}var m=(function(D,B){return{transform:function(se){if(D)return se;if(B.has(se))return B.get(se);var le=new OffscreenCanvas(se.width,se.height),ae=le.getContext("2d");return ae.drawImage(se,0,0),B.set(se,le),le},clear:function(){B.clear()}}})(c,new Map),h=(function(){var D=Math.floor(16.666666666666668),B,se,le={},ae=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(B=function(te){var X=Math.random();return le[X]=requestAnimationFrame(function de(Ne){ae===Ne||ae+D-1<Ne?(ae=Ne,delete le[X],te()):le[X]=requestAnimationFrame(de)}),X},se=function(te){le[te]&&cancelAnimationFrame(le[te])}):(B=function(te){return setTimeout(te,D)},se=function(te){return clearTimeout(te)}),{frame:B,cancel:se}})(),g=(function(){var D,B,se={};function le(ae){function te(X,de){ae.postMessage({options:X||{},callback:de})}ae.init=function(de){var Ne=de.transferControlToOffscreen();ae.postMessage({canvas:Ne},[Ne])},ae.fire=function(de,Ne,Ke){if(B)return te(de,null),B;var ce=Math.random().toString(36).slice(2);return B=f(function(xe){function Te(Ie){Ie.data.callback===ce&&(delete se[ce],ae.removeEventListener("message",Te),B=null,m.clear(),Ke(),xe())}ae.addEventListener("message",Te),te(de,ce),se[ce]=Te.bind(null,{data:{callback:ce}})}),B},ae.reset=function(){ae.postMessage({reset:!0});for(var de in se)se[de](),delete se[de]}}return function(){if(D)return D;if(!s&&i){var ae=["var CONFETTI, SIZE = {}, module = {};","("+t.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{D=new Worker(URL.createObjectURL(new Blob([ae])))}catch(te){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("🎊 Could not load worker",te),null}le(D)}return D}})(),x={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function b(D,B){return B?B(D):D}function A(D){return D!=null}function _(D,B,se){return b(D&&A(D[B])?D[B]:x[B],se)}function j(D){return D<0?0:Math.floor(D)}function C(D,B){return Math.floor(Math.random()*(B-D))+D}function k(D){return parseInt(D,16)}function E(D){return D.map(N)}function N(D){var B=String(D).replace(/[^0-9a-f]/gi,"");return B.length<6&&(B=B[0]+B[0]+B[1]+B[1]+B[2]+B[2]),{r:k(B.substring(0,2)),g:k(B.substring(2,4)),b:k(B.substring(4,6))}}function L(D){var B=_(D,"origin",Object);return B.x=_(B,"x",Number),B.y=_(B,"y",Number),B}function M(D){D.width=document.documentElement.clientWidth,D.height=document.documentElement.clientHeight}function T(D){var B=D.getBoundingClientRect();D.width=B.width,D.height=B.height}function O(D){var B=document.createElement("canvas");return B.style.position="fixed",B.style.top="0px",B.style.left="0px",B.style.pointerEvents="none",B.style.zIndex=D,B}function I(D,B,se,le,ae,te,X,de,Ne){D.save(),D.translate(B,se),D.rotate(te),D.scale(le,ae),D.arc(0,0,1,X,de,Ne),D.restore()}function $(D){var B=D.angle*(Math.PI/180),se=D.spread*(Math.PI/180);return{x:D.x,y:D.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:D.startVelocity*.5+Math.random()*D.startVelocity,angle2D:-B+(.5*se-Math.random()*se),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:D.color,shape:D.shape,tick:0,totalTicks:D.ticks,decay:D.decay,drift:D.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:D.gravity*3,ovalScalar:.6,scalar:D.scalar,flat:D.flat}}function H(D,B){B.x+=Math.cos(B.angle2D)*B.velocity+B.drift,B.y+=Math.sin(B.angle2D)*B.velocity+B.gravity,B.velocity*=B.decay,B.flat?(B.wobble=0,B.wobbleX=B.x+10*B.scalar,B.wobbleY=B.y+10*B.scalar,B.tiltSin=0,B.tiltCos=0,B.random=1):(B.wobble+=B.wobbleSpeed,B.wobbleX=B.x+10*B.scalar*Math.cos(B.wobble),B.wobbleY=B.y+10*B.scalar*Math.sin(B.wobble),B.tiltAngle+=.1,B.tiltSin=Math.sin(B.tiltAngle),B.tiltCos=Math.cos(B.tiltAngle),B.random=Math.random()+2);var se=B.tick++/B.totalTicks,le=B.x+B.random*B.tiltCos,ae=B.y+B.random*B.tiltSin,te=B.wobbleX+B.random*B.tiltCos,X=B.wobbleY+B.random*B.tiltSin;if(D.fillStyle="rgba("+B.color.r+", "+B.color.g+", "+B.color.b+", "+(1-se)+")",D.beginPath(),o&&B.shape.type==="path"&&typeof B.shape.path=="string"&&Array.isArray(B.shape.matrix))D.fill(P(B.shape.path,B.shape.matrix,B.x,B.y,Math.abs(te-le)*.1,Math.abs(X-ae)*.1,Math.PI/10*B.wobble));else if(B.shape.type==="bitmap"){var de=Math.PI/10*B.wobble,Ne=Math.abs(te-le)*.1,Ke=Math.abs(X-ae)*.1,ce=B.shape.bitmap.width*B.scalar,xe=B.shape.bitmap.height*B.scalar,Te=new DOMMatrix([Math.cos(de)*Ne,Math.sin(de)*Ne,-Math.sin(de)*Ke,Math.cos(de)*Ke,B.x,B.y]);Te.multiplySelf(new DOMMatrix(B.shape.matrix));var Ie=D.createPattern(m.transform(B.shape.bitmap),"no-repeat");Ie.setTransform(Te),D.globalAlpha=1-se,D.fillStyle=Ie,D.fillRect(B.x-ce/2,B.y-xe/2,ce,xe),D.globalAlpha=1}else if(B.shape==="circle")D.ellipse?D.ellipse(B.x,B.y,Math.abs(te-le)*B.ovalScalar,Math.abs(X-ae)*B.ovalScalar,Math.PI/10*B.wobble,0,2*Math.PI):I(D,B.x,B.y,Math.abs(te-le)*B.ovalScalar,Math.abs(X-ae)*B.ovalScalar,Math.PI/10*B.wobble,0,2*Math.PI);else if(B.shape==="star")for(var Ue=Math.PI/2*3,Ze=4*B.scalar,mt=8*B.scalar,gt=B.x,dt=B.y,Pe=5,q=Math.PI/Pe;Pe--;)gt=B.x+Math.cos(Ue)*mt,dt=B.y+Math.sin(Ue)*mt,D.lineTo(gt,dt),Ue+=q,gt=B.x+Math.cos(Ue)*Ze,dt=B.y+Math.sin(Ue)*Ze,D.lineTo(gt,dt),Ue+=q;else D.moveTo(Math.floor(B.x),Math.floor(B.y)),D.lineTo(Math.floor(B.wobbleX),Math.floor(ae)),D.lineTo(Math.floor(te),Math.floor(X)),D.lineTo(Math.floor(le),Math.floor(B.wobbleY));return D.closePath(),D.fill(),B.tick<B.totalTicks}function V(D,B,se,le,ae){var te=B.slice(),X=D.getContext("2d"),de,Ne,Ke=f(function(ce){function xe(){de=Ne=null,X.clearRect(0,0,le.width,le.height),m.clear(),ae(),ce()}function Te(){s&&!(le.width===r.width&&le.height===r.height)&&(le.width=D.width=r.width,le.height=D.height=r.height),!le.width&&!le.height&&(se(D),le.width=D.width,le.height=D.height),X.clearRect(0,0,le.width,le.height),te=te.filter(function(Ie){return H(X,Ie)}),te.length?de=h.frame(Te):xe()}de=h.frame(Te),Ne=xe});return{addFettis:function(ce){return te=te.concat(ce),Ke},canvas:D,promise:Ke,reset:function(){de&&h.cancel(de),Ne&&Ne()}}}function G(D,B){var se=!D,le=!!_(B||{},"resize"),ae=!1,te=_(B,"disableForReducedMotion",Boolean),X=i&&!!_(B||{},"useWorker"),de=X?g():null,Ne=se?M:T,Ke=D&&de?!!D.__confetti_initialized:!1,ce=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,xe;function Te(Ue,Ze,mt){for(var gt=_(Ue,"particleCount",j),dt=_(Ue,"angle",Number),Pe=_(Ue,"spread",Number),q=_(Ue,"startVelocity",Number),oe=_(Ue,"decay",Number),Ae=_(Ue,"gravity",Number),He=_(Ue,"drift",Number),We=_(Ue,"colors",E),Ve=_(Ue,"ticks",Number),ee=_(Ue,"shapes"),De=_(Ue,"scalar"),be=!!_(Ue,"flat"),J=L(Ue),ie=gt,Be=[],$e=D.width*J.x,Y=D.height*J.y;ie--;)Be.push($({x:$e,y:Y,angle:dt,spread:Pe,startVelocity:q,color:We[ie%We.length],shape:ee[C(0,ee.length)],ticks:Ve,decay:oe,gravity:Ae,drift:He,scalar:De,flat:be}));return xe?xe.addFettis(Be):(xe=V(D,Be,Ne,Ze,mt),xe.promise)}function Ie(Ue){var Ze=te||_(Ue,"disableForReducedMotion",Boolean),mt=_(Ue,"zIndex",Number);if(Ze&&ce)return f(function(q){q()});se&&xe?D=xe.canvas:se&&!D&&(D=O(mt),document.body.appendChild(D)),le&&!Ke&&Ne(D);var gt={width:D.width,height:D.height};de&&!Ke&&de.init(D),Ke=!0,de&&(D.__confetti_initialized=!0);function dt(){if(de){var q={getBoundingClientRect:function(){if(!se)return D.getBoundingClientRect()}};Ne(q),de.postMessage({resize:{width:q.width,height:q.height}});return}gt.width=gt.height=null}function Pe(){xe=null,le&&(ae=!1,e.removeEventListener("resize",dt)),se&&D&&(document.body.contains(D)&&document.body.removeChild(D),D=null,Ke=!1)}return le&&!ae&&(ae=!0,e.addEventListener("resize",dt,!1)),de?de.fire(Ue,gt,Pe):Te(Ue,gt,Pe)}return Ie.reset=function(){de&&de.reset(),xe&&xe.reset()},Ie}var U;function R(){return U||(U=G(null,{useWorker:!0,resize:!0})),U}function P(D,B,se,le,ae,te,X){var de=new Path2D(D),Ne=new Path2D;Ne.addPath(de,new DOMMatrix(B));var Ke=new Path2D;return Ke.addPath(Ne,new DOMMatrix([Math.cos(X)*ae,Math.sin(X)*ae,-Math.sin(X)*te,Math.cos(X)*te,se,le])),Ke}function Z(D){if(!o)throw new Error("path confetti are not supported in this browser");var B,se;typeof D=="string"?B=D:(B=D.path,se=D.matrix);var le=new Path2D(B),ae=document.createElement("canvas"),te=ae.getContext("2d");if(!se){for(var X=1e3,de=X,Ne=X,Ke=0,ce=0,xe,Te,Ie=0;Ie<X;Ie+=2)for(var Ue=0;Ue<X;Ue+=2)te.isPointInPath(le,Ie,Ue,"nonzero")&&(de=Math.min(de,Ie),Ne=Math.min(Ne,Ue),Ke=Math.max(Ke,Ie),ce=Math.max(ce,Ue));xe=Ke-de,Te=ce-Ne;var Ze=10,mt=Math.min(Ze/xe,Ze/Te);se=[mt,0,0,mt,-Math.round(xe/2+de)*mt,-Math.round(Te/2+Ne)*mt]}return{type:"path",path:B,matrix:se}}function ne(D){var B,se=1,le="#000000",ae='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof D=="string"?B=D:(B=D.text,se="scalar"in D?D.scalar:se,ae="fontFamily"in D?D.fontFamily:ae,le="color"in D?D.color:le);var te=10*se,X=""+te+"px "+ae,de=new OffscreenCanvas(te,te),Ne=de.getContext("2d");Ne.font=X;var Ke=Ne.measureText(B),ce=Math.ceil(Ke.actualBoundingBoxRight+Ke.actualBoundingBoxLeft),xe=Math.ceil(Ke.actualBoundingBoxAscent+Ke.actualBoundingBoxDescent),Te=2,Ie=Ke.actualBoundingBoxLeft+Te,Ue=Ke.actualBoundingBoxAscent+Te;ce+=Te+Te,xe+=Te+Te,de=new OffscreenCanvas(ce,xe),Ne=de.getContext("2d"),Ne.font=X,Ne.fillStyle=le,Ne.fillText(B,Ie,Ue);var Ze=1/se;return{type:"bitmap",bitmap:de.transferToImageBitmap(),matrix:[Ze,0,0,Ze,-ce*Ze/2,-xe*Ze/2]}}n.exports=function(){return R().apply(this,arguments)},n.exports.reset=function(){R().reset()},n.exports.create=G,n.exports.shapeFromPath=Z,n.exports.shapeFromText=ne})((function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}})(),pm,!1);const gg=pm.exports;pm.exports.create;var D_={};/*!
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */var SR;function Ffe(){return SR||(SR=1,(function(t){(function(){var e=function(){this.init()};e.prototype={init:function(){var h=this||n;return h._counter=1e3,h._html5AudioPool=[],h.html5PoolSize=10,h._codecs={},h._howls=[],h._muted=!1,h._volume=1,h._canPlayEvent="canplaythrough",h._navigator=typeof window<"u"&&window.navigator?window.navigator:null,h.masterGain=null,h.noAudio=!1,h.usingWebAudio=!0,h.autoSuspend=!0,h.ctx=null,h.autoUnlock=!0,h._setup(),h},volume:function(h){var g=this||n;if(h=parseFloat(h),g.ctx||m(),typeof h<"u"&&h>=0&&h<=1){if(g._volume=h,g._muted)return g;g.usingWebAudio&&g.masterGain.gain.setValueAtTime(h,n.ctx.currentTime);for(var x=0;x<g._howls.length;x++)if(!g._howls[x]._webAudio)for(var b=g._howls[x]._getSoundIds(),A=0;A<b.length;A++){var _=g._howls[x]._soundById(b[A]);_&&_._node&&(_._node.volume=_._volume*h)}return g}return g._volume},mute:function(h){var g=this||n;g.ctx||m(),g._muted=h,g.usingWebAudio&&g.masterGain.gain.setValueAtTime(h?0:g._volume,n.ctx.currentTime);for(var x=0;x<g._howls.length;x++)if(!g._howls[x]._webAudio)for(var b=g._howls[x]._getSoundIds(),A=0;A<b.length;A++){var _=g._howls[x]._soundById(b[A]);_&&_._node&&(_._node.muted=h?!0:_._muted)}return g},stop:function(){for(var h=this||n,g=0;g<h._howls.length;g++)h._howls[g].stop();return h},unload:function(){for(var h=this||n,g=h._howls.length-1;g>=0;g--)h._howls[g].unload();return h.usingWebAudio&&h.ctx&&typeof h.ctx.close<"u"&&(h.ctx.close(),h.ctx=null,m()),h},codecs:function(h){return(this||n)._codecs[h.replace(/^x-/,"")]},_setup:function(){var h=this||n;if(h.state=h.ctx&&h.ctx.state||"suspended",h._autoSuspend(),!h.usingWebAudio)if(typeof Audio<"u")try{var g=new Audio;typeof g.oncanplaythrough>"u"&&(h._canPlayEvent="canplay")}catch{h.noAudio=!0}else h.noAudio=!0;try{var g=new Audio;g.muted&&(h.noAudio=!0)}catch{}return h.noAudio||h._setupCodecs(),h},_setupCodecs:function(){var h=this||n,g=null;try{g=typeof Audio<"u"?new Audio:null}catch{return h}if(!g||typeof g.canPlayType!="function")return h;var x=g.canPlayType("audio/mpeg;").replace(/^no$/,""),b=h._navigator?h._navigator.userAgent:"",A=b.match(/OPR\/(\d+)/g),_=A&&parseInt(A[0].split("/")[1],10)<33,j=b.indexOf("Safari")!==-1&&b.indexOf("Chrome")===-1,C=b.match(/Version\/(.*?) /),k=j&&C&&parseInt(C[1],10)<15;return h._codecs={mp3:!!(!_&&(x||g.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!x,opus:!!g.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!g.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!g.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(g.canPlayType('audio/wav; codecs="1"')||g.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!g.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!g.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(g.canPlayType("audio/x-m4a;")||g.canPlayType("audio/m4a;")||g.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(g.canPlayType("audio/x-m4b;")||g.canPlayType("audio/m4b;")||g.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(g.canPlayType("audio/x-mp4;")||g.canPlayType("audio/mp4;")||g.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!k&&g.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!k&&g.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!g.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(g.canPlayType("audio/x-flac;")||g.canPlayType("audio/flac;")).replace(/^no$/,"")},h},_unlockAudio:function(){var h=this||n;if(!(h._audioUnlocked||!h.ctx)){h._audioUnlocked=!1,h.autoUnlock=!1,!h._mobileUnloaded&&h.ctx.sampleRate!==44100&&(h._mobileUnloaded=!0,h.unload()),h._scratchBuffer=h.ctx.createBuffer(1,1,22050);var g=function(x){for(;h._html5AudioPool.length<h.html5PoolSize;)try{var b=new Audio;b._unlocked=!0,h._releaseHtml5Audio(b)}catch{h.noAudio=!0;break}for(var A=0;A<h._howls.length;A++)if(!h._howls[A]._webAudio)for(var _=h._howls[A]._getSoundIds(),j=0;j<_.length;j++){var C=h._howls[A]._soundById(_[j]);C&&C._node&&!C._node._unlocked&&(C._node._unlocked=!0,C._node.load())}h._autoResume();var k=h.ctx.createBufferSource();k.buffer=h._scratchBuffer,k.connect(h.ctx.destination),typeof k.start>"u"?k.noteOn(0):k.start(0),typeof h.ctx.resume=="function"&&h.ctx.resume(),k.onended=function(){k.disconnect(0),h._audioUnlocked=!0,document.removeEventListener("touchstart",g,!0),document.removeEventListener("touchend",g,!0),document.removeEventListener("click",g,!0),document.removeEventListener("keydown",g,!0);for(var E=0;E<h._howls.length;E++)h._howls[E]._emit("unlock")}};return document.addEventListener("touchstart",g,!0),document.addEventListener("touchend",g,!0),document.addEventListener("click",g,!0),document.addEventListener("keydown",g,!0),h}},_obtainHtml5Audio:function(){var h=this||n;if(h._html5AudioPool.length)return h._html5AudioPool.pop();var g=new Audio().play();return g&&typeof Promise<"u"&&(g instanceof Promise||typeof g.then=="function")&&g.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(h){var g=this||n;return h._unlocked&&g._html5AudioPool.push(h),g},_autoSuspend:function(){var h=this;if(!(!h.autoSuspend||!h.ctx||typeof h.ctx.suspend>"u"||!n.usingWebAudio)){for(var g=0;g<h._howls.length;g++)if(h._howls[g]._webAudio){for(var x=0;x<h._howls[g]._sounds.length;x++)if(!h._howls[g]._sounds[x]._paused)return h}return h._suspendTimer&&clearTimeout(h._suspendTimer),h._suspendTimer=setTimeout(function(){if(h.autoSuspend){h._suspendTimer=null,h.state="suspending";var b=function(){h.state="suspended",h._resumeAfterSuspend&&(delete h._resumeAfterSuspend,h._autoResume())};h.ctx.suspend().then(b,b)}},3e4),h}},_autoResume:function(){var h=this;if(!(!h.ctx||typeof h.ctx.resume>"u"||!n.usingWebAudio))return h.state==="running"&&h.ctx.state!=="interrupted"&&h._suspendTimer?(clearTimeout(h._suspendTimer),h._suspendTimer=null):h.state==="suspended"||h.state==="running"&&h.ctx.state==="interrupted"?(h.ctx.resume().then(function(){h.state="running";for(var g=0;g<h._howls.length;g++)h._howls[g]._emit("resume")}),h._suspendTimer&&(clearTimeout(h._suspendTimer),h._suspendTimer=null)):h.state==="suspending"&&(h._resumeAfterSuspend=!0),h}};var n=new e,s=function(h){var g=this;if(!h.src||h.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}g.init(h)};s.prototype={init:function(h){var g=this;return n.ctx||m(),g._autoplay=h.autoplay||!1,g._format=typeof h.format!="string"?h.format:[h.format],g._html5=h.html5||!1,g._muted=h.mute||!1,g._loop=h.loop||!1,g._pool=h.pool||5,g._preload=typeof h.preload=="boolean"||h.preload==="metadata"?h.preload:!0,g._rate=h.rate||1,g._sprite=h.sprite||{},g._src=typeof h.src!="string"?h.src:[h.src],g._volume=h.volume!==void 0?h.volume:1,g._xhr={method:h.xhr&&h.xhr.method?h.xhr.method:"GET",headers:h.xhr&&h.xhr.headers?h.xhr.headers:null,withCredentials:h.xhr&&h.xhr.withCredentials?h.xhr.withCredentials:!1},g._duration=0,g._state="unloaded",g._sounds=[],g._endTimers={},g._queue=[],g._playLock=!1,g._onend=h.onend?[{fn:h.onend}]:[],g._onfade=h.onfade?[{fn:h.onfade}]:[],g._onload=h.onload?[{fn:h.onload}]:[],g._onloaderror=h.onloaderror?[{fn:h.onloaderror}]:[],g._onplayerror=h.onplayerror?[{fn:h.onplayerror}]:[],g._onpause=h.onpause?[{fn:h.onpause}]:[],g._onplay=h.onplay?[{fn:h.onplay}]:[],g._onstop=h.onstop?[{fn:h.onstop}]:[],g._onmute=h.onmute?[{fn:h.onmute}]:[],g._onvolume=h.onvolume?[{fn:h.onvolume}]:[],g._onrate=h.onrate?[{fn:h.onrate}]:[],g._onseek=h.onseek?[{fn:h.onseek}]:[],g._onunlock=h.onunlock?[{fn:h.onunlock}]:[],g._onresume=[],g._webAudio=n.usingWebAudio&&!g._html5,typeof n.ctx<"u"&&n.ctx&&n.autoUnlock&&n._unlockAudio(),n._howls.push(g),g._autoplay&&g._queue.push({event:"play",action:function(){g.play()}}),g._preload&&g._preload!=="none"&&g.load(),g},load:function(){var h=this,g=null;if(n.noAudio){h._emit("loaderror",null,"No audio support.");return}typeof h._src=="string"&&(h._src=[h._src]);for(var x=0;x<h._src.length;x++){var b,A;if(h._format&&h._format[x])b=h._format[x];else{if(A=h._src[x],typeof A!="string"){h._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}b=/^data:audio\/([^;,]+);/i.exec(A),b||(b=/\.([^.]+)$/.exec(A.split("?",1)[0])),b&&(b=b[1].toLowerCase())}if(b||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),b&&n.codecs(b)){g=h._src[x];break}}if(!g){h._emit("loaderror",null,"No codec support for selected audio sources.");return}return h._src=g,h._state="loading",window.location.protocol==="https:"&&g.slice(0,5)==="http:"&&(h._html5=!0,h._webAudio=!1),new r(h),h._webAudio&&o(h),h},play:function(h,g){var x=this,b=null;if(typeof h=="number")b=h,h=null;else{if(typeof h=="string"&&x._state==="loaded"&&!x._sprite[h])return null;if(typeof h>"u"&&(h="__default",!x._playLock)){for(var A=0,_=0;_<x._sounds.length;_++)x._sounds[_]._paused&&!x._sounds[_]._ended&&(A++,b=x._sounds[_]._id);A===1?h=null:b=null}}var j=b?x._soundById(b):x._inactiveSound();if(!j)return null;if(b&&!h&&(h=j._sprite||"__default"),x._state!=="loaded"){j._sprite=h,j._ended=!1;var C=j._id;return x._queue.push({event:"play",action:function(){x.play(C)}}),C}if(b&&!j._paused)return g||x._loadQueue("play"),j._id;x._webAudio&&n._autoResume();var k=Math.max(0,j._seek>0?j._seek:x._sprite[h][0]/1e3),E=Math.max(0,(x._sprite[h][0]+x._sprite[h][1])/1e3-k),N=E*1e3/Math.abs(j._rate),L=x._sprite[h][0]/1e3,M=(x._sprite[h][0]+x._sprite[h][1])/1e3;j._sprite=h,j._ended=!1;var T=function(){j._paused=!1,j._seek=k,j._start=L,j._stop=M,j._loop=!!(j._loop||x._sprite[h][2])};if(k>=M){x._ended(j);return}var O=j._node;if(x._webAudio){var I=function(){x._playLock=!1,T(),x._refreshBuffer(j);var G=j._muted||x._muted?0:j._volume;O.gain.setValueAtTime(G,n.ctx.currentTime),j._playStart=n.ctx.currentTime,typeof O.bufferSource.start>"u"?j._loop?O.bufferSource.noteGrainOn(0,k,86400):O.bufferSource.noteGrainOn(0,k,E):j._loop?O.bufferSource.start(0,k,86400):O.bufferSource.start(0,k,E),N!==1/0&&(x._endTimers[j._id]=setTimeout(x._ended.bind(x,j),N)),g||setTimeout(function(){x._emit("play",j._id),x._loadQueue()},0)};n.state==="running"&&n.ctx.state!=="interrupted"?I():(x._playLock=!0,x.once("resume",I),x._clearTimer(j._id))}else{var $=function(){O.currentTime=k,O.muted=j._muted||x._muted||n._muted||O.muted,O.volume=j._volume*n.volume(),O.playbackRate=j._rate;try{var G=O.play();if(G&&typeof Promise<"u"&&(G instanceof Promise||typeof G.then=="function")?(x._playLock=!0,T(),G.then(function(){x._playLock=!1,O._unlocked=!0,g?x._loadQueue():x._emit("play",j._id)}).catch(function(){x._playLock=!1,x._emit("playerror",j._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),j._ended=!0,j._paused=!0})):g||(x._playLock=!1,T(),x._emit("play",j._id)),O.playbackRate=j._rate,O.paused){x._emit("playerror",j._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}h!=="__default"||j._loop?x._endTimers[j._id]=setTimeout(x._ended.bind(x,j),N):(x._endTimers[j._id]=function(){x._ended(j),O.removeEventListener("ended",x._endTimers[j._id],!1)},O.addEventListener("ended",x._endTimers[j._id],!1))}catch(U){x._emit("playerror",j._id,U)}};O.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(O.src=x._src,O.load());var H=window&&window.ejecta||!O.readyState&&n._navigator.isCocoonJS;if(O.readyState>=3||H)$();else{x._playLock=!0,x._state="loading";var V=function(){x._state="loaded",$(),O.removeEventListener(n._canPlayEvent,V,!1)};O.addEventListener(n._canPlayEvent,V,!1),x._clearTimer(j._id)}}return j._id},pause:function(h){var g=this;if(g._state!=="loaded"||g._playLock)return g._queue.push({event:"pause",action:function(){g.pause(h)}}),g;for(var x=g._getSoundIds(h),b=0;b<x.length;b++){g._clearTimer(x[b]);var A=g._soundById(x[b]);if(A&&!A._paused&&(A._seek=g.seek(x[b]),A._rateSeek=0,A._paused=!0,g._stopFade(x[b]),A._node))if(g._webAudio){if(!A._node.bufferSource)continue;typeof A._node.bufferSource.stop>"u"?A._node.bufferSource.noteOff(0):A._node.bufferSource.stop(0),g._cleanBuffer(A._node)}else(!isNaN(A._node.duration)||A._node.duration===1/0)&&A._node.pause();arguments[1]||g._emit("pause",A?A._id:null)}return g},stop:function(h,g){var x=this;if(x._state!=="loaded"||x._playLock)return x._queue.push({event:"stop",action:function(){x.stop(h)}}),x;for(var b=x._getSoundIds(h),A=0;A<b.length;A++){x._clearTimer(b[A]);var _=x._soundById(b[A]);_&&(_._seek=_._start||0,_._rateSeek=0,_._paused=!0,_._ended=!0,x._stopFade(b[A]),_._node&&(x._webAudio?_._node.bufferSource&&(typeof _._node.bufferSource.stop>"u"?_._node.bufferSource.noteOff(0):_._node.bufferSource.stop(0),x._cleanBuffer(_._node)):(!isNaN(_._node.duration)||_._node.duration===1/0)&&(_._node.currentTime=_._start||0,_._node.pause(),_._node.duration===1/0&&x._clearSound(_._node))),g||x._emit("stop",_._id))}return x},mute:function(h,g){var x=this;if(x._state!=="loaded"||x._playLock)return x._queue.push({event:"mute",action:function(){x.mute(h,g)}}),x;if(typeof g>"u")if(typeof h=="boolean")x._muted=h;else return x._muted;for(var b=x._getSoundIds(g),A=0;A<b.length;A++){var _=x._soundById(b[A]);_&&(_._muted=h,_._interval&&x._stopFade(_._id),x._webAudio&&_._node?_._node.gain.setValueAtTime(h?0:_._volume,n.ctx.currentTime):_._node&&(_._node.muted=n._muted?!0:h),x._emit("mute",_._id))}return x},volume:function(){var h=this,g=arguments,x,b;if(g.length===0)return h._volume;if(g.length===1||g.length===2&&typeof g[1]>"u"){var A=h._getSoundIds(),_=A.indexOf(g[0]);_>=0?b=parseInt(g[0],10):x=parseFloat(g[0])}else g.length>=2&&(x=parseFloat(g[0]),b=parseInt(g[1],10));var j;if(typeof x<"u"&&x>=0&&x<=1){if(h._state!=="loaded"||h._playLock)return h._queue.push({event:"volume",action:function(){h.volume.apply(h,g)}}),h;typeof b>"u"&&(h._volume=x),b=h._getSoundIds(b);for(var C=0;C<b.length;C++)j=h._soundById(b[C]),j&&(j._volume=x,g[2]||h._stopFade(b[C]),h._webAudio&&j._node&&!j._muted?j._node.gain.setValueAtTime(x,n.ctx.currentTime):j._node&&!j._muted&&(j._node.volume=x*n.volume()),h._emit("volume",j._id))}else return j=b?h._soundById(b):h._sounds[0],j?j._volume:0;return h},fade:function(h,g,x,b){var A=this;if(A._state!=="loaded"||A._playLock)return A._queue.push({event:"fade",action:function(){A.fade(h,g,x,b)}}),A;h=Math.min(Math.max(0,parseFloat(h)),1),g=Math.min(Math.max(0,parseFloat(g)),1),x=parseFloat(x),A.volume(h,b);for(var _=A._getSoundIds(b),j=0;j<_.length;j++){var C=A._soundById(_[j]);if(C){if(b||A._stopFade(_[j]),A._webAudio&&!C._muted){var k=n.ctx.currentTime,E=k+x/1e3;C._volume=h,C._node.gain.setValueAtTime(h,k),C._node.gain.linearRampToValueAtTime(g,E)}A._startFadeInterval(C,h,g,x,_[j],typeof b>"u")}}return A},_startFadeInterval:function(h,g,x,b,A,_){var j=this,C=g,k=x-g,E=Math.abs(k/.01),N=Math.max(4,E>0?b/E:b),L=Date.now();h._fadeTo=x,h._interval=setInterval(function(){var M=(Date.now()-L)/b;L=Date.now(),C+=k*M,C=Math.round(C*100)/100,k<0?C=Math.max(x,C):C=Math.min(x,C),j._webAudio?h._volume=C:j.volume(C,h._id,!0),_&&(j._volume=C),(x<g&&C<=x||x>g&&C>=x)&&(clearInterval(h._interval),h._interval=null,h._fadeTo=null,j.volume(x,h._id),j._emit("fade",h._id))},N)},_stopFade:function(h){var g=this,x=g._soundById(h);return x&&x._interval&&(g._webAudio&&x._node.gain.cancelScheduledValues(n.ctx.currentTime),clearInterval(x._interval),x._interval=null,g.volume(x._fadeTo,h),x._fadeTo=null,g._emit("fade",h)),g},loop:function(){var h=this,g=arguments,x,b,A;if(g.length===0)return h._loop;if(g.length===1)if(typeof g[0]=="boolean")x=g[0],h._loop=x;else return A=h._soundById(parseInt(g[0],10)),A?A._loop:!1;else g.length===2&&(x=g[0],b=parseInt(g[1],10));for(var _=h._getSoundIds(b),j=0;j<_.length;j++)A=h._soundById(_[j]),A&&(A._loop=x,h._webAudio&&A._node&&A._node.bufferSource&&(A._node.bufferSource.loop=x,x&&(A._node.bufferSource.loopStart=A._start||0,A._node.bufferSource.loopEnd=A._stop,h.playing(_[j])&&(h.pause(_[j],!0),h.play(_[j],!0)))));return h},rate:function(){var h=this,g=arguments,x,b;if(g.length===0)b=h._sounds[0]._id;else if(g.length===1){var A=h._getSoundIds(),_=A.indexOf(g[0]);_>=0?b=parseInt(g[0],10):x=parseFloat(g[0])}else g.length===2&&(x=parseFloat(g[0]),b=parseInt(g[1],10));var j;if(typeof x=="number"){if(h._state!=="loaded"||h._playLock)return h._queue.push({event:"rate",action:function(){h.rate.apply(h,g)}}),h;typeof b>"u"&&(h._rate=x),b=h._getSoundIds(b);for(var C=0;C<b.length;C++)if(j=h._soundById(b[C]),j){h.playing(b[C])&&(j._rateSeek=h.seek(b[C]),j._playStart=h._webAudio?n.ctx.currentTime:j._playStart),j._rate=x,h._webAudio&&j._node&&j._node.bufferSource?j._node.bufferSource.playbackRate.setValueAtTime(x,n.ctx.currentTime):j._node&&(j._node.playbackRate=x);var k=h.seek(b[C]),E=(h._sprite[j._sprite][0]+h._sprite[j._sprite][1])/1e3-k,N=E*1e3/Math.abs(j._rate);(h._endTimers[b[C]]||!j._paused)&&(h._clearTimer(b[C]),h._endTimers[b[C]]=setTimeout(h._ended.bind(h,j),N)),h._emit("rate",j._id)}}else return j=h._soundById(b),j?j._rate:h._rate;return h},seek:function(){var h=this,g=arguments,x,b;if(g.length===0)h._sounds.length&&(b=h._sounds[0]._id);else if(g.length===1){var A=h._getSoundIds(),_=A.indexOf(g[0]);_>=0?b=parseInt(g[0],10):h._sounds.length&&(b=h._sounds[0]._id,x=parseFloat(g[0]))}else g.length===2&&(x=parseFloat(g[0]),b=parseInt(g[1],10));if(typeof b>"u")return 0;if(typeof x=="number"&&(h._state!=="loaded"||h._playLock))return h._queue.push({event:"seek",action:function(){h.seek.apply(h,g)}}),h;var j=h._soundById(b);if(j)if(typeof x=="number"&&x>=0){var C=h.playing(b);C&&h.pause(b,!0),j._seek=x,j._ended=!1,h._clearTimer(b),!h._webAudio&&j._node&&!isNaN(j._node.duration)&&(j._node.currentTime=x);var k=function(){C&&h.play(b,!0),h._emit("seek",b)};if(C&&!h._webAudio){var E=function(){h._playLock?setTimeout(E,0):k()};setTimeout(E,0)}else k()}else if(h._webAudio){var N=h.playing(b)?n.ctx.currentTime-j._playStart:0,L=j._rateSeek?j._rateSeek-j._seek:0;return j._seek+(L+N*Math.abs(j._rate))}else return j._node.currentTime;return h},playing:function(h){var g=this;if(typeof h=="number"){var x=g._soundById(h);return x?!x._paused:!1}for(var b=0;b<g._sounds.length;b++)if(!g._sounds[b]._paused)return!0;return!1},duration:function(h){var g=this,x=g._duration,b=g._soundById(h);return b&&(x=g._sprite[b._sprite][1]/1e3),x},state:function(){return this._state},unload:function(){for(var h=this,g=h._sounds,x=0;x<g.length;x++)g[x]._paused||h.stop(g[x]._id),h._webAudio||(h._clearSound(g[x]._node),g[x]._node.removeEventListener("error",g[x]._errorFn,!1),g[x]._node.removeEventListener(n._canPlayEvent,g[x]._loadFn,!1),g[x]._node.removeEventListener("ended",g[x]._endFn,!1),n._releaseHtml5Audio(g[x]._node)),delete g[x]._node,h._clearTimer(g[x]._id);var b=n._howls.indexOf(h);b>=0&&n._howls.splice(b,1);var A=!0;for(x=0;x<n._howls.length;x++)if(n._howls[x]._src===h._src||h._src.indexOf(n._howls[x]._src)>=0){A=!1;break}return i&&A&&delete i[h._src],n.noAudio=!1,h._state="unloaded",h._sounds=[],h=null,null},on:function(h,g,x,b){var A=this,_=A["_on"+h];return typeof g=="function"&&_.push(b?{id:x,fn:g,once:b}:{id:x,fn:g}),A},off:function(h,g,x){var b=this,A=b["_on"+h],_=0;if(typeof g=="number"&&(x=g,g=null),g||x)for(_=0;_<A.length;_++){var j=x===A[_].id;if(g===A[_].fn&&j||!g&&j){A.splice(_,1);break}}else if(h)b["_on"+h]=[];else{var C=Object.keys(b);for(_=0;_<C.length;_++)C[_].indexOf("_on")===0&&Array.isArray(b[C[_]])&&(b[C[_]]=[])}return b},once:function(h,g,x){var b=this;return b.on(h,g,x,1),b},_emit:function(h,g,x){for(var b=this,A=b["_on"+h],_=A.length-1;_>=0;_--)(!A[_].id||A[_].id===g||h==="load")&&(setTimeout((function(j){j.call(this,g,x)}).bind(b,A[_].fn),0),A[_].once&&b.off(h,A[_].fn,A[_].id));return b._loadQueue(h),b},_loadQueue:function(h){var g=this;if(g._queue.length>0){var x=g._queue[0];x.event===h&&(g._queue.shift(),g._loadQueue()),h||x.action()}return g},_ended:function(h){var g=this,x=h._sprite;if(!g._webAudio&&h._node&&!h._node.paused&&!h._node.ended&&h._node.currentTime<h._stop)return setTimeout(g._ended.bind(g,h),100),g;var b=!!(h._loop||g._sprite[x][2]);if(g._emit("end",h._id),!g._webAudio&&b&&g.stop(h._id,!0).play(h._id),g._webAudio&&b){g._emit("play",h._id),h._seek=h._start||0,h._rateSeek=0,h._playStart=n.ctx.currentTime;var A=(h._stop-h._start)*1e3/Math.abs(h._rate);g._endTimers[h._id]=setTimeout(g._ended.bind(g,h),A)}return g._webAudio&&!b&&(h._paused=!0,h._ended=!0,h._seek=h._start||0,h._rateSeek=0,g._clearTimer(h._id),g._cleanBuffer(h._node),n._autoSuspend()),!g._webAudio&&!b&&g.stop(h._id,!0),g},_clearTimer:function(h){var g=this;if(g._endTimers[h]){if(typeof g._endTimers[h]!="function")clearTimeout(g._endTimers[h]);else{var x=g._soundById(h);x&&x._node&&x._node.removeEventListener("ended",g._endTimers[h],!1)}delete g._endTimers[h]}return g},_soundById:function(h){for(var g=this,x=0;x<g._sounds.length;x++)if(h===g._sounds[x]._id)return g._sounds[x];return null},_inactiveSound:function(){var h=this;h._drain();for(var g=0;g<h._sounds.length;g++)if(h._sounds[g]._ended)return h._sounds[g].reset();return new r(h)},_drain:function(){var h=this,g=h._pool,x=0,b=0;if(!(h._sounds.length<g)){for(b=0;b<h._sounds.length;b++)h._sounds[b]._ended&&x++;for(b=h._sounds.length-1;b>=0;b--){if(x<=g)return;h._sounds[b]._ended&&(h._webAudio&&h._sounds[b]._node&&h._sounds[b]._node.disconnect(0),h._sounds.splice(b,1),x--)}}},_getSoundIds:function(h){var g=this;if(typeof h>"u"){for(var x=[],b=0;b<g._sounds.length;b++)x.push(g._sounds[b]._id);return x}else return[h]},_refreshBuffer:function(h){var g=this;return h._node.bufferSource=n.ctx.createBufferSource(),h._node.bufferSource.buffer=i[g._src],h._panner?h._node.bufferSource.connect(h._panner):h._node.bufferSource.connect(h._node),h._node.bufferSource.loop=h._loop,h._loop&&(h._node.bufferSource.loopStart=h._start||0,h._node.bufferSource.loopEnd=h._stop||0),h._node.bufferSource.playbackRate.setValueAtTime(h._rate,n.ctx.currentTime),g},_cleanBuffer:function(h){var g=this,x=n._navigator&&n._navigator.vendor.indexOf("Apple")>=0;if(!h.bufferSource)return g;if(n._scratchBuffer&&h.bufferSource&&(h.bufferSource.onended=null,h.bufferSource.disconnect(0),x))try{h.bufferSource.buffer=n._scratchBuffer}catch{}return h.bufferSource=null,g},_clearSound:function(h){var g=/MSIE |Trident\//.test(n._navigator&&n._navigator.userAgent);g||(h.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var r=function(h){this._parent=h,this.init()};r.prototype={init:function(){var h=this,g=h._parent;return h._muted=g._muted,h._loop=g._loop,h._volume=g._volume,h._rate=g._rate,h._seek=0,h._paused=!0,h._ended=!0,h._sprite="__default",h._id=++n._counter,g._sounds.push(h),h.create(),h},create:function(){var h=this,g=h._parent,x=n._muted||h._muted||h._parent._muted?0:h._volume;return g._webAudio?(h._node=typeof n.ctx.createGain>"u"?n.ctx.createGainNode():n.ctx.createGain(),h._node.gain.setValueAtTime(x,n.ctx.currentTime),h._node.paused=!0,h._node.connect(n.masterGain)):n.noAudio||(h._node=n._obtainHtml5Audio(),h._errorFn=h._errorListener.bind(h),h._node.addEventListener("error",h._errorFn,!1),h._loadFn=h._loadListener.bind(h),h._node.addEventListener(n._canPlayEvent,h._loadFn,!1),h._endFn=h._endListener.bind(h),h._node.addEventListener("ended",h._endFn,!1),h._node.src=g._src,h._node.preload=g._preload===!0?"auto":g._preload,h._node.volume=x*n.volume(),h._node.load()),h},reset:function(){var h=this,g=h._parent;return h._muted=g._muted,h._loop=g._loop,h._volume=g._volume,h._rate=g._rate,h._seek=0,h._rateSeek=0,h._paused=!0,h._ended=!0,h._sprite="__default",h._id=++n._counter,h},_errorListener:function(){var h=this;h._parent._emit("loaderror",h._id,h._node.error?h._node.error.code:0),h._node.removeEventListener("error",h._errorFn,!1)},_loadListener:function(){var h=this,g=h._parent;g._duration=Math.ceil(h._node.duration*10)/10,Object.keys(g._sprite).length===0&&(g._sprite={__default:[0,g._duration*1e3]}),g._state!=="loaded"&&(g._state="loaded",g._emit("load"),g._loadQueue()),h._node.removeEventListener(n._canPlayEvent,h._loadFn,!1)},_endListener:function(){var h=this,g=h._parent;g._duration===1/0&&(g._duration=Math.ceil(h._node.duration*10)/10,g._sprite.__default[1]===1/0&&(g._sprite.__default[1]=g._duration*1e3),g._ended(h)),h._node.removeEventListener("ended",h._endFn,!1)}};var i={},o=function(h){var g=h._src;if(i[g]){h._duration=i[g].duration,f(h);return}if(/^data:[^;]+;base64,/.test(g)){for(var x=atob(g.split(",")[1]),b=new Uint8Array(x.length),A=0;A<x.length;++A)b[A]=x.charCodeAt(A);u(b.buffer,h)}else{var _=new XMLHttpRequest;_.open(h._xhr.method,g,!0),_.withCredentials=h._xhr.withCredentials,_.responseType="arraybuffer",h._xhr.headers&&Object.keys(h._xhr.headers).forEach(function(j){_.setRequestHeader(j,h._xhr.headers[j])}),_.onload=function(){var j=(_.status+"")[0];if(j!=="0"&&j!=="2"&&j!=="3"){h._emit("loaderror",null,"Failed loading audio file with status: "+_.status+".");return}u(_.response,h)},_.onerror=function(){h._webAudio&&(h._html5=!0,h._webAudio=!1,h._sounds=[],delete i[g],h.load())},c(_)}},c=function(h){try{h.send()}catch{h.onerror()}},u=function(h,g){var x=function(){g._emit("loaderror",null,"Decoding audio data failed.")},b=function(A){A&&g._sounds.length>0?(i[g._src]=A,f(g,A)):x()};typeof Promise<"u"&&n.ctx.decodeAudioData.length===1?n.ctx.decodeAudioData(h).then(b).catch(x):n.ctx.decodeAudioData(h,b,x)},f=function(h,g){g&&!h._duration&&(h._duration=g.duration),Object.keys(h._sprite).length===0&&(h._sprite={__default:[0,h._duration*1e3]}),h._state!=="loaded"&&(h._state="loaded",h._emit("load"),h._loadQueue())},m=function(){if(n.usingWebAudio){try{typeof AudioContext<"u"?n.ctx=new AudioContext:typeof webkitAudioContext<"u"?n.ctx=new webkitAudioContext:n.usingWebAudio=!1}catch{n.usingWebAudio=!1}n.ctx||(n.usingWebAudio=!1);var h=/iP(hone|od|ad)/.test(n._navigator&&n._navigator.platform),g=n._navigator&&n._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),x=g?parseInt(g[1],10):null;if(h&&x&&x<9){var b=/safari/.test(n._navigator&&n._navigator.userAgent.toLowerCase());n._navigator&&!b&&(n.usingWebAudio=!1)}n.usingWebAudio&&(n.masterGain=typeof n.ctx.createGain>"u"?n.ctx.createGainNode():n.ctx.createGain(),n.masterGain.gain.setValueAtTime(n._muted?0:n._volume,n.ctx.currentTime),n.masterGain.connect(n.ctx.destination)),n._setup()}};t.Howler=n,t.Howl=s,typeof ef<"u"?(ef.HowlerGlobal=e,ef.Howler=n,ef.Howl=s,ef.Sound=r):typeof window<"u"&&(window.HowlerGlobal=e,window.Howler=n,window.Howl=s,window.Sound=r)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(n){var s=this;if(!s.ctx||!s.ctx.listener)return s;for(var r=s._howls.length-1;r>=0;r--)s._howls[r].stereo(n);return s},HowlerGlobal.prototype.pos=function(n,s,r){var i=this;if(!i.ctx||!i.ctx.listener)return i;if(s=typeof s!="number"?i._pos[1]:s,r=typeof r!="number"?i._pos[2]:r,typeof n=="number")i._pos=[n,s,r],typeof i.ctx.listener.positionX<"u"?(i.ctx.listener.positionX.setTargetAtTime(i._pos[0],Howler.ctx.currentTime,.1),i.ctx.listener.positionY.setTargetAtTime(i._pos[1],Howler.ctx.currentTime,.1),i.ctx.listener.positionZ.setTargetAtTime(i._pos[2],Howler.ctx.currentTime,.1)):i.ctx.listener.setPosition(i._pos[0],i._pos[1],i._pos[2]);else return i._pos;return i},HowlerGlobal.prototype.orientation=function(n,s,r,i,o,c){var u=this;if(!u.ctx||!u.ctx.listener)return u;var f=u._orientation;if(s=typeof s!="number"?f[1]:s,r=typeof r!="number"?f[2]:r,i=typeof i!="number"?f[3]:i,o=typeof o!="number"?f[4]:o,c=typeof c!="number"?f[5]:c,typeof n=="number")u._orientation=[n,s,r,i,o,c],typeof u.ctx.listener.forwardX<"u"?(u.ctx.listener.forwardX.setTargetAtTime(n,Howler.ctx.currentTime,.1),u.ctx.listener.forwardY.setTargetAtTime(s,Howler.ctx.currentTime,.1),u.ctx.listener.forwardZ.setTargetAtTime(r,Howler.ctx.currentTime,.1),u.ctx.listener.upX.setTargetAtTime(i,Howler.ctx.currentTime,.1),u.ctx.listener.upY.setTargetAtTime(o,Howler.ctx.currentTime,.1),u.ctx.listener.upZ.setTargetAtTime(c,Howler.ctx.currentTime,.1)):u.ctx.listener.setOrientation(n,s,r,i,o,c);else return f;return u},Howl.prototype.init=(function(n){return function(s){var r=this;return r._orientation=s.orientation||[1,0,0],r._stereo=s.stereo||null,r._pos=s.pos||null,r._pannerAttr={coneInnerAngle:typeof s.coneInnerAngle<"u"?s.coneInnerAngle:360,coneOuterAngle:typeof s.coneOuterAngle<"u"?s.coneOuterAngle:360,coneOuterGain:typeof s.coneOuterGain<"u"?s.coneOuterGain:0,distanceModel:typeof s.distanceModel<"u"?s.distanceModel:"inverse",maxDistance:typeof s.maxDistance<"u"?s.maxDistance:1e4,panningModel:typeof s.panningModel<"u"?s.panningModel:"HRTF",refDistance:typeof s.refDistance<"u"?s.refDistance:1,rolloffFactor:typeof s.rolloffFactor<"u"?s.rolloffFactor:1},r._onstereo=s.onstereo?[{fn:s.onstereo}]:[],r._onpos=s.onpos?[{fn:s.onpos}]:[],r._onorientation=s.onorientation?[{fn:s.onorientation}]:[],n.call(this,s)}})(Howl.prototype.init),Howl.prototype.stereo=function(n,s){var r=this;if(!r._webAudio)return r;if(r._state!=="loaded")return r._queue.push({event:"stereo",action:function(){r.stereo(n,s)}}),r;var i=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof s>"u")if(typeof n=="number")r._stereo=n,r._pos=[n,0,0];else return r._stereo;for(var o=r._getSoundIds(s),c=0;c<o.length;c++){var u=r._soundById(o[c]);if(u)if(typeof n=="number")u._stereo=n,u._pos=[n,0,0],u._node&&(u._pannerAttr.panningModel="equalpower",(!u._panner||!u._panner.pan)&&e(u,i),i==="spatial"?typeof u._panner.positionX<"u"?(u._panner.positionX.setValueAtTime(n,Howler.ctx.currentTime),u._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),u._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):u._panner.setPosition(n,0,0):u._panner.pan.setValueAtTime(n,Howler.ctx.currentTime)),r._emit("stereo",u._id);else return u._stereo}return r},Howl.prototype.pos=function(n,s,r,i){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"pos",action:function(){o.pos(n,s,r,i)}}),o;if(s=typeof s!="number"?0:s,r=typeof r!="number"?-.5:r,typeof i>"u")if(typeof n=="number")o._pos=[n,s,r];else return o._pos;for(var c=o._getSoundIds(i),u=0;u<c.length;u++){var f=o._soundById(c[u]);if(f)if(typeof n=="number")f._pos=[n,s,r],f._node&&((!f._panner||f._panner.pan)&&e(f,"spatial"),typeof f._panner.positionX<"u"?(f._panner.positionX.setValueAtTime(n,Howler.ctx.currentTime),f._panner.positionY.setValueAtTime(s,Howler.ctx.currentTime),f._panner.positionZ.setValueAtTime(r,Howler.ctx.currentTime)):f._panner.setPosition(n,s,r)),o._emit("pos",f._id);else return f._pos}return o},Howl.prototype.orientation=function(n,s,r,i){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"orientation",action:function(){o.orientation(n,s,r,i)}}),o;if(s=typeof s!="number"?o._orientation[1]:s,r=typeof r!="number"?o._orientation[2]:r,typeof i>"u")if(typeof n=="number")o._orientation=[n,s,r];else return o._orientation;for(var c=o._getSoundIds(i),u=0;u<c.length;u++){var f=o._soundById(c[u]);if(f)if(typeof n=="number")f._orientation=[n,s,r],f._node&&(f._panner||(f._pos||(f._pos=o._pos||[0,0,-.5]),e(f,"spatial")),typeof f._panner.orientationX<"u"?(f._panner.orientationX.setValueAtTime(n,Howler.ctx.currentTime),f._panner.orientationY.setValueAtTime(s,Howler.ctx.currentTime),f._panner.orientationZ.setValueAtTime(r,Howler.ctx.currentTime)):f._panner.setOrientation(n,s,r)),o._emit("orientation",f._id);else return f._orientation}return o},Howl.prototype.pannerAttr=function(){var n=this,s=arguments,r,i,o;if(!n._webAudio)return n;if(s.length===0)return n._pannerAttr;if(s.length===1)if(typeof s[0]=="object")r=s[0],typeof i>"u"&&(r.pannerAttr||(r.pannerAttr={coneInnerAngle:r.coneInnerAngle,coneOuterAngle:r.coneOuterAngle,coneOuterGain:r.coneOuterGain,distanceModel:r.distanceModel,maxDistance:r.maxDistance,refDistance:r.refDistance,rolloffFactor:r.rolloffFactor,panningModel:r.panningModel}),n._pannerAttr={coneInnerAngle:typeof r.pannerAttr.coneInnerAngle<"u"?r.pannerAttr.coneInnerAngle:n._coneInnerAngle,coneOuterAngle:typeof r.pannerAttr.coneOuterAngle<"u"?r.pannerAttr.coneOuterAngle:n._coneOuterAngle,coneOuterGain:typeof r.pannerAttr.coneOuterGain<"u"?r.pannerAttr.coneOuterGain:n._coneOuterGain,distanceModel:typeof r.pannerAttr.distanceModel<"u"?r.pannerAttr.distanceModel:n._distanceModel,maxDistance:typeof r.pannerAttr.maxDistance<"u"?r.pannerAttr.maxDistance:n._maxDistance,refDistance:typeof r.pannerAttr.refDistance<"u"?r.pannerAttr.refDistance:n._refDistance,rolloffFactor:typeof r.pannerAttr.rolloffFactor<"u"?r.pannerAttr.rolloffFactor:n._rolloffFactor,panningModel:typeof r.pannerAttr.panningModel<"u"?r.pannerAttr.panningModel:n._panningModel});else return o=n._soundById(parseInt(s[0],10)),o?o._pannerAttr:n._pannerAttr;else s.length===2&&(r=s[0],i=parseInt(s[1],10));for(var c=n._getSoundIds(i),u=0;u<c.length;u++)if(o=n._soundById(c[u]),o){var f=o._pannerAttr;f={coneInnerAngle:typeof r.coneInnerAngle<"u"?r.coneInnerAngle:f.coneInnerAngle,coneOuterAngle:typeof r.coneOuterAngle<"u"?r.coneOuterAngle:f.coneOuterAngle,coneOuterGain:typeof r.coneOuterGain<"u"?r.coneOuterGain:f.coneOuterGain,distanceModel:typeof r.distanceModel<"u"?r.distanceModel:f.distanceModel,maxDistance:typeof r.maxDistance<"u"?r.maxDistance:f.maxDistance,refDistance:typeof r.refDistance<"u"?r.refDistance:f.refDistance,rolloffFactor:typeof r.rolloffFactor<"u"?r.rolloffFactor:f.rolloffFactor,panningModel:typeof r.panningModel<"u"?r.panningModel:f.panningModel};var m=o._panner;m||(o._pos||(o._pos=n._pos||[0,0,-.5]),e(o,"spatial"),m=o._panner),m.coneInnerAngle=f.coneInnerAngle,m.coneOuterAngle=f.coneOuterAngle,m.coneOuterGain=f.coneOuterGain,m.distanceModel=f.distanceModel,m.maxDistance=f.maxDistance,m.refDistance=f.refDistance,m.rolloffFactor=f.rolloffFactor,m.panningModel=f.panningModel}return n},Sound.prototype.init=(function(n){return function(){var s=this,r=s._parent;s._orientation=r._orientation,s._stereo=r._stereo,s._pos=r._pos,s._pannerAttr=r._pannerAttr,n.call(this),s._stereo?r.stereo(s._stereo):s._pos&&r.pos(s._pos[0],s._pos[1],s._pos[2],s._id)}})(Sound.prototype.init),Sound.prototype.reset=(function(n){return function(){var s=this,r=s._parent;return s._orientation=r._orientation,s._stereo=r._stereo,s._pos=r._pos,s._pannerAttr=r._pannerAttr,s._stereo?r.stereo(s._stereo):s._pos?r.pos(s._pos[0],s._pos[1],s._pos[2],s._id):s._panner&&(s._panner.disconnect(0),s._panner=void 0,r._refreshBuffer(s)),n.call(this)}})(Sound.prototype.reset);var e=function(n,s){s=s||"spatial",s==="spatial"?(n._panner=Howler.ctx.createPanner(),n._panner.coneInnerAngle=n._pannerAttr.coneInnerAngle,n._panner.coneOuterAngle=n._pannerAttr.coneOuterAngle,n._panner.coneOuterGain=n._pannerAttr.coneOuterGain,n._panner.distanceModel=n._pannerAttr.distanceModel,n._panner.maxDistance=n._pannerAttr.maxDistance,n._panner.refDistance=n._pannerAttr.refDistance,n._panner.rolloffFactor=n._pannerAttr.rolloffFactor,n._panner.panningModel=n._pannerAttr.panningModel,typeof n._panner.positionX<"u"?(n._panner.positionX.setValueAtTime(n._pos[0],Howler.ctx.currentTime),n._panner.positionY.setValueAtTime(n._pos[1],Howler.ctx.currentTime),n._panner.positionZ.setValueAtTime(n._pos[2],Howler.ctx.currentTime)):n._panner.setPosition(n._pos[0],n._pos[1],n._pos[2]),typeof n._panner.orientationX<"u"?(n._panner.orientationX.setValueAtTime(n._orientation[0],Howler.ctx.currentTime),n._panner.orientationY.setValueAtTime(n._orientation[1],Howler.ctx.currentTime),n._panner.orientationZ.setValueAtTime(n._orientation[2],Howler.ctx.currentTime)):n._panner.setOrientation(n._orientation[0],n._orientation[1],n._orientation[2])):(n._panner=Howler.ctx.createStereoPanner(),n._panner.pan.setValueAtTime(n._stereo,Howler.ctx.currentTime)),n._panner.connect(n._node),n._paused||n._parent.pause(n._id,!0).play(n._id,!0)}})()})(D_)),D_}var $f=Ffe();const E_=["/celebrate/Dance Reaction GIF.gif","/celebrate/Drunk On One GIF.gif","/celebrate/Happy Birthday Reaction GIF.gif","/celebrate/Happy So Excited GIF.gif","/celebrate/Make It Rain Money GIF by SpongeBob SquarePants.gif","/celebrate/Make It Rain Money GIF.gif","/celebrate/money GIF.gif"],Bfe=[{src:"/celebrate/98385__the-baron__laugh.wav",volume:1,delay:0},{src:"/celebrate/In the Jungle.mp3",volume:1,delay:2500}];function Ife({show:t,onClose:e,title:n="JA MANNNEEEEEE!",subtitle:s,videoSrc:r}){const i=v.useRef([]),o=v.useRef([]),c=v.useRef(null),u=v.useRef(null),[f,m]=v.useState(0),[h,g]=v.useState([]),[x,b]=v.useState(!1),A=r||E_[Math.floor(Math.random()*E_.length)],_=()=>{const L=Date.now()+3e4,M=["#ffd600","#ff0059","#00f5d4","#845ef7","#ff7b00","#00b4d8","#ff3d00","#76ff03"],T=()=>{gg({particleCount:100,startVelocity:55,scalar:1.2,spread:80,angle:60,origin:{x:0,y:.6},colors:M,zIndex:999999}),gg({particleCount:100,startVelocity:55,scalar:1.2,spread:80,angle:120,origin:{x:1,y:.6},colors:M,zIndex:999999}),Math.random()>.7&&gg({particleCount:150,startVelocity:65,spread:100,origin:{x:.3+Math.random()*.4,y:.3+Math.random()*.3},colors:M,zIndex:999999}),Date.now()<L&&i.current.push(setTimeout(T,200+Math.random()*150))};T(),[2e3,4e3,6e3,8e3].forEach(O=>{i.current.push(setTimeout(()=>{gg({particleCount:400,startVelocity:65,spread:180,origin:{x:.5,y:.4},colors:M,zIndex:999999})},O))})},j=async()=>{try{await $f.Howler.ctx.resume()}catch{}c.current=new $f.Howl({src:["/celebrate/crowd.mp3"],volume:.6,loop:!0}),c.current.play(),Bfe.forEach(M=>{i.current.push(setTimeout(()=>{const T=new $f.Howl({src:[M.src],volume:M.volume});T.play(),o.current.push(T)},M.delay))});const L=["/celebrate/yeah-boy.mp3","/celebrate/cash.mp3","/celebrate/laugh.mp3"];for(let M=0;M<5;M++)i.current.push(setTimeout(()=>{const T=L[Math.floor(Math.random()*L.length)],O=new $f.Howl({src:[T],volume:.8});O.play(),o.current.push(O)},2e3+M*3e3))},C=()=>{let L=3;const M=setInterval(()=>{m(L*(Math.random()>.5?1:-1)),L*=.95,L<.5&&(clearInterval(M),m(0))},50);i.current.push(()=>clearInterval(M)),[3e3,6e3,9e3].forEach(T=>{i.current.push(setTimeout(()=>{L=5},T))})},k=()=>{const L=["/celebrate/money-eyes.gif","/celebrate/success.gif","/celebrate/thumbs-up.gif","/celebrate/party-hat.gif","/celebrate/dance.gif"],M=()=>{const O=L[Math.floor(Math.random()*L.length)],I={top:`${10+Math.random()*80}%`,left:`${10+Math.random()*80}%`,transform:`rotate(${-20+Math.random()*40}deg) scale(${.7+Math.random()*.6})`,id:Date.now()};g($=>[...$,{...I,gif:O}]),i.current.push(setTimeout(()=>{g($=>$.filter(H=>H.id!==I.id))},3e3+Math.random()*3e3))};for(let O=0;O<3;O++)i.current.push(setTimeout(()=>M(),O*800));const T=setInterval(()=>{Math.random()>.4&&M()},1500);i.current.push(()=>clearInterval(T))},E=()=>{const L=setInterval(()=>{b(M=>!M)},300);i.current.push(()=>clearInterval(L))},N=()=>{o.current.forEach(L=>L.stop()),c.current?.stop(),i.current.forEach(L=>{typeof L=="function"?L():clearTimeout(L)}),i.current=[]};return v.useEffect(()=>{if(t)return _(),j(),C(),k(),E(),i.current.push(setTimeout(()=>{try{u.current?.play()}catch{}},100)),N},[t]),t?a.jsxs("div",{className:`celebrate-overlay ${x?"flash":""}`,role:"dialog","aria-modal":"true",style:{transform:`translate(${f}px, ${f*.8}px)`},children:[a.jsx("div",{className:"emoji-rain",children:Array.from({length:15}).map((L,M)=>a.jsx("div",{className:"falling-emoji",style:{left:`${M*7%100}%`,animationDelay:`${Math.random()*5}s`,fontSize:`${30+Math.random()*40}px`},children:["💰","💵","🤑","🎉","🎊","🔥","⭐","💸"][M%8]},M))}),a.jsxs("div",{className:"celebrate-inner",children:[a.jsx("h1",{className:"celebrate-title",children:n}),s&&a.jsx("div",{className:"celebrate-subtitle",children:s}),a.jsxs("div",{className:"video-container",children:[A?.endsWith(".gif")?a.jsx("img",{src:A,alt:"celebration",className:"celebrate-media main-media"}):a.jsx("video",{ref:u,className:"celebrate-media main-media",src:A,autoPlay:!0,playsInline:!0,loop:!0}),a.jsx("div",{className:"secondary-videos",children:E_.slice(0,3).map((L,M)=>a.jsx("div",{className:`mini-video mini-video-${M+1}`,children:L.endsWith(".gif")?a.jsx("img",{src:L,alt:"",className:"mini-media"}):a.jsx("video",{src:L,autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:"mini-media"})},M))})]}),h.map((L,M)=>a.jsx("img",{src:L.gif,alt:"",className:"floating-gif",style:{position:"absolute",top:L.top,left:L.left,transform:L.transform,zIndex:1e6}},M)),a.jsx("div",{className:"rotating-dollar",children:"💰"}),a.jsxs("div",{className:"celebrate-controls",children:[a.jsx("button",{className:"btn btn-warning me-2",onClick:()=>c.current?.mute(!c.current?._muted),children:c.current?._muted?"🔈 UNMUTE PARTY":"🔇 MUTE PARTY"}),a.jsx("button",{className:"btn btn-danger",onClick:e,children:"MAKE IT STOP! 😵"})]})]})]}):null}function Vfe({projectId:t,onOpenQuote:e}){const[n,s]=v.useState(null),[r,i]=v.useState(!0),[o,c]=v.useState({}),[u,f]=v.useState(null),[m,h]=v.useState(""),{showNotification:g}=Os(),[x,b]=v.useState(!1),[A,_]=v.useState(null),{user:j}=is(),C=async()=>{i(!0);try{const V=await Re.get(`${Ce}/api/projects/${t}/quotes`);s(V.data)}catch(V){console.error("Failed to load quotes:",V),g("Failed to load quotes","danger")}finally{i(!1)}};v.useEffect(()=>{C()},[t]),v.useEffect(()=>{const V=()=>window.location.reload();return window.addEventListener("refresh-project",V),window.addEventListener("refresh-quotes",V),()=>{window.removeEventListener("refresh-project",V),window.removeEventListener("refresh-quotes",V)}},[]);const k=async(V,G)=>{if(G.stopPropagation(),!!window.confirm("Mark this quote as accepted?")){try{await $f.Howler.ctx.resume()}catch{}c(U=>({...U,[V]:"accept"}));try{await Re.post(`${Ce}/api/quotes/${V}/accept`),g("Quote accepted!","success"),_({title:"JA MANNEEEEE!",subtitle:"BAIE GELUK GROOTHOND!!!!!!"}),b(!0),await C()}catch(U){console.error(U),g(U.response?.data?.error||"Failed to accept quote","danger")}finally{c(U=>({...U,[V]:null}))}}},E=async(V,G)=>{if(G.stopPropagation(),!!window.confirm("Mark this quote as declined?")){c(U=>({...U,[V]:"decline"}));try{await Re.post(`${Ce}/api/quotes/${V}/decline`),g("Quote declined","info"),await C()}catch(U){console.error(U),g(U.response?.data?.error||"Failed to decline quote","danger")}finally{c(U=>({...U,[V]:null}))}}},N=async(V,G,U)=>{if(U.stopPropagation(),!!window.confirm(`Are you sure you want to delete quote "${G}"? This action cannot be undone.`)){c(R=>({...R,[V]:"delete"}));try{await Re.delete(`${Ce}/api/quotes/${V}`),g("Quote deleted successfully","success"),await C()}catch(R){console.error(R),g(R.response?.data?.error||"Failed to delete quote","danger")}finally{c(R=>({...R,[V]:null}))}}},L=(V,G)=>{G.stopPropagation(),f(V.id);const U=V.number.match(/^(.*?)(\d+)$/);h(U?U[1]:V.number)},M=()=>{f(null),h("")},T=async(V,G)=>{if(!m.trim()){g("Quote prefix cannot be empty","danger");return}c(U=>({...U,[V]:"rename"}));try{await Re.patch(`${Ce}/api/quotes/${V}/rename`,{new_prefix:m.trim()}),g("Quote renamed successfully","success"),f(null),h(""),await C()}catch(U){console.error(U),g(U.response?.data?.error||"Failed to rename quote","danger")}finally{c(U=>({...U,[V]:null}))}},O=(V,G,U)=>{V.key==="Enter"?T(G):V.key==="Escape"&&M()};if(r)return a.jsx(Ot,{size:"sm"});if(!n?.length)return a.jsx("div",{className:"text-muted",children:"No quotes yet."});const I=V=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR"}).format(V||0).replace("R","R "),$=V=>{switch((V||"draft").toLowerCase()){case"sent":return a.jsx(tt,{bg:"success",children:V});case"accepted":return a.jsx(tt,{bg:"primary",children:V});case"declined":return a.jsx(tt,{bg:"danger",children:V});default:return a.jsx(tt,{bg:"secondary",children:V||"draft"})}},H=V=>{const G=V.match(/(\d+)$/);return G?G[1]:""};return a.jsxs(a.Fragment,{children:[a.jsxs(vn,{striped:!0,hover:!0,size:"sm",className:"align-middle",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Latest ver."}),a.jsx("th",{children:"Total (incl. VAT)"}),a.jsx("th",{children:"Created"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:n.map(V=>a.jsxs("tr",{children:[a.jsx("td",{onClick:()=>!u&&e?.(V.id),style:{cursor:!u&&e?"pointer":"default"},children:u===V.id?a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx(z.Control,{type:"text",size:"sm",value:m,onChange:G=>h(G.target.value),onKeyDown:G=>O(G,V.id,V.number),style:{width:"200px",marginRight:"5px"},autoFocus:!0}),a.jsx("span",{className:"text-muted",children:H(V.number)}),a.jsxs("div",{className:"ms-2",children:[a.jsx(Fe,{variant:"success",size:"sm",onClick:()=>T(V.id,V.number),disabled:o[V.id]==="rename",className:"me-1",children:o[V.id]==="rename"?a.jsx(Ot,{animation:"border",size:"sm"}):a.jsx("i",{className:"bi bi-check"})}),a.jsx(Fe,{variant:"secondary",size:"sm",onClick:M,children:a.jsx("i",{className:"bi bi-x"})})]})]}):a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:V.number}),a.jsx(Fe,{variant:"link",size:"sm",onClick:G=>L(V,G),className:"ms-2 p-0",title:"Rename quote",children:a.jsx("i",{className:"bi bi-pencil"})})]})}),a.jsx("td",{onClick:()=>!u&&e?.(V.id),style:{cursor:!u&&e?"pointer":"default"},children:$(V.status)}),a.jsxs("td",{onClick:()=>!u&&e?.(V.id),style:{cursor:!u&&e?"pointer":"default"},children:["V",V.version_count||1]}),a.jsx("td",{onClick:()=>!u&&e?.(V.id),style:{cursor:!u&&e?"pointer":"default"},children:V.latest_totals?.total_incl_vat!=null?I(V.latest_totals.total_incl_vat):"—"}),a.jsxs("td",{onClick:()=>!u&&e?.(V.id),style:{cursor:!u&&e?"pointer":"default"},children:[new Date(V.created_at).toLocaleString("en-ZA"),V.created_by&&a.jsxs("div",{className:"small text-muted",children:["by ",V.created_by.full_name]})]}),a.jsx("td",{children:u===V.id?a.jsx("div",{className:"text-muted small",children:"Editing..."}):a.jsxs("div",{className:"d-flex align-items-center",children:[V.status==="sent"&&a.jsxs(aa,{size:"sm",className:"me-2",children:[a.jsx(Fe,{variant:"success",size:"sm",onClick:G=>k(V.id,G),disabled:o[V.id]==="accept",title:"Accept Quote",children:o[V.id]==="accept"?a.jsx(Ot,{animation:"border",size:"sm"}):a.jsx("i",{className:"bi bi-check-circle"})}),a.jsx(Fe,{variant:"outline-danger",size:"sm",onClick:G=>E(V.id,G),disabled:o[V.id]==="decline",title:"Decline Quote",children:o[V.id]==="decline"?a.jsx(Ot,{animation:"border",size:"sm"}):a.jsx("i",{className:"bi bi-x-circle"})})]}),V.status==="accepted"&&a.jsxs(tt,{bg:"success",style:{fontSize:"0.7rem"},className:"me-2",children:[a.jsx("i",{className:"bi bi-check-circle me-1"}),"Accepted"]}),V.status==="declined"&&a.jsxs(tt,{bg:"danger",style:{fontSize:"0.7rem"},className:"me-2",children:[a.jsx("i",{className:"bi bi-x-circle me-1"}),"Declined"]}),(V.status==="draft"||!V.status)&&a.jsxs("span",{className:"text-muted me-2",style:{fontSize:"0.8rem"},children:[a.jsx("i",{className:"bi bi-pencil"})," Draft"]}),a.jsx(Fe,{variant:"outline-danger",size:"sm",onClick:G=>N(V.id,V.number,G),disabled:o[V.id]==="delete",title:"Delete Quote",children:o[V.id]==="delete"?a.jsx(Ot,{animation:"border",size:"sm"}):a.jsx("i",{className:"bi bi-trash"})})]})})]},V.id))})]}),a.jsx(Ife,{show:x,onClose:()=>b(!1),title:A?.title,subtitle:A?.subtitle})]})}function zfe(){const t=ms(),{id:e}=Vi(),{showNotification:n}=Os(),[s,r]=v.useState(null),[i,o]=DO(),[c,u]=v.useState(()=>i.get("tab")||"upload"),[f,m]=v.useState(1),[h,g]=v.useState({consumption:"",tariff:"",consumerType:"Residential",transformerSize:"",selectedProfileId:null,profileScaler:1,selectedSystem:null}),[x,b]=v.useState(!0),[A,_]=v.useState(""),j=$=>{if(console.log("Tab change requested:",$,"from current:",c),$!==c)if(c==="bom"){const H=new CustomEvent("attempt-tab-change",{detail:{newTab:$,actuallyChangeTab:G=>{console.log("Actually changing tab to:",G),u(G);const U=new URLSearchParams(i);U.set("tab",G),o(U)}},cancelable:!0}),V=window.dispatchEvent(H);if(console.log("Event dispatch result:",V),!V){console.log("Tab change prevented by event handler");return}}else{u($);const H=new URLSearchParams(i);H.set("tab",$),o(H)}},C=$=>{t(`/projects/${e}/quotes/${$}?from=quotes`)},k=v.useCallback(async()=>{b(!0);try{const $=await Re.get(`${Ce}/api/projects/${e}`);r({...$.data,updated_at:$.data.updated_at,updated_by:$.data.updated_by}),g(V=>({...V,consumerType:$.data.project_type||"Residential"}));const H=await Re.get(`${Ce}/api/projects/${e}/quick_design`);H.data&&g(V=>({...V,...H.data,selectedSystem:H.data.selectedSystemConfigJson}))}catch($){_("Failed to load project data. Please try again."),console.error("Data loading error:",$)}finally{b(!1)}},[e]);v.useEffect(()=>{k()},[k]),v.useEffect(()=>{const $=()=>k();return window.addEventListener("refresh-project",$),()=>window.removeEventListener("refresh-project",$)},[k]),v.useEffect(()=>{const $=i.get("tab");$&&$!==c&&u($)},[i,c]);const E=async $=>{try{await Re.put(`${Ce}/api/projects/${e}`,{tariff_id:$.tariff_id,custom_flat_rate:$.custom_flat_rate}),k(),n("Tariff updated successfully!","success")}catch(H){n("Failed to save tariff selection.","danger"),console.error(H)}},N=$=>{r(H=>({...H,tariff_id:$.tariff_id,custom_flat_rate:$.custom_flat_rate}))},L=async($,H)=>{try{const V={...h,...$};g(V),await Re.post(`${Ce}/api/projects/${e}/quick_design`,$),m(H)}catch(V){_("Failed to save data. "+(V.response?.data?.error||V.message)),console.error("Error saving data:",V)}},M=async $=>{try{await Re.put(`${Ce}/api/projects/${e}`,s),L($,2)}catch(H){_("Failed to save basic info. "+(H.response?.data?.error||H.message)),console.error("Error saving basic info:",H)}},T=$=>{const H={selectedProfileId:$.id,profileScaler:$.scaler};L(H,3)},O=$=>{L({selectedSystem:$,selectedSystemConfigJson:$},4)},I=$=>{m($)};return x?a.jsx("div",{className:"text-center p-5",children:a.jsx(Ot,{animation:"border"})}):A?a.jsx("div",{className:"text-center p-5",children:a.jsx(kt,{variant:"danger",children:A})}):s.design_type==="Quick"?a.jsxs("div",{className:"min-vh-100 py-4 py-md-5",style:{backgroundColor:"#f8f9fa"},children:[a.jsxs("div",{className:"project-dashboard-container",children:[" ",a.jsxs("div",{className:"mb-4 p-3 bg-white rounded-lg shadow-sm text-center",children:[" ",a.jsxs("h1",{className:"text-3xl font-bold text-gray-800 mb-1",children:[s.name," - Quick Design"]}),a.jsxs("p",{className:"text-sm text-gray-600",children:[a.jsx("strong",{children:"Client:"})," ",s.client_name," | ",a.jsx("strong",{children:"Location:"})," ",s.location]})]}),a.jsxs("div",{className:"progress mb-4 mx-auto",style:{height:"10px",maxWidth:"700px"},children:[" ",a.jsx("div",{className:"progress-bar bg-primary",role:"progressbar",style:{width:`${f/4*100}%`},"aria-valuenow":f,"aria-valuemin":1,"aria-valuemax":4,children:" "})]})]}),f===1&&a.jsx(Tfe,{projectId:e,savedData:h,onSubmit:M,currentTariffId:s.tariff_id,currentCustomRate:s.custom_flat_rate,onTariffChange:N,tariffDetails:s.tariff_details}),f===2&&a.jsx(Ofe,{projectId:e,consumerType:h.consumerType,basicInfo:h,savedData:h,onSelect:T,onBack:()=>I(1)}),f===3&&a.jsx(Pfe,{projectId:e,savedData:h,onSelect:O,onBack:()=>I(2)}),f===4&&a.jsx(Lfe,{projectId:e,basicInfo:h,selectedSystem:h.selectedSystem,clientName:s?.client_name,onBack:()=>I(3)})]}):a.jsxs("div",{className:"project-dashboard-container mt-5",children:[a.jsx("h2",{children:s.name}),a.jsxs("p",{children:[a.jsx("strong",{children:"Client:"})," ",s.client_name,a.jsx("br",{}),a.jsx("strong",{children:"Location:"})," ",s.location,a.jsx("br",{})]}),a.jsxs("ul",{className:"nav nav-tabs mt-4",children:[a.jsx("li",{className:"nav-item",children:a.jsx("button",{className:`nav-link ${c==="upload"?"active":""}`,onClick:()=>j("upload"),children:"Energy Upload"})}),a.jsx("li",{className:"nav-item",children:a.jsx("button",{className:`nav-link ${c==="analysis"?"active":""}`,onClick:()=>j("analysis"),children:"Energy Analysis"})}),a.jsx("li",{className:"nav-item",children:a.jsx("button",{className:`nav-link ${c==="design"?"active":""}`,onClick:()=>j("design"),children:"System Design"})}),a.jsx("li",{className:"nav-item",children:a.jsx("button",{className:`nav-link ${c==="bom"?"active":""}`,onClick:()=>j("bom"),children:"Bill of Materials"})}),a.jsx("li",{className:"nav-item",children:a.jsx("button",{className:`nav-link ${c==="quotes"?"active":""}`,onClick:()=>j("quotes"),children:"Quotes"})}),a.jsx("li",{className:"nav-item",children:a.jsx("button",{className:`nav-link ${c==="tariff"?"active":""}`,onClick:()=>j("tariff"),children:"Tariff"})}),a.jsx("li",{className:"nav-item",children:a.jsx("button",{className:`nav-link ${c==="finance"?"active":""}`,onClick:()=>j("finance"),children:"Financial Modeling"})}),a.jsx("li",{className:"nav-item",children:a.jsx("button",{className:`nav-link ${c==="report"?"active":""}`,onClick:()=>j("report"),children:"Reporting"})})]}),a.jsxs("div",{className:"tab-content mt-4",children:[c==="upload"&&a.jsx(Mse,{projectId:e}),c==="analysis"&&a.jsx(hie,{projectId:e}),c==="design"&&a.jsx(f5,{projectId:e}),c==="bom"&&a.jsx(Lue,{projectId:e,onNavigateToPrintBom:()=>j("printbom"),quoteContext:{docId:i.get("quoteDoc"),number:i.get("quoteNo"),fromVersion:i.get("fromVersion")}}),c==="printbom"&&a.jsx(Hg,{projectId:e}),c==="quotes"&&a.jsx(Vfe,{projectId:e,onOpenQuote:C}),c==="finance"&&a.jsx(q5,{projectId:e}),c==="tariff"&&a.jsxs("div",{children:[a.jsx(Z5,{tariff:s.tariff_details,customRate:s.custom_flat_rate}),a.jsx(Ux,{currentTariffId:s.tarrif_id,currentCustomRate:s.custom_flat_rate,onChange:E})]}),c==="optimize"&&a.jsx(X5,{projectId:e}),c==="report"&&a.jsx(Efe,{projectId:e,onNavigateToTab:j})]})]})}function $fe(){const{id:t}=Vi(),e=ms(),[n,s]=v.useState(""),[r,i]=v.useState(""),[o,c]=v.useState(""),[u,f]=v.useState({street:"",town:"",province:"",country:"South Africa"}),[m,h]=v.useState(""),[g,x]=v.useState(""),[b,A]=v.useState(!1),[_,j]=v.useState(""),[C,k]=v.useState("");v.useEffect(()=>{Re.get(`${Ce}/api/clients/${t}`).then(N=>{s(N.data.client_name),i(N.data.email),c(N.data.phone),f(N.data.address),h(N.data.company||""),x(N.data.vat_number||"")}).catch(N=>{console.error("Error loading client:",N),j("Failed to load client information.")})},[t]);const E=N=>{N.preventDefault(),A(!0),j(""),k("");const L={client_name:n,email:r,phone:o,address:u,company:m,vat_number:g};Re.put(`${Ce}/api/clients/${t}`,L).then(()=>{k("Client updated successfully!"),setTimeout(()=>e("/clients"),1500)}).catch(M=>{console.error("Error updating client:",M),j("Failed to update client: "+(M.response?.data?.error||M.message))}).finally(()=>A(!1))};return a.jsx("div",{className:"min-vh-100",style:{backgroundColor:"#f8f9fa"},children:a.jsx(rr,{fluid:!0,className:"py-4 py-md-5",children:a.jsx(nt,{className:"justify-content-center",children:a.jsx(ge,{lg:8,xl:6,children:a.jsxs(me,{className:"shadow-lg border-0 rounded-xl p-4 p-md-5",children:[a.jsxs("div",{className:"text-center mb-4",children:[a.jsx("div",{className:"bg-primary bg-opacity-10 rounded-circle p-3 d-inline-flex mb-3",children:a.jsx("i",{className:"bi bi-person-gear text-primary",style:{fontSize:"2rem"}})}),a.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-1",children:"Edit Client"}),a.jsx("p",{className:"text-muted",children:"Update client information"})]}),_&&a.jsx(kt,{variant:"danger",className:"mb-4",children:_}),C&&a.jsx(kt,{variant:"success",className:"mb-4",children:C}),a.jsxs(z,{onSubmit:E,children:[a.jsx(nt,{children:a.jsx(ge,{md:12,children:a.jsxs(z.Group,{className:"mb-4",children:[a.jsxs(z.Label,{className:"fw-semibold",children:[a.jsx("i",{className:"bi bi-person me-2"}),"Client Name"]}),a.jsx(z.Control,{type:"text",value:n,onChange:N=>s(N.target.value),placeholder:"Enter full client name",size:"lg",required:!0,className:"rounded-lg"})]})})}),a.jsxs(nt,{children:[a.jsx(ge,{md:6,children:a.jsxs(z.Group,{className:"mb-4",children:[a.jsxs(z.Label,{className:"fw-semibold",children:[a.jsx("i",{className:"bi bi-envelope me-2"}),"Email Address"]}),a.jsx(z.Control,{type:"email",value:r,onChange:N=>i(N.target.value),placeholder:"client@email.com",size:"lg",required:!0,className:"rounded-lg"})]})}),a.jsx(ge,{md:6,children:a.jsxs(z.Group,{className:"mb-4",children:[a.jsxs(z.Label,{className:"fw-semibold",children:[a.jsx("i",{className:"bi bi-telephone me-2"}),"Phone Number"]}),a.jsx(z.Control,{type:"text",value:o,onChange:N=>c(N.target.value),placeholder:"+27 12 345 6789",size:"lg",required:!0,className:"rounded-lg"})]})})]}),a.jsxs(nt,{children:[a.jsx(ge,{md:4,children:a.jsxs(z.Group,{className:"mb-4",children:[a.jsxs(z.Label,{className:"fw-semibold",children:[a.jsx("i",{className:"bi bi-geo-alt me-2"}),"Street"]}),a.jsx(z.Control,{type:"text",value:u?.street,onChange:N=>f({...u,street:N.target.value}),placeholder:"Enter street address",size:"md",className:"rounded-lg"})]})}),a.jsx(ge,{md:4,children:a.jsxs(z.Group,{className:"mb-4",children:[a.jsxs(z.Label,{className:"fw-semibold",children:[a.jsx("i",{className:"bi bi-geo-alt me-2"}),"Town"]}),a.jsx(z.Control,{type:"text",value:u?.town,onChange:N=>f({...u,town:N.target.value}),placeholder:"Enter town",size:"md",className:"rounded-lg"})]})}),a.jsx(ge,{md:4,children:a.jsxs(z.Group,{className:"mb-4",children:[a.jsxs(z.Label,{className:"fw-semibold",children:[a.jsx("i",{className:"bi bi-geo-alt me-2"}),"Province"]}),a.jsxs(z.Select,{value:u?.province,onChange:N=>f({...u,province:N.target.value}),size:"md",className:"rounded-lg",children:[a.jsx("option",{value:"",children:"Select Province"}),a.jsx("option",{value:"Gauteng",children:"Gauteng"}),a.jsx("option",{value:"North West",children:"North West"}),a.jsx("option",{value:"Northern Cape",children:"Northern Cape"}),a.jsx("option",{value:"Western Cape",children:"Western Cape"}),a.jsx("option",{value:"Eastern Cape",children:"Eastern Cape"}),a.jsx("option",{value:"Free State",children:"Free State"}),a.jsx("option",{value:"KwaZulu-Natal",children:"KwaZulu-Natal"}),a.jsx("option",{value:"Mpumalanga",children:"Mpumalanga"}),a.jsx("option",{value:"Limpopo",children:"Limpopo"})]})]})})]}),a.jsxs(nt,{children:[a.jsx(ge,{md:6,children:a.jsxs(z.Group,{className:"mb-4",children:[a.jsxs(z.Label,{className:"fw-semibold",children:[a.jsx("i",{className:"bi bi-building me-2"}),"Company"]}),a.jsx(z.Control,{type:"text",value:m,onChange:N=>h(N.target.value),placeholder:"Enter company name",size:"md",className:"rounded-lg"})]})}),a.jsx(ge,{md:6,children:a.jsxs(z.Group,{className:"mb-4",children:[a.jsxs(z.Label,{className:"fw-semibold",children:[a.jsx("i",{className:"bi bi-file-earmark-text me-2"}),"VAT Number"]}),a.jsx(z.Control,{type:"text",value:g,onChange:N=>x(N.target.value),placeholder:"Enter VAT number",size:"md",className:"rounded-lg"})]})})]}),a.jsxs("div",{className:"d-grid gap-2 mt-4",children:[a.jsx(Fe,{type:"submit",variant:"primary",size:"lg",disabled:b,className:"rounded-lg",children:b?a.jsxs(a.Fragment,{children:[a.jsx(Ot,{as:"span",animation:"border",size:"sm",className:"me-2"}),"Updating Client..."]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"bi bi-check-lg me-2"}),"Save Changes"]})}),a.jsxs(Fe,{variant:"outline-secondary",size:"lg",onClick:()=>e("/clients"),className:"rounded-lg",children:[a.jsx("i",{className:"bi bi-arrow-left me-2"}),"Back to Clients"]})]})]})]})})})})})}function Hfe(){const[t,e]=v.useState(!1),[n,s]=v.useState([]),[r,i]=v.useState(""),[o,c]=v.useState(""),[u,f]=v.useState(""),[m,h]=v.useState(""),[g,x]=v.useState({street:"",town:"",province:"",country:"South Africa"}),[b,A]=v.useState(""),[_,j]=v.useState(""),[C,k]=v.useState(!1),[E,N]=v.useState(""),[L,M]=v.useState({name:"",description:"",system_type:"grid",panel_kw:"0",inverter_kva:"0",battery_kwh:"0",location:"",latitude:"",longitude:"",project_value_excl_vat:"0",site_contact_person:"",site_phone:"0",design_type:"Detailed",project_type:"Commercial",tariff_id:null,custom_flat_rate:null}),T=ms();v.useEffect(()=>{O()},[]),v.useEffect(()=>{if(r&&r!=="new"){const V=n.find(G=>String(G.id)===String(r));if(V&&V.address){const{street:G,town:U,province:R}=V.address,P=[G,U,R].filter(Boolean).join(", ");M(Z=>({...Z,location:P}))}}},[r,n]),v.useEffect(()=>{if(r==="new"){const{street:V,town:G,province:U}=g;if(V||G||U){const R=[V,G,U].filter(Boolean).join(", ");M(P=>({...P,location:R}))}}},[g,r]);const O=()=>{Re.get(`${Ce}/api/clients`).then(V=>s(V.data)).catch(V=>{console.error("Error loading clients:",V),N("Failed to load clients.")})},I=V=>{M({...L,[V.target.name]:V.target.value})},$=V=>{M(G=>({...G,tariff_id:V.tariff_id,custom_flat_rate:V.custom_flat_rate}))},H=async V=>{if(V.preventDefault(),k(!0),N(""),!r){N("Please select a client."),k(!1);return}if(!L.name.trim()){N("Please enter a project name."),k(!1);return}if(!L.system_type){N("Please select a system type."),k(!1);return}if(!L.project_type){N("Please select a project type."),k(!1);return}let G=r;if(G==="new"){if(!o||!m){N("Please enter new client name and email."),k(!1);return}try{G=(await Re.post(`${Ce}/api/clients`,{client_name:o,email:m,phone:u,address:g,company:b,vat_number:_})).data.client_id,i(G),!L.location&&g.town&&g.province&&M(R=>({...R,location:`${g.street?g.street+", ":""}${g.town}, ${g.province}`}))}catch(U){console.error("Error creating client:",U),N("Failed to create new client: "+(U.response?.data?.error||U.message)),k(!1);return}}try{const U=localStorage.getItem("access_token"),P=(await Re.post(`${Ce}/api/projects`,{...L,latitude:parseFloat(L.latitude)||-25.9895,longitude:parseFloat(L.longitude)||28.1284,client_id:G},{headers:{Authorization:`Bearer ${U}`}})).data.project_id;if(!P){N("Project created but no project ID returned."),k(!1);return}e(!0),setTimeout(()=>{e(!1),T(`/projects/${P}?tab=upload`)},800)}catch(U){console.error("Error adding project:",U),N("Failed to add project: "+(U.response?.data?.error||U.message))}finally{k(!1)}};return a.jsxs("div",{className:"min-vh-100",style:{backgroundColor:"#f8f9fa"},children:[a.jsx(rr,{fluid:!0,className:"py-4 py-md-5",children:a.jsx(nt,{className:"justify-content-center",children:a.jsx(ge,{lg:10,xl:8,children:a.jsxs(me,{className:"shadow-lg border-0 rounded-xl p-4 p-md-5",children:[a.jsxs("div",{className:"text-center mb-5",children:[a.jsx("div",{className:"bg-primary bg-opacity-10 rounded-circle p-3 d-inline-flex mb-3",children:a.jsx("i",{className:"bi bi-plus-circle-fill text-primary",style:{fontSize:"2rem"}})}),a.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-1",children:"Create New Project"}),a.jsx("p",{className:"text-muted",children:"Set up a new solar project for your client"})]}),E&&a.jsx(kt,{variant:"danger",className:"mb-4",children:E}),a.jsxs(z,{onSubmit:H,children:[a.jsxs(me,{className:"border-light mb-4",children:[a.jsx(me.Header,{className:"bg-light border-0",children:a.jsxs("h5",{className:"mb-0 fw-semibold",children:[a.jsx("i",{className:"bi bi-person-fill me-2"}),"Client Information"]})}),a.jsx(me.Body,{className:"p-4",children:a.jsxs(nt,{children:[a.jsx(ge,{md:12,children:a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{className:"fw-semibold",children:"Select Client"}),a.jsxs(z.Select,{value:r,onChange:V=>i(V.target.value),required:!0,size:"lg",className:"rounded-md",children:[a.jsx("option",{value:"",children:"-- Choose Client --"}),n.map(V=>a.jsxs("option",{value:V.id,children:[V.client_name," ",V.address?.town?`(${V.address?.town})`:""]},V.id)),a.jsx("option",{value:"new",children:"+ Add New Client"})]})]})}),r==="new"&&a.jsxs(a.Fragment,{children:[a.jsx(ge,{md:12,children:a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{className:"fw-semibold",children:"Client Name"}),a.jsx(z.Control,{type:"text",value:o,onChange:V=>c(V.target.value),required:!0,size:"lg",className:"rounded-md",placeholder:"Enter client full name"})]})}),a.jsx(ge,{md:6,children:a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{className:"fw-semibold",children:"Client Phone"}),a.jsx(z.Control,{type:"text",value:u,onChange:V=>f(V.target.value),size:"md",className:"rounded-md",placeholder:"Enter client phone number"})]})}),a.jsx(ge,{md:6,children:a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{className:"fw-semibold",children:"Client Email"}),a.jsx(z.Control,{type:"email",value:m,onChange:V=>h(V.target.value),required:!0,size:"md",className:"rounded-md",placeholder:"client@email.com"})]})}),a.jsx(ge,{md:3,children:a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{className:"fw-semibold",children:"Client Street"}),a.jsx(z.Control,{type:"text",value:g.street,onChange:V=>x({...g,street:V.target.value}),size:"md",className:"rounded-md",placeholder:"11 Van Riebeeck Street"})]})}),a.jsx(ge,{md:3,children:a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{className:"fw-semibold",children:"Client Town"}),a.jsx(z.Control,{type:"text",value:g.town,onChange:V=>x({...g,town:V.target.value}),size:"md",className:"rounded-md",placeholder:"Potchefstroom"})]})}),a.jsx(ge,{md:3,children:a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{className:"fw-semibold",children:"Client Province"}),a.jsxs(z.Select,{value:g.province,onChange:V=>x({...g,province:V.target.value}),size:"md",className:"rounded-md",children:[a.jsx("option",{value:"",children:"Select Province"}),a.jsx("option",{value:"Gauteng",children:"Gauteng"}),a.jsx("option",{value:"North West",children:"North West"}),a.jsx("option",{value:"Northern Cape",children:"Northern Cape"}),a.jsx("option",{value:"Western Cape",children:"Western Cape"}),a.jsx("option",{value:"Eastern Cape",children:"Eastern Cape"}),a.jsx("option",{value:"Free State",children:"Free State"}),a.jsx("option",{value:"KwaZulu-Natal",children:"KwaZulu-Natal"}),a.jsx("option",{value:"Mpumalanga",children:"Mpumalanga"}),a.jsx("option",{value:"Limpopo",children:"Limpopo"})]})]})}),a.jsx(ge,{md:3,children:a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{className:"fw-semibold",children:"Client Country"}),a.jsx(z.Control,{type:"text",value:g.country,onChange:V=>x({...g,country:V.target.value}),size:"md",className:"rounded-md",placeholder:"South Africa"})]})}),a.jsx(ge,{md:6,children:a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{className:"fw-semibold",children:"Company"}),a.jsx(z.Control,{type:"text",value:b,onChange:V=>A(V.target.value),size:"md",className:"rounded-md",placeholder:"Enter company name"})]})}),a.jsx(ge,{md:6,children:a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{className:"fw-semibold",children:"VAT Number"}),a.jsx(z.Control,{type:"text",value:_,onChange:V=>j(V.target.value),size:"md",className:"rounded-md",placeholder:"Enter VAT number"})]})})]})]})})]}),a.jsxs(me,{className:"border-light mb-4",children:[a.jsx(me.Header,{className:"bg-light border-0",children:a.jsxs("h5",{className:"mb-0 fw-semibold",children:[a.jsx("i",{className:"bi bi-clipboard-data me-2"}),"Project Details"]})}),a.jsxs(me.Body,{className:"p-4",children:[a.jsxs(nt,{children:[a.jsx(ge,{md:12,children:a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{className:"fw-semibold",children:"Project Name"}),a.jsx(z.Control,{type:"text",name:"name",value:L.name,onChange:I,required:!0,size:"lg",className:"rounded-lg",placeholder:"Enter project name"})]})}),a.jsx(ge,{md:12,children:a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{className:"fw-semibold",children:"Location"}),a.jsx(z.Control,{type:"text",name:"location",value:L.location,onChange:I,size:"lg",className:"rounded-lg",placeholder:"5 Church Street, Potchefstroom, North West"})]})}),a.jsx(ge,{md:6,children:a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{className:"fw-semibold",children:"Latitude"}),a.jsx(z.Control,{type:"number",name:"latitude",value:L.latitude,onChange:I,step:"any",size:"lg",className:"rounded-lg",placeholder:"-25.9895"})]})}),a.jsx(ge,{md:6,children:a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{className:"fw-semibold",children:"Longitude"}),a.jsx(z.Control,{type:"number",name:"longitude",value:L.longitude,onChange:I,step:"any",size:"lg",className:"rounded-lg",placeholder:"28.1284"})]})}),a.jsx(ge,{md:12,children:a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{className:"fw-semibold",children:"Description"}),a.jsx(z.Control,{as:"textarea",rows:2,name:"description",value:L.description,onChange:I,className:"rounded-lg",placeholder:"Brief project description"})]})}),a.jsx(ge,{md:4,children:a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{className:"fw-semibold",children:"System Type"}),a.jsxs(z.Select,{name:"system_type",value:L.system_type,onChange:I,required:!0,size:"lg",className:"rounded-lg",children:[a.jsx("option",{value:"",children:"-- Choose Type --"}),a.jsx("option",{value:"grid",children:"Grid-Tied"}),a.jsx("option",{value:"hybrid",children:"Hybrid"}),a.jsx("option",{value:"off-grid",children:"Off-Grid"})]})]})}),a.jsx(ge,{md:4,children:a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{className:"fw-semibold",children:"Project Type"}),a.jsxs(z.Select,{name:"project_type",value:L.project_type,onChange:I,required:!0,size:"lg",className:"rounded-lg",children:[a.jsx("option",{value:"",children:"-- Choose Type --"}),a.jsx("option",{value:"Residential",children:"Residential"}),a.jsx("option",{value:"Commercial",children:"Commercial"})]})]})})]}),a.jsx("hr",{className:"my-4"}),a.jsxs(z.Group,{children:[a.jsxs(z.Label,{as:"h5",className:"fw-semibold mb-3",children:[a.jsx("i",{className:"bi bi-receipt-cutoff me-2"}),"Tariff Configuration"]}),a.jsx(Ux,{onChange:$})]})]})]}),a.jsxs("div",{className:"d-flex gap-3 mt-5",children:[a.jsx(Fe,{type:"submit",variant:"primary",size:"lg",disabled:C,className:"flex-fill rounded-lg",children:C?a.jsxs(a.Fragment,{children:[a.jsx(Ot,{as:"span",animation:"border",size:"sm",className:"me-2"}),"Creating Project..."]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"bi bi-check-lg me-2"}),"Create Project"]})}),a.jsxs(Fe,{variant:"outline-secondary",size:"lg",onClick:()=>T("/projects"),className:"flex-fill rounded-lg",children:[a.jsx("i",{className:"bi bi-arrow-left me-2"}),"Cancel"]})]})]})]})})})}),t&&a.jsx("div",{className:"toast-container position-fixed bottom-0 end-0 p-3",children:a.jsx("div",{className:"toast show text-bg-success rounded-lg shadow-lg",children:a.jsxs("div",{className:"toast-body d-flex align-items-center",children:[a.jsx("i",{className:"bi bi-check-circle-fill me-2"}),"Project created successfully!"]})})})]})}function Ufe(){const{id:t}=Vi(),e=ms(),[n,s]=v.useState(null),[r,i]=v.useState(!0),[o,c]=v.useState(!1),[u,f]=v.useState(""),[m,h]=v.useState("");v.useEffect(()=>{Re.get(`${Ce}/api/projects/${t}`).then(A=>{s(A.data),f("")}).catch(A=>{console.error("Error loading project:",A),f("Failed to load project: "+(A.response?.data?.error||A.message))}).finally(()=>i(!1))},[t]);const g=A=>{s({...n,[A.target.name]:A.target.value})},x=A=>{s(_=>({..._,tariff_id:A.tariff_id,custom_flat_rate:A.custom_flat_rate}))},b=A=>{A.preventDefault(),c(!0),f(""),h(""),Re.put(`${Ce}/api/projects/${t}`,n).then(()=>{h("Project updated successfully!"),setTimeout(()=>e("/projects"),1500)}).catch(_=>{console.error("Error updating project:",_),f("Failed to update project: "+(_.response?.data?.error||_.message))}).finally(()=>c(!1))};return r?a.jsx("div",{className:"min-vh-100 d-flex align-items-center justify-content-center",style:{backgroundColor:"#f8f9fa"},children:a.jsx(Ot,{animation:"border",className:"text-primary"})}):n?a.jsx("div",{className:"min-vh-100",style:{backgroundColor:"#f8f9fa"},children:a.jsx(rr,{fluid:!0,className:"py-4 py-md-5",children:a.jsx(nt,{className:"justify-content-center",children:a.jsx(ge,{lg:10,xl:8,children:a.jsxs(me,{className:"shadow-lg border-0 rounded-xl p-4 p-md-5",children:[a.jsxs("div",{className:"text-center mb-5",children:[a.jsx("div",{className:"bg-primary bg-opacity-10 rounded-circle p-3 d-inline-flex mb-3",children:a.jsx("i",{className:"bi bi-pencil-square text-primary",style:{fontSize:"2rem"}})}),a.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-1",children:"Edit Project"}),a.jsx("p",{className:"text-muted",children:"Update project details and configuration"})]}),u&&a.jsx(kt,{variant:"danger",className:"mb-4",children:u}),m&&a.jsx(kt,{variant:"success",className:"mb-4",children:m}),a.jsxs(z,{onSubmit:b,children:[a.jsxs(me,{className:"border-light mb-4",children:[a.jsx(me.Header,{className:"bg-light border-0",children:a.jsxs("h5",{className:"mb-0 fw-semibold",children:[a.jsx("i",{className:"bi bi-clipboard-data me-2"}),"Project Information"]})}),a.jsxs(me.Body,{className:"p-4",children:[a.jsxs(nt,{children:[a.jsx(ge,{md:12,children:a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{className:"fw-semibold",children:"Project Name"}),a.jsx(z.Control,{type:"text",name:"name",value:n.name||"",onChange:g,required:!0,size:"lg",className:"rounded-lg"})]})}),a.jsx(nt,{children:a.jsx(ge,{md:12,children:a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{className:"fw-semibold",children:"Location"}),a.jsx(z.Control,{type:"text",name:"location",value:n.location||"",onChange:g,size:"lg",className:"rounded-lg"})]})})}),a.jsx(ge,{md:6,children:a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{className:"fw-semibold",children:"Latitude"}),a.jsx(z.Control,{type:"number",name:"latitude",value:n.latitude||"",onChange:g,step:"any",size:"lg",className:"rounded-lg"})]})}),a.jsx(ge,{md:6,children:a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{className:"fw-semibold",children:"Longitude"}),a.jsx(z.Control,{type:"number",name:"longitude",value:n.longitude||"",onChange:g,step:"any",size:"lg",className:"rounded-lg"})]})}),a.jsx(ge,{md:6,children:a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{className:"fw-semibold",children:"Design Type"}),a.jsxs(z.Select,{name:"design_type",value:n.design_type||"",onChange:g,size:"lg",className:"rounded-lg",children:[a.jsx("option",{value:"",children:"-- Choose Type --"}),a.jsx("option",{value:"Quick",children:"Quick Design"}),a.jsx("option",{value:"Detailed",children:"Detailed Design"})]})]})}),a.jsx(ge,{md:6,children:a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{className:"fw-semibold",children:"Project Type"}),a.jsxs(z.Select,{name:"project_type",value:n.project_type||"",onChange:g,size:"lg",className:"rounded-lg",children:[a.jsx("option",{value:"",children:"-- Choose Type --"}),a.jsx("option",{value:"Residential",children:"Residential"}),a.jsx("option",{value:"Commercial",children:"Commercial"})]})]})}),a.jsx(ge,{md:12,children:a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{className:"fw-semibold",children:"Description"}),a.jsx(z.Control,{as:"textarea",rows:2,name:"description",value:n.description||"",onChange:g,className:"rounded-lg"})]})})]}),a.jsx("hr",{}),a.jsxs(z.Group,{children:[a.jsx(z.Label,{className:"fw-semibold",children:"Current Tariff"}),a.jsx(me,{bg:"light",text:"dark",className:"p-3 border",children:n.tariff_details?a.jsxs("div",{children:[a.jsxs("h5",{className:"mb-1",children:[n.tariff_details.name," ",a.jsxs("span",{className:"text-muted",children:["(",n.tariff_details.matrix_code,")"]})]}),a.jsxs("div",{className:"mb-2",children:[a.jsx(tt,{pill:!0,bg:"primary",className:"me-1",children:n.tariff_details.power_user_type}),a.jsx(tt,{pill:!0,bg:"info",text:"dark",children:n.tariff_details.structure})]}),a.jsxs(vn,{striped:!0,bordered:!0,size:"sm",className:"mb-0",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Charge Name"}),a.jsx("th",{children:"Rate"})]})}),a.jsx("tbody",{children:n.tariff_details.rates.slice(0,3).map((A,_)=>a.jsxs("tr",{children:[a.jsx("td",{children:A.charge_name}),a.jsxs("td",{children:[a.jsx("strong",{children:A.rate_value})," ",A.rate_unit]})]},_))})]}),n.tariff_details.rates.length>3&&a.jsxs("small",{className:"text-muted",children:["...and ",n.tariff_details.rates.length-3," more rates."]})]}):n.custom_flat_rate?a.jsxs("div",{children:[a.jsx("h5",{className:"mb-1",children:"Custom Flat Rate"}),a.jsxs(tt,{pill:!0,bg:"success",children:[n.custom_flat_rate," c/kWh"]})]}):a.jsx("p",{className:"mb-0 text-muted",children:"No tariff selected for this project."})})]})]})]}),a.jsxs(me,{className:"border-light mb-4",children:[a.jsx(me.Header,{children:a.jsxs("h5",{className:"mb-0 fw-semibold",children:[a.jsx("i",{className:"bi bi-receipt-cutoff me-2"}),"Tariff Configuration"]})}),a.jsx(me.Body,{className:"p-4",children:a.jsx(Ux,{onChange:x,currentTariffId:n.tariff_id,currentCustomRate:n.custom_flat_rate})})]}),a.jsxs("div",{className:"d-flex gap-3 mt-4",children:[a.jsx(Fe,{type:"submit",variant:"primary",size:"lg",disabled:o,className:"flex-fill rounded-lg",children:o?a.jsxs(a.Fragment,{children:[a.jsx(Ot,{as:"span",animation:"border",size:"sm",className:"me-2"}),"Updating..."]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"bi bi-check-lg me-2"}),"Save Changes"]})}),a.jsxs(Fe,{variant:"outline-secondary",size:"lg",onClick:()=>e("/projects"),className:"flex-fill rounded-lg",children:[a.jsx("i",{className:"bi bi-arrow-left me-2"}),"Cancel"]})]})]})]})})})})}):a.jsx("div",{className:"min-vh-100 d-flex align-items-center justify-content-center",style:{backgroundColor:"#f8f9fa"},children:a.jsx(kt,{variant:"danger",children:"Project not found"})})}const Wx={Panel:{name:"Panel",icon:"bi-grid-3x3-gap-fill",color:"warning"},panel:{name:"Panel",icon:"bi-grid-3x3-gap-fill",color:"warning"},Inverter:{name:"Inverter",icon:"bi-box-seam",color:"info"},inverter:{name:"Inverter",icon:"bi-box-seam",color:"info"},Battery:{name:"Battery",icon:"bi-battery-full",color:"success"},"Solar Geyser":{name:"Solar Geyser",icon:"bi-thermometer-sun",color:"warning"},"Inverter Aux":{name:"Inverter Aux",icon:"bi-hdd-stack-fill",color:"secondary"},Lights:{name:"Lights",icon:"bi-lightbulb-fill",color:"warning"},"Transport & Logistics":{name:"Transport & Logistics",icon:"bi-truck",color:"secondary"},Contactor:{name:"Contactor",icon:"bi-toggle-on",color:"primary"},Enclosure:{name:"Enclosure",icon:"bi-box",color:"secondary"},"Cable Management":{name:"Cable Management",icon:"bi-diagram-3-fill",color:"dark"},"Human Resources":{name:"Human Resources",icon:"bi-people-fill",color:"secondary"},Conductor:{name:"Conductor",icon:"bi-plug-fill",color:"dark"},VSD:{name:"VSD",icon:"bi-cpu-fill",color:"primary"},"Change Over Switch":{name:"Change Over Switch",icon:"bi-toggle2-off",color:"primary"},"HSEQ & Compliance":{name:"HSEQ & Compliance",icon:"bi-shield-check",color:"success"},"Aux Generator":{name:"Aux Generator",icon:"bi-lightning-charge-fill",color:"warning"},DB:{name:"DB",icon:"bi-collection-fill",color:"secondary"},"Monitoring & Control Equipment":{name:"Monitoring & Control Equipment",icon:"bi-speedometer2",color:"info"},"S&T":{name:"S&T",icon:"bi-tools",color:"secondary"},MPPT:{name:"MPPT",icon:"bi-cpu",color:"primary"},"Mounting System":{name:"Mounting System",icon:"bi-grid-1x2-fill",color:"secondary"},Monitoring:{name:"Monitoring",icon:"bi-display-fill",color:"info"},Auxiliaries:{name:"Auxiliaries",icon:"bi-gear-fill",color:"secondary"},Cable:{name:"Cable",icon:"bi-plug-fill",color:"dark"},Protection:{name:"Protection",icon:"bi-shield-slash-fill",color:"danger"},"Professional Services":{name:"Professional Services",icon:"bi-briefcase-fill",color:"secondary"},fuse:{name:"Fuses",icon:"bi-shield-slash-fill",color:"danger"},breaker:{name:"Circuit Breakers",icon:"bi-lightning-charge-fill",color:"danger"},isolator:{name:"Isolators",icon:"bi-plugin-fill",color:"secondary"},dc_cable:{name:"DC Cables",icon:"bi-plug-fill",color:"dark"},accessory:{name:"Accessories",icon:"bi-gear-fill",color:"secondary"}},CR={category:"Panel",component_type:"",brand:"",model:"",unit_cost:"",margin:"25",price:"",warranty_y:"",notes:""},NR={brand_name:"brand",description:"model",power_rating_w:"power_w",power_rating_kva:"rating_kva",usable_rating_kwh:"capacity_kwh"},mo={brand:"brand_name",model:"description",power_w:"power_rating_w",rating_kva:"power_rating_kva",capacity_kwh:"usable_rating_kwh"};function Wfe(){const{showNotification:t}=Os(),[e,n]=v.useState([]),[s,r]=v.useState(""),[i,o]=v.useState(!1),[c,u]=v.useState(null),[f,m]=v.useState(CR),[h,g]=v.useState(!1),[x,b]=v.useState(""),[A,_]=v.useState("list"),[j,C]=v.useState([]),[k,E]=v.useState([]),[N,L]=v.useState({}),[M,T]=v.useState(!0),[O,I]=v.useState(!0),[$,H]=v.useState(!0),[V,G]=v.useState(!1),[U,R]=v.useState({}),[P,Z]=v.useState({saving:!1,savedCount:null}),[ne,D]=v.useState(""),{user:B}=is(),se=B?.role==="admin",le=()=>{const Y=!V;G(Y),Y||(R({}),Z({saving:!1,savedCount:null}),D(""))},ae=v.useCallback((Y,pe)=>{const we=parseFloat(Y)||0,ze=parseFloat(pe)||0;return we*(1+ze)},[]),te=v.useCallback(Y=>((parseFloat(Y)||0)*100).toFixed(1),[]),X=v.useCallback(Y=>(parseFloat(Y)||0)/100,[]),de=v.useCallback((Y,pe,we)=>Y==="margin"?te(pe)+"%":Y==="price"?we.unit_cost!==void 0&&we.margin!==void 0?"R "+ae(we.unit_cost,we.margin).toFixed(2):pe?"R "+parseFloat(pe).toFixed(2):"":Y==="unit_cost"?pe?"R "+parseFloat(pe).toFixed(2):"":pe,[ae,te]);v.useEffect(()=>{T(!0),Promise.all([Re.get(`${Ce}/api/products/categories`),Re.get(`${Ce}/api/products/component-types`),Re.get(`${Ce}/api/products/field-metadata`)]).then(([Y,pe,we])=>{C(Y.data||[]),E(pe.data||[]),L(we.data||{}),T(!1)}).catch(Y=>{console.error("Failed to load product metadata",Y),b("Failed to load product metadata: "+(Y.message||"Unknown error")),T(!1)})},[]);const Ne=v.useCallback((Y,pe)=>{m(we=>{const ze={...we,[Y]:pe};if(Y==="unit_cost"||Y==="margin"){const ve=Y==="unit_cost"?pe:we.unit_cost,Le=X(Y==="margin"?pe:we.margin);ze.price=ae(ve,Le).toFixed(2)}return ze})},[ae,X]),Ke=v.useCallback((Y=!1)=>{Y&&I(!0);const pe=localStorage.getItem("access_token");return Re.get(`${Ce}/api/products`,{headers:{Authorization:`Bearer ${pe}`}}).then(we=>{n(we.data||[]),b(""),$&&H(!1)}).catch(()=>b("Failed to load products")).finally(()=>{Y&&I(!1)})},[$]);v.useEffect(()=>{Ke(!0)},[Ke]),v.useEffect(()=>{const Y=()=>Ke();return window.addEventListener("refresh-products",Y),()=>window.removeEventListener("refresh-products",Y)},[Ke]);const ce=v.useCallback(()=>{u(null),m(CR),o(!0)},[]),xe=v.useCallback(Y=>{u(Y.id);const pe={...Y,brand:Y.brand||Y.brand_name,model:Y.model||Y.description,power_w:Y.power_w||Y.power_rating_w,rating_kva:Y.rating_kva||Y.power_rating_kva,capacity_kwh:Y.capacity_kwh||Y.usable_rating_kwh,margin:Y.margin?te(Y.margin):""};m(pe),o(!0)},[te]),Te=v.useCallback(Y=>{confirm("Are you sure you want to delete this product?")&&(g(!0),Re.delete(`${Ce}/api/products/${Y}`).then(()=>{t("Product moved to recycle bin","info"),Ke()}).catch(pe=>{console.error(pe),t(pe.response?.data?.message||"Failed to delete product","danger")}).finally(()=>g(!1)))},[Ke,t]),Ie=()=>{g(!0);const Y=localStorage.getItem("access_token"),pe={...f,[mo.brand]:f.brand,[mo.model]:f.model,[mo.power_w]:f.power_w,[mo.rating_kva]:f.rating_kva,[mo.capacity_kwh]:f.capacity_kwh};if(pe.margin!==null&&pe.margin!==void 0&&pe.margin!==""&&(pe.margin=X(pe.margin)),typeof pe.properties=="string"&&pe.properties.trim())try{pe.properties=JSON.parse(pe.properties)}catch{b("The format of the Properties field is not valid JSON"),g(!1);return}else pe.properties||(pe.properties=null);(c?Re.put(`${Ce}/api/products/${c}`,pe,{headers:{Authorization:`Bearer ${Y}`}}):Re.post(`${Ce}/api/products`,pe,{headers:{Authorization:`Bearer ${Y}`}})).then(()=>{o(!1),Ke()}).catch(ze=>b("Failed to save product: "+(ze.response?.data?.details||ze.message))).finally(()=>g(!1))},Ue=v.useCallback(Y=>{if(!N||!Y.category)return["general"];const pe=["general"];return Object.entries(N).forEach(([we,ze])=>{we!=="general"&&ze.applies_to&&ze.applies_to.some(ve=>ve.toLowerCase()===Y.category.toLowerCase())&&pe.push(we)}),pe},[N]),Ze=v.useMemo(()=>{if(!e.length)return null;const Y={keys:["brand","model","category","component_type"],threshold:.3,ignoreLocation:!0,includeScore:!1,minMatchCharLength:2},pe=e.map(we=>({...we,categoryName:Wx[we.category]?.name||we.category,search_blob:[we.brand,we.model,we.category,we.component_type,we.power_w||"",we.rating_kva||"",we.capacity_kwh||"",we.description||"",we.notes||""].join(" ").toLowerCase()}));return new Oa(pe,Y)},[e]),[mt,gt]=v.useState("");v.useEffect(()=>{const Y=setTimeout(()=>gt(s),300);return()=>clearTimeout(Y)},[s]);const dt=v.useMemo(()=>!mt.trim()||!Ze?e:Ze.search(mt.toLowerCase()).map(Y=>Y.item),[e,mt,Ze]),Pe={category:160,component_type:200,brand_name:200,description:450,unit_cost:180,margin:120,price:160,warranty_y:100,last_updated:150,notes:150},q=v.useMemo(()=>["category","component_type","brand_name","description","unit_cost","margin","price","warranty_y","notes","last_updated"].filter(pe=>pe==="last_updated"||N?.general?.fields&&N.general.fields[pe]!==void 0),[N]),oe=Y=>NR[Y]||Y,Ae=Y=>({...Y,...U[Y.id]||{}}),He=(Y,pe,we)=>{R(ze=>{const ve=ze[Y]||{},Le={...ve,[pe]:we};if(pe==="unit_cost"||pe==="margin"){const ye=pe==="unit_cost"?we:Le.unit_cost??ve.unit_cost??e.find(he=>he.id===Y)?.unit_cost??"",Ee=pe==="margin"?typeof we=="string"?X(we):we:Le.margin??ve.margin??e.find(he=>he.id===Y)?.margin??"",Q=ae(ye,Ee);Le.price=Q.toFixed(2)}return{...ze,[Y]:Le}})},We=v.useMemo(()=>(N?.general?.fields,q.map(Y=>oe(Y))),[N,q]),Ve=Y=>{const pe=U[Y.id];if(!pe)return!1;for(const we of We){let ve=we in Y?Y[we]:Y[Object.keys(mo).find(ye=>mo[ye]===we)];ve===void 0&&(we==="brand"&&(ve=Y.brand_name),we==="model"&&(ve=Y.description));let Le=pe[we];if(we==="margin"){const ye=parseFloat(Y.margin??0),Ee=typeof Le=="string"?X(Le):parseFloat(Le??0);if(Math.abs((Ee||0)-(ye||0))>1e-6)return!0;continue}if(`${Le??""}`!=`${ve??""}`)return!0}return!1},ee=v.useMemo(()=>dt.filter(Ve).length,[dt,U]),De=()=>{Object.keys(U).length!==0&&window.confirm("Discard all changes?")&&(R({}),Z({saving:!1,savedCount:null}),D(""))},be=async()=>{D("");const Y=localStorage.getItem("access_token"),pe=dt.filter(Ve);if(!pe.length){Z({saving:!1,savedCount:0});return}Z({saving:!0,savedCount:null});try{await Promise.all(pe.map(we=>{const ze=U[we.id]||{},ve={...we,...ze},Le={};for(const ye of We){let Ee=ve[ye];ye==="margin"&&(typeof Ee=="string"&&(Ee=X(Ee)),typeof Ee=="number"&&Ee>1&&(Ee=Ee/100));const Q=mo[ye]||ye;Le[Q]=Ee}if((ve.unit_cost??"")!==""&&(ve.margin??"")!==""){const ye=typeof ve.margin=="string"?X(ve.margin):ve.margin??0;Le.price=ae(ve.unit_cost,ye).toFixed(2)}else ve.price!==void 0&&(Le.price=ve.price);if(typeof Le.properties=="string"&&Le.properties.trim())try{Le.properties=JSON.parse(Le.properties)}catch{}return Re.put(`${Ce}/api/products/${we.id}`,Le,{headers:{Authorization:`Bearer ${Y}`}})})),Z({saving:!1,savedCount:pe.length}),R({}),await Ke()}catch(we){Z({saving:!1,savedCount:null}),D(we?.response?.data?.details||we?.message||"Failed to save changes")}},J=(Y,pe)=>{if(pe==="last_updated")return a.jsxs("div",{className:"d-flex flex-column",children:[a.jsx("small",{className:"text-muted",children:Y.updated_at?new Date(Y.updated_at).toLocaleDateString("en-GB"):"-"}),Y.updated_by&&a.jsxs("small",{className:"text-muted",style:{fontSize:"0.7rem"},children:["by ",Y.updated_by]})]});const we=N?.general?.fields?.[pe],ze=oe(pe),ve=Ae(Y),Le={size:"sm",style:{fontSize:"0.85rem",paddingTop:4,paddingBottom:4}};if(!we)return a.jsx("span",{style:{fontSize:"0.85rem"},children:ve[ze]??""});if(we.readonly)return ze==="price"?a.jsx("span",{children:de("price",ve.price,ve)}):ze==="margin"?a.jsx("span",{children:de("margin",ve.margin,ve)}):ze==="unit_cost"?a.jsx("span",{children:de("unit_cost",ve.unit_cost,ve)}):a.jsx("span",{style:{fontSize:"0.85rem",color:"#6c757d"},children:ve[ze]??""});switch(we.type){case"select":return we.source==="categories"?a.jsxs(z.Select,{...Le,value:ve[ze]??"",onChange:ye=>He(Y.id,ze,ye.target.value),children:[a.jsx("option",{value:"",children:"Select..."}),j.map(ye=>a.jsx("option",{value:ye,children:ye},ye))]}):we.source==="component-types"?a.jsxs(z.Select,{...Le,value:ve[ze]??"",onChange:ye=>He(Y.id,ze,ye.target.value),children:[a.jsx("option",{value:"",children:"Select..."}),k.map(ye=>a.jsx("option",{value:ye,children:ye},ye))]}):a.jsxs(z.Select,{...Le,value:ve[ze]??"",onChange:ye=>He(Y.id,ze,ye.target.value),children:[a.jsx("option",{value:"",children:"Select..."}),we.options?.map(ye=>a.jsx("option",{value:ye,children:ye},ye))]});case"textarea":return a.jsx(z.Control,{as:"textarea",rows:1,...Le,value:ve[ze]??"",onChange:ye=>He(Y.id,ze,ye.target.value)});case"checkbox":return a.jsx("div",{className:"text-center",children:a.jsx(z.Check,{type:"checkbox",checked:!!ve[ze],onChange:ye=>He(Y.id,ze,ye.target.checked)})});default:{if(ze==="margin"){const ye=U[Y.id]?.margin!==void 0?U[Y.id].margin:ve.margin!==void 0?te(ve.margin):"";return a.jsxs(hn,{size:"sm",children:[a.jsx(z.Control,{type:"number",step:"0.1",min:"0",...Le,value:ye,onChange:Ee=>He(Y.id,"margin",Ee.target.value)}),a.jsx(hn.Text,{children:"%"})]})}if(ze==="unit_cost")return a.jsxs(hn,{size:"sm",children:[a.jsx(hn.Text,{children:"R"}),a.jsx(z.Control,{type:"number",step:"0.01",min:"0",...Le,value:ve.unit_cost??"",onChange:ye=>He(Y.id,"unit_cost",ye.target.value)})]});if(ze==="price"){const ye="R "+(ve.unit_cost!==void 0&&ve.margin!==void 0?ae(ve.unit_cost,typeof ve.margin=="string"?X(ve.margin):ve.margin||0).toFixed(2):parseFloat(ve.price||0).toFixed(2));return a.jsx("span",{style:{fontWeight:600},children:ye})}return a.jsx(z.Control,{type:we.type||"text",...Le,value:ve[ze]??"",onChange:ye=>He(Y.id,ze,ye.target.value)})}}},ie=(Y,pe)=>{const we=NR[Y]||Y;switch(pe.type){case"select":return a.jsxs(z.Select,{value:f[we]||"",onChange:ze=>Ne(we,ze.target.value),size:"lg",className:"rounded-lg",children:[a.jsxs("option",{value:"",children:["Select ",pe.label]}),pe.source==="categories"?j.map(ze=>a.jsx("option",{value:ze,children:ze},ze)):pe.source==="component-types"?k.map(ze=>a.jsx("option",{value:ze,children:ze},ze)):pe.options?.map(ze=>a.jsx("option",{value:ze,children:ze},ze))]});case"textarea":return a.jsx(z.Control,{as:"textarea",rows:3,value:f[we]||"",onChange:ze=>Ne(we,ze.target.value),className:"rounded-lg",readOnly:pe.readonly});case"checkbox":return a.jsx(z.Check,{type:"checkbox",checked:!!f[we],onChange:ze=>Ne(we,ze.target.checked)});default:return a.jsx(z.Control,{type:pe.type,value:f[we]||"",onChange:ze=>Ne(we,ze.target.value),size:"lg",className:"rounded-lg",readOnly:pe.readonly,style:pe.readonly?{backgroundColor:"#f8f9fa"}:{}})}},Be=Y=>{if(Y.category==="Panel"||Y.category==="panel"){const pe=Y.power_w||Y.power_rating_w;if(pe&&parseFloat(pe)>0)return a.jsxs(tt,{bg:"warning",text:"dark",className:"ms-2",children:[pe,"W"]})}else if(Y.category==="Inverter"||Y.category==="inverter"){const pe=Y.rating_kva||Y.power_rating_kva;if(pe&&parseFloat(pe)>0)return a.jsxs(tt,{bg:"info",className:"ms-2",children:[pe,"kVA"]})}else if(Y.category==="Battery"||Y.category==="battery"){const pe=Y.capacity_kwh||Y.usable_rating_kwh;if(pe&&parseFloat(pe)>0)return a.jsxs(tt,{bg:"success",className:"ms-2",children:[pe,"kWh"]})}return null},$e=()=>se?a.jsx(as,{to:"/recycle-bin",className:"btn btn-outline-secondary ms-2",title:"View deleted products",children:a.jsx("i",{className:"bi bi-trash"})}):null;return a.jsxs("div",{className:"min-vh-100",style:{backgroundColor:"#f8f9fa"},children:[a.jsx(rr,{fluid:!0,className:"py-4 py-md-5",children:a.jsx(nt,{children:a.jsx(ge,{lg:12,children:a.jsxs(me,{className:"shadow-lg border-0 rounded-xl p-4 p-md-5",children:[a.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-3xl font-bold text-gray-800 mb-1",children:[a.jsx("i",{className:"bi bi-box-seam me-3"}),"Products Catalogue"]}),a.jsx("p",{className:"text-muted mb-0",children:"Manage solar panels, inverters, and batteries"})]}),a.jsxs("div",{className:"d-flex align-items-center gap-3",children:[V&&a.jsxs("div",{className:"d-flex align-items-center gap-2",children:[a.jsx(Fe,{variant:"outline-secondary",size:"sm",onClick:De,disabled:!ee,title:"Discard all changes",children:"Discard"}),a.jsx(Fe,{variant:"primary",size:"sm",onClick:be,disabled:!ee||P.saving,title:"Save all changes",children:P.saving?"Saving…":`Save All (${ee})`})]}),$e(),a.jsx("div",{className:"mode-switch card shadow-sm border-0 px-3 py-2 d-flex align-items-center",children:a.jsx(z.Check,{type:"switch",id:"excel-mode-switch",label:V?"Excel Mode":"Normal Mode",checked:V,onChange:le})}),a.jsxs(Fe,{onClick:ce,className:"btn btn-primary shadow-sm",children:[a.jsx(yh,{className:"me-2"}),"Add Product"]})]})]}),a.jsx(me,{className:"shadow-sm border-0 rounded-xl p-3 mb-4",children:a.jsxs(nt,{className:"g-3 align-items-center",children:[a.jsx(ge,{md:8,children:a.jsxs(hn,{children:[a.jsx(hn.Text,{className:"bg-light border-end-0",children:a.jsx("i",{className:"bi bi-search"})}),a.jsx(z.Control,{value:s,onChange:Y=>r(Y.target.value),placeholder:"Search products by brand, model, category, or specs...",className:"border-start-0 rounded-end-lg"})]})}),!V&&a.jsx(ge,{md:4,className:"d-flex justify-content-end",children:a.jsxs(aa,{children:[a.jsx(Fe,{variant:A==="card"?"primary":"outline-secondary",onClick:()=>_("card"),title:"Card View",children:a.jsx("i",{className:"bi bi-grid-3x3-gap-fill"})}),a.jsx(Fe,{variant:A==="list"?"primary":"outline-secondary",onClick:()=>_("list"),title:"List View",children:a.jsx("i",{className:"bi bi-list-ul"})})]})})]})}),x&&a.jsx(kt,{variant:"danger",className:"mb-3",children:x}),ne&&a.jsx(kt,{variant:"danger",className:"mb-3",children:ne}),P.savedCount!==null&&a.jsxs(kt,{variant:"success",className:"mb-3",children:["Updated ",P.savedCount," product",P.savedCount===1?"":"s","."]}),M||O&&$?a.jsx(me,{className:"shadow-sm border-0 rounded-xl",children:a.jsxs(vn,{hover:!0,responsive:!0,className:"mb-0",size:"sm",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{style:{fontSize:"0.9rem"},children:[a.jsx("th",{className:"ps-3",children:"Category"}),a.jsx("th",{children:"Component Type"}),a.jsx("th",{children:"Brand"}),a.jsx("th",{children:"Model"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Last Updated"}),a.jsx("th",{className:"text-end pe-3",children:"Actions"})]})}),a.jsx("tbody",{children:a.jsx("tr",{children:a.jsx("td",{colSpan:"7",className:"text-center py-5",children:a.jsxs("div",{className:"loading-container",children:[a.jsx("div",{className:"loading-spinner"}),a.jsx("p",{className:"mt-3",children:"Loading products..."})]})})})})]})}):dt.length===0?a.jsxs("div",{className:"text-center py-5",children:[a.jsx("i",{className:"bi bi-box",style:{fontSize:"4rem",color:"#9ca3af"}}),a.jsx("h4",{className:"mt-3 text-gray-700",children:"No Products Found"}),a.jsx("p",{className:"text-muted mb-4",children:s?`No products match "${s}"`:"Add your first product to get started"}),!s&&a.jsxs(Fe,{onClick:ce,variant:"primary",children:[a.jsx(yh,{className:"me-2"}),"Add First Product"]})]}):V?a.jsx(me,{className:"shadow-sm border-0 rounded-xl",children:a.jsxs(vn,{hover:!0,responsive:!0,className:"mb-0",size:"sm",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{style:{fontSize:"0.85rem"},children:[q.map(Y=>a.jsx("th",{className:"py-2",style:{width:Pe[Y]||"auto",maxWidth:Pe[Y]||"none",whiteSpace:"normal",wordBreak:"break-word"},children:Y==="last_updated"?"Last Updated":N?.general?.fields?.[Y]?.label||Y},Y)),a.jsx("th",{className:"text-center py-2",title:"Changed?",children:"Status"})]})}),a.jsx("tbody",{children:dt.map(Y=>a.jsxs("tr",{style:{verticalAlign:"middle",fontSize:"0.85rem"},children:[q.map(pe=>a.jsx("td",{style:{width:Pe[pe]||100,maxWidth:Pe[pe]||"none",overflow:"hidden",textOverflow:"ellipsis"},children:J(Y,pe)},`${Y.id}-${pe}`)),a.jsx("td",{className:"text-center",children:Ve(Y)?a.jsx(tt,{bg:"warning",text:"dark",children:"Edited"}):a.jsx("span",{className:"text-muted",children:"—"})})]},Y.id))})]})}):A==="card"?M||O&&$?a.jsx("div",{className:"text-center py-5",children:a.jsxs("div",{className:"loading-container",children:[a.jsx("div",{className:"loading-spinner"}),a.jsx("p",{className:"mt-3",children:"Loading products..."})]})}):a.jsx(nt,{xs:1,md:2,lg:3,xl:4,className:"g-4",children:dt.map(Y=>a.jsx(ge,{children:a.jsx(me,{className:"h-100 shadow-sm border-light hover-shadow",children:a.jsxs(me.Body,{className:"p-4",children:[a.jsxs("div",{className:"d-flex align-items-center mb-3",children:[a.jsx("div",{className:`bg-${eu(Y.category)} bg-opacity-10 rounded-circle p-2 me-3`,children:a.jsx("i",{className:`bi ${kR(Y.category)} text-${eu(Y.category)}`})}),a.jsx(tt,{bg:eu(Y.category),className:"text-capitalize",children:DR(Y.category)})]}),a.jsx(me.Title,{className:"h5 mb-2",children:Y.brand}),a.jsxs(me.Subtitle,{className:"text-muted mb-3",children:[Y.model,Be(Y)]}),a.jsxs("div",{className:"mb-3",children:[a.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-1",children:[a.jsx("small",{className:"text-muted",children:"Component Type:"}),a.jsx("span",{children:Y.component_type||"—"})]}),Y.unit_cost&&a.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-1",children:[a.jsx("small",{className:"text-muted",children:"Unit Cost:"}),a.jsx(tt,{bg:"secondary",children:de("unit_cost",Y.unit_cost,Y)})]}),Y.margin&&a.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-1",children:[a.jsx("small",{className:"text-muted",children:"Margin:"}),a.jsx(tt,{bg:"info",children:de("margin",Y.margin,Y)})]}),a.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-1",children:[a.jsx("small",{className:"text-muted",children:"Price:"}),a.jsx(tt,{bg:"primary",children:de("price",Y.price,Y)})]})]}),a.jsxs("div",{className:"d-flex gap-2 mt-auto",children:[a.jsxs(Fe,{variant:"outline-primary",size:"sm",className:"flex-fill",onClick:()=>xe(Y),children:[a.jsx(oy,{className:"me-1"}),"Edit"]}),a.jsxs(Fe,{variant:"outline-danger",size:"sm",className:"flex-fill",onClick:()=>Te(Y.id),children:[a.jsx(xh,{className:"me-1"}),"Delete"]})]})]})})},Y.id))}):a.jsx(me,{className:"shadow-sm border-0 rounded-xl",children:a.jsxs(vn,{hover:!0,responsive:!0,className:"mb-0",size:"sm",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{style:{fontSize:"0.9rem"},children:[a.jsx("th",{className:"ps-3",style:{width:"10%"},children:"Category"}),a.jsx("th",{style:{width:"12%"},children:"Component Type"}),a.jsx("th",{style:{width:"10%"},children:"Brand"}),a.jsx("th",{style:{width:"25%"},children:"Model"}),a.jsx("th",{style:{width:"15%"},children:"Price"}),a.jsx("th",{style:{width:"15%"},children:"Last Updated"}),a.jsx("th",{className:"text-end pe-3",style:{width:"13%"},children:"Actions"})]})}),a.jsx("tbody",{children:dt.map(Y=>a.jsxs("tr",{style:{verticalAlign:"middle",fontSize:"0.85rem"},children:[a.jsx("td",{className:"ps-3 py-2",children:a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("div",{className:`bg-${eu(Y.category)} bg-opacity-10 rounded-circle p-1 me-2`,style:{width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx("i",{className:`bi ${kR(Y.category)} text-${eu(Y.category)}`,style:{fontSize:"0.7rem"}})}),a.jsx(tt,{bg:eu(Y.category),className:"text-capitalize",style:{fontSize:"0.7rem"},children:DR(Y.category)})]})}),a.jsx("td",{className:"py-2",children:a.jsx("span",{className:"text-muted",style:{fontSize:"0.8rem"},children:Y.component_type||"—"})}),a.jsx("td",{className:"fw-semibold py-2",style:{fontSize:"0.85rem"},children:Y.brand}),a.jsx("td",{className:"py-2",children:a.jsxs("div",{children:[a.jsx("span",{style:{fontSize:"0.9rem"},children:Y.model}),Be(Y)]})}),a.jsx("td",{className:"py-2",children:a.jsx("div",{className:"d-flex flex-column gap-1",children:Y.unit_cost&&Y.margin?a.jsxs(a.Fragment,{children:[a.jsx(tt,{bg:"primary",children:de("price",null,Y)}),a.jsxs("small",{className:"text-muted",children:["Cost: ",de("unit_cost",Y.unit_cost,Y)," | Margin: ",de("margin",Y.margin,Y)]})]}):Y.price?a.jsx(tt,{bg:"primary",children:de("price",Y.price,Y)}):a.jsx("span",{className:"text-muted",children:"No price set"})})}),a.jsx("td",{children:a.jsxs("div",{className:"d-flex flex-column",children:[a.jsx("small",{className:"text-muted",children:Y.updated_at?new Date(Y.updated_at).toLocaleDateString("en-GB"):"—"}),Y.updated_by&&a.jsxs("small",{className:"text-muted",style:{fontSize:"0.7rem"},children:["by ",Y.updated_by]})]})}),a.jsxs("td",{className:"text-end pe-3 py-2",children:[a.jsxs(Fe,{variant:"outline-primary",size:"sm",className:"me-1",style:{fontSize:"0.75rem",padding:"0.25rem 0.5rem"},onClick:()=>xe(Y),children:[a.jsx(oy,{className:"me-1"}),"Edit"]}),a.jsx(Fe,{variant:"outline-danger",size:"sm",style:{fontSize:"0.75rem",padding:"0.25rem 0.5rem"},onClick:()=>Te(Y.id),children:a.jsx(xh,{})})]})]},Y.id))})]})})]})})})}),a.jsxs(wt,{show:i,onHide:()=>o(!1),size:"lg",centered:!0,children:[a.jsx(wt.Header,{closeButton:!0,className:"bg-light",children:a.jsxs(wt.Title,{children:[a.jsx("i",{className:`bi ${c?"bi-pencil-fill":"bi-plus-lg"} me-2`}),c?"Edit Product":"Add Product"]})}),a.jsx(wt.Body,{style:{maxHeight:"70vh",overflowY:"auto"},className:"p-4",children:M?a.jsxs("div",{className:"text-center py-5",children:[a.jsx(Ot,{animation:"border",variant:"primary"}),a.jsx("p",{className:"mt-3",children:"Loading product fields..."})]}):a.jsx(z,{children:a.jsxs(na,{defaultActiveKey:"general",children:[N.general&&a.jsxs(na.Item,{eventKey:"general",children:[a.jsx(na.Header,{children:"General Information"}),a.jsx(na.Body,{children:a.jsxs(nt,{className:"g-3",children:[["category","component_type"].map(Y=>{const pe=N.general.fields[Y];return pe?a.jsx(ge,{md:6,children:a.jsxs(z.Group,{children:[a.jsxs(z.Label,{className:"fw-semibold",children:[pe.label,pe.readonly&&a.jsx("small",{className:"text-muted ms-2",children:"(Auto-calculated)"})]}),ie(Y,pe)]})},Y):null}),Object.entries(N.general.fields).filter(([Y])=>!["category","component_type","notes"].includes(Y)).map(([Y,pe])=>a.jsx(ge,{md:6,children:a.jsxs(z.Group,{children:[a.jsxs(z.Label,{className:"fw-semibold",children:[pe.label,pe.readonly&&a.jsx("small",{className:"text-muted ms-2",children:"(Auto-calculated)"})]}),ie(Y,pe)]})},Y)),N.general.fields.notes&&a.jsx(ge,{md:12,children:a.jsxs(z.Group,{children:[a.jsx(z.Label,{className:"fw-semibold",children:N.general.fields.notes.label}),ie("notes",N.general.fields.notes)]})})]})})]}),Ue(f).filter(Y=>Y!=="general").sort().map(Y=>{const pe=N[Y];return a.jsxs(na.Item,{eventKey:Y,children:[a.jsx(na.Header,{children:pe.title}),a.jsx(na.Body,{children:a.jsxs(nt,{className:"g-3",children:[Y==="specs"&&f.category==="Panel"&&a.jsx(ge,{md:6,children:a.jsxs(z.Group,{children:[a.jsx(z.Label,{className:"fw-semibold",children:"Power (W)"}),a.jsx(z.Control,{type:"number",value:f.power_w||"",onChange:we=>Ne("power_w",we.target.value),className:"rounded",placeholder:"e.g., 400"})]})}),Y==="specs"&&f.category==="Inverter"&&a.jsx(ge,{md:6,children:a.jsxs(z.Group,{children:[a.jsx(z.Label,{className:"fw-semibold",children:"Rating (kVA)"}),a.jsx(z.Control,{type:"number",value:f.rating_kva||"",onChange:we=>Ne("rating_kva",we.target.value),className:"rounded",placeholder:"e.g., 5"})]})}),Y==="specs"&&f.category==="Battery"&&a.jsx(ge,{md:6,children:a.jsxs(z.Group,{children:[a.jsx(z.Label,{className:"fw-semibold",children:"Capacity (kWh)"}),a.jsx(z.Control,{type:"number",value:f.capacity_kwh||"",onChange:we=>Ne("capacity_kwh",we.target.value),className:"rounded",placeholder:"e.g., 10"})]})}),Object.entries(pe.fields).map(([we,ze])=>a.jsx(ge,{md:6,children:a.jsxs(z.Group,{children:[a.jsxs(z.Label,{className:"fw-semibold",children:[ze.label,ze.readonly&&a.jsx("small",{className:"text-muted ms-2",children:"(Auto-calculated)"})]}),ie(we,ze)]})},we))]})})]},Y)})]})})}),a.jsxs(wt.Footer,{className:"bg-light border-top sticky-bottom",children:[a.jsx(Fe,{variant:"outline-secondary",onClick:()=>o(!1),size:"lg",children:"Cancel"}),a.jsx(Fe,{variant:"primary",onClick:Ie,disabled:h||M,size:"lg",children:h?a.jsxs(a.Fragment,{children:[a.jsx(Ot,{as:"span",animation:"border",size:"sm",className:"me-2"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"bi bi-check-lg me-2"}),"Save Product"]})})]})]})]})}const kR=t=>Wx[t]?.icon||"bi-gear-fill",eu=t=>Wx[t]?.color||"secondary",DR=t=>Wx[t]?.name||t,T_={panel:{name:"Panels",icon:"bi-grid-3x3-gap-fill",color:"warning"},inverter:{name:"Inverters",icon:"bi-box-seam",color:"info"},battery:{name:"Batteries",icon:"bi-battery-full",color:"success"},fuse:{name:"Fuses",icon:"bi-shield-slash-fill",color:"danger"},breaker:{name:"Circuit Breakers",icon:"bi-lightning-charge-fill",color:"danger"},isolator:{name:"Isolators",icon:"bi-plugin-fill",color:"secondary"},inverter_aux:{name:"Inverter Aux",icon:"bi-hdd-stack-fill",color:"secondary"},dc_cable:{name:"DC Cables",icon:"bi-plug-fill",color:"dark"},accessory:{name:"Accessories",icon:"bi-gear-fill",color:"secondary"}},Yfe=({category:t,products:e,searchFilter:n,onSearchChange:s,onAddComponent:r,categoryMeta:i,viewMode:o})=>{const c=i,u=e.filter(f=>{if(f.category!==t)return!1;if(!n)return!0;const m=`${f.brand||""} ${f.model||""} ${f.power_w||""} ${f.rating_kva||""} ${f.capacity_kwh||""}`.toLowerCase();return n.toLowerCase().split(/\s+/).filter(g=>g.trim()).every(g=>m.includes(g))});return a.jsxs(a.Fragment,{children:[a.jsxs("h4",{className:"text-xl font-semibold text-gray-700 mt-4 mb-2 ps-1 d-flex justify-content-between align-items-center",children:[a.jsxs("span",{children:[a.jsx("i",{className:`bi ${c.icon} me-2`}),c.name||t]}),a.jsx(z.Control,{size:"sm",style:{width:"200px"},placeholder:`Search ${c.name}...`,value:n,onChange:f=>s(t,f.target.value)})]}),a.jsx("div",{style:{maxHeight:"300px",overflowY:"auto",padding:"0.5rem"},children:u.length>0?o==="card"?a.jsx(nt,{xs:1,lg:2,xl:3,className:"g-3",children:u.map(f=>a.jsx(ge,{children:a.jsx(me,{className:"h-100 shadow-sm border-light",children:a.jsxs(me.Body,{className:"p-3",children:[a.jsx(tt,{bg:c.color,className:"text-capitalize mb-2",children:f.category.replace("_"," ")}),a.jsxs(me.Title,{className:"text-md font-bold text-gray-800",children:[f.brand," ",f.model]}),a.jsxs(me.Text,{className:"text-xs text-muted mb-2",children:[t==="panel"&&`${f.power_w}W`,t==="inverter"&&`${f.rating_kva}kVA`,t==="battery"&&`${f.capacity_kwh}kWh`]}),a.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[a.jsxs("span",{className:"text-sm font-semibold text-primary",children:["R",f.price?.toLocaleString()]}),a.jsxs(Fe,{variant:"outline-primary",size:"sm",onClick:()=>r(f),children:[a.jsx("i",{className:"bi bi-plus-lg me-1"})," Add"]})]})]})})},f.id))}):a.jsxs(vn,{hover:!0,responsive:!0,className:"mb-2 table-sm",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Brand"}),a.jsx("th",{children:"Model"}),a.jsx("th",{className:"text-center",children:"Specifications"}),a.jsx("th",{className:"text-end",children:"Price"}),a.jsx("th",{className:"text-end",children:"Action"})]})}),a.jsx("tbody",{children:u.map(f=>a.jsxs("tr",{style:{verticalAlign:"middle"},children:[a.jsx("td",{className:"fw-semibold",children:f.brand}),a.jsx("td",{children:f.model}),a.jsxs("td",{className:"text-center",children:[t==="panel"&&f.power_w&&a.jsxs(tt,{bg:"warning",text:"dark",children:[f.power_w,"W"]}),t==="inverter"&&f.rating_kva&&a.jsxs(tt,{bg:"info",children:[f.rating_kva,"kVA"]}),t==="battery"&&f.capacity_kwh&&a.jsxs(tt,{bg:"success",children:[f.capacity_kwh,"kWh"]})]}),a.jsx("td",{className:"text-end",children:a.jsxs("span",{className:"text-sm font-semibold text-primary",children:["R",f.price?.toLocaleString()]})}),a.jsx("td",{className:"text-end",children:a.jsxs(Fe,{variant:"outline-primary",size:"sm",onClick:()=>r(f),children:[a.jsx("i",{className:"bi bi-plus-lg me-1"})," Add"]})})]},f.id))})]}):a.jsxs("p",{className:"text-muted small",children:["No ",t," products found matching your search."]})})]})};function qfe(){const[t,e]=v.useState([]),[n,s]=v.useState(!0),[r,i]=v.useState(""),[o,c]=v.useState(""),[u,f]=v.useState(""),[m,h]=v.useState("Hybrid"),[g,x]=v.useState(""),[b,A]=v.useState([]),[_,j]=v.useState(!1),[C,k]=v.useState(""),[E,N]=v.useState(""),[L,M]=v.useState([]),[T,O]=v.useState(!0),[I,$]=v.useState(null),[H,V]=v.useState({}),[G,U]=v.useState(""),[R,P]=v.useState("list");v.useEffect(()=>{D(),B()},[]);const Z=(Pe="")=>Pe.toString().toLowerCase().replace(/&/g," and ").replace(/[^\w\s]/g,"").trim().replace(/\s+/g,"_"),ne=Pe=>({name:T_[Pe]?.name||Pe.replace(/_/g," ").replace(/\b\w/g,q=>q.toUpperCase()),icon:T_[Pe]?.icon||"bi-box",color:T_[Pe]?.color||"secondary"}),D=()=>{Re.get(`${Ce}/api/products`).then(Pe=>{const q=Pe.data.map(oe=>({...oe,category:Z(oe.category)}));e(q)}).catch(Pe=>{console.error("Error fetching products:",Pe),i("Failed to load products. The builder cannot be used.")}).finally(()=>s(!1))},B=()=>{O(!0),Re.get(`${Ce}/api/system_templates`).then(Pe=>M(Pe.data)).catch(Pe=>console.error("Error fetching templates:",Pe)).finally(()=>O(!1))};v.useEffect(()=>{const Pe=()=>D();return window.addEventListener("refresh-products",Pe),()=>window.removeEventListener("refresh-products",Pe)},[]);const se=Pe=>{if(!G)return!0;const q=`${Pe.brand||""} ${Pe.model||""} ${Pe.category||""} ${Pe.power_w||""} ${Pe.rating_kva||""} ${Pe.capacity_kwh||""}`.toLowerCase();return G.toLowerCase().split(/\s+/).filter(Ae=>Ae.trim()).every(Ae=>q.includes(Ae))},le=v.useMemo(()=>G?t.filter(se):t,[t,G]),{totalCost:ae,totalPanelKw:te,totalInverterKva:X,totalBatteryKwh:de}=v.useMemo(()=>{let Pe=parseFloat(g)||0,q=0,oe=0,Ae=0;return b.forEach(He=>{const We=Number(He.quantity)||0;Pe+=(He.product.price||0)*We,He.product.category==="panel"&&(q+=(He.product.power_w||0)*We/1e3),He.product.category==="inverter"&&(oe+=(He.product.rating_kva||0)*We),He.product.category==="battery"&&(Ae+=(He.product.capacity_kwh||0)*We)}),{totalCost:Pe,totalPanelKw:q.toFixed(2),totalInverterKva:oe.toFixed(2),totalBatteryKwh:Ae.toFixed(2)}},[b,g]),Ne=Pe=>{b.find(q=>q.product.id===Pe.id)||A([...b,{product:Pe,quantity:1}])},Ke=Pe=>A(b.filter(q=>q.product.id!==Pe)),ce=(Pe,q)=>{A(b.map(oe=>oe.product.id===Pe?{...oe,quantity:q}:oe))},xe=(Pe,q)=>{const oe=Math.max(1,parseInt(q||1,10));A(b.map(Ae=>Ae.product.id===Pe?{...Ae,quantity:oe}:Ae))},Te=()=>{c(""),f(""),h("Hybrid"),x(""),A([]),k(""),N(""),$(null)},Ie=()=>{if(!o.trim()||b.length===0){N("System Name and at least one component are required.");return}j(!0),N(""),k("");const Pe={name:o,description:u,system_type:m,extras_cost:parseFloat(g)||0,components:b.map(oe=>({product_id:oe.product.id,quantity:Math.max(1,Number(oe.quantity)||1)}))};(I?Re.put(`${Ce}/api/system_templates/${I.id}`,Pe):Re.post(`${Ce}/api/system_templates`,Pe)).then(oe=>{k(`System "${o}" ${I?"updated":"saved"} successfully!`),Te(),B()}).catch(oe=>{N(oe.response?.data?.error||"An error occurred.")}).finally(()=>j(!1))},Ue=Pe=>{$(Pe),c(Pe.name),f(Pe.description),h(Pe.system_type),x(Pe.extras_cost!==void 0?Pe.extras_cost.toString():"");const q=Pe.components.map(oe=>({product:t.find(He=>He.id===oe.product_id),quantity:oe.quantity})).filter(oe=>oe.product);A(q)},Ze=Pe=>{$(null),c(Pe.name+" (Copy)"),f(Pe.description),h(Pe.system_type),x(Pe.extras_cost!==void 0?Pe.extras_cost.toString():"");const q=Pe.components.map(oe=>({product:t.find(He=>He.id===oe.product_id),quantity:oe.quantity})).filter(oe=>oe.product);A(q)},mt=Pe=>{window.confirm("Are you sure you want to delete this system template?")&&Re.delete(`${Ce}/api/system_templates/${Pe}`).then(()=>{alert("Template deleted successfully!"),B()}).catch(q=>alert("Failed to delete template: "+q.response?.data?.error))},gt=(Pe,q)=>{V(oe=>({...oe,[Pe]:q}))};if(n)return a.jsx("div",{className:"d-flex justify-content-center mt-5",children:a.jsx(Ot,{animation:"border"})});if(r)return a.jsx(rr,{className:"mt-4",children:a.jsx(kt,{variant:"danger",children:r})});const dt=Array.from(new Set(le.map(Pe=>Pe.category))).sort();return a.jsx("div",{className:"min-vh-100",style:{backgroundColor:"#f8f9fa"},children:a.jsx(rr,{fluid:!0,className:"py-4 py-md-5",children:a.jsxs(nt,{children:[a.jsx(ge,{lg:7,xl:8,children:a.jsxs(me,{className:"shadow-lg border-0 rounded-xl p-4 p-md-5",children:[a.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-1",children:"System Template Builder"}),a.jsx("p",{className:"text-muted mb-4",children:"Create new system kits for the Quick Design tool."}),a.jsxs(z,{children:[a.jsxs(nt,{children:[a.jsx(ge,{md:6,children:a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{children:"System Name"}),a.jsx(z.Control,{type:"text",value:o,onChange:Pe=>c(Pe.target.value),placeholder:"e.g., Commercial 50kW Hybrid"})]})}),a.jsx(ge,{md:6,children:a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{children:"System Type"}),a.jsxs(z.Select,{value:m,onChange:Pe=>h(Pe.target.value),children:[a.jsx("option",{value:"hybrid",children:"Hybrid"}),a.jsx("option",{value:"grid",children:"Grid-Tied"}),a.jsx("option",{value:"off-grid",children:"Off-Grid"})]})]})})]}),a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{children:"Description"}),a.jsx(z.Control,{as:"textarea",rows:2,value:u,onChange:Pe=>f(Pe.target.value),placeholder:"A brief description of the system's purpose or ideal use case."})]})]}),a.jsx("hr",{className:"my-4"}),a.jsx(me,{className:"shadow-sm border-0 rounded-xl p-3 mb-4",children:a.jsxs(nt,{className:"g-3 align-items-center",children:[a.jsx(ge,{md:8,children:a.jsxs(hn,{children:[a.jsx(hn.Text,{className:"bg-light border-end-0",children:a.jsx("i",{className:"bi bi-search"})}),a.jsx(z.Control,{value:G,onChange:Pe=>U(Pe.target.value),placeholder:"Search all products across categories...",className:"border-start-0 rounded-end-lg"})]})}),a.jsx(ge,{md:4,className:"d-flex justify-content-end",children:a.jsxs(aa,{children:[a.jsx(Fe,{variant:R==="card"?"primary":"outline-secondary",onClick:()=>P("card"),title:"Card View",children:a.jsx("i",{className:"bi bi-grid-3x3-gap-fill"})}),a.jsx(Fe,{variant:R==="list"?"primary":"outline-secondary",onClick:()=>P("list"),title:"List View",children:a.jsx("i",{className:"bi bi-list-ul"})})]})})]})}),dt.map(Pe=>a.jsx(Yfe,{category:Pe,products:le,categoryMeta:ne(Pe),searchFilter:H[Pe]||"",onSearchChange:gt,onAddComponent:Ne,viewMode:R},Pe))]})}),a.jsx(ge,{lg:5,xl:4,children:a.jsxs("div",{className:"sticky-top",style:{top:"88px",height:"calc(100vh - 120px)",overflowY:"auto"},children:[a.jsxs(me,{className:"shadow-lg border-0 rounded-xl mb-4",children:[a.jsx(me.Header,{className:"bg-dark text-white rounded-top-xl py-3",children:a.jsxs("h3",{className:"text-xl font-semibold mb-0",children:[a.jsx("i",{className:"bi bi-card-checklist me-2"}),"System Summary"]})}),a.jsxs(me.Body,{className:"p-4",children:[b.length===0?a.jsx("p",{className:"text-muted text-center py-4",children:"Add products from the left to build your system."}):b.map(Pe=>a.jsxs("div",{className:"d-flex align-items-center mb-3",children:[a.jsxs("div",{className:"flex-grow-1",children:[a.jsxs("p",{className:"mb-0 fw-bold text-sm text-gray-800",children:[Pe.product.brand," ",Pe.product.model]}),a.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[a.jsxs("p",{className:"mb-0 text-xs text-muted",children:["R",Pe.product.price?.toLocaleString()," ea."]}),a.jsxs(tt,{bg:"secondary",className:"ms-2",children:["R",(Pe.product.price*(Number(Pe.quantity)||0)).toLocaleString()]})]})]}),a.jsxs(hn,{style:{width:"120px"},className:"ms-2",children:[a.jsx(hn.Text,{className:"small",children:"Qty"}),a.jsx(z.Control,{type:"number",size:"sm",value:Pe.quantity,onChange:q=>ce(Pe.product.id,q.target.value),onBlur:q=>xe(Pe.product.id,q.target.value),min:"0"})]}),a.jsx(Fe,{variant:"link",className:"text-danger p-0 ms-2",onClick:()=>Ke(Pe.product.id),children:a.jsx("i",{className:"bi bi-trash fs-5"})})]},Pe.product.id)),a.jsx("hr",{}),a.jsxs(z.Group,{children:[a.jsx(z.Label,{className:"text-sm font-medium",children:"Extras & Labor Cost"}),a.jsxs(hn,{children:[a.jsx(hn.Text,{children:"R"}),a.jsx(z.Control,{type:"number",value:g,onChange:Pe=>x(Pe.target.value),placeholder:"e.g., 50000"})]})]}),a.jsxs("div",{className:"mt-4 p-3 bg-light rounded-lg",children:[a.jsx("h5",{className:"font-semibold text-md mb-3",children:"Totals"}),a.jsxs("div",{className:"d-flex justify-content-between text-sm mb-2",children:[a.jsx("span",{children:"PV Power:"})," ",a.jsxs(tt,{pill:!0,bg:"warning",text:"dark",children:[te," kWp"]})]}),a.jsxs("div",{className:"d-flex justify-content-between text-sm mb-2",children:[a.jsx("span",{children:"Inverter Power:"})," ",a.jsxs(tt,{pill:!0,bg:"info",children:[X," kVA"]})]}),a.jsxs("div",{className:"d-flex justify-content-between text-sm mb-3",children:[a.jsx("span",{children:"Battery Capacity:"})," ",a.jsxs(tt,{pill:!0,bg:"success",children:[de," kWh"]})]}),a.jsxs("div",{className:"d-flex justify-content-between font-bold text-lg border-top pt-3",children:[a.jsx("span",{children:"Total Cost:"}),a.jsxs("span",{className:"text-primary",children:["R",ae.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]}),a.jsxs("div",{className:"d-grid gap-2 mt-4",children:[a.jsx(Fe,{variant:"primary",size:"lg",onClick:Ie,disabled:_,children:_?a.jsxs(a.Fragment,{children:[a.jsx(Ot,{as:"span",animation:"border",size:"sm"})," Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"bi bi-save-fill me-2"}),"Save System"]})}),a.jsx(Fe,{variant:"outline-secondary",onClick:Te,children:"Clear"})]}),C&&a.jsx(kt,{variant:"success",className:"mt-3",children:C}),E&&a.jsx(kt,{variant:"danger",className:"mt-3",children:E})]})]}),a.jsxs(me,{className:"shadow-lg border-0 rounded-xl",children:[a.jsx(me.Header,{className:"bg-secondary text-white rounded-top-xl py-3",children:a.jsxs("h3",{className:"text-xl font-semibold mb-0",children:[a.jsx("i",{className:"bi bi-collection-fill me-2"}),"Existing Systems"]})}),a.jsx(Ll,{variant:"flush",children:T?a.jsx(Ll.Item,{className:"text-center p-3",children:a.jsx(Ot,{size:"sm"})}):L.map(Pe=>a.jsxs(Ll.Item,{className:"d-flex justify-content-between align-items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"fw-bold mb-0",children:Pe.name}),a.jsxs("small",{className:"text-muted",children:[Pe.panel_kw,"kWp | ",Pe.inverter_kva,"kVA | ",Pe.battery_kwh,"kWh"]})]}),a.jsxs(rj,{direction:"horizontal",gap:2,children:[a.jsx(Fe,{variant:"outline-primary",size:"sm",onClick:()=>Ue(Pe),children:a.jsx("i",{className:"bi bi-pencil-fill"})}),a.jsx(Fe,{variant:"outline-primary",size:"sm",onClick:()=>Ze(Pe),children:a.jsx("i",{className:"bi bi-copy"})}),a.jsx(Fe,{variant:"outline-danger",size:"sm",onClick:()=>mt(Pe.id),children:a.jsx("i",{className:"bi bi-trash-fill"})})]})]},Pe.id))})]})]})})]})})})}zs.register(Yo,qo,$i,fa,bx,Uo,Wo,Ho,A4,jS);const po=(t,e=0)=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR",maximumFractionDigits:e}).format(t||0),Gfe=({title:t,selectedDate:e,setSelectedDate:n,minDate:s,maxDate:r})=>a.jsxs("div",{className:"chart-header",children:[a.jsx("h3",{children:t}),a.jsx("div",{className:"no-print date-picker-wrapper",children:a.jsx(Xl,{selected:e,onChange:i=>n(i),dateFormat:"MMM d, yyyy",className:"form-control form-control-sm",popperPlacement:"bottom-end",minDate:s,maxDate:r})})]});function Kfe(){const{id:t}=Vi(),e=ms(),[n,s]=v.useState(null),[r,i]=v.useState(!0),[o,c]=v.useState(""),[u,f]=v.useState(null),[m,h]=v.useState(null),g=n?.simulation?.timestamps??[],x=g.length?new Date(g[0]):new Date,b=g.length?new Date(g[g.length-1]):new Date,A=v.useMemo(()=>n?{projectDescription:n.project?.description||"110kW Sigen Energy, 101.7kW PV",projectNr:n.project?.id||`250711-${t}`,proposalDate:n.project?.date?new Date(n.project.date).toLocaleDateString("en-GB",{day:"2-digit",month:"long",year:"numeric"}):"11 July 2025",clientName:n.client_name||"Alfie Brand",docVersion:n.project?.version||"Rev1",compiler:n.project?.compiler||"J.Jacobs",inverterCapacity:n.selected_system?.inverter_kw||110,inverterCapacityVA:n.selected_system?.inverter_kva||110,pvSize:n.selected_system?.panel_kw||101.7,storageCapacity:n.selected_system?.battery_kwh||0,totalCostExclVat:n.financials?.total_cost_excl_vat||739622,monthlySavings:n.financials?.monthly_savings||40241,totalConsumption:n.financials?.total_demand_kwh||3374,fromGrid:n.financials?.total_import_kwh||2926,fromSolar:n.financials?.total_generation_kwh||448,fromBattery:0,monthlyCostCurrent:n.financials?.original_annual_cost/12||303088,monthlyCostNew:n.financials?.new_annual_cost/12||262847,savings10Year:n.financials?.ten_year_savings||7696064,quotation:n.quotation||[{item:"Panels",qty:"101.7 kWp",desc:"JA Solar 565W mono PV modules with 25y warranty",price:298749},{item:"Mounting",qty:"Alu mount",desc:"IBR or corrugated roof mounting, 10y warranty",price:25659},{item:"Inverters",qty:"110 kW",desc:"Sigen Hybrid Inverter Off Grid 110kW Three Phase, Sigen Power Meter Three Phase External CT 300A DH, Sigen Communication Module Global",price:132601},{item:"AC Cable and peripherals",qty:"",desc:"Overcurrent protection breakers, isolators, built into electrical panel, lugs, ferrules, heat shrink, shroud, cable trays or trunking, labelling according to NRS097-2-1",price:46213},{item:"DC Cable",qty:"",desc:"Specialized solar cable, double insulated and UV rated.",price:28800},{item:"Installation",qty:"",desc:"Professional installation according to SANS10142, Electrical COC, Travel, Project Management, Equipment Procurement and delivery to site, serial number tracking, single line diagrams and project handover file.",price:207600},{item:"SSEG",qty:"",desc:"Municipal or Eskom Registration for SSEG, including Pr.Eng sign off on installation.",price:"excluded"}],totalExclVat:n.financials?.total_cost_excl_vat||739622,vatAmount:(n.financials?.total_cost_excl_vat||739622)*.15,totalInclVat:(n.financials?.total_cost_excl_vat||739622)*1.15}:{},[n,t]),_=v.useMemo(()=>{if(!n?.simulation||!u)return{labels:[],datasets:[]};const E=n.simulation,N=u.toDateString(),L=E.timestamps.findIndex(O=>new Date(O).toDateString()===N);if(L===-1)return{labels:[],datasets:[]};const M=L+48;return{labels:E.timestamps.slice(L,M).map(O=>new Date(O)),datasets:[{label:"Potential Energy Generation (kWh)",data:E.generation.slice(L,M).map(O=>O*.5),borderColor:"#4ade80",backgroundColor:"#bbf7d0",fill:"false",tension:.3,pointRadius:0},{label:"Energy Requirement (kWh)",data:E.demand.slice(L,M).map(O=>O*.5),borderColor:"#ef4444",backgroundColor:"#fee2e2",fill:"false",tension:.3,pointRadius:0},{label:"Energy From Grid (kWh)",data:E.import_from_grid.slice(L,M).map(O=>O*.5),borderColor:"#f97316",backgroundColor:"#fee2e2",fill:"origin",tension:.3,pointRadius:0},{label:"Battery SOC (%)",data:E.battery_soc.slice(L,M),borderColor:"#2235c5ff",backgroundColor:"#bbd2f7ff",fill:"false",tension:.3,pointRadius:0}]}},[n,u]),j=v.useMemo(()=>{const E=(N,L,M,T)=>{const O=N.createLinearGradient(0,L.bottom,0,L.top);return O.addColorStop(0,M),O.addColorStop(1,T),O};return{labels:["Current","New"],datasets:[{label:"Monthly Utility Cost",data:[A.monthlyCostCurrent,A.monthlyCostNew],backgroundColor:N=>{const{chart:L}=N,{ctx:M,chartArea:T}=L;return T?N.dataIndex===0?E(M,T,"rgba(217, 217, 217, 0.8)","rgba(237, 125, 49, 0.8)"):E(M,T,"rgba(217, 217, 217, 0.8)","rgba(112, 173, 71, 0.8)"):null},borderWidth:0,barPercentage:.5}]}},[A]),C={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},scales:{x:{type:"time",time:{unit:"hour",tooltipFormat:"HH:mm"},adapters:{date:{locale:zS}},grid:{color:"#e0e0e0"}},y:{beginAtZero:!0,title:{display:!0,text:"Energy (kWh)"},grid:{color:"#e0e0e0"}},y1:{type:"linear",display:!0,position:"right",beginAtZero:!0,max:100,title:{display:!0,text:"Battery SOC (%)"},grid:{drawOnChartArea:!1}}},plugins:{legend:{position:"top",labels:{font:{size:10}}},tooltip:{mode:"index",intersect:!1},datalabels:{display:!1}},elements:{line:{tension:.2},point:{radius:2}}},k={maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,text:"Monthly Utility Cost",font:{size:14},color:"#595959",padding:{bottom:20}},datalabels:{anchor:"end",align:"end",formatter:E=>po(E),font:{weight:"bold"},color:"#595959"}},scales:{x:{grid:{display:!1}},y:{display:!1,beginAtZero:!0}}};return v.useEffect(()=>(document.body.classList.add("proposal-body"),Re.get(`${Ce}/api/proposal_data/${t}`).then(E=>{if(s(E.data),document.title=`Proposal for ${E.data.client_name}`,E.data?.simulation?.timestamps?.length>0){const N=new Date(E.data.simulation.timestamps[0]);f(N),h(N)}}).catch(E=>c(E.response?.data?.error||"Failed to load proposal data.")).finally(()=>i(!1)),()=>document.body.classList.remove("proposal-body")),[t]),r?a.jsx("div",{className:"loading-container",children:a.jsx(Ot,{animation:"border"})}):o?a.jsx("div",{className:"loading-container",children:a.jsx(kt,{variant:"danger",children:o})}):n?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"print-controls no-print",children:[a.jsxs(Fe,{variant:"light",onClick:()=>e(-1),children:[a.jsx("i",{className:"bi bi-arrow-left"})," Back"]}),a.jsxs(Fe,{variant:"primary",onClick:()=>window.print(),children:[a.jsx("i",{className:"bi bi-printer-fill"})," Print or Save as PDF"]})]}),a.jsxs("main",{className:"proposal-container",children:[a.jsxs("section",{className:"page cover-page",children:[a.jsx("header",{className:"d-flex justify-content-end align-items-center",children:a.jsx("img",{src:dx,alt:"Orka Solar Logo",className:"logo"})}),a.jsx("div",{className:"cover-content",children:a.jsxs("div",{className:"content-box",children:[a.jsx("h1",{className:"proposal-title",children:"Proposal"}),a.jsx("p",{className:"project-name-title",children:A.projectName||"110kW Sigenergy"}),a.jsxs("div",{className:"detail-line",children:[a.jsx("span",{className:"label",children:"Project description:"}),a.jsx("span",{children:A.projectDescription})]}),a.jsxs("div",{className:"detail-line",children:[a.jsx("span",{className:"label",children:"Project nr.:"}),a.jsx("span",{children:A.projectNr})]}),a.jsxs("div",{className:"d-flex justify-content-between align-items-end mt-5",children:[a.jsx("div",{className:"date-info",children:A.proposalDate}),a.jsxs("div",{className:"compiler-info text-end",children:[a.jsxs("span",{children:["Prepared for: ",A.clientName]}),a.jsxs("span",{children:["Document version: ",A.docVersion]}),a.jsxs("span",{children:["Compiled by: ",A.compiler]})]})]})]})})]}),a.jsxs("section",{className:"page page-2",children:[a.jsxs("div",{className:"page-header",children:["Orka Solar -- ",A.projectName||"110kW Sigenenergy"," -- Project Proposal"]}),a.jsxs("div",{className:"page-2-content d-flex",children:[a.jsxs("div",{className:"metrics-column",children:[a.jsxs("div",{className:"metric-item",children:[a.jsx("p",{className:"metric-label",children:"INVERTER CAPACITY"}),a.jsxs("div",{className:"metric-value-card",children:[A.inverterCapacityVA," kVA"]})]}),a.jsxs("div",{className:"metric-item",children:[a.jsx("p",{className:"metric-label",children:"SOLAR PV SIZE"}),a.jsxs("div",{className:"metric-value-card",children:[A.pvSize," kWp"]})]}),a.jsxs("div",{className:"metric-item",children:[a.jsx("p",{className:"metric-label",children:"STORAGE CAPACITY"}),a.jsxs("div",{className:"metric-value-card",children:[A.storageCapacity," kWh"]})]}),a.jsxs("div",{className:"metric-item",children:[a.jsx("p",{className:"metric-label",children:"COST"}),a.jsxs("div",{className:"metric-value-card",children:[po(A.totalCostExclVat)," ",a.jsx("span",{className:"vat-label",children:"(excl. VAT)"})]})]}),a.jsxs("div",{className:"metric-item",children:[a.jsx("p",{className:"metric-label",children:"ESKOM SAVINGS (P.M.)"}),a.jsx("div",{className:"metric-value-card",children:po(A.monthlySavings)})]})]}),a.jsxs("div",{className:"design-title-column",children:[a.jsxs("h2",{className:"design-title-kw",children:[A.inverterCapacity," kW"]}),a.jsx("h2",{className:"design-title-text",children:"DESIGN"})]})]}),a.jsx("div",{className:"background-logo-graphic"}),a.jsx("div",{className:"page-footer",children:"Page 2 of 5"})]}),a.jsxs("section",{className:"page page-3",children:[a.jsxs("div",{className:"page-header",children:["Orka Solar -- ",A.projectName||"110kW Sigenenergy"," -- Project Proposal"]}),a.jsxs("h2",{className:"performance-title",children:[a.jsx("span",{children:"PERFORM"}),"ANCE"]}),a.jsx("p",{className:"performance-intro-text",children:"Orka Solar prepared the design using simulation software with actual weather data of the client's location."}),a.jsx("p",{className:"performance-intro-text",children:"The data below shows the energy flow from the different sources per day:"}),a.jsxs("div",{className:"performance-metrics-container d-flex justify-content-around my-4",children:[a.jsxs("div",{className:"performance-metric",children:[a.jsx("i",{className:"bi bi-lightbulb icon"}),a.jsxs("p",{className:"value",children:[A.totalConsumption.toLocaleString()," kWh"]}),a.jsx("p",{className:"label",children:"CONSUMPTION"})]}),a.jsxs("div",{className:"performance-metric",children:[a.jsx("i",{className:"bi bi-reception-4 icon"}),a.jsxs("p",{className:"value",children:[A.fromGrid.toLocaleString()," kWh"]}),a.jsx("p",{className:"label",children:"FROM GRID"})]}),a.jsxs("div",{className:"performance-metric",children:[a.jsx("i",{className:"bi bi-sun icon"}),a.jsxs("p",{className:"value",children:[A.fromSolar.toLocaleString()," kWh"]}),a.jsx("p",{className:"label",children:"FROM SOLAR"})]}),a.jsxs("div",{className:"performance-metric",children:[a.jsx("i",{className:"bi bi-battery-half icon"}),a.jsxs("p",{className:"value",children:[A.fromBattery.toLocaleString()," kWh"]}),a.jsx("p",{className:"label",children:"FROM BATTERY"})]})]}),a.jsx("p",{className:"performance-intro-text",children:"The graph below shows the client's simulated load profile with the solar generation for a typical day."}),a.jsx(Gfe,{title:"Daily Performance Overview",selectedDate:u,setSelectedDate:f,minDate:x,maxDate:b}),a.jsx("div",{className:"chart-wrapper performance-chart-wrapper",children:a.jsx(Rs,{options:C,data:_})}),a.jsx("div",{className:"background-logo-graphic"}),a.jsx("div",{className:"page-footer",children:"Page 3 of 5"})]}),a.jsxs("section",{className:"page page-4",children:[a.jsxs("div",{className:"page-header",children:["Orka Solar -- ",A.projectName||"110kW Sigenenergy"," -- Project Proposal"]}),a.jsxs("h2",{className:"benefit-title",children:[a.jsx("span",{children:"BENE"}),"FIT"]}),a.jsx("p",{className:"benefit-intro-text",children:"The goal of the project is to provide:"}),a.jsxs("ul",{className:"benefit-list",children:[a.jsx("li",{children:"Cost savings on grid electricity"}),a.jsx("li",{children:"Less dependence on the Utilities"}),a.jsx("li",{children:"Reduction carbon emissions from fossil-based fuels"})]}),a.jsx("div",{className:"chart-wrapper benefit-chart-wrapper",children:a.jsx(ia,{options:k,data:j})}),a.jsx("p",{className:"benefit-chart-footer",children:"Following the successful installation the client's monthly cost of electricity, for the energy portion, will change as shown in the graph above."}),a.jsxs("div",{className:"savings-highlight-box",children:[a.jsx("p",{className:"label",children:"The total savings achieved over the next 10 years is:"}),a.jsx("p",{className:"value",children:po(A.savings10Year)})]}),a.jsx("div",{className:"page-footer",children:"Page 4 of 5"})]}),a.jsxs("section",{className:"page page-5",children:[a.jsxs("div",{className:"page-header",children:["Orka Solar -- ",A.projectName||"110kW Sigenenergy"," -- Project Proposal"]}),a.jsxs("h2",{className:"quotation-title",children:[a.jsx("span",{children:"QUOT"}),"ATION"]}),a.jsx("h3",{className:"quotation-subtitle",children:"Sigen Energy System"}),a.jsx("div",{className:"quotation-list",children:A.quotation.map((E,N)=>a.jsxs("div",{className:"quotation-item d-flex justify-content-between align-items-start",children:[a.jsxs("div",{className:"quotation-details",children:[a.jsx("p",{className:"item-name",children:E.item}),a.jsx("p",{className:"item-spec",children:E.qty}),a.jsx("p",{className:"item-desc",children:E.desc})]}),a.jsx("div",{className:"quotation-price",children:typeof E.price=="number"?po(E.price):E.price})]},N))}),a.jsxs("div",{className:"totals-section",children:[a.jsxs("div",{className:"total-row d-flex justify-content-end",children:[a.jsx("span",{className:"label",children:"Excl VAT"}),a.jsx("span",{className:"value",children:po(A.totalExclVat)})]}),a.jsxs("div",{className:"total-row d-flex justify-content-end",children:[a.jsx("span",{className:"label",children:"VAT"}),a.jsx("span",{className:"value",children:po(A.vatAmount,2)})]}),a.jsxs("div",{className:"total-row d-flex justify-content-end total",children:[a.jsxs("span",{className:"label",children:["Total ",a.jsx("small",{children:"Including VAT"})]}),a.jsx("span",{className:"value",children:po(A.totalInclVat,2)})]})]}),a.jsxs("div",{className:"info-footer row mt-4",children:[a.jsxs("div",{className:"col-6",children:[a.jsx("p",{className:"mb-2",children:a.jsx("strong",{children:"Alfie Brand"})}),a.jsxs("p",{className:"mb-0",children:["Tel: ",n.client?.phone||"082 923 2878"]}),a.jsxs("p",{className:"mb-3",children:["Mail: ",n.client?.email||"Alphie@brandfs.co.za"]}),a.jsx("p",{className:"mb-2",children:a.jsx("strong",{children:"Banking details:"})}),a.jsx("p",{className:"mb-0",children:"Company: Orka Solar (pty) ltd."}),a.jsx("p",{className:"mb-0",children:"Branch: ABSA Mooirivier Mall"}),a.jsx("p",{className:"mb-0",children:"Account number: 409 240 5135"})]}),a.jsxs("div",{className:"col-6 text-end",children:[a.jsx("p",{className:"mb-2",children:a.jsx("strong",{children:"Orka Solar (Pty) Ltd"})}),a.jsx("p",{className:"mb-0",children:"Reg No. 2017/141572/07"}),a.jsx("p",{className:"mb-0",children:"VAT No. 463 028 1337"}),a.jsx("p",{className:"mb-0",children:"3 Retief Street"}),a.jsx("p",{className:"mb-0",children:"The Square, Unit 13"}),a.jsx("p",{className:"mb-0",children:"Potchefstroom"}),a.jsx("p",{className:"mb-0",children:"2531"})]})]}),a.jsxs("div",{className:"signature-footer row mt-auto",children:[a.jsxs("div",{className:"col-6",children:[a.jsx("p",{className:"mb-2",children:"Quote valid for 30days unless specified otherwise."}),a.jsx("p",{className:"mb-2",children:a.jsx("strong",{children:"Representing the Client:"})}),a.jsx("p",{className:"mb-0",children:A.clientName}),a.jsxs("p",{className:"mb-0",children:["Tel: ",n.client?.phone||"082 923 2878"]}),a.jsxs("p",{className:"mb-0",children:["Mail: ",n.client?.email||"Alphie@brandfs.co.za"]})]}),a.jsxs("div",{className:"col-6",children:[a.jsx("p",{className:"mb-2",children:a.jsx("strong",{children:"Signed for acceptance:"})}),a.jsx("div",{className:"signature-line-box"}),a.jsx("p",{className:"signature-under-text",children:"Signature and date"})]})]}),a.jsx("div",{className:"page-footer",children:"Page 5 of 5"})]})]})]}):a.jsx("div",{className:"loading-container",children:a.jsx(kt,{variant:"info",children:"No data found."})})}zs.register(Yo,qo,$i,fa,Uo,Wo,Ho,Oo,A4);const Qfe=({profileData:t})=>{const e=v.useMemo(()=>{if(!t||t.length===0)return{labels:[],datasets:[]};const s=t.slice(0,336),r=s.map(o=>new Date(o.timestamp||o.Timestamp)),i=s.map(o=>o.demand_kw||o.Demand_kW||0);return{labels:r,datasets:[{data:i,borderColor:"#4f46e5",backgroundColor:"rgba(79, 70, 229, 0.1)",borderWidth:1.5,pointRadius:0,tension:.4,fill:!0}]}},[t]),n={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{display:!1},tooltip:{mode:"index",intersect:!1},datalabels:{display:!1}},scales:{x:{display:!1},y:{display:!1}}};return a.jsx("div",{style:{height:"80px"},children:a.jsx(Rs,{data:e,options:n})})};function Xfe(){const{user:t}=is(),e=t?.role==="admin",[n,s]=v.useState([]),[r,i]=v.useState(!0),[o,c]=v.useState(""),{showNotification:u}=Os(),[f,m]=v.useState(null),[h,g]=v.useState(""),[x,b]=v.useState(""),[A,_]=v.useState("Residential"),[j,C]=v.useState(null),[k,E]=v.useState(!1),[N,L]=v.useState(""),[M,T]=v.useState("");v.useEffect(()=>{O()},[]);const O=()=>{i(!0),Re.get(`${Ce}/api/load_profiles`).then(U=>s(Array.isArray(U.data)?U.data:[])).catch(U=>{c(U.response?.data?.error||U.response?.data?.message||"Failed to load existing profiles."),s([])}).finally(()=>i(!1))};v.useEffect(()=>{const U=()=>O();return window.addEventListener("refresh-profiles",U),()=>window.removeEventListener("refresh-profiles",U)},[]);const I=U=>{C(U.target.files[0])},$=()=>{m(null),g(""),b(""),_("Residential"),C(null),L(""),T("")},H=U=>{m(U),g(U.name),b(U.description),_(U.profile_type),C(null),L(""),T(""),window.scrollTo(0,0)},V=U=>{if(!e){u("Access Denied: Only administrators can delete load profiles.","danger");return}window.confirm("Are you sure you want to delete this load profile? This action cannot be undone.")&&Re.delete(`${Ce}/api/load_profiles/${U}`,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}}).then(()=>{u("Profile deleted successfully!","success"),O()}).catch(R=>{u(R.response?.data?.message||R.response?.data?.error||"Failed to delete profile","danger")})},G=async U=>{if(U.preventDefault(),!h.trim()){L("Profile Name is required.");return}if(!f&&!j){L("A CSV or XLSX file is required to create a new profile.");return}if(E(!0),L(""),T(""),f){const R={name:h,description:x};Re.put(`${Ce}/api/load_profiles/${f.id}`,R).then(()=>{T("Profile updated successfully!"),$(),O()}).catch(P=>L(P.response?.data?.error||"Failed to update profile.")).finally(()=>E(!1))}else{const R=new FormData,P=j.name.replace(/\s+/g,"_");R.append("profile_file",j,P),R.append("name",h),R.append("description",x),R.append("profile_type",A),Re.post(`${Ce}/api/load_profiles`,R,{headers:{"Content-Type":"multipart/form-data"}}).then(()=>{T("Profile created successfully!"),$(),O()}).catch(Z=>L(Z.response?.data?.error||"Failed to create profile.")).finally(()=>E(!1))}};return r?a.jsx("div",{className:"text-center p-5",children:a.jsx(Ot,{animation:"border"})}):a.jsx("div",{className:"min-vh-100",style:{backgroundColor:"#f8f9fa"},children:a.jsx(rr,{className:"py-4 py-md-5",children:a.jsxs(nt,{children:[a.jsx(ge,{lg:5,className:"mb-4 mb-lg-0",children:a.jsx("div",{className:"sticky-top",style:{top:"88px"},children:a.jsxs(me,{className:"shadow-lg border-0 rounded-xl",children:[a.jsx(me.Header,{className:"bg-dark text-white rounded-top-xl py-3",children:a.jsxs("h3",{className:"text-xl font-semibold mb-0",children:[a.jsx("i",{className:"bi bi-plus-circle-fill me-2"}),f?"Edit Load Profile":"Create New Load Profile"]})}),a.jsx(me.Body,{className:"p-4",children:a.jsxs(z,{onSubmit:G,children:[a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{children:"Profile Name"}),a.jsx(z.Control,{type:"text",placeholder:"e.g., Business Hours 9-5",value:h,onChange:U=>g(U.target.value),required:!0})]}),a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{children:"Description"}),a.jsx(z.Control,{as:"textarea",rows:2,placeholder:"Briefly describe the usage pattern",value:x,onChange:U=>b(U.target.value)})]}),a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{children:"Profile Type"}),a.jsxs(z.Select,{value:A,onChange:U=>_(U.target.value),disabled:!!f,children:[a.jsx("option",{value:"Residential",children:"Residential"}),a.jsx("option",{value:"Commercial",children:"Commercial"})]})]}),a.jsxs(z.Group,{className:"mb-4",children:[a.jsx(z.Label,{children:f?"Replace Profile Data (Optional)":"Profile Data File"}),a.jsx(z.Control,{type:"file",accept:".csv,.CSV,.xls,.XLS,.xlsx,.XLSX,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",onChange:I,disabled:!!f}),a.jsx(z.Text,{muted:!0,children:f?"File upload is disabled during edit.":'CSV/XLSX with "Timestamp" and "Demand_kW" columns.'})]}),N&&a.jsx(kt,{variant:"danger",children:N}),M&&a.jsx(kt,{variant:"success",children:M}),a.jsxs("div",{className:"d-grid gap-2",children:[a.jsx(Fe,{variant:"primary",type:"submit",disabled:k,children:k?a.jsxs(a.Fragment,{children:[a.jsx(Ot,{size:"sm"})," Saving..."]}):f?"Update Profile":"Create Profile"}),a.jsx(Fe,{variant:"outline-secondary",onClick:$,children:"Clear"})]})]})})]})})}),a.jsx(ge,{lg:7,children:a.jsxs(me,{className:"shadow-lg border-0 rounded-xl p-4 p-md-5",children:[a.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-4",children:"Available Load Profiles"}),o&&a.jsx(kt,{variant:"danger",children:o}),a.jsx(Ll,{variant:"flush",children:n.map(U=>a.jsx(Ll.Item,{className:"px-0 py-3",children:a.jsxs(nt,{children:[a.jsxs(ge,{xs:12,md:8,children:[a.jsx("p",{className:"fw-bold mb-1",children:U.name}),a.jsx("p",{className:"text-muted text-sm mb-2",children:U.description}),a.jsxs("div",{className:"mb-2",children:[a.jsx(tt,{pill:!0,bg:U.profile_type==="Residential"?"success":"info",children:U.profile_type}),U.annual_kwh>0&&a.jsxs(tt,{pill:!0,bg:"secondary",className:"ms-2",children:[Math.round(U.annual_kwh/12).toLocaleString()," kWh/month (normalized)"]})]}),a.jsxs("div",{className:"d-flex flex-wrap gap-2",children:[U.monthly_avg_kwh_original&&a.jsxs(tt,{pill:!0,bg:"warning",className:"text-dark",children:[a.jsx("i",{className:"bi bi-calendar3 me-1"}),Math.round(U.monthly_avg_kwh_original).toLocaleString()," kWh/month (original)"]}),U.max_peak_demand_kw&&a.jsxs(tt,{pill:!0,bg:"danger",children:[a.jsx("i",{className:"bi bi-lightning-fill me-1"}),U.max_peak_demand_kw.toFixed(2)," kW peak"]})]})]}),a.jsxs(ge,{xs:12,md:4,className:"d-flex flex-column justify-content-center align-items-md-end",children:[a.jsx(Qfe,{profileData:U.profile_data}),a.jsxs("div",{className:"mt-2",children:[a.jsx(Fe,{variant:"outline-primary",size:"sm",className:"me-2",onClick:()=>H(U),children:a.jsx("i",{className:"bi bi-pencil-fill"})}),a.jsx(Fe,{variant:"outline-danger",size:"sm",disabled:!e,title:e?"Delete profile":"Admin only",onClick:()=>V(U.id),children:a.jsx("i",{className:"bi bi-trash-fill"})})]})]})]})},U.id))})]})})]})})})}const ER={name:"",power_user_type:"SPU",tariff_category:"",code:"",matrix_code:"",structure:"flat_rate",rates:[{charge_name:"Energy Charge",charge_category:"energy",season:"all",time_of_use:"all",rate_unit:"R/kWh",rate_value:""}]};function Zfe(){const{user:t}=is(),e=t?.role==="admin",{schedule:n,setSchedule:s}=v.useContext(Hx),[r,i]=v.useState([]),[o,c]=v.useState(!0),[u,f]=v.useState(""),[m,h]=v.useState(!1),[g,x]=v.useState(!1),[b,A]=v.useState(ER),[_,j]=v.useState(""),[C,k]=v.useState(1),[E]=v.useState(10),[N,L]=v.useState({power_user_type:"all",tariff_category:"all",structure:"all",supply_voltage:"all",transmission_zone:"all"}),M=async()=>{c(!0);try{const te=await Re.get(`${Ce}/api/tariffs`);i(te.data),f("")}catch(te){f("Failed to load tariffs. Please ensure the backend is running."),console.error(te)}finally{c(!1)}};v.useEffect(()=>{M()},[]);const T=v.useMemo(()=>{let te=r;N.power_user_type!=="all"&&(te=te.filter(xe=>xe.power_user_type===N.power_user_type));const X=[...new Set(r.map(xe=>xe.power_user_type))],de=[...new Set(te.map(xe=>xe.tariff_category))],Ne=[...new Set(te.map(xe=>xe.structure))],Ke=[...new Set(te.filter(xe=>xe.supply_voltage).map(xe=>xe.supply_voltage))],ce=[...new Set(te.filter(xe=>xe.transmission_zone).map(xe=>xe.transmission_zone))];return{powerUserTypes:X,categories:de,structures:Ne,voltages:Ke,zones:ce}},[r,N.power_user_type]),O=v.useMemo(()=>{const te=_.toLowerCase().trim();return r.filter(X=>N.power_user_type==="all"||X.power_user_type===N.power_user_type).filter(X=>N.tariff_category==="all"||X.tariff_category===N.tariff_category).filter(X=>N.structure==="all"||X.structure===N.structure).filter(X=>N.supply_voltage==="all"||X.supply_voltage===N.supply_voltage).filter(X=>N.transmission_zone==="all"||X.transmission_zone===N.transmission_zone).filter(X=>!te||X.name.toLowerCase().includes(te))},[r,_,N]),I=te=>{const{name:X,value:de}=te.target;L(Ne=>{const Ke={...Ne,[X]:de};return X==="power_user_type"&&(Ke.tariff_category="all",Ke.structure="all",Ke.supply_voltage="all",Ke.transmission_zone="all"),Ke}),k(1)},$=C*E,H=$-E,V=O.slice(H,$),G=Math.ceil(O.length/E),U=te=>k(te),R=()=>{x(!1),A(ER),h(!0)},P=te=>{x(!0),A(JSON.parse(JSON.stringify(te))),h(!0)},Z=()=>h(!1),ne=async()=>{const te=g?`${Ce}/api/tariffs/${b.id}`:`${Ce}/api/tariffs`,X=g?"put":"post";try{await Re[X](te,b),Z(),M()}catch(de){f("Failed to save tariff."),console.error(de)}},D=async te=>{if(!e){f("Access Denied: Only administrators can delete tariffs.");return}if(window.confirm("Are you sure you want to delete this tariff? This action cannot be undone."))try{await Re.delete(`${Ce}/api/tariffs/${te}`,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}}),M()}catch(X){f(X.response?.data?.message||"Failed to delete tariff."),console.error(X)}},B=te=>{const{name:X,value:de}=te.target;A(Ne=>({...Ne,[X]:de}))},se=(te,X)=>{const{name:de,value:Ne}=X.target,Ke=[...b.rates];Ke[te]={...Ke[te],[de]:Ne},A(ce=>({...ce,rates:Ke}))},le=()=>{const te={charge_name:"",charge_category:"energy",season:"all",time_of_use:"all",rate_unit:"R/kWh",rate_value:""};A(X=>({...X,rates:[...X.rates,te]}))},ae=te=>{if(b.rates.length<=1)return;const X=b.rates.filter((de,Ne)=>Ne!==te);A(de=>({...de,rates:X}))};return a.jsxs("div",{className:"tariff-manager-page",children:[a.jsx(rr,{fluid:!0,className:"py-4 py-md-5",children:a.jsxs(me,{className:"shadow-lg border-0 rounded-xl p-4 p-md-5",children:[a.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-3xl font-bold text-gray-800 mb-1 d-flex align-items-center",children:[a.jsx(dQ,{className:"me-3 text-primary"}),"Tariff Catalogue"]}),a.jsx("p",{className:"text-muted mb-0",children:"View, add, and manage electricity tariff structures."})]}),a.jsxs(Fe,{onClick:R,className:"btn-primary shadow-sm",children:[a.jsx(yh,{className:"me-2"}),"Add New Tariff"]})]}),a.jsx(me,{className:"border-light bg-light mb-4",children:a.jsx(me.Body,{children:a.jsxs(nt,{className:"g-2",children:[a.jsx(ge,{md:4,children:a.jsxs(z.Select,{size:"sm",name:"power_user_type",value:N.power_user_type,onChange:I,children:[a.jsx("option",{value:"all",children:"All Power User Types"}),T.powerUserTypes.map(te=>a.jsx("option",{value:te,children:te},te))]})}),a.jsx(ge,{md:4,children:a.jsxs(z.Select,{size:"sm",name:"tariff_category",value:N.tariff_category,onChange:I,children:[a.jsx("option",{value:"all",children:"All Categories"}),T.categories.map(te=>a.jsx("option",{value:te,children:te},te))]})}),a.jsx(ge,{md:4,children:a.jsxs(z.Select,{size:"sm",name:"structure",value:N.structure,onChange:I,children:[a.jsx("option",{value:"all",children:"All Structures"}),T.structures.map(te=>a.jsx("option",{value:te,children:te},te))]})}),N.power_user_type==="LPU"&&a.jsxs(a.Fragment,{children:[a.jsx(ge,{md:6,className:"mt-2",children:a.jsxs(z.Select,{size:"sm",name:"supply_voltage",value:N.supply_voltage,onChange:I,children:[a.jsx("option",{value:"all",children:"All Voltages"}),T.voltages.map(te=>a.jsx("option",{value:te,children:te},te))]})}),a.jsx(ge,{md:6,className:"mt-2",children:a.jsxs(z.Select,{size:"sm",name:"transmission_zone",value:N.transmission_zone,onChange:I,children:[a.jsx("option",{value:"all",children:"All Zones"}),T.zones.map(te=>a.jsx("option",{value:te,children:te},te))]})})]})]})})}),a.jsx("div",{className:"mb-4",children:a.jsxs(hn,{children:[a.jsx(hn.Text,{children:a.jsx(Hj,{})}),a.jsx(jL,{placeholder:"Search by name, category or type..",value:_,onChange:te=>j(te.target.value)})]})}),o&&a.jsx("div",{className:"text-center p-5",children:a.jsx(Ot,{animation:"border",variant:"primary"})}),u&&a.jsx(kt,{variant:"danger",children:u}),!o&&a.jsxs(a.Fragment,{children:[a.jsx(na,{children:V.map(te=>a.jsxs(na.Item,{eventKey:String(te.id),className:"mb-2 tariff-accordion-item",children:[a.jsx(na.Header,{children:a.jsxs("div",{className:"d-flex w-100 justify-content-between align-items-center pe-2",children:[a.jsxs("div",{className:"tariff-header-info",children:[a.jsxs("span",{className:"fw-bold fs-5",children:[te.name," (",te.matrix_code,")"]}),a.jsxs("div",{className:"d-flex gap-2 mt-1",children:[a.jsx(tt,{pill:!0,bg:"primary",children:te.power_user_type}),a.jsx(tt,{pill:!0,bg:"secondary",children:te.tariff_category}),a.jsx(tt,{pill:!0,bg:"info",text:"dark",children:te.structure})]})]}),a.jsxs("div",{className:"tariff-actions",children:[a.jsx(Fe,{variant:"outline-primary",size:"sm",onClick:X=>{X.stopPropagation(),P(te)},children:a.jsx(oy,{})}),a.jsx(Fe,{variant:"outline-danger",size:"sm",className:"ms-2",disabled:!e,title:e?"Delete tariff":"Admin only",onClick:X=>{X.stopPropagation(),D(te.id)},children:a.jsx(xh,{})})]})]})}),a.jsxs(na.Body,{children:[te.power_user_type==="LPU"&&a.jsxs("div",{className:"lpu-details mb-3",children:[a.jsxs(tt,{bg:"light",text:"dark",className:"me-2",children:["Zone: ",te.transmission_zone]}),a.jsxs(tt,{bg:"light",text:"dark",children:["Voltage: ",te.supply_voltage]})]}),a.jsxs(vn,{striped:!0,bordered:!0,hover:!0,responsive:!0,size:"sm",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Charge Name"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Rate"}),a.jsx("th",{children:"Unit"}),te.structure==="time_of_use"&&a.jsxs(a.Fragment,{children:[a.jsx("th",{children:"Season"}),a.jsx("th",{children:"Time of Use"})]}),te.structure==="tiered"&&a.jsx("th",{children:"Block Limit (kWh)"})]})}),a.jsx("tbody",{children:te.rates.map(X=>a.jsxs("tr",{children:[a.jsx("td",{children:X.charge_name}),a.jsx("td",{children:a.jsx(tt,{bg:"dark",children:X.charge_category})}),a.jsx("td",{className:"fw-bold",children:X.rate_value}),a.jsx("td",{children:X.rate_unit}),te.structure==="time_of_use"&&a.jsxs(a.Fragment,{children:[a.jsx("td",{children:X.season}),a.jsx("td",{children:X.time_of_use})]}),te.structure==="tiered"&&a.jsx("td",{children:X.block_threshold_kwh||"N/A"})]},X.id))})]})]})]},te.id))}),G>1&&a.jsx("div",{className:"d-flex justify-content-center mt-4",children:a.jsxs(Op,{children:[a.jsx(Op.Prev,{onClick:()=>U(C-1),disabled:C===1}),[...Array(G).keys()].map(te=>a.jsx(Op.Item,{active:te+1===C,onClick:()=>U(te+1),children:te+1},te+1)),a.jsx(Op.Next,{onClick:()=>U(C+1),disabled:C===G})]})})]})]})}),a.jsxs(wt,{show:m,onHide:Z,size:"xl",centered:!0,children:[a.jsx(wt.Header,{closeButton:!0,className:"bg-light",children:a.jsx(wt.Title,{children:g?"Edit Tariff":"Add New Tariff"})}),a.jsx(wt.Body,{children:a.jsxs(z,{children:[a.jsx("h5",{children:"Tariff Details"}),a.jsxs(nt,{children:[a.jsx(ge,{md:4,children:a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{children:"Tariff Name"}),a.jsx(z.Control,{name:"name",value:b.name,onChange:B})]})}),a.jsx(ge,{md:4,children:a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{children:"Power User Type"}),a.jsxs(z.Select,{name:"power_user_type",value:b.power_user_type,onChange:B,children:[a.jsx("option",{value:"SPU",children:"SPU"}),a.jsx("option",{value:"LPU",children:"LPU"})]})]})}),a.jsx(ge,{md:4,children:a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{children:"Category"}),a.jsx(z.Control,{name:"tariff_category",value:b.tariff_category,onChange:B})]})}),a.jsx(ge,{md:4,children:a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{children:"Code"}),a.jsx(z.Control,{name:"code",value:b.code,onChange:B})]})}),a.jsx(ge,{md:4,children:a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{children:"Matrix Code"}),a.jsx(z.Control,{name:"matrix_code",value:b.matrix_code,onChange:B})]})}),a.jsx(ge,{md:4,children:a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{children:"Structure"}),a.jsxs(z.Select,{name:"structure",value:b.structure,onChange:B,children:[a.jsx("option",{value:"flat_rate",children:"Flat Rate"}),a.jsx("option",{value:"tiered",children:"Tiered"}),a.jsx("option",{value:"time_of_use",children:"Time of Use"})]})]})})]}),a.jsx("hr",{className:"my-4"}),a.jsx("h5",{children:"Tariff Rates"}),b.rates.map((te,X)=>a.jsx(me,{className:"mb-3 bg-light border-dashed",children:a.jsx(me.Body,{children:a.jsxs(nt,{children:[a.jsx(ge,{md:3,children:a.jsxs(z.Group,{children:[a.jsx(z.Label,{children:"Charge Name"}),a.jsx(z.Control,{size:"sm",name:"charge_name",value:te.charge_name,onChange:de=>se(X,de)})]})}),a.jsx(ge,{md:2,children:a.jsxs(z.Group,{children:[a.jsx(z.Label,{children:"Category"}),a.jsxs(z.Select,{size:"sm",name:"charge_category",value:te.charge_category,onChange:de=>se(X,de),children:[a.jsx("option",{value:"energy",children:"Energy"}),a.jsx("option",{value:"demand",children:"Demand"}),a.jsx("option",{value:"fixed",children:"Fixed"})]})]})}),a.jsx(ge,{md:2,children:a.jsxs(z.Group,{children:[a.jsx(z.Label,{children:"Season"}),a.jsxs(z.Select,{size:"sm",name:"season",value:te.season,onChange:de=>se(X,de),children:[a.jsx("option",{value:"all",children:"All"}),a.jsx("option",{value:"high",children:"High"}),a.jsx("option",{value:"low",children:"Low"})]})]})}),a.jsx(ge,{md:2,children:a.jsxs(z.Group,{children:[a.jsx(z.Label,{children:"Time of Use"}),a.jsxs(z.Select,{size:"sm",name:"time_of_use",value:te.time_of_use,onChange:de=>se(X,de),children:[a.jsx("option",{value:"all",children:"All"}),a.jsx("option",{value:"peak",children:"Peak"}),a.jsx("option",{value:"standard",children:"Standard"}),a.jsx("option",{value:"off_peak",children:"Off-Peak"})]})]})}),a.jsx(ge,{md:3,children:a.jsxs(z.Group,{children:[a.jsx(z.Label,{children:"Rate Unit"}),a.jsx(z.Control,{size:"sm",name:"rate_unit",value:te.rate_unit,onChange:de=>se(X,de)})]})}),a.jsx(ge,{md:3,children:a.jsxs(z.Group,{children:[a.jsx(z.Label,{children:"Rate Value"}),a.jsx(z.Control,{size:"sm",type:"number",name:"rate_value",value:te.rate_value,onChange:de=>se(X,de)})]})}),a.jsx(ge,{md:3,children:a.jsxs(z.Group,{children:[a.jsx(z.Label,{children:"Block Limit (kWh)"}),a.jsx(z.Control,{size:"sm",type:"number",name:"block_threshold_kwh",value:te.block_threshold_kwh||"",onChange:de=>se(X,de),placeholder:"N/A"})]})}),a.jsx(ge,{md:3,className:"d-flex align-items-end",children:a.jsx(Fe,{variant:"danger",size:"sm",onClick:()=>ae(X),children:a.jsx(xh,{})})})]})})},X)),a.jsxs(Fe,{variant:"outline-primary",onClick:le,children:[a.jsx(yh,{className:"me-2"}),"Add Rate"]})]})}),a.jsxs(wt.Footer,{children:[a.jsx(Fe,{variant:"secondary",onClick:Z,children:"Cancel"}),a.jsx(Fe,{variant:"primary",onClick:ne,children:"Save Changes"})]})]}),a.jsx(rr,{fluid:!0,className:"py-4",children:a.jsx(me,{className:"shadow-sm border-0 rounded-xl",children:a.jsxs(me.Body,{children:[a.jsx("h5",{className:"mb-3",children:"Global Tariff Escalation Schedule"}),a.jsx("div",{className:"row g-2",children:n.map((te,X)=>a.jsxs("div",{className:"col-2",children:[a.jsxs("label",{children:["Year ",2025+X]}),a.jsx("input",{type:"number",step:"0.001",className:"form-control form-control-sm",value:te,onChange:de=>{const Ne=[...n];Ne[X]=parseFloat(de.target.value),s(Ne)}})]},X))})]})})})]})}const TR={battery:["voltage","type"],fuse:["amp_rating"],inverter:["voltage","max_dc_voltage"],cable:["length","gauge"],panel:["voltage","current"],breaker:["poles","amp_rating","interrupt_capacity_ka"],inverter_aux:["voltage","type"],isolator:["voltage","amp_rating","poles"]};function Jfe(){const[t,e]=v.useState([]),[n,s]=v.useState([]),[r,i]=v.useState(!1),[o,c]=v.useState(null),[u,f]=v.useState(""),{showNotification:m}=Os(),h=v.useMemo(()=>{if(!n||n.length===0)return[];const E=new Set(n.map(N=>N.category));return Array.from(E).sort()},[n]);v.useEffect(()=>{g(),x()},[]);const g=async()=>{try{const E=await Re.get(`${Ce}/api/rules`);e(E.data)}catch{f("Failed to fetch rules")}},x=async()=>{try{const E=await Re.get(`${Ce}/api/products`);s(E.data)}catch{f("Failed to fetch products")}},b=(E=null)=>{c(E?{...E,constraints:E.constraints||{}}:{subject_product_id:"",rule_type:"REQUIRES_ONE",object_category:"",constraints:{},quantity_formula:"1",description:""}),i(!0)},A=()=>{i(!1),c(null)},_=async()=>{try{o.id?(await Re.put(`${Ce}/api/rules/${o.id}`,o),m("Rule updated successfully!","success")):(await Re.post(`${Ce}/api/rules`,o),m("Rule created successfully!","success")),g(),A()}catch(E){const N=E.response?.data?.error||"Failed to save rule.";m(N,"danger")}},j=E=>{const{name:N,value:L}=E.target;c(M=>({...M,[N]:L}))},C=(E,N)=>{c(L=>{const M={...L.constraints};return N?M[E]=N:delete M[E],{...L,constraints:M}})},k=async E=>{if(window.confirm("Are you sure you want to delete this rule?"))try{await Re.delete(`${Ce}/api/rules/${E}`),m("Rule deleted successfully!","success"),g()}catch(N){const L=N.response?.data?.error||"Failed to delete rule.";m(L,"danger")}};return a.jsxs("div",{className:"container mt-4",children:[a.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[a.jsx("h3",{children:"Component Rule Editor"}),a.jsxs(Fe,{onClick:()=>b(),children:[a.jsx("i",{className:"bi bi-plus-circle me-2"}),"Create New Rule"]})]}),u&&a.jsx(kt,{variant:"danger",children:u}),a.jsxs(vn,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Subject Product"}),a.jsx("th",{children:"Rule Type"}),a.jsx("th",{children:"Object Category"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:t.map(E=>a.jsxs("tr",{children:[a.jsx("td",{children:E.subject_product_name}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:E.rule_type})}),a.jsx("td",{children:E.object_category}),a.jsx("td",{children:E.description}),a.jsxs("td",{children:[a.jsx(Fe,{variant:"outline-primary",size:"sm",className:"me-2",onClick:()=>b(E),children:"Edit"}),a.jsx(Fe,{variant:"outline-danger",size:"sm",onClick:()=>k(E.id),children:"Delete"})]})]},E.id))})]}),o&&a.jsxs(wt,{show:r,onHide:A,size:"lg",children:[a.jsx(wt.Header,{closeButton:!0,children:a.jsxs(wt.Title,{children:[o.id?"Edit":"Create"," Rule"]})}),a.jsx(wt.Body,{children:a.jsxs(z,{children:[a.jsx("h5",{className:"mb-3 border-bottom pb-2",children:"1. Define Subject & Rule"}),a.jsxs(nt,{children:[a.jsx(ge,{md:6,children:a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{children:"This Product..."}),a.jsxs(z.Select,{name:"subject_product_id",value:o.subject_product_id,onChange:j,children:[a.jsx("option",{value:"",children:"-- Select Product --"}),n.map(E=>a.jsx("option",{value:E.id,children:E.model},E.id))]})]})}),a.jsx(ge,{md:6,children:a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{children:"Rule"}),a.jsxs(z.Select,{name:"rule_type",value:o.rule_type,onChange:j,children:[a.jsx("option",{value:"REQUIRES_ONE",children:"Requires one of..."}),a.jsx("option",{value:"REQUIRES_ALL",children:"Requires all of..."}),a.jsx("option",{value:"EXCLUDES",children:"Excludes..."}),a.jsx("option",{value:"RECOMMENDS",children:"Recommends..."})]})]})})]}),a.jsx("h5",{className:"mb-3 mt-4 border-bottom pb-2",children:"2. Define Object & Properties"}),a.jsx(nt,{children:a.jsx(ge,{md:6,children:a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{children:"Category of Product"}),a.jsxs(z.Select,{name:"object_category",value:o.object_category,onChange:j,children:[a.jsx("option",{value:"",children:"-- Select Category --"}),h.map(E=>a.jsx("option",{value:E,children:E},E))]})]})})}),o.object_category&&TR[o.object_category]&&a.jsxs(nt,{children:[a.jsx("p",{className:"text-muted small",children:"...with these specific properties (optional):"}),TR[o.object_category].map(E=>a.jsx(ge,{md:4,children:a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{children:E.replace("_"," ")}),a.jsx(z.Control,{type:"text",value:o.constraints[E]||"",onChange:N=>C(E,N.target.value)})]})},E))]}),a.jsx("h5",{className:"mb-3 mt-4 border-bottom pb-2",children:"3. Define Quantity & Description"}),a.jsxs(nt,{children:[a.jsx(ge,{md:6,children:a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{children:"Quantity"}),a.jsx(z.Control,{type:"text",name:"quantity_formula",value:o.quantity_formula,onChange:j,placeholder:"e.g., 1 or num_panels"}),a.jsx(z.Text,{children:"Enter a number (e.g., 1) or a formula (e.g., num_panels)."})]})}),a.jsx(ge,{md:6,children:a.jsxs(z.Group,{className:"mb-3",children:[a.jsx(z.Label,{children:"User-Friendly Description"}),a.jsx(z.Control,{type:"text",name:"description",value:o.description,onChange:j,placeholder:"e.g., Requires a compatible 48V battery"})]})})]})]})}),a.jsxs(wt.Footer,{children:[a.jsx(Fe,{variant:"secondary",onClick:A,children:"Cancel"}),a.jsx(Fe,{variant:"primary",onClick:_,children:"Save Rule"})]})]})]})}const ehe=({name:t})=>{const e=v.useMemo(()=>{const[n="",s=""]=t.split(" ");return(n[0]||"").toUpperCase()+(s[0]||"").toUpperCase()},[t]);return a.jsx("div",{className:"jc-avatar",children:e||"•"})};function the(){const{id:t}=Vi();ms();const[e,n]=v.useState([]),[s,r]=v.useState(!1),[i,o]=v.useState(null),{user:c}=is(),[u,f]=v.useState(()=>c?.is_bum?"bum":"mine"),[m,h]=v.useState(void 0),g=async()=>{r(!0);try{const b=await RH({scope:u,status:m});n(b)}finally{r(!1)}};v.useEffect(()=>{g()},[]);const x=e;return a.jsxs("div",{className:"jc-wrap",children:[a.jsxs("div",{className:"jc-appbar",children:[a.jsx("div",{className:"jc-deviceslot"}),a.jsx("h1",{className:"jc-title",children:"Job Cards"}),a.jsx(as,{to:"/jobcards/new",className:"jc-add","aria-label":"Create job card",title:"Create job card",children:a.jsx("i",{className:"bi bi-plus-lg"})})]}),a.jsx("div",{className:"jc-feed",children:x.map(b=>a.jsxs(as,{to:`/jobcards/${b.id}`,className:"jc-card","aria-label":`Open job card ${b.client_name}`,children:[a.jsxs("div",{className:"jc-row jc-header",children:[a.jsx(ehe,{name:String(b.client_name)}),a.jsxs("div",{className:"jc-header-col",children:[a.jsx("div",{className:"jc-name",children:b.client_name}),a.jsxs("div",{className:"jc-sub",children:[b.created_at?b.created_at:"—",b.client_address?` in ${b.client_address}`:""]})]})]}),a.jsx("div",{className:"jc-body",children:b.description}),a.jsx("div",{className:"jc-divider"}),a.jsx("div",{className:"jc-row jc-footer",children:a.jsx("div",{className:"jc-meta-left",children:a.jsx("span",{className:"jc-tech",children:b.owner_name})})})]},b.id))})]})}var gm=t=>t.type==="checkbox",Rl=t=>t instanceof Date,Bs=t=>t==null;const J5=t=>typeof t=="object";var ts=t=>!Bs(t)&&!Array.isArray(t)&&J5(t)&&!Rl(t),eI=t=>ts(t)&&t.target?gm(t.target)?t.target.checked:t.target.value:t,nhe=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,tI=(t,e)=>t.has(nhe(e)),she=t=>{const e=t.constructor&&t.constructor.prototype;return ts(e)&&e.hasOwnProperty("isPrototypeOf")},$S=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function rs(t){let e;const n=Array.isArray(t),s=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(!($S&&(t instanceof Blob||s))&&(n||ts(t)))if(e=n?[]:Object.create(Object.getPrototypeOf(t)),!n&&!she(t))e=t;else for(const r in t)t.hasOwnProperty(r)&&(e[r]=rs(t[r]));else return t;return e}var Yx=t=>/^\w*$/.test(t),$n=t=>t===void 0,HS=t=>Array.isArray(t)?t.filter(Boolean):[],US=t=>HS(t.replace(/["|']|\]/g,"").split(/\.|\[/)),st=(t,e,n)=>{if(!e||!ts(t))return n;const s=(Yx(e)?[e]:US(e)).reduce((r,i)=>Bs(r)?r:r[i],t);return $n(s)||s===t?$n(t[e])?n:t[e]:s},pr=t=>typeof t=="boolean",dn=(t,e,n)=>{let s=-1;const r=Yx(e)?[e]:US(e),i=r.length,o=i-1;for(;++s<i;){const c=r[s];let u=n;if(s!==o){const f=t[c];u=ts(f)||Array.isArray(f)?f:isNaN(+r[s+1])?{}:[]}if(c==="__proto__"||c==="constructor"||c==="prototype")return;t[c]=u,t=t[c]}};const Py={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},sa={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},fi={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},nI=fe.createContext(null);nI.displayName="HookFormContext";const WS=()=>fe.useContext(nI);var sI=(t,e,n,s=!0)=>{const r={defaultValues:e._defaultValues};for(const i in t)Object.defineProperty(r,i,{get:()=>{const o=i;return e._proxyFormState[o]!==sa.all&&(e._proxyFormState[o]=!s||sa.all),n&&(n[o]=!0),t[o]}});return r};const YS=typeof window<"u"?fe.useLayoutEffect:fe.useEffect;function rhe(t){const e=WS(),{control:n=e.control,disabled:s,name:r,exact:i}=t||{},[o,c]=fe.useState(n._formState),u=fe.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return YS(()=>n._subscribe({name:r,formState:u.current,exact:i,callback:f=>{!s&&c({...n._formState,...f})}}),[r,s,i]),fe.useEffect(()=>{u.current.isValid&&n._setValid(!0)},[n]),fe.useMemo(()=>sI(o,n,u.current,!1),[o,n])}var yr=t=>typeof t=="string",rI=(t,e,n,s,r)=>yr(t)?(s&&e.watch.add(t),st(n,t,r)):Array.isArray(t)?t.map(i=>(s&&e.watch.add(i),st(n,i))):(s&&(e.watchAll=!0),n),aw=t=>Bs(t)||!J5(t);function xi(t,e,n=new WeakSet){if(aw(t)||aw(e))return t===e;if(Rl(t)&&Rl(e))return t.getTime()===e.getTime();const s=Object.keys(t),r=Object.keys(e);if(s.length!==r.length)return!1;if(n.has(t)||n.has(e))return!0;n.add(t),n.add(e);for(const i of s){const o=t[i];if(!r.includes(i))return!1;if(i!=="ref"){const c=e[i];if(Rl(o)&&Rl(c)||ts(o)&&ts(c)||Array.isArray(o)&&Array.isArray(c)?!xi(o,c,n):o!==c)return!1}}return!0}function ahe(t){const e=WS(),{control:n=e.control,name:s,defaultValue:r,disabled:i,exact:o,compute:c}=t||{},u=fe.useRef(r),f=fe.useRef(c),m=fe.useRef(void 0);f.current=c;const h=fe.useMemo(()=>n._getWatch(s,u.current),[n,s]),[g,x]=fe.useState(f.current?f.current(h):h);return YS(()=>n._subscribe({name:s,formState:{values:!0},exact:o,callback:b=>{if(!i){const A=rI(s,n._names,b.values||n._formValues,!1,u.current);if(f.current){const _=f.current(A);xi(_,m.current)||(x(_),m.current=_)}else x(A)}}}),[n,i,s,o]),fe.useEffect(()=>n._removeUnmounted()),g}function ihe(t){const e=WS(),{name:n,disabled:s,control:r=e.control,shouldUnregister:i,defaultValue:o}=t,c=tI(r._names.array,n),u=fe.useMemo(()=>st(r._formValues,n,st(r._defaultValues,n,o)),[r,n,o]),f=ahe({control:r,name:n,defaultValue:u,exact:!0}),m=rhe({control:r,name:n,exact:!0}),h=fe.useRef(t),g=fe.useRef(void 0),x=fe.useRef(r.register(n,{...t.rules,value:f,...pr(t.disabled)?{disabled:t.disabled}:{}}));h.current=t;const b=fe.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!st(m.errors,n)},isDirty:{enumerable:!0,get:()=>!!st(m.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!st(m.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!st(m.validatingFields,n)},error:{enumerable:!0,get:()=>st(m.errors,n)}}),[m,n]),A=fe.useCallback(k=>x.current.onChange({target:{value:eI(k),name:n},type:Py.CHANGE}),[n]),_=fe.useCallback(()=>x.current.onBlur({target:{value:st(r._formValues,n),name:n},type:Py.BLUR}),[n,r._formValues]),j=fe.useCallback(k=>{const E=st(r._fields,n);E&&k&&(E._f.ref={focus:()=>k.focus&&k.focus(),select:()=>k.select&&k.select(),setCustomValidity:N=>k.setCustomValidity(N),reportValidity:()=>k.reportValidity()})},[r._fields,n]),C=fe.useMemo(()=>({name:n,value:f,...pr(s)||m.disabled?{disabled:m.disabled||s}:{},onChange:A,onBlur:_,ref:j}),[n,s,m.disabled,A,_,j,f]);return fe.useEffect(()=>{const k=r._options.shouldUnregister||i,E=g.current;E&&E!==n&&!c&&r.unregister(E),r.register(n,{...h.current.rules,...pr(h.current.disabled)?{disabled:h.current.disabled}:{}});const N=(L,M)=>{const T=st(r._fields,L);T&&T._f&&(T._f.mount=M)};if(N(n,!0),k){const L=rs(st(r._options.defaultValues,n));dn(r._defaultValues,n,L),$n(st(r._formValues,n))&&dn(r._formValues,n,L)}return!c&&r.register(n),g.current=n,()=>{(c?k&&!r._state.action:k)?r.unregister(n):N(n,!1)}},[n,r,c,i]),fe.useEffect(()=>{r._setDisabledField({disabled:s,name:n})},[s,n,r]),fe.useMemo(()=>({field:C,formState:m,fieldState:b}),[C,m,b])}const MR=t=>t.render(ihe(t));var aI=(t,e,n,s,r)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[s]:r||!0}}:{},ih=t=>Array.isArray(t)?t:[t],RR=()=>{let t=[];return{get observers(){return t},next:r=>{for(const i of t)i.next&&i.next(r)},subscribe:r=>(t.push(r),{unsubscribe:()=>{t=t.filter(i=>i!==r)}}),unsubscribe:()=>{t=[]}}};function iI(t,e){const n={};for(const s in t)if(t.hasOwnProperty(s)){const r=t[s],i=e[s];if(r&&ts(r)&&i){const o=iI(r,i);ts(o)&&(n[s]=o)}else t[s]&&(n[s]=i)}return n}var Qs=t=>ts(t)&&!Object.keys(t).length,qS=t=>t.type==="file",ra=t=>typeof t=="function",Ly=t=>{if(!$S)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},oI=t=>t.type==="select-multiple",GS=t=>t.type==="radio",ohe=t=>GS(t)||gm(t),M_=t=>Ly(t)&&t.isConnected;function lhe(t,e){const n=e.slice(0,-1).length;let s=0;for(;s<n;)t=$n(t)?s++:t[e[s++]];return t}function che(t){for(const e in t)if(t.hasOwnProperty(e)&&!$n(t[e]))return!1;return!0}function Kn(t,e){const n=Array.isArray(e)?e:Yx(e)?[e]:US(e),s=n.length===1?t:lhe(t,n),r=n.length-1,i=n[r];return s&&delete s[i],r!==0&&(ts(s)&&Qs(s)||Array.isArray(s)&&che(s))&&Kn(t,n.slice(0,-1)),t}var uhe=t=>{for(const e in t)if(ra(t[e]))return!0;return!1};function lI(t){return Array.isArray(t)||ts(t)&&!uhe(t)}function iw(t,e={}){for(const n in t)lI(t[n])?(e[n]=Array.isArray(t[n])?[]:{},iw(t[n],e[n])):Bs(t[n])||(e[n]=!0);return e}function su(t,e,n){n||(n=iw(e));for(const s in t)lI(t[s])?$n(e)||aw(n[s])?n[s]=iw(t[s],Array.isArray(t[s])?[]:{}):su(t[s],Bs(e)?{}:e[s],n[s]):n[s]=!xi(t[s],e[s]);return n}const OR={value:!1,isValid:!1},PR={value:!0,isValid:!0};var cI=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!$n(t[0].attributes.value)?$n(t[0].value)||t[0].value===""?PR:{value:t[0].value,isValid:!0}:PR:OR}return OR},uI=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:s})=>$n(t)?t:e?t===""?NaN:t&&+t:n&&yr(t)?new Date(t):s?s(t):t;const LR={isValid:!1,value:null};var dI=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,LR):LR;function FR(t){const e=t.ref;return qS(e)?e.files:GS(e)?dI(t.refs).value:oI(e)?[...e.selectedOptions].map(({value:n})=>n):gm(e)?cI(t.refs).value:uI($n(e.value)?t.ref.value:e.value,t)}var dhe=(t,e,n,s)=>{const r={};for(const i of t){const o=st(e,i);o&&dn(r,i,o._f)}return{criteriaMode:n,names:[...t],fields:r,shouldUseNativeValidation:s}},Fy=t=>t instanceof RegExp,Df=t=>$n(t)?t:Fy(t)?t.source:ts(t)?Fy(t.value)?t.value.source:t.value:t,BR=t=>({isOnSubmit:!t||t===sa.onSubmit,isOnBlur:t===sa.onBlur,isOnChange:t===sa.onChange,isOnAll:t===sa.all,isOnTouch:t===sa.onTouched});const IR="AsyncFunction";var fhe=t=>!!t&&!!t.validate&&!!(ra(t.validate)&&t.validate.constructor.name===IR||ts(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===IR)),hhe=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),VR=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(s=>t.startsWith(s)&&/^\.\w+/.test(t.slice(s.length))));const oh=(t,e,n,s)=>{for(const r of n||Object.keys(t)){const i=st(t,r);if(i){const{_f:o,...c}=i;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],r)&&!s)return!0;if(o.ref&&e(o.ref,o.name)&&!s)return!0;if(oh(c,e))break}else if(ts(c)&&oh(c,e))break}}};function zR(t,e,n){const s=st(t,n);if(s||Yx(n))return{error:s,name:n};const r=n.split(".");for(;r.length;){const i=r.join("."),o=st(e,i),c=st(t,i);if(o&&!Array.isArray(o)&&n!==i)return{name:n};if(c&&c.type)return{name:i,error:c};if(c&&c.root&&c.root.type)return{name:`${i}.root`,error:c.root};r.pop()}return{name:n}}var mhe=(t,e,n,s)=>{n(t);const{name:r,...i}=t;return Qs(i)||Object.keys(i).length>=Object.keys(e).length||Object.keys(i).find(o=>e[o]===(!s||sa.all))},phe=(t,e,n)=>!t||!e||t===e||ih(t).some(s=>s&&(n?s===e:s.startsWith(e)||e.startsWith(s))),ghe=(t,e,n,s,r)=>r.isOnAll?!1:!n&&r.isOnTouch?!(e||t):(n?s.isOnBlur:r.isOnBlur)?!t:(n?s.isOnChange:r.isOnChange)?t:!0,yhe=(t,e)=>!HS(st(t,e)).length&&Kn(t,e),xhe=(t,e,n)=>{const s=ih(st(t,n));return dn(s,"root",e[n]),dn(t,n,s),t};function $R(t,e,n="validate"){if(yr(t)||Array.isArray(t)&&t.every(yr)||pr(t)&&!t)return{type:n,message:yr(t)?t:"",ref:e}}var tu=t=>ts(t)&&!Fy(t)?t:{value:t,message:""},HR=async(t,e,n,s,r,i)=>{const{ref:o,refs:c,required:u,maxLength:f,minLength:m,min:h,max:g,pattern:x,validate:b,name:A,valueAsNumber:_,mount:j}=t._f,C=st(n,A);if(!j||e.has(A))return{};const k=c?c[0]:o,E=H=>{r&&k.reportValidity&&(k.setCustomValidity(pr(H)?"":H||""),k.reportValidity())},N={},L=GS(o),M=gm(o),T=L||M,O=(_||qS(o))&&$n(o.value)&&$n(C)||Ly(o)&&o.value===""||C===""||Array.isArray(C)&&!C.length,I=aI.bind(null,A,s,N),$=(H,V,G,U=fi.maxLength,R=fi.minLength)=>{const P=H?V:G;N[A]={type:H?U:R,message:P,ref:o,...I(H?U:R,P)}};if(i?!Array.isArray(C)||!C.length:u&&(!T&&(O||Bs(C))||pr(C)&&!C||M&&!cI(c).isValid||L&&!dI(c).isValid)){const{value:H,message:V}=yr(u)?{value:!!u,message:u}:tu(u);if(H&&(N[A]={type:fi.required,message:V,ref:k,...I(fi.required,V)},!s))return E(V),N}if(!O&&(!Bs(h)||!Bs(g))){let H,V;const G=tu(g),U=tu(h);if(!Bs(C)&&!isNaN(C)){const R=o.valueAsNumber||C&&+C;Bs(G.value)||(H=R>G.value),Bs(U.value)||(V=R<U.value)}else{const R=o.valueAsDate||new Date(C),P=D=>new Date(new Date().toDateString()+" "+D),Z=o.type=="time",ne=o.type=="week";yr(G.value)&&C&&(H=Z?P(C)>P(G.value):ne?C>G.value:R>new Date(G.value)),yr(U.value)&&C&&(V=Z?P(C)<P(U.value):ne?C<U.value:R<new Date(U.value))}if((H||V)&&($(!!H,G.message,U.message,fi.max,fi.min),!s))return E(N[A].message),N}if((f||m)&&!O&&(yr(C)||i&&Array.isArray(C))){const H=tu(f),V=tu(m),G=!Bs(H.value)&&C.length>+H.value,U=!Bs(V.value)&&C.length<+V.value;if((G||U)&&($(G,H.message,V.message),!s))return E(N[A].message),N}if(x&&!O&&yr(C)){const{value:H,message:V}=tu(x);if(Fy(H)&&!C.match(H)&&(N[A]={type:fi.pattern,message:V,ref:o,...I(fi.pattern,V)},!s))return E(V),N}if(b){if(ra(b)){const H=await b(C,n),V=$R(H,k);if(V&&(N[A]={...V,...I(fi.validate,V.message)},!s))return E(V.message),N}else if(ts(b)){let H={};for(const V in b){if(!Qs(H)&&!s)break;const G=$R(await b[V](C,n),k,V);G&&(H={...G,...I(V,G.message)},E(G.message),s&&(N[A]=H))}if(!Qs(H)&&(N[A]={ref:k,...H},!s))return N}}return E(!0),N};const bhe={mode:sa.onSubmit,reValidateMode:sa.onChange,shouldFocusError:!0};function vhe(t={}){let e={...bhe,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:ra(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},s={},r=ts(e.defaultValues)||ts(e.values)?rs(e.defaultValues||e.values)||{}:{},i=e.shouldUnregister?{}:rs(r),o={action:!1,mount:!1,watch:!1},c={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},u,f=0;const m={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let h={...m};const g={array:RR(),state:RR()},x=e.criteriaMode===sa.all,b=q=>oe=>{clearTimeout(f),f=setTimeout(q,oe)},A=async q=>{if(!e.disabled&&(m.isValid||h.isValid||q)){const oe=e.resolver?Qs((await M()).errors):await O(s,!0);oe!==n.isValid&&g.state.next({isValid:oe})}},_=(q,oe)=>{!e.disabled&&(m.isValidating||m.validatingFields||h.isValidating||h.validatingFields)&&((q||Array.from(c.mount)).forEach(Ae=>{Ae&&(oe?dn(n.validatingFields,Ae,oe):Kn(n.validatingFields,Ae))}),g.state.next({validatingFields:n.validatingFields,isValidating:!Qs(n.validatingFields)}))},j=(q,oe=[],Ae,He,We=!0,Ve=!0)=>{if(He&&Ae&&!e.disabled){if(o.action=!0,Ve&&Array.isArray(st(s,q))){const ee=Ae(st(s,q),He.argA,He.argB);We&&dn(s,q,ee)}if(Ve&&Array.isArray(st(n.errors,q))){const ee=Ae(st(n.errors,q),He.argA,He.argB);We&&dn(n.errors,q,ee),yhe(n.errors,q)}if((m.touchedFields||h.touchedFields)&&Ve&&Array.isArray(st(n.touchedFields,q))){const ee=Ae(st(n.touchedFields,q),He.argA,He.argB);We&&dn(n.touchedFields,q,ee)}(m.dirtyFields||h.dirtyFields)&&(n.dirtyFields=su(r,i)),g.state.next({name:q,isDirty:$(q,oe),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else dn(i,q,oe)},C=(q,oe)=>{dn(n.errors,q,oe),g.state.next({errors:n.errors})},k=q=>{n.errors=q,g.state.next({errors:n.errors,isValid:!1})},E=(q,oe,Ae,He)=>{const We=st(s,q);if(We){const Ve=st(i,q,$n(Ae)?st(r,q):Ae);$n(Ve)||He&&He.defaultChecked||oe?dn(i,q,oe?Ve:FR(We._f)):G(q,Ve),o.mount&&A()}},N=(q,oe,Ae,He,We)=>{let Ve=!1,ee=!1;const De={name:q};if(!e.disabled){if(!Ae||He){(m.isDirty||h.isDirty)&&(ee=n.isDirty,n.isDirty=De.isDirty=$(),Ve=ee!==De.isDirty);const be=xi(st(r,q),oe);ee=!!st(n.dirtyFields,q),be?Kn(n.dirtyFields,q):dn(n.dirtyFields,q,!0),De.dirtyFields=n.dirtyFields,Ve=Ve||(m.dirtyFields||h.dirtyFields)&&ee!==!be}if(Ae){const be=st(n.touchedFields,q);be||(dn(n.touchedFields,q,Ae),De.touchedFields=n.touchedFields,Ve=Ve||(m.touchedFields||h.touchedFields)&&be!==Ae)}Ve&&We&&g.state.next(De)}return Ve?De:{}},L=(q,oe,Ae,He)=>{const We=st(n.errors,q),Ve=(m.isValid||h.isValid)&&pr(oe)&&n.isValid!==oe;if(e.delayError&&Ae?(u=b(()=>C(q,Ae)),u(e.delayError)):(clearTimeout(f),u=null,Ae?dn(n.errors,q,Ae):Kn(n.errors,q)),(Ae?!xi(We,Ae):We)||!Qs(He)||Ve){const ee={...He,...Ve&&pr(oe)?{isValid:oe}:{},errors:n.errors,name:q};n={...n,...ee},g.state.next(ee)}},M=async q=>{_(q,!0);const oe=await e.resolver(i,e.context,dhe(q||c.mount,s,e.criteriaMode,e.shouldUseNativeValidation));return _(q),oe},T=async q=>{const{errors:oe}=await M(q);if(q)for(const Ae of q){const He=st(oe,Ae);He?dn(n.errors,Ae,He):Kn(n.errors,Ae)}else n.errors=oe;return oe},O=async(q,oe,Ae={valid:!0})=>{for(const He in q){const We=q[He];if(We){const{_f:Ve,...ee}=We;if(Ve){const De=c.array.has(Ve.name),be=We._f&&fhe(We._f);be&&m.validatingFields&&_([Ve.name],!0);const J=await HR(We,c.disabled,i,x,e.shouldUseNativeValidation&&!oe,De);if(be&&m.validatingFields&&_([Ve.name]),J[Ve.name]&&(Ae.valid=!1,oe))break;!oe&&(st(J,Ve.name)?De?xhe(n.errors,J,Ve.name):dn(n.errors,Ve.name,J[Ve.name]):Kn(n.errors,Ve.name))}!Qs(ee)&&await O(ee,oe,Ae)}}return Ae.valid},I=()=>{for(const q of c.unMount){const oe=st(s,q);oe&&(oe._f.refs?oe._f.refs.every(Ae=>!M_(Ae)):!M_(oe._f.ref))&&de(q)}c.unMount=new Set},$=(q,oe)=>!e.disabled&&(q&&oe&&dn(i,q,oe),!xi(D(),r)),H=(q,oe,Ae)=>rI(q,c,{...o.mount?i:$n(oe)?r:yr(q)?{[q]:oe}:oe},Ae,oe),V=q=>HS(st(o.mount?i:r,q,e.shouldUnregister?st(r,q,[]):[])),G=(q,oe,Ae={})=>{const He=st(s,q);let We=oe;if(He){const Ve=He._f;Ve&&(!Ve.disabled&&dn(i,q,uI(oe,Ve)),We=Ly(Ve.ref)&&Bs(oe)?"":oe,oI(Ve.ref)?[...Ve.ref.options].forEach(ee=>ee.selected=We.includes(ee.value)):Ve.refs?gm(Ve.ref)?Ve.refs.forEach(ee=>{(!ee.defaultChecked||!ee.disabled)&&(Array.isArray(We)?ee.checked=!!We.find(De=>De===ee.value):ee.checked=We===ee.value||!!We)}):Ve.refs.forEach(ee=>ee.checked=ee.value===We):qS(Ve.ref)?Ve.ref.value="":(Ve.ref.value=We,Ve.ref.type||g.state.next({name:q,values:rs(i)})))}(Ae.shouldDirty||Ae.shouldTouch)&&N(q,We,Ae.shouldTouch,Ae.shouldDirty,!0),Ae.shouldValidate&&ne(q)},U=(q,oe,Ae)=>{for(const He in oe){if(!oe.hasOwnProperty(He))return;const We=oe[He],Ve=q+"."+He,ee=st(s,Ve);(c.array.has(q)||ts(We)||ee&&!ee._f)&&!Rl(We)?U(Ve,We,Ae):G(Ve,We,Ae)}},R=(q,oe,Ae={})=>{const He=st(s,q),We=c.array.has(q),Ve=rs(oe);dn(i,q,Ve),We?(g.array.next({name:q,values:rs(i)}),(m.isDirty||m.dirtyFields||h.isDirty||h.dirtyFields)&&Ae.shouldDirty&&g.state.next({name:q,dirtyFields:su(r,i),isDirty:$(q,Ve)})):He&&!He._f&&!Bs(Ve)?U(q,Ve,Ae):G(q,Ve,Ae),VR(q,c)&&g.state.next({...n,name:q}),g.state.next({name:o.mount?q:void 0,values:rs(i)})},P=async q=>{o.mount=!0;const oe=q.target;let Ae=oe.name,He=!0;const We=st(s,Ae),Ve=be=>{He=Number.isNaN(be)||Rl(be)&&isNaN(be.getTime())||xi(be,st(i,Ae,be))},ee=BR(e.mode),De=BR(e.reValidateMode);if(We){let be,J;const ie=oe.type?FR(We._f):eI(q),Be=q.type===Py.BLUR||q.type===Py.FOCUS_OUT,$e=!hhe(We._f)&&!e.resolver&&!st(n.errors,Ae)&&!We._f.deps||ghe(Be,st(n.touchedFields,Ae),n.isSubmitted,De,ee),Y=VR(Ae,c,Be);dn(i,Ae,ie),Be?(!oe||!oe.readOnly)&&(We._f.onBlur&&We._f.onBlur(q),u&&u(0)):We._f.onChange&&We._f.onChange(q);const pe=N(Ae,ie,Be),we=!Qs(pe)||Y;if(!Be&&g.state.next({name:Ae,type:q.type,values:rs(i)}),$e)return(m.isValid||h.isValid)&&(e.mode==="onBlur"?Be&&A():Be||A()),we&&g.state.next({name:Ae,...Y?{}:pe});if(!Be&&Y&&g.state.next({...n}),e.resolver){const{errors:ze}=await M([Ae]);if(Ve(ie),He){const ve=zR(n.errors,s,Ae),Le=zR(ze,s,ve.name||Ae);be=Le.error,Ae=Le.name,J=Qs(ze)}}else _([Ae],!0),be=(await HR(We,c.disabled,i,x,e.shouldUseNativeValidation))[Ae],_([Ae]),Ve(ie),He&&(be?J=!1:(m.isValid||h.isValid)&&(J=await O(s,!0)));He&&(We._f.deps&&(!Array.isArray(We._f.deps)||We._f.deps.length>0)&&ne(We._f.deps),L(Ae,J,be,pe))}},Z=(q,oe)=>{if(st(n.errors,oe)&&q.focus)return q.focus(),1},ne=async(q,oe={})=>{let Ae,He;const We=ih(q);if(e.resolver){const Ve=await T($n(q)?q:We);Ae=Qs(Ve),He=q?!We.some(ee=>st(Ve,ee)):Ae}else q?(He=(await Promise.all(We.map(async Ve=>{const ee=st(s,Ve);return await O(ee&&ee._f?{[Ve]:ee}:ee)}))).every(Boolean),!(!He&&!n.isValid)&&A()):He=Ae=await O(s);return g.state.next({...!yr(q)||(m.isValid||h.isValid)&&Ae!==n.isValid?{}:{name:q},...e.resolver||!q?{isValid:Ae}:{},errors:n.errors}),oe.shouldFocus&&!He&&oh(s,Z,q?We:c.mount),He},D=(q,oe)=>{let Ae={...o.mount?i:r};return oe&&(Ae=iI(oe.dirtyFields?n.dirtyFields:n.touchedFields,Ae)),$n(q)?Ae:yr(q)?st(Ae,q):q.map(He=>st(Ae,He))},B=(q,oe)=>({invalid:!!st((oe||n).errors,q),isDirty:!!st((oe||n).dirtyFields,q),error:st((oe||n).errors,q),isValidating:!!st(n.validatingFields,q),isTouched:!!st((oe||n).touchedFields,q)}),se=q=>{q&&ih(q).forEach(oe=>Kn(n.errors,oe)),g.state.next({errors:q?n.errors:{}})},le=(q,oe,Ae)=>{const He=(st(s,q,{_f:{}})._f||{}).ref,We=st(n.errors,q)||{},{ref:Ve,message:ee,type:De,...be}=We;dn(n.errors,q,{...be,...oe,ref:He}),g.state.next({name:q,errors:n.errors,isValid:!1}),Ae&&Ae.shouldFocus&&He&&He.focus&&He.focus()},ae=(q,oe)=>ra(q)?g.state.subscribe({next:Ae=>"values"in Ae&&q(H(void 0,oe),Ae)}):H(q,oe,!0),te=q=>g.state.subscribe({next:oe=>{phe(q.name,oe.name,q.exact)&&mhe(oe,q.formState||m,gt,q.reRenderRoot)&&q.callback({values:{...i},...n,...oe,defaultValues:r})}}).unsubscribe,X=q=>(o.mount=!0,h={...h,...q.formState},te({...q,formState:h})),de=(q,oe={})=>{for(const Ae of q?ih(q):c.mount)c.mount.delete(Ae),c.array.delete(Ae),oe.keepValue||(Kn(s,Ae),Kn(i,Ae)),!oe.keepError&&Kn(n.errors,Ae),!oe.keepDirty&&Kn(n.dirtyFields,Ae),!oe.keepTouched&&Kn(n.touchedFields,Ae),!oe.keepIsValidating&&Kn(n.validatingFields,Ae),!e.shouldUnregister&&!oe.keepDefaultValue&&Kn(r,Ae);g.state.next({values:rs(i)}),g.state.next({...n,...oe.keepDirty?{isDirty:$()}:{}}),!oe.keepIsValid&&A()},Ne=({disabled:q,name:oe})=>{(pr(q)&&o.mount||q||c.disabled.has(oe))&&(q?c.disabled.add(oe):c.disabled.delete(oe))},Ke=(q,oe={})=>{let Ae=st(s,q);const He=pr(oe.disabled)||pr(e.disabled);return dn(s,q,{...Ae||{},_f:{...Ae&&Ae._f?Ae._f:{ref:{name:q}},name:q,mount:!0,...oe}}),c.mount.add(q),Ae?Ne({disabled:pr(oe.disabled)?oe.disabled:e.disabled,name:q}):E(q,!0,oe.value),{...He?{disabled:oe.disabled||e.disabled}:{},...e.progressive?{required:!!oe.required,min:Df(oe.min),max:Df(oe.max),minLength:Df(oe.minLength),maxLength:Df(oe.maxLength),pattern:Df(oe.pattern)}:{},name:q,onChange:P,onBlur:P,ref:We=>{if(We){Ke(q,oe),Ae=st(s,q);const Ve=$n(We.value)&&We.querySelectorAll&&We.querySelectorAll("input,select,textarea")[0]||We,ee=ohe(Ve),De=Ae._f.refs||[];if(ee?De.find(be=>be===Ve):Ve===Ae._f.ref)return;dn(s,q,{_f:{...Ae._f,...ee?{refs:[...De.filter(M_),Ve,...Array.isArray(st(r,q))?[{}]:[]],ref:{type:Ve.type,name:q}}:{ref:Ve}}}),E(q,!1,void 0,Ve)}else Ae=st(s,q,{}),Ae._f&&(Ae._f.mount=!1),(e.shouldUnregister||oe.shouldUnregister)&&!(tI(c.array,q)&&o.action)&&c.unMount.add(q)}}},ce=()=>e.shouldFocusError&&oh(s,Z,c.mount),xe=q=>{pr(q)&&(g.state.next({disabled:q}),oh(s,(oe,Ae)=>{const He=st(s,Ae);He&&(oe.disabled=He._f.disabled||q,Array.isArray(He._f.refs)&&He._f.refs.forEach(We=>{We.disabled=He._f.disabled||q}))},0,!1))},Te=(q,oe)=>async Ae=>{let He;Ae&&(Ae.preventDefault&&Ae.preventDefault(),Ae.persist&&Ae.persist());let We=rs(i);if(g.state.next({isSubmitting:!0}),e.resolver){const{errors:Ve,values:ee}=await M();n.errors=Ve,We=rs(ee)}else await O(s);if(c.disabled.size)for(const Ve of c.disabled)Kn(We,Ve);if(Kn(n.errors,"root"),Qs(n.errors)){g.state.next({errors:{}});try{await q(We,Ae)}catch(Ve){He=Ve}}else oe&&await oe({...n.errors},Ae),ce(),setTimeout(ce);if(g.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Qs(n.errors)&&!He,submitCount:n.submitCount+1,errors:n.errors}),He)throw He},Ie=(q,oe={})=>{st(s,q)&&($n(oe.defaultValue)?R(q,rs(st(r,q))):(R(q,oe.defaultValue),dn(r,q,rs(oe.defaultValue))),oe.keepTouched||Kn(n.touchedFields,q),oe.keepDirty||(Kn(n.dirtyFields,q),n.isDirty=oe.defaultValue?$(q,rs(st(r,q))):$()),oe.keepError||(Kn(n.errors,q),m.isValid&&A()),g.state.next({...n}))},Ue=(q,oe={})=>{const Ae=q?rs(q):r,He=rs(Ae),We=Qs(q),Ve=We?r:He;if(oe.keepDefaultValues||(r=Ae),!oe.keepValues){if(oe.keepDirtyValues){const ee=new Set([...c.mount,...Object.keys(su(r,i))]);for(const De of Array.from(ee))st(n.dirtyFields,De)?dn(Ve,De,st(i,De)):R(De,st(Ve,De))}else{if($S&&$n(q))for(const ee of c.mount){const De=st(s,ee);if(De&&De._f){const be=Array.isArray(De._f.refs)?De._f.refs[0]:De._f.ref;if(Ly(be)){const J=be.closest("form");if(J){J.reset();break}}}}if(oe.keepFieldsRef)for(const ee of c.mount)R(ee,st(Ve,ee));else s={}}i=e.shouldUnregister?oe.keepDefaultValues?rs(r):{}:rs(Ve),g.array.next({values:{...Ve}}),g.state.next({values:{...Ve}})}c={mount:oe.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!m.isValid||!!oe.keepIsValid||!!oe.keepDirtyValues,o.watch=!!e.shouldUnregister,g.state.next({submitCount:oe.keepSubmitCount?n.submitCount:0,isDirty:We?!1:oe.keepDirty?n.isDirty:!!(oe.keepDefaultValues&&!xi(q,r)),isSubmitted:oe.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:We?{}:oe.keepDirtyValues?oe.keepDefaultValues&&i?su(r,i):n.dirtyFields:oe.keepDefaultValues&&q?su(r,q):oe.keepDirty?n.dirtyFields:{},touchedFields:oe.keepTouched?n.touchedFields:{},errors:oe.keepErrors?n.errors:{},isSubmitSuccessful:oe.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:r})},Ze=(q,oe)=>Ue(ra(q)?q(i):q,oe),mt=(q,oe={})=>{const Ae=st(s,q),He=Ae&&Ae._f;if(He){const We=He.refs?He.refs[0]:He.ref;We.focus&&(We.focus(),oe.shouldSelect&&ra(We.select)&&We.select())}},gt=q=>{n={...n,...q}},Pe={control:{register:Ke,unregister:de,getFieldState:B,handleSubmit:Te,setError:le,_subscribe:te,_runSchema:M,_focusError:ce,_getWatch:H,_getDirty:$,_setValid:A,_setFieldArray:j,_setDisabledField:Ne,_setErrors:k,_getFieldArray:V,_reset:Ue,_resetDefaultValues:()=>ra(e.defaultValues)&&e.defaultValues().then(q=>{Ze(q,e.resetOptions),g.state.next({isLoading:!1})}),_removeUnmounted:I,_disableForm:xe,_subjects:g,_proxyFormState:m,get _fields(){return s},get _formValues(){return i},get _state(){return o},set _state(q){o=q},get _defaultValues(){return r},get _names(){return c},set _names(q){c=q},get _formState(){return n},get _options(){return e},set _options(q){e={...e,...q}}},subscribe:X,trigger:ne,register:Ke,handleSubmit:Te,watch:ae,setValue:R,getValues:D,reset:Ze,resetField:Ie,clearErrors:se,unregister:de,setError:le,setFocus:mt,getFieldState:B};return{...Pe,formControl:Pe}}function _he(t={}){const e=fe.useRef(void 0),n=fe.useRef(void 0),[s,r]=fe.useState({isDirty:!1,isValidating:!1,isLoading:ra(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:ra(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:s},t.defaultValues&&!ra(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:o,...c}=vhe(t);e.current={...c,formState:s}}const i=e.current.control;return i._options=t,YS(()=>{const o=i._subscribe({formState:i._proxyFormState,callback:()=>r({...i._formState}),reRenderRoot:!0});return r(c=>({...c,isReady:!0})),i._formState.isReady=!0,o},[i]),fe.useEffect(()=>i._disableForm(t.disabled),[i,t.disabled]),fe.useEffect(()=>{t.mode&&(i._options.mode=t.mode),t.reValidateMode&&(i._options.reValidateMode=t.reValidateMode)},[i,t.mode,t.reValidateMode]),fe.useEffect(()=>{t.errors&&(i._setErrors(t.errors),i._focusError())},[i,t.errors]),fe.useEffect(()=>{t.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,t.shouldUnregister]),fe.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==s.isDirty&&i._subjects.state.next({isDirty:o})}},[i,s.isDirty]),fe.useEffect(()=>{t.values&&!xi(t.values,n.current)?(i._reset(t.values,{keepFieldsRef:!0,...i._options.resetOptions}),n.current=t.values,r(o=>({...o}))):i._resetDefaultValues()},[i,t.values]),fe.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),e.current.formState=sI(s,i),e.current}const UR=(t,e,n)=>{if(t&&"reportValidity"in t){const s=st(n,e);t.setCustomValidity(s&&s.message||""),t.reportValidity()}},fI=(t,e)=>{for(const n in e.fields){const s=e.fields[n];s&&s.ref&&"reportValidity"in s.ref?UR(s.ref,n,t):s.refs&&s.refs.forEach(r=>UR(r,n,t))}},Ahe=(t,e)=>{e.shouldUseNativeValidation&&fI(t,e);const n={};for(const s in t){const r=st(e.fields,s),i=Object.assign(t[s]||{},{ref:r&&r.ref});if(whe(e.names||Object.keys(t),s)){const o=Object.assign({},st(n,s));dn(o,"root",i),dn(n,s,o)}else dn(n,s,i)}return n},whe=(t,e)=>t.some(n=>n.startsWith(e+"."));var jhe=function(t,e){for(var n={};t.length;){var s=t[0],r=s.code,i=s.message,o=s.path.join(".");if(!n[o])if("unionErrors"in s){var c=s.unionErrors[0].errors[0];n[o]={message:c.message,type:c.code}}else n[o]={message:i,type:r};if("unionErrors"in s&&s.unionErrors.forEach(function(m){return m.errors.forEach(function(h){return t.push(h)})}),e){var u=n[o].types,f=u&&u[s.code];n[o]=aI(o,e,n,r,f?[].concat(f,s.message):s.message)}t.shift()}return n},She=function(t,e,n){return n===void 0&&(n={}),function(s,r,i){try{return Promise.resolve((function(o,c){try{var u=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](s,e)).then(function(f){return i.shouldUseNativeValidation&&fI({},i),{errors:{},values:n.raw?s:f}})}catch(f){return c(f)}return u&&u.then?u.then(void 0,c):u})(0,function(o){if((function(c){return Array.isArray(c?.errors)})(o))return{values:{},errors:Ahe(jhe(o.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw o}))}catch(o){return Promise.reject(o)}}},Xt;(function(t){t.assertEqual=r=>{};function e(r){}t.assertIs=e;function n(r){throw new Error}t.assertNever=n,t.arrayToEnum=r=>{const i={};for(const o of r)i[o]=o;return i},t.getValidEnumValues=r=>{const i=t.objectKeys(r).filter(c=>typeof r[r[c]]!="number"),o={};for(const c of i)o[c]=r[c];return t.objectValues(o)},t.objectValues=r=>t.objectKeys(r).map(function(i){return r[i]}),t.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{const i=[];for(const o in r)Object.prototype.hasOwnProperty.call(r,o)&&i.push(o);return i},t.find=(r,i)=>{for(const o of r)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&Number.isFinite(r)&&Math.floor(r)===r;function s(r,i=" | "){return r.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=s,t.jsonStringifyReplacer=(r,i)=>typeof i=="bigint"?i.toString():i})(Xt||(Xt={}));var WR;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(WR||(WR={}));const ft=Xt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),bo=t=>{switch(typeof t){case"undefined":return ft.undefined;case"string":return ft.string;case"number":return Number.isNaN(t)?ft.nan:ft.number;case"boolean":return ft.boolean;case"function":return ft.function;case"bigint":return ft.bigint;case"symbol":return ft.symbol;case"object":return Array.isArray(t)?ft.array:t===null?ft.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ft.promise:typeof Map<"u"&&t instanceof Map?ft.map:typeof Set<"u"&&t instanceof Set?ft.set:typeof Date<"u"&&t instanceof Date?ft.date:ft.object;default:return ft.unknown}},et=Xt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Ii extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(i){return i.message},s={_errors:[]},r=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(r);else if(o.code==="invalid_return_type")r(o.returnTypeError);else if(o.code==="invalid_arguments")r(o.argumentsError);else if(o.path.length===0)s._errors.push(n(o));else{let c=s,u=0;for(;u<o.path.length;){const f=o.path[u];u===o.path.length-1?(c[f]=c[f]||{_errors:[]},c[f]._errors.push(n(o))):c[f]=c[f]||{_errors:[]},c=c[f],u++}}};return r(this),s}static assert(e){if(!(e instanceof Ii))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Xt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},s=[];for(const r of this.issues)if(r.path.length>0){const i=r.path[0];n[i]=n[i]||[],n[i].push(e(r))}else s.push(e(r));return{formErrors:s,fieldErrors:n}}get formErrors(){return this.flatten()}}Ii.create=t=>new Ii(t);const ow=(t,e)=>{let n;switch(t.code){case et.invalid_type:t.received===ft.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case et.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Xt.jsonStringifyReplacer)}`;break;case et.unrecognized_keys:n=`Unrecognized key(s) in object: ${Xt.joinValues(t.keys,", ")}`;break;case et.invalid_union:n="Invalid input";break;case et.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Xt.joinValues(t.options)}`;break;case et.invalid_enum_value:n=`Invalid enum value. Expected ${Xt.joinValues(t.options)}, received '${t.received}'`;break;case et.invalid_arguments:n="Invalid function arguments";break;case et.invalid_return_type:n="Invalid function return type";break;case et.invalid_date:n="Invalid date";break;case et.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Xt.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case et.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case et.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case et.custom:n="Invalid input";break;case et.invalid_intersection_types:n="Intersection results could not be merged";break;case et.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case et.not_finite:n="Number must be finite";break;default:n=e.defaultError,Xt.assertNever(t)}return{message:n}};let Che=ow;function Nhe(){return Che}const khe=t=>{const{data:e,path:n,errorMaps:s,issueData:r}=t,i=[...n,...r.path||[]],o={...r,path:i};if(r.message!==void 0)return{...r,path:i,message:r.message};let c="";const u=s.filter(f=>!!f).slice().reverse();for(const f of u)c=f(o,{data:e,defaultError:c}).message;return{...r,path:i,message:c}};function lt(t,e){const n=Nhe(),s=khe({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===ow?void 0:ow].filter(r=>!!r)});t.common.issues.push(s)}class _r{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const s=[];for(const r of n){if(r.status==="aborted")return Et;r.status==="dirty"&&e.dirty(),s.push(r.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,n){const s=[];for(const r of n){const i=await r.key,o=await r.value;s.push({key:i,value:o})}return _r.mergeObjectSync(e,s)}static mergeObjectSync(e,n){const s={};for(const r of n){const{key:i,value:o}=r;if(i.status==="aborted"||o.status==="aborted")return Et;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||r.alwaysSet)&&(s[i.value]=o.value)}return{status:e.value,value:s}}}const Et=Object.freeze({status:"aborted"}),Hf=t=>({status:"dirty",value:t}),Kr=t=>({status:"valid",value:t}),YR=t=>t.status==="aborted",qR=t=>t.status==="dirty",Lu=t=>t.status==="valid",By=t=>typeof Promise<"u"&&t instanceof Promise;var ht;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(ht||(ht={}));class Io{constructor(e,n,s,r){this._cachedPath=[],this.parent=e,this.data=n,this._path=s,this._key=r}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const GR=(t,e)=>{if(Lu(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Ii(t.common.issues);return this._error=n,this._error}}};function $t(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:s,description:r}=t;if(e&&(n||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(o,c)=>{const{message:u}=t;return o.code==="invalid_enum_value"?{message:u??c.defaultError}:typeof c.data>"u"?{message:u??s??c.defaultError}:o.code!=="invalid_type"?{message:c.defaultError}:{message:u??n??c.defaultError}},description:r}}class Kt{get description(){return this._def.description}_getType(e){return bo(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:bo(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new _r,ctx:{common:e.parent.common,data:e.data,parsedType:bo(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(By(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const s=this.safeParse(e,n);if(s.success)return s.data;throw s.error}safeParse(e,n){const s={common:{issues:[],async:n?.async??!1,contextualErrorMap:n?.errorMap},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:bo(e)},r=this._parseSync({data:e,path:s.path,parent:s});return GR(s,r)}"~validate"(e){const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:bo(e)};if(!this["~standard"].async)try{const s=this._parseSync({data:e,path:[],parent:n});return Lu(s)?{value:s.value}:{issues:n.common.issues}}catch(s){s?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(s=>Lu(s)?{value:s.value}:{issues:n.common.issues})}async parseAsync(e,n){const s=await this.safeParseAsync(e,n);if(s.success)return s.data;throw s.error}async safeParseAsync(e,n){const s={common:{issues:[],contextualErrorMap:n?.errorMap,async:!0},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:bo(e)},r=this._parse({data:e,path:s.path,parent:s}),i=await(By(r)?r:Promise.resolve(r));return GR(s,i)}refine(e,n){const s=r=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(r):n;return this._refinement((r,i)=>{const o=e(r),c=()=>i.addIssue({code:et.custom,...s(r)});return typeof Promise<"u"&&o instanceof Promise?o.then(u=>u?!0:(c(),!1)):o?!0:(c(),!1)})}refinement(e,n){return this._refinement((s,r)=>e(s)?!0:(r.addIssue(typeof n=="function"?n(s,r):n),!1))}_refinement(e){return new sc({schema:this,typeName:Tt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Do.create(this,this._def)}nullable(){return Iu.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ua.create(this)}promise(){return $y.create(this,this._def)}or(e){return Vy.create([this,e],this._def)}and(e){return zy.create(this,e,this._def)}transform(e){return new sc({...$t(this._def),schema:this,typeName:Tt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new cw({...$t(this._def),innerType:this,defaultValue:n,typeName:Tt.ZodDefault})}brand(){return new Xhe({typeName:Tt.ZodBranded,type:this,...$t(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new uw({...$t(this._def),innerType:this,catchValue:n,typeName:Tt.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return KS.create(this,e)}readonly(){return dw.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Dhe=/^c[^\s-]{8,}$/i,Ehe=/^[0-9a-z]+$/,The=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Mhe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Rhe=/^[a-z0-9_-]{21}$/i,Ohe=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Phe=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Lhe=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Fhe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let R_;const Bhe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Ihe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Vhe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,zhe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,$he=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Hhe=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,hI="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Uhe=new RegExp(`^${hI}$`);function mI(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function Whe(t){return new RegExp(`^${mI(t)}$`)}function Yhe(t){let e=`${hI}T${mI(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function qhe(t,e){return!!((e==="v4"||!e)&&Bhe.test(t)||(e==="v6"||!e)&&Vhe.test(t))}function Ghe(t,e){if(!Ohe.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const s=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),r=JSON.parse(atob(s));return!(typeof r!="object"||r===null||"typ"in r&&r?.typ!=="JWT"||!r.alg||e&&r.alg!==e)}catch{return!1}}function Khe(t,e){return!!((e==="v4"||!e)&&Ihe.test(t)||(e==="v6"||!e)&&zhe.test(t))}class wi extends Kt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ft.string){const i=this._getOrReturnCtx(e);return lt(i,{code:et.invalid_type,expected:ft.string,received:i.parsedType}),Et}const s=new _r;let r;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(r=this._getOrReturnCtx(e,r),lt(r,{code:et.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),s.dirty());else if(i.kind==="max")e.data.length>i.value&&(r=this._getOrReturnCtx(e,r),lt(r,{code:et.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),s.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,c=e.data.length<i.value;(o||c)&&(r=this._getOrReturnCtx(e,r),o?lt(r,{code:et.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):c&&lt(r,{code:et.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),s.dirty())}else if(i.kind==="email")Lhe.test(e.data)||(r=this._getOrReturnCtx(e,r),lt(r,{validation:"email",code:et.invalid_string,message:i.message}),s.dirty());else if(i.kind==="emoji")R_||(R_=new RegExp(Fhe,"u")),R_.test(e.data)||(r=this._getOrReturnCtx(e,r),lt(r,{validation:"emoji",code:et.invalid_string,message:i.message}),s.dirty());else if(i.kind==="uuid")Mhe.test(e.data)||(r=this._getOrReturnCtx(e,r),lt(r,{validation:"uuid",code:et.invalid_string,message:i.message}),s.dirty());else if(i.kind==="nanoid")Rhe.test(e.data)||(r=this._getOrReturnCtx(e,r),lt(r,{validation:"nanoid",code:et.invalid_string,message:i.message}),s.dirty());else if(i.kind==="cuid")Dhe.test(e.data)||(r=this._getOrReturnCtx(e,r),lt(r,{validation:"cuid",code:et.invalid_string,message:i.message}),s.dirty());else if(i.kind==="cuid2")Ehe.test(e.data)||(r=this._getOrReturnCtx(e,r),lt(r,{validation:"cuid2",code:et.invalid_string,message:i.message}),s.dirty());else if(i.kind==="ulid")The.test(e.data)||(r=this._getOrReturnCtx(e,r),lt(r,{validation:"ulid",code:et.invalid_string,message:i.message}),s.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{r=this._getOrReturnCtx(e,r),lt(r,{validation:"url",code:et.invalid_string,message:i.message}),s.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),lt(r,{validation:"regex",code:et.invalid_string,message:i.message}),s.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(r=this._getOrReturnCtx(e,r),lt(r,{code:et.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),s.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(r=this._getOrReturnCtx(e,r),lt(r,{code:et.invalid_string,validation:{startsWith:i.value},message:i.message}),s.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(r=this._getOrReturnCtx(e,r),lt(r,{code:et.invalid_string,validation:{endsWith:i.value},message:i.message}),s.dirty()):i.kind==="datetime"?Yhe(i).test(e.data)||(r=this._getOrReturnCtx(e,r),lt(r,{code:et.invalid_string,validation:"datetime",message:i.message}),s.dirty()):i.kind==="date"?Uhe.test(e.data)||(r=this._getOrReturnCtx(e,r),lt(r,{code:et.invalid_string,validation:"date",message:i.message}),s.dirty()):i.kind==="time"?Whe(i).test(e.data)||(r=this._getOrReturnCtx(e,r),lt(r,{code:et.invalid_string,validation:"time",message:i.message}),s.dirty()):i.kind==="duration"?Phe.test(e.data)||(r=this._getOrReturnCtx(e,r),lt(r,{validation:"duration",code:et.invalid_string,message:i.message}),s.dirty()):i.kind==="ip"?qhe(e.data,i.version)||(r=this._getOrReturnCtx(e,r),lt(r,{validation:"ip",code:et.invalid_string,message:i.message}),s.dirty()):i.kind==="jwt"?Ghe(e.data,i.alg)||(r=this._getOrReturnCtx(e,r),lt(r,{validation:"jwt",code:et.invalid_string,message:i.message}),s.dirty()):i.kind==="cidr"?Khe(e.data,i.version)||(r=this._getOrReturnCtx(e,r),lt(r,{validation:"cidr",code:et.invalid_string,message:i.message}),s.dirty()):i.kind==="base64"?$he.test(e.data)||(r=this._getOrReturnCtx(e,r),lt(r,{validation:"base64",code:et.invalid_string,message:i.message}),s.dirty()):i.kind==="base64url"?Hhe.test(e.data)||(r=this._getOrReturnCtx(e,r),lt(r,{validation:"base64url",code:et.invalid_string,message:i.message}),s.dirty()):Xt.assertNever(i);return{status:s.value,value:e.data}}_regex(e,n,s){return this.refinement(r=>e.test(r),{validation:n,code:et.invalid_string,...ht.errToObj(s)})}_addCheck(e){return new wi({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ht.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ht.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ht.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ht.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ht.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ht.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ht.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ht.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ht.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...ht.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...ht.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ht.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...ht.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...ht.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...ht.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...ht.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...ht.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n?.position,...ht.errToObj(n?.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...ht.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...ht.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...ht.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...ht.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...ht.errToObj(n)})}nonempty(e){return this.min(1,ht.errToObj(e))}trim(){return new wi({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new wi({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new wi({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}wi.create=t=>new wi({checks:[],typeName:Tt.ZodString,coerce:t?.coerce??!1,...$t(t)});function Qhe(t,e){const n=(t.toString().split(".")[1]||"").length,s=(e.toString().split(".")[1]||"").length,r=n>s?n:s,i=Number.parseInt(t.toFixed(r).replace(".","")),o=Number.parseInt(e.toFixed(r).replace(".",""));return i%o/10**r}class ec extends Kt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ft.number){const i=this._getOrReturnCtx(e);return lt(i,{code:et.invalid_type,expected:ft.number,received:i.parsedType}),Et}let s;const r=new _r;for(const i of this._def.checks)i.kind==="int"?Xt.isInteger(e.data)||(s=this._getOrReturnCtx(e,s),lt(s,{code:et.invalid_type,expected:"integer",received:"float",message:i.message}),r.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(s=this._getOrReturnCtx(e,s),lt(s,{code:et.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),r.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(s=this._getOrReturnCtx(e,s),lt(s,{code:et.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),r.dirty()):i.kind==="multipleOf"?Qhe(e.data,i.value)!==0&&(s=this._getOrReturnCtx(e,s),lt(s,{code:et.not_multiple_of,multipleOf:i.value,message:i.message}),r.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(s=this._getOrReturnCtx(e,s),lt(s,{code:et.not_finite,message:i.message}),r.dirty()):Xt.assertNever(i);return{status:r.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,ht.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ht.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ht.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ht.toString(n))}setLimit(e,n,s,r){return new ec({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:s,message:ht.toString(r)}]})}_addCheck(e){return new ec({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ht.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ht.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ht.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ht.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ht.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ht.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:ht.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ht.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ht.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Xt.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(n===null||s.value>n)&&(n=s.value):s.kind==="max"&&(e===null||s.value<e)&&(e=s.value)}return Number.isFinite(n)&&Number.isFinite(e)}}ec.create=t=>new ec({checks:[],typeName:Tt.ZodNumber,coerce:t?.coerce||!1,...$t(t)});class tc extends Kt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ft.bigint)return this._getInvalidInput(e);let s;const r=new _r;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(s=this._getOrReturnCtx(e,s),lt(s,{code:et.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),r.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(s=this._getOrReturnCtx(e,s),lt(s,{code:et.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),r.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(s=this._getOrReturnCtx(e,s),lt(s,{code:et.not_multiple_of,multipleOf:i.value,message:i.message}),r.dirty()):Xt.assertNever(i);return{status:r.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return lt(n,{code:et.invalid_type,expected:ft.bigint,received:n.parsedType}),Et}gte(e,n){return this.setLimit("min",e,!0,ht.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ht.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ht.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ht.toString(n))}setLimit(e,n,s,r){return new tc({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:s,message:ht.toString(r)}]})}_addCheck(e){return new tc({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ht.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ht.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ht.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ht.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ht.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}tc.create=t=>new tc({checks:[],typeName:Tt.ZodBigInt,coerce:t?.coerce??!1,...$t(t)});class Iy extends Kt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ft.boolean){const s=this._getOrReturnCtx(e);return lt(s,{code:et.invalid_type,expected:ft.boolean,received:s.parsedType}),Et}return Kr(e.data)}}Iy.create=t=>new Iy({typeName:Tt.ZodBoolean,coerce:t?.coerce||!1,...$t(t)});class Fu extends Kt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ft.date){const i=this._getOrReturnCtx(e);return lt(i,{code:et.invalid_type,expected:ft.date,received:i.parsedType}),Et}if(Number.isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return lt(i,{code:et.invalid_date}),Et}const s=new _r;let r;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(r=this._getOrReturnCtx(e,r),lt(r,{code:et.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),s.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(r=this._getOrReturnCtx(e,r),lt(r,{code:et.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),s.dirty()):Xt.assertNever(i);return{status:s.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Fu({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:ht.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:ht.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Fu.create=t=>new Fu({checks:[],coerce:t?.coerce||!1,typeName:Tt.ZodDate,...$t(t)});class KR extends Kt{_parse(e){if(this._getType(e)!==ft.symbol){const s=this._getOrReturnCtx(e);return lt(s,{code:et.invalid_type,expected:ft.symbol,received:s.parsedType}),Et}return Kr(e.data)}}KR.create=t=>new KR({typeName:Tt.ZodSymbol,...$t(t)});class QR extends Kt{_parse(e){if(this._getType(e)!==ft.undefined){const s=this._getOrReturnCtx(e);return lt(s,{code:et.invalid_type,expected:ft.undefined,received:s.parsedType}),Et}return Kr(e.data)}}QR.create=t=>new QR({typeName:Tt.ZodUndefined,...$t(t)});class XR extends Kt{_parse(e){if(this._getType(e)!==ft.null){const s=this._getOrReturnCtx(e);return lt(s,{code:et.invalid_type,expected:ft.null,received:s.parsedType}),Et}return Kr(e.data)}}XR.create=t=>new XR({typeName:Tt.ZodNull,...$t(t)});class ZR extends Kt{constructor(){super(...arguments),this._any=!0}_parse(e){return Kr(e.data)}}ZR.create=t=>new ZR({typeName:Tt.ZodAny,...$t(t)});class JR extends Kt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Kr(e.data)}}JR.create=t=>new JR({typeName:Tt.ZodUnknown,...$t(t)});class Vo extends Kt{_parse(e){const n=this._getOrReturnCtx(e);return lt(n,{code:et.invalid_type,expected:ft.never,received:n.parsedType}),Et}}Vo.create=t=>new Vo({typeName:Tt.ZodNever,...$t(t)});class eO extends Kt{_parse(e){if(this._getType(e)!==ft.undefined){const s=this._getOrReturnCtx(e);return lt(s,{code:et.invalid_type,expected:ft.void,received:s.parsedType}),Et}return Kr(e.data)}}eO.create=t=>new eO({typeName:Tt.ZodVoid,...$t(t)});class Ua extends Kt{_parse(e){const{ctx:n,status:s}=this._processInputParams(e),r=this._def;if(n.parsedType!==ft.array)return lt(n,{code:et.invalid_type,expected:ft.array,received:n.parsedType}),Et;if(r.exactLength!==null){const o=n.data.length>r.exactLength.value,c=n.data.length<r.exactLength.value;(o||c)&&(lt(n,{code:o?et.too_big:et.too_small,minimum:c?r.exactLength.value:void 0,maximum:o?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),s.dirty())}if(r.minLength!==null&&n.data.length<r.minLength.value&&(lt(n,{code:et.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),s.dirty()),r.maxLength!==null&&n.data.length>r.maxLength.value&&(lt(n,{code:et.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),s.dirty()),n.common.async)return Promise.all([...n.data].map((o,c)=>r.type._parseAsync(new Io(n,o,n.path,c)))).then(o=>_r.mergeArray(s,o));const i=[...n.data].map((o,c)=>r.type._parseSync(new Io(n,o,n.path,c)));return _r.mergeArray(s,i)}get element(){return this._def.type}min(e,n){return new Ua({...this._def,minLength:{value:e,message:ht.toString(n)}})}max(e,n){return new Ua({...this._def,maxLength:{value:e,message:ht.toString(n)}})}length(e,n){return new Ua({...this._def,exactLength:{value:e,message:ht.toString(n)}})}nonempty(e){return this.min(1,e)}}Ua.create=(t,e)=>new Ua({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Tt.ZodArray,...$t(e)});function ru(t){if(t instanceof Xn){const e={};for(const n in t.shape){const s=t.shape[n];e[n]=Do.create(ru(s))}return new Xn({...t._def,shape:()=>e})}else return t instanceof Ua?new Ua({...t._def,type:ru(t.element)}):t instanceof Do?Do.create(ru(t.unwrap())):t instanceof Iu?Iu.create(ru(t.unwrap())):t instanceof nc?nc.create(t.items.map(e=>ru(e))):t}class Xn extends Kt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Xt.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==ft.object){const f=this._getOrReturnCtx(e);return lt(f,{code:et.invalid_type,expected:ft.object,received:f.parsedType}),Et}const{status:s,ctx:r}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),c=[];if(!(this._def.catchall instanceof Vo&&this._def.unknownKeys==="strip"))for(const f in r.data)o.includes(f)||c.push(f);const u=[];for(const f of o){const m=i[f],h=r.data[f];u.push({key:{status:"valid",value:f},value:m._parse(new Io(r,h,r.path,f)),alwaysSet:f in r.data})}if(this._def.catchall instanceof Vo){const f=this._def.unknownKeys;if(f==="passthrough")for(const m of c)u.push({key:{status:"valid",value:m},value:{status:"valid",value:r.data[m]}});else if(f==="strict")c.length>0&&(lt(r,{code:et.unrecognized_keys,keys:c}),s.dirty());else if(f!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const f=this._def.catchall;for(const m of c){const h=r.data[m];u.push({key:{status:"valid",value:m},value:f._parse(new Io(r,h,r.path,m)),alwaysSet:m in r.data})}}return r.common.async?Promise.resolve().then(async()=>{const f=[];for(const m of u){const h=await m.key,g=await m.value;f.push({key:h,value:g,alwaysSet:m.alwaysSet})}return f}).then(f=>_r.mergeObjectSync(s,f)):_r.mergeObjectSync(s,u)}get shape(){return this._def.shape()}strict(e){return ht.errToObj,new Xn({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,s)=>{const r=this._def.errorMap?.(n,s).message??s.defaultError;return n.code==="unrecognized_keys"?{message:ht.errToObj(e).message??r}:{message:r}}}:{}})}strip(){return new Xn({...this._def,unknownKeys:"strip"})}passthrough(){return new Xn({...this._def,unknownKeys:"passthrough"})}extend(e){return new Xn({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Xn({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Tt.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Xn({...this._def,catchall:e})}pick(e){const n={};for(const s of Xt.objectKeys(e))e[s]&&this.shape[s]&&(n[s]=this.shape[s]);return new Xn({...this._def,shape:()=>n})}omit(e){const n={};for(const s of Xt.objectKeys(this.shape))e[s]||(n[s]=this.shape[s]);return new Xn({...this._def,shape:()=>n})}deepPartial(){return ru(this)}partial(e){const n={};for(const s of Xt.objectKeys(this.shape)){const r=this.shape[s];e&&!e[s]?n[s]=r:n[s]=r.optional()}return new Xn({...this._def,shape:()=>n})}required(e){const n={};for(const s of Xt.objectKeys(this.shape))if(e&&!e[s])n[s]=this.shape[s];else{let i=this.shape[s];for(;i instanceof Do;)i=i._def.innerType;n[s]=i}return new Xn({...this._def,shape:()=>n})}keyof(){return pI(Xt.objectKeys(this.shape))}}Xn.create=(t,e)=>new Xn({shape:()=>t,unknownKeys:"strip",catchall:Vo.create(),typeName:Tt.ZodObject,...$t(e)});Xn.strictCreate=(t,e)=>new Xn({shape:()=>t,unknownKeys:"strict",catchall:Vo.create(),typeName:Tt.ZodObject,...$t(e)});Xn.lazycreate=(t,e)=>new Xn({shape:t,unknownKeys:"strip",catchall:Vo.create(),typeName:Tt.ZodObject,...$t(e)});class Vy extends Kt{_parse(e){const{ctx:n}=this._processInputParams(e),s=this._def.options;function r(i){for(const c of i)if(c.result.status==="valid")return c.result;for(const c of i)if(c.result.status==="dirty")return n.common.issues.push(...c.ctx.common.issues),c.result;const o=i.map(c=>new Ii(c.ctx.common.issues));return lt(n,{code:et.invalid_union,unionErrors:o}),Et}if(n.common.async)return Promise.all(s.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(r);{let i;const o=[];for(const u of s){const f={...n,common:{...n.common,issues:[]},parent:null},m=u._parseSync({data:n.data,path:n.path,parent:f});if(m.status==="valid")return m;m.status==="dirty"&&!i&&(i={result:m,ctx:f}),f.common.issues.length&&o.push(f.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const c=o.map(u=>new Ii(u));return lt(n,{code:et.invalid_union,unionErrors:c}),Et}}get options(){return this._def.options}}Vy.create=(t,e)=>new Vy({options:t,typeName:Tt.ZodUnion,...$t(e)});function lw(t,e){const n=bo(t),s=bo(e);if(t===e)return{valid:!0,data:t};if(n===ft.object&&s===ft.object){const r=Xt.objectKeys(e),i=Xt.objectKeys(t).filter(c=>r.indexOf(c)!==-1),o={...t,...e};for(const c of i){const u=lw(t[c],e[c]);if(!u.valid)return{valid:!1};o[c]=u.data}return{valid:!0,data:o}}else if(n===ft.array&&s===ft.array){if(t.length!==e.length)return{valid:!1};const r=[];for(let i=0;i<t.length;i++){const o=t[i],c=e[i],u=lw(o,c);if(!u.valid)return{valid:!1};r.push(u.data)}return{valid:!0,data:r}}else return n===ft.date&&s===ft.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class zy extends Kt{_parse(e){const{status:n,ctx:s}=this._processInputParams(e),r=(i,o)=>{if(YR(i)||YR(o))return Et;const c=lw(i.value,o.value);return c.valid?((qR(i)||qR(o))&&n.dirty(),{status:n.value,value:c.data}):(lt(s,{code:et.invalid_intersection_types}),Et)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([i,o])=>r(i,o)):r(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}}zy.create=(t,e,n)=>new zy({left:t,right:e,typeName:Tt.ZodIntersection,...$t(n)});class nc extends Kt{_parse(e){const{status:n,ctx:s}=this._processInputParams(e);if(s.parsedType!==ft.array)return lt(s,{code:et.invalid_type,expected:ft.array,received:s.parsedType}),Et;if(s.data.length<this._def.items.length)return lt(s,{code:et.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Et;!this._def.rest&&s.data.length>this._def.items.length&&(lt(s,{code:et.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...s.data].map((o,c)=>{const u=this._def.items[c]||this._def.rest;return u?u._parse(new Io(s,o,s.path,c)):null}).filter(o=>!!o);return s.common.async?Promise.all(i).then(o=>_r.mergeArray(n,o)):_r.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new nc({...this._def,rest:e})}}nc.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new nc({items:t,typeName:Tt.ZodTuple,rest:null,...$t(e)})};class tO extends Kt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:s}=this._processInputParams(e);if(s.parsedType!==ft.map)return lt(s,{code:et.invalid_type,expected:ft.map,received:s.parsedType}),Et;const r=this._def.keyType,i=this._def.valueType,o=[...s.data.entries()].map(([c,u],f)=>({key:r._parse(new Io(s,c,s.path,[f,"key"])),value:i._parse(new Io(s,u,s.path,[f,"value"]))}));if(s.common.async){const c=new Map;return Promise.resolve().then(async()=>{for(const u of o){const f=await u.key,m=await u.value;if(f.status==="aborted"||m.status==="aborted")return Et;(f.status==="dirty"||m.status==="dirty")&&n.dirty(),c.set(f.value,m.value)}return{status:n.value,value:c}})}else{const c=new Map;for(const u of o){const f=u.key,m=u.value;if(f.status==="aborted"||m.status==="aborted")return Et;(f.status==="dirty"||m.status==="dirty")&&n.dirty(),c.set(f.value,m.value)}return{status:n.value,value:c}}}}tO.create=(t,e,n)=>new tO({valueType:e,keyType:t,typeName:Tt.ZodMap,...$t(n)});class Oh extends Kt{_parse(e){const{status:n,ctx:s}=this._processInputParams(e);if(s.parsedType!==ft.set)return lt(s,{code:et.invalid_type,expected:ft.set,received:s.parsedType}),Et;const r=this._def;r.minSize!==null&&s.data.size<r.minSize.value&&(lt(s,{code:et.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),n.dirty()),r.maxSize!==null&&s.data.size>r.maxSize.value&&(lt(s,{code:et.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),n.dirty());const i=this._def.valueType;function o(u){const f=new Set;for(const m of u){if(m.status==="aborted")return Et;m.status==="dirty"&&n.dirty(),f.add(m.value)}return{status:n.value,value:f}}const c=[...s.data.values()].map((u,f)=>i._parse(new Io(s,u,s.path,f)));return s.common.async?Promise.all(c).then(u=>o(u)):o(c)}min(e,n){return new Oh({...this._def,minSize:{value:e,message:ht.toString(n)}})}max(e,n){return new Oh({...this._def,maxSize:{value:e,message:ht.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Oh.create=(t,e)=>new Oh({valueType:t,minSize:null,maxSize:null,typeName:Tt.ZodSet,...$t(e)});class nO extends Kt{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}nO.create=(t,e)=>new nO({getter:t,typeName:Tt.ZodLazy,...$t(e)});class sO extends Kt{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return lt(n,{received:n.data,code:et.invalid_literal,expected:this._def.value}),Et}return{status:"valid",value:e.data}}get value(){return this._def.value}}sO.create=(t,e)=>new sO({value:t,typeName:Tt.ZodLiteral,...$t(e)});function pI(t,e){return new Bu({values:t,typeName:Tt.ZodEnum,...$t(e)})}class Bu extends Kt{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),s=this._def.values;return lt(n,{expected:Xt.joinValues(s),received:n.parsedType,code:et.invalid_type}),Et}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),s=this._def.values;return lt(n,{received:n.data,code:et.invalid_enum_value,options:s}),Et}return Kr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Bu.create(e,{...this._def,...n})}exclude(e,n=this._def){return Bu.create(this.options.filter(s=>!e.includes(s)),{...this._def,...n})}}Bu.create=pI;class rO extends Kt{_parse(e){const n=Xt.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==ft.string&&s.parsedType!==ft.number){const r=Xt.objectValues(n);return lt(s,{expected:Xt.joinValues(r),received:s.parsedType,code:et.invalid_type}),Et}if(this._cache||(this._cache=new Set(Xt.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const r=Xt.objectValues(n);return lt(s,{received:s.data,code:et.invalid_enum_value,options:r}),Et}return Kr(e.data)}get enum(){return this._def.values}}rO.create=(t,e)=>new rO({values:t,typeName:Tt.ZodNativeEnum,...$t(e)});class $y extends Kt{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ft.promise&&n.common.async===!1)return lt(n,{code:et.invalid_type,expected:ft.promise,received:n.parsedType}),Et;const s=n.parsedType===ft.promise?n.data:Promise.resolve(n.data);return Kr(s.then(r=>this._def.type.parseAsync(r,{path:n.path,errorMap:n.common.contextualErrorMap})))}}$y.create=(t,e)=>new $y({type:t,typeName:Tt.ZodPromise,...$t(e)});class sc extends Kt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Tt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:s}=this._processInputParams(e),r=this._def.effect||null,i={addIssue:o=>{lt(s,o),o.fatal?n.abort():n.dirty()},get path(){return s.path}};if(i.addIssue=i.addIssue.bind(i),r.type==="preprocess"){const o=r.transform(s.data,i);if(s.common.async)return Promise.resolve(o).then(async c=>{if(n.value==="aborted")return Et;const u=await this._def.schema._parseAsync({data:c,path:s.path,parent:s});return u.status==="aborted"?Et:u.status==="dirty"||n.value==="dirty"?Hf(u.value):u});{if(n.value==="aborted")return Et;const c=this._def.schema._parseSync({data:o,path:s.path,parent:s});return c.status==="aborted"?Et:c.status==="dirty"||n.value==="dirty"?Hf(c.value):c}}if(r.type==="refinement"){const o=c=>{const u=r.refinement(c,i);if(s.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c};if(s.common.async===!1){const c=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return c.status==="aborted"?Et:(c.status==="dirty"&&n.dirty(),o(c.value),{status:n.value,value:c.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(c=>c.status==="aborted"?Et:(c.status==="dirty"&&n.dirty(),o(c.value).then(()=>({status:n.value,value:c.value}))))}if(r.type==="transform")if(s.common.async===!1){const o=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!Lu(o))return Et;const c=r.transform(o.value,i);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:c}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(o=>Lu(o)?Promise.resolve(r.transform(o.value,i)).then(c=>({status:n.value,value:c})):Et);Xt.assertNever(r)}}sc.create=(t,e,n)=>new sc({schema:t,typeName:Tt.ZodEffects,effect:e,...$t(n)});sc.createWithPreprocess=(t,e,n)=>new sc({schema:e,effect:{type:"preprocess",transform:t},typeName:Tt.ZodEffects,...$t(n)});class Do extends Kt{_parse(e){return this._getType(e)===ft.undefined?Kr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Do.create=(t,e)=>new Do({innerType:t,typeName:Tt.ZodOptional,...$t(e)});class Iu extends Kt{_parse(e){return this._getType(e)===ft.null?Kr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Iu.create=(t,e)=>new Iu({innerType:t,typeName:Tt.ZodNullable,...$t(e)});class cw extends Kt{_parse(e){const{ctx:n}=this._processInputParams(e);let s=n.data;return n.parsedType===ft.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}cw.create=(t,e)=>new cw({innerType:t,typeName:Tt.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...$t(e)});class uw extends Kt{_parse(e){const{ctx:n}=this._processInputParams(e),s={...n,common:{...n.common,issues:[]}},r=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return By(r)?r.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ii(s.common.issues)},input:s.data})})):{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new Ii(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}}uw.create=(t,e)=>new uw({innerType:t,typeName:Tt.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...$t(e)});class aO extends Kt{_parse(e){if(this._getType(e)!==ft.nan){const s=this._getOrReturnCtx(e);return lt(s,{code:et.invalid_type,expected:ft.nan,received:s.parsedType}),Et}return{status:"valid",value:e.data}}}aO.create=t=>new aO({typeName:Tt.ZodNaN,...$t(t)});class Xhe extends Kt{_parse(e){const{ctx:n}=this._processInputParams(e),s=n.data;return this._def.type._parse({data:s,path:n.path,parent:n})}unwrap(){return this._def.type}}class KS extends Kt{_parse(e){const{status:n,ctx:s}=this._processInputParams(e);if(s.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return i.status==="aborted"?Et:i.status==="dirty"?(n.dirty(),Hf(i.value)):this._def.out._parseAsync({data:i.value,path:s.path,parent:s})})();{const r=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return r.status==="aborted"?Et:r.status==="dirty"?(n.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:s.path,parent:s})}}static create(e,n){return new KS({in:e,out:n,typeName:Tt.ZodPipeline})}}class dw extends Kt{_parse(e){const n=this._def.innerType._parse(e),s=r=>(Lu(r)&&(r.value=Object.freeze(r.value)),r);return By(n)?n.then(r=>s(r)):s(n)}unwrap(){return this._def.innerType}}dw.create=(t,e)=>new dw({innerType:t,typeName:Tt.ZodReadonly,...$t(e)});var Tt;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Tt||(Tt={}));const fw=wi.create;ec.create;tc.create;const Zhe=Iy.create;Fu.create;Vo.create;Ua.create;const Jhe=Xn.create;Vy.create;zy.create;nc.create;const eme=Bu.create;$y.create;Do.create;Iu.create;const tme=sc.createWithPreprocess,Gs={string:(t=>wi.create({...t,coerce:!0})),number:(t=>ec.create({...t,coerce:!0})),boolean:(t=>Iy.create({...t,coerce:!0})),bigint:(t=>tc.create({...t,coerce:!0})),date:(t=>Fu.create({...t,coerce:!0}))},iO=tme(t=>t===""||t==null?null:t,fw().datetime().nullable()),nme=Jhe({client_id:Gs.number().int().positive(),owner_id:Gs.number().int().positive(),bum_id:Gs.number().int().positive().nullable().default(null),tech_id:Gs.number().int().positive().nullable().default(null),category_id:Gs.number().int().positive().nullable().default(null),title:fw().max(120).nullable().default(""),description:fw().nullable().default(""),is_quoted:Zhe().default(!1),project_id:Gs.number().int().positive().nullable().default(null),start_at:iO.default(null),complete_at:iO.default(null),labourers_count:Gs.number().int().min(0).default(0),labour_hours:Gs.number().min(0).default(0),labour_rate_per_hour:Gs.number().min(0).default(0),materials_used:Gs.boolean().default(!1),did_travel:Gs.boolean().default(!1),vehicle_id:Gs.number().int().positive().nullable().default(null),travel_distance_km:Gs.number().min(0).default(0),coc_required:Gs.boolean().default(!1),status:eme(["draft","scheduled","in_progress","paused","completed","cancelled","invoiced"]).default("draft")}),oO={client_id:0,owner_id:1,bum_id:null,tech_id:null,category_id:null,title:"",description:"",is_quoted:!1,project_id:null,start_at:null,complete_at:null,labourers_count:0,labour_hours:0,labour_rate_per_hour:0,materials_used:!1,did_travel:!1,vehicle_id:null,travel_distance_km:0,coc_required:!1,status:"draft"};function sme({open:t,onClose:e,onAdd:n,initialCategory:s}){const[r,i]=v.useState(""),[o,c]=v.useState(!1),[u,f]=v.useState([]),[m,h]=v.useState({}),[g,x]=v.useState(r);v.useEffect(()=>{const j=setTimeout(()=>x(r),250);return()=>clearTimeout(j)},[r]),v.useEffect(()=>{t&&(c(!0),BH({q:g||void 0,category:s,limit:50}).then(f).finally(()=>c(!1)))},[t,g,s]);const b=v.useMemo(()=>Object.entries(m).filter(([j,C])=>Number(C)>0).map(([j,C])=>{const k=u.find(E=>E.id===Number(j));return k?{product:k,qty:Number(C)}:null}).filter(Boolean),[m,u]),A=j=>h(C=>({...C,[j]:C[j]?0:1})),_=(j,C)=>h(k=>({...k,[j]:Math.max(0,Math.min(9999,C||0))}));return t?a.jsx("div",{className:"modal d-block",role:"dialog","aria-modal":"true",style:{background:"rgba(0,0,0,0.45)"},children:a.jsx("div",{className:"modal-dialog modal-dialog-scrollable modal-fullscreen-sm-down",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h5",{className:"modal-title",children:"Add Materials"}),a.jsx("button",{className:"btn-close",onClick:e})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"input-group mb-3",children:[a.jsx("span",{className:"input-group-text",children:"Search"}),a.jsx("input",{className:"form-control",placeholder:"Brand, model, category…",value:r,onChange:j=>i(j.target.value)})]}),o?a.jsx("div",{className:"text-muted",children:"Loading…"}):u.length===0?a.jsx("div",{className:"text-muted",children:"No products found."}):a.jsx("div",{className:"list-group",children:u.map(j=>{const C=(m[j.id]||0)>0,k=j.price??j.unit_cost??0;return a.jsxs("label",{className:"list-group-item d-flex align-items-center justify-content-between gap-2",children:[a.jsxs("div",{className:"d-flex flex-column",children:[a.jsxs("div",{className:"fw-semibold",children:[j.brand||""," ",j.model?`${j.model}`:""]}),a.jsxs("small",{className:"text-muted",children:[j.category||"Uncategorised"," ",j.component_type?`• ${j.component_type}`:""]})]}),a.jsxs("div",{className:"d-flex align-items-center gap-2",children:[a.jsxs("div",{className:"text-nowrap small text-muted",children:["R ",Number(k).toFixed(2)]}),a.jsx("input",{type:"number",className:"form-control form-control-sm",style:{width:72},min:0,value:m[j.id]||0,onClick:E=>E.stopPropagation(),onChange:E=>_(j.id,Number(E.target.value))}),a.jsx("input",{type:"checkbox",className:"form-check-input",checked:C,onChange:()=>A(j.id),"aria-label":"Select"})]})]},j.id)})})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsxs("div",{className:"me-auto small text-muted",children:[b.length," selected"]}),a.jsx("button",{className:"btn btn-outline-secondary",onClick:e,children:"Cancel"}),a.jsx("button",{className:"btn btn-primary",onClick:()=>{n(b),e()},disabled:b.length===0,children:"Add to Job"})]})]})})}):null}const yg=t=>String(t).padStart(2,"0"),lO=t=>{if(!t)return"";const e=new Date(t);return`${e.getFullYear()}-${yg(e.getMonth()+1)}-${yg(e.getDate())}T${yg(e.getHours())}:${yg(e.getMinutes())}`},cO=t=>{if(!t)return null;const[e,n]=t.split("T"),[s,r,i]=e.split("-").map(Number),[o,c]=n.split(":").map(Number);return new Date(s,(r??1)-1,i??1,o??0,c??0,0).toISOString()},uO=t=>{if(!t)return null;try{const e=new Date(String(t));return isNaN(e.getTime())?null:e.toISOString()}catch{return null}};function rme({initial:t,onSubmit:e,onCancel:n}){const{register:s,handleSubmit:r,reset:i,setValue:o,watch:c,control:u,getValues:f,formState:{errors:m,isSubmitting:h,isDirty:g}}=_he({resolver:She(nme),defaultValues:oO,mode:"onSubmit"}),x=ms(),[b,A]=v.useState([]),[_,j]=v.useState(!0),[C,k]=v.useState(null),[E,N]=v.useState(""),[L,M]=v.useState(!1),[T,O]=v.useState(null),[I,$]=v.useState(!1),[H,V]=v.useState([]),[G,U]=v.useState(null),{user:R}=is(),[P,Z]=v.useState(!1),[ne,D]=v.useState([]),[B,se]=v.useState([]),[le,ae]=v.useState([]),[te,X]=v.useState(null),[de,Ne]=v.useState({}),[Ke,ce]=v.useState({}),[xe,Te]=v.useState([]),Ie=v.useRef(null),Ue=()=>Ie.current?.click(),Ze=Q=>{const he=Array.from(Q.target.files||[]);he.length&&(Te(qe=>[...qe,...he.map(K=>({id:crypto.randomUUID(),file:K,preview:URL.createObjectURL(K),caption:""}))]),Q.target.value="")},mt=(Q,he)=>{Te(qe=>qe.map(K=>K.id===Q?{...K,caption:he}:K))},gt=Q=>{Te(he=>{const qe=he.find(K=>K.id===Q);return qe&&URL.revokeObjectURL(qe.preview),he.filter(K=>K.id!==Q)})};v.useEffect(()=>()=>{xe.forEach(Q=>URL.revokeObjectURL(Q.preview))},[xe]),v.useEffect(()=>{(async()=>{try{const{data:Q}=await Yn.get("/auth/users?is_bum=1&active=1");console.log("BUM data:",Q),D(Q);const{data:he}=await Yn.get("/auth/technicians");if(se(he),R){const qe=Q.some(K=>K.id===R.id);Z(qe),qe?o("bum_id",R.id,{shouldDirty:!0}):o("owner_id",R.id,{shouldDirty:!0})}}catch(Q){console.error("Failed to load BUMs and Techs:",Q)}})()},[R,o]),v.useEffect(()=>{if(!R)return;const Q=sessionStorage.getItem("technician_selected_by_bum")==="true";if(R.is_bum?(Z(!0),o("bum_id",R.id,{shouldDirty:!0})):o("owner_id",R.id,{shouldDirty:!0}),ne.length>0){const he=ne.some(qe=>qe.id===R.id);Z(he),he?(o("bum_id",R.id,{shouldDirty:!0}),Q||o("owner_id",R.id,{shouldDirty:!0})):o("owner_id",R.id,{shouldDirty:!0})}},[R,ne,o]),v.useEffect(()=>{I?o("materials_used",!0,{shouldDirty:!0}):o("materials_used",!1,{shouldDirty:!0})},[I,o]),v.useEffect(()=>{t?.owner_id&&t.owner_id>0&&o("owner_id",t.owner_id,{shouldValidate:!1})},[t?.owner_id,o]),v.useEffect(()=>{const Q=new AbortController;return(async()=>{try{const he=await IH(Q.signal);A(he)}catch(he){k(he?.response?.data?.error||he.message||"Failed to load clients")}finally{j(!1)}})(),()=>Q.abort()},[]),v.useEffect(()=>{I&&T?.id?(async()=>{try{const he=await zH(T.id);V(he),he.length===1?U(he[0].id):U(null)}catch(he){console.error("Failed to load client projects",he)}})():(V([]),U(null))},[T?.id,I]),v.useEffect(()=>{I&&G?(async()=>{try{const he=await $H(G);ae(he),he.length===1?X(he[0].id):X(null)}catch(he){console.error("Failed to load accepted quotes: ",he)}})():(ae([]),X(null))},[G,I]),v.useEffect(()=>{te&&(async()=>{try{const qe=(await HH(te)).items.map(Qe=>({product_id:Qe.product_id,name:Qe.name,unit_price:Qe.unit_price,unit_cost:Qe.unit_cost,qty:Qe.qty,fromQuote:!0,used:!0})),K={};qe.forEach((Qe,Je)=>{K[Je]=!0}),ce(K),pe(qe),o("materials_used",!0,{shouldDirty:!0})}catch(he){console.error("Failed to load quote items: ",he)}})()},[te,o]);const dt=(Q,he)=>{Ne(qe=>({...qe,[Q]:he}))},Pe=Q=>{ce(he=>({...he,[Q]:!he[Q]}))},q=b.filter(Q=>{const he=E.trim().toLowerCase();return he?`${Q.client_name??""} ${Q.email??""} ${Q.phone??""}`.toLowerCase().includes(he):!1});function oe(Q){O(Q),o("client_id",Q.id,{shouldDirty:!0,shouldValidate:!1}),o("client_name",Q.client_name??""),o("client_email",Q.email??""),o("client_phone",Q.phone??""),o("client_street",Q.address?.street??""),o("client_town",Q.address?.town??""),N(Q.client_name),M(!1)}const Ae=Q=>{console.log("Form errors:",Q);const he=Object.keys(Q)[0],qe=Q[he]?.message||"Validation error";alert(`${he}: ${qe}`)},He=async()=>{const Q=f(),he=Q.bum_id,qe=Q.owner_id;!f().owner_id&&t?.owner_id&&o("owner_id",t.owner_id,{shouldValidate:!1});let{client_id:K}=f();if(!K||Number(K)<=0){const Je=f(),rt={client_name:Je.client_name||"",email:Je.client_email||"",phone:Je.client_phone||"",address:{street:Je.client_street||"",town:Je.client_town||"",province:"",country:"South Africa"},company:Je.client_company||"",vat_number:Je.client_vat_number||""};if(rt.client_name||rt.email||rt.phone)try{const jt=await VH(rt);o("client_id",jt.client_id,{shouldDirty:!0,shouldValidate:!0})}catch(jt){alert(jt?.response?.data?.error||"Failed to create client");return}else{alert("Please select a client or enter details to create one.");return}}if(c("materials_used")&&Y.some((Je,rt)=>!Je.fromQuote&&Ke[rt])&&!ve())return;o("is_quoted",I,{shouldDirty:!0}),I&&G&&o("project_id",G,{shouldDirty:!0}),console.log("Owner ID:",qe),console.log("BUM ID:",he);const Qe=Je=>{const rt=Object.entries(be).filter(([,bt])=>Number(bt)>0).map(([bt,jt])=>({user_id:Number(bt),hours:Number(jt)}));return e(Je,{materialLines:Y,usedMaterials:Ke,materialFileUploads:de,sitePhotos:xe,time_entries:rt})};await Promise.resolve(),await r(Qe,Ae)()},[We,Ve]=v.useState([]),[ee,De]=v.useState([]);v.useEffect(()=>{Promise.allSettled([nP(),FH()]).then(([Q,he])=>{Q.status==="fulfilled"&&Ve(Q.value.filter(qe=>qe.active)),he.status==="fulfilled"&&De(he.value.filter(qe=>qe.active))})},[]);const[be,J]=v.useState({});v.useEffect(()=>{J(Q=>{const he={...Q};return B.forEach(qe=>{he[qe.id]==null&&(he[qe.id]=0)}),he})},[B]);const ie=(Q,he)=>{J(qe=>({...qe,[Q]:qe[Q]===he?0:he}))},[Be,$e]=v.useState(!1),[Y,pe]=v.useState([]),we=Y.reduce((Q,he)=>Q+he.unit_price*he.qty,0),ze=Q=>{pe(he=>{const qe=[...he];for(const{product:K,qty:Qe}of Q){if(!Qe)continue;const Je=Number(K.price??K.unit_cost??0),rt=Number(K.unit_cost??0),bt=[K.brand,K.model].filter(Boolean).join(" • ")||`#${K.id}`,jt=qe.findIndex(ln=>ln.product_id===K.id);if(jt>=0)qe[jt].qty+=Qe;else{const ln=qe.length;qe.push({product_id:K.id,name:bt,unit_price:Je,unit_cost:rt,qty:Qe,fromQuote:!1,receiptRequired:!0,used:!0}),ce(Ft=>({...Ft,[ln]:!0}))}}return qe})},ve=()=>{const Q=Y.filter((he,qe)=>!he.fromQuote&&Ke[qe]&&!de[qe]).map(he=>he.name);return Q.length>0?(alert(`Please upload receipts for the following materials:
- ${Q.join(`
- `)}`),!1):!0};v.useEffect(()=>{t&&i({...oO,client_id:Number(t.client_id??0),owner_id:Number(t.owner_id??1),category_id:t.category_id??null,title:t.title??"",description:t.description??"",is_quoted:t.is_quoted??!1,start_at:uO(t.start_at),complete_at:uO(t.complete_at),labourers_count:t.labourers_count??0,labour_hours:t.labour_hours??0,labour_rate_per_hour:t.labour_rate_per_hour??0,materials_used:!!t.materials_used,did_travel:!!t.did_travel,vehicle_id:t.vehicle_id??null,travel_distance_km:t.travel_distance_km??0,coc_required:!!t.coc_required,status:t.status??"draft"})},[t,i]);const Le=c("did_travel");c("status");const ye=c("vehicle_id"),Ee=ee.find(Q=>Q.id===(ye?Number(ye):-1));return Number(c("labourers_count")||0),Number(c("labour_hours")||0),Number(c("labour_rate_per_hour")||0),Number(c("travel_distance_km")||0),Number(Ee?.rate_per_km||0),a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"jcM-appbar",children:[a.jsxs("button",{className:"jcM-back",onClick:()=>x("/jobcards"),"aria-label":"Back to job cards",children:[a.jsx("i",{className:"bi bi-chevron-left"}),a.jsx("span",{children:"Back"})]}),a.jsx("h1",{className:"jcM-title",children:"Job Cards"}),a.jsx("div",{className:"jcM-deviceslot"})]}),a.jsxs("form",{onSubmit:r(e,Ae),className:"jcM-wrap",children:[a.jsxs("section",{className:"bum-selection",children:[a.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[a.jsx("label",{htmlFor:"bum_id",children:"BUSINESS UNIT MANAGER"}),P&&a.jsxs("div",{className:"bum-badge",children:[a.jsx("i",{className:"bi bi-person-check-fill"}),"You are a BUM"]})]}),a.jsx("div",{className:"bum-selection-dropdown",children:a.jsxs("select",{id:"bum_id",className:"form-select",...s("bum_id",{valueAsNumber:!0}),defaultValue:"",children:[a.jsx("option",{value:"",children:"Select BUM..."}),ne.map(Q=>a.jsx("option",{value:Q.id,children:Q.full_name},Q.id))]})}),m.bum_id&&a.jsx("div",{className:"text-danger mt-1 small",children:m.bum_id.message})]}),P&&a.jsxs("section",{className:"bum-selection",children:[a.jsx("div",{className:"d-flex justify-content-between align-items-center mb-2",children:a.jsx("label",{htmlFor:"tech_id",children:"TECHNICIAN (JOB OWNER)"})}),a.jsx("div",{className:"bum-selection-dropdown",children:a.jsxs("select",{id:"owner_id",className:"form-select",...s("owner_id",{valueAsNumber:!0}),defaultValue:"",children:[a.jsx("option",{value:"",children:"Select Technician..."}),B.map(Q=>a.jsx("option",{value:Q.id,children:Q.full_name},Q.id))]})}),m.owner_id&&a.jsx("div",{className:"text-danger mt-1 small",children:String(m.owner_id.message)})]}),a.jsx("section",{className:"mb-3",children:a.jsxs("div",{className:"toggle-button-group",children:[a.jsxs("button",{type:"button",className:`toggle-button ${I?"":"active"}`,onClick:()=>$(!1),children:[a.jsx("i",{className:"bi bi-lightning me-1"})," Out of Scope"]}),a.jsxs("button",{type:"button",className:`toggle-button ${I?"active":""}`,onClick:()=>$(!0),children:[a.jsx("i",{className:"bi bi-check-circle me-1"})," Quoted"]})]})}),a.jsxs("section",{className:"jcM-card",children:[a.jsx("h6",{className:"jcM-section",children:"CLIENT"}),a.jsx("input",{type:"hidden",...s("client_id",{valueAsNumber:!0})}),a.jsxs("div",{className:"jcM-autoComplete",children:[a.jsx("input",{className:"form-control form-control-sm mt-2",placeholder:"Full Name",value:E,onChange:Q=>{N(Q.target.value),M(!0),O(null),o("client_id",0),o("client_name",Q.target.value)},onFocus:()=>M(!!E),onBlur:()=>setTimeout(()=>M(!1),120)}),L&&q.length>0&&a.jsx("ul",{className:"jcM-aclist list-group",role:"listbox",children:q.map(Q=>a.jsxs("li",{className:"list-group-item list-group-item-action",role:"option",onMouseDown:he=>he.preventDefault(),onClick:()=>oe(Q),children:[a.jsx("div",{className:"fw-semibold",children:Q.client_name}),a.jsxs("div",{className:"small text-muted",children:[Q.email||"—"," · ",Q.phone||"—"]})]},Q.id))})]}),a.jsx("input",{className:"form-control form-control-sm mt-2",placeholder:"Email Address",type:"email",...s("client_email"),onChange:Q=>O(null)}),a.jsx("input",{className:"form-control form-control-sm mt-2",placeholder:"Phone Number",...s("client_phone"),onChange:Q=>O(null)}),a.jsxs("div",{className:"jcM-grid2 mt-2",children:[a.jsx("input",{className:"form-control form-control-sm",placeholder:"Street",...s("client_street"),onChange:Q=>O(null)}),a.jsx("input",{className:"form-control form-control-sm",placeholder:"City",...s("client_town"),onChange:Q=>O(null)})]}),T&&a.jsxs("div",{className:"d-flex align-items-center gap-2 mt-2",children:[a.jsxs("span",{className:"badge text-bg-success",children:["Selected: ",T.client_name]}),a.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>{O(null),N(""),o("client_id",0)},children:"Clear"})]})]}),I&&a.jsxs("section",{className:"jcM-card",children:[a.jsx("h6",{className:"jcM-section",children:"PROJECT DETAILS"}),!T&&a.jsx("div",{className:"alert alert-info py-2",children:"Please select a client to view their projects."}),T&&H.length===0&&a.jsx("div",{className:"alert alert-warning py-2",children:"No projects found for this client."}),H.length>0&&a.jsx("div",{className:"project-list",children:H.map(Q=>a.jsxs("div",{className:`project-item ${G===Q.id?"selected":""}`,onClick:()=>U(Q.id),children:[a.jsx("div",{className:"project-name",children:Q.name}),a.jsxs("div",{className:"project-details",children:[Q.system_type&&a.jsx("span",{className:"badge bg-info me-1",children:Q.system_type}),Q.panel_kw&&a.jsxs("span",{className:"badge bg-warning me-1",children:[Q.panel_kw," kWp"]}),Q.battery_kwh&&a.jsx("span",{className:"badge bg-success",children:typeof Q.battery_kwh=="object"?`${Q.battery_kwh.capacity||0} kWh${Q.battery_kwh.quantity>1?` × ${Q.battery_kwh.quantity}`:""}`:`${Q.battery_kwh} kWh`}),Q.inverter_kva&&a.jsx("span",{className:"badge bg-primary",children:typeof Q.inverter_kva=="object"?`${Q.inverter_kva.capacity||0} kVA${Q.inverter_kva.quantity>1?` × ${Q.inverter_kva.quantity}`:""}`:`${Q.inverter_kva} kVA`})]})]},Q.id))})]}),a.jsxs("section",{className:"jcM-card",children:[a.jsx("h6",{className:"jcM-section",children:"JOB DETAILS"}),a.jsx("input",{className:"form-control form-control-sm mb-2",placeholder:"Job title (e.g., Replace DB isolator)",...s("title",{required:"Title is required"})}),m.title&&a.jsx("small",{className:"text-danger",children:String(m.title.message)}),a.jsxs("div",{className:"jcM-grid2",children:[a.jsx(MR,{name:"start_at",control:u,defaultValue:null,render:({field:{value:Q,onChange:he}})=>a.jsx("input",{type:"datetime-local",className:"form-control form-control-sm",value:lO(Q),onChange:qe=>he(cO(qe.target.value)),placeholder:"Start Date"})}),a.jsx(MR,{name:"complete_at",control:u,defaultValue:null,render:({field:{value:Q,onChange:he}})=>a.jsx("input",{type:"datetime-local",className:"form-control form-control-sm",value:lO(Q),onChange:qe=>he(cO(qe.target.value)),placeholder:"End Date"})})]}),a.jsx("textarea",{rows:3,className:"form-control form-control-sm mt-2",placeholder:"Job Description",...s("description")}),a.jsx("div",{className:"jcM-radioList mt-2",children:We.length?We.map(Q=>a.jsxs("label",{className:"jcM-radioItem",children:[a.jsx("input",{type:"radio",value:Q.id,...s("category_id",{valueAsNumber:!0})}),a.jsx("span",{children:Q.name})]},Q.id)):a.jsx("small",{className:"text-muted",children:"No categories loaded. Make sure you're signed in and have categories configured."})})]}),a.jsxs("section",{className:"jcM-card",children:[a.jsx("h6",{className:"jcM-section",children:"TECHNICIAN HOURS"}),B.length===0&&a.jsx("div",{className:"small text-muted",children:"No technicians loaded."}),B.length>0&&a.jsxs("div",{className:"jcM-hoursRow",children:[a.jsx("span",{className:"jcM-tech"}),a.jsx("div",{className:"jcM-dotbar",children:[1,2,3,4,5,6,7,8,9,10].map(Q=>a.jsx("div",{className:"jcM-hourLabel",children:Q},Q))}),a.jsx("div",{className:"jcM-hourSuffix"})]}),B.map(Q=>a.jsxs("div",{className:"jcM-hoursRow",children:[a.jsx("span",{className:"jcM-tech",children:Q.full_name}),a.jsx("div",{className:"jcM-dotbar",children:[1,2,3,4,5,6,7,8,9,10].map(he=>a.jsx("span",{className:`jcM-dot ${be[Q.id]===he?"jcM-dot-selected":""}`,onClick:()=>ie(Q.id,he),role:"radio","aria-checked":be[Q.id]===he,"aria-label":`${Q.full_name} ${he}h`,tabIndex:0},he))}),a.jsx("div",{className:"jcM-hourSuffix",children:be[Q.id]?`${be[Q.id]}h`:""})]},Q.id))]}),a.jsxs("section",{className:"jcM-card",children:[a.jsx("h6",{className:"jcM-section",children:"TRAVEL"}),a.jsxs("div",{className:"form-check form-switch mb-2",children:[a.jsx("input",{className:"form-check-input",type:"checkbox",id:"did_travel",...s("did_travel")}),a.jsx("label",{className:"form-check-label",htmlFor:"did_travel",children:"Enable travel"})]}),Le&&a.jsxs("div",{className:"jcM-grid2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"jcM-label",children:"Vehicle"}),a.jsxs("select",{className:"form-select form-select-sm",...s("vehicle_id",{valueAsNumber:!0}),children:[a.jsx("option",{value:"",children:"— select —"}),ee.map(Q=>a.jsxs("option",{value:Q.id,children:[Q.name," ",Q.registration?`• ${Q.registration}`:""]},Q.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"jcM-label",children:"Distance (km)"}),a.jsx("input",{type:"number",min:0,step:"0.1",className:"form-control form-control-sm",...s("travel_distance_km",{valueAsNumber:!0})})]})]})]}),a.jsxs("section",{className:"jcM-card",children:[a.jsx("div",{className:"card shadow-sm mb-3",children:a.jsxs("div",{className:"card-body",children:[a.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[a.jsx("h5",{className:"card-title mb-0",children:"Materials"}),a.jsxs("span",{className:"badge text-bg-secondary",children:["R ",we.toFixed(2)]})]}),a.jsxs("div",{className:"form-check form-switch mb-2",children:[a.jsx("input",{className:"form-check-input",type:"checkbox",id:"materials_used",...s("materials_used")}),a.jsx("label",{className:"form-check-label",htmlFor:"materials_used",children:"Materials used"})]}),c("materials_used")&&a.jsxs(a.Fragment,{children:[te&&a.jsxs("div",{className:"alert alert-info py-2",children:[a.jsx("i",{className:"bi bi-info-circle me-2"}),"Materials loaded from selected quote"]}),I&&G&&le.length>0&&a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Select Quote:"}),a.jsx("div",{className:"list-group",children:le.map(Q=>a.jsx("button",{type:"button",className:`list-group-item list-group-item-action ${te===Q.id?"active":""}`,onClick:()=>X(Q.id),children:a.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[a.jsxs("div",{children:[a.jsx("div",{className:"fw-bold",children:Q.number}),a.jsx("small",{children:new Date(Q.created_at).toLocaleDateString()})]}),a.jsxs("div",{className:"text-end",children:[a.jsxs("div",{className:"fw-bold",children:["R ",Q.totals?.total_incl_vat?.toFixed(2)||"0.00"]}),a.jsx("span",{className:"badge bg-success",children:"Accepted"})]})]})},Q.id))})]}),a.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary mb-2",onClick:()=>$e(!0),children:"+ Add products"}),Y.length>0?a.jsx("ul",{className:"list-group mb-3",children:Y.map((Q,he)=>a.jsxs("li",{className:"list-group-item",children:[a.jsxs("div",{className:"form-check mb-2",children:[a.jsx("input",{className:"form-check-input",type:"checkbox",id:`material-used-${he}`,checked:Ke[he]??!0,onChange:()=>Pe(he)}),a.jsxs("label",{className:"form-check-label d-flex justify-content-between w-100",htmlFor:`material-used-${he}`,children:[a.jsxs("div",{children:[a.jsx("span",{className:"fw-semibold",children:Q.name}),Q.fromQuote&&a.jsx("span",{className:"badge bg-info ms-2",children:"From Quote"})]}),a.jsxs("span",{className:"text-nowrap",children:["R ",Q.unit_price.toFixed(2)," × ",Q.qty]})]})]}),Ke[he]&&a.jsxs("div",{className:"ms-4",children:[!Q.fromQuote&&a.jsxs("div",{className:"mb-2",children:[a.jsxs("div",{className:"row g-2 align-items-center",children:[a.jsx("div",{className:"col-6",children:a.jsxs("div",{className:"input-group input-group-sm",children:[a.jsx("span",{className:"input-group-text",children:"Actual Cost"}),a.jsx("input",{type:"number",className:"form-control",value:Q.unit_cost,onChange:qe=>{const K=parseFloat(qe.target.value)||0;pe(Qe=>Qe.map((Je,rt)=>rt===he?{...Je,unit_cost:K}:Je))},min:"0",step:"0.01"})]})}),a.jsx("div",{className:"col-6",children:a.jsxs("div",{className:"input-group input-group-sm",children:[a.jsx("span",{className:"input-group-text",children:"Price"}),a.jsx("input",{type:"number",className:"form-control",value:Q.unit_price,onChange:qe=>{const K=parseFloat(qe.target.value)||0;pe(Qe=>Qe.map((Je,rt)=>rt===he?{...Je,unit_price:K}:Je))},min:"0",step:"0.01"})]})})]}),a.jsxs("div",{className:"mt-2",children:[a.jsx("input",{type:"file",id:`material-receipt-${he}`,className:"d-none",accept:"image/*",onChange:qe=>dt(he,qe.target.files?.[0]||null)}),a.jsx("label",{htmlFor:`material-receipt-${he}`,className:`btn btn-sm ${de[he]?"btn-success":"btn-outline-secondary"}`,children:de[he]?a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"bi bi-check-circle"})," Receipt Uploaded"]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"bi bi-receipt"})," Upload Receipt (Required)"]})}),de[he]&&a.jsxs("span",{className:"ms-2 text-muted small",children:[de[he]?.name,"(",Math.round(de[he]?.size/1024)," KB)"]})]})]}),a.jsxs("div",{className:"d-flex justify-content-between align-items-center mt-1",children:[a.jsxs("div",{className:"input-group input-group-sm",style:{maxWidth:"180px"},children:[a.jsx("span",{className:"input-group-text",children:"Qty"}),a.jsx("input",{type:"number",className:"form-control",min:"0",step:"1",value:Q.qty,onChange:qe=>{const K=Math.max(0,parseInt(qe.target.value)||0);pe(Qe=>Qe.map((Je,rt)=>rt===he?{...Je,qty:K}:Je))}})]}),a.jsxs("div",{children:[a.jsxs("span",{className:"fw-bold me-2",children:["Total: R ",(Q.unit_price*Q.qty).toFixed(2)]}),a.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>{pe(qe=>qe.filter((K,Qe)=>Qe!==he)),ce(qe=>{const K={...qe};return delete K[he],K}),Ne(qe=>{const K={...qe};return delete K[he],K})},children:a.jsx("i",{className:"bi bi-trash"})})]})]})]})]},he))}):a.jsx("div",{className:"alert alert-warning",children:"No materials added yet."})]})]})}),a.jsxs("div",{className:"d-flex align-items-center justify-content-between mt-2",children:[a.jsx("h6",{className:"jcM-section mb-0",children:"COC"}),a.jsx("div",{className:"form-check form-switch m-0",children:a.jsx("input",{className:"form-check-input",type:"checkbox",id:"coc_required",...s("coc_required")})})]})]}),a.jsxs("section",{className:"jcM-card",children:[a.jsxs("h6",{className:"jcM-section d-flex justify-content-between align-items-center",children:[a.jsx("span",{children:"SITE PHOTOS"}),a.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:Ue,children:"+ Add"})]}),a.jsx("input",{ref:Ie,type:"file",accept:"image/*",multiple:!0,className:"d-none",onChange:Ze}),xe.length===0&&a.jsx("div",{className:"alert alert-warning py-2 mb-2",children:"No photos selected. You can add photos now; they will upload after save."}),xe.length>0&&a.jsx("div",{className:"row g-3",children:xe.map(Q=>a.jsx("div",{className:"col-6 col-md-4",children:a.jsxs("div",{className:"border rounded position-relative",children:[a.jsx("img",{src:Q.preview,alt:"preview",style:{width:"100%",aspectRatio:"4/3",objectFit:"cover",borderRadius:"4px 4px 0 0"}}),a.jsx("button",{type:"button",className:"btn btn-sm btn-danger position-absolute",style:{top:4,right:4},onClick:()=>gt(Q.id),title:"Remove",children:a.jsx("i",{className:"bi bi-x"})}),a.jsx("textarea",{className:"form-control form-control-sm",placeholder:"Caption (optional)",style:{fontSize:"12px",borderTopLeftRadius:0,borderTopRightRadius:0},rows:2,value:Q.caption,onChange:he=>mt(Q.id,he.target.value)})]})},Q.id))})]}),a.jsxs("div",{className:"jcM-stickyBar",children:[n&&a.jsx("button",{type:"button",className:"btn btn-outline-secondary flex-fill",onClick:n,disabled:h,children:"Cancel"}),a.jsx("button",{type:"button",className:"btn btn-primary flex-fill",onClick:He,disabled:h,children:h?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),'"Saving…"']}):"Save"})]}),a.jsx(sme,{open:Be,onClose:()=>$e(!1),onAdd:ze})]})]})}function ame(){const t=ms(),{user:e,token:n}=is(),[s,r]=v.useState(!1);if(v.useEffect(()=>Nl(n),[n]),!e?.id)return a.jsx("div",{className:"p-3",children:"Loading…"});const i=async(o,c)=>{try{r(!0);const u=c?.time_entries||[],f=await PH({...o,time_entries:u});if(o.materials_used&&c?.materialLines?.length>0){const{materialLines:m,usedMaterials:h,materialFileUploads:g}=c,x=m.filter((b,A)=>h[A]??!0);for(let b=0;b<x.length;b++){const A=x[b],_=m.findIndex(C=>C===A),j=await WH({job_card_id:f.id,product_id:A.product_id,quantity:A.qty,unit_price_at_time:A.unit_price,unit_cost_at_time:A.unit_cost,note:A.fromQuote?"From accepted quote":"Manually added"});if(!A.fromQuote){const C=g[_];C&&await UH(f.id,j.id,C)}}}if(c?.sitePhotos?.length){const m=localStorage.getItem("access_token");for(const h of c.sitePhotos){const g=new FormData;g.append("file",h.file),g.append("attachement_type","site"),h.caption.trim()&&g.append("caption",h.caption.trim()),await fetch(`${Ce}/api/jobcards/${f.id}/attachments`,{method:"POST",headers:{Authorization:`Bearer ${m||""}`},body:g})}}t(`/jobcards/${f.id}`)}catch(u){console.error("Failed to create job card: ",u),alert("An error occurred while saving the job card")}finally{r(!1)}};return a.jsx("div",{className:"container-fluid px-0",children:a.jsx(rme,{initial:{owner_id:e.id,status:"draft"},onSubmit:i,onCancel:()=>t(-1),isSubmitting:s},e.id)})}const dO=t=>{if(!t)return"—";const e=new Date(t);if(isNaN(e.getTime()))return"—";const n=String(e.getDate()).padStart(2,"0"),s=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getFullYear()).slice(-2);return`${n}/${s}/${r}`},Ef=t=>t==null||isNaN(Number(t))?"-":new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR"}).format(Number(t));function ime({job:t,categoryName:e,onEdit:n}){const s=ms(),{user:r}=is(),[i,o]=v.useState(!1),[c,u]=v.useState(!1),[f,m]=v.useState(!1),[h,g]=v.useState(()=>t.attachments||[]),[x,b]=v.useState(null),[A,_]=v.useState(0);v.useEffect(()=>{g(t.attachments||[])},[t]);const j=t.client_name||t.client?.client_name||"Client",C=t.client_address||t.client?.address?.street||"Location";Number(t.labourers_count),Number(t.labour_hours),Number(t.labour_rate_per_hour);const k=!!t.did_travel,E=t.vehicle_name||x&&x.name||null,N=t.vehicle_registration||x&&x.vehicle_registration||"",L=Number(t.travel_distance_km)||0,M=Number(t.rate_per_km)?Number(t.rate_per_km):0,T=L*M;v.useEffect(()=>{t.vehicle_id&&!t.vehicle_name&&(async()=>{try{const D=localStorage.getItem("access_token"),B=await fetch(`${Ce}/api/vehicles`,{headers:{Authorization:`Bearer ${D||""}`}});if(B.ok){const le=(await B.json()).find(ae=>ae.id===t.vehicle_id);le&&b(le)}}catch(D){console.warn("Failed loading vehicles: ",D)}})()},[t.vehicle_id,t.vehicle_name]);const O=D=>D?D.startsWith("http://")||D.startsWith("https://")?D:`${Ce}${D}`:"",I=h.filter(D=>(D.attachment_type||"site").toLowerCase()==="site"),H=h.filter(D=>(D.attachment_type||"").toLowerCase()==="receipt"),V=I;v.useEffect(()=>{A>=V.length&&_(0)},[V.length,A]);const G=V[A]?.url?O(V[A].url):void 0,U=()=>{V.length<2||_(D=>(D-1+V.length)%V.length)},R=()=>{V.length<2||_(D=>(D+1)%V.length)},P=D=>_(D),Z=r?.role==="admin",ne=async()=>{if(Z)try{u(!0),await LH(t.id),s("/jobcards",{replace:!0})}catch(D){console.error("Failed to delete job card:",D),alert("Failed to delete job card. Please try again later")}finally{u(!1)}};return a.jsxs("div",{className:"jcD-page",children:[a.jsxs("div",{className:"jcD-appbar",children:[a.jsxs("button",{className:"jcD-back",onClick:()=>s("/jobcards"),"aria-label":"Back",children:[a.jsx("i",{className:"bi bi-chevron-left"}),a.jsx("span",{children:"Back"})]}),a.jsx("div",{className:"jcD-appbar-title",children:j}),a.jsx("button",{className:"jcD-done",onClick:n,"aria-label":"Edit",children:"Edit"}),Z&&a.jsx("button",{className:"jcD-delete",onClick:()=>o(!0),"aria-label":"Delete",disabled:c,children:a.jsx("i",{className:"bi bi-trash"})})]}),a.jsxs("div",{className:"jcD-header",children:[a.jsx("div",{className:"jcD-avatar","aria-hidden":!0}),a.jsx("div",{className:"jcD-title",children:j}),a.jsx("div",{className:"jcD-subtle",children:C})]}),a.jsxs("div",{className:"jcD-meta",children:[a.jsxs("div",{className:"jcD-chip",children:[a.jsx("div",{className:"jcD-chip-value",children:e||"—"}),a.jsx("div",{className:"jcD-chip-label",children:"Category"})]}),a.jsxs("div",{className:"jcD-chip",children:[a.jsx("div",{className:"jcD-chip-value",children:dO(t.start_at)}),a.jsx("div",{className:"jcD-chip-label",children:"Start Date"})]}),a.jsxs("div",{className:"jcD-chip",children:[a.jsx("div",{className:"jcD-chip-value",children:dO(t.complete_at)}),a.jsx("div",{className:"jcD-chip-label",children:"End Date"})]}),a.jsxs("div",{className:"jcD-chip",children:[a.jsx("div",{className:"jcD-chip-value",children:t.owner_name||"Not Assigned"}),a.jsx("div",{className:"jcD-chip-label",children:"Job Owner"})]}),a.jsxs("div",{className:"jcD-chip",children:[a.jsx("div",{className:"jcD-chip-value",children:t.bum_name||"Not assigned"}),a.jsx("div",{className:"jcD-chip-label",children:"BUM"})]})]}),a.jsxs("div",{className:"jcD-card",children:[a.jsx("div",{className:"jcD-card-title",children:"Job Description"}),a.jsx("div",{className:"jcD-card-body jcD-prewrap",children:t.description||"—"})]}),Array.isArray(t.time_entries)&&t.time_entries.length>0&&a.jsxs("div",{className:"jcD-card",children:[a.jsx("div",{className:"jcD-card-title",children:"Technician Labour"}),a.jsx("div",{className:"jcD-card-body",children:a.jsxs("table",{className:"table table-sm mb-0",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{style:{width:"40%"},children:"Technician"}),a.jsx("th",{}),a.jsx("th",{}),a.jsx("th",{style:{width:"20%",textAlign:"right"},children:"Hours"})]})}),a.jsxs("tbody",{children:[t.time_entries.map(D=>a.jsxs("tr",{children:[a.jsx("td",{children:D.user_name||D.user_id}),a.jsx("td",{}),a.jsx("td",{}),a.jsx("td",{style:{textAlign:"right"},children:Number(D.hours).toFixed(1)})]},D.id)),a.jsxs("tr",{children:[a.jsx("td",{colSpan:3,style:{textAlign:"right",fontWeight:700},children:"Total"}),a.jsx("td",{style:{textAlign:"right",fontWeight:700},children:Ef(t.time_entries.reduce((D,B)=>D+Number(B.amount||0),0))})]})]})]})})]}),(k||E||L>0)&&a.jsxs("div",{className:"jcD-card",children:[a.jsx("div",{className:"jcD-card-title",children:"Travel"}),a.jsx("div",{className:"jcD-card-body",children:a.jsxs("div",{className:"jcD-veh-grid",children:[a.jsxs("div",{className:"jcD-veh-item",children:[a.jsx("div",{className:"jcD-veh-label",children:"Vehicle"}),a.jsxs("div",{className:"jcD-veh-value",children:[E||"—",N&&a.jsxs("span",{className:"jcD-veh-sub",children:["(",N,")"]})]})]}),a.jsxs("div",{className:"jcD-veh-item",children:[a.jsxs("div",{className:"jcD-veh-label",children:["Distance",a.jsx("span",{className:"jcD-veh-hint",children:" (round trip)"})]}),a.jsx("div",{className:"jcD-veh-value",children:L>0?a.jsxs(a.Fragment,{children:[L.toFixed(1)," ",a.jsx("span",{className:"jcD-veh-unit",children:"km"})]}):"—"})]}),a.jsxs("div",{className:"jcD-veh-item",children:[a.jsx("div",{className:"jcD-veh-label",children:"Travel Cost"}),a.jsx("div",{className:"jcD-veh-value",children:L>0&&M>0?Ef(T):"—"})]})]})})]}),Array.isArray(t.materials)&&t.materials.length>0&&a.jsxs("div",{className:"jcD-card jcD-mats",children:[a.jsxs("button",{type:"button",className:"jcD-mats-header",onClick:()=>m(D=>!D),"aria-expanded":f,children:[a.jsxs("div",{className:"jcD-mats-header-left",children:[a.jsx("span",{className:"jcD-mats-title",children:"Materials"}),a.jsxs("span",{className:"jcD-mats-count",children:[t.materials.length," item",t.materials.length!==1&&"s"]})]}),a.jsxs("div",{className:"jcD-mats-header-right",children:[a.jsx("span",{className:"jcD-mats-total",children:Ef(t.materials.reduce((D,B)=>D+Number(B.unit_price_at_time||0)*Number(B.quantity||0),0))}),a.jsx("i",{className:`bi bi-chevron-${f?"up":"down"} jcD-mats-chevron`,"aria-hidden":!0})]})]}),a.jsx("div",{className:`jcD-mats-body ${f?"open":""}`,children:a.jsxs("table",{className:"jcD-mats-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{style:{width:"42%"},children:"Material"}),a.jsx("th",{style:{width:"14%"},className:"ta-center",children:"Qty"}),a.jsx("th",{style:{width:"20%"},className:"ta-end",children:"Unit Price"}),a.jsx("th",{style:{width:"24%"},className:"ta-end",children:"Line Total"})]})}),a.jsx("tbody",{children:t.materials.map(D=>{const B=Number(D.quantity||0),se=Number(D.unit_price_at_time||0),le=se*B;return a.jsxs("tr",{children:[a.jsx("td",{children:a.jsxs("div",{className:"jcD-mat-name",children:[D.brand_name," ",D.product_name||`#${D.product_id}`]})}),a.jsx("td",{className:"ta-center",children:B}),a.jsx("td",{className:"ta-end",children:Ef(se)}),a.jsx("td",{className:"ta-end fw-semibold",children:Ef(le)})]},D.id)})})]})})]}),a.jsxs("div",{className:"jcD-card",children:[a.jsx("div",{className:"jcD-card-title",children:"Receipt Photos"}),a.jsxs("div",{className:"jcD-card-body",children:[H.length===0&&a.jsx("div",{className:"jcD-empty",children:"No receipt photos"}),H.length>0&&a.jsx("div",{className:"jcD-photoStrip",role:"list",children:H.map(D=>a.jsx("button",{className:"jcD-thumb",role:"listitem",onClick:()=>window.open(O(D.url),"_blank"),title:D.filename||"Receipt",children:a.jsx("img",{src:O(D.url),alt:"Receipt"})},D.id||D.url))})]})]}),a.jsxs("div",{className:"jcD-card",children:[a.jsx("div",{className:"jcD-card-title",children:"Site Photos"}),a.jsxs("div",{className:"jcD-card-body",children:[G?a.jsxs("div",{className:"jcD-siteHeroWrap position-relative",children:[a.jsx("img",{src:G,alt:`Site ${A+1} of ${V.length}`,className:"jcD-siteHero"}),V[A].caption&&a.jsx("div",{className:"jcD-caption-overlay",children:V[A].caption}),V.length>1&&a.jsxs(a.Fragment,{children:[a.jsx("button",{type:"button",className:"jcD-heroNav jcD-heroNav-left",onClick:U,"aria-label":"Previous photo",children:a.jsx("i",{className:"bi bi-chevron-left"})}),a.jsx("button",{type:"button",className:"jcD-heroNav jcD-heroNav-right",onClick:R,"aria-label":"Next photo",children:a.jsx("i",{className:"bi bi-chevron-right"})}),a.jsxs("div",{className:"jcD-heroCounter",children:[A+1," / ",V.length]})]})]}):a.jsx("div",{className:"jcD-empty",children:"No site photos"}),V.length>1&&a.jsx("div",{className:"jcD-siteGrid",children:V.map((D,B)=>{const se=O(D.url),le=B===A;return a.jsxs("div",{className:`jcD-siteThumbWrap ${le?"active":""}`,children:[a.jsx("button",{type:"button",className:`jcD-siteThumb ${le?"active":""}`,onClick:()=>P(B),"aria-label":`Show photo ${B+1}`,title:D.filename||"Photo",children:a.jsx("img",{src:se,alt:D.caption||`Site ${B+1}`})}),D.caption&&a.jsx("div",{className:"jcD-thumb-cap",children:D.caption})]},D.id||D.url)})})]})]}),i&&a.jsx("div",{className:"jcD-modal-overlay",children:a.jsxs("div",{className:"jcD-modal-content",children:[a.jsx("h3",{children:"Delete Job Card"}),a.jsx("p",{children:"Are you sure you want to delete this job card? This action cannot be undone."}),a.jsxs("div",{className:"jcD-modal-actions",children:[a.jsx("button",{className:"jcD-modal-cancel-btn",onClick:()=>o(!1),disabled:c,children:"Cancel"}),a.jsx("button",{className:"jcD-modal-delete-btn",onClick:ne,disabled:c,children:c?"Deleting...":"Delete"})]})]})})]})}function ome(){const{id:t}=Vi(),e=ms(),[n,s]=v.useState(null),[r,i]=v.useState("");return v.useEffect(()=>{let o=!0;return(async()=>{if(!t)return;const c=await OH(Number(t));if(o&&(s(c),c?.category_id))try{const f=(await nP()).find(m=>m.id===c.category_id);o&&i(f?.name||"")}catch{}})(),()=>{o=!1}},[t]),n?a.jsx(ime,{job:n,categoryName:r,onEdit:()=>e(`/jobcards/${n.id}/edit`)}):a.jsx("div",{className:"container py-4",children:a.jsx("div",{className:"text-muted",children:"Loading job card…"})})}function Tf({children:t}){const e=ua(),s=uz()==="POP",r={initial:i=>({x:i?-20:20,opacity:0}),animate:{x:0,opacity:1,transition:{duration:.22,ease:[.25,.1,.25,1]}},exit:i=>({x:i?20:-20,opacity:0,transition:{duration:.18,ease:[.42,0,1,1]}})};return a.jsx(Aq,{initial:!1,custom:s,mode:"popLayout",children:a.jsx(AA.div,{custom:s,variants:r,initial:"initial",animate:"animate",exit:"exit",children:t},e.pathname)})}const lme=()=>{const[t,e]=v.useState([]),[n,s]=v.useState(!0),[r,i]=v.useState(""),{showNotification:o}=Os(),{user:c}=is(),[u,f]=v.useState(!1),[m,h]=v.useState(null);v.useEffect(()=>{c&&c.role!=="admin"&&(window.location.href="/")},[c]);const g=async()=>{try{s(!0);const _=await Re.get(`${Ce}/api/products/recyclebin`);e(_.data)}catch(_){i(_.response?.data?.message||"Failed to load deleted products")}finally{s(!1)}};v.useEffect(()=>{g()},[]);const x=async _=>{try{await Re.post(`${Ce}/api/products/${_}/restore`),o("Product restored successfully","success"),g()}catch(j){o(j.response?.data?.message||"Failed to restore product","danger")}},b=_=>{h(_),f(!0)},A=async()=>{if(m)try{await Re.delete(`${Ce}/api/products/${m.id}/permanent`),o("Product permanently deleted","success"),f(!1),g()}catch(_){o(_.response?.data?.message||"Failed to permanently delete product","danger")}};return n?a.jsx(Ot,{animation:"border"}):r?a.jsx(kt,{variant:"danger",children:r}):a.jsxs("div",{className:"container py-4",children:[a.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[a.jsxs("h2",{children:[a.jsx("i",{className:"bi bi-trash"})," Product Recycle Bin"]}),a.jsxs(Fe,{variant:"outline-secondary",onClick:()=>window.history.back(),children:[a.jsx("i",{className:"bi bi-arrow-left"})," Back"]})]}),t.length===0?a.jsx(kt,{variant:"info",children:"No deleted products found."}):a.jsxs(vn,{responsive:!0,hover:!0,children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"ID"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Brand"}),a.jsx("th",{children:"Model"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Deleted By"}),a.jsx("th",{children:"Deleted At"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:t.map(_=>a.jsxs("tr",{children:[a.jsx("td",{children:_.id}),a.jsx("td",{children:a.jsx(tt,{bg:"secondary",children:_.category||"N/A"})}),a.jsx("td",{children:_.brand}),a.jsx("td",{children:_.model}),a.jsx("td",{children:_.price?new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR"}).format(_.price):"N/A"}),a.jsx("td",{children:_.deleted_by_name||"Unknown"}),a.jsx("td",{children:_.deleted_at_formatted||"Unknown"}),a.jsxs("td",{children:[a.jsxs(Fe,{variant:"success",size:"sm",onClick:()=>x(_.id),className:"me-2",children:[a.jsx("i",{className:"bi bi-arrow-counterclockwise"})," Restore"]}),a.jsxs(Fe,{variant:"danger",size:"sm",onClick:()=>b(_),children:[a.jsx("i",{className:"bi bi-trash"})," Delete Permanently"]})]})]},_.id))})]}),a.jsxs(wt,{show:u,onHide:()=>f(!1),children:[a.jsx(wt.Header,{closeButton:!0,children:a.jsx(wt.Title,{children:"Confirm Permanent Delete"})}),a.jsx(wt.Body,{children:m&&a.jsxs("p",{children:["Are you sure you want to ",a.jsx("strong",{children:"permanently delete"})," this product?",a.jsx("br",{}),a.jsx("br",{}),a.jsx("strong",{children:"Brand:"})," ",m.brand,a.jsx("br",{}),a.jsx("strong",{children:"Model:"})," ",m.model,a.jsx("br",{}),a.jsx("br",{}),"This action cannot be undone."]})}),a.jsxs(wt.Footer,{children:[a.jsx(Fe,{variant:"secondary",onClick:()=>f(!1),children:"Cancel"}),a.jsx(Fe,{variant:"danger",onClick:A,children:"Delete Permanently"})]})]})]})},cme=()=>{const{user:t}=is(),e=t?.role==="admin",[n,s]=v.useState([]),[r,i]=v.useState(!0),[o,c]=v.useState(""),[u,f]=v.useState(!1),[m,h]=v.useState(null),g=async()=>{try{i(!0);const A=localStorage.getItem("access_token"),_=await fetch(`${Ce}/api/projects/recyclebin`,{headers:{Authorization:`Bearer ${A||""}`}}),j=await _.json();if(!_.ok)throw new Error(j.error||"Failed");s(Array.isArray(j)?j:[])}catch(A){c(A.message)}finally{i(!1)}};v.useEffect(()=>{e&&g()},[e]);const x=async A=>{const _=localStorage.getItem("access_token");try{const j=await fetch(`${Ce}/api/projects/${A}/restore`,{method:"POST",headers:{Authorization:`Bearer ${_||""}`}});if(!j.ok){const C=await j.json().catch(()=>({}));throw new Error(C.error||"Restore failed")}await g()}catch(j){alert(j.message)}},b=async()=>{if(!m)return;const A=localStorage.getItem("access_token");try{const _=await fetch(`${Ce}/api/projects/${m.id}/permanent`,{method:"DELETE",headers:{Authorization:`Bearer ${A||""}`}}),j=await _.json().catch(()=>({}));if(!_.ok)throw new Error(j.error||"Delete failed");f(!1),h(null),await g()}catch(_){alert(_.message)}};return e?a.jsxs("div",{className:"container py-4",children:[a.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[a.jsxs("h2",{children:[a.jsx("i",{className:"bi bi-trash"})," Project Recycle Bin"]}),a.jsx("div",{children:a.jsxs(Fe,{variant:"outline-secondary",onClick:()=>window.history.back(),children:[a.jsx("i",{className:"bi bi-arrow-left"})," Back"]})})]}),r&&a.jsx(Ot,{animation:"border"}),o&&a.jsx(kt,{variant:"danger",children:o}),!r&&!o&&n.length===0&&a.jsx(kt,{variant:"info",children:"No deleted projects."}),!r&&n.length>0&&a.jsxs(vn,{hover:!0,responsive:!0,children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"ID"}),a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Client"}),a.jsx("th",{children:"System"}),a.jsx("th",{children:"Design"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Deleted At"}),a.jsx("th",{children:"Deleted By"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:n.map(A=>a.jsxs("tr",{children:[a.jsx("td",{children:A.id}),a.jsx("td",{children:A.name}),a.jsx("td",{children:A.client_name}),a.jsx("td",{children:a.jsx(tt,{bg:"info",children:A.system_type||"—"})}),a.jsx("td",{children:a.jsx(tt,{bg:"secondary",children:A.design_type||"—"})}),a.jsx("td",{children:A.location||"—"}),a.jsx("td",{children:A.deleted_at?new Date(A.deleted_at).toLocaleString():"—"}),a.jsx("td",{children:A.deleted_by_name||"—"}),a.jsxs("td",{children:[a.jsxs(Fe,{variant:"success",size:"sm",className:"me-2",onClick:()=>x(A.id),children:[a.jsx("i",{className:"bi bi-arrow-counterclockwise"})," Restore"]}),a.jsxs(Fe,{variant:"danger",size:"sm",onClick:()=>{h(A),f(!0)},disabled:!0,children:[a.jsx("i",{className:"bi bi-trash"})," Permanent"]})]})]},A.id))})]}),a.jsxs(wt,{show:u,onHide:()=>f(!1),children:[a.jsx(wt.Header,{closeButton:!0,children:a.jsx(wt.Title,{children:"Permanent Delete"})}),a.jsx(wt.Body,{children:m&&a.jsxs("p",{children:["Permanently delete project ",a.jsx("strong",{children:m.name}),"?",a.jsx("br",{}),"This cannot be undone."]})}),a.jsxs(wt.Footer,{children:[a.jsx(Fe,{variant:"secondary",onClick:()=>f(!1),children:"Cancel"}),a.jsx(Fe,{variant:"danger",onClick:b,children:"Delete Forever"})]})]})]}):a.jsx(kt,{variant:"danger",className:"m-4",children:"Access denied."})};function QS({projectId:t}){return v.useEffect(()=>{},[t]),null}function ume(){const{id:t}=Vi(),e=parseInt(t,10);return a.jsxs(a.Fragment,{children:[a.jsx(QS,{projectId:e}),a.jsx(f5,{projectId:e})]})}function dme(){const{id:t}=Vi(),e=parseInt(t,10);return a.jsxs(a.Fragment,{children:[a.jsx(QS,{projectId:e}),a.jsx(q5,{projectId:e})]})}Re.interceptors.request.use(t=>{const e=localStorage.getItem("access_token");return e&&(t.headers.Authorization=`Bearer ${e}`),t},t=>Promise.reject(t));function fme(){return a.jsx(YH,{children:a.jsx(a$,{children:a.jsx(Qz,{children:a.jsxs(AO,{children:[a.jsx(sn,{path:"/login",element:a.jsx(y7,{})}),a.jsx(sn,{path:"/register",element:a.jsx(x7,{})}),a.jsx(sn,{path:"/*",element:a.jsx(hme,{})})]})})})})}function hme(){const{loading:t}=is();return t?a.jsxs("div",{className:"loading-container",children:[a.jsx("div",{className:"loading-spinner"}),a.jsx("p",{children:"Loading..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(p7,{}),a.jsxs(Cs,{children:[a.jsx(g7,{}),a.jsxs("div",{style:{paddingTop:"72px"},children:[a.jsx(QS,{}),a.jsxs(AO,{children:[a.jsx(sn,{path:"/",element:a.jsx(mQ,{})}),a.jsx(sn,{path:"/clients",element:a.jsx(pQ,{})}),a.jsx(sn,{path:"/clients/add",element:a.jsx(gQ,{})}),a.jsx(sn,{path:"/clients/edit/:id",element:a.jsx($fe,{})}),a.jsx(sn,{path:"/projects",element:a.jsx(Cs,{requiredRole:["design","manager"],children:a.jsx(xQ,{})})}),a.jsx(sn,{path:"/projects/add",element:a.jsx(Cs,{requiredRole:["design","manager"],children:a.jsx(Hfe,{})})}),a.jsx(sn,{path:"/projects/edit/:id",element:a.jsx(Cs,{requiredRole:["design","manager"],children:a.jsx(Ufe,{})})}),a.jsx(sn,{path:"/projects/:id",element:a.jsx(Cs,{requiredRole:["design","manager"],children:a.jsx(zfe,{})})}),a.jsx(sn,{path:"/projects/:id/system-design",element:a.jsx(Cs,{requiredRole:["design","manager"],children:a.jsx(ume,{})})}),a.jsx(sn,{path:"/projects/:id/financial-model",element:a.jsx(Cs,{requiredRole:["design","manager"],children:a.jsx(dme,{})})}),a.jsx(sn,{path:"/projects/:id/optimize",element:a.jsx(Cs,{requiredRole:["design","manager"],children:a.jsx(X5,{})})}),a.jsx(sn,{path:"/products-admin",element:a.jsx(Cs,{requiredRole:["sales","manager"],children:a.jsx(Wfe,{})})}),a.jsx(sn,{path:"/recycle-bin",element:a.jsx(Tf,{children:a.jsx(Cs,{requiredRole:["admin","sales"],children:a.jsx(lme,{})})})}),a.jsx(sn,{path:"/projects/recycle-bin",element:a.jsx(Tf,{children:a.jsx(Cs,{requiredRole:["admin","manager","design"],children:a.jsx(cme,{})})})}),a.jsx(sn,{path:"/system-builder",element:a.jsx(qfe,{})}),a.jsx(sn,{path:"/load-profile-manager",element:a.jsx(Xfe,{})}),a.jsx(sn,{path:"/tariffs",element:a.jsx(Zfe,{})}),a.jsx(sn,{path:"/proposal/:id",element:a.jsx(Kfe,{})}),a.jsx(sn,{path:"/printable-bom/:projectId",element:a.jsx(Hg,{})}),a.jsx(sn,{path:"/projects/:projectId/printable-bom/:docId",element:a.jsx(Hg,{})}),a.jsx(sn,{path:"/projects/:projectId/quotes/:docId",element:a.jsx(Hg,{})}),a.jsx(sn,{path:"/jobcards",element:a.jsx(Tf,{children:a.jsx(Cs,{requiredRole:["admin","team_leader","technician","sales"],children:a.jsx(the,{})})})}),a.jsx(sn,{path:"/jobcards/new",element:a.jsx(Tf,{children:a.jsx(Cs,{requiredRole:["admin","team_leader"],children:a.jsx(ame,{})})})}),a.jsx(sn,{path:"/jobcards/:id",element:a.jsx(Tf,{children:a.jsx(Cs,{requiredRole:["admin","team_leader","technician","sales"],children:a.jsx(ome,{})})})}),a.jsx(sn,{path:"/admin",element:a.jsx(Cs,{requiredRole:"admin",children:a.jsx(b7,{})})}),a.jsx(sn,{path:"/rules",element:a.jsx(Cs,{requiredRole:"admin",children:a.jsx(Jfe,{})})})]})]})]})]})}const mme=P6.createRoot(document.getElementById("root"));mme.render(a.jsx(fe.StrictMode,{children:a.jsx(mfe,{children:a.jsx(fme,{})})}))});export default pme();
